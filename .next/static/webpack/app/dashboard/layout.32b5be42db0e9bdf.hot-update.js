"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/dashboard/layout",{

/***/ "(app-pages-browser)/./src/app/components/AIchat/FloatingChatWidget.tsx":
/*!**********************************************************!*\
  !*** ./src/app/components/AIchat/FloatingChatWidget.tsx ***!
  \**********************************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ FloatingChatWidget; }\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react-dom */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react-dom/index.js\");\n/* harmony import */ var framer_motion__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! framer-motion */ \"(app-pages-browser)/./node_modules/framer-motion/dist/es/components/AnimatePresence/index.mjs\");\n/* harmony import */ var framer_motion__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! framer-motion */ \"(app-pages-browser)/./node_modules/framer-motion/dist/es/render/components/motion/proxy.mjs\");\n/* harmony import */ var _barrel_optimize_names_MessageCircle_X_lucide_react__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! __barrel_optimize__?names=MessageCircle,X!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/message-circle.js\");\n/* harmony import */ var _barrel_optimize_names_MessageCircle_X_lucide_react__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! __barrel_optimize__?names=MessageCircle,X!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/x.js\");\n/* harmony import */ var next_dynamic__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! next/dynamic */ \"(app-pages-browser)/./node_modules/next/dist/shared/lib/app-dynamic.js\");\n/* harmony import */ var next_dynamic__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(next_dynamic__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _app_components_AIchat_FloatingChatContext__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/app/components/AIchat/FloatingChatContext */ \"(app-pages-browser)/./src/app/components/AIchat/FloatingChatContext.tsx\");\n/* harmony import */ var _app_utils_api__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/app/utils/api */ \"(app-pages-browser)/./src/app/utils/api.ts\");\n// src/app/components/AIchat/FloatingChatWidget.tsx\n/* __next_internal_client_entry_do_not_use__ default auto */ \nvar _s = $RefreshSig$(), _s1 = $RefreshSig$();\n\n\n\n\n\n\n\n// Lazy-load chat pieces\nconst CoachChat = next_dynamic__WEBPACK_IMPORTED_MODULE_3___default()(()=>__webpack_require__.e(/*! import() */ \"_app-pages-browser_src_app_components_AIchat_CoachChat_tsx\").then(__webpack_require__.bind(__webpack_require__, /*! @/app/components/AIchat/CoachChat */ \"(app-pages-browser)/./src/app/components/AIchat/CoachChat.tsx\")), {\n    loadableGenerated: {\n        modules: [\n            \"/Users/theodorosiakovou/Projects/ai-platform/src/app/components/AIchat/FloatingChatWidget.tsx -> \" + \"@/app/components/AIchat/CoachChat\"\n        ]\n    },\n    ssr: false\n});\n_c = CoachChat;\nconst CoachChatHistory = next_dynamic__WEBPACK_IMPORTED_MODULE_3___default()(()=>__webpack_require__.e(/*! import() */ \"_app-pages-browser_src_app_components_AIchat_AiChatHistorySidebar_tsx\").then(__webpack_require__.bind(__webpack_require__, /*! @/app/components/AIchat/AiChatHistorySidebar */ \"(app-pages-browser)/./src/app/components/AIchat/AiChatHistorySidebar.tsx\")), {\n    loadableGenerated: {\n        modules: [\n            \"/Users/theodorosiakovou/Projects/ai-platform/src/app/components/AIchat/FloatingChatWidget.tsx -> \" + \"@/app/components/AIchat/AiChatHistorySidebar\"\n        ]\n    },\n    ssr: false\n});\n_c1 = CoachChatHistory;\nfunction useIsClient() {\n    _s();\n    const [c, setC] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>setC(true), []);\n    return c;\n}\n_s(useIsClient, \"2mdbR9aDjo7AKp/vcVBAMwZ7mKo=\");\nfunction FloatingChatWidget() {\n    _s1();\n    const isClient = useIsClient();\n    const { isOpen, open, close, anchor, setAnchor, email: emailFromCtx } = (0,_app_components_AIchat_FloatingChatContext__WEBPACK_IMPORTED_MODULE_4__.useFloatingChat)();\n    // Chat session state\n    const [selectedConvoId, setSelectedConvoId] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)();\n    const [refreshKey, setRefreshKey] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(0);\n    // Header dropdown state\n    const [historyOpen, setHistoryOpen] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const historyRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    // Refs for dragging\n    const fabRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const panelRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const anchorRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(anchor);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        anchorRef.current = anchor;\n    }, [\n        anchor\n    ]);\n    // ── layout constants ────────────────────────────────────────────────────────\n    const MARGIN = 12;\n    const BUBBLE = 48; // h-12 w-12\n    const PANEL_W = 420;\n    const PANEL_H = 560;\n    // Place bottom-right on first mount if still default (24,24)\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (false) {}\n        if (anchor.x === 24 && anchor.y === 24) {\n            const next = clamp(window.innerWidth - BUBBLE - 24, window.innerHeight - BUBBLE - 24, BUBBLE, BUBBLE);\n            setAnchor(next);\n        }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n    // Keep inside viewport\n    const clamp = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((x, y, w, h)=>{\n        const maxX = Math.max(MARGIN, window.innerWidth - w - MARGIN);\n        const maxY = Math.max(MARGIN, window.innerHeight - h - MARGIN);\n        return {\n            x: Math.min(Math.max(x, MARGIN), maxX),\n            y: Math.min(Math.max(y, MARGIN), maxY)\n        };\n    }, []);\n    // Smart panel position: try to place up-left of the FAB, but keep on-screen\n    const computePanelPos = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((fab)=>{\n        const desiredX = fab.x - (PANEL_W - BUBBLE / 2);\n        const desiredY = fab.y - (PANEL_H - BUBBLE / 2);\n        return clamp(desiredX, desiredY, PANEL_W, PANEL_H);\n    }, [\n        clamp\n    ]);\n    // Drag via React pointerdown + global move/up + rAF\n    const dragState = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)({\n        dragging: false,\n        startX: 0,\n        startY: 0,\n        startAnchor: {\n            x: 0,\n            y: 0\n        },\n        raf: 0,\n        pending: {\n            x: 0,\n            y: 0\n        }\n    });\n    const onFabPointerDown = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((e)=>{\n        const el = e.currentTarget;\n        dragState.current.dragging = true;\n        dragState.current.startX = e.clientX;\n        dragState.current.startY = e.clientY;\n        dragState.current.startAnchor = {\n            ...anchorRef.current\n        };\n        dragState.current.pending = anchorRef.current;\n        try {\n            var _el_setPointerCapture;\n            (_el_setPointerCapture = el.setPointerCapture) === null || _el_setPointerCapture === void 0 ? void 0 : _el_setPointerCapture.call(el, e.pointerId);\n        } catch (e) {}\n        e.preventDefault();\n        document.body.style.userSelect = \"none\";\n        el.style.touchAction = \"none\";\n        const onMove = (ev)=>{\n            if (!dragState.current.dragging) return;\n            const dx = ev.clientX - dragState.current.startX;\n            const dy = ev.clientY - dragState.current.startY;\n            const next = clamp(dragState.current.startAnchor.x + dx, dragState.current.startAnchor.y + dy, BUBBLE, BUBBLE);\n            dragState.current.pending = next;\n            if (!dragState.current.raf) {\n                dragState.current.raf = requestAnimationFrame(()=>{\n                    dragState.current.raf = 0;\n                    const p = dragState.current.pending;\n                    if (p.x !== anchorRef.current.x || p.y !== anchorRef.current.y) {\n                        setAnchor(p);\n                    }\n                });\n            }\n        };\n        const onUp = (ev)=>{\n            if (!dragState.current.dragging) return;\n            dragState.current.dragging = false;\n            try {\n                var _el_releasePointerCapture;\n                (_el_releasePointerCapture = el.releasePointerCapture) === null || _el_releasePointerCapture === void 0 ? void 0 : _el_releasePointerCapture.call(el, ev.pointerId);\n            } catch (e) {}\n            document.body.style.userSelect = \"\";\n            window.removeEventListener(\"pointermove\", onMove);\n            window.removeEventListener(\"pointerup\", onUp);\n            if (dragState.current.raf) cancelAnimationFrame(dragState.current.raf);\n            dragState.current.raf = 0;\n        };\n        window.addEventListener(\"pointermove\", onMove, {\n            passive: true\n        });\n        window.addEventListener(\"pointerup\", onUp, {\n            passive: true\n        });\n    }, [\n        clamp,\n        setAnchor\n    ]);\n    // Resize safety: keep FAB in bounds\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        const onResize = ()=>{\n            const a = anchorRef.current;\n            const c = clamp(a.x, a.y, BUBBLE, BUBBLE);\n            if (c.x !== a.x || c.y !== a.y) setAnchor(c);\n        };\n        window.addEventListener(\"resize\", onResize);\n        return ()=>window.removeEventListener(\"resize\", onResize);\n    }, [\n        clamp,\n        setAnchor\n    ]);\n    // Close panel on outside click / Esc\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (!isOpen) return;\n        const onDocClick = (e)=>{\n            if (!panelRef.current || !fabRef.current) return;\n            const t = e.target;\n            if (panelRef.current.contains(t) || fabRef.current.contains(t)) return;\n            close();\n            setHistoryOpen(false);\n        };\n        const onEsc = (e)=>{\n            if (e.key === \"Escape\") {\n                close();\n                setHistoryOpen(false);\n            }\n        };\n        document.addEventListener(\"mousedown\", onDocClick);\n        document.addEventListener(\"keydown\", onEsc);\n        return ()=>{\n            document.removeEventListener(\"mousedown\", onDocClick);\n            document.removeEventListener(\"keydown\", onEsc);\n        };\n    }, [\n        isOpen,\n        close\n    ]);\n    // Close the history dropdown if clicking outside it\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (!historyOpen) return;\n        const onDown = (e)=>{\n            if (!historyRef.current) return;\n            if (historyRef.current.contains(e.target)) return;\n            setHistoryOpen(false);\n        };\n        document.addEventListener(\"mousedown\", onDown);\n        return ()=>document.removeEventListener(\"mousedown\", onDown);\n    }, [\n        historyOpen\n    ]);\n    if (!isClient) return null;\n    const email = emailFromCtx !== null && emailFromCtx !== void 0 ? emailFromCtx :  true ? localStorage.getItem(\"userEmail\") || \"\" : 0;\n    const panelPos = computePanelPos(anchor);\n    // “+ New” from dropdown\n    const handleNewChat = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(async ()=>{\n        if (!email) return;\n        const newId = await (0,_app_utils_api__WEBPACK_IMPORTED_MODULE_5__.createEmptyConversation)(email);\n        if (newId) {\n            setSelectedConvoId(newId);\n        }\n        setRefreshKey((k)=>k + 1);\n    }, [\n        email\n    ]);\n    return /*#__PURE__*/ (0,react_dom__WEBPACK_IMPORTED_MODULE_2__.createPortal)(/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                ref: fabRef,\n                \"aria-label\": \"AI Coach\",\n                onPointerDown: onFabPointerDown,\n                onClick: ()=>{\n                    if (isOpen) {\n                        close();\n                        setHistoryOpen(false);\n                    } else {\n                        open();\n                    }\n                },\n                style: {\n                    position: \"fixed\",\n                    left: 0,\n                    top: 0,\n                    transform: \"translate3d(\".concat(anchor.x, \"px, \").concat(anchor.y, \"px, 0)\"),\n                    zIndex: 2147483647,\n                    touchAction: \"none\",\n                    willChange: \"transform\"\n                },\n                className: \"h-12 w-12 rounded-full shadow-lg border border-gray-700 bg-gray-900 text-white flex items-center justify-center cursor-grab active:cursor-grabbing active:scale-95\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_MessageCircle_X_lucide_react__WEBPACK_IMPORTED_MODULE_6__[\"default\"], {\n                    className: \"h-6 w-6\"\n                }, void 0, false, {\n                    fileName: \"/Users/theodorosiakovou/Projects/ai-platform/src/app/components/AIchat/FloatingChatWidget.tsx\",\n                    lineNumber: 252,\n                    columnNumber: 9\n                }, this)\n            }, void 0, false, {\n                fileName: \"/Users/theodorosiakovou/Projects/ai-platform/src/app/components/AIchat/FloatingChatWidget.tsx\",\n                lineNumber: 229,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(framer_motion__WEBPACK_IMPORTED_MODULE_7__.AnimatePresence, {\n                children: isOpen && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(framer_motion__WEBPACK_IMPORTED_MODULE_8__.motion.div, {\n                    ref: panelRef,\n                    initial: {\n                        opacity: 0,\n                        scale: 0.98\n                    },\n                    animate: {\n                        opacity: 1,\n                        scale: 1\n                    },\n                    exit: {\n                        opacity: 0,\n                        scale: 0.98\n                    },\n                    transition: {\n                        type: \"spring\",\n                        stiffness: 260,\n                        damping: 24\n                    },\n                    style: {\n                        position: \"fixed\",\n                        left: 0,\n                        top: 0,\n                        transform: \"translate3d(\".concat(panelPos.x, \"px, \").concat(panelPos.y, \"px, 0)\"),\n                        zIndex: 2147483646,\n                        width: PANEL_W,\n                        maxWidth: \"95vw\",\n                        height: PANEL_H,\n                        maxHeight: \"80vh\",\n                        willChange: \"transform\"\n                    },\n                    className: \"rounded-2xl shadow-2xl border border-[#232B36] bg-[#0f1520] overflow-hidden flex flex-col\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"relative px-4 py-2 border-b border-[#232B36] bg-[#121A24] text-gray-200 flex items-center justify-between\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                    className: \"text-sm font-medium\",\n                                    children: \"AI Coach\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/theodorosiakovou/Projects/ai-platform/src/app/components/AIchat/FloatingChatWidget.tsx\",\n                                    lineNumber: 280,\n                                    columnNumber: 15\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"flex items-center gap-2\",\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                            onClick: ()=>setHistoryOpen((v)=>!v),\n                                            className: \"px-2 py-1 text-xs rounded text-white bg-gray-700 hover:bg-gray-600 transition\",\n                                            children: \"History\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/theodorosiakovou/Projects/ai-platform/src/app/components/AIchat/FloatingChatWidget.tsx\",\n                                            lineNumber: 283,\n                                            columnNumber: 17\n                                        }, this),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                            onClick: ()=>{\n                                                close();\n                                                setHistoryOpen(false);\n                                            },\n                                            className: \"p-1 rounded-md hover:bg-[#1f2732]\",\n                                            \"aria-label\": \"Close\",\n                                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_MessageCircle_X_lucide_react__WEBPACK_IMPORTED_MODULE_9__[\"default\"], {\n                                                className: \"h-4 w-4\"\n                                            }, void 0, false, {\n                                                fileName: \"/Users/theodorosiakovou/Projects/ai-platform/src/app/components/AIchat/FloatingChatWidget.tsx\",\n                                                lineNumber: 297,\n                                                columnNumber: 19\n                                            }, this)\n                                        }, void 0, false, {\n                                            fileName: \"/Users/theodorosiakovou/Projects/ai-platform/src/app/components/AIchat/FloatingChatWidget.tsx\",\n                                            lineNumber: 289,\n                                            columnNumber: 17\n                                        }, this)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/Users/theodorosiakovou/Projects/ai-platform/src/app/components/AIchat/FloatingChatWidget.tsx\",\n                                    lineNumber: 282,\n                                    columnNumber: 15\n                                }, this),\n                                historyOpen && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    ref: historyRef,\n                                    className: \"absolute right-2 top-full mt-2 z-[100] w-[320px]\",\n                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(CoachChatHistory, {\n                                        userEmail: email,\n                                        onSelect: (id)=>{\n                                            setSelectedConvoId(id);\n                                            setHistoryOpen(false);\n                                        },\n                                        selectedId: selectedConvoId,\n                                        refreshKey: refreshKey,\n                                        showHeader: true,\n                                        onNew: handleNewChat,\n                                        maxHeight: 420\n                                    }, void 0, false, {\n                                        fileName: \"/Users/theodorosiakovou/Projects/ai-platform/src/app/components/AIchat/FloatingChatWidget.tsx\",\n                                        lineNumber: 307,\n                                        columnNumber: 19\n                                    }, this)\n                                }, void 0, false, {\n                                    fileName: \"/Users/theodorosiakovou/Projects/ai-platform/src/app/components/AIchat/FloatingChatWidget.tsx\",\n                                    lineNumber: 303,\n                                    columnNumber: 17\n                                }, this)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/theodorosiakovou/Projects/ai-platform/src/app/components/AIchat/FloatingChatWidget.tsx\",\n                            lineNumber: 279,\n                            columnNumber: 13\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"flex-1 min-h-0\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(CoachChat, {\n                                email: email,\n                                initialConversationId: selectedConvoId,\n                                onNewConversation: (newId)=>{\n                                    setSelectedConvoId(newId);\n                                    setRefreshKey((k)=>k + 1);\n                                }\n                            }, void 0, false, {\n                                fileName: \"/Users/theodorosiakovou/Projects/ai-platform/src/app/components/AIchat/FloatingChatWidget.tsx\",\n                                lineNumber: 325,\n                                columnNumber: 15\n                            }, this)\n                        }, void 0, false, {\n                            fileName: \"/Users/theodorosiakovou/Projects/ai-platform/src/app/components/AIchat/FloatingChatWidget.tsx\",\n                            lineNumber: 324,\n                            columnNumber: 13\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/theodorosiakovou/Projects/ai-platform/src/app/components/AIchat/FloatingChatWidget.tsx\",\n                    lineNumber: 258,\n                    columnNumber: 11\n                }, this)\n            }, void 0, false, {\n                fileName: \"/Users/theodorosiakovou/Projects/ai-platform/src/app/components/AIchat/FloatingChatWidget.tsx\",\n                lineNumber: 256,\n                columnNumber: 7\n            }, this)\n        ]\n    }, void 0, true), document.body);\n}\n_s1(FloatingChatWidget, \"LZfeELujHlJneWGJ2DCnqBTFSq8=\", false, function() {\n    return [\n        useIsClient,\n        _app_components_AIchat_FloatingChatContext__WEBPACK_IMPORTED_MODULE_4__.useFloatingChat\n    ];\n});\n_c2 = FloatingChatWidget;\nvar _c, _c1, _c2;\n$RefreshReg$(_c, \"CoachChat\");\n$RefreshReg$(_c1, \"CoachChatHistory\");\n$RefreshReg$(_c2, \"FloatingChatWidget\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9hcHAvY29tcG9uZW50cy9BSWNoYXQvRmxvYXRpbmdDaGF0V2lkZ2V0LnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsbURBQW1EOzs7QUFHYztBQUN4QjtBQUNlO0FBQ1I7QUFDYjtBQUMyQztBQUNwQjtBQUUxRCx3QkFBd0I7QUFDeEIsTUFBTVksWUFBWUgsbURBQU9BLENBQUMsSUFBTSxpUUFBMkM7Ozs7OztJQUFJSSxLQUFLOztLQUE5RUQ7QUFDTixNQUFNRSxtQkFBbUJMLG1EQUFPQSxDQUM5QixJQUFNLGtTQUFzRDs7Ozs7O0lBQzFESSxLQUFLOztNQUZIQztBQUtOLFNBQVNDOztJQUNQLE1BQU0sQ0FBQ0MsR0FBR0MsS0FBSyxHQUFHZCwrQ0FBUUEsQ0FBQztJQUMzQkgsZ0RBQVNBLENBQUMsSUFBTWlCLEtBQUssT0FBTyxFQUFFO0lBQzlCLE9BQU9EO0FBQ1Q7R0FKU0Q7QUFNTSxTQUFTRzs7SUFDdEIsTUFBTUMsV0FBV0o7SUFDakIsTUFBTSxFQUNKSyxNQUFNLEVBQ05DLElBQUksRUFDSkMsS0FBSyxFQUNMQyxNQUFNLEVBQ05DLFNBQVMsRUFDVEMsT0FBT0MsWUFBWSxFQUNwQixHQUFHaEIsMkZBQWVBO0lBRW5CLHFCQUFxQjtJQUNyQixNQUFNLENBQUNpQixpQkFBaUJDLG1CQUFtQixHQUFHekIsK0NBQVFBO0lBQ3RELE1BQU0sQ0FBQzBCLFlBQVlDLGNBQWMsR0FBRzNCLCtDQUFRQSxDQUFDO0lBRTdDLHdCQUF3QjtJQUN4QixNQUFNLENBQUM0QixhQUFhQyxlQUFlLEdBQUc3QiwrQ0FBUUEsQ0FBQztJQUMvQyxNQUFNOEIsYUFBYWhDLDZDQUFNQSxDQUF3QjtJQUVqRCxvQkFBb0I7SUFDcEIsTUFBTWlDLFNBQVNqQyw2Q0FBTUEsQ0FBMkI7SUFDaEQsTUFBTWtDLFdBQVdsQyw2Q0FBTUEsQ0FBd0I7SUFFL0MsTUFBTW1DLFlBQVluQyw2Q0FBTUEsQ0FBQ3NCO0lBQ3pCdkIsZ0RB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SSxTQUFTLElBQU1oRixlQUFlLENBQUN1RyxJQUFNLENBQUNBOzRDQUN0Q2hCLFdBQVU7c0RBQ1g7Ozs7OztzREFHRCw4REFBQ1g7NENBQ0NJLFNBQVM7Z0RBQ1AxRjtnREFDQVUsZUFBZTs0Q0FDakI7NENBQ0F1RixXQUFVOzRDQUNWVCxjQUFXO3NEQUVYLDRFQUFDdEcsMkZBQUNBO2dEQUFDK0csV0FBVTs7Ozs7Ozs7Ozs7Ozs7Ozs7Z0NBS2hCeEYsNkJBQ0MsOERBQUN5RjtvQ0FDQ1gsS0FBSzVFO29DQUNMc0YsV0FBVTs4Q0FFViw0RUFBQ3pHO3dDQUNDMEgsV0FBVy9HO3dDQUNYZ0gsVUFBVSxDQUFDQzs0Q0FDVDlHLG1CQUFtQjhHOzRDQUNuQjFHLGVBQWU7d0NBQ2pCO3dDQUNBMkcsWUFBWWhIO3dDQUNaRSxZQUFZQTt3Q0FDWitHLFVBQVU7d0NBQ1ZDLE9BQU9wQzt3Q0FDUDRCLFdBQVc7Ozs7Ozs7Ozs7Ozs7Ozs7O3NDQU9uQiw4REFBQ2I7NEJBQUlELFdBQVU7c0NBQ2IsNEVBQUMzRztnQ0FDQ2EsT0FBT0E7Z0NBQ1BxSCx1QkFBdUJuSDtnQ0FDdkJvSCxtQkFBbUIsQ0FBQ3JDO29DQUNsQjlFLG1CQUFtQjhFO29DQUNuQjVFLGNBQWMsQ0FBQzZFLElBQU1BLElBQUk7Z0NBQzNCOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztzQkFPWi9CLFNBQVNDLElBQUk7QUFFakI7SUEzVHdCM0Q7O1FBQ0xIO1FBUWJMLHVGQUFlQTs7O01BVEdRIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL3NyYy9hcHAvY29tcG9uZW50cy9BSWNoYXQvRmxvYXRpbmdDaGF0V2lkZ2V0LnRzeD85OTQyIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNyYy9hcHAvY29tcG9uZW50cy9BSWNoYXQvRmxvYXRpbmdDaGF0V2lkZ2V0LnRzeFxuXCJ1c2UgY2xpZW50XCI7XG5cbmltcG9ydCB7IHVzZUVmZmVjdCwgdXNlUmVmLCB1c2VDYWxsYmFjaywgdXNlU3RhdGUgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IGNyZWF0ZVBvcnRhbCB9IGZyb20gXCJyZWFjdC1kb21cIjtcbmltcG9ydCB7IEFuaW1hdGVQcmVzZW5jZSwgbW90aW9uIH0gZnJvbSBcImZyYW1lci1tb3Rpb25cIjtcbmltcG9ydCB7IE1lc3NhZ2VDaXJjbGUsIFggfSBmcm9tIFwibHVjaWRlLXJlYWN0XCI7XG5pbXBvcnQgZHluYW1pYyBmcm9tIFwibmV4dC9keW5hbWljXCI7XG5pbXBvcnQgeyB1c2VGbG9hdGluZ0NoYXQgfSBmcm9tIFwiQC9hcHAvY29tcG9uZW50cy9BSWNoYXQvRmxvYXRpbmdDaGF0Q29udGV4dFwiO1xuaW1wb3J0IHsgY3JlYXRlRW1wdHlDb252ZXJzYXRpb24gfSBmcm9tIFwiQC9hcHAvdXRpbHMvYXBpXCI7XG5cbi8vIExhenktbG9hZCBjaGF0IHBpZWNlc1xuY29uc3QgQ29hY2hDaGF0ID0gZHluYW1pYygoKSA9PiBpbXBvcnQoXCJAL2FwcC9jb21wb25lbnRzL0FJY2hhdC9Db2FjaENoYXRcIiksIHsgc3NyOiBmYWxzZSB9KTtcbmNvbnN0IENvYWNoQ2hhdEhpc3RvcnkgPSBkeW5hbWljKFxuICAoKSA9PiBpbXBvcnQoXCJAL2FwcC9jb21wb25lbnRzL0FJY2hhdC9BaUNoYXRIaXN0b3J5U2lkZWJhclwiKSxcbiAgeyBzc3I6IGZhbHNlIH1cbik7XG5cbmZ1bmN0aW9uIHVzZUlzQ2xpZW50KCkge1xuICBjb25zdCBbYywgc2V0Q10gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIHVzZUVmZmVjdCgoKSA9PiBzZXRDKHRydWUpLCBbXSk7XG4gIHJldHVybiBjO1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBGbG9hdGluZ0NoYXRXaWRnZXQoKSB7XG4gIGNvbnN0IGlzQ2xpZW50ID0gdXNlSXNDbGllbnQoKTtcbiAgY29uc3Qge1xuICAgIGlzT3BlbixcbiAgICBvcGVuLFxuICAgIGNsb3NlLFxuICAgIGFuY2hvcixcbiAgICBzZXRBbmNob3IsXG4gICAgZW1haWw6IGVtYWlsRnJvbUN0eCxcbiAgfSA9IHVzZUZsb2F0aW5nQ2hhdCgpO1xuXG4gIC8vIENoYXQgc2Vzc2lvbiBzdGF0ZVxuICBjb25zdCBbc2VsZWN0ZWRDb252b0lkLCBzZXRTZWxlY3RlZENvbnZvSWRdID0gdXNlU3RhdGU8c3RyaW5nIHwgdW5kZWZpbmVkPigpO1xuICBjb25zdCBbcmVmcmVzaEtleSwgc2V0UmVmcmVzaEtleV0gPSB1c2VTdGF0ZSgwKTtcblxuICAvLyBIZWFkZXIgZHJvcGRvd24gc3RhdGVcbiAgY29uc3QgW2hpc3RvcnlPcGVuLCBzZXRIaXN0b3J5T3Blbl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IGhpc3RvcnlSZWYgPSB1c2VSZWY8SFRNTERpdkVsZW1lbnQgfCBudWxsPihudWxsKTtcblxuICAvLyBSZWZzIGZvciBkcmFnZ2luZ1xuICBjb25zdCBmYWJSZWYgPSB1c2VSZWY8SFRNTEJ1dHRvbkVsZW1lbnQgfCBudWxsPihudWxsKTtcbiAgY29uc3QgcGFuZWxSZWYgPSB1c2VSZWY8SFRNTERpdkVsZW1lbnQgfCBudWxsPihudWxsKTtcbiAgXG4gIGNvbnN0IGFuY2hvclJlZiA9IHVzZVJlZihhbmNob3IpO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGFuY2hvclJlZi5jdXJyZW50ID0gYW5jaG9yO1xuICB9LCBbYW5jaG9yXSk7XG5cbiAgLy8g4pSA4pSAIGxheW91dCBjb25zdGFudHMg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAXG4gIGNvbnN0IE1BUkdJTiA9IDEyO1xuICBjb25zdCBCVUJCTEUgPSA0ODsgIC8vIGgtMTIgdy0xMlxuICBjb25zdCBQQU5FTF9XID0gNDIwO1xuICBjb25zdCBQQU5FTF9IID0gNTYwO1xuXG4gIC8vIFBsYWNlIGJvdHRvbS1yaWdodCBvbiBmaXJzdCBtb3VudCBpZiBzdGlsbCBkZWZhdWx0ICgyNCwyNClcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gXCJ1bmRlZmluZWRcIikgcmV0dXJuO1xuICAgIGlmIChhbmNob3IueCA9PT0gMjQgJiYgYW5jaG9yLnkgPT09IDI0KSB7XG4gICAgICBjb25zdCBuZXh0ID0gY2xhbXAoXG4gICAgICAgIHdpbmRvdy5pbm5lcldpZHRoIC0gQlVCQkxFIC0gMjQsXG4gICAgICAgIHdpbmRvdy5pbm5lckhlaWdodCAtIEJVQkJMRSAtIDI0LFxuICAgICAgICBCVUJCTEUsXG4gICAgICAgIEJVQkJMRVxuICAgICAgKTtcbiAgICAgIHNldEFuY2hvcihuZXh0KTtcbiAgICB9XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHJlYWN0LWhvb2tzL2V4aGF1c3RpdmUtZGVwc1xuICB9LCBbXSk7XG5cbiAgLy8gS2VlcCBpbnNpZGUgdmlld3BvcnRcbiAgY29uc3QgY2xhbXAgPSB1c2VDYWxsYmFjaygoeDogbnVtYmVyLCB5OiBudW1iZXIsIHc6IG51bWJlciwgaDogbnVtYmVyKSA9PiB7XG4gICAgY29uc3QgbWF4WCA9IE1hdGgubWF4KE1BUkdJTiwgd2luZG93LmlubmVyV2lkdGggLSB3IC0gTUFSR0lOKTtcbiAgICBjb25zdCBtYXhZID0gTWF0aC5tYXgoTUFSR0lOLCB3aW5kb3cuaW5uZXJIZWlnaHQgLSBoIC0gTUFSR0lOKTtcbiAgICByZXR1cm4ge1xuICAgICAgeDogTWF0aC5taW4oTWF0aC5tYXgoeCwgTUFSR0lOKSwgbWF4WCksXG4gICAgICB5OiBNYXRoLm1pbihNYXRoLm1heCh5LCBNQVJHSU4pLCBtYXhZKSxcbiAgICB9O1xuICB9LCBbXSk7XG5cbiAgLy8gU21hcnQgcGFuZWwgcG9zaXRpb246IHRyeSB0byBwbGFjZSB1cC1sZWZ0IG9mIHRoZSBGQUIsIGJ1dCBrZWVwIG9uLXNjcmVlblxuICBjb25zdCBjb21wdXRlUGFuZWxQb3MgPSB1c2VDYWxsYmFjayhcbiAgICAoZmFiOiB7IHg6IG51bWJlcjsgeTogbnVtYmVyIH0pID0+IHtcbiAgICAgIGNvbnN0IGRlc2lyZWRYID0gZmFiLnggLSAoUEFORUxfVyAtIEJVQkJMRSAvIDIpO1xuICAgICAgY29uc3QgZGVzaXJlZFkgPSBmYWIueSAtIChQQU5FTF9IIC0gQlVCQkxFIC8gMik7XG4gICAgICByZXR1cm4gY2xhbXAoZGVzaXJlZFgsIGRlc2lyZWRZLCBQQU5FTF9XLCBQQU5FTF9IKTtcbiAgICB9LFxuICAgIFtjbGFtcF1cbiAgKTtcblxuICAvLyBEcmFnIHZpYSBSZWFjdCBwb2ludGVyZG93biArIGdsb2JhbCBtb3ZlL3VwICsgckFGXG4gIGNvbnN0IGRyYWdTdGF0ZSA9IHVzZVJlZih7XG4gICAgZHJhZ2dpbmc6IGZhbHNlLFxuICAgIHN0YXJ0WDogMCxcbiAgICBzdGFydFk6IDAsXG4gICAgc3RhcnRBbmNob3I6IHsgeDogMCwgeTogMCB9LFxuICAgIHJhZjogMCBhcyBudW1iZXIgfCAwLFxuICAgIHBlbmRpbmc6IHsgeDogMCwgeTogMCB9LFxuICB9KTtcblxuICBjb25zdCBvbkZhYlBvaW50ZXJEb3duID0gdXNlQ2FsbGJhY2soXG4gICAgKGU6IFJlYWN0LlBvaW50ZXJFdmVudDxIVE1MQnV0dG9uRWxlbWVudD4pID0+IHtcbiAgICAgIGNvbnN0IGVsID0gZS5jdXJyZW50VGFyZ2V0O1xuICAgICAgZHJhZ1N0YXRlLmN1cnJlbnQuZHJhZ2dpbmcgPSB0cnVlO1xuICAgICAgZHJhZ1N0YXRlLmN1cnJlbnQuc3RhcnRYID0gZS5jbGllbnRYO1xuICAgICAgZHJhZ1N0YXRlLmN1cnJlbnQuc3RhcnRZID0gZS5jbGllbnRZO1xuICAgICAgZHJhZ1N0YXRlLmN1cnJlbnQuc3RhcnRBbmNob3IgPSB7IC4uLmFuY2hvclJlZi5jdXJyZW50IH07XG4gICAgICBkcmFnU3RhdGUuY3VycmVudC5wZW5kaW5nID0gYW5jaG9yUmVmLmN1cnJlbnQ7XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIGVsLnNldFBvaW50ZXJDYXB0dXJlPy4oZS5wb2ludGVySWQpO1xuICAgICAgfSBjYXRjaCB7fVxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS51c2VyU2VsZWN0ID0gXCJub25lXCI7XG4gICAgICBlbC5zdHlsZS50b3VjaEFjdGlvbiA9IFwibm9uZVwiO1xuXG4gICAgICBjb25zdCBvbk1vdmUgPSAoZXY6IFBvaW50ZXJFdmVudCkgPT4ge1xuICAgICAgICBpZiAoIWRyYWdTdGF0ZS5jdXJyZW50LmRyYWdnaW5nKSByZXR1cm47XG4gICAgICAgIGNvbnN0IGR4ID0gZXYuY2xpZW50WCAtIGRyYWdTdGF0ZS5jdXJyZW50LnN0YXJ0WDtcbiAgICAgICAgY29uc3QgZHkgPSBldi5jbGllbnRZIC0gZHJhZ1N0YXRlLmN1cnJlbnQuc3RhcnRZO1xuICAgICAgICBjb25zdCBuZXh0ID0gY2xhbXAoXG4gICAgICAgICAgZHJhZ1N0YXRlLmN1cnJlbnQuc3RhcnRBbmNob3IueCArIGR4LFxuICAgICAgICAgIGRyYWdTdGF0ZS5jdXJyZW50LnN0YXJ0QW5jaG9yLnkgKyBkeSxcbiAgICAgICAgICBCVUJCTEUsXG4gICAgICAgICAgQlVCQkxFXG4gICAgICAgICk7XG4gICAgICAgIGRyYWdTdGF0ZS5jdXJyZW50LnBlbmRpbmcgPSBuZXh0O1xuICAgICAgICBpZiAoIWRyYWdTdGF0ZS5jdXJyZW50LnJhZikge1xuICAgICAgICAgIGRyYWdTdGF0ZS5jdXJyZW50LnJhZiA9IHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICAgICAgICBkcmFnU3RhdGUuY3VycmVudC5yYWYgPSAwIGFzIG51bWJlciB8IDA7XG4gICAgICAgICAgICBjb25zdCBwID0gZHJhZ1N0YXRlLmN1cnJlbnQucGVuZGluZztcbiAgICAgICAgICAgIGlmIChwLnggIT09IGFuY2hvclJlZi5jdXJyZW50LnggfHwgcC55ICE9PSBhbmNob3JSZWYuY3VycmVudC55KSB7XG4gICAgICAgICAgICAgIHNldEFuY2hvcihwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgY29uc3Qgb25VcCA9IChldjogUG9pbnRlckV2ZW50KSA9PiB7XG4gICAgICAgIGlmICghZHJhZ1N0YXRlLmN1cnJlbnQuZHJhZ2dpbmcpIHJldHVybjtcbiAgICAgICAgZHJhZ1N0YXRlLmN1cnJlbnQuZHJhZ2dpbmcgPSBmYWxzZTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBlbC5yZWxlYXNlUG9pbnRlckNhcHR1cmU/Lihldi5wb2ludGVySWQpO1xuICAgICAgICB9IGNhdGNoIHt9XG4gICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUudXNlclNlbGVjdCA9IFwiXCI7XG4gICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwicG9pbnRlcm1vdmVcIiwgb25Nb3ZlKTtcbiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJwb2ludGVydXBcIiwgb25VcCk7XG4gICAgICAgIGlmIChkcmFnU3RhdGUuY3VycmVudC5yYWYpIGNhbmNlbEFuaW1hdGlvbkZyYW1lKGRyYWdTdGF0ZS5jdXJyZW50LnJhZik7XG4gICAgICAgIGRyYWdTdGF0ZS5jdXJyZW50LnJhZiA9IDAgYXMgbnVtYmVyIHwgMDtcbiAgICAgIH07XG5cbiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicG9pbnRlcm1vdmVcIiwgb25Nb3ZlLCB7IHBhc3NpdmU6IHRydWUgfSk7XG4gICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJ1cFwiLCBvblVwLCB7IHBhc3NpdmU6IHRydWUgfSk7XG4gICAgfSxcbiAgICBbY2xhbXAsIHNldEFuY2hvcl1cbiAgKTtcblxuICAvLyBSZXNpemUgc2FmZXR5OiBrZWVwIEZBQiBpbiBib3VuZHNcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBvblJlc2l6ZSA9ICgpID0+IHtcbiAgICAgIGNvbnN0IGEgPSBhbmNob3JSZWYuY3VycmVudDtcbiAgICAgIGNvbnN0IGMgPSBjbGFtcChhLngsIGEueSwgQlVCQkxFLCBCVUJCTEUpO1xuICAgICAgaWYgKGMueCAhPT0gYS54IHx8IGMueSAhPT0gYS55KSBzZXRBbmNob3IoYyk7XG4gICAgfTtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCBvblJlc2l6ZSk7XG4gICAgcmV0dXJuICgpID0+IHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwicmVzaXplXCIsIG9uUmVzaXplKTtcbiAgfSwgW2NsYW1wLCBzZXRBbmNob3JdKTtcblxuICAvLyBDbG9zZSBwYW5lbCBvbiBvdXRzaWRlIGNsaWNrIC8gRXNjXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCFpc09wZW4pIHJldHVybjtcbiAgICBjb25zdCBvbkRvY0NsaWNrID0gKGU6IE1vdXNlRXZlbnQpID0+IHtcbiAgICAgIGlmICghcGFuZWxSZWYuY3VycmVudCB8fCAhZmFiUmVmLmN1cnJlbnQpIHJldHVybjtcbiAgICAgIGNvbnN0IHQgPSBlLnRhcmdldCBhcyBOb2RlO1xuICAgICAgaWYgKHBhbmVsUmVmLmN1cnJlbnQuY29udGFpbnModCkgfHwgZmFiUmVmLmN1cnJlbnQuY29udGFpbnModCkpIHJldHVybjtcbiAgICAgIGNsb3NlKCk7XG4gICAgICBzZXRIaXN0b3J5T3BlbihmYWxzZSk7XG4gICAgfTtcbiAgICBjb25zdCBvbkVzYyA9IChlOiBLZXlib2FyZEV2ZW50KSA9PiB7XG4gICAgICBpZiAoZS5rZXkgPT09IFwiRXNjYXBlXCIpIHtcbiAgICAgICAgY2xvc2UoKTtcbiAgICAgICAgc2V0SGlzdG9yeU9wZW4oZmFsc2UpO1xuICAgICAgfVxuICAgIH07XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCBvbkRvY0NsaWNrKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBvbkVzYyk7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgb25Eb2NDbGljayk7XG4gICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBvbkVzYyk7XG4gICAgfTtcbiAgfSwgW2lzT3BlbiwgY2xvc2VdKTtcblxuICAvLyBDbG9zZSB0aGUgaGlzdG9yeSBkcm9wZG93biBpZiBjbGlja2luZyBvdXRzaWRlIGl0XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCFoaXN0b3J5T3BlbikgcmV0dXJuO1xuICAgIGNvbnN0IG9uRG93biA9IChlOiBNb3VzZUV2ZW50KSA9PiB7XG4gICAgICBpZiAoIWhpc3RvcnlSZWYuY3VycmVudCkgcmV0dXJuO1xuICAgICAgaWYgKGhpc3RvcnlSZWYuY3VycmVudC5jb250YWlucyhlLnRhcmdldCBhcyBOb2RlKSkgcmV0dXJuO1xuICAgICAgc2V0SGlzdG9yeU9wZW4oZmFsc2UpO1xuICAgIH07XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCBvbkRvd24pO1xuICAgIHJldHVybiAoKSA9PiBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIG9uRG93bik7XG4gIH0sIFtoaXN0b3J5T3Blbl0pO1xuXG4gIGlmICghaXNDbGllbnQpIHJldHVybiBudWxsO1xuXG4gIGNvbnN0IGVtYWlsID1cbiAgICBlbWFpbEZyb21DdHggPz9cbiAgICAodHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiA/IGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwidXNlckVtYWlsXCIpIHx8IFwiXCIgOiBcIlwiKTtcblxuICBjb25zdCBwYW5lbFBvcyA9IGNvbXB1dGVQYW5lbFBvcyhhbmNob3IpO1xuXG4gIC8vIOKAnCsgTmV34oCdIGZyb20gZHJvcGRvd25cbiAgY29uc3QgaGFuZGxlTmV3Q2hhdCA9IHVzZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcbiAgICBpZiAoIWVtYWlsKSByZXR1cm47XG4gICAgY29uc3QgbmV3SWQgPSBhd2FpdCBjcmVhdGVFbXB0eUNvbnZlcnNhdGlvbihlbWFpbCk7XG4gICAgaWYgKG5ld0lkKSB7XG4gICAgICBzZXRTZWxlY3RlZENvbnZvSWQobmV3SWQpO1xuICAgIH1cbiAgICBzZXRSZWZyZXNoS2V5KChrKSA9PiBrICsgMSk7XG4gIH0sIFtlbWFpbF0pO1xuXG4gIHJldHVybiBjcmVhdGVQb3J0YWwoXG4gICAgPD5cbiAgICAgIHsvKiBGbG9hdGluZywgZHJhZ2dhYmxlIGJ1dHRvbiAqL31cbiAgICAgIDxidXR0b25cbiAgICAgICAgcmVmPXtmYWJSZWZ9XG4gICAgICAgIGFyaWEtbGFiZWw9XCJBSSBDb2FjaFwiXG4gICAgICAgIG9uUG9pbnRlckRvd249e29uRmFiUG9pbnRlckRvd259XG4gICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICBpZiAoaXNPcGVuKSB7XG4gICAgICAgICAgICBjbG9zZSgpO1xuICAgICAgICAgICAgc2V0SGlzdG9yeU9wZW4oZmFsc2UpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBvcGVuKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9fVxuICAgICAgICBzdHlsZT17e1xuICAgICAgICAgIHBvc2l0aW9uOiBcImZpeGVkXCIsXG4gICAgICAgICAgbGVmdDogMCxcbiAgICAgICAgICB0b3A6IDAsXG4gICAgICAgICAgdHJhbnNmb3JtOiBgdHJhbnNsYXRlM2QoJHthbmNob3IueH1weCwgJHthbmNob3IueX1weCwgMClgLFxuICAgICAgICAgIHpJbmRleDogMjE0NzQ4MzY0NyxcbiAgICAgICAgICB0b3VjaEFjdGlvbjogXCJub25lXCIsXG4gICAgICAgICAgd2lsbENoYW5nZTogXCJ0cmFuc2Zvcm1cIixcbiAgICAgICAgfX1cbiAgICAgICAgY2xhc3NOYW1lPVwiaC0xMiB3LTEyIHJvdW5kZWQtZnVsbCBzaGFkb3ctbGcgYm9yZGVyIGJvcmRlci1ncmF5LTcwMCBiZy1ncmF5LTkwMCB0ZXh0LXdoaXRlIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIGN1cnNvci1ncmFiIGFjdGl2ZTpjdXJzb3ItZ3JhYmJpbmcgYWN0aXZlOnNjYWxlLTk1XCJcbiAgICAgID5cbiAgICAgICAgPE1lc3NhZ2VDaXJjbGUgY2xhc3NOYW1lPVwiaC02IHctNlwiIC8+XG4gICAgICA8L2J1dHRvbj5cblxuICAgICAgey8qIENoYXQgcGFuZWwgKi99XG4gICAgICA8QW5pbWF0ZVByZXNlbmNlPlxuICAgICAgICB7aXNPcGVuICYmIChcbiAgICAgICAgICA8bW90aW9uLmRpdlxuICAgICAgICAgICAgcmVmPXtwYW5lbFJlZn1cbiAgICAgICAgICAgIGluaXRpYWw9e3sgb3BhY2l0eTogMCwgc2NhbGU6IDAuOTggfX1cbiAgICAgICAgICAgIGFuaW1hdGU9e3sgb3BhY2l0eTogMSwgc2NhbGU6IDEgfX1cbiAgICAgICAgICAgIGV4aXQ9e3sgb3BhY2l0eTogMCwgc2NhbGU6IDAuOTggfX1cbiAgICAgICAgICAgIHRyYW5zaXRpb249e3sgdHlwZTogXCJzcHJpbmdcIiwgc3RpZmZuZXNzOiAyNjAsIGRhbXBpbmc6IDI0IH19XG4gICAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgICBwb3NpdGlvbjogXCJmaXhlZFwiLFxuICAgICAgICAgICAgICBsZWZ0OiAwLFxuICAgICAgICAgICAgICB0b3A6IDAsXG4gICAgICAgICAgICAgIHRyYW5zZm9ybTogYHRyYW5zbGF0ZTNkKCR7cGFuZWxQb3MueH1weCwgJHtwYW5lbFBvcy55fXB4LCAwKWAsXG4gICAgICAgICAgICAgIHpJbmRleDogMjE0NzQ4MzY0NixcbiAgICAgICAgICAgICAgd2lkdGg6IFBBTkVMX1csXG4gICAgICAgICAgICAgIG1heFdpZHRoOiBcIjk1dndcIixcbiAgICAgICAgICAgICAgaGVpZ2h0OiBQQU5FTF9ILFxuICAgICAgICAgICAgICBtYXhIZWlnaHQ6IFwiODB2aFwiLFxuICAgICAgICAgICAgICB3aWxsQ2hhbmdlOiBcInRyYW5zZm9ybVwiLFxuICAgICAgICAgICAgfX1cbiAgICAgICAgICAgIGNsYXNzTmFtZT1cInJvdW5kZWQtMnhsIHNoYWRvdy0yeGwgYm9yZGVyIGJvcmRlci1bIzIzMkIzNl0gYmctWyMwZjE1MjBdIG92ZXJmbG93LWhpZGRlbiBmbGV4IGZsZXgtY29sXCJcbiAgICAgICAgICA+XG4gICAgICAgICAgICB7LyogSGVhZGVyIHdpdGggSGlzdG9yeSBkcm9wZG93biAqL31cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicmVsYXRpdmUgcHgtNCBweS0yIGJvcmRlci1iIGJvcmRlci1bIzIzMkIzNl0gYmctWyMxMjFBMjRdIHRleHQtZ3JheS0yMDAgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuXCI+XG4gICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQtc20gZm9udC1tZWRpdW1cIj5BSSBDb2FjaDwvc3Bhbj5cblxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0yXCI+XG4gICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gc2V0SGlzdG9yeU9wZW4oKHYpID0+ICF2KX1cbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInB4LTIgcHktMSB0ZXh0LXhzIHJvdW5kZWQgdGV4dC13aGl0ZSBiZy1ncmF5LTcwMCBob3ZlcjpiZy1ncmF5LTYwMCB0cmFuc2l0aW9uXCJcbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICBIaXN0b3J5XG4gICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjbG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICBzZXRIaXN0b3J5T3BlbihmYWxzZSk7XG4gICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwicC0xIHJvdW5kZWQtbWQgaG92ZXI6YmctWyMxZjI3MzJdXCJcbiAgICAgICAgICAgICAgICAgIGFyaWEtbGFiZWw9XCJDbG9zZVwiXG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgPFggY2xhc3NOYW1lPVwiaC00IHctNFwiIC8+XG4gICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICAgIHsvKiBEcm9wZG93biBwb3BvdmVyICovfVxuICAgICAgICAgICAgICB7aGlzdG9yeU9wZW4gJiYgKFxuICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgIHJlZj17aGlzdG9yeVJlZn1cbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImFic29sdXRlIHJpZ2h0LTIgdG9wLWZ1bGwgbXQtMiB6LVsxMDBdIHctWzMyMHB4XVwiXG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgPENvYWNoQ2hhdEhpc3RvcnlcbiAgICAgICAgICAgICAgICAgICAgdXNlckVtYWlsPXtlbWFpbH1cbiAgICAgICAgICAgICAgICAgICAgb25TZWxlY3Q9eyhpZCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIHNldFNlbGVjdGVkQ29udm9JZChpZCk7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0SGlzdG9yeU9wZW4oZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZElkPXtzZWxlY3RlZENvbnZvSWR9XG4gICAgICAgICAgICAgICAgICAgIHJlZnJlc2hLZXk9e3JlZnJlc2hLZXl9XG4gICAgICAgICAgICAgICAgICAgIHNob3dIZWFkZXJcbiAgICAgICAgICAgICAgICAgICAgb25OZXc9e2hhbmRsZU5ld0NoYXR9XG4gICAgICAgICAgICAgICAgICAgIG1heEhlaWdodD17NDIwfVxuICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICB7LyogQ2hhdCBib2R5ICovfVxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4LTEgbWluLWgtMFwiPlxuICAgICAgICAgICAgICA8Q29hY2hDaGF0XG4gICAgICAgICAgICAgICAgZW1haWw9e2VtYWlsfVxuICAgICAgICAgICAgICAgIGluaXRpYWxDb252ZXJzYXRpb25JZD17c2VsZWN0ZWRDb252b0lkfVxuICAgICAgICAgICAgICAgIG9uTmV3Q29udmVyc2F0aW9uPXsobmV3SWQ6IHN0cmluZykgPT4ge1xuICAgICAgICAgICAgICAgICAgc2V0U2VsZWN0ZWRDb252b0lkKG5ld0lkKTtcbiAgICAgICAgICAgICAgICAgIHNldFJlZnJlc2hLZXkoKGspID0+IGsgKyAxKTtcbiAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9tb3Rpb24uZGl2PlxuICAgICAgICApfVxuICAgICAgPC9BbmltYXRlUHJlc2VuY2U+XG4gICAgPC8+LFxuICAgIGRvY3VtZW50LmJvZHlcbiAgKTtcbn0iXSwibmFtZXMiOlsidXNlRWZmZWN0IiwidXNlUmVmIiwidXNlQ2FsbGJhY2siLCJ1c2VTdGF0ZSIsImNyZWF0ZVBvcnRhbCIsIkFuaW1hdGVQcmVzZW5jZSIsIm1vdGlvbiIsIk1lc3NhZ2VDaXJjbGUiLCJYIiwiZHluYW1pYyIsInVzZUZsb2F0aW5nQ2hhdCIsImNyZWF0ZUVtcHR5Q29udmVyc2F0aW9uIiwiQ29hY2hDaGF0Iiwic3NyIiwiQ29hY2hDaGF0SGlzdG9yeSIsInVzZUlzQ2xpZW50IiwiYyIsInNldEMiLCJGbG9hdGluZ0NoYXRXaWRnZXQiLCJpc0NsaWVudCIsImlzT3BlbiIsIm9wZW4iLCJjbG9zZSIsImFuY2hvciIsInNldEFuY2hvciIsImVtYWlsIiwiZW1haWxGcm9tQ3R4Iiwic2VsZWN0ZWRDb252b0lkIiwic2V0U2VsZWN0ZWRDb252b0lkIiwicmVmcmVzaEtleSIsInNldFJlZnJlc2hLZXkiLCJoaXN0b3J5T3BlbiIsInNldEhpc3RvcnlPcGVuIiwiaGlzdG9yeVJlZiIsImZhYlJlZiIsInBhbmVsUmVmIiwiYW5jaG9yUmVmIiwiY3VycmVudCIsIk1BUkdJTiIsIkJVQkJMRSIsIlBBTkVMX1ciLCJQQU5FTF9IIiwieCIsInkiLCJuZXh0IiwiY2xhbXAiLCJ3aW5kb3ciLCJpbm5lcldpZHRoIiwiaW5uZXJIZWlnaHQiLCJ3IiwiaCIsIm1heFgiLCJNYXRoIiwibWF4IiwibWF4WSIsIm1pbiIsImNvbXB1dGVQYW5lbFBvcyIsImZhYiIsImRlc2lyZWRYIiwiZGVzaXJlZFkiLCJkcmFnU3RhdGUiLCJkcmFnZ2luZyIsInN0YXJ0WCIsInN0YXJ0WSIsInN0YXJ0QW5jaG9yIiwicmFmIiwicGVuZGluZyIsIm9uRmFiUG9pbnRlckRvd24iLCJlIiwiZWwiLCJjdXJyZW50VGFyZ2V0IiwiY2xpZW50WCIsImNsaWVudFkiLCJzZXRQb2ludGVyQ2FwdHVyZSIsInBvaW50ZXJJZCIsInByZXZlbnREZWZhdWx0IiwiZG9jdW1lbnQiLCJib2R5Iiwic3R5bGUiLCJ1c2VyU2VsZWN0IiwidG91Y2hBY3Rpb24iLCJvbk1vdmUiLCJldiIsImR4IiwiZHkiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJwIiwib25VcCIsInJlbGVhc2VQb2ludGVyQ2FwdHVyZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJjYW5jZWxBbmltYXRpb25GcmFtZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJwYXNzaXZlIiwib25SZXNpemUiLCJhIiwib25Eb2NDbGljayIsInQiLCJ0YXJnZXQiLCJjb250YWlucyIsIm9uRXNjIiwia2V5Iiwib25Eb3duIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsInBhbmVsUG9zIiwiaGFuZGxlTmV3Q2hhdCIsIm5ld0lkIiwiayIsImJ1dHRvbiIsInJlZiIsImFyaWEtbGFiZWwiLCJvblBvaW50ZXJEb3duIiwib25DbGljayIsInBvc2l0aW9uIiwibGVmdCIsInRvcCIsInRyYW5zZm9ybSIsInpJbmRleCIsIndpbGxDaGFuZ2UiLCJjbGFzc05hbWUiLCJkaXYiLCJpbml0aWFsIiwib3BhY2l0eSIsInNjYWxlIiwiYW5pbWF0ZSIsImV4aXQiLCJ0cmFuc2l0aW9uIiwidHlwZSIsInN0aWZmbmVzcyIsImRhbXBpbmciLCJ3aWR0aCIsIm1heFdpZHRoIiwiaGVpZ2h0IiwibWF4SGVpZ2h0Iiwic3BhbiIsInYiLCJ1c2VyRW1haWwiLCJvblNlbGVjdCIsImlkIiwic2VsZWN0ZWRJZCIsInNob3dIZWFkZXIiLCJvbk5ldyIsImluaXRpYWxDb252ZXJzYXRpb25JZCIsIm9uTmV3Q29udmVyc2F0aW9uIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/app/components/AIchat/FloatingChatWidget.tsx\n"));

/***/ }),

/***/ "(app-pages-browser)/./src/app/utils/api.ts":
/*!******************************!*\
  !*** ./src/app/utils/api.ts ***!
  \******************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   analyzeImageMultipart: function() { return /* binding */ analyzeImageMultipart; },\n/* harmony export */   checkUserPackage: function() { return /* binding */ checkUserPackage; },\n/* harmony export */   coachChat: function() { return /* binding */ coachChat; },\n/* harmony export */   createEmptyConversation: function() { return /* binding */ createEmptyConversation; },\n/* harmony export */   deleteAnalysisResult: function() { return /* binding */ deleteAnalysisResult; },\n/* harmony export */   deleteConversation: function() { return /* binding */ deleteConversation; },\n/* harmony export */   fetchAnalysisHistory: function() { return /* binding */ fetchAnalysisHistory; },\n/* harmony export */   fetchConversation: function() { return /* binding */ fetchConversation; },\n/* harmony export */   fetchConversations: function() { return /* binding */ fetchConversations; },\n/* harmony export */   generateConversationTitle: function() { return /* binding */ generateConversationTitle; },\n/* harmony export */   getAnalysisById: function() { return /* binding */ getAnalysisById; },\n/* harmony export */   getClientEmail: function() { return /* binding */ getClientEmail; },\n/* harmony export */   purchasePackage: function() { return /* binding */ purchasePackage; },\n/* harmony export */   sendFeedback: function() { return /* binding */ sendFeedback; },\n/* harmony export */   startCheckout: function() { return /* binding */ startCheckout; },\n/* harmony export */   updateAnalysisById: function() { return /* binding */ updateAnalysisById; },\n/* harmony export */   verifySession: function() { return /* binding */ verifySession; }\n/* harmony export */ });\n/* provided dependency */ var process = __webpack_require__(/*! process */ \"(app-pages-browser)/./node_modules/next/dist/build/polyfills/process.js\");\n// src/app/utils/api.ts\nconst BASE_URL = process.env.NEXT_PUBLIC_API_URL || \"http://localhost:5001\";\n// src/app/utils/auth-lite.ts\nfunction getClientEmail() {\n    if (false) {}\n    return localStorage.getItem(\"userEmail\") || \"\";\n}\nasync function readJsonOrText(res) {\n    const text = await res.text();\n    try {\n        return {\n            ok: res.ok,\n            status: res.status,\n            data: JSON.parse(text)\n        };\n    } catch (e) {\n        return {\n            ok: res.ok,\n            status: res.status,\n            data: text\n        };\n    }\n}\nfunction ensureOk(r, what) {\n    if (!r.ok) {\n        const msg = typeof r.data === \"string\" ? r.data : JSON.stringify(r.data, null, 2);\n        throw new Error(\"\".concat(what, \" failed (\").concat(r.status, \") - \").concat(msg));\n    }\n    return r.data;\n}\nasync function fetchAnalysisHistory(email) {\n    let page = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 1, limit = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : 10;\n    const params = new URLSearchParams({\n        email,\n        page: String(page),\n        limit: String(limit),\n        ts: String(Date.now())\n    });\n    const res = await fetch(\"\".concat(BASE_URL, \"/api/analyze?\").concat(params.toString()), {\n        method: \"GET\",\n        headers: {\n            \"Content-Type\": \"application/json\"\n        },\n        cache: \"no-store\"\n    });\n    const parsed = await readJsonOrText(res);\n    return ensureOk(parsed, \"Fetch analysis history\");\n}\nasync function deleteAnalysisResult(id) {\n    const res = await fetch(\"\".concat(BASE_URL, \"/api/analyze/\").concat(id), {\n        method: \"DELETE\",\n        headers: {\n            \"Content-Type\": \"application/json\"\n        }\n    });\n    const parsed = await readJsonOrText(res);\n    return ensureOk(parsed, \"Delete analysis result\");\n}\n// ============================================================================\n// Stripe checkout (unchanged)\n// ============================================================================\nasync function startCheckout(email, packageId) {\n    const res = await fetch(\"\".concat(BASE_URL, \"/api/checkout/create-checkout-session\"), {\n        method: \"POST\",\n        headers: {\n            \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n            email,\n            packageId\n        })\n    });\n    const { ok, data } = await readJsonOrText(res);\n    if (!ok) throw new Error(typeof data === \"string\" ? data : (data === null || data === void 0 ? void 0 : data.error) || \"Failed to start checkout\");\n    if (!(data === null || data === void 0 ? void 0 : data.url)) throw new Error(\"No checkout URL returned\");\n    window.location.href = data.url;\n}\nasync function verifySession(sessionId) {\n    const res = await fetch(\"\".concat(BASE_URL, \"/api/checkout/verify-session?session_id=\").concat(encodeURIComponent(sessionId)));\n    const parsed = await readJsonOrText(res);\n    return ensureOk(parsed, \"Verify session\");\n}\nasync function purchasePackage(email, packageId) {\n    const res = await fetch(\"\".concat(BASE_URL, \"/api/purchase\"), {\n        method: \"POST\",\n        headers: {\n            \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n            email,\n            packageId\n        })\n    });\n    const parsed = await readJsonOrText(res);\n    return ensureOk(parsed, \"Purchase package\");\n}\nasync function checkUserPackage(email) {\n    const res = await fetch(\"\".concat(BASE_URL, \"/api/user/check-package?email=\").concat(encodeURIComponent(email)));\n    const parsed = await readJsonOrText(res);\n    return ensureOk(parsed, \"Check user package\");\n}\n// ============================================================================\n// Coach chat + conversations (unchanged from your working setup)\n// ============================================================================\nasync function coachChat(param) {\n    let { email, question, latestContentInfo, conversationId, title } = param;\n    const res = await fetch(\"\".concat(BASE_URL, \"/api/coach-chat\"), {\n        method: \"POST\",\n        headers: {\n            \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n            email,\n            question,\n            latestContentInfo,\n            conversationId,\n            title\n        })\n    });\n    const parsed = await readJsonOrText(res);\n    return ensureOk(parsed, \"AI chat\");\n}\nasync function fetchConversation(id) {\n    const res = await fetch(\"\".concat(BASE_URL, \"/api/conversations/\").concat(id), {\n        method: \"GET\",\n        headers: {\n            \"Content-Type\": \"application/json\"\n        },\n        cache: \"no-store\"\n    });\n    const parsed = await readJsonOrText(res);\n    return ensureOk(parsed, \"Fetch conversation\");\n}\nasync function deleteConversation(conversationId) {\n    const res = await fetch(\"\".concat(BASE_URL, \"/api/conversations/\").concat(conversationId), {\n        method: \"DELETE\"\n    });\n    const parsed = await readJsonOrText(res);\n    return ensureOk(parsed, \"Delete conversation\");\n}\nasync function createEmptyConversation(email) {\n    try {\n        const res = await fetch(\"\".concat(BASE_URL, \"/api/conversations\"), {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify({\n                email\n            })\n        });\n        const parsed = await readJsonOrText(res);\n        const data = ensureOk(parsed, \"Create conversation\");\n        var _data__id, _ref;\n        return (_ref = (_data__id = data._id) !== null && _data__id !== void 0 ? _data__id : data.id) !== null && _ref !== void 0 ? _ref : null;\n    } catch (error) {\n        console.error(\"Error creating new conversation:\", error);\n        return null;\n    }\n}\nasync function generateConversationTitle(conversationId, firstUserMessage) {\n    const res = await fetch(\"\".concat(BASE_URL, \"/api/conversations/\").concat(conversationId, \"/generate-title\"), {\n        method: \"POST\",\n        headers: {\n            \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n            firstUserMessage\n        }),\n        cache: \"no-store\"\n    });\n    const parsed = await readJsonOrText(res);\n    const data = ensureOk(parsed, \"Generate title\");\n    return data.title || null;\n}\nasync function fetchConversations(email) {\n    const url = \"\".concat(BASE_URL, \"/api/conversations?email=\").concat(encodeURIComponent(email), \"&ts=\").concat(Date.now());\n    const res = await fetch(url, {\n        method: \"GET\",\n        headers: {\n            \"Content-Type\": \"application/json\"\n        },\n        cache: \"no-store\"\n    });\n    const parsed = await readJsonOrText(res);\n    return ensureOk(parsed, \"Fetch conversations\");\n}\nasync function sendFeedback(message, email) {\n    const res = await fetch(\"\".concat(BASE_URL, \"/api/feedback\"), {\n        method: \"POST\",\n        headers: {\n            \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n            message,\n            email\n        })\n    });\n    const parsed = await readJsonOrText(res);\n    if (!parsed.ok) {\n        var _parsed_data;\n        throw new Error(typeof parsed.data === \"string\" ? parsed.data : ((_parsed_data = parsed.data) === null || _parsed_data === void 0 ? void 0 : _parsed_data.error) || \"Failed to send feedback (\".concat(parsed.status, \")\"));\n    }\n    // backend returns { success: true }\n    return parsed.data;\n}\n// REPLACE your analyzeImageMultipart with this version\nfunction analyzeImageMultipart(opts) {\n    const { file, email, goal, linkBase, onProgress, captions = true } = opts;\n    const form = new FormData();\n    form.append(\"image\", file);\n    form.append(\"email\", email);\n    if (goal) form.append(\"goal\", goal);\n    if (linkBase) form.append(\"linkBase\", linkBase);\n    const url = \"\".concat(BASE_URL, \"/api/analyze\") + (captions === false ? \"?captions=false\" : \"\");\n    return new Promise((resolve, reject)=>{\n        const xhr = new XMLHttpRequest();\n        xhr.open(\"POST\", url, true);\n        xhr.onreadystatechange = ()=>{\n            if (xhr.readyState !== 4) return;\n            if (xhr.status >= 200 && xhr.status < 300) {\n                try {\n                    const json = JSON.parse(xhr.responseText);\n                    resolve(json);\n                } catch (e) {\n                    reject(new Error(\"Invalid JSON from server.\"));\n                }\n            } else {\n                try {\n                    const err = JSON.parse(xhr.responseText);\n                    reject(new Error((err === null || err === void 0 ? void 0 : err.error) || \"Upload failed (\".concat(xhr.status, \")\")));\n                } catch (e) {\n                    reject(new Error(\"Upload failed (\".concat(xhr.status, \")\")));\n                }\n            }\n        };\n        if (xhr.upload && typeof onProgress === \"function\") {\n            xhr.upload.onprogress = (evt)=>{\n                if (!evt.lengthComputable) return;\n                onProgress(Math.round(evt.loaded / evt.total * 100));\n            };\n        }\n        xhr.onerror = ()=>reject(new Error(\"Network error\"));\n        xhr.send(form);\n    });\n}\nasync function getAnalysisById(id) {\n    const res = await fetch(\"\".concat(BASE_URL, \"/api/analyze/\").concat(id), {\n        cache: \"no-store\"\n    });\n    const parsed = await readJsonOrText(res);\n    return ensureOk(parsed, \"Fetch result by id\");\n}\nasync function updateAnalysisById(id, patch) {\n    const res = await fetch(\"\".concat(BASE_URL, \"/api/analyze/\").concat(id), {\n        method: \"PATCH\",\n        headers: {\n            \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(patch)\n    });\n    const parsed = await readJsonOrText(res);\n    return ensureOk(parsed, \"Update analysis\");\n}\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9hcHAvdXRpbHMvYXBpLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLHVCQUF1QjtBQUd2QixNQUFNQSxXQUFXQyxPQUFPQSxDQUFDQyxHQUFHLENBQUNDLG1CQUFtQixJQUFJO0FBQ3BELDZCQUE2QjtBQUN0QixTQUFTQztJQUNkLElBQUksS0FBNkIsRUFBRSxFQUFVO0lBQzdDLE9BQU9DLGFBQWFDLE9BQU8sQ0FBQyxnQkFBZ0I7QUFDOUM7QUFDQSxlQUFlQyxlQUFlQyxHQUFhO0lBQ3pDLE1BQU1DLE9BQU8sTUFBTUQsSUFBSUMsSUFBSTtJQUMzQixJQUFJO1FBQ0YsT0FBTztZQUFFQyxJQUFJRixJQUFJRSxFQUFFO1lBQUVDLFFBQVFILElBQUlHLE1BQU07WUFBRUMsTUFBTUMsS0FBS0MsS0FBSyxDQUFDTDtRQUFNO0lBQ2xFLEVBQUUsVUFBTTtRQUNOLE9BQU87WUFBRUMsSUFBSUYsSUFBSUUsRUFBRTtZQUFFQyxRQUFRSCxJQUFJRyxNQUFNO1lBQUVDLE1BQU1IO1FBQUs7SUFDdEQ7QUFDRjtBQUVBLFNBQVNNLFNBQ1BDLENBQWlELEVBQ2pEQyxJQUFZO0lBRVosSUFBSSxDQUFDRCxFQUFFTixFQUFFLEVBQUU7UUFDVCxNQUFNUSxNQUNKLE9BQU9GLEVBQUVKLElBQUksS0FBSyxXQUFXSSxFQUFFSixJQUFJLEdBQUdDLEtBQUtNLFNBQVMsQ0FBQ0gsRUFBRUosSUFBSSxFQUFFLE1BQU07UUFDckUsTUFBTSxJQUFJUSxNQUFNLEdBQW1CSixPQUFoQkMsTUFBSyxhQUEwQkMsT0FBZkYsRUFBRUwsTUFBTSxFQUFDLFFBQVUsT0FBSk87SUFDcEQ7SUFDQSxPQUFPRixFQUFFSixJQUFJO0FBQ2Y7QUFJTyxlQUFlUyxxQkFDcEJDLEtBQWE7UUFDYkMsT0FBQUEsaUVBQU8sR0FDUEMsUUFBQUEsaUVBQVE7SUFFUixNQUFNQyxTQUFTLElBQUlDLGdCQUFnQjtRQUNqQ0o7UUFDQUMsTUFBTUks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QnFCLFFBQVE7QUFDckMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vc3JjL2FwcC91dGlscy9hcGkudHM/OTM3MyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvYXBwL3V0aWxzL2FwaS50c1xyXG5pbXBvcnQgdHlwZSB7IFJlc3VsdERvYyB9IGZyb20gXCJAL2FwcC90eXBlcy9hbmFseXNpc1wiO1xyXG5cclxuY29uc3QgQkFTRV9VUkwgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19BUElfVVJMIHx8IFwiaHR0cDovL2xvY2FsaG9zdDo1MDAxXCI7XHJcbi8vIHNyYy9hcHAvdXRpbHMvYXV0aC1saXRlLnRzXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRDbGllbnRFbWFpbCgpOiBzdHJpbmcge1xyXG4gIGlmICh0eXBlb2Ygd2luZG93ID09PSBcInVuZGVmaW5lZFwiKSByZXR1cm4gXCJcIjtcclxuICByZXR1cm4gbG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJ1c2VyRW1haWxcIikgfHwgXCJcIjtcclxufVxyXG5hc3luYyBmdW5jdGlvbiByZWFkSnNvbk9yVGV4dChyZXM6IFJlc3BvbnNlKSB7XHJcbiAgY29uc3QgdGV4dCA9IGF3YWl0IHJlcy50ZXh0KCk7XHJcbiAgdHJ5IHtcclxuICAgIHJldHVybiB7IG9rOiByZXMub2ssIHN0YXR1czogcmVzLnN0YXR1cywgZGF0YTogSlNPTi5wYXJzZSh0ZXh0KSB9O1xyXG4gIH0gY2F0Y2gge1xyXG4gICAgcmV0dXJuIHsgb2s6IHJlcy5vaywgc3RhdHVzOiByZXMuc3RhdHVzLCBkYXRhOiB0ZXh0IH07XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBlbnN1cmVPazxUID0gdW5rbm93bj4oXHJcbiAgcjogeyBvazogYm9vbGVhbjsgc3RhdHVzOiBudW1iZXI7IGRhdGE6IHVua25vd24gfSxcclxuICB3aGF0OiBzdHJpbmdcclxuKTogVCB7XHJcbiAgaWYgKCFyLm9rKSB7XHJcbiAgICBjb25zdCBtc2cgPVxyXG4gICAgICB0eXBlb2Ygci5kYXRhID09PSBcInN0cmluZ1wiID8gci5kYXRhIDogSlNPTi5zdHJpbmdpZnkoci5kYXRhLCBudWxsLCAyKTtcclxuICAgIHRocm93IG5ldyBFcnJvcihgJHt3aGF0fSBmYWlsZWQgKCR7ci5zdGF0dXN9KSAtICR7bXNnfWApO1xyXG4gIH1cclxuICByZXR1cm4gci5kYXRhIGFzIFQ7XHJcbn1cclxuXHJcblxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGZldGNoQW5hbHlzaXNIaXN0b3J5KFxyXG4gIGVtYWlsOiBzdHJpbmcsXHJcbiAgcGFnZSA9IDEsXHJcbiAgbGltaXQgPSAxMFxyXG4pOiBQcm9taXNlPHsgcmVzdWx0czogUmVzdWx0RG9jW107IHRvdGFsOiBudW1iZXIgfT4ge1xyXG4gIGNvbnN0IHBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoe1xyXG4gICAgZW1haWwsXHJcbiAgICBwYWdlOiBTdHJpbmcocGFnZSksXHJcbiAgICBsaW1pdDogU3RyaW5nKGxpbWl0KSxcclxuICAgIHRzOiBTdHJpbmcoRGF0ZS5ub3coKSksXHJcbiAgfSk7XHJcblxyXG4gIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKGAke0JBU0VfVVJMfS9hcGkvYW5hbHl6ZT8ke3BhcmFtcy50b1N0cmluZygpfWAsIHtcclxuICAgIG1ldGhvZDogXCJHRVRcIixcclxuICAgIGhlYWRlcnM6IHsgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIgfSxcclxuICAgIGNhY2hlOiBcIm5vLXN0b3JlXCIsXHJcbiAgfSk7XHJcbiAgY29uc3QgcGFyc2VkID0gYXdhaXQgcmVhZEpzb25PclRleHQocmVzKTtcclxuICByZXR1cm4gZW5zdXJlT2s8eyByZXN1bHRzOiBSZXN1bHREb2NbXTsgdG90YWw6IG51bWJlciB9PihcclxuICAgIHBhcnNlZCxcclxuICAgIFwiRmV0Y2ggYW5hbHlzaXMgaGlzdG9yeVwiXHJcbiAgKTtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlbGV0ZUFuYWx5c2lzUmVzdWx0KGlkOiBzdHJpbmcpIHtcclxuICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChgJHtCQVNFX1VSTH0vYXBpL2FuYWx5emUvJHtpZH1gLCB7XHJcbiAgICBtZXRob2Q6IFwiREVMRVRFXCIsXHJcbiAgICBoZWFkZXJzOiB7IFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiIH0sXHJcbiAgfSk7XHJcbiAgY29uc3QgcGFyc2VkID0gYXdhaXQgcmVhZEpzb25PclRleHQocmVzKTtcclxuICByZXR1cm4gZW5zdXJlT2s8eyBtZXNzYWdlOiBzdHJpbmcgfT4ocGFyc2VkLCBcIkRlbGV0ZSBhbmFseXNpcyByZXN1bHRcIik7XHJcbn1cclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8gU3RyaXBlIGNoZWNrb3V0ICh1bmNoYW5nZWQpXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHN0YXJ0Q2hlY2tvdXQoZW1haWw6IHN0cmluZywgcGFja2FnZUlkOiBzdHJpbmcpIHtcclxuICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChgJHtCQVNFX1VSTH0vYXBpL2NoZWNrb3V0L2NyZWF0ZS1jaGVja291dC1zZXNzaW9uYCwge1xyXG4gICAgbWV0aG9kOiBcIlBPU1RcIixcclxuICAgIGhlYWRlcnM6IHsgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIgfSxcclxuICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgZW1haWwsIHBhY2thZ2VJZCB9KSxcclxuICB9KTtcclxuICBjb25zdCB7IG9rLCBkYXRhIH0gPSBhd2FpdCByZWFkSnNvbk9yVGV4dChyZXMpO1xyXG4gIGlmICghb2spIHRocm93IG5ldyBFcnJvcih0eXBlb2YgZGF0YSA9PT0gXCJzdHJpbmdcIiA/IGRhdGEgOiBkYXRhPy5lcnJvciB8fCBcIkZhaWxlZCB0byBzdGFydCBjaGVja291dFwiKTtcclxuICBpZiAoIWRhdGE/LnVybCkgdGhyb3cgbmV3IEVycm9yKFwiTm8gY2hlY2tvdXQgVVJMIHJldHVybmVkXCIpO1xyXG4gIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gZGF0YS51cmw7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB2ZXJpZnlTZXNzaW9uKHNlc3Npb25JZDogc3RyaW5nKSB7XHJcbiAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goXHJcbiAgICBgJHtCQVNFX1VSTH0vYXBpL2NoZWNrb3V0L3ZlcmlmeS1zZXNzaW9uP3Nlc3Npb25faWQ9JHtlbmNvZGVVUklDb21wb25lbnQoc2Vzc2lvbklkKX1gXHJcbiAgKTtcclxuICBjb25zdCBwYXJzZWQgPSBhd2FpdCByZWFkSnNvbk9yVGV4dChyZXMpO1xyXG4gIHJldHVybiBlbnN1cmVPazx7IHN0YXR1czogc3RyaW5nOyBlbWFpbD86IHN0cmluZzsgcGFja2FnZUlkPzogc3RyaW5nIH0+KFxyXG4gICAgcGFyc2VkLFxyXG4gICAgXCJWZXJpZnkgc2Vzc2lvblwiXHJcbiAgKTtcclxufVxyXG5cclxuZXhwb3J0IHR5cGUgUHVyY2hhc2VSZXNwb25zZSA9IHsgbWVzc2FnZTogc3RyaW5nIH07XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcHVyY2hhc2VQYWNrYWdlKGVtYWlsOiBzdHJpbmcsIHBhY2thZ2VJZDogc3RyaW5nKSB7XHJcbiAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goYCR7QkFTRV9VUkx9L2FwaS9wdXJjaGFzZWAsIHtcclxuICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICBoZWFkZXJzOiB7IFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiIH0sXHJcbiAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IGVtYWlsLCBwYWNrYWdlSWQgfSksXHJcbiAgfSk7XHJcbiAgY29uc3QgcGFyc2VkID0gYXdhaXQgcmVhZEpzb25PclRleHQocmVzKTtcclxuICByZXR1cm4gZW5zdXJlT2s8UHVyY2hhc2VSZXNwb25zZT4ocGFyc2VkLCBcIlB1cmNoYXNlIHBhY2thZ2VcIik7XHJcbn1cclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8gVXNlci9wYWNrYWdlXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuZXhwb3J0IGludGVyZmFjZSBVc2VyUGFja2FnZVJlc3BvbnNlIHtcclxuICBoYXNBY2Nlc3M6IGJvb2xlYW47XHJcbiAgcGFja2FnZT86IHN0cmluZztcclxuICB1cGxvYWRzUmVtYWluaW5nPzogbnVtYmVyO1xyXG4gIGV4cGlyZXNBdD86IHN0cmluZztcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNoZWNrVXNlclBhY2thZ2UoZW1haWw6IHN0cmluZyk6IFByb21pc2U8VXNlclBhY2thZ2VSZXNwb25zZT4ge1xyXG4gIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKFxyXG4gICAgYCR7QkFTRV9VUkx9L2FwaS91c2VyL2NoZWNrLXBhY2thZ2U/ZW1haWw9JHtlbmNvZGVVUklDb21wb25lbnQoZW1haWwpfWBcclxuICApO1xyXG4gIGNvbnN0IHBhcnNlZCA9IGF3YWl0IHJlYWRKc29uT3JUZXh0KHJlcyk7XHJcbiAgcmV0dXJuIGVuc3VyZU9rPFVzZXJQYWNrYWdlUmVzcG9uc2U+KHBhcnNlZCwgXCJDaGVjayB1c2VyIHBhY2thZ2VcIik7XHJcbn1cclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8gQ29hY2ggY2hhdCArIGNvbnZlcnNhdGlvbnMgKHVuY2hhbmdlZCBmcm9tIHlvdXIgd29ya2luZyBzZXR1cClcclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY29hY2hDaGF0KHtcclxuICBlbWFpbCxcclxuICBxdWVzdGlvbixcclxuICBsYXRlc3RDb250ZW50SW5mbyxcclxuICBjb252ZXJzYXRpb25JZCxcclxuICB0aXRsZSxcclxufToge1xyXG4gIGVtYWlsOiBzdHJpbmc7XHJcbiAgcXVlc3Rpb246IHN0cmluZztcclxuICBsYXRlc3RDb250ZW50SW5mbz86IHN0cmluZztcclxuICBjb252ZXJzYXRpb25JZD86IHN0cmluZztcclxuICB0aXRsZT86IHN0cmluZztcclxufSk6IFByb21pc2U8Q29hY2hDaGF0UmVzcG9uc2U+IHtcclxuICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChgJHtCQVNFX1VSTH0vYXBpL2NvYWNoLWNoYXRgLCB7XHJcbiAgICBtZXRob2Q6IFwiUE9TVFwiLFxyXG4gICAgaGVhZGVyczogeyBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIiB9LFxyXG4gICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBlbWFpbCwgcXVlc3Rpb24sIGxhdGVzdENvbnRlbnRJbmZvLCBjb252ZXJzYXRpb25JZCwgdGl0bGUgfSksXHJcbiAgfSk7XHJcbiAgY29uc3QgcGFyc2VkID0gYXdhaXQgcmVhZEpzb25PclRleHQocmVzKTtcclxuICByZXR1cm4gZW5zdXJlT2s8Q29hY2hDaGF0UmVzcG9uc2U+KHBhcnNlZCwgXCJBSSBjaGF0XCIpO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZmV0Y2hDb252ZXJzYXRpb24oaWQ6IHN0cmluZyk6IFByb21pc2U8Q29udmVyc2F0aW9uPiB7XHJcbiAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goYCR7QkFTRV9VUkx9L2FwaS9jb252ZXJzYXRpb25zLyR7aWR9YCwge1xyXG4gICAgbWV0aG9kOiBcIkdFVFwiLFxyXG4gICAgaGVhZGVyczogeyBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIiB9LFxyXG4gICAgY2FjaGU6IFwibm8tc3RvcmVcIixcclxuICB9KTtcclxuICBjb25zdCBwYXJzZWQgPSBhd2FpdCByZWFkSnNvbk9yVGV4dChyZXMpO1xyXG4gIHJldHVybiBlbnN1cmVPazxDb252ZXJzYXRpb24+KHBhcnNlZCwgXCJGZXRjaCBjb252ZXJzYXRpb25cIik7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVDb252ZXJzYXRpb24oY29udmVyc2F0aW9uSWQ6IHN0cmluZykge1xyXG4gIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKGAke0JBU0VfVVJMfS9hcGkvY29udmVyc2F0aW9ucy8ke2NvbnZlcnNhdGlvbklkfWAsIHtcclxuICAgIG1ldGhvZDogXCJERUxFVEVcIixcclxuICB9KTtcclxuICBjb25zdCBwYXJzZWQgPSBhd2FpdCByZWFkSnNvbk9yVGV4dChyZXMpO1xyXG4gIHJldHVybiBlbnN1cmVPayhwYXJzZWQsIFwiRGVsZXRlIGNvbnZlcnNhdGlvblwiKTtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZUVtcHR5Q29udmVyc2F0aW9uKGVtYWlsOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZyB8IG51bGw+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goYCR7QkFTRV9VUkx9L2FwaS9jb252ZXJzYXRpb25zYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxyXG4gICAgICBoZWFkZXJzOiB7IFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiIH0sXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgZW1haWwgfSksXHJcbiAgICB9KTtcclxuICAgIGNvbnN0IHBhcnNlZCA9IGF3YWl0IHJlYWRKc29uT3JUZXh0KHJlcyk7XHJcbiAgICBjb25zdCBkYXRhID0gZW5zdXJlT2s8eyBfaWQ/OiBzdHJpbmc7IGlkPzogc3RyaW5nIH0+KHBhcnNlZCwgXCJDcmVhdGUgY29udmVyc2F0aW9uXCIpO1xyXG4gICAgcmV0dXJuIGRhdGEuX2lkID8/IGRhdGEuaWQgPz8gbnVsbDtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGNyZWF0aW5nIG5ldyBjb252ZXJzYXRpb246XCIsIGVycm9yKTtcclxuICAgIHJldHVybiBudWxsO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdlbmVyYXRlQ29udmVyc2F0aW9uVGl0bGUoXHJcbiAgY29udmVyc2F0aW9uSWQ6IHN0cmluZyxcclxuICBmaXJzdFVzZXJNZXNzYWdlOiBzdHJpbmdcclxuKSB7XHJcbiAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goYCR7QkFTRV9VUkx9L2FwaS9jb252ZXJzYXRpb25zLyR7Y29udmVyc2F0aW9uSWR9L2dlbmVyYXRlLXRpdGxlYCwge1xyXG4gICAgbWV0aG9kOiBcIlBPU1RcIixcclxuICAgIGhlYWRlcnM6IHsgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIgfSxcclxuICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgZmlyc3RVc2VyTWVzc2FnZSB9KSxcclxuICAgIGNhY2hlOiBcIm5vLXN0b3JlXCIsXHJcbiAgfSk7XHJcbiAgY29uc3QgcGFyc2VkID0gYXdhaXQgcmVhZEpzb25PclRleHQocmVzKTtcclxuICBjb25zdCBkYXRhID0gZW5zdXJlT2s8eyB0aXRsZTogc3RyaW5nIHwgbnVsbCB9PihwYXJzZWQsIFwiR2VuZXJhdGUgdGl0bGVcIik7XHJcbiAgcmV0dXJuIGRhdGEudGl0bGUgfHwgbnVsbDtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGZldGNoQ29udmVyc2F0aW9ucyhlbWFpbDogc3RyaW5nKTogUHJvbWlzZTxDb252ZXJzYXRpb25TdW1tYXJ5W10+IHtcclxuICBjb25zdCB1cmwgPSBgJHtCQVNFX1VSTH0vYXBpL2NvbnZlcnNhdGlvbnM/ZW1haWw9JHtlbmNvZGVVUklDb21wb25lbnQoZW1haWwpfSZ0cz0ke0RhdGUubm93KCl9YDtcclxuICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCh1cmwsIHtcclxuICAgIG1ldGhvZDogXCJHRVRcIixcclxuICAgIGhlYWRlcnM6IHsgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIgfSxcclxuICAgIGNhY2hlOiBcIm5vLXN0b3JlXCIsXHJcbiAgfSk7XHJcbiAgY29uc3QgcGFyc2VkID0gYXdhaXQgcmVhZEpzb25PclRleHQocmVzKTtcclxuICByZXR1cm4gZW5zdXJlT2s8Q29udmVyc2F0aW9uU3VtbWFyeVtdPihwYXJzZWQsIFwiRmV0Y2ggY29udmVyc2F0aW9uc1wiKTtcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBDaGF0TWVzc2FnZSB7XHJcbiAgcm9sZTogXCJ1c2VyXCIgfCBcImFzc2lzdGFudFwiO1xyXG4gIGNvbnRlbnQ6IHN0cmluZztcclxuICBfaWQ/OiBzdHJpbmc7XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgQ2hhdENvbnZlcnNhdGlvbiB7XHJcbiAgX2lkOiBzdHJpbmc7XHJcbiAgdGl0bGU/OiBzdHJpbmc7XHJcbiAgbWVzc2FnZXM6IENoYXRNZXNzYWdlW107XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgQ29hY2hDaGF0UmVzcG9uc2Uge1xyXG4gIGNvbnZlcnNhdGlvbjogQ2hhdENvbnZlcnNhdGlvbjtcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBDb252ZXJzYXRpb25TdW1tYXJ5IHtcclxuICBfaWQ6IHN0cmluZztcclxuICB0aXRsZT86IHN0cmluZztcclxuICB1cGRhdGVkQXQ/OiBzdHJpbmc7XHJcbn1cclxuZXhwb3J0IGludGVyZmFjZSBDb252ZXJzYXRpb24ge1xyXG4gIF9pZDogc3RyaW5nO1xyXG4gIHRpdGxlPzogc3RyaW5nO1xyXG4gIG1lc3NhZ2VzOiBDaGF0TWVzc2FnZVtdO1xyXG4gIHVwZGF0ZWRBdD86IHN0cmluZztcclxufVxyXG5cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzZW5kRmVlZGJhY2sobWVzc2FnZTogc3RyaW5nLCBlbWFpbD86IHN0cmluZyk6IFByb21pc2U8eyBzdWNjZXNzOiBib29sZWFuIH0+IHtcclxuICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChgJHtCQVNFX1VSTH0vYXBpL2ZlZWRiYWNrYCwge1xyXG4gICAgbWV0aG9kOiBcIlBPU1RcIixcclxuICAgIGhlYWRlcnM6IHsgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIgfSxcclxuICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgbWVzc2FnZSwgZW1haWwgfSksXHJcbiAgfSk7XHJcblxyXG4gIGNvbnN0IHBhcnNlZCA9IGF3YWl0IHJlYWRKc29uT3JUZXh0KHJlcyk7XHJcbiAgaWYgKCFwYXJzZWQub2spIHtcclxuICAgIHRocm93IG5ldyBFcnJvcihcclxuICAgICAgdHlwZW9mIHBhcnNlZC5kYXRhID09PSBcInN0cmluZ1wiXHJcbiAgICAgICAgPyBwYXJzZWQuZGF0YVxyXG4gICAgICAgIDogcGFyc2VkLmRhdGE/LmVycm9yIHx8IGBGYWlsZWQgdG8gc2VuZCBmZWVkYmFjayAoJHtwYXJzZWQuc3RhdHVzfSlgXHJcbiAgICApO1xyXG4gIH1cclxuICAvLyBiYWNrZW5kIHJldHVybnMgeyBzdWNjZXNzOiB0cnVlIH1cclxuICByZXR1cm4gcGFyc2VkLmRhdGEgYXMgeyBzdWNjZXNzOiBib29sZWFuIH07XHJcbn1cclxuXHJcbi8vIGFkZCB0aGlzIHR5cGUgbmVhciB5b3VyIG90aGVyIGV4cG9ydHNcclxuZXhwb3J0IHR5cGUgQW5hbHl6ZVJlc3BvbnNlID0ge1xyXG4gIG1lc3NhZ2U/OiBzdHJpbmc7XHJcbiAgcmVxdWVzdElkPzogc3RyaW5nO1xyXG4gIGluc2lnaHRzOiBSZXN1bHREb2M7XHJcbiAgZHVyYXRpb25zPzogeyB0b3RhbF9tczogbnVtYmVyOyB2aXNpb25fbXM6IG51bWJlcjsgY2FwdGlvbnNfbXM6IG51bWJlciB9O1xyXG4gIGR1cGxpY2F0ZT86IGJvb2xlYW47XHJcbn07XHJcblxyXG4vLyBSRVBMQUNFIHlvdXIgYW5hbHl6ZUltYWdlTXVsdGlwYXJ0IHdpdGggdGhpcyB2ZXJzaW9uXHJcbmV4cG9ydCBmdW5jdGlvbiBhbmFseXplSW1hZ2VNdWx0aXBhcnQob3B0czoge1xyXG4gIGZpbGU6IEZpbGU7XHJcbiAgZW1haWw6IHN0cmluZztcclxuICBnb2FsPzogXCJzdWJzXCIgfCBcInBwdlwiIHwgXCJjdXN0b21zXCI7XHJcbiAgbGlua0Jhc2U/OiBzdHJpbmc7XHJcbiAgY2FwdGlvbnM/OiBib29sZWFuOyAvLyBORVc6IGRlZmF1bHQgdHJ1ZSAoY29tcGF0IHdpdGggeW91ciBjdXJyZW50IFVYKVxyXG4gIG9uUHJvZ3Jlc3M/OiAocGN0OiBudW1iZXIpID0+IHZvaWQ7XHJcbn0pOiBQcm9taXNlPEFuYWx5emVSZXNwb25zZT4ge1xyXG4gIGNvbnN0IHsgZmlsZSwgZW1haWwsIGdvYWwsIGxpbmtCYXNlLCBvblByb2dyZXNzLCBjYXB0aW9ucyA9IHRydWUgfSA9IG9wdHM7XHJcblxyXG4gIGNvbnN0IGZvcm0gPSBuZXcgRm9ybURhdGEoKTtcclxuICBmb3JtLmFwcGVuZChcImltYWdlXCIsIGZpbGUpO1xyXG4gIGZvcm0uYXBwZW5kKFwiZW1haWxcIiwgZW1haWwpO1xyXG4gIGlmIChnb2FsKSBmb3JtLmFwcGVuZChcImdvYWxcIiwgZ29hbCk7XHJcbiAgaWYgKGxpbmtCYXNlKSBmb3JtLmFwcGVuZChcImxpbmtCYXNlXCIsIGxpbmtCYXNlKTtcclxuXHJcbiAgY29uc3QgdXJsID1cclxuICAgIGAke0JBU0VfVVJMfS9hcGkvYW5hbHl6ZWAgKyAoY2FwdGlvbnMgPT09IGZhbHNlID8gYD9jYXB0aW9ucz1mYWxzZWAgOiBcIlwiKTtcclxuXHJcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgIGNvbnN0IHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xyXG4gICAgeGhyLm9wZW4oXCJQT1NUXCIsIHVybCwgdHJ1ZSk7XHJcblxyXG4gICAgeGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9ICgpID0+IHtcclxuICAgICAgaWYgKHhoci5yZWFkeVN0YXRlICE9PSA0KSByZXR1cm47XHJcbiAgICAgIGlmICh4aHIuc3RhdHVzID49IDIwMCAmJiB4aHIuc3RhdHVzIDwgMzAwKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgIGNvbnN0IGpzb24gPSBKU09OLnBhcnNlKHhoci5yZXNwb25zZVRleHQpIGFzIEFuYWx5emVSZXNwb25zZTtcclxuICAgICAgICAgIHJlc29sdmUoanNvbik7XHJcbiAgICAgICAgfSBjYXRjaCB7XHJcbiAgICAgICAgICByZWplY3QobmV3IEVycm9yKFwiSW52YWxpZCBKU09OIGZyb20gc2VydmVyLlwiKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICBjb25zdCBlcnIgPSBKU09OLnBhcnNlKHhoci5yZXNwb25zZVRleHQpO1xyXG4gICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcihlcnI/LmVycm9yIHx8IGBVcGxvYWQgZmFpbGVkICgke3hoci5zdGF0dXN9KWApKTtcclxuICAgICAgICB9IGNhdGNoIHtcclxuICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoYFVwbG9hZCBmYWlsZWQgKCR7eGhyLnN0YXR1c30pYCkpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBpZiAoeGhyLnVwbG9hZCAmJiB0eXBlb2Ygb25Qcm9ncmVzcyA9PT0gXCJmdW5jdGlvblwiKSB7XHJcbiAgICAgIHhoci51cGxvYWQub25wcm9ncmVzcyA9IChldnQpID0+IHtcclxuICAgICAgICBpZiAoIWV2dC5sZW5ndGhDb21wdXRhYmxlKSByZXR1cm47XHJcbiAgICAgICAgb25Qcm9ncmVzcyhNYXRoLnJvdW5kKChldnQubG9hZGVkIC8gZXZ0LnRvdGFsKSAqIDEwMCkpO1xyXG4gICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIHhoci5vbmVycm9yID0gKCkgPT4gcmVqZWN0KG5ldyBFcnJvcihcIk5ldHdvcmsgZXJyb3JcIikpO1xyXG4gICAgeGhyLnNlbmQoZm9ybSk7XHJcbiAgfSk7XHJcbn1cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEFuYWx5c2lzQnlJZChpZDogc3RyaW5nKSB7XHJcbiAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goYCR7QkFTRV9VUkx9L2FwaS9hbmFseXplLyR7aWR9YCwgeyBjYWNoZTogXCJuby1zdG9yZVwiIH0pO1xyXG4gIGNvbnN0IHBhcnNlZCA9IGF3YWl0IHJlYWRKc29uT3JUZXh0KHJlcyk7XHJcbiAgcmV0dXJuIGVuc3VyZU9rPFJlc3VsdERvYz4ocGFyc2VkLCBcIkZldGNoIHJlc3VsdCBieSBpZFwiKTtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZUFuYWx5c2lzQnlJZChpZDogc3RyaW5nLCBwYXRjaDogUGFydGlhbDxSZXN1bHREb2M+KTogUHJvbWlzZTxSZXN1bHREb2M+IHtcclxuICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChgJHtCQVNFX1VSTH0vYXBpL2FuYWx5emUvJHtpZH1gLCB7XHJcbiAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgIGhlYWRlcnM6IHsgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIgfSxcclxuICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHBhdGNoKSxcclxuICB9KTtcclxuICBjb25zdCBwYXJzZWQgPSBhd2FpdCByZWFkSnNvbk9yVGV4dChyZXMpO1xyXG4gIHJldHVybiBlbnN1cmVPazxSZXN1bHREb2M+KHBhcnNlZCwgXCJVcGRhdGUgYW5hbHlzaXNcIik7XHJcbn0iXSwibmFtZXMiOlsiQkFTRV9VUkwiLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfQVBJX1VSTCIsImdldENsaWVudEVtYWlsIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsInJlYWRKc29uT3JUZXh0IiwicmVzIiwidGV4dCIsIm9rIiwic3RhdHVzIiwiZGF0YSIsIkpTT04iLCJwYXJzZSIsImVuc3VyZU9rIiwiciIsIndoYXQiLCJtc2ciLCJzdHJpbmdpZnkiLCJFcnJvciIsImZldGNoQW5hbHlzaXNIaXN0b3J5IiwiZW1haWwiLCJwYWdlIiwibGltaXQiLCJwYXJhbXMiLCJVUkxTZWFyY2hQYXJhbXMiLCJTdHJpbmciLCJ0cyIsIkRhdGUiLCJub3ciLCJmZXRjaCIsInRvU3RyaW5nIiwibWV0aG9kIiwiaGVhZGVycyIsImNhY2hlIiwicGFyc2VkIiwiZGVsZXRlQW5hbHlzaXNSZXN1bHQiLCJpZCIsInN0YXJ0Q2hlY2tvdXQiLCJwYWNrYWdlSWQiLCJib2R5IiwiZXJyb3IiLCJ1cmwiLCJ3aW5kb3ciLCJsb2NhdGlvbiIsImhyZWYiLCJ2ZXJpZnlTZXNzaW9uIiwic2Vzc2lvbklkIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwicHVyY2hhc2VQYWNrYWdlIiwiY2hlY2tVc2VyUGFja2FnZSIsImNvYWNoQ2hhdCIsInF1ZXN0aW9uIiwibGF0ZXN0Q29udGVudEluZm8iLCJjb252ZXJzYXRpb25JZCIsInRpdGxlIiwiZmV0Y2hDb252ZXJzYXRpb24iLCJkZWxldGVDb252ZXJzYXRpb24iLCJjcmVhdGVFbXB0eUNvbnZlcnNhdGlvbiIsIl9pZCIsImNvbnNvbGUiLCJnZW5lcmF0ZUNvbnZlcnNhdGlvblRpdGxlIiwiZmlyc3RVc2VyTWVzc2FnZSIsImZldGNoQ29udmVyc2F0aW9ucyIsInNlbmRGZWVkYmFjayIsIm1lc3NhZ2UiLCJhbmFseXplSW1hZ2VNdWx0aXBhcnQiLCJvcHRzIiwiZmlsZSIsImdvYWwiLCJsaW5rQmFzZSIsIm9uUHJvZ3Jlc3MiLCJjYXB0aW9ucyIsImZvcm0iLCJGb3JtRGF0YSIsImFwcGVuZCIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwieGhyIiwiWE1MSHR0cFJlcXVlc3QiLCJvcGVuIiwib25yZWFkeXN0YXRlY2hhbmdlIiwicmVhZHlTdGF0ZSIsImpzb24iLCJyZXNwb25zZVRleHQiLCJlcnIiLCJ1cGxvYWQiLCJvbnByb2dyZXNzIiwiZXZ0IiwibGVuZ3RoQ29tcHV0YWJsZSIsIk1hdGgiLCJyb3VuZCIsImxvYWRlZCIsInRvdGFsIiwib25lcnJvciIsInNlbmQiLCJnZXRBbmFseXNpc0J5SWQiLCJ1cGRhdGVBbmFseXNpc0J5SWQiLCJwYXRjaCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/app/utils/api.ts\n"));

/***/ })

});