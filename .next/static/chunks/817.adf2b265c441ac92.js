"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[817],{9865:function(e,t,a){a.d(t,{Z:function(){return s}});var n=a(5531);let s=(0,n.Z)("book-open",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]])},1243:function(e,t,a){a.d(t,{Z:function(){return s}});var n=a(5531);let s=(0,n.Z)("volume-2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]])},5817:function(e,t,a){a.r(t),a.d(t,{default:function(){return CoachChatHistory}});var n=a(7437),s=a(2265),r=a(6354),l=a(9865),i=a(1243),o=a(2601);let c="1"===o.env.NEXT_PUBLIC_DEBUG||new URLSearchParams(window.location.search).has("debug");function dbg(e,t){if(c)try{console.groupCollapsed("[DBG] ".concat(e)),void 0!==t&&console.log(t),console.groupEnd()}catch(a){console.log("[DBG] ".concat(e),t)}}var d=a(4278);function CoachChatHistory(e){let{onSelect:t,selectedId:a,refreshKey:o,showHeader:c=!1,onNew:u,className:h,maxHeight:x=420}=e,[y,m]=(0,s.useState)([]),[g,p]=(0,s.useState)(!0);return(0,s.useEffect)(()=>{p(!0),dbg("history:load:start",{refreshKey:o}),(0,r.ku)().then(e=>{dbg("history:load:success",{count:e.length,titles:e.map(e=>e.title).slice(0,5)}),m(e)}).catch(e=>dbg("history:load:error",e)).finally(()=>p(!1))},[o]),(0,n.jsxs)("div",{className:["w-full bg-[#0f1520] border border-[#232B36] rounded-2xl shadow-2xl overflow-hidden",h||""].join(" "),style:{maxHeight:x},children:[c&&(0,n.jsxs)("div",{className:"flex items-center justify-between px-4 pt-3 pb-2 border-b border-[#232B36] bg-[#121A24]",children:[(0,n.jsxs)("span",{className:"font-semibold text-gray-200 text-sm inline-flex items-center gap-2",children:[(0,n.jsx)(l.Z,{className:"w-4 h-4 text-cyan-400"}),"AI Chat History"]}),!!u&&(0,n.jsx)("button",{onClick:u,className:"px-2 py-1 text-xs rounded text-white bg-cyan-600 hover:bg-cyan-700 transition",children:"+ New"})]}),(0,n.jsx)("div",{className:"p-3 md:p-4 space-y-2 overflow-y-auto",style:{maxHeight:"number"==typeof x?x:void 0},children:g?(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(d.O,{className:"h-10 w-full"}),(0,n.jsx)(d.O,{className:"h-10 w-full"}),(0,n.jsx)(d.O,{className:"h-10 w-full"}),(0,n.jsx)(d.O,{className:"h-10 w-3/4"})]}):0===y.length?(0,n.jsx)("div",{className:"text-xs text-gray-400",children:"No conversations yet."}):y.map(e=>{let s=a===e._id;return(0,n.jsxs)("button",{onClick:()=>t(e._id),className:["w-full text-left px-3 py-2 rounded-xl transition border",s?"bg-cyan-600/15 border-cyan-600/40 text-cyan-100 ring-1 ring-cyan-500/30":"bg-[#141a26]/70 hover:bg-[#17202d] border-[#232B36] text-gray-200"].join(" "),children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(l.Z,{className:"w-4 h-4 ".concat(s?"text-cyan-400":"text-gray-400")}),(0,n.jsx)("span",{className:"font-medium truncate",children:e.title||"Untitled"}),(0,n.jsx)("span",{className:"ml-auto",children:(0,n.jsx)("button",{type:"button",onClick:async t=>{t.stopPropagation();try{let t=await (0,r.TD)(e.title||"Conversation"),a=new Audio(t);a.play()}catch(e){}},className:"inline-flex items-center text-xs text-gray-300 hover:text-white","aria-label":"Play title",children:(0,n.jsx)(i.Z,{className:"w-4 h-4"})})})]}),(0,n.jsx)("div",{className:"mt-1 text-[11px] text-gray-400",children:function(e){if(!e)return"";try{let t=new Date(e);return t.toLocaleString(void 0,{year:"numeric",month:"short",day:"2-digit",hour:"2-digit",minute:"2-digit"})}catch(e){return""}}(e.updatedAt)})]},e._id)})})]})}},4278:function(e,t,a){a.d(t,{O:function(){return Skeleton}});var n=a(7437);function Skeleton(e){let{className:t=""}=e;return(0,n.jsx)("div",{className:["animate-pulse rounded-md bg-gray-200/20 dark:bg-gray-700/40",t].join(" "),"aria-hidden":!0})}a(2265)}}]);