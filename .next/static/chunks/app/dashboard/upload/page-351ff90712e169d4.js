(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[366],{1243:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});var l=a(5531);let s=(0,l.Z)("volume-2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]])},2549:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});var l=a(5531);let s=(0,l.Z)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},4582:function(e,t,a){Promise.resolve().then(a.bind(a,9226))},9360:function(e,t,a){"use strict";a.d(t,{Z:function(){return Reveal}});var l=a(7437),s=a(2265);function Reveal(e){let{as:t,children:a,className:n="",delay:i=0,once:r=!1,threshold:c=.15,...d}=e,o=t||"div",u=(0,s.useRef)(null),[x,h]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{let e=u.current;if(!e)return;let t=new IntersectionObserver(e=>{let[a]=e;a.isIntersecting?(h(!0),r&&t.disconnect()):r||h(!1)},{threshold:c});return t.observe(e),()=>t.disconnect()},[r,c]),(0,l.jsx)(o,{ref:u,className:"transition-all duration-1000 ease-out will-change-transform ".concat(x?"opacity-100 translate-y-0":"opacity-0 translate-y-6"," ").concat(n),style:{transitionDelay:"".concat(i,"ms")},...d,children:a})}},4278:function(e,t,a){"use strict";a.d(t,{O:function(){return Skeleton}});var l=a(7437);function Skeleton(e){let{className:t=""}=e;return(0,l.jsx)("div",{className:["animate-pulse rounded-md bg-gray-200/20 dark:bg-gray-700/40",t].join(" "),"aria-hidden":!0})}a(2265)},9226:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return UploadPage}});var l=a(7437),s=a(2265),n=a(4033),i=a(6691),r=a.n(i),c=a(6354),d=a(1243),o=a(5531);let u=(0,o.Z)("languages",[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]]),x=(0,o.Z)("cloud-upload",[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]]),h=(0,o.Z)("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),m=(0,o.Z)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),p=(0,o.Z)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);var g=a(2549);let f=["image/png","image/jpeg","image/webp","image/avif"];function FileUpload(e){var t;let{onUploadSuccess:a}=e,[n,i]=(0,s.useState)("idle"),[o,v]=(0,s.useState)(null),[w,b]=(0,s.useState)(null),[j,y]=(0,s.useState)(null),[N,k]=(0,s.useState)(!0),[S,U]=(0,s.useState)(!1),[C,E]=(0,s.useState)("EN"),[M,R]=(0,s.useState)(!1),[F,P]=(0,s.useState)(0),Z=(0,s.useRef)(null),O=(0,s.useRef)(null);function handleFiles(e){let t=(null==e?void 0:e[0])||null;if(!t)return;let a=f.includes(t.type)?t.size>26214400?"File is too large. Max ".concat(25," MB."):null:"Unsupported file type. Use PNG, JPG, WEBP, or AVIF.";if(a){y(a),i("error");return}y(null),v(t),i("ready"),b(e=>(e&&URL.revokeObjectURL(e),URL.createObjectURL(t)))}function onSelectClick(){var e;null===(e=Z.current)||void 0===e||e.click()}async function onSubmit(){if(!o||"uploading"===n)return;i("uploading"),P(0),y(null);let e=new AbortController;O.current=e;try{let{insights:s,duplicate:n}=await (0,c.mF)({file:o,captions:N,signal:e.signal,onProgress:e=>P(e)});if(a(s,{duplicate:n}),S)try{var t,l;let e=null==s?void 0:null===(l=s.promotion)||void 0===l?void 0:null===(t=l.recommendedPlatforms)||void 0===t?void 0:t[0],a=(null==e?void 0:e.caption)||"";if(a.trim()){let e=await (0,c.TD)("[".concat(C,"] ").concat(a)),t=new Audio(e);t.play().catch(()=>{})}}catch(e){}i("success")}catch(t){if(e.signal.aborted)y("Upload cancelled.");else{let e=t instanceof Error?t.message:"string"==typeof t?t:"Upload failed. Please try again.";y(e)}i("error")}finally{O.current=null}}return(0,s.useEffect)(()=>()=>{var e;w&&URL.revokeObjectURL(w),null===(e=O.current)||void 0===e||e.abort()},[w]),(0,l.jsx)("div",{className:"w-full",children:(0,l.jsxs)("div",{className:"rounded-2xl bg-[#0B1222]/80 ring-1 ring-white/10 shadow-xl p-4 sm:p-6 backdrop-blur",children:[(0,l.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 mb-4",children:[(0,l.jsxs)("div",{className:"min-w-0",children:[(0,l.jsx)("h3",{className:"text-lg sm:text-2xl font-bold tracking-tight text-white",children:"Upload an image"}),(0,l.jsx)("p",{className:"text-xs sm:text-sm text-gray-300/80 truncate",children:"We’ll analyze it and suggest captions, hashtags & best posting times."})]}),(0,l.jsxs)("div",{className:"flex items-center flex-wrap gap-2 sm:gap-4 w-full sm:w-auto",children:[(0,l.jsx)(Switch,{label:"Captions",checked:N,onChange:k}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(Switch,{label:"Auto-dub",checked:S,onChange:U,icon:(0,l.jsx)(d.Z,{className:"w-3.5 h-3.5"})}),(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)("div",{className:"pointer-events-none absolute left-2 top-1/2 -translate-y-1/2 text-gray-400",children:(0,l.jsx)(u,{className:"w-4 h-4"})}),(0,l.jsxs)("select",{value:C,onChange:e=>E(e.target.value),disabled:!S,className:"pl-8 pr-3 py-1.5 rounded-md bg-white/5 text-white border border-white/10 text-xs disabled:opacity-40 disabled:cursor-not-allowed",children:[(0,l.jsx)("option",{value:"EN",children:"EN"}),(0,l.jsx)("option",{value:"ES",children:"ES"}),(0,l.jsx)("option",{value:"FR",children:"FR"}),(0,l.jsx)("option",{value:"DE",children:"DE"})]})]})]})]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:[(0,l.jsxs)("div",{onDragOver:e=>{e.preventDefault(),R(!0)},onDragLeave:()=>R(!1),onDrop:e=>{e.preventDefault(),R(!1),handleFiles(e.dataTransfer.files)},onClick:()=>onSelectClick(),role:"button",tabIndex:0,onKeyDown:e=>"Enter"===e.key?onSelectClick():null,className:"relative rounded-xl border-2 border-dashed p-4 sm:p-8 text-center cursor-pointer transition\n              ".concat(M?"border-indigo-400 bg-indigo-400/10":"border-white/15 bg-white/5 hover:border-white/25"),children:[(0,l.jsx)("input",{ref:Z,type:"file",accept:f.join(","),hidden:!0,onChange:e=>handleFiles(e.target.files)}),(0,l.jsxs)("div",{className:"flex flex-col items-center gap-2 text-gray-200",children:[(0,l.jsx)("div",{className:"grid place-items-center rounded-full w-12 h-12\n                ".concat(M?"bg-indigo-500/20":"bg-white/5"),children:(0,l.jsx)(x,{className:"w-6 h-6"})}),(0,l.jsxs)("div",{className:"text-sm sm:text-base",children:[(0,l.jsx)("span",{className:"font-semibold text-white",children:"Click to choose"})," ","or drag & drop your image"]}),(0,l.jsxs)("div",{className:"text-xs text-gray-400",children:["PNG, JPG, WEBP, AVIF — up to ",25,"MB"]})]}),M&&(0,l.jsx)("div",{className:"pointer-events-none absolute inset-0 rounded-xl ring-2 ring-indigo-400/60"})]}),(0,l.jsx)("div",{className:"rounded-xl bg-white/5 border border-white/10 p-4 sm:p-5",children:o?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[w?(0,l.jsx)(r(),{src:w,alt:"Preview",width:120,height:120,className:"w-28 h-28 rounded-lg object-cover border border-white/10 shadow"}):null,(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsx)("div",{className:"text-white text-sm font-semibold truncate",children:o.name}),(0,l.jsxs)("div",{className:"text-xs text-gray-400",children:[o.type||"image"," • ",(t=o.size)<1024?"".concat(t," B"):t<1048576?"".concat((t/1024).toFixed(1)," KB"):"".concat((t/1048576).toFixed(1)," MB")]}),"uploading"===n&&(0,l.jsx)("div",{className:"mt-3",children:(0,l.jsx)(Progress,{pct:F})}),"success"===n&&(0,l.jsxs)("div",{className:"mt-3 inline-flex items-center gap-1 text-emerald-400 text-xs",children:[(0,l.jsx)(m,{className:"w-4 h-4"})," Uploaded & analyzed"]})]})]}),j&&(0,l.jsx)("div",{className:"mt-3 text-xs text-rose-300 bg-rose-900/20 border border-rose-700/40 rounded-md px-3 py-2",children:j}),(0,l.jsxs)("div",{className:"mt-4 flex flex-wrap items-center gap-3",children:[(0,l.jsx)("button",{onClick:onSubmit,disabled:!o||"uploading"===n,className:"inline-flex items-center gap-2 rounded-lg px-4 py-2 text-sm font-semibold text-white transition\n                      ".concat(o&&"uploading"!==n?"bg-indigo-600 hover:bg-indigo-500 shadow":"bg-white/10 cursor-not-allowed"),children:"uploading"===n?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(p,{className:"w-4 h-4 animate-spin"}),"Uploading…"]}):(0,l.jsx)(l.Fragment,{children:"Analyze with AI"})}),"uploading"===n?(0,l.jsxs)("button",{onClick:function(){var e;null===(e=O.current)||void 0===e||e.abort()},className:"inline-flex items-center gap-2 rounded-lg px-3 py-2 text-sm text-white/90 bg-white/10 hover:bg-white/15 border border-white/10",children:[(0,l.jsx)(g.Z,{className:"w-4 h-4"}),"Cancel"]}):(0,l.jsxs)("button",{onClick:function(){i("idle"),y(null),v(null),P(0),w&&URL.revokeObjectURL(w),b(null),Z.current&&(Z.current.value="")},className:"inline-flex items-center gap-2 rounded-lg px-3 py-2 text-sm text-white/90 bg-white/10 hover:bg-white/15 border border-white/10",children:[(0,l.jsx)(g.Z,{className:"w-4 h-4"}),"Reset"]})]})]}):(0,l.jsx)("div",{className:"h-full min-h-[200px] grid place-items-center text-gray-400",children:(0,l.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,l.jsx)(h,{className:"w-8 h-8 opacity-60"}),(0,l.jsx)("div",{className:"text-sm",children:"No file selected yet"})]})})})]})]})})}function Progress(e){let{pct:t}=e,a=Math.max(0,Math.min(100,Math.round(t)));return(0,l.jsxs)("div",{className:"w-full",children:[(0,l.jsx)("div",{className:"h-2 rounded-full bg-white/10 overflow-hidden",children:(0,l.jsx)("div",{className:"h-full bg-gradient-to-r from-indigo-400 to-indigo-600",style:{width:"".concat(a,"%")}})}),(0,l.jsxs)("div",{className:"mt-1 text-[10px] text-gray-400",children:[a,"%"]})]})}function Switch(e){let{label:t,checked:a,onChange:s,icon:n}=e;return(0,l.jsxs)("button",{type:"button",role:"switch","aria-checked":a,onClick:()=>s(!a),className:"inline-flex items-center gap-2 text-xs font-medium rounded-full px-2 py-1\n        border transition ".concat(a?"bg-white/10 text-white border-white/20":"bg-transparent text-gray-300 border-white/10 hover:bg-white/5"),title:t,children:[(0,l.jsx)("span",{className:"inline-flex h-4 w-7 rounded-full p-0.5 transition\n          ".concat(a?"bg-indigo-600":"bg-white/15"),children:(0,l.jsx)("span",{className:"h-3 w-3 rounded-full bg-white transition-transform\n          ".concat(a?"translate-x-3":"")})}),n,(0,l.jsx)("span",{children:t})]})}var v=a(106),w=a(9360),b=a(1396),j=a.n(b),y=a(4278);function UploadPage(){let[e,t]=(0,s.useState)(null),[a,i]=(0,s.useState)(null),[r,d]=(0,s.useState)(null),[o,u]=(0,s.useState)(!0),x=(0,n.useSearchParams)(),h=(0,n.useRouter)();return(0,s.useEffect)(()=>{let fetchUserInfo=async()=>{try{var e,t;u(!0);let a=await (0,c.Nn)();i(null!==(e=null==a?void 0:a.package)&&void 0!==e?e:null),d(null!==(t=null==a?void 0:a.uploadsRemaining)&&void 0!==t?t:null)}catch(e){console.error("Failed to fetch package info:",e)}finally{u(!1)}};fetchUserInfo()},[x,h]),(0,l.jsxs)("div",{className:"min-h-screen flex flex-col text-white",children:[(0,l.jsx)("header",{className:"shrink-0 pt-12 md:pt-20 px-6 md:px-12 lg:px-20 max-w-6xl mx-auto w-full",children:(0,l.jsx)("div",{className:"flex items-center justify-center md:justify-between",children:(0,l.jsx)("h1",{className:"text-3xl md:text-4xl font-semibold tracking-tight text-center md:text-left",children:"AI Content Analyzer"})})}),(0,l.jsx)("main",{children:(0,l.jsxs)("div",{className:"px-6 md:px-12 lg:px-20 max-w-6xl mx-auto pb-8",children:[o?(0,l.jsxs)(w.Z,{as:"section",className:"mt-8 mx-auto w-full max-w-3xl bg-gray-800 rounded-lg p-6 sm:p-8 shadow-lg",children:[(0,l.jsx)(y.O,{className:"h-7 w-64 mb-4 mx-auto"}),(0,l.jsx)(y.O,{className:"h-4 w-40 mb-6 mx-auto"}),(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsx)(y.O,{className:"h-10 w-full"}),(0,l.jsx)(y.O,{className:"h-40 w-full"}),(0,l.jsx)(y.O,{className:"h-10 w-32 mx-auto"})]})]}):a?(null!=r?r:0)<=0?(0,l.jsx)("div",{className:"mt-10 text-center text-yellow-400 text-xl",children:"You've used all your uploads. Upgrade your plan to continue."}):(0,l.jsxs)(w.Z,{as:"section",className:"mt-8 mx-auto w-full max-w-3xl bg-gray-800 rounded-lg p-6 sm:p-8 shadow-lg",children:[(0,l.jsx)("h2",{className:"text-2xl md:text-3xl font-bold mb-4 text-center",children:"Upload Your Content"}),(0,l.jsxs)("p",{className:"text-center text-gray-400 mb-6",children:["Uploads remaining: ",(0,l.jsx)("span",{className:"text-pink-400",children:r})]}),(0,l.jsx)(FileUpload,{onUploadSuccess:(e,a)=>{t(e),d(e=>null===e?e:(null==a?void 0:a.duplicate)?e:Math.max(e-1,0));try{localStorage.setItem("analysis:changed",String(Date.now())),window.dispatchEvent(new Event("analysis:changed"))}catch(e){}}})]}):(0,l.jsx)("div",{className:"mt-10 text-center text-red-400 text-xl",children:"You don't have a package yet. Please purchase a plan to start uploading."}),e&&(0,l.jsxs)(w.Z,{as:"section",className:"mt-8 mx-auto w-full max-w-4xl bg-gray-800 rounded-lg p-6 sm:p-8 shadow-xl",children:[(0,l.jsx)(v.Z,{result:e}),(0,l.jsx)("div",{className:"text-center mt-4",children:(0,l.jsx)(j(),{href:"/dashboard/history",className:"inline-block text-sm text-blue-400 underline hover:text-blue-300",children:"View this in Upload History →"})})]})]})})]})}}},function(e){e.O(0,[699,240,922,579,842,971,472,744],function(){return e(e.s=4582)}),_N_E=e.O()}]);