"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/bullmq";
exports.ids = ["vendor-chunks/bullmq"];
exports.modules = {

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/classes/async-fifo-queue.js":
/*!******************************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/classes/async-fifo-queue.js ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.AsyncFifoQueue = void 0;\nclass Node {\n    constructor(value){\n        this.value = undefined;\n        this.next = null;\n        this.value = value;\n    }\n}\nclass LinkedList {\n    constructor(){\n        this.length = 0;\n        this.head = null;\n        this.tail = null;\n    }\n    push(value) {\n        const newNode = new Node(value);\n        if (!this.length) {\n            this.head = newNode;\n        } else {\n            this.tail.next = newNode;\n        }\n        this.tail = newNode;\n        this.length += 1;\n        return newNode;\n    }\n    shift() {\n        if (!this.length) {\n            return null;\n        } else {\n            const head = this.head;\n            this.head = this.head.next;\n            this.length -= 1;\n            return head;\n        }\n    }\n}\n/**\n * AsyncFifoQueue\n *\n * A minimal FIFO queue for asynchronous operations. Allows adding asynchronous operations\n * and consume them in the order they are resolved.\n */ class AsyncFifoQueue {\n    constructor(ignoreErrors = false){\n        this.ignoreErrors = ignoreErrors;\n        /**\n         * A queue of completed promises. As the pending\n         * promises are resolved, they are added to this queue.\n         */ this.queue = new LinkedList();\n        /**\n         * A set of pending promises.\n         */ this.pending = new Set();\n        this.newPromise();\n    }\n    add(promise) {\n        this.pending.add(promise);\n        promise.then((data)=>{\n            this.pending.delete(promise);\n            if (this.queue.length === 0) {\n                this.resolvePromise(data);\n            }\n            this.queue.push(data);\n        }).catch((err)=>{\n            // Ignore errors\n            if (this.ignoreErrors) {\n                this.queue.push(undefined);\n            }\n            this.pending.delete(promise);\n            this.rejectPromise(err);\n        });\n    }\n    async waitAll() {\n        await Promise.all(this.pending);\n    }\n    numTotal() {\n        return this.pending.size + this.queue.length;\n    }\n    numPending() {\n        return this.pending.size;\n    }\n    numQueued() {\n        return this.queue.length;\n    }\n    resolvePromise(data) {\n        this.resolve(data);\n        this.newPromise();\n    }\n    rejectPromise(err) {\n        this.reject(err);\n        this.newPromise();\n    }\n    newPromise() {\n        this.nextPromise = new Promise((resolve, reject)=>{\n            this.resolve = resolve;\n            this.reject = reject;\n        });\n    }\n    async wait() {\n        return this.nextPromise;\n    }\n    async fetch() {\n        var _a;\n        if (this.pending.size === 0 && this.queue.length === 0) {\n            return;\n        }\n        while(this.queue.length === 0){\n            try {\n                await this.wait();\n            } catch (err) {\n                // Ignore errors\n                if (!this.ignoreErrors) {\n                    console.error(\"Unexpected Error in AsyncFifoQueue\", err);\n                }\n            }\n        }\n        return (_a = this.queue.shift()) === null || _a === void 0 ? void 0 : _a.value;\n    }\n}\nexports.AsyncFifoQueue = AsyncFifoQueue; //# sourceMappingURL=async-fifo-queue.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL2NsYXNzZXMvYXN5bmMtZmlmby1xdWV1ZS5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsc0JBQXNCLEdBQUcsS0FBSztBQUM5QixNQUFNRztJQUNGQyxZQUFZSCxLQUFLLENBQUU7UUFDZixJQUFJLENBQUNBLEtBQUssR0FBR0k7UUFDYixJQUFJLENBQUNDLElBQUksR0FBRztRQUNaLElBQUksQ0FBQ0wsS0FBSyxHQUFHQTtJQUNqQjtBQUNKO0FBQ0EsTUFBTU07SUFDRkgsYUFBYztRQUNWLElBQUksQ0FBQ0ksTUFBTSxHQUFHO1FBQ2QsSUFBSSxDQUFDQyxJQUFJLEdBQUc7UUFDWixJQUFJLENBQUNDLElBQUksR0FBRztJQUNoQjtJQUNBQyxLQUFLVixLQUFLLEVBQUU7UUFDUixNQUFNVyxVQUFVLElBQUlULEtBQUtGO1FBQ3pCLElBQUksQ0FBQyxJQUFJLENBQUNPLE1BQU0sRUFBRTtZQUNkLElBQUksQ0FBQ0MsSUFBSSxHQUFHRztRQUNoQixPQUNLO1lBQ0QsSUFBSSxDQUFDRixJQUFJLENBQUNKLElBQUksR0FBR007UUFDckI7UUFDQSxJQUFJLENBQUNGLElBQUksR0FBR0U7UUFDWixJQUFJLENBQUNKLE1BQU0sSUFBSTtRQUNmLE9BQU9JO0lBQ1g7SUFDQUMsUUFBUTtRQUNKLElBQUksQ0FBQyxJQUFJLENBQUNMLE1BQU0sRUFBRTtZQUNkLE9BQU87UUFDWCxPQUNLO1lBQ0QsTUFBTUMsT0FBTyxJQUFJLENBQUNBLElBQUk7WUFDdEIsSUFBSSxDQUFDQSxJQUFJLEdBQUcsSUFBSSxDQUFDQSxJQUFJLENBQUNILElBQUk7WUFDMUIsSUFBSSxDQUFDRSxNQUFNLElBQUk7WUFDZixPQUFPQztRQUNYO0lBQ0o7QUFDSjtBQUNBOzs7OztDQUtDLEdBQ0QsTUFBTVA7SUFDRkUsWUFBWVUsZUFBZSxLQUFLLENBQUU7UUFDOUIsSUFBSSxDQUFDQSxZQUFZLEdBQUdBO1FBQ3BCOzs7U0FHQyxHQUNELElBQUksQ0FBQ0MsS0FBSyxHQUFHLElBQUlSO1FBQ2pCOztTQUVDLEdBQ0QsSUFBSSxDQUFDUyxPQUFPLEdBQUcsSUFBSUM7UUFDbkIsSUFBSSxDQUFDQyxVQUFVO0lBQ25CO0lBQ0FDLElBQUlDLE9BQU8sRUFBRTtRQUNULElBQUksQ0FBQ0osT0FBTyxDQUFDRyxHQUFHLENBQUNDO1FBQ2pCQSxRQUNLQyxJQUFJLENBQUNDLENBQUFBO1lBQ04sSUFBSSxDQUFDTixPQUFPLENBQUNPLE1BQU0sQ0FBQ0g7WUFDcEIsSUFBSSxJQUFJLENBQUNMLEtBQUssQ0FBQ1AsTUFBTSxLQUFLLEdBQUc7Z0JBQ3pCLElBQUksQ0FBQ2dCLGNBQWMsQ0FBQ0Y7WUFDeEI7WUFDQSxJQUFJLENBQUNQLEtBQUssQ0FBQ0osSUFBSSxDQUFDVztRQUNwQixHQUNLRyxLQUFLLENBQUNDLENBQUFBO1lBQ1AsZ0JBQWdCO1lBQ2hCLElBQUksSUFBSSxDQUFDWixZQUFZLEVBQUU7Z0JBQ25CLElBQUksQ0FBQ0MsS0FBSyxDQUFDSixJQUFJLENBQUNOO1lBQ3BCO1lBQ0EsSUFBSSxDQUFDVyxPQUFPLENBQUNPLE1BQU0sQ0FBQ0g7WUFDcEIsSUFBSSxDQUFDTyxhQUFhLENBQUNEO1FBQ3ZCO0lBQ0o7SUFDQSxNQUFNRSxVQUFVO1FBQ1osTUFBTUMsUUFBUUMsR0FBRyxDQUFDLElBQUksQ0FBQ2QsT0FBTztJQUNsQztJQUNBZSxXQUFXO1FBQ1AsT0FBTyxJQUFJLENBQUNmLE9BQU8sQ0FBQ2dCLElBQUksR0FBRyxJQUFJLENBQUNqQixLQUFLLENBQUNQLE1BQU07SUFDaEQ7SUFDQXlCLGFBQWE7UUFDVCxPQUFPLElBQUksQ0FBQ2pCLE9BQU8sQ0FBQ2dCLElBQUk7SUFDNUI7SUFDQUUsWUFBWTtRQUNSLE9BQU8sSUFBSSxDQUFDbkIsS0FBSyxDQUFDUCxNQUFNO0lBQzVCO0lBQ0FnQixlQUFlRixJQUFJLEVBQUU7UUFDakIsSUFBSSxDQUFDYSxPQUFPLENBQUNiO1FBQ2IsSUFBSSxDQUFDSixVQUFVO0lBQ25CO0lBQ0FTLGNBQWNELEdBQUcsRUFBRTtRQUNmLElBQUksQ0FBQ1UsTUFBTSxDQUFDVjtRQUNaLElBQUksQ0FBQ1IsVUFBVTtJQUNuQjtJQUNBQSxhQUFhO1FBQ1QsSUFBSSxDQUFDbUIsV0FBVyxHQUFHLElBQUlSLFFBQVEsQ0FBQ00sU0FBU0M7WUFDckMsSUFBSSxDQUFDRCxPQUFPLEdBQUdBO1lBQ2YsSUFBSSxDQUFDQyxNQUFNLEdBQUdBO1FBQ2xCO0lBQ0o7SUFDQSxNQUFNRSxPQUFPO1FBQ1QsT0FBTyxJQUFJLENBQUNELFdBQVc7SUFDM0I7SUFDQSxNQUFNRSxRQUFRO1FBQ1YsSUFBSUM7UUFDSixJQUFJLElBQUksQ0FBQ3hCLE9BQU8sQ0FBQ2dCLElBQUksS0FBSyxLQUFLLElBQUksQ0FBQ2pCLEtBQUssQ0FBQ1AsTUFBTSxLQUFLLEdBQUc7WUFDcEQ7UUFDSjtRQUNBLE1BQU8sSUFBSSxDQUFDTyxLQUFLLENBQUNQLE1BQU0sS0FBSyxFQUFHO1lBQzVCLElBQUk7Z0JBQ0EsTUFBTSxJQUFJLENBQUM4QixJQUFJO1lBQ25CLEVBQ0EsT0FBT1osS0FBSztnQkFDUixnQkFBZ0I7Z0JBQ2hCLElBQUksQ0FBQyxJQUFJLENBQUNaLFlBQVksRUFBRTtvQkFDcEIyQixRQUFRQyxLQUFLLENBQUMsc0NBQXNDaEI7Z0JBQ3hEO1lBQ0o7UUFDSjtRQUNBLE9BQU8sQ0FBQ2MsS0FBSyxJQUFJLENBQUN6QixLQUFLLENBQUNGLEtBQUssRUFBQyxNQUFPLFFBQVEyQixPQUFPLEtBQUssSUFBSSxLQUFLLElBQUlBLEdBQUd2QyxLQUFLO0lBQ2xGO0FBQ0o7QUFDQUQsc0JBQXNCLEdBQUdFLGdCQUN6Qiw0Q0FBNEMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vbmx5ZmFucy1wbGF0Zm9ybS8uL25vZGVfbW9kdWxlcy9idWxsbXEvZGlzdC9janMvY2xhc3Nlcy9hc3luYy1maWZvLXF1ZXVlLmpzPzJiY2UiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkFzeW5jRmlmb1F1ZXVlID0gdm9pZCAwO1xuY2xhc3MgTm9kZSB7XG4gICAgY29uc3RydWN0b3IodmFsdWUpIHtcbiAgICAgICAgdGhpcy52YWx1ZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5uZXh0ID0gbnVsbDtcbiAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICAgIH1cbn1cbmNsYXNzIExpbmtlZExpc3Qge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmxlbmd0aCA9IDA7XG4gICAgICAgIHRoaXMuaGVhZCA9IG51bGw7XG4gICAgICAgIHRoaXMudGFpbCA9IG51bGw7XG4gICAgfVxuICAgIHB1c2godmFsdWUpIHtcbiAgICAgICAgY29uc3QgbmV3Tm9kZSA9IG5ldyBOb2RlKHZhbHVlKTtcbiAgICAgICAgaWYgKCF0aGlzLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhpcy5oZWFkID0gbmV3Tm9kZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMudGFpbC5uZXh0ID0gbmV3Tm9kZTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnRhaWwgPSBuZXdOb2RlO1xuICAgICAgICB0aGlzLmxlbmd0aCArPSAxO1xuICAgICAgICByZXR1cm4gbmV3Tm9kZTtcbiAgICB9XG4gICAgc2hpZnQoKSB7XG4gICAgICAgIGlmICghdGhpcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgaGVhZCA9IHRoaXMuaGVhZDtcbiAgICAgICAgICAgIHRoaXMuaGVhZCA9IHRoaXMuaGVhZC5uZXh0O1xuICAgICAgICAgICAgdGhpcy5sZW5ndGggLT0gMTtcbiAgICAgICAgICAgIHJldHVybiBoZWFkO1xuICAgICAgICB9XG4gICAgfVxufVxuLyoqXG4gKiBBc3luY0ZpZm9RdWV1ZVxuICpcbiAqIEEgbWluaW1hbCBGSUZPIHF1ZXVlIGZvciBhc3luY2hyb25vdXMgb3BlcmF0aW9ucy4gQWxsb3dzIGFkZGluZyBhc3luY2hyb25vdXMgb3BlcmF0aW9uc1xuICogYW5kIGNvbnN1bWUgdGhlbSBpbiB0aGUgb3JkZXIgdGhleSBhcmUgcmVzb2x2ZWQuXG4gKi9cbmNsYXNzIEFzeW5jRmlmb1F1ZXVlIHtcbiAgICBjb25zdHJ1Y3RvcihpZ25vcmVFcnJvcnMgPSBmYWxzZSkge1xuICAgICAgICB0aGlzLmlnbm9yZUVycm9ycyA9IGlnbm9yZUVycm9ycztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgcXVldWUgb2YgY29tcGxldGVkIHByb21pc2VzLiBBcyB0aGUgcGVuZGluZ1xuICAgICAgICAgKiBwcm9taXNlcyBhcmUgcmVzb2x2ZWQsIHRoZXkgYXJlIGFkZGVkIHRvIHRoaXMgcXVldWUuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnF1ZXVlID0gbmV3IExpbmtlZExpc3QoKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgc2V0IG9mIHBlbmRpbmcgcHJvbWlzZXMuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnBlbmRpbmcgPSBuZXcgU2V0KCk7XG4gICAgICAgIHRoaXMubmV3UHJvbWlzZSgpO1xuICAgIH1cbiAgICBhZGQocHJvbWlzZSkge1xuICAgICAgICB0aGlzLnBlbmRpbmcuYWRkKHByb21pc2UpO1xuICAgICAgICBwcm9taXNlXG4gICAgICAgICAgICAudGhlbihkYXRhID0+IHtcbiAgICAgICAgICAgIHRoaXMucGVuZGluZy5kZWxldGUocHJvbWlzZSk7XG4gICAgICAgICAgICBpZiAodGhpcy5xdWV1ZS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlc29sdmVQcm9taXNlKGRhdGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5xdWV1ZS5wdXNoKGRhdGEpO1xuICAgICAgICB9KVxuICAgICAgICAgICAgLmNhdGNoKGVyciA9PiB7XG4gICAgICAgICAgICAvLyBJZ25vcmUgZXJyb3JzXG4gICAgICAgICAgICBpZiAodGhpcy5pZ25vcmVFcnJvcnMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnF1ZXVlLnB1c2godW5kZWZpbmVkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGVuZGluZy5kZWxldGUocHJvbWlzZSk7XG4gICAgICAgICAgICB0aGlzLnJlamVjdFByb21pc2UoZXJyKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGFzeW5jIHdhaXRBbGwoKSB7XG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKHRoaXMucGVuZGluZyk7XG4gICAgfVxuICAgIG51bVRvdGFsKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wZW5kaW5nLnNpemUgKyB0aGlzLnF1ZXVlLmxlbmd0aDtcbiAgICB9XG4gICAgbnVtUGVuZGluZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGVuZGluZy5zaXplO1xuICAgIH1cbiAgICBudW1RdWV1ZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnF1ZXVlLmxlbmd0aDtcbiAgICB9XG4gICAgcmVzb2x2ZVByb21pc2UoZGF0YSkge1xuICAgICAgICB0aGlzLnJlc29sdmUoZGF0YSk7XG4gICAgICAgIHRoaXMubmV3UHJvbWlzZSgpO1xuICAgIH1cbiAgICByZWplY3RQcm9taXNlKGVycikge1xuICAgICAgICB0aGlzLnJlamVjdChlcnIpO1xuICAgICAgICB0aGlzLm5ld1Byb21pc2UoKTtcbiAgICB9XG4gICAgbmV3UHJvbWlzZSgpIHtcbiAgICAgICAgdGhpcy5uZXh0UHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIHRoaXMucmVzb2x2ZSA9IHJlc29sdmU7XG4gICAgICAgICAgICB0aGlzLnJlamVjdCA9IHJlamVjdDtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGFzeW5jIHdhaXQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm5leHRQcm9taXNlO1xuICAgIH1cbiAgICBhc3luYyBmZXRjaCgpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICBpZiAodGhpcy5wZW5kaW5nLnNpemUgPT09IDAgJiYgdGhpcy5xdWV1ZS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB3aGlsZSAodGhpcy5xdWV1ZS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy53YWl0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgLy8gSWdub3JlIGVycm9yc1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5pZ25vcmVFcnJvcnMpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignVW5leHBlY3RlZCBFcnJvciBpbiBBc3luY0ZpZm9RdWV1ZScsIGVycik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiAoX2EgPSB0aGlzLnF1ZXVlLnNoaWZ0KCkpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS52YWx1ZTtcbiAgICB9XG59XG5leHBvcnRzLkFzeW5jRmlmb1F1ZXVlID0gQXN5bmNGaWZvUXVldWU7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1hc3luYy1maWZvLXF1ZXVlLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsIkFzeW5jRmlmb1F1ZXVlIiwiTm9kZSIsImNvbnN0cnVjdG9yIiwidW5kZWZpbmVkIiwibmV4dCIsIkxpbmtlZExpc3QiLCJsZW5ndGgiLCJoZWFkIiwidGFpbCIsInB1c2giLCJuZXdOb2RlIiwic2hpZnQiLCJpZ25vcmVFcnJvcnMiLCJxdWV1ZSIsInBlbmRpbmciLCJTZXQiLCJuZXdQcm9taXNlIiwiYWRkIiwicHJvbWlzZSIsInRoZW4iLCJkYXRhIiwiZGVsZXRlIiwicmVzb2x2ZVByb21pc2UiLCJjYXRjaCIsImVyciIsInJlamVjdFByb21pc2UiLCJ3YWl0QWxsIiwiUHJvbWlzZSIsImFsbCIsIm51bVRvdGFsIiwic2l6ZSIsIm51bVBlbmRpbmciLCJudW1RdWV1ZWQiLCJyZXNvbHZlIiwicmVqZWN0IiwibmV4dFByb21pc2UiLCJ3YWl0IiwiZmV0Y2giLCJfYSIsImNvbnNvbGUiLCJlcnJvciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/classes/async-fifo-queue.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/classes/backoffs.js":
/*!**********************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/classes/backoffs.js ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.Backoffs = void 0;\nclass Backoffs {\n    static normalize(backoff) {\n        if (Number.isFinite(backoff)) {\n            return {\n                type: \"fixed\",\n                delay: backoff\n            };\n        } else if (backoff) {\n            return backoff;\n        }\n    }\n    static calculate(backoff, attemptsMade, err, job, customStrategy) {\n        if (backoff) {\n            const strategy = lookupStrategy(backoff, customStrategy);\n            return strategy(attemptsMade, backoff.type, err, job);\n        }\n    }\n}\nexports.Backoffs = Backoffs;\nBackoffs.builtinStrategies = {\n    fixed: function(delay, jitter = 0) {\n        return function() {\n            if (jitter > 0) {\n                const minDelay = delay * (1 - jitter);\n                return Math.floor(Math.random() * delay * jitter + minDelay);\n            } else {\n                return delay;\n            }\n        };\n    },\n    exponential: function(delay, jitter = 0) {\n        return function(attemptsMade) {\n            if (jitter > 0) {\n                const maxDelay = Math.round(Math.pow(2, attemptsMade - 1) * delay);\n                const minDelay = maxDelay * (1 - jitter);\n                return Math.floor(Math.random() * maxDelay * jitter + minDelay);\n            } else {\n                return Math.round(Math.pow(2, attemptsMade - 1) * delay);\n            }\n        };\n    }\n};\nfunction lookupStrategy(backoff, customStrategy) {\n    if (backoff.type in Backoffs.builtinStrategies) {\n        return Backoffs.builtinStrategies[backoff.type](backoff.delay, backoff.jitter);\n    } else if (customStrategy) {\n        return customStrategy;\n    } else {\n        throw new Error(`Unknown backoff strategy ${backoff.type}.\n      If a custom backoff strategy is used, specify it when the queue is created.`);\n    }\n} //# sourceMappingURL=backoffs.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL2NsYXNzZXMvYmFja29mZnMuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELGdCQUFnQixHQUFHLEtBQUs7QUFDeEIsTUFBTUU7SUFDRixPQUFPQyxVQUFVQyxPQUFPLEVBQUU7UUFDdEIsSUFBSUMsT0FBT0MsUUFBUSxDQUFDRixVQUFVO1lBQzFCLE9BQU87Z0JBQ0hHLE1BQU07Z0JBQ05DLE9BQU9KO1lBQ1g7UUFDSixPQUNLLElBQUlBLFNBQVM7WUFDZCxPQUFPQTtRQUNYO0lBQ0o7SUFDQSxPQUFPSyxVQUFVTCxPQUFPLEVBQUVNLFlBQVksRUFBRUMsR0FBRyxFQUFFQyxHQUFHLEVBQUVDLGNBQWMsRUFBRTtRQUM5RCxJQUFJVCxTQUFTO1lBQ1QsTUFBTVUsV0FBV0MsZUFBZVgsU0FBU1M7WUFDekMsT0FBT0MsU0FBU0osY0FBY04sUUFBUUcsSUFBSSxFQUFFSSxLQUFLQztRQUNyRDtJQUNKO0FBQ0o7QUFDQVosZ0JBQWdCLEdBQUdFO0FBQ25CQSxTQUFTYyxpQkFBaUIsR0FBRztJQUN6QkMsT0FBTyxTQUFVVCxLQUFLLEVBQUVVLFNBQVMsQ0FBQztRQUM5QixPQUFPO1lBQ0gsSUFBSUEsU0FBUyxHQUFHO2dCQUNaLE1BQU1DLFdBQVdYLFFBQVMsS0FBSVUsTUFBSztnQkFDbkMsT0FBT0UsS0FBS0MsS0FBSyxDQUFDRCxLQUFLRSxNQUFNLEtBQUtkLFFBQVFVLFNBQVNDO1lBQ3ZELE9BQ0s7Z0JBQ0QsT0FBT1g7WUFDWDtRQUNKO0lBQ0o7SUFDQWUsYUFBYSxTQUFVZixLQUFLLEVBQUVVLFNBQVMsQ0FBQztRQUNwQyxPQUFPLFNBQVVSLFlBQVk7WUFDekIsSUFBSVEsU0FBUyxHQUFHO2dCQUNaLE1BQU1NLFdBQVdKLEtBQUtLLEtBQUssQ0FBQ0wsS0FBS00sR0FBRyxDQUFDLEdBQUdoQixlQUFlLEtBQUtGO2dCQUM1RCxNQUFNVyxXQUFXSyxXQUFZLEtBQUlOLE1BQUs7Z0JBQ3RDLE9BQU9FLEtBQUtDLEtBQUssQ0FBQ0QsS0FBS0UsTUFBTSxLQUFLRSxXQUFXTixTQUFTQztZQUMxRCxPQUNLO2dCQUNELE9BQU9DLEtBQUtLLEtBQUssQ0FBQ0wsS0FBS00sR0FBRyxDQUFDLEdBQUdoQixlQUFlLEtBQUtGO1lBQ3REO1FBQ0o7SUFDSjtBQUNKO0FBQ0EsU0FBU08sZUFBZVgsT0FBTyxFQUFFUyxjQUFjO0lBQzNDLElBQUlULFFBQVFHLElBQUksSUFBSUwsU0FBU2MsaUJBQWlCLEVBQUU7UUFDNUMsT0FBT2QsU0FBU2MsaUJBQWlCLENBQUNaLFFBQVFHLElBQUksQ0FBQyxDQUFDSCxRQUFRSSxLQUFLLEVBQUVKLFFBQVFjLE1BQU07SUFDakYsT0FDSyxJQUFJTCxnQkFBZ0I7UUFDckIsT0FBT0E7SUFDWCxPQUNLO1FBQ0QsTUFBTSxJQUFJYyxNQUFNLENBQUMseUJBQXlCLEVBQUV2QixRQUFRRyxJQUFJLENBQUM7aUZBQ2dCLENBQUM7SUFDOUU7QUFDSixFQUNBLG9DQUFvQyIsInNvdXJjZXMiOlsid2VicGFjazovL29ubHlmYW5zLXBsYXRmb3JtLy4vbm9kZV9tb2R1bGVzL2J1bGxtcS9kaXN0L2Nqcy9jbGFzc2VzL2JhY2tvZmZzLmpzPzM1MDkiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkJhY2tvZmZzID0gdm9pZCAwO1xuY2xhc3MgQmFja29mZnMge1xuICAgIHN0YXRpYyBub3JtYWxpemUoYmFja29mZikge1xuICAgICAgICBpZiAoTnVtYmVyLmlzRmluaXRlKGJhY2tvZmYpKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHR5cGU6ICdmaXhlZCcsXG4gICAgICAgICAgICAgICAgZGVsYXk6IGJhY2tvZmYsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGJhY2tvZmYpIHtcbiAgICAgICAgICAgIHJldHVybiBiYWNrb2ZmO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBjYWxjdWxhdGUoYmFja29mZiwgYXR0ZW1wdHNNYWRlLCBlcnIsIGpvYiwgY3VzdG9tU3RyYXRlZ3kpIHtcbiAgICAgICAgaWYgKGJhY2tvZmYpIHtcbiAgICAgICAgICAgIGNvbnN0IHN0cmF0ZWd5ID0gbG9va3VwU3RyYXRlZ3koYmFja29mZiwgY3VzdG9tU3RyYXRlZ3kpO1xuICAgICAgICAgICAgcmV0dXJuIHN0cmF0ZWd5KGF0dGVtcHRzTWFkZSwgYmFja29mZi50eXBlLCBlcnIsIGpvYik7XG4gICAgICAgIH1cbiAgICB9XG59XG5leHBvcnRzLkJhY2tvZmZzID0gQmFja29mZnM7XG5CYWNrb2Zmcy5idWlsdGluU3RyYXRlZ2llcyA9IHtcbiAgICBmaXhlZDogZnVuY3Rpb24gKGRlbGF5LCBqaXR0ZXIgPSAwKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoaml0dGVyID4gMCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG1pbkRlbGF5ID0gZGVsYXkgKiAoMSAtIGppdHRlcik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGRlbGF5ICogaml0dGVyICsgbWluRGVsYXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRlbGF5O1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH0sXG4gICAgZXhwb25lbnRpYWw6IGZ1bmN0aW9uIChkZWxheSwgaml0dGVyID0gMCkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGF0dGVtcHRzTWFkZSkge1xuICAgICAgICAgICAgaWYgKGppdHRlciA+IDApIHtcbiAgICAgICAgICAgICAgICBjb25zdCBtYXhEZWxheSA9IE1hdGgucm91bmQoTWF0aC5wb3coMiwgYXR0ZW1wdHNNYWRlIC0gMSkgKiBkZWxheSk7XG4gICAgICAgICAgICAgICAgY29uc3QgbWluRGVsYXkgPSBtYXhEZWxheSAqICgxIC0gaml0dGVyKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogbWF4RGVsYXkgKiBqaXR0ZXIgKyBtaW5EZWxheSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gTWF0aC5yb3VuZChNYXRoLnBvdygyLCBhdHRlbXB0c01hZGUgLSAxKSAqIGRlbGF5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9LFxufTtcbmZ1bmN0aW9uIGxvb2t1cFN0cmF0ZWd5KGJhY2tvZmYsIGN1c3RvbVN0cmF0ZWd5KSB7XG4gICAgaWYgKGJhY2tvZmYudHlwZSBpbiBCYWNrb2Zmcy5idWlsdGluU3RyYXRlZ2llcykge1xuICAgICAgICByZXR1cm4gQmFja29mZnMuYnVpbHRpblN0cmF0ZWdpZXNbYmFja29mZi50eXBlXShiYWNrb2ZmLmRlbGF5LCBiYWNrb2ZmLmppdHRlcik7XG4gICAgfVxuICAgIGVsc2UgaWYgKGN1c3RvbVN0cmF0ZWd5KSB7XG4gICAgICAgIHJldHVybiBjdXN0b21TdHJhdGVneTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5rbm93biBiYWNrb2ZmIHN0cmF0ZWd5ICR7YmFja29mZi50eXBlfS5cbiAgICAgIElmIGEgY3VzdG9tIGJhY2tvZmYgc3RyYXRlZ3kgaXMgdXNlZCwgc3BlY2lmeSBpdCB3aGVuIHRoZSBxdWV1ZSBpcyBjcmVhdGVkLmApO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWJhY2tvZmZzLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsIkJhY2tvZmZzIiwibm9ybWFsaXplIiwiYmFja29mZiIsIk51bWJlciIsImlzRmluaXRlIiwidHlwZSIsImRlbGF5IiwiY2FsY3VsYXRlIiwiYXR0ZW1wdHNNYWRlIiwiZXJyIiwiam9iIiwiY3VzdG9tU3RyYXRlZ3kiLCJzdHJhdGVneSIsImxvb2t1cFN0cmF0ZWd5IiwiYnVpbHRpblN0cmF0ZWdpZXMiLCJmaXhlZCIsImppdHRlciIsIm1pbkRlbGF5IiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwiZXhwb25lbnRpYWwiLCJtYXhEZWxheSIsInJvdW5kIiwicG93IiwiRXJyb3IiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/classes/backoffs.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/classes/child-pool.js":
/*!************************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/classes/child-pool.js ***!
  \************************************************************/
/***/ ((module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.ChildPool = void 0;\nconst path = __webpack_require__(/*! path */ \"path\");\nconst child_1 = __webpack_require__(/*! ./child */ \"(rsc)/./node_modules/bullmq/dist/cjs/classes/child.js\");\nconst CHILD_KILL_TIMEOUT = 30000;\nconst supportCJS = ()=>{\n    return  true && typeof module.exports === \"object\";\n};\nclass ChildPool {\n    constructor({ mainFile = supportCJS() ? path.join(process.cwd(), \"dist/cjs/classes/main.js\") : path.join(process.cwd(), \"dist/esm/classes/main.js\"), useWorkerThreads, workerForkOptions, workerThreadsOptions }){\n        this.retained = {};\n        this.free = {};\n        this.opts = {\n            mainFile,\n            useWorkerThreads,\n            workerForkOptions,\n            workerThreadsOptions\n        };\n    }\n    async retain(processFile) {\n        let child = this.getFree(processFile).pop();\n        if (child) {\n            this.retained[child.pid] = child;\n            return child;\n        }\n        child = new child_1.Child(this.opts.mainFile, processFile, {\n            useWorkerThreads: this.opts.useWorkerThreads,\n            workerForkOptions: this.opts.workerForkOptions,\n            workerThreadsOptions: this.opts.workerThreadsOptions\n        });\n        child.on(\"exit\", this.remove.bind(this, child));\n        try {\n            await child.init();\n            // Check status here as well, in case the child exited before we could\n            // retain it.\n            if (child.exitCode !== null || child.signalCode !== null) {\n                throw new Error(\"Child exited before it could be retained\");\n            }\n            this.retained[child.pid] = child;\n            return child;\n        } catch (err) {\n            console.error(err);\n            this.release(child);\n            throw err;\n        }\n    }\n    release(child) {\n        delete this.retained[child.pid];\n        this.getFree(child.processFile).push(child);\n    }\n    remove(child) {\n        delete this.retained[child.pid];\n        const free = this.getFree(child.processFile);\n        const childIndex = free.indexOf(child);\n        if (childIndex > -1) {\n            free.splice(childIndex, 1);\n        }\n    }\n    async kill(child, signal = \"SIGKILL\") {\n        this.remove(child);\n        return child.kill(signal, CHILD_KILL_TIMEOUT);\n    }\n    async clean() {\n        const children = Object.values(this.retained).concat(this.getAllFree());\n        this.retained = {};\n        this.free = {};\n        await Promise.all(children.map((c)=>this.kill(c, \"SIGTERM\")));\n    }\n    getFree(id) {\n        return this.free[id] = this.free[id] || [];\n    }\n    getAllFree() {\n        return Object.values(this.free).reduce((first, second)=>first.concat(second), []);\n    }\n}\nexports.ChildPool = ChildPool; //# sourceMappingURL=child-pool.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL2NsYXNzZXMvY2hpbGQtcG9vbC5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsaUJBQWlCLEdBQUcsS0FBSztBQUN6QixNQUFNRyxPQUFPQyxtQkFBT0EsQ0FBQyxrQkFBTTtBQUMzQixNQUFNQyxVQUFVRCxtQkFBT0EsQ0FBQyxzRUFBUztBQUNqQyxNQUFNRSxxQkFBcUI7QUFDM0IsTUFBTUMsYUFBYTtJQUNmLE9BQVEsS0FDYyxJQUNsQixPQUFPQyxPQUFPUixPQUFPLEtBQUs7QUFDbEM7QUFDQSxNQUFNRTtJQUNGTyxZQUFZLEVBQUVDLFdBQVdILGVBQ25CSixLQUFLUSxJQUFJLENBQUNDLFFBQVFDLEdBQUcsSUFBSSw4QkFDekJWLEtBQUtRLElBQUksQ0FBQ0MsUUFBUUMsR0FBRyxJQUFJLDJCQUEyQixFQUFFQyxnQkFBZ0IsRUFBRUMsaUJBQWlCLEVBQUVDLG9CQUFvQixFQUFHLENBQUU7UUFDdEgsSUFBSSxDQUFDQyxRQUFRLEdBQUcsQ0FBQztRQUNqQixJQUFJLENBQUNDLElBQUksR0FBRyxDQUFDO1FBQ2IsSUFBSSxDQUFDQyxJQUFJLEdBQUc7WUFDUlQ7WUFDQUk7WUFDQUM7WUFDQUM7UUFDSjtJQUNKO0lBQ0EsTUFBTUksT0FBT0MsV0FBVyxFQUFFO1FBQ3RCLElBQUlDLFFBQVEsSUFBSSxDQUFDQyxPQUFPLENBQUNGLGFBQWFHLEdBQUc7UUFDekMsSUFBSUYsT0FBTztZQUNQLElBQUksQ0FBQ0wsUUFBUSxDQUFDSyxNQUFNRyxHQUFHLENBQUMsR0FBR0g7WUFDM0IsT0FBT0E7UUFDWDtRQUNBQSxRQUFRLElBQUlqQixRQUFRcUIsS0FBSyxDQUFDLElBQUksQ0FBQ1AsSUFBSSxDQUFDVCxRQUFRLEVBQUVXLGFBQWE7WUFDdkRQLGtCQUFrQixJQUFJLENBQUNLLElBQUksQ0FBQ0wsZ0JBQWdCO1lBQzVDQyxtQkFBbUIsSUFBSSxDQUFDSSxJQUFJLENBQUNKLGlCQUFpQjtZQUM5Q0Msc0JBQXNCLElBQUksQ0FBQ0csSUFBSSxDQUFDSCxvQkFBb0I7UUFDeEQ7UUFDQU0sTUFBTUssRUFBRSxDQUFDLFFBQVEsSUFBSSxDQUFDQyxNQUFNLENBQUNDLElBQUksQ0FBQyxJQUFJLEVBQUVQO1FBQ3hDLElBQUk7WUFDQSxNQUFNQSxNQUFNUSxJQUFJO1lBQ2hCLHNFQUFzRTtZQUN0RSxhQUFhO1lBQ2IsSUFBSVIsTUFBTVMsUUFBUSxLQUFLLFFBQVFULE1BQU1VLFVBQVUsS0FBSyxNQUFNO2dCQUN0RCxNQUFNLElBQUlDLE1BQU07WUFDcEI7WUFDQSxJQUFJLENBQUNoQixRQUFRLENBQUNLLE1BQU1HLEdBQUcsQ0FBQyxHQUFHSDtZQUMzQixPQUFPQTtRQUNYLEVBQ0EsT0FBT1ksS0FBSztZQUNSQyxRQUFRQyxLQUFLLENBQUNGO1lBQ2QsSUFBSSxDQUFDRyxPQUFPLENBQUNmO1lBQ2IsTUFBTVk7UUFDVjtJQUNKO0lBQ0FHLFFBQVFmLEtBQUssRUFBRTtRQUNYLE9BQU8sSUFBSSxDQUFDTCxRQUFRLENBQUNLLE1BQU1HLEdBQUcsQ0FBQztRQUMvQixJQUFJLENBQUNGLE9BQU8sQ0FBQ0QsTUFBTUQsV0FBVyxFQUFFaUIsSUFBSSxDQUFDaEI7SUFDekM7SUFDQU0sT0FBT04sS0FBSyxFQUFFO1FBQ1YsT0FBTyxJQUFJLENBQUNMLFFBQVEsQ0FBQ0ssTUFBTUcsR0FBRyxDQUFDO1FBQy9CLE1BQU1QLE9BQU8sSUFBSSxDQUFDSyxPQUFPLENBQUNELE1BQU1ELFdBQVc7UUFDM0MsTUFBTWtCLGFBQWFyQixLQUFLc0IsT0FBTyxDQUFDbEI7UUFDaEMsSUFBSWlCLGFBQWEsQ0FBQyxHQUFHO1lBQ2pCckIsS0FBS3VCLE1BQU0sQ0FBQ0YsWUFBWTtRQUM1QjtJQUNKO0lBQ0EsTUFBTUcsS0FBS3BCLEtBQUssRUFBRXFCLFNBQVMsU0FBUyxFQUFFO1FBQ2xDLElBQUksQ0FBQ2YsTUFBTSxDQUFDTjtRQUNaLE9BQU9BLE1BQU1vQixJQUFJLENBQUNDLFFBQVFyQztJQUM5QjtJQUNBLE1BQU1zQyxRQUFRO1FBQ1YsTUFBTUMsV0FBVy9DLE9BQU9nRCxNQUFNLENBQUMsSUFBSSxDQUFDN0IsUUFBUSxFQUFFOEIsTUFBTSxDQUFDLElBQUksQ0FBQ0MsVUFBVTtRQUNwRSxJQUFJLENBQUMvQixRQUFRLEdBQUcsQ0FBQztRQUNqQixJQUFJLENBQUNDLElBQUksR0FBRyxDQUFDO1FBQ2IsTUFBTStCLFFBQVFDLEdBQUcsQ0FBQ0wsU0FBU00sR0FBRyxDQUFDQyxDQUFBQSxJQUFLLElBQUksQ0FBQ1YsSUFBSSxDQUFDVSxHQUFHO0lBQ3JEO0lBQ0E3QixRQUFROEIsRUFBRSxFQUFFO1FBQ1IsT0FBUSxJQUFJLENBQUNuQyxJQUFJLENBQUNtQyxHQUFHLEdBQUcsSUFBSSxDQUFDbkMsSUFBSSxDQUFDbUMsR0FBRyxJQUFJLEVBQUU7SUFDL0M7SUFDQUwsYUFBYTtRQUNULE9BQU9sRCxPQUFPZ0QsTUFBTSxDQUFDLElBQUksQ0FBQzVCLElBQUksRUFBRW9DLE1BQU0sQ0FBQyxDQUFDQyxPQUFPQyxTQUFXRCxNQUFNUixNQUFNLENBQUNTLFNBQVMsRUFBRTtJQUN0RjtBQUNKO0FBQ0F4RCxpQkFBaUIsR0FBR0UsV0FDcEIsc0NBQXNDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb25seWZhbnMtcGxhdGZvcm0vLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL2NsYXNzZXMvY2hpbGQtcG9vbC5qcz9jMzI5Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5DaGlsZFBvb2wgPSB2b2lkIDA7XG5jb25zdCBwYXRoID0gcmVxdWlyZShcInBhdGhcIik7XG5jb25zdCBjaGlsZF8xID0gcmVxdWlyZShcIi4vY2hpbGRcIik7XG5jb25zdCBDSElMRF9LSUxMX1RJTUVPVVQgPSAzMDAwMDtcbmNvbnN0IHN1cHBvcnRDSlMgPSAoKSA9PiB7XG4gICAgcmV0dXJuICh0eXBlb2YgcmVxdWlyZSA9PT0gJ2Z1bmN0aW9uJyAmJlxuICAgICAgICB0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0JyAmJlxuICAgICAgICB0eXBlb2YgbW9kdWxlLmV4cG9ydHMgPT09ICdvYmplY3QnKTtcbn07XG5jbGFzcyBDaGlsZFBvb2wge1xuICAgIGNvbnN0cnVjdG9yKHsgbWFpbkZpbGUgPSBzdXBwb3J0Q0pTKClcbiAgICAgICAgPyBwYXRoLmpvaW4ocHJvY2Vzcy5jd2QoKSwgJ2Rpc3QvY2pzL2NsYXNzZXMvbWFpbi5qcycpXG4gICAgICAgIDogcGF0aC5qb2luKHByb2Nlc3MuY3dkKCksICdkaXN0L2VzbS9jbGFzc2VzL21haW4uanMnKSwgdXNlV29ya2VyVGhyZWFkcywgd29ya2VyRm9ya09wdGlvbnMsIHdvcmtlclRocmVhZHNPcHRpb25zLCB9KSB7XG4gICAgICAgIHRoaXMucmV0YWluZWQgPSB7fTtcbiAgICAgICAgdGhpcy5mcmVlID0ge307XG4gICAgICAgIHRoaXMub3B0cyA9IHtcbiAgICAgICAgICAgIG1haW5GaWxlLFxuICAgICAgICAgICAgdXNlV29ya2VyVGhyZWFkcyxcbiAgICAgICAgICAgIHdvcmtlckZvcmtPcHRpb25zLFxuICAgICAgICAgICAgd29ya2VyVGhyZWFkc09wdGlvbnMsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGFzeW5jIHJldGFpbihwcm9jZXNzRmlsZSkge1xuICAgICAgICBsZXQgY2hpbGQgPSB0aGlzLmdldEZyZWUocHJvY2Vzc0ZpbGUpLnBvcCgpO1xuICAgICAgICBpZiAoY2hpbGQpIHtcbiAgICAgICAgICAgIHRoaXMucmV0YWluZWRbY2hpbGQucGlkXSA9IGNoaWxkO1xuICAgICAgICAgICAgcmV0dXJuIGNoaWxkO1xuICAgICAgICB9XG4gICAgICAgIGNoaWxkID0gbmV3IGNoaWxkXzEuQ2hpbGQodGhpcy5vcHRzLm1haW5GaWxlLCBwcm9jZXNzRmlsZSwge1xuICAgICAgICAgICAgdXNlV29ya2VyVGhyZWFkczogdGhpcy5vcHRzLnVzZVdvcmtlclRocmVhZHMsXG4gICAgICAgICAgICB3b3JrZXJGb3JrT3B0aW9uczogdGhpcy5vcHRzLndvcmtlckZvcmtPcHRpb25zLFxuICAgICAgICAgICAgd29ya2VyVGhyZWFkc09wdGlvbnM6IHRoaXMub3B0cy53b3JrZXJUaHJlYWRzT3B0aW9ucyxcbiAgICAgICAgfSk7XG4gICAgICAgIGNoaWxkLm9uKCdleGl0JywgdGhpcy5yZW1vdmUuYmluZCh0aGlzLCBjaGlsZCkpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgY2hpbGQuaW5pdCgpO1xuICAgICAgICAgICAgLy8gQ2hlY2sgc3RhdHVzIGhlcmUgYXMgd2VsbCwgaW4gY2FzZSB0aGUgY2hpbGQgZXhpdGVkIGJlZm9yZSB3ZSBjb3VsZFxuICAgICAgICAgICAgLy8gcmV0YWluIGl0LlxuICAgICAgICAgICAgaWYgKGNoaWxkLmV4aXRDb2RlICE9PSBudWxsIHx8IGNoaWxkLnNpZ25hbENvZGUgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NoaWxkIGV4aXRlZCBiZWZvcmUgaXQgY291bGQgYmUgcmV0YWluZWQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucmV0YWluZWRbY2hpbGQucGlkXSA9IGNoaWxkO1xuICAgICAgICAgICAgcmV0dXJuIGNoaWxkO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICAgICAgICAgIHRoaXMucmVsZWFzZShjaGlsZCk7XG4gICAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVsZWFzZShjaGlsZCkge1xuICAgICAgICBkZWxldGUgdGhpcy5yZXRhaW5lZFtjaGlsZC5waWRdO1xuICAgICAgICB0aGlzLmdldEZyZWUoY2hpbGQucHJvY2Vzc0ZpbGUpLnB1c2goY2hpbGQpO1xuICAgIH1cbiAgICByZW1vdmUoY2hpbGQpIHtcbiAgICAgICAgZGVsZXRlIHRoaXMucmV0YWluZWRbY2hpbGQucGlkXTtcbiAgICAgICAgY29uc3QgZnJlZSA9IHRoaXMuZ2V0RnJlZShjaGlsZC5wcm9jZXNzRmlsZSk7XG4gICAgICAgIGNvbnN0IGNoaWxkSW5kZXggPSBmcmVlLmluZGV4T2YoY2hpbGQpO1xuICAgICAgICBpZiAoY2hpbGRJbmRleCA+IC0xKSB7XG4gICAgICAgICAgICBmcmVlLnNwbGljZShjaGlsZEluZGV4LCAxKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBraWxsKGNoaWxkLCBzaWduYWwgPSAnU0lHS0lMTCcpIHtcbiAgICAgICAgdGhpcy5yZW1vdmUoY2hpbGQpO1xuICAgICAgICByZXR1cm4gY2hpbGQua2lsbChzaWduYWwsIENISUxEX0tJTExfVElNRU9VVCk7XG4gICAgfVxuICAgIGFzeW5jIGNsZWFuKCkge1xuICAgICAgICBjb25zdCBjaGlsZHJlbiA9IE9iamVjdC52YWx1ZXModGhpcy5yZXRhaW5lZCkuY29uY2F0KHRoaXMuZ2V0QWxsRnJlZSgpKTtcbiAgICAgICAgdGhpcy5yZXRhaW5lZCA9IHt9O1xuICAgICAgICB0aGlzLmZyZWUgPSB7fTtcbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoY2hpbGRyZW4ubWFwKGMgPT4gdGhpcy5raWxsKGMsICdTSUdURVJNJykpKTtcbiAgICB9XG4gICAgZ2V0RnJlZShpZCkge1xuICAgICAgICByZXR1cm4gKHRoaXMuZnJlZVtpZF0gPSB0aGlzLmZyZWVbaWRdIHx8IFtdKTtcbiAgICB9XG4gICAgZ2V0QWxsRnJlZSgpIHtcbiAgICAgICAgcmV0dXJuIE9iamVjdC52YWx1ZXModGhpcy5mcmVlKS5yZWR1Y2UoKGZpcnN0LCBzZWNvbmQpID0+IGZpcnN0LmNvbmNhdChzZWNvbmQpLCBbXSk7XG4gICAgfVxufVxuZXhwb3J0cy5DaGlsZFBvb2wgPSBDaGlsZFBvb2w7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jaGlsZC1wb29sLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsIkNoaWxkUG9vbCIsInBhdGgiLCJyZXF1aXJlIiwiY2hpbGRfMSIsIkNISUxEX0tJTExfVElNRU9VVCIsInN1cHBvcnRDSlMiLCJtb2R1bGUiLCJjb25zdHJ1Y3RvciIsIm1haW5GaWxlIiwiam9pbiIsInByb2Nlc3MiLCJjd2QiLCJ1c2VXb3JrZXJUaHJlYWRzIiwid29ya2VyRm9ya09wdGlvbnMiLCJ3b3JrZXJUaHJlYWRzT3B0aW9ucyIsInJldGFpbmVkIiwiZnJlZSIsIm9wdHMiLCJyZXRhaW4iLCJwcm9jZXNzRmlsZSIsImNoaWxkIiwiZ2V0RnJlZSIsInBvcCIsInBpZCIsIkNoaWxkIiwib24iLCJyZW1vdmUiLCJiaW5kIiwiaW5pdCIsImV4aXRDb2RlIiwic2lnbmFsQ29kZSIsIkVycm9yIiwiZXJyIiwiY29uc29sZSIsImVycm9yIiwicmVsZWFzZSIsInB1c2giLCJjaGlsZEluZGV4IiwiaW5kZXhPZiIsInNwbGljZSIsImtpbGwiLCJzaWduYWwiLCJjbGVhbiIsImNoaWxkcmVuIiwidmFsdWVzIiwiY29uY2F0IiwiZ2V0QWxsRnJlZSIsIlByb21pc2UiLCJhbGwiLCJtYXAiLCJjIiwiaWQiLCJyZWR1Y2UiLCJmaXJzdCIsInNlY29uZCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/classes/child-pool.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/classes/child-processor.js":
/*!*****************************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/classes/child-processor.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.ChildProcessor = void 0;\nconst enums_1 = __webpack_require__(/*! ../enums */ \"(rsc)/./node_modules/bullmq/dist/cjs/enums/index.js\");\nconst utils_1 = __webpack_require__(/*! ../utils */ \"(rsc)/./node_modules/bullmq/dist/cjs/utils/index.js\");\nvar ChildStatus;\n(function(ChildStatus) {\n    ChildStatus[ChildStatus[\"Idle\"] = 0] = \"Idle\";\n    ChildStatus[ChildStatus[\"Started\"] = 1] = \"Started\";\n    ChildStatus[ChildStatus[\"Terminating\"] = 2] = \"Terminating\";\n    ChildStatus[ChildStatus[\"Errored\"] = 3] = \"Errored\";\n})(ChildStatus || (ChildStatus = {}));\nconst RESPONSE_TIMEOUT =  false ? 0 : 5000;\n/**\n * ChildProcessor\n *\n * This class acts as the interface between a child process and it parent process\n * so that jobs can be processed in different processes.\n *\n */ class ChildProcessor {\n    constructor(send, receiver){\n        this.send = send;\n        this.receiver = receiver;\n    }\n    async init(processorFile) {\n        let processor;\n        try {\n            const { default: processorFn } = await __webpack_require__(\"(rsc)/./node_modules/bullmq/dist/cjs/classes lazy recursive referencedExports: default\")(processorFile);\n            processor = processorFn;\n            if (processor.default) {\n                // support es2015 module.\n                processor = processor.default;\n            }\n            if (typeof processor !== \"function\") {\n                throw new Error(\"No function is exported in processor file\");\n            }\n        } catch (err) {\n            this.status = ChildStatus.Errored;\n            return this.send({\n                cmd: enums_1.ParentCommand.InitFailed,\n                err: (0, utils_1.errorToJSON)(err)\n            });\n        }\n        const origProcessor = processor;\n        processor = function(job, token) {\n            try {\n                return Promise.resolve(origProcessor(job, token));\n            } catch (err) {\n                return Promise.reject(err);\n            }\n        };\n        this.processor = processor;\n        this.status = ChildStatus.Idle;\n        await this.send({\n            cmd: enums_1.ParentCommand.InitCompleted\n        });\n    }\n    async start(jobJson, token) {\n        if (this.status !== ChildStatus.Idle) {\n            return this.send({\n                cmd: enums_1.ParentCommand.Error,\n                err: (0, utils_1.errorToJSON)(new Error(\"cannot start a not idling child process\"))\n            });\n        }\n        this.status = ChildStatus.Started;\n        this.currentJobPromise = (async ()=>{\n            try {\n                const job = this.wrapJob(jobJson, this.send);\n                const result = await this.processor(job, token);\n                await this.send({\n                    cmd: enums_1.ParentCommand.Completed,\n                    value: typeof result === \"undefined\" ? null : result\n                });\n            } catch (err) {\n                await this.send({\n                    cmd: enums_1.ParentCommand.Failed,\n                    value: (0, utils_1.errorToJSON)(!err.message ? new Error(err) : err)\n                });\n            } finally{\n                this.status = ChildStatus.Idle;\n                this.currentJobPromise = undefined;\n            }\n        })();\n    }\n    async stop() {}\n    async waitForCurrentJobAndExit() {\n        this.status = ChildStatus.Terminating;\n        try {\n            await this.currentJobPromise;\n        } finally{\n            process.exit(process.exitCode || 0);\n        }\n    }\n    /**\n     * Enhance the given job argument with some functions\n     * that can be called from the sandboxed job processor.\n     *\n     * Note, the `job` argument is a JSON deserialized message\n     * from the main node process to this forked child process,\n     * the functions on the original job object are not in tact.\n     * The wrapped job adds back some of those original functions.\n     */ wrapJob(job, send) {\n        const wrappedJob = Object.assign(Object.assign({}, job), {\n            queueQualifiedName: job.queueQualifiedName,\n            data: JSON.parse(job.data || \"{}\"),\n            opts: job.opts,\n            returnValue: JSON.parse(job.returnvalue || \"{}\"),\n            /*\n             * Proxy `updateProgress` function, should works as `progress` function.\n             */ async updateProgress (progress) {\n                // Locally store reference to new progress value\n                // so that we can return it from this process synchronously.\n                this.progress = progress;\n                // Send message to update job progress.\n                await send({\n                    cmd: enums_1.ParentCommand.Progress,\n                    value: progress\n                });\n            },\n            /*\n             * Proxy job `log` function.\n             */ log: async (row)=>{\n                await send({\n                    cmd: enums_1.ParentCommand.Log,\n                    value: row\n                });\n            },\n            /*\n             * Proxy `moveToDelayed` function.\n             */ moveToDelayed: async (timestamp, token)=>{\n                await send({\n                    cmd: enums_1.ParentCommand.MoveToDelayed,\n                    value: {\n                        timestamp,\n                        token\n                    }\n                });\n            },\n            /*\n             * Proxy `moveToWait` function.\n             */ moveToWait: async (token)=>{\n                await send({\n                    cmd: enums_1.ParentCommand.MoveToWait,\n                    value: {\n                        token\n                    }\n                });\n            },\n            /*\n             * Proxy `moveToWaitingChildren` function.\n             */ moveToWaitingChildren: async (token, opts)=>{\n                const requestId = Math.random().toString(36).substring(2, 15);\n                await send({\n                    requestId,\n                    cmd: enums_1.ParentCommand.MoveToWaitingChildren,\n                    value: {\n                        token,\n                        opts\n                    }\n                });\n                return waitResponse(requestId, this.receiver, RESPONSE_TIMEOUT, \"moveToWaitingChildren\");\n            },\n            /*\n             * Proxy `updateData` function.\n             */ updateData: async (data)=>{\n                await send({\n                    cmd: enums_1.ParentCommand.Update,\n                    value: data\n                });\n                wrappedJob.data = data;\n            },\n            /**\n             * Proxy `getChildrenValues` function.\n             */ getChildrenValues: async ()=>{\n                const requestId = Math.random().toString(36).substring(2, 15);\n                await send({\n                    requestId,\n                    cmd: enums_1.ParentCommand.GetChildrenValues\n                });\n                return waitResponse(requestId, this.receiver, RESPONSE_TIMEOUT, \"getChildrenValues\");\n            },\n            /**\n             * Proxy `getIgnoredChildrenFailures` function.\n             *\n             * This method sends a request to retrieve the failures of ignored children\n             * and waits for a response from the parent process.\n             *\n             * @returns - A promise that resolves with the ignored children failures.\n             * The exact structure of the returned data depends on the parent process implementation.\n             */ getIgnoredChildrenFailures: async ()=>{\n                const requestId = Math.random().toString(36).substring(2, 15);\n                await send({\n                    requestId,\n                    cmd: enums_1.ParentCommand.GetIgnoredChildrenFailures\n                });\n                return waitResponse(requestId, this.receiver, RESPONSE_TIMEOUT, \"getIgnoredChildrenFailures\");\n            }\n        });\n        return wrappedJob;\n    }\n}\nexports.ChildProcessor = ChildProcessor;\nconst waitResponse = async (requestId, receiver, timeout, cmd)=>{\n    return new Promise((resolve, reject)=>{\n        const listener = (msg)=>{\n            if (msg.requestId === requestId) {\n                resolve(msg.value);\n                receiver.off(\"message\", listener);\n            }\n        };\n        receiver.on(\"message\", listener);\n        setTimeout(()=>{\n            receiver.off(\"message\", listener);\n            reject(new Error(`TimeoutError: ${cmd} timed out in (${timeout}ms)`));\n        }, timeout);\n    });\n}; //# sourceMappingURL=child-processor.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL2NsYXNzZXMvY2hpbGQtcHJvY2Vzc29yLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCxzQkFBc0IsR0FBRyxLQUFLO0FBQzlCLE1BQU1HLFVBQVVDLG1CQUFPQSxDQUFDLHFFQUFVO0FBQ2xDLE1BQU1DLFVBQVVELG1CQUFPQSxDQUFDLHFFQUFVO0FBQ2xDLElBQUlFO0FBQ0gsVUFBVUEsV0FBVztJQUNsQkEsV0FBVyxDQUFDQSxXQUFXLENBQUMsT0FBTyxHQUFHLEVBQUUsR0FBRztJQUN2Q0EsV0FBVyxDQUFDQSxXQUFXLENBQUMsVUFBVSxHQUFHLEVBQUUsR0FBRztJQUMxQ0EsV0FBVyxDQUFDQSxXQUFXLENBQUMsY0FBYyxHQUFHLEVBQUUsR0FBRztJQUM5Q0EsV0FBVyxDQUFDQSxXQUFXLENBQUMsVUFBVSxHQUFHLEVBQUUsR0FBRztBQUM5QyxHQUFHQSxlQUFnQkEsQ0FBQUEsY0FBYyxDQUFDO0FBQ2xDLE1BQU1DLG1CQUFtQkMsTUFBeUIsR0FBUyxDQUFHLEdBQUc7QUFDakU7Ozs7OztDQU1DLEdBQ0QsTUFBTU47SUFDRk8sWUFBWUMsSUFBSSxFQUFFQyxRQUFRLENBQUU7UUFDeEIsSUFBSSxDQUFDRCxJQUFJLEdBQUdBO1FBQ1osSUFBSSxDQUFDQyxRQUFRLEdBQUdBO0lBQ3BCO0lBQ0EsTUFBTUMsS0FBS0MsYUFBYSxFQUFFO1FBQ3RCLElBQUlDO1FBQ0osSUFBSTtZQUNBLE1BQU0sRUFBRUMsU0FBU0MsV0FBVyxFQUFFLEdBQUcsTUFBTSw4R0FBT0gsYUFBYUEsQ0FBQ0E7WUFDNURDLFlBQVlFO1lBQ1osSUFBSUYsVUFBVUMsT0FBTyxFQUFFO2dCQUNuQix5QkFBeUI7Z0JBQ3pCRCxZQUFZQSxVQUFVQyxPQUFPO1lBQ2pDO1lBQ0EsSUFBSSxPQUFPRCxjQUFjLFlBQVk7Z0JBQ2pDLE1BQU0sSUFBSUcsTUFBTTtZ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RyxDQUFDO1FBQ3ZFLEdBQUdBO0lBQ1A7QUFDSixHQUNBLDJDQUEyQyIsInNvdXJjZXMiOlsid2VicGFjazovL29ubHlmYW5zLXBsYXRmb3JtLy4vbm9kZV9tb2R1bGVzL2J1bGxtcS9kaXN0L2Nqcy9jbGFzc2VzL2NoaWxkLXByb2Nlc3Nvci5qcz9lY2E5Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5DaGlsZFByb2Nlc3NvciA9IHZvaWQgMDtcbmNvbnN0IGVudW1zXzEgPSByZXF1aXJlKFwiLi4vZW51bXNcIik7XG5jb25zdCB1dGlsc18xID0gcmVxdWlyZShcIi4uL3V0aWxzXCIpO1xudmFyIENoaWxkU3RhdHVzO1xuKGZ1bmN0aW9uIChDaGlsZFN0YXR1cykge1xuICAgIENoaWxkU3RhdHVzW0NoaWxkU3RhdHVzW1wiSWRsZVwiXSA9IDBdID0gXCJJZGxlXCI7XG4gICAgQ2hpbGRTdGF0dXNbQ2hpbGRTdGF0dXNbXCJTdGFydGVkXCJdID0gMV0gPSBcIlN0YXJ0ZWRcIjtcbiAgICBDaGlsZFN0YXR1c1tDaGlsZFN0YXR1c1tcIlRlcm1pbmF0aW5nXCJdID0gMl0gPSBcIlRlcm1pbmF0aW5nXCI7XG4gICAgQ2hpbGRTdGF0dXNbQ2hpbGRTdGF0dXNbXCJFcnJvcmVkXCJdID0gM10gPSBcIkVycm9yZWRcIjtcbn0pKENoaWxkU3RhdHVzIHx8IChDaGlsZFN0YXR1cyA9IHt9KSk7XG5jb25zdCBSRVNQT05TRV9USU1FT1VUID0gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICd0ZXN0JyA/IDUwMCA6IDUwMDA7XG4vKipcbiAqIENoaWxkUHJvY2Vzc29yXG4gKlxuICogVGhpcyBjbGFzcyBhY3RzIGFzIHRoZSBpbnRlcmZhY2UgYmV0d2VlbiBhIGNoaWxkIHByb2Nlc3MgYW5kIGl0IHBhcmVudCBwcm9jZXNzXG4gKiBzbyB0aGF0IGpvYnMgY2FuIGJlIHByb2Nlc3NlZCBpbiBkaWZmZXJlbnQgcHJvY2Vzc2VzLlxuICpcbiAqL1xuY2xhc3MgQ2hpbGRQcm9jZXNzb3Ige1xuICAgIGNvbnN0cnVjdG9yKHNlbmQsIHJlY2VpdmVyKSB7XG4gICAgICAgIHRoaXMuc2VuZCA9IHNlbmQ7XG4gICAgICAgIHRoaXMucmVjZWl2ZXIgPSByZWNlaXZlcjtcbiAgICB9XG4gICAgYXN5bmMgaW5pdChwcm9jZXNzb3JGaWxlKSB7XG4gICAgICAgIGxldCBwcm9jZXNzb3I7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCB7IGRlZmF1bHQ6IHByb2Nlc3NvckZuIH0gPSBhd2FpdCBpbXBvcnQocHJvY2Vzc29yRmlsZSk7XG4gICAgICAgICAgICBwcm9jZXNzb3IgPSBwcm9jZXNzb3JGbjtcbiAgICAgICAgICAgIGlmIChwcm9jZXNzb3IuZGVmYXVsdCkge1xuICAgICAgICAgICAgICAgIC8vIHN1cHBvcnQgZXMyMDE1IG1vZHVsZS5cbiAgICAgICAgICAgICAgICBwcm9jZXNzb3IgPSBwcm9jZXNzb3IuZGVmYXVsdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0eXBlb2YgcHJvY2Vzc29yICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyBmdW5jdGlvbiBpcyBleHBvcnRlZCBpbiBwcm9jZXNzb3IgZmlsZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIHRoaXMuc3RhdHVzID0gQ2hpbGRTdGF0dXMuRXJyb3JlZDtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNlbmQoe1xuICAgICAgICAgICAgICAgIGNtZDogZW51bXNfMS5QYXJlbnRDb21tYW5kLkluaXRGYWlsZWQsXG4gICAgICAgICAgICAgICAgZXJyOiAoMCwgdXRpbHNfMS5lcnJvclRvSlNPTikoZXJyKSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG9yaWdQcm9jZXNzb3IgPSBwcm9jZXNzb3I7XG4gICAgICAgIHByb2Nlc3NvciA9IGZ1bmN0aW9uIChqb2IsIHRva2VuKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUob3JpZ1Byb2Nlc3Nvcihqb2IsIHRva2VuKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMucHJvY2Vzc29yID0gcHJvY2Vzc29yO1xuICAgICAgICB0aGlzLnN0YXR1cyA9IENoaWxkU3RhdHVzLklkbGU7XG4gICAgICAgIGF3YWl0IHRoaXMuc2VuZCh7XG4gICAgICAgICAgICBjbWQ6IGVudW1zXzEuUGFyZW50Q29tbWFuZC5Jbml0Q29tcGxldGVkLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgYXN5bmMgc3RhcnQoam9iSnNvbiwgdG9rZW4pIHtcbiAgICAgICAgaWYgKHRoaXMuc3RhdHVzICE9PSBDaGlsZFN0YXR1cy5JZGxlKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zZW5kKHtcbiAgICAgICAgICAgICAgICBjbWQ6IGVudW1zXzEuUGFyZW50Q29tbWFuZC5FcnJvcixcbiAgICAgICAgICAgICAgICBlcnI6ICgwLCB1dGlsc18xLmVycm9yVG9KU09OKShuZXcgRXJyb3IoJ2Nhbm5vdCBzdGFydCBhIG5vdCBpZGxpbmcgY2hpbGQgcHJvY2VzcycpKSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc3RhdHVzID0gQ2hpbGRTdGF0dXMuU3RhcnRlZDtcbiAgICAgICAgdGhpcy5jdXJyZW50Sm9iUHJvbWlzZSA9IChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGpvYiA9IHRoaXMud3JhcEpvYihqb2JKc29uLCB0aGlzLnNlbmQpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMucHJvY2Vzc29yKGpvYiwgdG9rZW4pO1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2VuZCh7XG4gICAgICAgICAgICAgICAgICAgIGNtZDogZW51bXNfMS5QYXJlbnRDb21tYW5kLkNvbXBsZXRlZCxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHR5cGVvZiByZXN1bHQgPT09ICd1bmRlZmluZWQnID8gbnVsbCA6IHJlc3VsdCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnNlbmQoe1xuICAgICAgICAgICAgICAgICAgICBjbWQ6IGVudW1zXzEuUGFyZW50Q29tbWFuZC5GYWlsZWQsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiAoMCwgdXRpbHNfMS5lcnJvclRvSlNPTikoIWVyci5tZXNzYWdlID8gbmV3IEVycm9yKGVycikgOiBlcnIpLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0dXMgPSBDaGlsZFN0YXR1cy5JZGxlO1xuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudEpvYlByb21pc2UgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKCk7XG4gICAgfVxuICAgIGFzeW5jIHN0b3AoKSB7IH1cbiAgICBhc3luYyB3YWl0Rm9yQ3VycmVudEpvYkFuZEV4aXQoKSB7XG4gICAgICAgIHRoaXMuc3RhdHVzID0gQ2hpbGRTdGF0dXMuVGVybWluYXRpbmc7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmN1cnJlbnRKb2JQcm9taXNlO1xuICAgICAgICB9XG4gICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgcHJvY2Vzcy5leGl0KHByb2Nlc3MuZXhpdENvZGUgfHwgMCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogRW5oYW5jZSB0aGUgZ2l2ZW4gam9iIGFyZ3VtZW50IHdpdGggc29tZSBmdW5jdGlvbnNcbiAgICAgKiB0aGF0IGNhbiBiZSBjYWxsZWQgZnJvbSB0aGUgc2FuZGJveGVkIGpvYiBwcm9jZXNzb3IuXG4gICAgICpcbiAgICAgKiBOb3RlLCB0aGUgYGpvYmAgYXJndW1lbnQgaXMgYSBKU09OIGRlc2VyaWFsaXplZCBtZXNzYWdlXG4gICAgICogZnJvbSB0aGUgbWFpbiBub2RlIHByb2Nlc3MgdG8gdGhpcyBmb3JrZWQgY2hpbGQgcHJvY2VzcyxcbiAgICAgKiB0aGUgZnVuY3Rpb25zIG9uIHRoZSBvcmlnaW5hbCBqb2Igb2JqZWN0IGFyZSBub3QgaW4gdGFjdC5cbiAgICAgKiBUaGUgd3JhcHBlZCBqb2IgYWRkcyBiYWNrIHNvbWUgb2YgdGhvc2Ugb3JpZ2luYWwgZnVuY3Rpb25zLlxuICAgICAqL1xuICAgIHdyYXBKb2Ioam9iLCBzZW5kKSB7XG4gICAgICAgIGNvbnN0IHdyYXBwZWRKb2IgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIGpvYiksIHsgcXVldWVRdWFsaWZpZWROYW1lOiBqb2IucXVldWVRdWFsaWZpZWROYW1lLCBkYXRhOiBKU09OLnBhcnNlKGpvYi5kYXRhIHx8ICd7fScpLCBvcHRzOiBqb2Iub3B0cywgcmV0dXJuVmFsdWU6IEpTT04ucGFyc2Uoam9iLnJldHVybnZhbHVlIHx8ICd7fScpLCBcbiAgICAgICAgICAgIC8qXG4gICAgICAgICAgICAgKiBQcm94eSBgdXBkYXRlUHJvZ3Jlc3NgIGZ1bmN0aW9uLCBzaG91bGQgd29ya3MgYXMgYHByb2dyZXNzYCBmdW5jdGlvbi5cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgYXN5bmMgdXBkYXRlUHJvZ3Jlc3MocHJvZ3Jlc3MpIHtcbiAgICAgICAgICAgICAgICAvLyBMb2NhbGx5IHN0b3JlIHJlZmVyZW5jZSB0byBuZXcgcHJvZ3Jlc3MgdmFsdWVcbiAgICAgICAgICAgICAgICAvLyBzbyB0aGF0IHdlIGNhbiByZXR1cm4gaXQgZnJvbSB0aGlzIHByb2Nlc3Mgc3luY2hyb25vdXNseS5cbiAgICAgICAgICAgICAgICB0aGlzLnByb2dyZXNzID0gcHJvZ3Jlc3M7XG4gICAgICAgICAgICAgICAgLy8gU2VuZCBtZXNzYWdlIHRvIHVwZGF0ZSBqb2IgcHJvZ3Jlc3MuXG4gICAgICAgICAgICAgICAgYXdhaXQgc2VuZCh7XG4gICAgICAgICAgICAgICAgICAgIGNtZDogZW51bXNfMS5QYXJlbnRDb21tYW5kLlByb2dyZXNzLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogcHJvZ3Jlc3MsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9LCBcbiAgICAgICAgICAgIC8qXG4gICAgICAgICAgICAgKiBQcm94eSBqb2IgYGxvZ2AgZnVuY3Rpb24uXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGxvZzogYXN5bmMgKHJvdykgPT4ge1xuICAgICAgICAgICAgICAgIGF3YWl0IHNlbmQoe1xuICAgICAgICAgICAgICAgICAgICBjbWQ6IGVudW1zXzEuUGFyZW50Q29tbWFuZC5Mb2csXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiByb3csXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9LCBcbiAgICAgICAgICAgIC8qXG4gICAgICAgICAgICAgKiBQcm94eSBgbW92ZVRvRGVsYXllZGAgZnVuY3Rpb24uXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIG1vdmVUb0RlbGF5ZWQ6IGFzeW5jICh0aW1lc3RhbXAsIHRva2VuKSA9PiB7XG4gICAgICAgICAgICAgICAgYXdhaXQgc2VuZCh7XG4gICAgICAgICAgICAgICAgICAgIGNtZDogZW51bXNfMS5QYXJlbnRDb21tYW5kLk1vdmVUb0RlbGF5ZWQsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiB7IHRpbWVzdGFtcCwgdG9rZW4gfSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0sIFxuICAgICAgICAgICAgLypcbiAgICAgICAgICAgICAqIFByb3h5IGBtb3ZlVG9XYWl0YCBmdW5jdGlvbi5cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgbW92ZVRvV2FpdDogYXN5bmMgKHRva2VuKSA9PiB7XG4gICAgICAgICAgICAgICAgYXdhaXQgc2VuZCh7XG4gICAgICAgICAgICAgICAgICAgIGNtZDogZW51bXNfMS5QYXJlbnRDb21tYW5kLk1vdmVUb1dhaXQsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiB7IHRva2VuIH0sXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9LCBcbiAgICAgICAgICAgIC8qXG4gICAgICAgICAgICAgKiBQcm94eSBgbW92ZVRvV2FpdGluZ0NoaWxkcmVuYCBmdW5jdGlvbi5cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgbW92ZVRvV2FpdGluZ0NoaWxkcmVuOiBhc3luYyAodG9rZW4sIG9wdHMpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXF1ZXN0SWQgPSBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHJpbmcoMiwgMTUpO1xuICAgICAgICAgICAgICAgIGF3YWl0IHNlbmQoe1xuICAgICAgICAgICAgICAgICAgICByZXF1ZXN0SWQsXG4gICAgICAgICAgICAgICAgICAgIGNtZDogZW51bXNfMS5QYXJlbnRDb21tYW5kLk1vdmVUb1dhaXRpbmdDaGlsZHJlbixcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHsgdG9rZW4sIG9wdHMgfSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gd2FpdFJlc3BvbnNlKHJlcXVlc3RJZCwgdGhpcy5yZWNlaXZlciwgUkVTUE9OU0VfVElNRU9VVCwgJ21vdmVUb1dhaXRpbmdDaGlsZHJlbicpO1xuICAgICAgICAgICAgfSwgXG4gICAgICAgICAgICAvKlxuICAgICAgICAgICAgICogUHJveHkgYHVwZGF0ZURhdGFgIGZ1bmN0aW9uLlxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICB1cGRhdGVEYXRhOiBhc3luYyAoZGF0YSkgPT4ge1xuICAgICAgICAgICAgICAgIGF3YWl0IHNlbmQoe1xuICAgICAgICAgICAgICAgICAgICBjbWQ6IGVudW1zXzEuUGFyZW50Q29tbWFuZC5VcGRhdGUsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBkYXRhLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHdyYXBwZWRKb2IuZGF0YSA9IGRhdGE7XG4gICAgICAgICAgICB9LCBcbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogUHJveHkgYGdldENoaWxkcmVuVmFsdWVzYCBmdW5jdGlvbi5cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgZ2V0Q2hpbGRyZW5WYWx1ZXM6IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXF1ZXN0SWQgPSBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHJpbmcoMiwgMTUpO1xuICAgICAgICAgICAgICAgIGF3YWl0IHNlbmQoe1xuICAgICAgICAgICAgICAgICAgICByZXF1ZXN0SWQsXG4gICAgICAgICAgICAgICAgICAgIGNtZDogZW51bXNfMS5QYXJlbnRDb21tYW5kLkdldENoaWxkcmVuVmFsdWVzLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiB3YWl0UmVzcG9uc2UocmVxdWVzdElkLCB0aGlzLnJlY2VpdmVyLCBSRVNQT05TRV9USU1FT1VULCAnZ2V0Q2hpbGRyZW5WYWx1ZXMnKTtcbiAgICAgICAgICAgIH0sIFxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBQcm94eSBgZ2V0SWdub3JlZENoaWxkcmVuRmFpbHVyZXNgIGZ1bmN0aW9uLlxuICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAqIFRoaXMgbWV0aG9kIHNlbmRzIGEgcmVxdWVzdCB0byByZXRyaWV2ZSB0aGUgZmFpbHVyZXMgb2YgaWdub3JlZCBjaGlsZHJlblxuICAgICAgICAgICAgICogYW5kIHdhaXRzIGZvciBhIHJlc3BvbnNlIGZyb20gdGhlIHBhcmVudCBwcm9jZXNzLlxuICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAqIEByZXR1cm5zIC0gQSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2l0aCB0aGUgaWdub3JlZCBjaGlsZHJlbiBmYWlsdXJlcy5cbiAgICAgICAgICAgICAqIFRoZSBleGFjdCBzdHJ1Y3R1cmUgb2YgdGhlIHJldHVybmVkIGRhdGEgZGVwZW5kcyBvbiB0aGUgcGFyZW50IHByb2Nlc3MgaW1wbGVtZW50YXRpb24uXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGdldElnbm9yZWRDaGlsZHJlbkZhaWx1cmVzOiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVxdWVzdElkID0gTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyaW5nKDIsIDE1KTtcbiAgICAgICAgICAgICAgICBhd2FpdCBzZW5kKHtcbiAgICAgICAgICAgICAgICAgICAgcmVxdWVzdElkLFxuICAgICAgICAgICAgICAgICAgICBjbWQ6IGVudW1zXzEuUGFyZW50Q29tbWFuZC5HZXRJZ25vcmVkQ2hpbGRyZW5GYWlsdXJlcyxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gd2FpdFJlc3BvbnNlKHJlcXVlc3RJZCwgdGhpcy5yZWNlaXZlciwgUkVTUE9OU0VfVElNRU9VVCwgJ2dldElnbm9yZWRDaGlsZHJlbkZhaWx1cmVzJyk7XG4gICAgICAgICAgICB9IH0pO1xuICAgICAgICByZXR1cm4gd3JhcHBlZEpvYjtcbiAgICB9XG59XG5leHBvcnRzLkNoaWxkUHJvY2Vzc29yID0gQ2hpbGRQcm9jZXNzb3I7XG5jb25zdCB3YWl0UmVzcG9uc2UgPSBhc3luYyAocmVxdWVzdElkLCByZWNlaXZlciwgdGltZW91dCwgY21kKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgY29uc3QgbGlzdGVuZXIgPSAobXNnKSA9PiB7XG4gICAgICAgICAgICBpZiAobXNnLnJlcXVlc3RJZCA9PT0gcmVxdWVzdElkKSB7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZShtc2cudmFsdWUpO1xuICAgICAgICAgICAgICAgIHJlY2VpdmVyLm9mZignbWVzc2FnZScsIGxpc3RlbmVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcmVjZWl2ZXIub24oJ21lc3NhZ2UnLCBsaXN0ZW5lcik7XG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgcmVjZWl2ZXIub2ZmKCdtZXNzYWdlJywgbGlzdGVuZXIpO1xuICAgICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcihgVGltZW91dEVycm9yOiAke2NtZH0gdGltZWQgb3V0IGluICgke3RpbWVvdXR9bXMpYCkpO1xuICAgICAgICB9LCB0aW1lb3V0KTtcbiAgICB9KTtcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jaGlsZC1wcm9jZXNzb3IuanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiQ2hpbGRQcm9jZXNzb3IiLCJlbnVtc18xIiwicmVxdWlyZSIsInV0aWxzXzEiLCJDaGlsZFN0YXR1cyIsIlJFU1BPTlNFX1RJTUVPVVQiLCJwcm9jZXNzIiwiY29uc3RydWN0b3IiLCJzZW5kIiwicmVjZWl2ZXIiLCJpbml0IiwicHJvY2Vzc29yRmlsZSIsInByb2Nlc3NvciIsImRlZmF1bHQiLCJwcm9jZXNzb3JGbiIsIkVycm9yIiwiZXJyIiwic3RhdHVzIiwiRXJyb3JlZCIsImNtZCIsIlBhcmVudENvbW1hbmQiLCJJbml0RmFpbGVkIiwiZXJyb3JUb0pTT04iLCJvcmlnUHJvY2Vzc29yIiwiam9iIiwidG9rZW4iLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsIklkbGUiLCJJbml0Q29tcGxldGVkIiwic3RhcnQiLCJqb2JKc29uIiwiU3RhcnRlZCIsImN1cnJlbnRKb2JQcm9taXNlIiwid3JhcEpvYiIsInJlc3VsdCIsIkNvbXBsZXRlZCIsIkZhaWxlZCIsIm1lc3NhZ2UiLCJ1bmRlZmluZWQiLCJzdG9wIiwid2FpdEZvckN1cnJlbnRKb2JBbmRFeGl0IiwiVGVybWluYXRpbmciLCJleGl0IiwiZXhpdENvZGUiLCJ3cmFwcGVkSm9iIiwiYXNzaWduIiwicXVldWVRdWFsaWZpZWROYW1lIiwiZGF0YSIsIkpTT04iLCJwYXJzZSIsIm9wdHMiLCJyZXR1cm5WYWx1ZSIsInJldHVybnZhbHVlIiwidXBkYXRlUHJvZ3Jlc3MiLCJwcm9ncmVzcyIsIlByb2dyZXNzIiwibG9nIiwicm93IiwiTG9nIiwibW92ZVRvRGVsYXllZCIsInRpbWVzdGFtcCIsIk1vdmVUb0RlbGF5ZWQiLCJtb3ZlVG9XYWl0IiwiTW92ZVRvV2FpdCIsIm1vdmVUb1dhaXRpbmdDaGlsZHJlbiIsInJlcXVlc3RJZCIsIk1hdGgiLCJyYW5kb20iLCJ0b1N0cmluZyIsInN1YnN0cmluZyIsIk1vdmVUb1dhaXRpbmdDaGlsZHJlbiIsIndhaXRSZXNwb25zZSIsInVwZGF0ZURhdGEiLCJVcGRhdGUiLCJnZXRDaGlsZHJlblZhbHVlcyIsIkdldENoaWxkcmVuVmFsdWVzIiwiZ2V0SWdub3JlZENoaWxkcmVuRmFpbHVyZXMiLCJHZXRJZ25vcmVkQ2hpbGRyZW5GYWlsdXJlcyIsInRpbWVvdXQiLCJsaXN0ZW5lciIsIm1zZyIsIm9mZiIsIm9uIiwic2V0VGltZW91dCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/classes/child-processor.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/classes/child.js":
/*!*******************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/classes/child.js ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.Child = void 0;\nconst child_process_1 = __webpack_require__(/*! child_process */ \"child_process\");\nconst net_1 = __webpack_require__(/*! net */ \"net\");\nconst worker_threads_1 = __webpack_require__(/*! worker_threads */ \"worker_threads\");\nconst enums_1 = __webpack_require__(/*! ../enums */ \"(rsc)/./node_modules/bullmq/dist/cjs/enums/index.js\");\nconst events_1 = __webpack_require__(/*! events */ \"events\");\n/**\n * @see https://nodejs.org/api/process.html#process_exit_codes\n */ const exitCodesErrors = {\n    1: \"Uncaught Fatal Exception\",\n    2: \"Unused\",\n    3: \"Internal JavaScript Parse Error\",\n    4: \"Internal JavaScript Evaluation Failure\",\n    5: \"Fatal Error\",\n    6: \"Non-function Internal Exception Handler\",\n    7: \"Internal Exception Handler Run-Time Failure\",\n    8: \"Unused\",\n    9: \"Invalid Argument\",\n    10: \"Internal JavaScript Run-Time Failure\",\n    12: \"Invalid Debug Argument\",\n    13: \"Unfinished Top-Level Await\"\n};\n/**\n * Child class\n *\n * This class is used to create a child process or worker thread, and allows using\n * isolated processes or threads for processing jobs.\n *\n */ class Child extends events_1.EventEmitter {\n    constructor(mainFile, processFile, opts = {\n        useWorkerThreads: false\n    }){\n        super();\n        this.mainFile = mainFile;\n        this.processFile = processFile;\n        this.opts = opts;\n        this._exitCode = null;\n        this._signalCode = null;\n        this._killed = false;\n    }\n    get pid() {\n        if (this.childProcess) {\n            return this.childProcess.pid;\n        } else if (this.worker) {\n            // Worker threads pids can become negative when they are terminated\n            // so we need to use the absolute value to index the retained object\n            return Math.abs(this.worker.threadId);\n        } else {\n            throw new Error(\"No child process or worker thread\");\n        }\n    }\n    get exitCode() {\n        return this._exitCode;\n    }\n    get signalCode() {\n        return this._signalCode;\n    }\n    get killed() {\n        if (this.childProcess) {\n            return this.childProcess.killed;\n        }\n        return this._killed;\n    }\n    async init() {\n        const execArgv = await convertExecArgv(process.execArgv);\n        let parent;\n        if (this.opts.useWorkerThreads) {\n            this.worker = parent = new worker_threads_1.Worker(this.mainFile, Object.assign({\n                execArgv,\n                stdin: true,\n                stdout: true,\n                stderr: true\n            }, this.opts.workerThreadsOptions ? this.opts.workerThreadsOptions : {}));\n        } else {\n            this.childProcess = parent = (0, child_process_1.fork)(this.mainFile, [], Object.assign({\n                execArgv,\n                stdio: \"pipe\"\n            }, this.opts.workerForkOptions ? this.opts.workerForkOptions : {}));\n        }\n        parent.on(\"exit\", (exitCode, signalCode)=>{\n            this._exitCode = exitCode;\n            // Coerce to null if undefined for backwards compatibility\n            signalCode = typeof signalCode === \"undefined\" ? null : signalCode;\n            this._signalCode = signalCode;\n            this._killed = true;\n            this.emit(\"exit\", exitCode, signalCode);\n            // Clean all listeners, we do not expect any more events after \"exit\"\n            parent.removeAllListeners();\n            this.removeAllListeners();\n        });\n        parent.on(\"error\", (...args)=>this.emit(\"error\", ...args));\n        parent.on(\"message\", (...args)=>this.emit(\"message\", ...args));\n        parent.on(\"close\", (...args)=>this.emit(\"close\", ...args));\n        parent.stdout.pipe(process.stdout);\n        parent.stderr.pipe(process.stderr);\n        await this.initChild();\n    }\n    async send(msg) {\n        return new Promise((resolve, reject)=>{\n            if (this.childProcess) {\n                this.childProcess.send(msg, (err)=>{\n                    if (err) {\n                        reject(err);\n                    } else {\n                        resolve();\n                    }\n                });\n            } else if (this.worker) {\n                resolve(this.worker.postMessage(msg));\n            } else {\n                resolve();\n            }\n        });\n    }\n    killProcess(signal = \"SIGKILL\") {\n        if (this.childProcess) {\n            this.childProcess.kill(signal);\n        } else if (this.worker) {\n            this.worker.terminate();\n        }\n    }\n    async kill(signal = \"SIGKILL\", timeoutMs) {\n        if (this.hasProcessExited()) {\n            return;\n        }\n        const onExit = onExitOnce(this.childProcess || this.worker);\n        this.killProcess(signal);\n        if (timeoutMs !== undefined && (timeoutMs === 0 || isFinite(timeoutMs))) {\n            const timeoutHandle = setTimeout(()=>{\n                if (!this.hasProcessExited()) {\n                    this.killProcess(\"SIGKILL\");\n                }\n            }, timeoutMs);\n            await onExit;\n            clearTimeout(timeoutHandle);\n        }\n        await onExit;\n    }\n    async initChild() {\n        const onComplete = new Promise((resolve, reject)=>{\n            const onMessageHandler = (msg)=>{\n                if (msg.cmd === enums_1.ParentCommand.InitCompleted) {\n                    resolve();\n                } else if (msg.cmd === enums_1.ParentCommand.InitFailed) {\n                    const err = new Error();\n                    err.stack = msg.err.stack;\n                    err.message = msg.err.message;\n                    reject(err);\n                }\n                this.off(\"message\", onMessageHandler);\n                this.off(\"close\", onCloseHandler);\n            };\n            const onCloseHandler = (code, signal)=>{\n                if (code > 128) {\n                    code -= 128;\n                }\n                const msg = exitCodesErrors[code] || `Unknown exit code ${code}`;\n                reject(new Error(`Error initializing child: ${msg} and signal ${signal}`));\n                this.off(\"message\", onMessageHandler);\n                this.off(\"close\", onCloseHandler);\n            };\n            this.on(\"message\", onMessageHandler);\n            this.on(\"close\", onCloseHandler);\n        });\n        await this.send({\n            cmd: enums_1.ChildCommand.Init,\n            value: this.processFile\n        });\n        await onComplete;\n    }\n    hasProcessExited() {\n        return !!(this.exitCode !== null || this.signalCode);\n    }\n}\nexports.Child = Child;\nfunction onExitOnce(child) {\n    return new Promise((resolve)=>{\n        child.once(\"exit\", ()=>resolve());\n    });\n}\nconst getFreePort = async ()=>{\n    return new Promise((resolve)=>{\n        const server = (0, net_1.createServer)();\n        server.listen(0, ()=>{\n            const { port } = server.address();\n            server.close(()=>resolve(port));\n        });\n    });\n};\nconst convertExecArgv = async (execArgv)=>{\n    const standard = [];\n    const convertedArgs = [];\n    for(let i = 0; i < execArgv.length; i++){\n        const arg = execArgv[i];\n        if (arg.indexOf(\"--inspect\") === -1) {\n            standard.push(arg);\n        } else {\n            const argName = arg.split(\"=\")[0];\n            const port = await getFreePort();\n            convertedArgs.push(`${argName}=${port}`);\n        }\n    }\n    return standard.concat(convertedArgs);\n}; //# sourceMappingURL=child.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL2NsYXNzZXMvY2hpbGQuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELGFBQWEsR0FBRyxLQUFLO0FBQ3JCLE1BQU1HLGtCQUFrQkMsbUJBQU9BLENBQUMsb0NBQWU7QUFDL0MsTUFBTUMsUUFBUUQsbUJBQU9BLENBQUMsZ0JBQUs7QUFDM0IsTUFBTUUsbUJBQW1CRixtQkFBT0EsQ0FBQyxzQ0FBZ0I7QUFDakQsTUFBTUcsVUFBVUgsbUJBQU9BLENBQUMscUVBQVU7QUFDbEMsTUFBTUksV0FBV0osbUJBQU9BLENBQUMsc0JBQVE7QUFDakM7O0NBRUMsR0FDRCxNQUFNSyxrQkFBa0I7SUFDcEIsR0FBRztJQUNILEdBQUc7SUFDSCxHQUFHO0lBQ0gsR0FBRztJQUNILEdBQUc7SUFDSCxHQUFHO0lBQ0gsR0FBRztJQUNILEdBQUc7SUFDSCxHQUFHO0lBQ0gsSUFBSTtJQUNKLElBQUk7SUFDSixJQUFJO0FBQ1I7QUFDQTs7Ozs7O0NBTUMsR0FDRCxNQUFNUCxjQUFjTSxTQUFTRSxZQUFZO0lBQ3JDQyxZQUFZQyxRQUFRLEVBQUVDLFdBQVcsRUFBRUMsT0FBTztRQUN0Q0Msa0JBQWtCO0lBQ3RCLENBQUMsQ0FBRTtRQUNDLEtBQUs7UUFDTCxJQUFJLENBQUNILFFBQVEsR0FBR0E7UUFDaEIsSUFBSSxDQUFDQyxXQUFXLEdBQUdBO1FBQ25CLElBQUksQ0FBQ0MsSUFBSSxHQUFHQTtRQUNaLElBQUksQ0FBQ0UsU0FBUyxHQUFHO1FBQ2pCLElBQUksQ0FBQ0MsV0FBVyxHQUFHO1FBQ25CLElBQUksQ0FBQ0MsT0FBTyxHQUFHO0lBQ25CO0lBQ0EsSUFBSUMsTUFBTTtRQUNOLElBQUksSUFBSSxDQUFDQyxZQUFZLEVBQUU7WUFDbkIsT0FBTyxJQUFJLENBQUNBLFlBQVksQ0FBQ0QsR0FBRztRQUNoQyxPQUNLLElBQUksSUFBSSxDQUFDRSxN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SUFBSWpDLFFBQVFDLENBQUFBO1FBQ2YsTUFBTWlDLFNBQVMsQ0FBQyxHQUFHaEYsTUFBTWlGLFlBQVk7UUFDckNELE9BQU9FLE1BQU0sQ0FBQyxHQUFHO1lBQ2IsTUFBTSxFQUFFQyxJQUFJLEVBQUUsR0FBR0gsT0FBT0ksT0FBTztZQUMvQkosT0FBT0ssS0FBSyxDQUFDLElBQU10QyxRQUFRb0M7UUFDL0I7SUFDSjtBQUNKO0FBQ0EsTUFBTXpELGtCQUFrQixPQUFPRDtJQUMzQixNQUFNNkQsV0FBVyxFQUFFO0lBQ25CLE1BQU1DLGdCQUFnQixFQUFFO0lBQ3hCLElBQUssSUFBSUMsSUFBSSxHQUFHQSxJQUFJL0QsU0FBU2dFLE1BQU0sRUFBRUQsSUFBSztRQUN0QyxNQUFNRSxNQUFNakUsUUFBUSxDQUFDK0QsRUFBRTtRQUN2QixJQUFJRSxJQUFJQyxPQUFPLENBQUMsaUJBQWlCLENBQUMsR0FBRztZQUNqQ0wsU0FBU00sSUFBSSxDQUFDRjtRQUNsQixPQUNLO1lBQ0QsTUFBTUcsVUFBVUgsSUFBSUksS0FBSyxDQUFDLElBQUksQ0FBQyxFQUFFO1lBQ2pDLE1BQU1YLE9BQU8sTUFBTUo7WUFDbkJRLGNBQWNLLElBQUksQ0FBQyxDQUFDLEVBQUVDLFFBQVEsQ0FBQyxFQUFFVixLQUFLLENBQUM7UUFDM0M7SUFDSjtJQUNBLE9BQU9HLFNBQVNTLE1BQU0sQ0FBQ1I7QUFDM0IsR0FDQSxpQ0FBaUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vbmx5ZmFucy1wbGF0Zm9ybS8uL25vZGVfbW9kdWxlcy9idWxsbXEvZGlzdC9janMvY2xhc3Nlcy9jaGlsZC5qcz9mMjYxIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5DaGlsZCA9IHZvaWQgMDtcbmNvbnN0IGNoaWxkX3Byb2Nlc3NfMSA9IHJlcXVpcmUoXCJjaGlsZF9wcm9jZXNzXCIpO1xuY29uc3QgbmV0XzEgPSByZXF1aXJlKFwibmV0XCIpO1xuY29uc3Qgd29ya2VyX3RocmVhZHNfMSA9IHJlcXVpcmUoXCJ3b3JrZXJfdGhyZWFkc1wiKTtcbmNvbnN0IGVudW1zXzEgPSByZXF1aXJlKFwiLi4vZW51bXNcIik7XG5jb25zdCBldmVudHNfMSA9IHJlcXVpcmUoXCJldmVudHNcIik7XG4vKipcbiAqIEBzZWUgaHR0cHM6Ly9ub2RlanMub3JnL2FwaS9wcm9jZXNzLmh0bWwjcHJvY2Vzc19leGl0X2NvZGVzXG4gKi9cbmNvbnN0IGV4aXRDb2Rlc0Vycm9ycyA9IHtcbiAgICAxOiAnVW5jYXVnaHQgRmF0YWwgRXhjZXB0aW9uJyxcbiAgICAyOiAnVW51c2VkJyxcbiAgICAzOiAnSW50ZXJuYWwgSmF2YVNjcmlwdCBQYXJzZSBFcnJvcicsXG4gICAgNDogJ0ludGVybmFsIEphdmFTY3JpcHQgRXZhbHVhdGlvbiBGYWlsdXJlJyxcbiAgICA1OiAnRmF0YWwgRXJyb3InLFxuICAgIDY6ICdOb24tZnVuY3Rpb24gSW50ZXJuYWwgRXhjZXB0aW9uIEhhbmRsZXInLFxuICAgIDc6ICdJbnRlcm5hbCBFeGNlcHRpb24gSGFuZGxlciBSdW4tVGltZSBGYWlsdXJlJyxcbiAgICA4OiAnVW51c2VkJyxcbiAgICA5OiAnSW52YWxpZCBBcmd1bWVudCcsXG4gICAgMTA6ICdJbnRlcm5hbCBKYXZhU2NyaXB0IFJ1bi1UaW1lIEZhaWx1cmUnLFxuICAgIDEyOiAnSW52YWxpZCBEZWJ1ZyBBcmd1bWVudCcsXG4gICAgMTM6ICdVbmZpbmlzaGVkIFRvcC1MZXZlbCBBd2FpdCcsXG59O1xuLyoqXG4gKiBDaGlsZCBjbGFzc1xuICpcbiAqIFRoaXMgY2xhc3MgaXMgdXNlZCB0byBjcmVhdGUgYSBjaGlsZCBwcm9jZXNzIG9yIHdvcmtlciB0aHJlYWQsIGFuZCBhbGxvd3MgdXNpbmdcbiAqIGlzb2xhdGVkIHByb2Nlc3NlcyBvciB0aHJlYWRzIGZvciBwcm9jZXNzaW5nIGpvYnMuXG4gKlxuICovXG5jbGFzcyBDaGlsZCBleHRlbmRzIGV2ZW50c18xLkV2ZW50RW1pdHRlciB7XG4gICAgY29uc3RydWN0b3IobWFpbkZpbGUsIHByb2Nlc3NGaWxlLCBvcHRzID0ge1xuICAgICAgICB1c2VXb3JrZXJUaHJlYWRzOiBmYWxzZSxcbiAgICB9KSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMubWFpbkZpbGUgPSBtYWluRmlsZTtcbiAgICAgICAgdGhpcy5wcm9jZXNzRmlsZSA9IHByb2Nlc3NGaWxlO1xuICAgICAgICB0aGlzLm9wdHMgPSBvcHRzO1xuICAgICAgICB0aGlzLl9leGl0Q29kZSA9IG51bGw7XG4gICAgICAgIHRoaXMuX3NpZ25hbENvZGUgPSBudWxsO1xuICAgICAgICB0aGlzLl9raWxsZWQgPSBmYWxzZTtcbiAgICB9XG4gICAgZ2V0IHBpZCgpIHtcbiAgICAgICAgaWYgKHRoaXMuY2hpbGRQcm9jZXNzKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jaGlsZFByb2Nlc3MucGlkO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMud29ya2VyKSB7XG4gICAgICAgICAgICAvLyBXb3JrZXIgdGhyZWFkcyBwaWRzIGNhbiBiZWNvbWUgbmVnYXRpdmUgd2hlbiB0aGV5IGFyZSB0ZXJtaW5hdGVkXG4gICAgICAgICAgICAvLyBzbyB3ZSBuZWVkIHRvIHVzZSB0aGUgYWJzb2x1dGUgdmFsdWUgdG8gaW5kZXggdGhlIHJldGFpbmVkIG9iamVjdFxuICAgICAgICAgICAgcmV0dXJuIE1hdGguYWJzKHRoaXMud29ya2VyLnRocmVhZElkKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTm8gY2hpbGQgcHJvY2VzcyBvciB3b3JrZXIgdGhyZWFkJyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IGV4aXRDb2RlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZXhpdENvZGU7XG4gICAgfVxuICAgIGdldCBzaWduYWxDb2RlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fc2lnbmFsQ29kZTtcbiAgICB9XG4gICAgZ2V0IGtpbGxlZCgpIHtcbiAgICAgICAgaWYgKHRoaXMuY2hpbGRQcm9jZXNzKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jaGlsZFByb2Nlc3Mua2lsbGVkO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9raWxsZWQ7XG4gICAgfVxuICAgIGFzeW5jIGluaXQoKSB7XG4gICAgICAgIGNvbnN0IGV4ZWNBcmd2ID0gYXdhaXQgY29udmVydEV4ZWNBcmd2KHByb2Nlc3MuZXhlY0FyZ3YpO1xuICAgICAgICBsZXQgcGFyZW50O1xuICAgICAgICBpZiAodGhpcy5vcHRzLnVzZVdvcmtlclRocmVhZHMpIHtcbiAgICAgICAgICAgIHRoaXMud29ya2VyID0gcGFyZW50ID0gbmV3IHdvcmtlcl90aHJlYWRzXzEuV29ya2VyKHRoaXMubWFpbkZpbGUsIE9iamVjdC5hc3NpZ24oeyBleGVjQXJndiwgc3RkaW46IHRydWUsIHN0ZG91dDogdHJ1ZSwgc3RkZXJyOiB0cnVlIH0sICh0aGlzLm9wdHMud29ya2VyVGhyZWFkc09wdGlvbnNcbiAgICAgICAgICAgICAgICA/IHRoaXMub3B0cy53b3JrZXJUaHJlYWRzT3B0aW9uc1xuICAgICAgICAgICAgICAgIDoge30pKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmNoaWxkUHJvY2VzcyA9IHBhcmVudCA9ICgwLCBjaGlsZF9wcm9jZXNzXzEuZm9yaykodGhpcy5tYWluRmlsZSwgW10sIE9iamVjdC5hc3NpZ24oeyBleGVjQXJndiwgc3RkaW86ICdwaXBlJyB9LCAodGhpcy5vcHRzLndvcmtlckZvcmtPcHRpb25zID8gdGhpcy5vcHRzLndvcmtlckZvcmtPcHRpb25zIDoge30pKSk7XG4gICAgICAgIH1cbiAgICAgICAgcGFyZW50Lm9uKCdleGl0JywgKGV4aXRDb2RlLCBzaWduYWxDb2RlKSA9PiB7XG4gICAgICAgICAgICB0aGlzLl9leGl0Q29kZSA9IGV4aXRDb2RlO1xuICAgICAgICAgICAgLy8gQ29lcmNlIHRvIG51bGwgaWYgdW5kZWZpbmVkIGZvciBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eVxuICAgICAgICAgICAgc2lnbmFsQ29kZSA9IHR5cGVvZiBzaWduYWxDb2RlID09PSAndW5kZWZpbmVkJyA/IG51bGwgOiBzaWduYWxDb2RlO1xuICAgICAgICAgICAgdGhpcy5fc2lnbmFsQ29kZSA9IHNpZ25hbENvZGU7XG4gICAgICAgICAgICB0aGlzLl9raWxsZWQgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5lbWl0KCdleGl0JywgZXhpdENvZGUsIHNpZ25hbENvZGUpO1xuICAgICAgICAgICAgLy8gQ2xlYW4gYWxsIGxpc3RlbmVycywgd2UgZG8gbm90IGV4cGVjdCBhbnkgbW9yZSBldmVudHMgYWZ0ZXIgXCJleGl0XCJcbiAgICAgICAgICAgIHBhcmVudC5yZW1vdmVBbGxMaXN0ZW5lcnMoKTtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlQWxsTGlzdGVuZXJzKCk7XG4gICAgICAgIH0pO1xuICAgICAgICBwYXJlbnQub24oJ2Vycm9yJywgKC4uLmFyZ3MpID0+IHRoaXMuZW1pdCgnZXJyb3InLCAuLi5hcmdzKSk7XG4gICAgICAgIHBhcmVudC5vbignbWVzc2FnZScsICguLi5hcmdzKSA9PiB0aGlzLmVtaXQoJ21lc3NhZ2UnLCAuLi5hcmdzKSk7XG4gICAgICAgIHBhcmVudC5vbignY2xvc2UnLCAoLi4uYXJncykgPT4gdGhpcy5lbWl0KCdjbG9zZScsIC4uLmFyZ3MpKTtcbiAgICAgICAgcGFyZW50LnN0ZG91dC5waXBlKHByb2Nlc3Muc3Rkb3V0KTtcbiAgICAgICAgcGFyZW50LnN0ZGVyci5waXBlKHByb2Nlc3Muc3RkZXJyKTtcbiAgICAgICAgYXdhaXQgdGhpcy5pbml0Q2hpbGQoKTtcbiAgICB9XG4gICAgYXN5bmMgc2VuZChtc2cpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLmNoaWxkUHJvY2Vzcykge1xuICAgICAgICAgICAgICAgIHRoaXMuY2hpbGRQcm9jZXNzLnNlbmQobXNnLCAoZXJyKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChlcnIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0aGlzLndvcmtlcikge1xuICAgICAgICAgICAgICAgIHJlc29sdmUodGhpcy53b3JrZXIucG9zdE1lc3NhZ2UobXNnKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBraWxsUHJvY2VzcyhzaWduYWwgPSAnU0lHS0lMTCcpIHtcbiAgICAgICAgaWYgKHRoaXMuY2hpbGRQcm9jZXNzKSB7XG4gICAgICAgICAgICB0aGlzLmNoaWxkUHJvY2Vzcy5raWxsKHNpZ25hbCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy53b3JrZXIpIHtcbiAgICAgICAgICAgIHRoaXMud29ya2VyLnRlcm1pbmF0ZSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIGtpbGwoc2lnbmFsID0gJ1NJR0tJTEwnLCB0aW1lb3V0TXMpIHtcbiAgICAgICAgaWYgKHRoaXMuaGFzUHJvY2Vzc0V4aXRlZCgpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgb25FeGl0ID0gb25FeGl0T25jZSh0aGlzLmNoaWxkUHJvY2VzcyB8fCB0aGlzLndvcmtlcik7XG4gICAgICAgIHRoaXMua2lsbFByb2Nlc3Moc2lnbmFsKTtcbiAgICAgICAgaWYgKHRpbWVvdXRNcyAhPT0gdW5kZWZpbmVkICYmICh0aW1lb3V0TXMgPT09IDAgfHwgaXNGaW5pdGUodGltZW91dE1zKSkpIHtcbiAgICAgICAgICAgIGNvbnN0IHRpbWVvdXRIYW5kbGUgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuaGFzUHJvY2Vzc0V4aXRlZCgpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMua2lsbFByb2Nlc3MoJ1NJR0tJTEwnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCB0aW1lb3V0TXMpO1xuICAgICAgICAgICAgYXdhaXQgb25FeGl0O1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRIYW5kbGUpO1xuICAgICAgICB9XG4gICAgICAgIGF3YWl0IG9uRXhpdDtcbiAgICB9XG4gICAgYXN5bmMgaW5pdENoaWxkKCkge1xuICAgICAgICBjb25zdCBvbkNvbXBsZXRlID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgb25NZXNzYWdlSGFuZGxlciA9IChtc2cpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAobXNnLmNtZCA9PT0gZW51bXNfMS5QYXJlbnRDb21tYW5kLkluaXRDb21wbGV0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChtc2cuY21kID09PSBlbnVtc18xLlBhcmVudENvbW1hbmQuSW5pdEZhaWxlZCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBlcnIgPSBuZXcgRXJyb3IoKTtcbiAgICAgICAgICAgICAgICAgICAgZXJyLnN0YWNrID0gbXNnLmVyci5zdGFjaztcbiAgICAgICAgICAgICAgICAgICAgZXJyLm1lc3NhZ2UgPSBtc2cuZXJyLm1lc3NhZ2U7XG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChlcnIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLm9mZignbWVzc2FnZScsIG9uTWVzc2FnZUhhbmRsZXIpO1xuICAgICAgICAgICAgICAgIHRoaXMub2ZmKCdjbG9zZScsIG9uQ2xvc2VIYW5kbGVyKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCBvbkNsb3NlSGFuZGxlciA9IChjb2RlLCBzaWduYWwpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoY29kZSA+IDEyOCkge1xuICAgICAgICAgICAgICAgICAgICBjb2RlIC09IDEyODtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgbXNnID0gZXhpdENvZGVzRXJyb3JzW2NvZGVdIHx8IGBVbmtub3duIGV4aXQgY29kZSAke2NvZGV9YDtcbiAgICAgICAgICAgICAgICByZWplY3QobmV3IEVycm9yKGBFcnJvciBpbml0aWFsaXppbmcgY2hpbGQ6ICR7bXNnfSBhbmQgc2lnbmFsICR7c2lnbmFsfWApKTtcbiAgICAgICAgICAgICAgICB0aGlzLm9mZignbWVzc2FnZScsIG9uTWVzc2FnZUhhbmRsZXIpO1xuICAgICAgICAgICAgICAgIHRoaXMub2ZmKCdjbG9zZScsIG9uQ2xvc2VIYW5kbGVyKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLm9uKCdtZXNzYWdlJywgb25NZXNzYWdlSGFuZGxlcik7XG4gICAgICAgICAgICB0aGlzLm9uKCdjbG9zZScsIG9uQ2xvc2VIYW5kbGVyKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGF3YWl0IHRoaXMuc2VuZCh7XG4gICAgICAgICAgICBjbWQ6IGVudW1zXzEuQ2hpbGRDb21tYW5kLkluaXQsXG4gICAgICAgICAgICB2YWx1ZTogdGhpcy5wcm9jZXNzRmlsZSxcbiAgICAgICAgfSk7XG4gICAgICAgIGF3YWl0IG9uQ29tcGxldGU7XG4gICAgfVxuICAgIGhhc1Byb2Nlc3NFeGl0ZWQoKSB7XG4gICAgICAgIHJldHVybiAhISh0aGlzLmV4aXRDb2RlICE9PSBudWxsIHx8IHRoaXMuc2lnbmFsQ29kZSk7XG4gICAgfVxufVxuZXhwb3J0cy5DaGlsZCA9IENoaWxkO1xuZnVuY3Rpb24gb25FeGl0T25jZShjaGlsZCkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgICAgY2hpbGQub25jZSgnZXhpdCcsICgpID0+IHJlc29sdmUoKSk7XG4gICAgfSk7XG59XG5jb25zdCBnZXRGcmVlUG9ydCA9IGFzeW5jICgpID0+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICAgIGNvbnN0IHNlcnZlciA9ICgwLCBuZXRfMS5jcmVhdGVTZXJ2ZXIpKCk7XG4gICAgICAgIHNlcnZlci5saXN0ZW4oMCwgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgeyBwb3J0IH0gPSBzZXJ2ZXIuYWRkcmVzcygpO1xuICAgICAgICAgICAgc2VydmVyLmNsb3NlKCgpID0+IHJlc29sdmUocG9ydCkpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbn07XG5jb25zdCBjb252ZXJ0RXhlY0FyZ3YgPSBhc3luYyAoZXhlY0FyZ3YpID0+IHtcbiAgICBjb25zdCBzdGFuZGFyZCA9IFtdO1xuICAgIGNvbnN0IGNvbnZlcnRlZEFyZ3MgPSBbXTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGV4ZWNBcmd2Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGFyZyA9IGV4ZWNBcmd2W2ldO1xuICAgICAgICBpZiAoYXJnLmluZGV4T2YoJy0taW5zcGVjdCcpID09PSAtMSkge1xuICAgICAgICAgICAgc3RhbmRhcmQucHVzaChhcmcpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgYXJnTmFtZSA9IGFyZy5zcGxpdCgnPScpWzBdO1xuICAgICAgICAgICAgY29uc3QgcG9ydCA9IGF3YWl0IGdldEZyZWVQb3J0KCk7XG4gICAgICAgICAgICBjb252ZXJ0ZWRBcmdzLnB1c2goYCR7YXJnTmFtZX09JHtwb3J0fWApO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBzdGFuZGFyZC5jb25jYXQoY29udmVydGVkQXJncyk7XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y2hpbGQuanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiQ2hpbGQiLCJjaGlsZF9wcm9jZXNzXzEiLCJyZXF1aXJlIiwibmV0XzEiLCJ3b3JrZXJfdGhyZWFkc18xIiwiZW51bXNfMSIsImV2ZW50c18xIiwiZXhpdENvZGVzRXJyb3JzIiwiRXZlbnRFbWl0dGVyIiwiY29uc3RydWN0b3IiLCJtYWluRmlsZSIsInByb2Nlc3NGaWxlIiwib3B0cyIsInVzZVdvcmtlclRocmVhZHMiLCJfZXhpdENvZGUiLCJfc2lnbmFsQ29kZSIsIl9raWxsZWQiLCJwaWQiLCJjaGlsZFByb2Nlc3MiLCJ3b3JrZXIiLCJNYXRoIiwiYWJzIiwidGhyZWFkSWQiLCJFcnJvciIsImV4aXRDb2RlIiwic2lnbmFsQ29kZSIsImtpbGxlZCIsImluaXQiLCJleGVjQXJndiIsImNvbnZlcnRFeGVjQXJndiIsInByb2Nlc3MiLCJwYXJlbnQiLCJXb3JrZXIiLCJhc3NpZ24iLCJzdGRpbiIsInN0ZG91dCIsInN0ZGVyciIsIndvcmtlclRocmVhZHNPcHRpb25zIiwiZm9yayIsInN0ZGlvIiwid29ya2VyRm9ya09wdGlvbnMiLCJvbiIsImVtaXQiLCJyZW1vdmVBbGxMaXN0ZW5lcnMiLCJhcmdzIiwicGlwZSIsImluaXRDaGlsZCIsInNlbmQiLCJtc2ciLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsImVyciIsInBvc3RNZXNzYWdlIiwia2lsbFByb2Nlc3MiLCJzaWduYWwiLCJraWxsIiwidGVybWluYXRlIiwidGltZW91dE1zIiwiaGFzUHJvY2Vzc0V4aXRlZCIsIm9uRXhpdCIsIm9uRXhpdE9uY2UiLCJ1bmRlZmluZWQiLCJpc0Zpbml0ZSIsInRpbWVvdXRIYW5kbGUiLCJzZXRUaW1lb3V0IiwiY2xlYXJUaW1lb3V0Iiwib25Db21wbGV0ZSIsIm9uTWVzc2FnZUhhbmRsZXIiLCJjbWQiLCJQYXJlbnRDb21tYW5kIiwiSW5pdENvbXBsZXRlZCIsIkluaXRGYWlsZWQiLCJzdGFjayIsIm1lc3NhZ2UiLCJvZmYiLCJvbkNsb3NlSGFuZGxlciIsImNvZGUiLCJDaGlsZENvbW1hbmQiLCJJbml0IiwiY2hpbGQiLCJvbmNlIiwiZ2V0RnJlZVBvcnQiLCJzZXJ2ZXIiLCJjcmVhdGVTZXJ2ZXIiLCJsaXN0ZW4iLCJwb3J0IiwiYWRkcmVzcyIsImNsb3NlIiwic3RhbmRhcmQiLCJjb252ZXJ0ZWRBcmdzIiwiaSIsImxlbmd0aCIsImFyZyIsImluZGV4T2YiLCJwdXNoIiwiYXJnTmFtZSIsInNwbGl0IiwiY29uY2F0Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/classes/child.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/classes/errors/delayed-error.js":
/*!**********************************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/classes/errors/delayed-error.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.DelayedError = exports.DELAYED_ERROR = void 0;\nexports.DELAYED_ERROR = \"bullmq:movedToDelayed\";\n/**\n * DelayedError\n *\n * Error to be thrown when job is moved to delayed state\n * from job in active state.\n *\n */ class DelayedError extends Error {\n    constructor(message = exports.DELAYED_ERROR){\n        super(message);\n        this.name = this.constructor.name;\n        Object.setPrototypeOf(this, new.target.prototype);\n    }\n}\nexports.DelayedError = DelayedError; //# sourceMappingURL=delayed-error.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL2NsYXNzZXMvZXJyb3JzL2RlbGF5ZWQtZXJyb3IuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELG9CQUFvQixHQUFHQSxxQkFBcUIsR0FBRyxLQUFLO0FBQ3BEQSxxQkFBcUIsR0FBRztBQUN4Qjs7Ozs7O0NBTUMsR0FDRCxNQUFNRSxxQkFBcUJFO0lBQ3ZCQyxZQUFZQyxVQUFVTixRQUFRRyxhQUFhLENBQUU7UUFDekMsS0FBSyxDQUFDRztRQUNOLElBQUksQ0FBQ0MsSUFBSSxHQUFHLElBQUksQ0FBQ0YsV0FBVyxDQUFDRSxJQUFJO1FBQ2pDVCxPQUFPVSxjQUFjLENBQUMsSUFBSSxFQUFFLFdBQVdDLFNBQVM7SUFDcEQ7QUFDSjtBQUNBVCxvQkFBb0IsR0FBR0UsY0FDdkIseUNBQXlDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb25seWZhbnMtcGxhdGZvcm0vLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL2NsYXNzZXMvZXJyb3JzL2RlbGF5ZWQtZXJyb3IuanM/MmQ1YyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuRGVsYXllZEVycm9yID0gZXhwb3J0cy5ERUxBWUVEX0VSUk9SID0gdm9pZCAwO1xuZXhwb3J0cy5ERUxBWUVEX0VSUk9SID0gJ2J1bGxtcTptb3ZlZFRvRGVsYXllZCc7XG4vKipcbiAqIERlbGF5ZWRFcnJvclxuICpcbiAqIEVycm9yIHRvIGJlIHRocm93biB3aGVuIGpvYiBpcyBtb3ZlZCB0byBkZWxheWVkIHN0YXRlXG4gKiBmcm9tIGpvYiBpbiBhY3RpdmUgc3RhdGUuXG4gKlxuICovXG5jbGFzcyBEZWxheWVkRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZSA9IGV4cG9ydHMuREVMQVlFRF9FUlJPUikge1xuICAgICAgICBzdXBlcihtZXNzYWdlKTtcbiAgICAgICAgdGhpcy5uYW1lID0gdGhpcy5jb25zdHJ1Y3Rvci5uYW1lO1xuICAgICAgICBPYmplY3Quc2V0UHJvdG90eXBlT2YodGhpcywgbmV3LnRhcmdldC5wcm90b3R5cGUpO1xuICAgIH1cbn1cbmV4cG9ydHMuRGVsYXllZEVycm9yID0gRGVsYXllZEVycm9yO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGVsYXllZC1lcnJvci5qcy5tYXAiXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJEZWxheWVkRXJyb3IiLCJERUxBWUVEX0VSUk9SIiwiRXJyb3IiLCJjb25zdHJ1Y3RvciIsIm1lc3NhZ2UiLCJuYW1lIiwic2V0UHJvdG90eXBlT2YiLCJwcm90b3R5cGUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/classes/errors/delayed-error.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/classes/errors/index.js":
/*!**************************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/classes/errors/index.js ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nconst tslib_1 = __webpack_require__(/*! tslib */ \"(rsc)/./node_modules/tslib/tslib.es6.mjs\");\ntslib_1.__exportStar(__webpack_require__(/*! ./delayed-error */ \"(rsc)/./node_modules/bullmq/dist/cjs/classes/errors/delayed-error.js\"), exports);\ntslib_1.__exportStar(__webpack_require__(/*! ./rate-limit-error */ \"(rsc)/./node_modules/bullmq/dist/cjs/classes/errors/rate-limit-error.js\"), exports);\ntslib_1.__exportStar(__webpack_require__(/*! ./unrecoverable-error */ \"(rsc)/./node_modules/bullmq/dist/cjs/classes/errors/unrecoverable-error.js\"), exports);\ntslib_1.__exportStar(__webpack_require__(/*! ./waiting-children-error */ \"(rsc)/./node_modules/bullmq/dist/cjs/classes/errors/waiting-children-error.js\"), exports);\ntslib_1.__exportStar(__webpack_require__(/*! ./waiting-error */ \"(rsc)/./node_modules/bullmq/dist/cjs/classes/errors/waiting-error.js\"), exports); //# sourceMappingURL=index.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL2NsYXNzZXMvZXJyb3JzL2luZGV4LmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdELE1BQU1DLFVBQVVDLG1CQUFPQSxDQUFDLHVEQUFPO0FBQy9CRCxRQUFRRSxZQUFZLENBQUNELG1CQUFPQSxDQUFDLDZGQUFpQixHQUFHSDtBQUNqREUsUUFBUUUsWUFBWSxDQUFDRCxtQkFBT0EsQ0FBQyxtR0FBb0IsR0FBR0g7QUFDcERFLFFBQVFFLFlBQVksQ0FBQ0QsbUJBQU9BLENBQUMseUdBQXVCLEdBQUdIO0FBQ3ZERSxRQUFRRSxZQUFZLENBQUNELG1CQUFPQSxDQUFDLCtHQUEwQixHQUFHSDtBQUMxREUsUUFBUUUsWUFBWSxDQUFDRCxtQkFBT0EsQ0FBQyw2RkFBaUIsR0FBR0gsVUFDakQsaUNBQWlDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb25seWZhbnMtcGxhdGZvcm0vLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL2NsYXNzZXMvZXJyb3JzL2luZGV4LmpzP2MwNDEiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5jb25zdCB0c2xpYl8xID0gcmVxdWlyZShcInRzbGliXCIpO1xudHNsaWJfMS5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vZGVsYXllZC1lcnJvclwiKSwgZXhwb3J0cyk7XG50c2xpYl8xLl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi9yYXRlLWxpbWl0LWVycm9yXCIpLCBleHBvcnRzKTtcbnRzbGliXzEuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL3VucmVjb3ZlcmFibGUtZXJyb3JcIiksIGV4cG9ydHMpO1xudHNsaWJfMS5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vd2FpdGluZy1jaGlsZHJlbi1lcnJvclwiKSwgZXhwb3J0cyk7XG50c2xpYl8xLl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi93YWl0aW5nLWVycm9yXCIpLCBleHBvcnRzKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsInRzbGliXzEiLCJyZXF1aXJlIiwiX19leHBvcnRTdGFyIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/classes/errors/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/classes/errors/rate-limit-error.js":
/*!*************************************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/classes/errors/rate-limit-error.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.RateLimitError = exports.RATE_LIMIT_ERROR = void 0;\nexports.RATE_LIMIT_ERROR = \"bullmq:rateLimitExceeded\";\n/**\n * RateLimitError\n *\n * Error to be thrown when queue reaches a rate limit.\n *\n */ class RateLimitError extends Error {\n    constructor(message = exports.RATE_LIMIT_ERROR){\n        super(message);\n        this.name = this.constructor.name;\n        Object.setPrototypeOf(this, new.target.prototype);\n    }\n}\nexports.RateLimitError = RateLimitError; //# sourceMappingURL=rate-limit-error.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL2NsYXNzZXMvZXJyb3JzL3JhdGUtbGltaXQtZXJyb3IuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELHNCQUFzQixHQUFHQSx3QkFBd0IsR0FBRyxLQUFLO0FBQ3pEQSx3QkFBd0IsR0FBRztBQUMzQjs7Ozs7Q0FLQyxHQUNELE1BQU1FLHVCQUF1QkU7SUFDekJDLFlBQVlDLFVBQVVOLFFBQVFHLGdCQUFnQixDQUFFO1FBQzVDLEtBQUssQ0FBQ0c7UUFDTixJQUFJLENBQUNDLElBQUksR0FBRyxJQUFJLENBQUNGLFdBQVcsQ0FBQ0UsSUFBSTtRQUNqQ1QsT0FBT1UsY0FBYyxDQUFDLElBQUksRUFBRSxXQUFXQyxTQUFTO0lBQ3BEO0FBQ0o7QUFDQVQsc0JBQXNCLEdBQUdFLGdCQUN6Qiw0Q0FBNEMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vbmx5ZmFucy1wbGF0Zm9ybS8uL25vZGVfbW9kdWxlcy9idWxsbXEvZGlzdC9janMvY2xhc3Nlcy9lcnJvcnMvcmF0ZS1saW1pdC1lcnJvci5qcz9iYzNmIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5SYXRlTGltaXRFcnJvciA9IGV4cG9ydHMuUkFURV9MSU1JVF9FUlJPUiA9IHZvaWQgMDtcbmV4cG9ydHMuUkFURV9MSU1JVF9FUlJPUiA9ICdidWxsbXE6cmF0ZUxpbWl0RXhjZWVkZWQnO1xuLyoqXG4gKiBSYXRlTGltaXRFcnJvclxuICpcbiAqIEVycm9yIHRvIGJlIHRocm93biB3aGVuIHF1ZXVlIHJlYWNoZXMgYSByYXRlIGxpbWl0LlxuICpcbiAqL1xuY2xhc3MgUmF0ZUxpbWl0RXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZSA9IGV4cG9ydHMuUkFURV9MSU1JVF9FUlJPUikge1xuICAgICAgICBzdXBlcihtZXNzYWdlKTtcbiAgICAgICAgdGhpcy5uYW1lID0gdGhpcy5jb25zdHJ1Y3Rvci5uYW1lO1xuICAgICAgICBPYmplY3Quc2V0UHJvdG90eXBlT2YodGhpcywgbmV3LnRhcmdldC5wcm90b3R5cGUpO1xuICAgIH1cbn1cbmV4cG9ydHMuUmF0ZUxpbWl0RXJyb3IgPSBSYXRlTGltaXRFcnJvcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJhdGUtbGltaXQtZXJyb3IuanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiUmF0ZUxpbWl0RXJyb3IiLCJSQVRFX0xJTUlUX0VSUk9SIiwiRXJyb3IiLCJjb25zdHJ1Y3RvciIsIm1lc3NhZ2UiLCJuYW1lIiwic2V0UHJvdG90eXBlT2YiLCJwcm90b3R5cGUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/classes/errors/rate-limit-error.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/classes/errors/unrecoverable-error.js":
/*!****************************************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/classes/errors/unrecoverable-error.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.UnrecoverableError = exports.UNRECOVERABLE_ERROR = void 0;\nexports.UNRECOVERABLE_ERROR = \"bullmq:unrecoverable\";\n/**\n * UnrecoverableError\n *\n * Error to move a job to failed even if the attemptsMade\n * are lower than the expected limit.\n *\n */ class UnrecoverableError extends Error {\n    constructor(message = exports.UNRECOVERABLE_ERROR){\n        super(message);\n        this.name = this.constructor.name;\n        Object.setPrototypeOf(this, new.target.prototype);\n    }\n}\nexports.UnrecoverableError = UnrecoverableError; //# sourceMappingURL=unrecoverable-error.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL2NsYXNzZXMvZXJyb3JzL3VucmVjb3ZlcmFibGUtZXJyb3IuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELDBCQUEwQixHQUFHQSwyQkFBMkIsR0FBRyxLQUFLO0FBQ2hFQSwyQkFBMkIsR0FBRztBQUM5Qjs7Ozs7O0NBTUMsR0FDRCxNQUFNRSwyQkFBMkJFO0lBQzdCQyxZQUFZQyxVQUFVTixRQUFRRyxtQkFBbUIsQ0FBRTtRQUMvQyxLQUFLLENBQUNHO1FBQ04sSUFBSSxDQUFDQyxJQUFJLEdBQUcsSUFBSSxDQUFDRixXQUFXLENBQUNFLElBQUk7UUFDakNULE9BQU9VLGNBQWMsQ0FBQyxJQUFJLEVBQUUsV0FBV0MsU0FBUztJQUNwRDtBQUNKO0FBQ0FULDBCQUEwQixHQUFHRSxvQkFDN0IsK0NBQStDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb25seWZhbnMtcGxhdGZvcm0vLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL2NsYXNzZXMvZXJyb3JzL3VucmVjb3ZlcmFibGUtZXJyb3IuanM/ZjBkZiJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuVW5yZWNvdmVyYWJsZUVycm9yID0gZXhwb3J0cy5VTlJFQ09WRVJBQkxFX0VSUk9SID0gdm9pZCAwO1xuZXhwb3J0cy5VTlJFQ09WRVJBQkxFX0VSUk9SID0gJ2J1bGxtcTp1bnJlY292ZXJhYmxlJztcbi8qKlxuICogVW5yZWNvdmVyYWJsZUVycm9yXG4gKlxuICogRXJyb3IgdG8gbW92ZSBhIGpvYiB0byBmYWlsZWQgZXZlbiBpZiB0aGUgYXR0ZW1wdHNNYWRlXG4gKiBhcmUgbG93ZXIgdGhhbiB0aGUgZXhwZWN0ZWQgbGltaXQuXG4gKlxuICovXG5jbGFzcyBVbnJlY292ZXJhYmxlRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZSA9IGV4cG9ydHMuVU5SRUNPVkVSQUJMRV9FUlJPUikge1xuICAgICAgICBzdXBlcihtZXNzYWdlKTtcbiAgICAgICAgdGhpcy5uYW1lID0gdGhpcy5jb25zdHJ1Y3Rvci5uYW1lO1xuICAgICAgICBPYmplY3Quc2V0UHJvdG90eXBlT2YodGhpcywgbmV3LnRhcmdldC5wcm90b3R5cGUpO1xuICAgIH1cbn1cbmV4cG9ydHMuVW5yZWNvdmVyYWJsZUVycm9yID0gVW5yZWNvdmVyYWJsZUVycm9yO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dW5yZWNvdmVyYWJsZS1lcnJvci5qcy5tYXAiXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJVbnJlY292ZXJhYmxlRXJyb3IiLCJVTlJFQ09WRVJBQkxFX0VSUk9SIiwiRXJyb3IiLCJjb25zdHJ1Y3RvciIsIm1lc3NhZ2UiLCJuYW1lIiwic2V0UHJvdG90eXBlT2YiLCJwcm90b3R5cGUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/classes/errors/unrecoverable-error.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/classes/errors/waiting-children-error.js":
/*!*******************************************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/classes/errors/waiting-children-error.js ***!
  \*******************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.WaitingChildrenError = exports.WAITING_CHILDREN_ERROR = void 0;\nexports.WAITING_CHILDREN_ERROR = \"bullmq:movedToWaitingChildren\";\n/**\n * WaitingChildrenError\n *\n * Error to be thrown when job is moved to waiting-children state\n * from job in active state.\n *\n */ class WaitingChildrenError extends Error {\n    constructor(message = exports.WAITING_CHILDREN_ERROR){\n        super(message);\n        this.name = this.constructor.name;\n        Object.setPrototypeOf(this, new.target.prototype);\n    }\n}\nexports.WaitingChildrenError = WaitingChildrenError; //# sourceMappingURL=waiting-children-error.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL2NsYXNzZXMvZXJyb3JzL3dhaXRpbmctY2hpbGRyZW4tZXJyb3IuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELDRCQUE0QixHQUFHQSw4QkFBOEIsR0FBRyxLQUFLO0FBQ3JFQSw4QkFBOEIsR0FBRztBQUNqQzs7Ozs7O0NBTUMsR0FDRCxNQUFNRSw2QkFBNkJFO0lBQy9CQyxZQUFZQyxVQUFVTixRQUFRRyxzQkFBc0IsQ0FBRTtRQUNsRCxLQUFLLENBQUNHO1FBQ04sSUFBSSxDQUFDQyxJQUFJLEdBQUcsSUFBSSxDQUFDRixXQUFXLENBQUNFLElBQUk7UUFDakNULE9BQU9VLGNBQWMsQ0FBQyxJQUFJLEVBQUUsV0FBV0MsU0FBUztJQUNwRDtBQUNKO0FBQ0FULDRCQUE0QixHQUFHRSxzQkFDL0Isa0RBQWtEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb25seWZhbnMtcGxhdGZvcm0vLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL2NsYXNzZXMvZXJyb3JzL3dhaXRpbmctY2hpbGRyZW4tZXJyb3IuanM/ZTQyZCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuV2FpdGluZ0NoaWxkcmVuRXJyb3IgPSBleHBvcnRzLldBSVRJTkdfQ0hJTERSRU5fRVJST1IgPSB2b2lkIDA7XG5leHBvcnRzLldBSVRJTkdfQ0hJTERSRU5fRVJST1IgPSAnYnVsbG1xOm1vdmVkVG9XYWl0aW5nQ2hpbGRyZW4nO1xuLyoqXG4gKiBXYWl0aW5nQ2hpbGRyZW5FcnJvclxuICpcbiAqIEVycm9yIHRvIGJlIHRocm93biB3aGVuIGpvYiBpcyBtb3ZlZCB0byB3YWl0aW5nLWNoaWxkcmVuIHN0YXRlXG4gKiBmcm9tIGpvYiBpbiBhY3RpdmUgc3RhdGUuXG4gKlxuICovXG5jbGFzcyBXYWl0aW5nQ2hpbGRyZW5FcnJvciBleHRlbmRzIEVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlID0gZXhwb3J0cy5XQUlUSU5HX0NISUxEUkVOX0VSUk9SKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UpO1xuICAgICAgICB0aGlzLm5hbWUgPSB0aGlzLmNvbnN0cnVjdG9yLm5hbWU7XG4gICAgICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZih0aGlzLCBuZXcudGFyZ2V0LnByb3RvdHlwZSk7XG4gICAgfVxufVxuZXhwb3J0cy5XYWl0aW5nQ2hpbGRyZW5FcnJvciA9IFdhaXRpbmdDaGlsZHJlbkVycm9yO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9d2FpdGluZy1jaGlsZHJlbi1lcnJvci5qcy5tYXAiXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJXYWl0aW5nQ2hpbGRyZW5FcnJvciIsIldBSVRJTkdfQ0hJTERSRU5fRVJST1IiLCJFcnJvciIsImNvbnN0cnVjdG9yIiwibWVzc2FnZSIsIm5hbWUiLCJzZXRQcm90b3R5cGVPZiIsInByb3RvdHlwZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/classes/errors/waiting-children-error.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/classes/errors/waiting-error.js":
/*!**********************************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/classes/errors/waiting-error.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.WaitingError = exports.WAITING_ERROR = void 0;\nexports.WAITING_ERROR = \"bullmq:movedToWait\";\n/**\n * WaitingError\n *\n * Error to be thrown when job is moved to wait or prioritized state\n * from job in active state.\n */ class WaitingError extends Error {\n    constructor(message = exports.WAITING_ERROR){\n        super(message);\n        this.name = this.constructor.name;\n        Object.setPrototypeOf(this, new.target.prototype);\n    }\n}\nexports.WaitingError = WaitingError; //# sourceMappingURL=waiting-error.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL2NsYXNzZXMvZXJyb3JzL3dhaXRpbmctZXJyb3IuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELG9CQUFvQixHQUFHQSxxQkFBcUIsR0FBRyxLQUFLO0FBQ3BEQSxxQkFBcUIsR0FBRztBQUN4Qjs7Ozs7Q0FLQyxHQUNELE1BQU1FLHFCQUFxQkU7SUFDdkJDLFlBQVlDLFVBQVVOLFFBQVFHLGFBQWEsQ0FBRTtRQUN6QyxLQUFLLENBQUNHO1FBQ04sSUFBSSxDQUFDQyxJQUFJLEdBQUcsSUFBSSxDQUFDRixXQUFXLENBQUNFLElBQUk7UUFDakNULE9BQU9VLGNBQWMsQ0FBQyxJQUFJLEVBQUUsV0FBV0MsU0FBUztJQUNwRDtBQUNKO0FBQ0FULG9CQUFvQixHQUFHRSxjQUN2Qix5Q0FBeUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vbmx5ZmFucy1wbGF0Zm9ybS8uL25vZGVfbW9kdWxlcy9idWxsbXEvZGlzdC9janMvY2xhc3Nlcy9lcnJvcnMvd2FpdGluZy1lcnJvci5qcz80ZWRiIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5XYWl0aW5nRXJyb3IgPSBleHBvcnRzLldBSVRJTkdfRVJST1IgPSB2b2lkIDA7XG5leHBvcnRzLldBSVRJTkdfRVJST1IgPSAnYnVsbG1xOm1vdmVkVG9XYWl0Jztcbi8qKlxuICogV2FpdGluZ0Vycm9yXG4gKlxuICogRXJyb3IgdG8gYmUgdGhyb3duIHdoZW4gam9iIGlzIG1vdmVkIHRvIHdhaXQgb3IgcHJpb3JpdGl6ZWQgc3RhdGVcbiAqIGZyb20gam9iIGluIGFjdGl2ZSBzdGF0ZS5cbiAqL1xuY2xhc3MgV2FpdGluZ0Vycm9yIGV4dGVuZHMgRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2UgPSBleHBvcnRzLldBSVRJTkdfRVJST1IpIHtcbiAgICAgICAgc3VwZXIobWVzc2FnZSk7XG4gICAgICAgIHRoaXMubmFtZSA9IHRoaXMuY29uc3RydWN0b3IubmFtZTtcbiAgICAgICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKHRoaXMsIG5ldy50YXJnZXQucHJvdG90eXBlKTtcbiAgICB9XG59XG5leHBvcnRzLldhaXRpbmdFcnJvciA9IFdhaXRpbmdFcnJvcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXdhaXRpbmctZXJyb3IuanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiV2FpdGluZ0Vycm9yIiwiV0FJVElOR19FUlJPUiIsIkVycm9yIiwiY29uc3RydWN0b3IiLCJtZXNzYWdlIiwibmFtZSIsInNldFByb3RvdHlwZU9mIiwicHJvdG90eXBlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/classes/errors/waiting-error.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/classes/flow-producer.js":
/*!***************************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/classes/flow-producer.js ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.FlowProducer = void 0;\nconst events_1 = __webpack_require__(/*! events */ \"events\");\nconst uuid_1 = __webpack_require__(/*! uuid */ \"(rsc)/./node_modules/uuid/dist/cjs/index.js\");\nconst utils_1 = __webpack_require__(/*! ../utils */ \"(rsc)/./node_modules/bullmq/dist/cjs/utils/index.js\");\nconst job_1 = __webpack_require__(/*! ./job */ \"(rsc)/./node_modules/bullmq/dist/cjs/classes/job.js\");\nconst queue_keys_1 = __webpack_require__(/*! ./queue-keys */ \"(rsc)/./node_modules/bullmq/dist/cjs/classes/queue-keys.js\");\nconst redis_connection_1 = __webpack_require__(/*! ./redis-connection */ \"(rsc)/./node_modules/bullmq/dist/cjs/classes/redis-connection.js\");\nconst enums_1 = __webpack_require__(/*! ../enums */ \"(rsc)/./node_modules/bullmq/dist/cjs/enums/index.js\");\n/**\n * This class allows to add jobs with dependencies between them in such\n * a way that it is possible to build complex flows.\n * Note: A flow is a tree-like structure of jobs that depend on each other.\n * Whenever the children of a given parent are completed, the parent\n * will be processed, being able to access the children's result data.\n * All Jobs can be in different queues, either children or parents,\n */ class FlowProducer extends events_1.EventEmitter {\n    constructor(opts = {\n        connection: {}\n    }, Connection = redis_connection_1.RedisConnection){\n        super();\n        this.opts = opts;\n        this.opts = Object.assign({\n            prefix: \"bull\"\n        }, opts);\n        this.connection = new Connection(opts.connection, {\n            shared: (0, utils_1.isRedisInstance)(opts.connection),\n            blocking: false,\n            skipVersionCheck: opts.skipVersionCheck,\n            skipWaitingForReady: opts.skipWaitingForReady\n        });\n        this.connection.on(\"error\", (error)=>this.emit(\"error\", error));\n        this.connection.on(\"close\", ()=>{\n            if (!this.closing) {\n                this.emit(\"ioredis:close\");\n            }\n        });\n        this.queueKeys = new queue_keys_1.QueueKeys(opts.prefix);\n        if (opts === null || opts === void 0 ? void 0 : opts.telemetry) {\n            this.telemetry = opts.telemetry;\n        }\n    }\n    emit(event, ...args) {\n        return super.emit(event, ...args);\n    }\n    off(eventName, listener) {\n        super.off(eventName, listener);\n        return this;\n    }\n    on(event, listener) {\n        super.on(event, listener);\n        return this;\n    }\n    once(event, listener) {\n        super.once(event, listener);\n        return this;\n    }\n    /**\n     * Returns a promise that resolves to a redis client. Normally used only by subclasses.\n     */ get client() {\n        return this.connection.client;\n    }\n    /**\n     * Helper to easily extend Job class calls.\n     */ get Job() {\n        return job_1.Job;\n    }\n    waitUntilReady() {\n        return this.client;\n    }\n    /**\n     * Adds a flow.\n     *\n     * This call would be atomic, either it fails and no jobs will\n     * be added to the queues, or it succeeds and all jobs will be added.\n     *\n     * @param flow - an object with a tree-like structure where children jobs\n     * will be processed before their parents.\n     * @param opts - options that will be applied to the flow object.\n     */ async add(flow, opts) {\n        var _a;\n        if (this.closing) {\n            return;\n        }\n        const client = await this.connection.client;\n        const multi = client.multi();\n        const parentOpts = (_a = flow === null || flow === void 0 ? void 0 : flow.opts) === null || _a === void 0 ? void 0 : _a.parent;\n        const parentKey = (0, utils_1.getParentKey)(parentOpts);\n        const parentDependenciesKey = parentKey ? `${parentKey}:dependencies` : undefined;\n        return (0, utils_1.trace)(this.telemetry, enums_1.SpanKind.PRODUCER, flow.queueName, \"addFlow\", flow.queueName, async (span)=>{\n            span === null || span === void 0 ? void 0 : span.setAttributes({\n                [enums_1.TelemetryAttributes.FlowName]: flow.name\n            });\n            const jobsTree = await this.addNode({\n                multi,\n                node: flow,\n                queuesOpts: opts === null || opts === void 0 ? void 0 : opts.queuesOptions,\n                parent: {\n                    parentOpts,\n                    parentDependenciesKey\n                }\n            });\n            await multi.exec();\n            return jobsTree;\n        });\n    }\n    /**\n     * Get a flow.\n     *\n     * @param opts - an object with options for getting a JobNode.\n     */ async getFlow(opts) {\n        if (this.closing) {\n            return;\n        }\n        const client = await this.connection.client;\n        const updatedOpts = Object.assign({\n            depth: 10,\n            maxChildren: 20,\n            prefix: this.opts.prefix\n        }, opts);\n        const jobsTree = this.getNode(client, updatedOpts);\n        return jobsTree;\n    }\n    /**\n     * Adds multiple flows.\n     *\n     * A flow is a tree-like structure of jobs that depend on each other.\n     * Whenever the children of a given parent are completed, the parent\n     * will be processed, being able to access the children's result data.\n     *\n     * All Jobs can be in different queues, either children or parents,\n     * however this call would be atomic, either it fails and no jobs will\n     * be added to the queues, or it succeeds and all jobs will be added.\n     *\n     * @param flows - an array of objects with a tree-like structure where children jobs\n     * will be processed before their parents.\n     */ async addBulk(flows) {\n        if (this.closing) {\n            return;\n        }\n        const client = await this.connection.client;\n        const multi = client.multi();\n        return (0, utils_1.trace)(this.telemetry, enums_1.SpanKind.PRODUCER, \"\", \"addBulkFlows\", \"\", async (span)=>{\n            span === null || span === void 0 ? void 0 : span.setAttributes({\n                [enums_1.TelemetryAttributes.BulkCount]: flows.length,\n                [enums_1.TelemetryAttributes.BulkNames]: flows.map((flow)=>flow.name).join(\",\")\n            });\n            const jobsTrees = await this.addNodes(multi, flows);\n            await multi.exec();\n            return jobsTrees;\n        });\n    }\n    /**\n     * Add a node (job) of a flow to the queue. This method will recursively\n     * add all its children as well. Note that a given job can potentially be\n     * a parent and a child job at the same time depending on where it is located\n     * in the tree hierarchy.\n     *\n     * @param multi - ioredis ChainableCommander\n     * @param node - the node representing a job to be added to some queue\n     * @param parent - parent data sent to children to create the \"links\" to their parent\n     * @returns\n     */ async addNode({ multi, node, parent, queuesOpts }) {\n        var _a, _b;\n        const prefix = node.prefix || this.opts.prefix;\n        const queue = this.queueFromNode(node, new queue_keys_1.QueueKeys(prefix), prefix);\n        const queueOpts = queuesOpts && queuesOpts[node.queueName];\n        const jobsOpts = (_a = queueOpts === null || queueOpts === void 0 ? void 0 : queueOpts.defaultJobOptions) !== null && _a !== void 0 ? _a : {};\n        const jobId = ((_b = node.opts) === null || _b === void 0 ? void 0 : _b.jobId) || (0, uuid_1.v4)();\n        return (0, utils_1.trace)(this.telemetry, enums_1.SpanKind.PRODUCER, node.queueName, \"addNode\", node.queueName, async (span, srcPropagationMedatada)=>{\n            var _a, _b;\n            span === null || span === void 0 ? void 0 : span.setAttributes({\n                [enums_1.TelemetryAttributes.JobName]: node.name,\n                [enums_1.TelemetryAttributes.JobId]: jobId\n            });\n            const opts = node.opts;\n            let telemetry = opts === null || opts === void 0 ? void 0 : opts.telemetry;\n            if (srcPropagationMedatada && opts) {\n                const omitContext = (_a = opts.telemetry) === null || _a === void 0 ? void 0 : _a.omitContext;\n                const telemetryMetadata = ((_b = opts.telemetry) === null || _b === void 0 ? void 0 : _b.metadata) || !omitContext && srcPropagationMedatada;\n                if (telemetryMetadata || omitContext) {\n                    telemetry = {\n                        metadata: telemetryMetadata,\n                        omitContext\n                    };\n                }\n            }\n            const job = new this.Job(queue, node.name, node.data, Object.assign(Object.assign(Object.assign({}, jobsOpts), opts), {\n                parent: parent === null || parent === void 0 ? void 0 : parent.parentOpts,\n                telemetry\n            }), jobId);\n            const parentKey = (0, utils_1.getParentKey)(parent === null || parent === void 0 ? void 0 : parent.parentOpts);\n            if (node.children && node.children.length > 0) {\n                // Create the parent job, it will be a job in status \"waiting-children\".\n                const parentId = jobId;\n                const queueKeysParent = new queue_keys_1.QueueKeys(node.prefix || this.opts.prefix);\n                await job.addJob(multi, {\n                    parentDependenciesKey: parent === null || parent === void 0 ? void 0 : parent.parentDependenciesKey,\n                    addToWaitingChildren: true,\n                    parentKey\n                });\n                const parentDependenciesKey = `${queueKeysParent.toKey(node.queueName, parentId)}:dependencies`;\n                const children = await this.addChildren({\n                    multi,\n                    nodes: node.children,\n                    parent: {\n                        parentOpts: {\n                            id: parentId,\n                            queue: queueKeysParent.getQueueQualifiedName(node.queueName)\n                        },\n                        parentDependenciesKey\n                    },\n                    queuesOpts\n                });\n                return {\n                    job,\n                    children\n                };\n            } else {\n                await job.addJob(multi, {\n                    parentDependenciesKey: parent === null || parent === void 0 ? void 0 : parent.parentDependenciesKey,\n                    parentKey\n                });\n                return {\n                    job\n                };\n            }\n        });\n    }\n    /**\n     * Adds nodes (jobs) of multiple flows to the queue. This method will recursively\n     * add all its children as well. Note that a given job can potentially be\n     * a parent and a child job at the same time depending on where it is located\n     * in the tree hierarchy.\n     *\n     * @param multi - ioredis ChainableCommander\n     * @param nodes - the nodes representing jobs to be added to some queue\n     * @returns\n     */ addNodes(multi, nodes) {\n        return Promise.all(nodes.map((node)=>{\n            var _a;\n            const parentOpts = (_a = node === null || node === void 0 ? void 0 : node.opts) === null || _a === void 0 ? void 0 : _a.parent;\n            const parentKey = (0, utils_1.getParentKey)(parentOpts);\n            const parentDependenciesKey = parentKey ? `${parentKey}:dependencies` : undefined;\n            return this.addNode({\n                multi,\n                node,\n                parent: {\n                    parentOpts,\n                    parentDependenciesKey\n                }\n            });\n        }));\n    }\n    async getNode(client, node) {\n        const queue = this.queueFromNode(node, new queue_keys_1.QueueKeys(node.prefix), node.prefix);\n        const job = await this.Job.fromId(queue, node.id);\n        if (job) {\n            const { processed = {}, unprocessed = [], failed = [], ignored = {} } = await job.getDependencies({\n                failed: {\n                    count: node.maxChildren\n                },\n                processed: {\n                    count: node.maxChildren\n                },\n                unprocessed: {\n                    count: node.maxChildren\n                },\n                ignored: {\n                    count: node.maxChildren\n                }\n            });\n            const processedKeys = Object.keys(processed);\n            const ignoredKeys = Object.keys(ignored);\n            const childrenCount = processedKeys.length + unprocessed.length + ignoredKeys.length + failed.length;\n            const newDepth = node.depth - 1;\n            if (childrenCount > 0 && newDepth) {\n                const children = await this.getChildren(client, [\n                    ...processedKeys,\n                    ...unprocessed,\n                    ...failed,\n                    ...ignoredKeys\n                ], newDepth, node.maxChildren);\n                return {\n                    job,\n                    children\n                };\n            } else {\n                return {\n                    job\n                };\n            }\n        }\n    }\n    addChildren({ multi, nodes, parent, queuesOpts }) {\n        return Promise.all(nodes.map((node)=>this.addNode({\n                multi,\n                node,\n                parent,\n                queuesOpts\n            })));\n    }\n    getChildren(client, childrenKeys, depth, maxChildren) {\n        const getChild = (key)=>{\n            const [prefix, queueName, id] = key.split(\":\");\n            return this.getNode(client, {\n                id,\n                queueName,\n                prefix,\n                depth,\n                maxChildren\n            });\n        };\n        return Promise.all([\n            ...childrenKeys.map(getChild)\n        ]);\n    }\n    /**\n     * Helper factory method that creates a queue-like object\n     * required to create jobs in any queue.\n     *\n     * @param node -\n     * @param queueKeys -\n     * @returns\n     */ queueFromNode(node, queueKeys, prefix) {\n        return {\n            client: this.connection.client,\n            name: node.queueName,\n            keys: queueKeys.getKeys(node.queueName),\n            toKey: (type)=>queueKeys.toKey(node.queueName, type),\n            opts: {\n                prefix,\n                connection: {}\n            },\n            qualifiedName: queueKeys.getQueueQualifiedName(node.queueName),\n            closing: this.closing,\n            waitUntilReady: async ()=>this.connection.client,\n            removeListener: this.removeListener.bind(this),\n            emit: this.emit.bind(this),\n            on: this.on.bind(this),\n            redisVersion: this.connection.redisVersion,\n            trace: async ()=>{}\n        };\n    }\n    /**\n     *\n     * Closes the connection and returns a promise that resolves when the connection is closed.\n     */ async close() {\n        if (!this.closing) {\n            this.closing = this.connection.close();\n        }\n        await this.closing;\n    }\n    /**\n     *\n     * Force disconnects a connection.\n     */ disconnect() {\n        return this.connection.disconnect();\n    }\n}\nexports.FlowProducer = FlowProducer; //# sourceMappingURL=flow-producer.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL2NsYXNzZXMvZmxvdy1wcm9kdWNlci5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsb0JBQW9CLEdBQUcsS0FBSztBQUM1QixNQUFNRyxXQUFXQyxtQkFBT0EsQ0FBQyxzQkFBUTtBQUNqQyxNQUFNQyxTQUFTRCxtQkFBT0EsQ0FBQyx5REFBTTtBQUM3QixNQUFNRSxVQUFVRixtQkFBT0EsQ0FBQyxxRUFBVTtBQUNsQyxNQUFNRyxRQUFRSCxtQkFBT0EsQ0FBQyxrRUFBTztBQUM3QixNQUFNSSxlQUFlSixtQkFBT0EsQ0FBQyxnRkFBYztBQUMzQyxNQUFNSyxxQkFBcUJMLG1CQUFPQSxDQUFDLDRGQUFvQjtBQUN2RCxNQUFNTSxVQUFVTixtQkFBT0EsQ0FBQyxxRUFBVTtBQUNsQzs7Ozs7OztDQU9DLEdBQ0QsTUFBTUYscUJBQXFCQyxTQUFTUSxZQUFZO0lBQzVDQyxZQUFZQyxPQUFPO1FBQUVDLFlBQVksQ0FBQztJQUFFLENBQUMsRUFBRUMsYUFBYU4sbUJBQW1CTyxlQUFlLENBQUU7UUFDcEYsS0FBSztRQUNMLElBQUksQ0FBQ0gsSUFBSSxHQUFHQTtRQUNaLElBQUksQ0FBQ0EsSUFBSSxHQUFHZixPQUFPbUIsTUFBTSxDQUFDO1lBQUVDLFFBQVE7UUFBTyxHQUFHTDtRQUM5QyxJQUFJLENBQUNDLFVBQVUsR0FBRyxJQUFJQyxXQUFXRixLQUFLQyxVQUFVLEVBQUU7WUFDOUNLLFFBQVEsQ0FBQyxHQUFHYixRQUFRYyxlQUFlLEVBQUVQLEtBQUtDLFVBQVU7WUFDcERPLFVBQVU7WUFDVkMsa0JBQWtCVCxLQUFLUyxnQkFBZ0I7WUFDdkNDLHFCQUFxQlYsS0FBS1UsbUJBQW1CO1FBQ2pEO1FBQ0EsSUFBSSxDQUFDVCxVQUFVLENBQUNVLEVBQUUsQ0FBQyxTQUFTLENBQUNDLFFBQVUsSUFBSSxDQUFDQyxJQUFJLENBQUMsU0FB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dEMrQyxPQUFPLENBQUN5QixPQUFTakcsVUFBVXdFLEtBQUssQ0FBQ3ZDLEtBQUtSLFNBQVMsRUFBRXdFO1lBQ2pEaEgsTUFBTTtnQkFBRUs7Z0JBQVFKLFlBQVksQ0FBQztZQUFFO1lBQy9CZ0gsZUFBZWxHLFVBQVU0RSxxQkFBcUIsQ0FBQzNDLEtBQUtSLFNBQVM7WUFDN0QxQixTQUFTLElBQUksQ0FBQ0EsT0FBTztZQUNyQlksZ0JBQWdCLFVBQVksSUFBSSxDQUFDekIsVUFBVSxDQUFDdUIsTUFBTTtZQUNsRDBGLGdCQUFnQixJQUFJLENBQUNBLGNBQWMsQ0FBQ0MsSUFBSSxDQUFDLElBQUk7WUFDN0N0RyxNQUFNLElBQUksQ0FBQ0EsSUFBSSxDQUFDc0csSUFBSSxDQUFDLElBQUk7WUFDekJ4RyxJQUFJLElBQUksQ0FBQ0EsRUFBRSxDQUFDd0csSUFBSSxDQUFDLElBQUk7WUFDckJDLGNBQWMsSUFBSSxDQUFDbkgsVUFBVSxDQUFDbUgsWUFBWTtZQUMxQy9FLE9BQU8sV0FBYztRQUN6QjtJQUNKO0lBQ0E7OztLQUdDLEdBQ0QsTUFBTWdGLFFBQVE7UUFDVixJQUFJLENBQUMsSUFBSSxDQUFDdkcsT0FBTyxFQUFFO1lBQ2YsSUFBSSxDQUFDQSxPQUFPLEdBQUcsSUFBSSxDQUFDYixVQUFVLENBQUNvSCxLQUFLO1FBQ3hDO1FBQ0EsTUFBTSxJQUFJLENBQUN2RyxPQUFPO0lBQ3RCO0lBQ0E7OztLQUdDLEdBQ0R3RyxhQUFhO1FBQ1QsT0FBTyxJQUFJLENBQUNySCxVQUFVLENBQUNxSCxVQUFVO0lBQ3JDO0FBQ0o7QUFDQW5JLG9CQUFvQixHQUFHRSxjQUN2Qix5Q0FBeUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vbmx5ZmFucy1wbGF0Zm9ybS8uL25vZGVfbW9kdWxlcy9idWxsbXEvZGlzdC9janMvY2xhc3Nlcy9mbG93LXByb2R1Y2VyLmpzPzk5ZDEiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkZsb3dQcm9kdWNlciA9IHZvaWQgMDtcbmNvbnN0IGV2ZW50c18xID0gcmVxdWlyZShcImV2ZW50c1wiKTtcbmNvbnN0IHV1aWRfMSA9IHJlcXVpcmUoXCJ1dWlkXCIpO1xuY29uc3QgdXRpbHNfMSA9IHJlcXVpcmUoXCIuLi91dGlsc1wiKTtcbmNvbnN0IGpvYl8xID0gcmVxdWlyZShcIi4vam9iXCIpO1xuY29uc3QgcXVldWVfa2V5c18xID0gcmVxdWlyZShcIi4vcXVldWUta2V5c1wiKTtcbmNvbnN0IHJlZGlzX2Nvbm5lY3Rpb25fMSA9IHJlcXVpcmUoXCIuL3JlZGlzLWNvbm5lY3Rpb25cIik7XG5jb25zdCBlbnVtc18xID0gcmVxdWlyZShcIi4uL2VudW1zXCIpO1xuLyoqXG4gKiBUaGlzIGNsYXNzIGFsbG93cyB0byBhZGQgam9icyB3aXRoIGRlcGVuZGVuY2llcyBiZXR3ZWVuIHRoZW0gaW4gc3VjaFxuICogYSB3YXkgdGhhdCBpdCBpcyBwb3NzaWJsZSB0byBidWlsZCBjb21wbGV4IGZsb3dzLlxuICogTm90ZTogQSBmbG93IGlzIGEgdHJlZS1saWtlIHN0cnVjdHVyZSBvZiBqb2JzIHRoYXQgZGVwZW5kIG9uIGVhY2ggb3RoZXIuXG4gKiBXaGVuZXZlciB0aGUgY2hpbGRyZW4gb2YgYSBnaXZlbiBwYXJlbnQgYXJlIGNvbXBsZXRlZCwgdGhlIHBhcmVudFxuICogd2lsbCBiZSBwcm9jZXNzZWQsIGJlaW5nIGFibGUgdG8gYWNjZXNzIHRoZSBjaGlsZHJlbidzIHJlc3VsdCBkYXRhLlxuICogQWxsIEpvYnMgY2FuIGJlIGluIGRpZmZlcmVudCBxdWV1ZXMsIGVpdGhlciBjaGlsZHJlbiBvciBwYXJlbnRzLFxuICovXG5jbGFzcyBGbG93UHJvZHVjZXIgZXh0ZW5kcyBldmVudHNfMS5FdmVudEVtaXR0ZXIge1xuICAgIGNvbnN0cnVjdG9yKG9wdHMgPSB7IGNvbm5lY3Rpb246IHt9IH0sIENvbm5lY3Rpb24gPSByZWRpc19jb25uZWN0aW9uXzEuUmVkaXNDb25uZWN0aW9uKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMub3B0cyA9IG9wdHM7XG4gICAgICAgIHRoaXMub3B0cyA9IE9iamVjdC5hc3NpZ24oeyBwcmVmaXg6ICdidWxsJyB9LCBvcHRzKTtcbiAgICAgICAgdGhpcy5jb25uZWN0aW9uID0gbmV3IENvbm5lY3Rpb24ob3B0cy5jb25uZWN0aW9uLCB7XG4gICAgICAgICAgICBzaGFyZWQ6ICgwLCB1dGlsc18xLmlzUmVkaXNJbnN0YW5jZSkob3B0cy5jb25uZWN0aW9uKSxcbiAgICAgICAgICAgIGJsb2NraW5nOiBmYWxzZSxcbiAgICAgICAgICAgIHNraXBWZXJzaW9uQ2hlY2s6IG9wdHMuc2tpcFZlcnNpb25DaGVjayxcbiAgICAgICAgICAgIHNraXBXYWl0aW5nRm9yUmVhZHk6IG9wdHMuc2tpcFdhaXRpbmdGb3JSZWFkeSxcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuY29ubmVjdGlvbi5vbignZXJyb3InLCAoZXJyb3IpID0+IHRoaXMuZW1pdCgnZXJyb3InLCBlcnJvcikpO1xuICAgICAgICB0aGlzLmNvbm5lY3Rpb24ub24oJ2Nsb3NlJywgKCkgPT4ge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmNsb3NpbmcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2lvcmVkaXM6Y2xvc2UnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMucXVldWVLZXlzID0gbmV3IHF1ZXVlX2tleXNfMS5RdWV1ZUtleXMob3B0cy5wcmVmaXgpO1xuICAgICAgICBpZiAob3B0cyA9PT0gbnVsbCB8fCBvcHRzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRzLnRlbGVtZXRyeSkge1xuICAgICAgICAgICAgdGhpcy50ZWxlbWV0cnkgPSBvcHRzLnRlbGVtZXRyeTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbWl0KGV2ZW50LCAuLi5hcmdzKSB7XG4gICAgICAgIHJldHVybiBzdXBlci5lbWl0KGV2ZW50LCAuLi5hcmdzKTtcbiAgICB9XG4gICAgb2ZmKGV2ZW50TmFtZSwgbGlzdGVuZXIpIHtcbiAgICAgICAgc3VwZXIub2ZmKGV2ZW50TmFtZSwgbGlzdGVuZXIpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgb24oZXZlbnQsIGxpc3RlbmVyKSB7XG4gICAgICAgIHN1cGVyLm9uKGV2ZW50LCBsaXN0ZW5lcik7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBvbmNlKGV2ZW50LCBsaXN0ZW5lcikge1xuICAgICAgICBzdXBlci5vbmNlKGV2ZW50LCBsaXN0ZW5lcik7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIGEgcmVkaXMgY2xpZW50LiBOb3JtYWxseSB1c2VkIG9ubHkgYnkgc3ViY2xhc3Nlcy5cbiAgICAgKi9cbiAgICBnZXQgY2xpZW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb25uZWN0aW9uLmNsaWVudDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSGVscGVyIHRvIGVhc2lseSBleHRlbmQgSm9iIGNsYXNzIGNhbGxzLlxuICAgICAqL1xuICAgIGdldCBKb2IoKSB7XG4gICAgICAgIHJldHVybiBqb2JfMS5Kb2I7XG4gICAgfVxuICAgIHdhaXRVbnRpbFJlYWR5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jbGllbnQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkZHMgYSBmbG93LlxuICAgICAqXG4gICAgICogVGhpcyBjYWxsIHdvdWxkIGJlIGF0b21pYywgZWl0aGVyIGl0IGZhaWxzIGFuZCBubyBqb2JzIHdpbGxcbiAgICAgKiBiZSBhZGRlZCB0byB0aGUgcXVldWVzLCBvciBpdCBzdWNjZWVkcyBhbmQgYWxsIGpvYnMgd2lsbCBiZSBhZGRlZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBmbG93IC0gYW4gb2JqZWN0IHdpdGggYSB0cmVlLWxpa2Ugc3RydWN0dXJlIHdoZXJlIGNoaWxkcmVuIGpvYnNcbiAgICAgKiB3aWxsIGJlIHByb2Nlc3NlZCBiZWZvcmUgdGhlaXIgcGFyZW50cy5cbiAgICAgKiBAcGFyYW0gb3B0cyAtIG9wdGlvbnMgdGhhdCB3aWxsIGJlIGFwcGxpZWQgdG8gdGhlIGZsb3cgb2JqZWN0LlxuICAgICAqL1xuICAgIGFzeW5jIGFkZChmbG93LCBvcHRzKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgaWYgKHRoaXMuY2xvc2luZykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNsaWVudCA9IGF3YWl0IHRoaXMuY29ubmVjdGlvbi5jbGllbnQ7XG4gICAgICAgIGNvbnN0IG11bHRpID0gY2xpZW50Lm11bHRpKCk7XG4gICAgICAgIGNvbnN0IHBhcmVudE9wdHMgPSAoX2EgPSBmbG93ID09PSBudWxsIHx8IGZsb3cgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGZsb3cub3B0cykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnBhcmVudDtcbiAgICAgICAgY29uc3QgcGFyZW50S2V5ID0gKDAsIHV0aWxzXzEuZ2V0UGFyZW50S2V5KShwYXJlbnRPcHRzKTtcbiAgICAgICAgY29uc3QgcGFyZW50RGVwZW5kZW5jaWVzS2V5ID0gcGFyZW50S2V5XG4gICAgICAgICAgICA/IGAke3BhcmVudEtleX06ZGVwZW5kZW5jaWVzYFxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgICAgIHJldHVybiAoMCwgdXRpbHNfMS50cmFjZSkodGhpcy50ZWxlbWV0cnksIGVudW1zXzEuU3BhbktpbmQuUFJPRFVDRVIsIGZsb3cucXVldWVOYW1lLCAnYWRkRmxvdycsIGZsb3cucXVldWVOYW1lLCBhc3luYyAoc3BhbikgPT4ge1xuICAgICAgICAgICAgc3BhbiA9PT0gbnVsbCB8fCBzcGFuID09PSB2b2lkIDAgPyB2b2lkIDAgOiBzcGFuLnNldEF0dHJpYnV0ZXMoe1xuICAgICAgICAgICAgICAgIFtlbnVtc18xLlRlbGVtZXRyeUF0dHJpYnV0ZXMuRmxvd05hbWVdOiBmbG93Lm5hbWUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnN0IGpvYnNUcmVlID0gYXdhaXQgdGhpcy5hZGROb2RlKHtcbiAgICAgICAgICAgICAgICBtdWx0aSxcbiAgICAgICAgICAgICAgICBub2RlOiBmbG93LFxuICAgICAgICAgICAgICAgIHF1ZXVlc09wdHM6IG9wdHMgPT09IG51bGwgfHwgb3B0cyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0cy5xdWV1ZXNPcHRpb25zLFxuICAgICAgICAgICAgICAgIHBhcmVudDoge1xuICAgICAgICAgICAgICAgICAgICBwYXJlbnRPcHRzLFxuICAgICAgICAgICAgICAgICAgICBwYXJlbnREZXBlbmRlbmNpZXNLZXksXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgYXdhaXQgbXVsdGkuZXhlYygpO1xuICAgICAgICAgICAgcmV0dXJuIGpvYnNUcmVlO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IGEgZmxvdy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvcHRzIC0gYW4gb2JqZWN0IHdpdGggb3B0aW9ucyBmb3IgZ2V0dGluZyBhIEpvYk5vZGUuXG4gICAgICovXG4gICAgYXN5bmMgZ2V0RmxvdyhvcHRzKSB7XG4gICAgICAgIGlmICh0aGlzLmNsb3NpbmcpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjbGllbnQgPSBhd2FpdCB0aGlzLmNvbm5lY3Rpb24uY2xpZW50O1xuICAgICAgICBjb25zdCB1cGRhdGVkT3B0cyA9IE9iamVjdC5hc3NpZ24oe1xuICAgICAgICAgICAgZGVwdGg6IDEwLFxuICAgICAgICAgICAgbWF4Q2hpbGRyZW46IDIwLFxuICAgICAgICAgICAgcHJlZml4OiB0aGlzLm9wdHMucHJlZml4LFxuICAgICAgICB9LCBvcHRzKTtcbiAgICAgICAgY29uc3Qgam9ic1RyZWUgPSB0aGlzLmdldE5vZGUoY2xpZW50LCB1cGRhdGVkT3B0cyk7XG4gICAgICAgIHJldHVybiBqb2JzVHJlZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkcyBtdWx0aXBsZSBmbG93cy5cbiAgICAgKlxuICAgICAqIEEgZmxvdyBpcyBhIHRyZWUtbGlrZSBzdHJ1Y3R1cmUgb2Ygam9icyB0aGF0IGRlcGVuZCBvbiBlYWNoIG90aGVyLlxuICAgICAqIFdoZW5ldmVyIHRoZSBjaGlsZHJlbiBvZiBhIGdpdmVuIHBhcmVudCBhcmUgY29tcGxldGVkLCB0aGUgcGFyZW50XG4gICAgICogd2lsbCBiZSBwcm9jZXNzZWQsIGJlaW5nIGFibGUgdG8gYWNjZXNzIHRoZSBjaGlsZHJlbidzIHJlc3VsdCBkYXRhLlxuICAgICAqXG4gICAgICogQWxsIEpvYnMgY2FuIGJlIGluIGRpZmZlcmVudCBxdWV1ZXMsIGVpdGhlciBjaGlsZHJlbiBvciBwYXJlbnRzLFxuICAgICAqIGhvd2V2ZXIgdGhpcyBjYWxsIHdvdWxkIGJlIGF0b21pYywgZWl0aGVyIGl0IGZhaWxzIGFuZCBubyBqb2JzIHdpbGxcbiAgICAgKiBiZSBhZGRlZCB0byB0aGUgcXVldWVzLCBvciBpdCBzdWNjZWVkcyBhbmQgYWxsIGpvYnMgd2lsbCBiZSBhZGRlZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBmbG93cyAtIGFuIGFycmF5IG9mIG9iamVjdHMgd2l0aCBhIHRyZWUtbGlrZSBzdHJ1Y3R1cmUgd2hlcmUgY2hpbGRyZW4gam9ic1xuICAgICAqIHdpbGwgYmUgcHJvY2Vzc2VkIGJlZm9yZSB0aGVpciBwYXJlbnRzLlxuICAgICAqL1xuICAgIGFzeW5jIGFkZEJ1bGsoZmxvd3MpIHtcbiAgICAgICAgaWYgKHRoaXMuY2xvc2luZykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNsaWVudCA9IGF3YWl0IHRoaXMuY29ubmVjdGlvbi5jbGllbnQ7XG4gICAgICAgIGNvbnN0IG11bHRpID0gY2xpZW50Lm11bHRpKCk7XG4gICAgICAgIHJldHVybiAoMCwgdXRpbHNfMS50cmFjZSkodGhpcy50ZWxlbWV0cnksIGVudW1zXzEuU3BhbktpbmQuUFJPRFVDRVIsICcnLCAnYWRkQnVsa0Zsb3dzJywgJycsIGFzeW5jIChzcGFuKSA9PiB7XG4gICAgICAgICAgICBzcGFuID09PSBudWxsIHx8IHNwYW4gPT09IHZvaWQgMCA/IHZvaWQgMCA6IHNwYW4uc2V0QXR0cmlidXRlcyh7XG4gICAgICAgICAgICAgICAgW2VudW1zXzEuVGVsZW1ldHJ5QXR0cmlidXRlcy5CdWxrQ291bnRdOiBmbG93cy5sZW5ndGgsXG4gICAgICAgICAgICAgICAgW2VudW1zXzEuVGVsZW1ldHJ5QXR0cmlidXRlcy5CdWxrTmFtZXNdOiBmbG93c1xuICAgICAgICAgICAgICAgICAgICAubWFwKGZsb3cgPT4gZmxvdy5uYW1lKVxuICAgICAgICAgICAgICAgICAgICAuam9pbignLCcpLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb25zdCBqb2JzVHJlZXMgPSBhd2FpdCB0aGlzLmFkZE5vZGVzKG11bHRpLCBmbG93cyk7XG4gICAgICAgICAgICBhd2FpdCBtdWx0aS5leGVjKCk7XG4gICAgICAgICAgICByZXR1cm4gam9ic1RyZWVzO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkIGEgbm9kZSAoam9iKSBvZiBhIGZsb3cgdG8gdGhlIHF1ZXVlLiBUaGlzIG1ldGhvZCB3aWxsIHJlY3Vyc2l2ZWx5XG4gICAgICogYWRkIGFsbCBpdHMgY2hpbGRyZW4gYXMgd2VsbC4gTm90ZSB0aGF0IGEgZ2l2ZW4gam9iIGNhbiBwb3RlbnRpYWxseSBiZVxuICAgICAqIGEgcGFyZW50IGFuZCBhIGNoaWxkIGpvYiBhdCB0aGUgc2FtZSB0aW1lIGRlcGVuZGluZyBvbiB3aGVyZSBpdCBpcyBsb2NhdGVkXG4gICAgICogaW4gdGhlIHRyZWUgaGllcmFyY2h5LlxuICAgICAqXG4gICAgICogQHBhcmFtIG11bHRpIC0gaW9yZWRpcyBDaGFpbmFibGVDb21tYW5kZXJcbiAgICAgKiBAcGFyYW0gbm9kZSAtIHRoZSBub2RlIHJlcHJlc2VudGluZyBhIGpvYiB0byBiZSBhZGRlZCB0byBzb21lIHF1ZXVlXG4gICAgICogQHBhcmFtIHBhcmVudCAtIHBhcmVudCBkYXRhIHNlbnQgdG8gY2hpbGRyZW4gdG8gY3JlYXRlIHRoZSBcImxpbmtzXCIgdG8gdGhlaXIgcGFyZW50XG4gICAgICogQHJldHVybnNcbiAgICAgKi9cbiAgICBhc3luYyBhZGROb2RlKHsgbXVsdGksIG5vZGUsIHBhcmVudCwgcXVldWVzT3B0cywgfSkge1xuICAgICAgICB2YXIgX2EsIF9iO1xuICAgICAgICBjb25zdCBwcmVmaXggPSBub2RlLnByZWZpeCB8fCB0aGlzLm9wdHMucHJlZml4O1xuICAgICAgICBjb25zdCBxdWV1ZSA9IHRoaXMucXVldWVGcm9tTm9kZShub2RlLCBuZXcgcXVldWVfa2V5c18xLlF1ZXVlS2V5cyhwcmVmaXgpLCBwcmVmaXgpO1xuICAgICAgICBjb25zdCBxdWV1ZU9wdHMgPSBxdWV1ZXNPcHRzICYmIHF1ZXVlc09wdHNbbm9kZS5xdWV1ZU5hbWVdO1xuICAgICAgICBjb25zdCBqb2JzT3B0cyA9IChfYSA9IHF1ZXVlT3B0cyA9PT0gbnVsbCB8fCBxdWV1ZU9wdHMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHF1ZXVlT3B0cy5kZWZhdWx0Sm9iT3B0aW9ucykgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDoge307XG4gICAgICAgIGNvbnN0IGpvYklkID0gKChfYiA9IG5vZGUub3B0cykgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLmpvYklkKSB8fCAoMCwgdXVpZF8xLnY0KSgpO1xuICAgICAgICByZXR1cm4gKDAsIHV0aWxzXzEudHJhY2UpKHRoaXMudGVsZW1ldHJ5LCBlbnVtc18xLlNwYW5LaW5kLlBST0RVQ0VSLCBub2RlLnF1ZXVlTmFtZSwgJ2FkZE5vZGUnLCBub2RlLnF1ZXVlTmFtZSwgYXN5bmMgKHNwYW4sIHNyY1Byb3BhZ2F0aW9uTWVkYXRhZGEpID0+IHtcbiAgICAgICAgICAgIHZhciBfYSwgX2I7XG4gICAgICAgICAgICBzcGFuID09PSBudWxsIHx8IHNwYW4gPT09IHZvaWQgMCA/IHZvaWQgMCA6IHNwYW4uc2V0QXR0cmlidXRlcyh7XG4gICAgICAgICAgICAgICAgW2VudW1zXzEuVGVsZW1ldHJ5QXR0cmlidXRlcy5Kb2JOYW1lXTogbm9kZS5uYW1lLFxuICAgICAgICAgICAgICAgIFtlbnVtc18xLlRlbGVtZXRyeUF0dHJpYnV0ZXMuSm9iSWRdOiBqb2JJZCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29uc3Qgb3B0cyA9IG5vZGUub3B0cztcbiAgICAgICAgICAgIGxldCB0ZWxlbWV0cnkgPSBvcHRzID09PSBudWxsIHx8IG9wdHMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdHMudGVsZW1ldHJ5O1xuICAgICAgICAgICAgaWYgKHNyY1Byb3BhZ2F0aW9uTWVkYXRhZGEgJiYgb3B0cykge1xuICAgICAgICAgICAgICAgIGNvbnN0IG9taXRDb250ZXh0ID0gKF9hID0gb3B0cy50ZWxlbWV0cnkpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5vbWl0Q29udGV4dDtcbiAgICAgICAgICAgICAgICBjb25zdCB0ZWxlbWV0cnlNZXRhZGF0YSA9ICgoX2IgPSBvcHRzLnRlbGVtZXRyeSkgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLm1ldGFkYXRhKSB8fFxuICAgICAgICAgICAgICAgICAgICAoIW9taXRDb250ZXh0ICYmIHNyY1Byb3BhZ2F0aW9uTWVkYXRhZGEpO1xuICAgICAgICAgICAgICAgIGlmICh0ZWxlbWV0cnlNZXRhZGF0YSB8fCBvbWl0Q29udGV4dCkge1xuICAgICAgICAgICAgICAgICAgICB0ZWxlbWV0cnkgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXRhZGF0YTogdGVsZW1ldHJ5TWV0YWRhdGEsXG4gICAgICAgICAgICAgICAgICAgICAgICBvbWl0Q29udGV4dCxcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBqb2IgPSBuZXcgdGhpcy5Kb2IocXVldWUsIG5vZGUubmFtZSwgbm9kZS5kYXRhLCBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgam9ic09wdHMpLCBvcHRzKSwgeyBwYXJlbnQ6IHBhcmVudCA9PT0gbnVsbCB8fCBwYXJlbnQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHBhcmVudC5wYXJlbnRPcHRzLCB0ZWxlbWV0cnkgfSksIGpvYklkKTtcbiAgICAgICAgICAgIGNvbnN0IHBhcmVudEtleSA9ICgwLCB1dGlsc18xLmdldFBhcmVudEtleSkocGFyZW50ID09PSBudWxsIHx8IHBhcmVudCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcGFyZW50LnBhcmVudE9wdHMpO1xuICAgICAgICAgICAgaWYgKG5vZGUuY2hpbGRyZW4gJiYgbm9kZS5jaGlsZHJlbi5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgLy8gQ3JlYXRlIHRoZSBwYXJlbnQgam9iLCBpdCB3aWxsIGJlIGEgam9iIGluIHN0YXR1cyBcIndhaXRpbmctY2hpbGRyZW5cIi5cbiAgICAgICAgICAgICAgICBjb25zdCBwYXJlbnRJZCA9IGpvYklkO1xuICAgICAgICAgICAgICAgIGNvbnN0IHF1ZXVlS2V5c1BhcmVudCA9IG5ldyBxdWV1ZV9rZXlzXzEuUXVldWVLZXlzKG5vZGUucHJlZml4IHx8IHRoaXMub3B0cy5wcmVmaXgpO1xuICAgICAgICAgICAgICAgIGF3YWl0IGpvYi5hZGRKb2IobXVsdGksIHtcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50RGVwZW5kZW5jaWVzS2V5OiBwYXJlbnQgPT09IG51bGwgfHwgcGFyZW50ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwYXJlbnQucGFyZW50RGVwZW5kZW5jaWVzS2V5LFxuICAgICAgICAgICAgICAgICAgICBhZGRUb1dhaXRpbmdDaGlsZHJlbjogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50S2V5LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGNvbnN0IHBhcmVudERlcGVuZGVuY2llc0tleSA9IGAke3F1ZXVlS2V5c1BhcmVudC50b0tleShub2RlLnF1ZXVlTmFtZSwgcGFyZW50SWQpfTpkZXBlbmRlbmNpZXNgO1xuICAgICAgICAgICAgICAgIGNvbnN0IGNoaWxkcmVuID0gYXdhaXQgdGhpcy5hZGRDaGlsZHJlbih7XG4gICAgICAgICAgICAgICAgICAgIG11bHRpLFxuICAgICAgICAgICAgICAgICAgICBub2Rlczogbm9kZS5jaGlsZHJlbixcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnRPcHRzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IHBhcmVudElkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXVlOiBxdWV1ZUtleXNQYXJlbnQuZ2V0UXVldWVRdWFsaWZpZWROYW1lKG5vZGUucXVldWVOYW1lKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnREZXBlbmRlbmNpZXNLZXksXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHF1ZXVlc09wdHMsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgam9iLCBjaGlsZHJlbiB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgam9iLmFkZEpvYihtdWx0aSwge1xuICAgICAgICAgICAgICAgICAgICBwYXJlbnREZXBlbmRlbmNpZXNLZXk6IHBhcmVudCA9PT0gbnVsbCB8fCBwYXJlbnQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHBhcmVudC5wYXJlbnREZXBlbmRlbmNpZXNLZXksXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudEtleSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4geyBqb2IgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkZHMgbm9kZXMgKGpvYnMpIG9mIG11bHRpcGxlIGZsb3dzIHRvIHRoZSBxdWV1ZS4gVGhpcyBtZXRob2Qgd2lsbCByZWN1cnNpdmVseVxuICAgICAqIGFkZCBhbGwgaXRzIGNoaWxkcmVuIGFzIHdlbGwuIE5vdGUgdGhhdCBhIGdpdmVuIGpvYiBjYW4gcG90ZW50aWFsbHkgYmVcbiAgICAgKiBhIHBhcmVudCBhbmQgYSBjaGlsZCBqb2IgYXQgdGhlIHNhbWUgdGltZSBkZXBlbmRpbmcgb24gd2hlcmUgaXQgaXMgbG9jYXRlZFxuICAgICAqIGluIHRoZSB0cmVlIGhpZXJhcmNoeS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBtdWx0aSAtIGlvcmVkaXMgQ2hhaW5hYmxlQ29tbWFuZGVyXG4gICAgICogQHBhcmFtIG5vZGVzIC0gdGhlIG5vZGVzIHJlcHJlc2VudGluZyBqb2JzIHRvIGJlIGFkZGVkIHRvIHNvbWUgcXVldWVcbiAgICAgKiBAcmV0dXJuc1xuICAgICAqL1xuICAgIGFkZE5vZGVzKG11bHRpLCBub2Rlcykge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwobm9kZXMubWFwKG5vZGUgPT4ge1xuICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgICAgY29uc3QgcGFyZW50T3B0cyA9IChfYSA9IG5vZGUgPT09IG51bGwgfHwgbm9kZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogbm9kZS5vcHRzKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EucGFyZW50O1xuICAgICAgICAgICAgY29uc3QgcGFyZW50S2V5ID0gKDAsIHV0aWxzXzEuZ2V0UGFyZW50S2V5KShwYXJlbnRPcHRzKTtcbiAgICAgICAgICAgIGNvbnN0IHBhcmVudERlcGVuZGVuY2llc0tleSA9IHBhcmVudEtleVxuICAgICAgICAgICAgICAgID8gYCR7cGFyZW50S2V5fTpkZXBlbmRlbmNpZXNgXG4gICAgICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5hZGROb2RlKHtcbiAgICAgICAgICAgICAgICBtdWx0aSxcbiAgICAgICAgICAgICAgICBub2RlLFxuICAgICAgICAgICAgICAgIHBhcmVudDoge1xuICAgICAgICAgICAgICAgICAgICBwYXJlbnRPcHRzLFxuICAgICAgICAgICAgICAgICAgICBwYXJlbnREZXBlbmRlbmNpZXNLZXksXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGFzeW5jIGdldE5vZGUoY2xpZW50LCBub2RlKSB7XG4gICAgICAgIGNvbnN0IHF1ZXVlID0gdGhpcy5xdWV1ZUZyb21Ob2RlKG5vZGUsIG5ldyBxdWV1ZV9rZXlzXzEuUXVldWVLZXlzKG5vZGUucHJlZml4KSwgbm9kZS5wcmVmaXgpO1xuICAgICAgICBjb25zdCBqb2IgPSBhd2FpdCB0aGlzLkpvYi5mcm9tSWQocXVldWUsIG5vZGUuaWQpO1xuICAgICAgICBpZiAoam9iKSB7XG4gICAgICAgICAgICBjb25zdCB7IHByb2Nlc3NlZCA9IHt9LCB1bnByb2Nlc3NlZCA9IFtdLCBmYWlsZWQgPSBbXSwgaWdub3JlZCA9IHt9LCB9ID0gYXdhaXQgam9iLmdldERlcGVuZGVuY2llcyh7XG4gICAgICAgICAgICAgICAgZmFpbGVkOiB7XG4gICAgICAgICAgICAgICAgICAgIGNvdW50OiBub2RlLm1heENoaWxkcmVuLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgcHJvY2Vzc2VkOiB7XG4gICAgICAgICAgICAgICAgICAgIGNvdW50OiBub2RlLm1heENoaWxkcmVuLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgdW5wcm9jZXNzZWQ6IHtcbiAgICAgICAgICAgICAgICAgICAgY291bnQ6IG5vZGUubWF4Q2hpbGRyZW4sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBpZ25vcmVkOiB7XG4gICAgICAgICAgICAgICAgICAgIGNvdW50OiBub2RlLm1heENoaWxkcmVuLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnN0IHByb2Nlc3NlZEtleXMgPSBPYmplY3Qua2V5cyhwcm9jZXNzZWQpO1xuICAgICAgICAgICAgY29uc3QgaWdub3JlZEtleXMgPSBPYmplY3Qua2V5cyhpZ25vcmVkKTtcbiAgICAgICAgICAgIGNvbnN0IGNoaWxkcmVuQ291bnQgPSBwcm9jZXNzZWRLZXlzLmxlbmd0aCArXG4gICAgICAgICAgICAgICAgdW5wcm9jZXNzZWQubGVuZ3RoICtcbiAgICAgICAgICAgICAgICBpZ25vcmVkS2V5cy5sZW5ndGggK1xuICAgICAgICAgICAgICAgIGZhaWxlZC5sZW5ndGg7XG4gICAgICAgICAgICBjb25zdCBuZXdEZXB0aCA9IG5vZGUuZGVwdGggLSAxO1xuICAgICAgICAgICAgaWYgKGNoaWxkcmVuQ291bnQgPiAwICYmIG5ld0RlcHRoKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY2hpbGRyZW4gPSBhd2FpdCB0aGlzLmdldENoaWxkcmVuKGNsaWVudCwgWy4uLnByb2Nlc3NlZEtleXMsIC4uLnVucHJvY2Vzc2VkLCAuLi5mYWlsZWQsIC4uLmlnbm9yZWRLZXlzXSwgbmV3RGVwdGgsIG5vZGUubWF4Q2hpbGRyZW4pO1xuICAgICAgICAgICAgICAgIHJldHVybiB7IGpvYiwgY2hpbGRyZW4gfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB7IGpvYiB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGFkZENoaWxkcmVuKHsgbXVsdGksIG5vZGVzLCBwYXJlbnQsIHF1ZXVlc09wdHMgfSkge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwobm9kZXMubWFwKG5vZGUgPT4gdGhpcy5hZGROb2RlKHsgbXVsdGksIG5vZGUsIHBhcmVudCwgcXVldWVzT3B0cyB9KSkpO1xuICAgIH1cbiAgICBnZXRDaGlsZHJlbihjbGllbnQsIGNoaWxkcmVuS2V5cywgZGVwdGgsIG1heENoaWxkcmVuKSB7XG4gICAgICAgIGNvbnN0IGdldENoaWxkID0gKGtleSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgW3ByZWZpeCwgcXVldWVOYW1lLCBpZF0gPSBrZXkuc3BsaXQoJzonKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldE5vZGUoY2xpZW50LCB7XG4gICAgICAgICAgICAgICAgaWQsXG4gICAgICAgICAgICAgICAgcXVldWVOYW1lLFxuICAgICAgICAgICAgICAgIHByZWZpeCxcbiAgICAgICAgICAgICAgICBkZXB0aCxcbiAgICAgICAgICAgICAgICBtYXhDaGlsZHJlbixcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwoWy4uLmNoaWxkcmVuS2V5cy5tYXAoZ2V0Q2hpbGQpXSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEhlbHBlciBmYWN0b3J5IG1ldGhvZCB0aGF0IGNyZWF0ZXMgYSBxdWV1ZS1saWtlIG9iamVjdFxuICAgICAqIHJlcXVpcmVkIHRvIGNyZWF0ZSBqb2JzIGluIGFueSBxdWV1ZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBub2RlIC1cbiAgICAgKiBAcGFyYW0gcXVldWVLZXlzIC1cbiAgICAgKiBAcmV0dXJuc1xuICAgICAqL1xuICAgIHF1ZXVlRnJvbU5vZGUobm9kZSwgcXVldWVLZXlzLCBwcmVmaXgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGNsaWVudDogdGhpcy5jb25uZWN0aW9uLmNsaWVudCxcbiAgICAgICAgICAgIG5hbWU6IG5vZGUucXVldWVOYW1lLFxuICAgICAgICAgICAga2V5czogcXVldWVLZXlzLmdldEtleXMobm9kZS5xdWV1ZU5hbWUpLFxuICAgICAgICAgICAgdG9LZXk6ICh0eXBlKSA9PiBxdWV1ZUtleXMudG9LZXkobm9kZS5xdWV1ZU5hbWUsIHR5cGUpLFxuICAgICAgICAgICAgb3B0czogeyBwcmVmaXgsIGNvbm5lY3Rpb246IHt9IH0sXG4gICAgICAgICAgICBxdWFsaWZpZWROYW1lOiBxdWV1ZUtleXMuZ2V0UXVldWVRdWFsaWZpZWROYW1lKG5vZGUucXVldWVOYW1lKSxcbiAgICAgICAgICAgIGNsb3Npbmc6IHRoaXMuY2xvc2luZyxcbiAgICAgICAgICAgIHdhaXRVbnRpbFJlYWR5OiBhc3luYyAoKSA9PiB0aGlzLmNvbm5lY3Rpb24uY2xpZW50LFxuICAgICAgICAgICAgcmVtb3ZlTGlzdGVuZXI6IHRoaXMucmVtb3ZlTGlzdGVuZXIuYmluZCh0aGlzKSxcbiAgICAgICAgICAgIGVtaXQ6IHRoaXMuZW1pdC5iaW5kKHRoaXMpLFxuICAgICAgICAgICAgb246IHRoaXMub24uYmluZCh0aGlzKSxcbiAgICAgICAgICAgIHJlZGlzVmVyc2lvbjogdGhpcy5jb25uZWN0aW9uLnJlZGlzVmVyc2lvbixcbiAgICAgICAgICAgIHRyYWNlOiBhc3luYyAoKSA9PiB7IH0sXG4gICAgICAgIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqXG4gICAgICogQ2xvc2VzIHRoZSBjb25uZWN0aW9uIGFuZCByZXR1cm5zIGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHdoZW4gdGhlIGNvbm5lY3Rpb24gaXMgY2xvc2VkLlxuICAgICAqL1xuICAgIGFzeW5jIGNsb3NlKCkge1xuICAgICAgICBpZiAoIXRoaXMuY2xvc2luZykge1xuICAgICAgICAgICAgdGhpcy5jbG9zaW5nID0gdGhpcy5jb25uZWN0aW9uLmNsb3NlKCk7XG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgdGhpcy5jbG9zaW5nO1xuICAgIH1cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEZvcmNlIGRpc2Nvbm5lY3RzIGEgY29ubmVjdGlvbi5cbiAgICAgKi9cbiAgICBkaXNjb25uZWN0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb25uZWN0aW9uLmRpc2Nvbm5lY3QoKTtcbiAgICB9XG59XG5leHBvcnRzLkZsb3dQcm9kdWNlciA9IEZsb3dQcm9kdWNlcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWZsb3ctcHJvZHVjZXIuanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiRmxvd1Byb2R1Y2VyIiwiZXZlbnRzXzEiLCJyZXF1aXJlIiwidXVpZF8xIiwidXRpbHNfMSIsImpvYl8xIiwicXVldWVfa2V5c18xIiwicmVkaXNfY29ubmVjdGlvbl8xIiwiZW51bXNfMSIsIkV2ZW50RW1pdHRlciIsImNvbnN0cnVjdG9yIiwib3B0cyIsImNvbm5lY3Rpb24iLCJDb25uZWN0aW9uIiwiUmVkaXNDb25uZWN0aW9uIiwiYXNzaWduIiwicHJlZml4Iiwic2hhcmVkIiwiaXNSZWRpc0luc3RhbmNlIiwiYmxvY2tpbmciLCJza2lwVmVyc2lvbkNoZWNrIiwic2tpcFdhaXRpbmdGb3JSZWFkeSIsIm9uIiwiZXJyb3IiLCJlbWl0IiwiY2xvc2luZyIsInF1ZXVlS2V5cyIsIlF1ZXVlS2V5cyIsInRlbGVtZXRyeSIsImV2ZW50IiwiYXJncyIsIm9mZiIsImV2ZW50TmFtZSIsImxpc3RlbmVyIiwib25jZSIsImNsaWVudCIsIkpvYiIsIndhaXRVbnRpbFJlYWR5IiwiYWRkIiwiZmxvdyIsIl9hIiwibXVsdGkiLCJwYXJlbnRPcHRzIiwicGFyZW50IiwicGFyZW50S2V5IiwiZ2V0UGFyZW50S2V5IiwicGFyZW50RGVwZW5kZW5jaWVzS2V5IiwidW5kZWZpbmVkIiwidHJhY2UiLCJTcGFuS2luZCIsIlBST0RVQ0VSIiwicXVldWVOYW1lIiwic3BhbiIsInNldEF0dHJpYnV0ZXMiLCJUZWxlbWV0cnlBdHRyaWJ1dGVzIiwiRmxvd05hbWUiLCJuYW1lIiwiam9ic1RyZWUiLCJhZGROb2RlIiwibm9kZSIsInF1ZXVlc09wdHMiLCJxdWV1ZXNPcHRpb25zIiwiZXhlYyIsImdldEZsb3ciLCJ1cGRhdGVkT3B0cyIsImRlcHRoIiwibWF4Q2hpbGRyZW4iLCJnZXROb2RlIiwiYWRkQnVsayIsImZsb3dzIiwiQnVsa0NvdW50IiwibGVuZ3RoIiwiQnVsa05hbWVzIiwibWFwIiwiam9pbiIsImpvYnNUcmVlcyIsImFkZE5vZGVzIiwiX2IiLCJxdWV1ZSIsInF1ZXVlRnJvbU5vZGUiLCJxdWV1ZU9wdHMiLCJqb2JzT3B0cyIsImRlZmF1bHRKb2JPcHRpb25zIiwiam9iSWQiLCJ2NCIsInNyY1Byb3BhZ2F0aW9uTWVkYXRhZGEiLCJKb2JOYW1lIiwiSm9iSWQiLCJvbWl0Q29udGV4dCIsInRlbGVtZXRyeU1ldGFkYXRhIiwibWV0YWRhdGEiLCJqb2IiLCJkYXRhIiwiY2hpbGRyZW4iLCJwYXJlbnRJZCIsInF1ZXVlS2V5c1BhcmVudCIsImFkZEpvYiIsImFkZFRvV2FpdGluZ0NoaWxkcmVuIiwidG9LZXkiLCJhZGRDaGlsZHJlbiIsIm5vZGVzIiwiaWQiLCJnZXRRdWV1ZVF1YWxpZmllZE5hbWUiLCJQcm9taXNlIiwiYWxsIiwiZnJvbUlkIiwicHJvY2Vzc2VkIiwidW5wcm9jZXNzZWQiLCJmYWlsZWQiLCJpZ25vcmVkIiwiZ2V0RGVwZW5kZW5jaWVzIiwiY291bnQiLCJwcm9jZXNzZWRLZXlzIiwia2V5cyIsImlnbm9yZWRLZXlzIiwiY2hpbGRyZW5Db3VudCIsIm5ld0RlcHRoIiwiZ2V0Q2hpbGRyZW4iLCJjaGlsZHJlbktleXMiLCJnZXRDaGlsZCIsImtleSIsInNwbGl0IiwiZ2V0S2V5cyIsInR5cGUiLCJxdWFsaWZpZWROYW1lIiwicmVtb3ZlTGlzdGVuZXIiLCJiaW5kIiwicmVkaXNWZXJzaW9uIiwiY2xvc2UiLCJkaXNjb25uZWN0Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/classes/flow-producer.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/classes/index.js":
/*!*******************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/classes/index.js ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nconst tslib_1 = __webpack_require__(/*! tslib */ \"(rsc)/./node_modules/tslib/tslib.es6.mjs\");\ntslib_1.__exportStar(__webpack_require__(/*! ./async-fifo-queue */ \"(rsc)/./node_modules/bullmq/dist/cjs/classes/async-fifo-queue.js\"), exports);\ntslib_1.__exportStar(__webpack_require__(/*! ./backoffs */ \"(rsc)/./node_modules/bullmq/dist/cjs/classes/backoffs.js\"), exports);\ntslib_1.__exportStar(__webpack_require__(/*! ./child */ \"(rsc)/./node_modules/bullmq/dist/cjs/classes/child.js\"), exports);\ntslib_1.__exportStar(__webpack_require__(/*! ./child-pool */ \"(rsc)/./node_modules/bullmq/dist/cjs/classes/child-pool.js\"), exports);\ntslib_1.__exportStar(__webpack_require__(/*! ./child-processor */ \"(rsc)/./node_modules/bullmq/dist/cjs/classes/child-processor.js\"), exports);\ntslib_1.__exportStar(__webpack_require__(/*! ./errors */ \"(rsc)/./node_modules/bullmq/dist/cjs/classes/errors/index.js\"), exports);\ntslib_1.__exportStar(__webpack_require__(/*! ./flow-producer */ \"(rsc)/./node_modules/bullmq/dist/cjs/classes/flow-producer.js\"), exports);\ntslib_1.__exportStar(__webpack_require__(/*! ./job */ \"(rsc)/./node_modules/bullmq/dist/cjs/classes/job.js\"), exports);\ntslib_1.__exportStar(__webpack_require__(/*! ./job-scheduler */ \"(rsc)/./node_modules/bullmq/dist/cjs/classes/job-scheduler.js\"), exports);\n// export * from './main'; this file must not be exported\n// export * from './main-worker'; this file must not be exported\ntslib_1.__exportStar(__webpack_require__(/*! ./queue-base */ \"(rsc)/./node_modules/bullmq/dist/cjs/classes/queue-base.js\"), exports);\ntslib_1.__exportStar(__webpack_require__(/*! ./queue-events */ \"(rsc)/./node_modules/bullmq/dist/cjs/classes/queue-events.js\"), exports);\ntslib_1.__exportStar(__webpack_require__(/*! ./queue-events-producer */ \"(rsc)/./node_modules/bullmq/dist/cjs/classes/queue-events-producer.js\"), exports);\ntslib_1.__exportStar(__webpack_require__(/*! ./queue-getters */ \"(rsc)/./node_modules/bullmq/dist/cjs/classes/queue-getters.js\"), exports);\ntslib_1.__exportStar(__webpack_require__(/*! ./queue-keys */ \"(rsc)/./node_modules/bullmq/dist/cjs/classes/queue-keys.js\"), exports);\ntslib_1.__exportStar(__webpack_require__(/*! ./queue */ \"(rsc)/./node_modules/bullmq/dist/cjs/classes/queue.js\"), exports);\ntslib_1.__exportStar(__webpack_require__(/*! ./redis-connection */ \"(rsc)/./node_modules/bullmq/dist/cjs/classes/redis-connection.js\"), exports);\ntslib_1.__exportStar(__webpack_require__(/*! ./repeat */ \"(rsc)/./node_modules/bullmq/dist/cjs/classes/repeat.js\"), exports);\ntslib_1.__exportStar(__webpack_require__(/*! ./sandbox */ \"(rsc)/./node_modules/bullmq/dist/cjs/classes/sandbox.js\"), exports);\ntslib_1.__exportStar(__webpack_require__(/*! ./scripts */ \"(rsc)/./node_modules/bullmq/dist/cjs/classes/scripts.js\"), exports);\ntslib_1.__exportStar(__webpack_require__(/*! ./worker */ \"(rsc)/./node_modules/bullmq/dist/cjs/classes/worker.js\"), exports); //# sourceMappingURL=index.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL2NsYXNzZXMvaW5kZXguanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0QsTUFBTUMsVUFBVUMsbUJBQU9BLENBQUMsdURBQU87QUFDL0JELFFBQVFFLFlBQVksQ0FBQ0QsbUJBQU9BLENBQUMsNEZBQW9CLEdBQUdIO0FBQ3BERSxRQUFRRSxZQUFZLENBQUNELG1CQUFPQSxDQUFDLDRFQUFZLEdBQUdIO0FBQzVDRSxRQUFRRSxZQUFZLENBQUNELG1CQUFPQSxDQUFDLHNFQUFTLEdBQUdIO0FBQ3pDRSxRQUFRRSxZQUFZLENBQUNELG1CQUFPQSxDQUFDLGdGQUFjLEdBQUdIO0FBQzlDRSxRQUFRRSxZQUFZLENBQUNELG1CQUFPQSxDQUFDLDBGQUFtQixHQUFHSDtBQUNuREUsUUFBUUUsWUFBWSxDQUFDRCxtQkFBT0EsQ0FBQyw4RUFBVSxHQUFHSDtBQUMxQ0UsUUFBUUUsWUFBWSxDQUFDRCxtQkFBT0EsQ0FBQyxzRkFBaUIsR0FBR0g7QUFDakRFLFFBQVFFLFlBQVksQ0FBQ0QsbUJBQU9BLENBQUMsa0VBQU8sR0FBR0g7QUFDdkNFLFFBQVFFLFlBQVksQ0FBQ0QsbUJBQU9BLENBQUMsc0ZBQWlCLEdBQUdIO0FBQ2pELHlEQUF5RDtBQUN6RCxnRUFBZ0U7QUFDaEVFLFFBQVFFLFlBQVksQ0FBQ0QsbUJBQU9BLENBQUMsZ0ZBQWMsR0FBR0g7QUFDOUNFLFFBQVFFLFlBQVksQ0FBQ0QsbUJBQU9BLENBQUMsb0ZBQWdCLEdBQUdIO0FBQ2hERSxRQUFRRSxZQUFZLENBQUNELG1CQUFPQSxDQUFDLHNHQUF5QixHQUFHSDtBQUN6REUsUUFBUUUsWUFBWSxDQUFDRCxtQkFBT0EsQ0FBQyxzRkFBaUIsR0FBR0g7QUFDakRFLFFBQVFFLFlBQVksQ0FBQ0QsbUJBQU9BLENBQUMsZ0ZBQWMsR0FBR0g7QUFDOUNFLFFBQVFFLFlBQVksQ0FBQ0QsbUJBQU9BLENBQUMsc0VBQVMsR0FBR0g7QUFDekNFLFFBQVFFLFlBQVksQ0FBQ0QsbUJBQU9BLENBQUMsNEZBQW9CLEdBQUdIO0FBQ3BERSxRQUFRRSxZQUFZLENBQUNELG1CQUFPQSxDQUFDLHdFQUFVLEdBQUdIO0FBQzFDRSxRQUFRRSxZQUFZLENBQUNELG1CQUFPQSxDQUFDLDBFQUFXLEdBQUdIO0FBQzNDRSxRQUFRRSxZQUFZLENBQUNELG1CQUFPQSxDQUFDLDBFQUFXLEdBQUdIO0FBQzNDRSxRQUFRRSxZQUFZLENBQUNELG1CQUFPQSxDQUFDLHdFQUFVLEdBQUdILFVBQzFDLGlDQUFpQyIsInNvdXJjZXMiOlsid2VicGFjazovL29ubHlmYW5zLXBsYXRmb3JtLy4vbm9kZV9tb2R1bGVzL2J1bGxtcS9kaXN0L2Nqcy9jbGFzc2VzL2luZGV4LmpzPzE4YzciXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5jb25zdCB0c2xpYl8xID0gcmVxdWlyZShcInRzbGliXCIpO1xudHNsaWJfMS5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vYXN5bmMtZmlmby1xdWV1ZVwiKSwgZXhwb3J0cyk7XG50c2xpYl8xLl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi9iYWNrb2Zmc1wiKSwgZXhwb3J0cyk7XG50c2xpYl8xLl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi9jaGlsZFwiKSwgZXhwb3J0cyk7XG50c2xpYl8xLl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi9jaGlsZC1wb29sXCIpLCBleHBvcnRzKTtcbnRzbGliXzEuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL2NoaWxkLXByb2Nlc3NvclwiKSwgZXhwb3J0cyk7XG50c2xpYl8xLl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi9lcnJvcnNcIiksIGV4cG9ydHMpO1xudHNsaWJfMS5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vZmxvdy1wcm9kdWNlclwiKSwgZXhwb3J0cyk7XG50c2xpYl8xLl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi9qb2JcIiksIGV4cG9ydHMpO1xudHNsaWJfMS5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vam9iLXNjaGVkdWxlclwiKSwgZXhwb3J0cyk7XG4vLyBleHBvcnQgKiBmcm9tICcuL21haW4nOyB0aGlzIGZpbGUgbXVzdCBub3QgYmUgZXhwb3J0ZWRcbi8vIGV4cG9ydCAqIGZyb20gJy4vbWFpbi13b3JrZXInOyB0aGlzIGZpbGUgbXVzdCBub3QgYmUgZXhwb3J0ZWRcbnRzbGliXzEuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL3F1ZXVlLWJhc2VcIiksIGV4cG9ydHMpO1xudHNsaWJfMS5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vcXVldWUtZXZlbnRzXCIpLCBleHBvcnRzKTtcbnRzbGliXzEuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL3F1ZXVlLWV2ZW50cy1wcm9kdWNlclwiKSwgZXhwb3J0cyk7XG50c2xpYl8xLl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi9xdWV1ZS1nZXR0ZXJzXCIpLCBleHBvcnRzKTtcbnRzbGliXzEuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL3F1ZXVlLWtleXNcIiksIGV4cG9ydHMpO1xudHNsaWJfMS5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vcXVldWVcIiksIGV4cG9ydHMpO1xudHNsaWJfMS5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vcmVkaXMtY29ubmVjdGlvblwiKSwgZXhwb3J0cyk7XG50c2xpYl8xLl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi9yZXBlYXRcIiksIGV4cG9ydHMpO1xudHNsaWJfMS5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vc2FuZGJveFwiKSwgZXhwb3J0cyk7XG50c2xpYl8xLl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi9zY3JpcHRzXCIpLCBleHBvcnRzKTtcbnRzbGliXzEuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL3dvcmtlclwiKSwgZXhwb3J0cyk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJ0c2xpYl8xIiwicmVxdWlyZSIsIl9fZXhwb3J0U3RhciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/classes/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/classes/job-scheduler.js":
/*!***************************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/classes/job-scheduler.js ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.defaultRepeatStrategy = exports.JobScheduler = void 0;\nconst tslib_1 = __webpack_require__(/*! tslib */ \"(rsc)/./node_modules/tslib/tslib.es6.mjs\");\nconst cron_parser_1 = __webpack_require__(/*! cron-parser */ \"(rsc)/./node_modules/cron-parser/lib/parser.js\");\nconst job_1 = __webpack_require__(/*! ./job */ \"(rsc)/./node_modules/bullmq/dist/cjs/classes/job.js\");\nconst queue_base_1 = __webpack_require__(/*! ./queue-base */ \"(rsc)/./node_modules/bullmq/dist/cjs/classes/queue-base.js\");\nconst enums_1 = __webpack_require__(/*! ../enums */ \"(rsc)/./node_modules/bullmq/dist/cjs/enums/index.js\");\nconst utils_1 = __webpack_require__(/*! ../utils */ \"(rsc)/./node_modules/bullmq/dist/cjs/utils/index.js\");\nclass JobScheduler extends queue_base_1.QueueBase {\n    constructor(name, opts, Connection){\n        super(name, opts, Connection);\n        this.repeatStrategy = opts.settings && opts.settings.repeatStrategy || exports.defaultRepeatStrategy;\n    }\n    async upsertJobScheduler(jobSchedulerId, repeatOpts, jobName, jobData, opts, { override, producerId }) {\n        const { every, limit, pattern, offset } = repeatOpts;\n        if (pattern && every) {\n            throw new Error(\"Both .pattern and .every options are defined for this repeatable job\");\n        }\n        if (!pattern && !every) {\n            throw new Error(\"Either .pattern or .every options must be defined for this repeatable job\");\n        }\n        if (repeatOpts.immediately && repeatOpts.startDate) {\n            throw new Error(\"Both .immediately and .startDate options are defined for this repeatable job\");\n        }\n        if (repeatOpts.immediately && repeatOpts.every) {\n            console.warn(\"Using option immediately with every does not affect the job's schedule. Job will run immediately anyway.\");\n        }\n        // Check if we reached the limit of the repeatable job's iterations\n        const iterationCount = repeatOpts.count ? repeatOpts.count + 1 : 1;\n        if (typeof repeatOpts.limit !== \"undefined\" && iterationCount > repeatOpts.limit) {\n            return;\n        }\n        // Check if we reached the end date of the repeatable job\n        let now = Date.now();\n        const { endDate } = repeatOpts;\n        if (endDate && now > new Date(endDate).getTime()) {\n            return;\n        }\n        const prevMillis = opts.prevMillis || 0;\n        now = prevMillis < now ? now : prevMillis;\n        // Check if we have a start date for the repeatable job\n        const { immediately } = repeatOpts, filteredRepeatOpts = tslib_1.__rest(repeatOpts, [\n            \"immediately\"\n        ]);\n        let nextMillis;\n        const newOffset = null;\n        if (pattern) {\n            nextMillis = await this.repeatStrategy(now, repeatOpts, jobName);\n            if (nextMillis < now) {\n                nextMillis = now;\n            }\n        }\n        if (nextMillis || every) {\n            return this.trace(enums_1.SpanKind.PRODUCER, \"add\", `${this.name}.${jobName}`, async (span, srcPropagationMedatada)=>{\n                var _a, _b;\n                let telemetry = opts.telemetry;\n                if (srcPropagationMedatada) {\n                    const omitContext = (_a = opts.telemetry) === null || _a === void 0 ? void 0 : _a.omitContext;\n                    const telemetryMetadata = ((_b = opts.telemetry) === null || _b === void 0 ? void 0 : _b.metadata) || !omitContext && srcPropagationMedatada;\n                    if (telemetryMetadata || omitContext) {\n                        telemetry = {\n                            metadata: telemetryMetadata,\n                            omitContext\n                        };\n                    }\n                }\n                const mergedOpts = this.getNextJobOpts(nextMillis, jobSchedulerId, Object.assign(Object.assign({}, opts), {\n                    repeat: filteredRepeatOpts,\n                    telemetry\n                }), iterationCount, newOffset);\n                if (override) {\n                    // Clamp nextMillis to now if it's in the past\n                    if (nextMillis < now) {\n                        nextMillis = now;\n                    }\n                    const [jobId, delay] = await this.scripts.addJobScheduler(jobSchedulerId, nextMillis, JSON.stringify(typeof jobData === \"undefined\" ? {} : jobData), job_1.Job.optsAsJSON(opts), {\n                        name: jobName,\n                        startDate: repeatOpts.startDate ? new Date(repeatOpts.startDate).getTime() : undefined,\n                        endDate: endDate ? new Date(endDate).getTime() : undefined,\n                        tz: repeatOpts.tz,\n                        pattern,\n                        every,\n                        limit,\n                        offset: newOffset\n                    }, job_1.Job.optsAsJSON(mergedOpts), producerId);\n                    // Ensure delay is a number (Dragonflydb may return it as a string)\n                    const numericDelay = typeof delay === \"string\" ? parseInt(delay, 10) : delay;\n                    const job = new this.Job(this, jobName, jobData, Object.assign(Object.assign({}, mergedOpts), {\n                        delay: numericDelay\n                    }), jobId);\n                    job.id = jobId;\n                    span === null || span === void 0 ? void 0 : span.setAttributes({\n                        [enums_1.TelemetryAttributes.JobSchedulerId]: jobSchedulerId,\n                        [enums_1.TelemetryAttributes.JobId]: job.id\n                    });\n                    return job;\n                } else {\n                    const jobId = await this.scripts.updateJobSchedulerNextMillis(jobSchedulerId, nextMillis, JSON.stringify(typeof jobData === \"undefined\" ? {} : jobData), job_1.Job.optsAsJSON(mergedOpts), producerId);\n                    if (jobId) {\n                        const job = new this.Job(this, jobName, jobData, mergedOpts, jobId);\n                        job.id = jobId;\n                        span === null || span === void 0 ? void 0 : span.setAttributes({\n                            [enums_1.TelemetryAttributes.JobSchedulerId]: jobSchedulerId,\n                            [enums_1.TelemetryAttributes.JobId]: job.id\n                        });\n                        return job;\n                    }\n                }\n            });\n        }\n    }\n    getNextJobOpts(nextMillis, jobSchedulerId, opts, currentCount, offset) {\n        var _a, _b;\n        //\n        // Generate unique job id for this iteration.\n        //\n        const jobId = this.getSchedulerNextJobId({\n            jobSchedulerId,\n            nextMillis\n        });\n        const now = Date.now();\n        const delay = nextMillis + offset - now;\n        const mergedOpts = Object.assign(Object.assign({}, opts), {\n            jobId,\n            delay: delay < 0 ? 0 : delay,\n            timestamp: now,\n            prevMillis: nextMillis,\n            repeatJobKey: jobSchedulerId\n        });\n        mergedOpts.repeat = Object.assign(Object.assign({}, opts.repeat), {\n            offset,\n            count: currentCount,\n            startDate: ((_a = opts.repeat) === null || _a === void 0 ? void 0 : _a.startDate) ? new Date(opts.repeat.startDate).getTime() : undefined,\n            endDate: ((_b = opts.repeat) === null || _b === void 0 ? void 0 : _b.endDate) ? new Date(opts.repeat.endDate).getTime() : undefined\n        });\n        return mergedOpts;\n    }\n    async removeJobScheduler(jobSchedulerId) {\n        return this.scripts.removeJobScheduler(jobSchedulerId);\n    }\n    async getSchedulerData(client, key, next) {\n        const jobData = await client.hgetall(this.toKey(\"repeat:\" + key));\n        return this.transformSchedulerData(key, jobData, next);\n    }\n    transformSchedulerData(key, jobData, next) {\n        if (jobData) {\n            const jobSchedulerData = {\n                key,\n                name: jobData.name,\n                next\n            };\n            if (jobData.ic) {\n                jobSchedulerData.iterationCount = parseInt(jobData.ic);\n            }\n            if (jobData.limit) {\n                jobSchedulerData.limit = parseInt(jobData.limit);\n            }\n            if (jobData.startDate) {\n                jobSchedulerData.startDate = parseInt(jobData.startDate);\n            }\n            if (jobData.endDate) {\n                jobSchedulerData.endDate = parseInt(jobData.endDate);\n            }\n            if (jobData.tz) {\n                jobSchedulerData.tz = jobData.tz;\n            }\n            if (jobData.pattern) {\n                jobSchedulerData.pattern = jobData.pattern;\n            }\n            if (jobData.every) {\n                jobSchedulerData.every = parseInt(jobData.every);\n            }\n            if (jobData.offset) {\n                jobSchedulerData.offset = parseInt(jobData.offset);\n            }\n            if (jobData.data || jobData.opts) {\n                jobSchedulerData.template = this.getTemplateFromJSON(jobData.data, jobData.opts);\n            }\n            return jobSchedulerData;\n        }\n        // TODO: remove this check and keyToData as it is here only to support legacy code\n        if (key.includes(\":\")) {\n            return this.keyToData(key, next);\n        }\n    }\n    keyToData(key, next) {\n        const data = key.split(\":\");\n        const pattern = data.slice(4).join(\":\") || null;\n        return {\n            key,\n            name: data[0],\n            id: data[1] || null,\n            endDate: parseInt(data[2]) || null,\n            tz: data[3] || null,\n            pattern,\n            next\n        };\n    }\n    async getScheduler(id) {\n        const [rawJobData, next] = await this.scripts.getJobScheduler(id);\n        return this.transformSchedulerData(id, rawJobData ? (0, utils_1.array2obj)(rawJobData) : null, next ? parseInt(next) : null);\n    }\n    getTemplateFromJSON(rawData, rawOpts) {\n        const template = {};\n        if (rawData) {\n            template.data = JSON.parse(rawData);\n        }\n        if (rawOpts) {\n            template.opts = job_1.Job.optsFromJSON(rawOpts);\n        }\n        return template;\n    }\n    async getJobSchedulers(start = 0, end = -1, asc = false) {\n        const client = await this.client;\n        const jobSchedulersKey = this.keys.repeat;\n        const result = asc ? await client.zrange(jobSchedulersKey, start, end, \"WITHSCORES\") : await client.zrevrange(jobSchedulersKey, start, end, \"WITHSCORES\");\n        const jobs = [];\n        for(let i = 0; i < result.length; i += 2){\n            jobs.push(this.getSchedulerData(client, result[i], parseInt(result[i + 1])));\n        }\n        return Promise.all(jobs);\n    }\n    async getSchedulersCount() {\n        const jobSchedulersKey = this.keys.repeat;\n        const client = await this.client;\n        return client.zcard(jobSchedulersKey);\n    }\n    getSchedulerNextJobId({ nextMillis, jobSchedulerId }) {\n        return `repeat:${jobSchedulerId}:${nextMillis}`;\n    }\n}\nexports.JobScheduler = JobScheduler;\nconst defaultRepeatStrategy = (millis, opts)=>{\n    const { pattern } = opts;\n    const dateFromMillis = new Date(millis);\n    const startDate = opts.startDate && new Date(opts.startDate);\n    const currentDate = startDate > dateFromMillis ? startDate : dateFromMillis;\n    const interval = (0, cron_parser_1.parseExpression)(pattern, Object.assign(Object.assign({}, opts), {\n        currentDate\n    }));\n    try {\n        if (opts.immediately) {\n            return new Date().getTime();\n        } else {\n            return interval.next().getTime();\n        }\n    } catch (e) {\n    // Ignore error\n    }\n};\nexports.defaultRepeatStrategy = defaultRepeatStrategy; //# sourceMappingURL=job-scheduler.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL2NsYXNzZXMvam9iLXNjaGVkdWxlci5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsNkJBQTZCLEdBQUdBLG9CQUFvQixHQUFHLEtBQUs7QUFDNUQsTUFBTUksVUFBVUMsbUJBQU9BLENBQUMsdURBQU87QUFDL0IsTUFBTUMsZ0JBQWdCRCxtQkFBT0EsQ0FBQyxtRUFBYTtBQUMzQyxNQUFNRSxRQUFRRixtQkFBT0EsQ0FBQyxrRUFBTztBQUM3QixNQUFNRyxlQUFlSCxtQkFBT0EsQ0FBQyxnRkFBYztBQUMzQyxNQUFNSSxVQUFVSixtQkFBT0EsQ0FBQyxxRUFBVTtBQUNsQyxNQUFNSyxVQUFVTCxtQkFBT0EsQ0FBQyxxRUFBVTtBQUNsQyxNQUFNRixxQkFBcUJLLGFBQWFHLFNBQVM7SUFDN0NDLFlBQVlDLElBQUksRUFBRUMsSUFBSSxFQUFFQyxVQUFVLENBQUU7UUFDaEMsS0FBSyxDQUFDRixNQUFNQyxNQUFNQztRQUNsQixJQUFJLENBQUNDLGNBQWMsR0FDZixLQUFNQyxRQUFRLElBQUlILEtBQUtHLFFBQVEsQ0FBQ0QsY0FBYyxJQUFLaEIsUUFBUUUscUJBQXFCO0lBQ3hGO0lBQ0EsTUFBTWdCLG1CQUFtQkMsY0FBYyxFQUFFQyxVQUFVLEVBQUVDLE9BQU8sRUFBRUMsT0FBTyxFQUFFUixJQUFJLEVBQUUsRUFBRVMsUUFBUSxFQUFFQyxVQUFVLEVBQUUsRUFBRTtRQUNuRyxNQUFNLEVBQUVDLEtBQUssRUFBRUMsS0FBSyxFQUFFQyxPQUFPLEVBQUVDLE1BQU0sRUFBRSxHQUFHUjtRQUMxQyxJQUFJTyxXQUFXRixPQUFPO1lBQ2xCLE1BQU0sSUFBSUksTUFBTTtRQUNwQjtRQUNBLElBQUksQ0FBQ0YsV0FBVyxDQUFDRixPQUFPO1lBQ3BCLE1BQU0sSUFBSUksTUFBTTtRQUNwQjtRQUNBLElBQUlULFdBQVdVLFdBQVcsSUFB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Q0FBQ1o7SUFDeEI7SUFDQWpDLHNCQUFzQixFQUFFckMsVUFBVSxFQUFFeEIsY0FBYyxFQUFHLEVBQUU7UUFDbkQsT0FBTyxDQUFDLE9BQU8sRUFBRUEsZUFBZSxDQUFDLEVBQUV3QixXQUFXLENBQUM7SUFDbkQ7QUFDSjtBQUNBM0Msb0JBQW9CLEdBQUdHO0FBQ3ZCLE1BQU1ELHdCQUF3QixDQUFDNEgsUUFBUWhIO0lBQ25DLE1BQU0sRUFBRWEsT0FBTyxFQUFFLEdBQUdiO0lBQ3BCLE1BQU1pSCxpQkFBaUIsSUFBSTFGLEtBQUt5RjtJQUNoQyxNQUFNL0YsWUFBWWpCLEtBQUtpQixTQUFTLElBQUksSUFBSU0sS0FBS3ZCLEtBQUtpQixTQUFTO0lBQzNELE1BQU1pRyxjQUFjakcsWUFBWWdHLGlCQUFpQmhHLFlBQVlnRztJQUM3RCxNQUFNRSxXQUFXLENBQUMsR0FBRzNILGNBQWM0SCxlQUFlLEVBQUV2RyxTQUFTN0IsT0FBTzRELE1BQU0sQ0FBQzVELE9BQU80RCxNQUFNLENBQUMsQ0FBQyxHQUFHNUMsT0FBTztRQUFFa0g7SUFBWTtJQUNsSCxJQUFJO1FBQ0EsSUFBSWxILEtBQUtnQixXQUFXLEVBQUU7WUFDbEIsT0FBTyxJQUFJTyxPQUFPRSxPQUFPO1FBQzdCLE9BQ0s7WUFDRCxPQUFPMEYsU0FBUzFDLElBQUksR0FBR2hELE9BQU87UUFDbEM7SUFDSixFQUNBLE9BQU80RixHQUFHO0lBQ04sZUFBZTtJQUNuQjtBQUNKO0FBQ0FuSSw2QkFBNkIsR0FBR0UsdUJBQ2hDLHlDQUF5QyIsInNvdXJjZXMiOlsid2VicGFjazovL29ubHlmYW5zLXBsYXRmb3JtLy4vbm9kZV9tb2R1bGVzL2J1bGxtcS9kaXN0L2Nqcy9jbGFzc2VzL2pvYi1zY2hlZHVsZXIuanM/ZGE5YiJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuZGVmYXVsdFJlcGVhdFN0cmF0ZWd5ID0gZXhwb3J0cy5Kb2JTY2hlZHVsZXIgPSB2b2lkIDA7XG5jb25zdCB0c2xpYl8xID0gcmVxdWlyZShcInRzbGliXCIpO1xuY29uc3QgY3Jvbl9wYXJzZXJfMSA9IHJlcXVpcmUoXCJjcm9uLXBhcnNlclwiKTtcbmNvbnN0IGpvYl8xID0gcmVxdWlyZShcIi4vam9iXCIpO1xuY29uc3QgcXVldWVfYmFzZV8xID0gcmVxdWlyZShcIi4vcXVldWUtYmFzZVwiKTtcbmNvbnN0IGVudW1zXzEgPSByZXF1aXJlKFwiLi4vZW51bXNcIik7XG5jb25zdCB1dGlsc18xID0gcmVxdWlyZShcIi4uL3V0aWxzXCIpO1xuY2xhc3MgSm9iU2NoZWR1bGVyIGV4dGVuZHMgcXVldWVfYmFzZV8xLlF1ZXVlQmFzZSB7XG4gICAgY29uc3RydWN0b3IobmFtZSwgb3B0cywgQ29ubmVjdGlvbikge1xuICAgICAgICBzdXBlcihuYW1lLCBvcHRzLCBDb25uZWN0aW9uKTtcbiAgICAgICAgdGhpcy5yZXBlYXRTdHJhdGVneSA9XG4gICAgICAgICAgICAob3B0cy5zZXR0aW5ncyAmJiBvcHRzLnNldHRpbmdzLnJlcGVhdFN0cmF0ZWd5KSB8fCBleHBvcnRzLmRlZmF1bHRSZXBlYXRTdHJhdGVneTtcbiAgICB9XG4gICAgYXN5bmMgdXBzZXJ0Sm9iU2NoZWR1bGVyKGpvYlNjaGVkdWxlcklkLCByZXBlYXRPcHRzLCBqb2JOYW1lLCBqb2JEYXRhLCBvcHRzLCB7IG92ZXJyaWRlLCBwcm9kdWNlcklkIH0pIHtcbiAgICAgICAgY29uc3QgeyBldmVyeSwgbGltaXQsIHBhdHRlcm4sIG9mZnNldCB9ID0gcmVwZWF0T3B0cztcbiAgICAgICAgaWYgKHBhdHRlcm4gJiYgZXZlcnkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQm90aCAucGF0dGVybiBhbmQgLmV2ZXJ5IG9wdGlvbnMgYXJlIGRlZmluZWQgZm9yIHRoaXMgcmVwZWF0YWJsZSBqb2InKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXBhdHRlcm4gJiYgIWV2ZXJ5KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0VpdGhlciAucGF0dGVybiBvciAuZXZlcnkgb3B0aW9ucyBtdXN0IGJlIGRlZmluZWQgZm9yIHRoaXMgcmVwZWF0YWJsZSBqb2InKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVwZWF0T3B0cy5pbW1lZGlhdGVseSAmJiByZXBlYXRPcHRzLnN0YXJ0RGF0ZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdCb3RoIC5pbW1lZGlhdGVseSBhbmQgLnN0YXJ0RGF0ZSBvcHRpb25zIGFyZSBkZWZpbmVkIGZvciB0aGlzIHJlcGVhdGFibGUgam9iJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlcGVhdE9wdHMuaW1tZWRpYXRlbHkgJiYgcmVwZWF0T3B0cy5ldmVyeSkge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKFwiVXNpbmcgb3B0aW9uIGltbWVkaWF0ZWx5IHdpdGggZXZlcnkgZG9lcyBub3QgYWZmZWN0IHRoZSBqb2IncyBzY2hlZHVsZS4gSm9iIHdpbGwgcnVuIGltbWVkaWF0ZWx5IGFueXdheS5cIik7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQ2hlY2sgaWYgd2UgcmVhY2hlZCB0aGUgbGltaXQgb2YgdGhlIHJlcGVhdGFibGUgam9iJ3MgaXRlcmF0aW9uc1xuICAgICAgICBjb25zdCBpdGVyYXRpb25Db3VudCA9IHJlcGVhdE9wdHMuY291bnQgPyByZXBlYXRPcHRzLmNvdW50ICsgMSA6IDE7XG4gICAgICAgIGlmICh0eXBlb2YgcmVwZWF0T3B0cy5saW1pdCAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgICAgIGl0ZXJhdGlvbkNvdW50ID4gcmVwZWF0T3B0cy5saW1pdCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIENoZWNrIGlmIHdlIHJlYWNoZWQgdGhlIGVuZCBkYXRlIG9mIHRoZSByZXBlYXRhYmxlIGpvYlxuICAgICAgICBsZXQgbm93ID0gRGF0ZS5ub3coKTtcbiAgICAgICAgY29uc3QgeyBlbmREYXRlIH0gPSByZXBlYXRPcHRzO1xuICAgICAgICBpZiAoZW5kRGF0ZSAmJiBub3cgPiBuZXcgRGF0ZShlbmREYXRlKS5nZXRUaW1lKCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwcmV2TWlsbGlzID0gb3B0cy5wcmV2TWlsbGlzIHx8IDA7XG4gICAgICAgIG5vdyA9IHByZXZNaWxsaXMgPCBub3cgPyBub3cgOiBwcmV2TWlsbGlzO1xuICAgICAgICAvLyBDaGVjayBpZiB3ZSBoYXZlIGEgc3RhcnQgZGF0ZSBmb3IgdGhlIHJlcGVhdGFibGUgam9iXG4gICAgICAgIGNvbnN0IHsgaW1tZWRpYXRlbHkgfSA9IHJlcGVhdE9wdHMsIGZpbHRlcmVkUmVwZWF0T3B0cyA9IHRzbGliXzEuX19yZXN0KHJlcGVhdE9wdHMsIFtcImltbWVkaWF0ZWx5XCJdKTtcbiAgICAgICAgbGV0IG5leHRNaWxsaXM7XG4gICAgICAgIGNvbnN0IG5ld09mZnNldCA9IG51bGw7XG4gICAgICAgIGlmIChwYXR0ZXJuKSB7XG4gICAgICAgICAgICBuZXh0TWlsbGlzID0gYXdhaXQgdGhpcy5yZXBlYXRTdHJhdGVneShub3csIHJlcGVhdE9wdHMsIGpvYk5hbWUpO1xuICAgICAgICAgICAgaWYgKG5leHRNaWxsaXMgPCBub3cpIHtcbiAgICAgICAgICAgICAgICBuZXh0TWlsbGlzID0gbm93O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChuZXh0TWlsbGlzIHx8IGV2ZXJ5KSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy50cmFjZShlbnVtc18xLlNwYW5LaW5kLlBST0RVQ0VSLCAnYWRkJywgYCR7dGhpcy5uYW1lfS4ke2pvYk5hbWV9YCwgYXN5bmMgKHNwYW4sIHNyY1Byb3BhZ2F0aW9uTWVkYXRhZGEpID0+IHtcbiAgICAgICAgICAgICAgICB2YXIgX2EsIF9iO1xuICAgICAgICAgICAgICAgIGxldCB0ZWxlbWV0cnkgPSBvcHRzLnRlbGVtZXRyeTtcbiAgICAgICAgICAgICAgICBpZiAoc3JjUHJvcGFnYXRpb25NZWRhdGFkYSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBvbWl0Q29udGV4dCA9IChfYSA9IG9wdHMudGVsZW1ldHJ5KSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Eub21pdENvbnRleHQ7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbGVtZXRyeU1ldGFkYXRhID0gKChfYiA9IG9wdHMudGVsZW1ldHJ5KSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IubWV0YWRhdGEpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAoIW9taXRDb250ZXh0ICYmIHNyY1Byb3BhZ2F0aW9uTWVkYXRhZGEpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGVsZW1ldHJ5TWV0YWRhdGEgfHwgb21pdENvbnRleHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlbGVtZXRyeSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRhZGF0YTogdGVsZW1ldHJ5TWV0YWRhdGEsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb21pdENvbnRleHQsXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IG1lcmdlZE9wdHMgPSB0aGlzLmdldE5leHRKb2JPcHRzKG5leHRNaWxsaXMsIGpvYlNjaGVkdWxlcklkLCBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIG9wdHMpLCB7IHJlcGVhdDogZmlsdGVyZWRSZXBlYXRPcHRzLCB0ZWxlbWV0cnkgfSksIGl0ZXJhdGlvbkNvdW50LCBuZXdPZmZzZXQpO1xuICAgICAgICAgICAgICAgIGlmIChvdmVycmlkZSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBDbGFtcCBuZXh0TWlsbGlzIHRvIG5vdyBpZiBpdCdzIGluIHRoZSBwYXN0XG4gICAgICAgICAgICAgICAgICAgIGlmIChuZXh0TWlsbGlzIDwgbm93KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXh0TWlsbGlzID0gbm93O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IFtqb2JJZCwgZGVsYXldID0gYXdhaXQgdGhpcy5zY3JpcHRzLmFkZEpvYlNjaGVkdWxlcihqb2JTY2hlZHVsZXJJZCwgbmV4dE1pbGxpcywgSlNPTi5zdHJpbmdpZnkodHlwZW9mIGpvYkRhdGEgPT09ICd1bmRlZmluZWQnID8ge30gOiBqb2JEYXRhKSwgam9iXzEuSm9iLm9wdHNBc0pTT04ob3B0cyksIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IGpvYk5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGFydERhdGU6IHJlcGVhdE9wdHMuc3RhcnREYXRlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBuZXcgRGF0ZShyZXBlYXRPcHRzLnN0YXJ0RGF0ZSkuZ2V0VGltZSgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBlbmREYXRlOiBlbmREYXRlID8gbmV3IERhdGUoZW5kRGF0ZSkuZ2V0VGltZSgpIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHo6IHJlcGVhdE9wdHMudHosXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXR0ZXJuLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXZlcnksXG4gICAgICAgICAgICAgICAgICAgICAgICBsaW1pdCxcbiAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldDogbmV3T2Zmc2V0LFxuICAgICAgICAgICAgICAgICAgICB9LCBqb2JfMS5Kb2Iub3B0c0FzSlNPTihtZXJnZWRPcHRzKSwgcHJvZHVjZXJJZCk7XG4gICAgICAgICAgICAgICAgICAgIC8vIEVuc3VyZSBkZWxheSBpcyBhIG51bWJlciAoRHJhZ29uZmx5ZGIgbWF5IHJldHVybiBpdCBhcyBhIHN0cmluZylcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbnVtZXJpY0RlbGF5ID0gdHlwZW9mIGRlbGF5ID09PSAnc3RyaW5nJyA/IHBhcnNlSW50KGRlbGF5LCAxMCkgOiBkZWxheTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgam9iID0gbmV3IHRoaXMuSm9iKHRoaXMsIGpvYk5hbWUsIGpvYkRhdGEsIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgbWVyZ2VkT3B0cyksIHsgZGVsYXk6IG51bWVyaWNEZWxheSB9KSwgam9iSWQpO1xuICAgICAgICAgICAgICAgICAgICBqb2IuaWQgPSBqb2JJZDtcbiAgICAgICAgICAgICAgICAgICAgc3BhbiA9PT0gbnVsbCB8fCBzcGFuID09PSB2b2lkIDAgPyB2b2lkIDAgOiBzcGFuLnNldEF0dHJpYnV0ZXMoe1xuICAgICAgICAgICAgICAgICAgICAgICAgW2VudW1zXzEuVGVsZW1ldHJ5QXR0cmlidXRlcy5Kb2JTY2hlZHVsZXJJZF06IGpvYlNjaGVkdWxlcklkLFxuICAgICAgICAgICAgICAgICAgICAgICAgW2VudW1zXzEuVGVsZW1ldHJ5QXR0cmlidXRlcy5Kb2JJZF06IGpvYi5pZCxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBqb2I7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBqb2JJZCA9IGF3YWl0IHRoaXMuc2NyaXB0cy51cGRhdGVKb2JTY2hlZHVsZXJOZXh0TWlsbGlzKGpvYlNjaGVkdWxlcklkLCBuZXh0TWlsbGlzLCBKU09OLnN0cmluZ2lmeSh0eXBlb2Ygam9iRGF0YSA9PT0gJ3VuZGVmaW5lZCcgPyB7fSA6IGpvYkRhdGEpLCBqb2JfMS5Kb2Iub3B0c0FzSlNPTihtZXJnZWRPcHRzKSwgcHJvZHVjZXJJZCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChqb2JJZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgam9iID0gbmV3IHRoaXMuSm9iKHRoaXMsIGpvYk5hbWUsIGpvYkRhdGEsIG1lcmdlZE9wdHMsIGpvYklkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGpvYi5pZCA9IGpvYklkO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3BhbiA9PT0gbnVsbCB8fCBzcGFuID09PSB2b2lkIDAgPyB2b2lkIDAgOiBzcGFuLnNldEF0dHJpYnV0ZXMoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtlbnVtc18xLlRlbGVtZXRyeUF0dHJpYnV0ZXMuSm9iU2NoZWR1bGVySWRdOiBqb2JTY2hlZHVsZXJJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbZW51bXNfMS5UZWxlbWV0cnlBdHRyaWJ1dGVzLkpvYklkXTogam9iLmlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gam9iO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0TmV4dEpvYk9wdHMobmV4dE1pbGxpcywgam9iU2NoZWR1bGVySWQsIG9wdHMsIGN1cnJlbnRDb3VudCwgb2Zmc2V0KSB7XG4gICAgICAgIHZhciBfYSwgX2I7XG4gICAgICAgIC8vXG4gICAgICAgIC8vIEdlbmVyYXRlIHVuaXF1ZSBqb2IgaWQgZm9yIHRoaXMgaXRlcmF0aW9uLlxuICAgICAgICAvL1xuICAgICAgICBjb25zdCBqb2JJZCA9IHRoaXMuZ2V0U2NoZWR1bGVyTmV4dEpvYklkKHtcbiAgICAgICAgICAgIGpvYlNjaGVkdWxlcklkLFxuICAgICAgICAgICAgbmV4dE1pbGxpcyxcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG4gICAgICAgIGNvbnN0IGRlbGF5ID0gbmV4dE1pbGxpcyArIG9mZnNldCAtIG5vdztcbiAgICAgICAgY29uc3QgbWVyZ2VkT3B0cyA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgb3B0cyksIHsgam9iSWQsIGRlbGF5OiBkZWxheSA8IDAgPyAwIDogZGVsYXksIHRpbWVzdGFtcDogbm93LCBwcmV2TWlsbGlzOiBuZXh0TWlsbGlzLCByZXBlYXRKb2JLZXk6IGpvYlNjaGVkdWxlcklkIH0pO1xuICAgICAgICBtZXJnZWRPcHRzLnJlcGVhdCA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgb3B0cy5yZXBlYXQpLCB7IG9mZnNldCwgY291bnQ6IGN1cnJlbnRDb3VudCwgc3RhcnREYXRlOiAoKF9hID0gb3B0cy5yZXBlYXQpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5zdGFydERhdGUpXG4gICAgICAgICAgICAgICAgPyBuZXcgRGF0ZShvcHRzLnJlcGVhdC5zdGFydERhdGUpLmdldFRpbWUoKVxuICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkLCBlbmREYXRlOiAoKF9iID0gb3B0cy5yZXBlYXQpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5lbmREYXRlKVxuICAgICAgICAgICAgICAgID8gbmV3IERhdGUob3B0cy5yZXBlYXQuZW5kRGF0ZSkuZ2V0VGltZSgpXG4gICAgICAgICAgICAgICAgOiB1bmRlZmluZWQgfSk7XG4gICAgICAgIHJldHVybiBtZXJnZWRPcHRzO1xuICAgIH1cbiAgICBhc3luYyByZW1vdmVKb2JTY2hlZHVsZXIoam9iU2NoZWR1bGVySWQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2NyaXB0cy5yZW1vdmVKb2JTY2hlZHVsZXIoam9iU2NoZWR1bGVySWQpO1xuICAgIH1cbiAgICBhc3luYyBnZXRTY2hlZHVsZXJEYXRhKGNsaWVudCwga2V5LCBuZXh0KSB7XG4gICAgICAgIGNvbnN0IGpvYkRhdGEgPSBhd2FpdCBjbGllbnQuaGdldGFsbCh0aGlzLnRvS2V5KCdyZXBlYXQ6JyArIGtleSkpO1xuICAgICAgICByZXR1cm4gdGhpcy50cmFuc2Zvcm1TY2hlZHVsZXJEYXRhKGtleSwgam9iRGF0YSwgbmV4dCk7XG4gICAgfVxuICAgIHRyYW5zZm9ybVNjaGVkdWxlckRhdGEoa2V5LCBqb2JEYXRhLCBuZXh0KSB7XG4gICAgICAgIGlmIChqb2JEYXRhKSB7XG4gICAgICAgICAgICBjb25zdCBqb2JTY2hlZHVsZXJEYXRhID0ge1xuICAgICAgICAgICAgICAgIGtleSxcbiAgICAgICAgICAgICAgICBuYW1lOiBqb2JEYXRhLm5hbWUsXG4gICAgICAgICAgICAgICAgbmV4dCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpZiAoam9iRGF0YS5pYykge1xuICAgICAgICAgICAgICAgIGpvYlNjaGVkdWxlckRhdGEuaXRlcmF0aW9uQ291bnQgPSBwYXJzZUludChqb2JEYXRhLmljKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChqb2JEYXRhLmxpbWl0KSB7XG4gICAgICAgICAgICAgICAgam9iU2NoZWR1bGVyRGF0YS5saW1pdCA9IHBhcnNlSW50KGpvYkRhdGEubGltaXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGpvYkRhdGEuc3RhcnREYXRlKSB7XG4gICAgICAgICAgICAgICAgam9iU2NoZWR1bGVyRGF0YS5zdGFydERhdGUgPSBwYXJzZUludChqb2JEYXRhLnN0YXJ0RGF0ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoam9iRGF0YS5lbmREYXRlKSB7XG4gICAgICAgICAgICAgICAgam9iU2NoZWR1bGVyRGF0YS5lbmREYXRlID0gcGFyc2VJbnQoam9iRGF0YS5lbmREYXRlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChqb2JEYXRhLnR6KSB7XG4gICAgICAgICAgICAgICAgam9iU2NoZWR1bGVyRGF0YS50eiA9IGpvYkRhdGEudHo7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoam9iRGF0YS5wYXR0ZXJuKSB7XG4gICAgICAgICAgICAgICAgam9iU2NoZWR1bGVyRGF0YS5wYXR0ZXJuID0gam9iRGF0YS5wYXR0ZXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGpvYkRhdGEuZXZlcnkpIHtcbiAgICAgICAgICAgICAgICBqb2JTY2hlZHVsZXJEYXRhLmV2ZXJ5ID0gcGFyc2VJbnQoam9iRGF0YS5ldmVyeSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoam9iRGF0YS5vZmZzZXQpIHtcbiAgICAgICAgICAgICAgICBqb2JTY2hlZHVsZXJEYXRhLm9mZnNldCA9IHBhcnNlSW50KGpvYkRhdGEub2Zmc2V0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChqb2JEYXRhLmRhdGEgfHwgam9iRGF0YS5vcHRzKSB7XG4gICAgICAgICAgICAgICAgam9iU2NoZWR1bGVyRGF0YS50ZW1wbGF0ZSA9IHRoaXMuZ2V0VGVtcGxhdGVGcm9tSlNPTihqb2JEYXRhLmRhdGEsIGpvYkRhdGEub3B0cyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gam9iU2NoZWR1bGVyRGF0YTtcbiAgICAgICAgfVxuICAgICAgICAvLyBUT0RPOiByZW1vdmUgdGhpcyBjaGVjayBhbmQga2V5VG9EYXRhIGFzIGl0IGlzIGhlcmUgb25seSB0byBzdXBwb3J0IGxlZ2FjeSBjb2RlXG4gICAgICAgIGlmIChrZXkuaW5jbHVkZXMoJzonKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMua2V5VG9EYXRhKGtleSwgbmV4dCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAga2V5VG9EYXRhKGtleSwgbmV4dCkge1xuICAgICAgICBjb25zdCBkYXRhID0ga2V5LnNwbGl0KCc6Jyk7XG4gICAgICAgIGNvbnN0IHBhdHRlcm4gPSBkYXRhLnNsaWNlKDQpLmpvaW4oJzonKSB8fCBudWxsO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAga2V5LFxuICAgICAgICAgICAgbmFtZTogZGF0YVswXSxcbiAgICAgICAgICAgIGlkOiBkYXRhWzFdIHx8IG51bGwsXG4gICAgICAgICAgICBlbmREYXRlOiBwYXJzZUludChkYXRhWzJdKSB8fCBudWxsLFxuICAgICAgICAgICAgdHo6IGRhdGFbM10gfHwgbnVsbCxcbiAgICAgICAgICAgIHBhdHRlcm4sXG4gICAgICAgICAgICBuZXh0LFxuICAgICAgICB9O1xuICAgIH1cbiAgICBhc3luYyBnZXRTY2hlZHVsZXIoaWQpIHtcbiAgICAgICAgY29uc3QgW3Jhd0pvYkRhdGEsIG5leHRdID0gYXdhaXQgdGhpcy5zY3JpcHRzLmdldEpvYlNjaGVkdWxlcihpZCk7XG4gICAgICAgIHJldHVybiB0aGlzLnRyYW5zZm9ybVNjaGVkdWxlckRhdGEoaWQsIHJhd0pvYkRhdGEgPyAoMCwgdXRpbHNfMS5hcnJheTJvYmopKHJhd0pvYkRhdGEpIDogbnVsbCwgbmV4dCA/IHBhcnNlSW50KG5leHQpIDogbnVsbCk7XG4gICAgfVxuICAgIGdldFRlbXBsYXRlRnJvbUpTT04ocmF3RGF0YSwgcmF3T3B0cykge1xuICAgICAgICBjb25zdCB0ZW1wbGF0ZSA9IHt9O1xuICAgICAgICBpZiAocmF3RGF0YSkge1xuICAgICAgICAgICAgdGVtcGxhdGUuZGF0YSA9IEpTT04ucGFyc2UocmF3RGF0YSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJhd09wdHMpIHtcbiAgICAgICAgICAgIHRlbXBsYXRlLm9wdHMgPSBqb2JfMS5Kb2Iub3B0c0Zyb21KU09OKHJhd09wdHMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0ZW1wbGF0ZTtcbiAgICB9XG4gICAgYXN5bmMgZ2V0Sm9iU2NoZWR1bGVycyhzdGFydCA9IDAsIGVuZCA9IC0xLCBhc2MgPSBmYWxzZSkge1xuICAgICAgICBjb25zdCBjbGllbnQgPSBhd2FpdCB0aGlzLmNsaWVudDtcbiAgICAgICAgY29uc3Qgam9iU2NoZWR1bGVyc0tleSA9IHRoaXMua2V5cy5yZXBlYXQ7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGFzY1xuICAgICAgICAgICAgPyBhd2FpdCBjbGllbnQuenJhbmdlKGpvYlNjaGVkdWxlcnNLZXksIHN0YXJ0LCBlbmQsICdXSVRIU0NPUkVTJylcbiAgICAgICAgICAgIDogYXdhaXQgY2xpZW50LnpyZXZyYW5nZShqb2JTY2hlZHVsZXJzS2V5LCBzdGFydCwgZW5kLCAnV0lUSFNDT1JFUycpO1xuICAgICAgICBjb25zdCBqb2JzID0gW107XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmVzdWx0Lmxlbmd0aDsgaSArPSAyKSB7XG4gICAgICAgICAgICBqb2JzLnB1c2godGhpcy5nZXRTY2hlZHVsZXJEYXRhKGNsaWVudCwgcmVzdWx0W2ldLCBwYXJzZUludChyZXN1bHRbaSArIDFdKSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBQcm9taXNlLmFsbChqb2JzKTtcbiAgICB9XG4gICAgYXN5bmMgZ2V0U2NoZWR1bGVyc0NvdW50KCkge1xuICAgICAgICBjb25zdCBqb2JTY2hlZHVsZXJzS2V5ID0gdGhpcy5rZXlzLnJlcGVhdDtcbiAgICAgICAgY29uc3QgY2xpZW50ID0gYXdhaXQgdGhpcy5jbGllbnQ7XG4gICAgICAgIHJldHVybiBjbGllbnQuemNhcmQoam9iU2NoZWR1bGVyc0tleSk7XG4gICAgfVxuICAgIGdldFNjaGVkdWxlck5leHRKb2JJZCh7IG5leHRNaWxsaXMsIGpvYlNjaGVkdWxlcklkLCB9KSB7XG4gICAgICAgIHJldHVybiBgcmVwZWF0OiR7am9iU2NoZWR1bGVySWR9OiR7bmV4dE1pbGxpc31gO1xuICAgIH1cbn1cbmV4cG9ydHMuSm9iU2NoZWR1bGVyID0gSm9iU2NoZWR1bGVyO1xuY29uc3QgZGVmYXVsdFJlcGVhdFN0cmF0ZWd5ID0gKG1pbGxpcywgb3B0cykgPT4ge1xuICAgIGNvbnN0IHsgcGF0dGVybiB9ID0gb3B0cztcbiAgICBjb25zdCBkYXRlRnJvbU1pbGxpcyA9IG5ldyBEYXRlKG1pbGxpcyk7XG4gICAgY29uc3Qgc3RhcnREYXRlID0gb3B0cy5zdGFydERhdGUgJiYgbmV3IERhdGUob3B0cy5zdGFydERhdGUpO1xuICAgIGNvbnN0IGN1cnJlbnREYXRlID0gc3RhcnREYXRlID4gZGF0ZUZyb21NaWxsaXMgPyBzdGFydERhdGUgOiBkYXRlRnJvbU1pbGxpcztcbiAgICBjb25zdCBpbnRlcnZhbCA9ICgwLCBjcm9uX3BhcnNlcl8xLnBhcnNlRXhwcmVzc2lvbikocGF0dGVybiwgT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBvcHRzKSwgeyBjdXJyZW50RGF0ZSB9KSk7XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKG9wdHMuaW1tZWRpYXRlbHkpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBpbnRlcnZhbC5uZXh0KCkuZ2V0VGltZSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNhdGNoIChlKSB7XG4gICAgICAgIC8vIElnbm9yZSBlcnJvclxuICAgIH1cbn07XG5leHBvcnRzLmRlZmF1bHRSZXBlYXRTdHJhdGVneSA9IGRlZmF1bHRSZXBlYXRTdHJhdGVneTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWpvYi1zY2hlZHVsZXIuanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiZGVmYXVsdFJlcGVhdFN0cmF0ZWd5IiwiSm9iU2NoZWR1bGVyIiwidHNsaWJfMSIsInJlcXVpcmUiLCJjcm9uX3BhcnNlcl8xIiwiam9iXzEiLCJxdWV1ZV9iYXNlXzEiLCJlbnVtc18xIiwidXRpbHNfMSIsIlF1ZXVlQmFzZSIsImNvbnN0cnVjdG9yIiwibmFtZSIsIm9wdHMiLCJDb25uZWN0aW9uIiwicmVwZWF0U3RyYXRlZ3kiLCJzZXR0aW5ncyIsInVwc2VydEpvYlNjaGVkdWxlciIsImpvYlNjaGVkdWxlcklkIiwicmVwZWF0T3B0cyIsImpvYk5hbWUiLCJqb2JEYXRhIiwib3ZlcnJpZGUiLCJwcm9kdWNlcklkIiwiZXZlcnkiLCJsaW1pdCIsInBhdHRlcm4iLCJvZmZzZXQiLCJFcnJvciIsImltbWVkaWF0ZWx5Iiwic3RhcnREYXRlIiwiY29uc29sZSIsIndhcm4iLCJpdGVyYXRpb25Db3VudCIsImNvdW50Iiwibm93IiwiRGF0ZSIsImVuZERhdGUiLCJnZXRUaW1lIiwicHJldk1pbGxpcyIsImZpbHRlcmVkUmVwZWF0T3B0cyIsIl9fcmVzdCIsIm5leHRNaWxsaXMiLCJuZXdPZmZzZXQiLCJ0cmFjZSIsIlNwYW5LaW5kIiwiUFJPRFVDRVIiLCJzcGFuIiwic3JjUHJvcGFnYXRpb25NZWRhdGFkYSIsIl9hIiwiX2IiLCJ0ZWxlbWV0cnkiLCJvbWl0Q29udGV4dCIsInRlbGVtZXRyeU1ldGFkYXRhIiwibWV0YWRhdGEiLCJtZXJnZWRPcHRzIiwiZ2V0TmV4dEpvYk9wdHMiLCJhc3NpZ24iLCJyZXBlYXQiLCJqb2JJZCIsImRlbGF5Iiwic2NyaXB0cyIsImFkZEpvYlNjaGVkdWxlciIsIkpTT04iLCJzdHJpbmdpZnkiLCJKb2IiLCJvcHRzQXNKU09OIiwidW5kZWZpbmVkIiwidHoiLCJudW1lcmljRGVsYXkiLCJwYXJzZUludCIsImpvYiIsImlkIiwic2V0QXR0cmlidXRlcyIsIlRlbGVtZXRyeUF0dHJpYnV0ZXMiLCJKb2JTY2hlZHVsZXJJZCIsIkpvYklkIiwidXBkYXRlSm9iU2NoZWR1bGVyTmV4dE1pbGxpcyIsImN1cnJlbnRDb3VudCIsImdldFNjaGVkdWxlck5leHRKb2JJZCIsInRpbWVzdGFtcCIsInJlcGVhdEpvYktleSIsInJlbW92ZUpvYlNjaGVkdWxlciIsImdldFNjaGVkdWxlckRhdGEiLCJjbGllbnQiLCJrZXkiLCJuZXh0IiwiaGdldGFsbCIsInRvS2V5IiwidHJhbnNmb3JtU2NoZWR1bGVyRGF0YSIsImpvYlNjaGVkdWxlckRhdGEiLCJpYyIsImRhdGEiLCJ0ZW1wbGF0ZSIsImdldFRlbXBsYXRlRnJvbUpTT04iLCJpbmNsdWRlcyIsImtleVRvRGF0YSIsInNwbGl0Iiwic2xpY2UiLCJqb2luIiwiZ2V0U2NoZWR1bGVyIiwicmF3Sm9iRGF0YSIsImdldEpvYlNjaGVkdWxlciIsImFycmF5Mm9iaiIsInJhd0RhdGEiLCJyYXdPcHRzIiwicGFyc2UiLCJvcHRzRnJvbUpTT04iLCJnZXRKb2JTY2hlZHVsZXJzIiwic3RhcnQiLCJlbmQiLCJhc2MiLCJqb2JTY2hlZHVsZXJzS2V5Iiwia2V5cyIsInJlc3VsdCIsInpyYW5nZSIsInpyZXZyYW5nZSIsImpvYnMiLCJpIiwibGVuZ3RoIiwicHVzaCIsIlByb21pc2UiLCJhbGwiLCJnZXRTY2hlZHVsZXJzQ291bnQiLCJ6Y2FyZCIsIm1pbGxpcyIsImRhdGVGcm9tTWlsbGlzIiwiY3VycmVudERhdGUiLCJpbnRlcnZhbCIsInBhcnNlRXhwcmVzc2lvbiIsImUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/classes/job-scheduler.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/classes/job.js":
/*!*****************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/classes/job.js ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.Job = exports.PRIORITY_LIMIT = void 0;\nconst tslib_1 = __webpack_require__(/*! tslib */ \"(rsc)/./node_modules/tslib/tslib.es6.mjs\");\nconst util_1 = __webpack_require__(/*! util */ \"util\");\nconst utils_1 = __webpack_require__(/*! ../utils */ \"(rsc)/./node_modules/bullmq/dist/cjs/utils/index.js\");\nconst create_scripts_1 = __webpack_require__(/*! ../utils/create-scripts */ \"(rsc)/./node_modules/bullmq/dist/cjs/utils/create-scripts.js\");\nconst backoffs_1 = __webpack_require__(/*! ./backoffs */ \"(rsc)/./node_modules/bullmq/dist/cjs/classes/backoffs.js\");\nconst unrecoverable_error_1 = __webpack_require__(/*! ./errors/unrecoverable-error */ \"(rsc)/./node_modules/bullmq/dist/cjs/classes/errors/unrecoverable-error.js\");\nconst enums_1 = __webpack_require__(/*! ../enums */ \"(rsc)/./node_modules/bullmq/dist/cjs/enums/index.js\");\nconst logger = (0, util_1.debuglog)(\"bull\");\nexports.PRIORITY_LIMIT = 2 ** 21;\n/**\n * Job\n *\n * This class represents a Job in the queue. Normally job are implicitly created when\n * you add a job to the queue with methods such as Queue.addJob( ... )\n *\n * A Job instance is also passed to the Worker's process function.\n *\n */ class Job {\n    constructor(queue, /**\n     * The name of the Job\n     */ name, /**\n     * The payload for this job.\n     */ data, /**\n     * The options object for this job.\n     */ opts = {}, id){\n        this.queue = queue;\n        this.name = name;\n        this.data = data;\n        this.opts = opts;\n        this.id = id;\n        /**\n         * The progress a job has performed so far.\n         * @defaultValue 0\n         */ this.progress = 0;\n        /**\n         * The value returned by the processor when processing this job.\n         * @defaultValue null\n         */ this.returnvalue = null;\n        /**\n         * Stacktrace for the error (for failed jobs).\n         * @defaultValue null\n         */ this.stacktrace = null;\n        /**\n         * An amount of milliseconds to wait until this job can be processed.\n         * @defaultValue 0\n         */ this.delay = 0;\n        /**\n         * Ranges from 0 (highest priority) to 2 097 152 (lowest priority). Note that\n         * using priorities has a slight impact on performance,\n         * so do not use it if not required.\n         * @defaultValue 0\n         */ this.priority = 0;\n        /**\n         * Number of attempts when job is moved to active.\n         * @defaultValue 0\n         */ this.attemptsStarted = 0;\n        /**\n         * Number of attempts after the job has failed.\n         * @defaultValue 0\n         */ this.attemptsMade = 0;\n        /**\n         * Number of times where job has stalled.\n         * @defaultValue 0\n         */ this.stalledCounter = 0;\n        const _a = this.opts, { repeatJobKey } = _a, restOpts = tslib_1.__rest(_a, [\n            \"repeatJobKey\"\n        ]);\n        this.opts = Object.assign({\n            attempts: 0\n        }, restOpts);\n        this.delay = this.opts.delay;\n        this.priority = this.opts.priority || 0;\n        this.repeatJobKey = repeatJobKey;\n        this.timestamp = opts.timestamp ? opts.timestamp : Date.now();\n        this.opts.backoff = backoffs_1.Backoffs.normalize(opts.backoff);\n        this.parentKey = (0, utils_1.getParentKey)(opts.parent);\n        if (opts.parent) {\n            this.parent = {\n                id: opts.parent.id,\n                queueKey: opts.parent.queue\n            };\n            if (opts.failParentOnFailure) {\n                this.parent.fpof = true;\n            }\n            if (opts.removeDependencyOnFailure) {\n                this.parent.rdof = true;\n            }\n            if (opts.ignoreDependencyOnFailure) {\n                this.parent.idof = true;\n            }\n            if (opts.continueParentOnFailure) {\n                this.parent.cpof = true;\n            }\n        }\n        this.debounceId = opts.debounce ? opts.debounce.id : undefined;\n        this.deduplicationId = opts.deduplication ? opts.deduplication.id : this.debounceId;\n        this.toKey = queue.toKey.bind(queue);\n        this.createScripts();\n        this.queueQualifiedName = queue.qualifiedName;\n    }\n    /**\n     * Creates a new job and adds it to the queue.\n     *\n     * @param queue - the queue where to add the job.\n     * @param name - the name of the job.\n     * @param data - the payload of the job.\n     * @param opts - the options bag for this job.\n     * @returns\n     */ static async create(queue, name, data, opts) {\n        const client = await queue.client;\n        const job = new this(queue, name, data, opts, opts && opts.jobId);\n        job.id = await job.addJob(client, {\n            parentKey: job.parentKey,\n            parentDependenciesKey: job.parentKey ? `${job.parentKey}:dependencies` : \"\"\n        });\n        return job;\n    }\n    /**\n     * Creates a bulk of jobs and adds them atomically to the given queue.\n     *\n     * @param queue -the queue were to add the jobs.\n     * @param jobs - an array of jobs to be added to the queue.\n     * @returns\n     */ static async createBulk(queue, jobs) {\n        const client = await queue.client;\n        const jobInstances = jobs.map((job)=>{\n            var _a;\n            return new this(queue, job.name, job.data, job.opts, (_a = job.opts) === null || _a === void 0 ? void 0 : _a.jobId);\n        });\n        const pipeline = client.pipeline();\n        for (const job of jobInstances){\n            job.addJob(pipeline, {\n                parentKey: job.parentKey,\n                parentDependenciesKey: job.parentKey ? `${job.parentKey}:dependencies` : \"\"\n            });\n        }\n        const results = await pipeline.exec();\n        for(let index = 0; index < results.length; ++index){\n            const [err, id] = results[index];\n            if (err) {\n                throw err;\n            }\n            jobInstances[index].id = id;\n        }\n        return jobInstances;\n    }\n    /**\n     * Instantiates a Job from a JobJsonRaw object (coming from a deserialized JSON object)\n     *\n     * @param queue - the queue where the job belongs to.\n     * @param json - the plain object containing the job.\n     * @param jobId - an optional job id (overrides the id coming from the JSON object)\n     * @returns\n     */ static fromJSON(queue, json, jobId) {\n        const data = JSON.parse(json.data || \"{}\");\n        const opts = Job.optsFromJSON(json.opts);\n        const job = new this(queue, json.name, data, opts, json.id || jobId);\n        job.progress = JSON.parse(json.progress || \"0\");\n        job.delay = parseInt(json.delay);\n        job.priority = parseInt(json.priority);\n        job.timestamp = parseInt(json.timestamp);\n        if (json.finishedOn) {\n            job.finishedOn = parseInt(json.finishedOn);\n        }\n        if (json.processedOn) {\n            job.processedOn = parseInt(json.processedOn);\n        }\n        if (json.rjk) {\n            job.repeatJobKey = json.rjk;\n        }\n        if (json.deid) {\n            job.debounceId = json.deid;\n            job.deduplicationId = json.deid;\n        }\n        if (json.failedReason) {\n            job.failedReason = json.failedReason;\n        }\n        job.attemptsStarted = parseInt(json.ats || \"0\");\n        job.attemptsMade = parseInt(json.attemptsMade || json.atm || \"0\");\n        job.stalledCounter = parseInt(json.stc || \"0\");\n        if (json.defa) {\n            job.deferredFailure = json.defa;\n        }\n        job.stacktrace = getTraces(json.stacktrace);\n        if (typeof json.returnvalue === \"string\") {\n            job.returnvalue = getReturnValue(json.returnvalue);\n        }\n        if (json.parentKey) {\n            job.parentKey = json.parentKey;\n        }\n        if (json.parent) {\n            job.parent = JSON.parse(json.parent);\n        }\n        if (json.pb) {\n            job.processedBy = json.pb;\n        }\n        if (json.nrjid) {\n            job.nextRepeatableJobId = json.nrjid;\n        }\n        return job;\n    }\n    createScripts() {\n        this.scripts = (0, create_scripts_1.createScripts)(this.queue);\n    }\n    static optsFromJSON(rawOpts, optsDecode = utils_1.optsDecodeMap) {\n        const opts = JSON.parse(rawOpts || \"{}\");\n        const optionEntries = Object.entries(opts);\n        const options = {};\n        for (const item of optionEntries){\n            const [attributeName, value] = item;\n            if (optsDecode[attributeName]) {\n                options[optsDecode[attributeName]] = value;\n            } else {\n                if (attributeName === \"tm\") {\n                    options.telemetry = Object.assign(Object.assign({}, options.telemetry), {\n                        metadata: value\n                    });\n                } else if (attributeName === \"omc\") {\n                    options.telemetry = Object.assign(Object.assign({}, options.telemetry), {\n                        omitContext: value\n                    });\n                } else {\n                    options[attributeName] = value;\n                }\n            }\n        }\n        return options;\n    }\n    /**\n     * Fetches a Job from the queue given the passed job id.\n     *\n     * @param queue - the queue where the job belongs to.\n     * @param jobId - the job id.\n     * @returns\n     */ static async fromId(queue, jobId) {\n        // jobId can be undefined if moveJob returns undefined\n        if (jobId) {\n            const client = await queue.client;\n            const jobData = await client.hgetall(queue.toKey(jobId));\n            return (0, utils_1.isEmpty)(jobData) ? undefined : this.fromJSON(queue, jobData, jobId);\n        }\n    }\n    /**\n     * addJobLog\n     *\n     * @param queue - A minimal queue instance\n     * @param jobId - Job id\n     * @param logRow - String with a row of log data to be logged\n     * @param keepLogs - The optional amount of log entries to preserve\n     *\n     * @returns The total number of log entries for this job so far.\n     */ static addJobLog(queue, jobId, logRow, keepLogs) {\n        const scripts = queue.scripts;\n        return scripts.addLog(jobId, logRow, keepLogs);\n    }\n    toJSON() {\n        const _a = this, { queue, scripts } = _a, withoutQueueAndScripts = tslib_1.__rest(_a, [\n            \"queue\",\n            \"scripts\"\n        ]);\n        return withoutQueueAndScripts;\n    }\n    /**\n     * Prepares a job to be serialized for storage in Redis.\n     * @returns\n     */ asJSON() {\n        return (0, utils_1.removeUndefinedFields)({\n            id: this.id,\n            name: this.name,\n            data: JSON.stringify(typeof this.data === \"undefined\" ? {} : this.data),\n            opts: Job.optsAsJSON(this.opts),\n            parent: this.parent ? Object.assign({}, this.parent) : undefined,\n            parentKey: this.parentKey,\n            progress: this.progress,\n            attemptsMade: this.attemptsMade,\n            attemptsStarted: this.attemptsStarted,\n            stalledCounter: this.stalledCounter,\n            finishedOn: this.finishedOn,\n            processedOn: this.processedOn,\n            timestamp: this.timestamp,\n            failedReason: JSON.stringify(this.failedReason),\n            stacktrace: JSON.stringify(this.stacktrace),\n            debounceId: this.debounceId,\n            deduplicationId: this.deduplicationId,\n            repeatJobKey: this.repeatJobKey,\n            returnvalue: JSON.stringify(this.returnvalue),\n            nrjid: this.nextRepeatableJobId\n        });\n    }\n    static optsAsJSON(opts = {}, optsEncode = utils_1.optsEncodeMap) {\n        const optionEntries = Object.entries(opts);\n        const options = {};\n        for (const [attributeName, value] of optionEntries){\n            if (typeof value === \"undefined\") {\n                continue;\n            }\n            if (attributeName in optsEncode) {\n                const compressableAttribute = attributeName;\n                const key = optsEncode[compressableAttribute];\n                options[key] = value;\n            } else {\n                // Handle complex compressable fields separately\n                if (attributeName === \"telemetry\") {\n                    if (value.metadata !== undefined) {\n                        options.tm = value.metadata;\n                    }\n                    if (value.omitContext !== undefined) {\n                        options.omc = value.omitContext;\n                    }\n                } else {\n                    options[attributeName] = value;\n                }\n            }\n        }\n        return options;\n    }\n    /**\n     * Prepares a job to be passed to Sandbox.\n     * @returns\n     */ asJSONSandbox() {\n        return Object.assign(Object.assign({}, this.asJSON()), {\n            queueName: this.queueName,\n            queueQualifiedName: this.queueQualifiedName,\n            prefix: this.prefix\n        });\n    }\n    /**\n     * Updates a job's data\n     *\n     * @param data - the data that will replace the current jobs data.\n     */ updateData(data) {\n        this.data = data;\n        return this.scripts.updateData(this, data);\n    }\n    /**\n     * Updates a job's progress\n     *\n     * @param progress - number or object to be saved as progress.\n     */ async updateProgress(progress) {\n        this.progress = progress;\n        await this.scripts.updateProgress(this.id, progress);\n        this.queue.emit(\"progress\", this, progress);\n    }\n    /**\n     * Logs one row of log data.\n     *\n     * @param logRow - string with log data to be logged.\n     * @returns The total number of log entries for this job so far.\n     */ async log(logRow) {\n        return Job.addJobLog(this.queue, this.id, logRow, this.opts.keepLogs);\n    }\n    /**\n     * Removes child dependency from parent when child is not yet finished\n     *\n     * @returns True if the relationship existed and if it was removed.\n     */ async removeChildDependency() {\n        const childDependencyIsRemoved = await this.scripts.removeChildDependency(this.id, this.parentKey);\n        if (childDependencyIsRemoved) {\n            this.parent = undefined;\n            this.parentKey = undefined;\n            return true;\n        }\n        return false;\n    }\n    /**\n     * Clears job's logs\n     *\n     * @param keepLogs - the amount of log entries to preserve\n     */ async clearLogs(keepLogs) {\n        const client = await this.queue.client;\n        const logsKey = this.toKey(this.id) + \":logs\";\n        if (keepLogs) {\n            await client.ltrim(logsKey, -keepLogs, -1);\n        } else {\n            await client.del(logsKey);\n        }\n    }\n    /**\n     * Completely remove the job from the queue.\n     * Note, this call will throw an exception if the job\n     * is being processed when the call is performed.\n     *\n     * @param opts - Options to remove a job\n     */ async remove({ removeChildren = true } = {}) {\n        await this.queue.waitUntilReady();\n        const queue = this.queue;\n        const job = this;\n        const removed = await this.scripts.remove(job.id, removeChildren);\n        if (removed) {\n            queue.emit(\"removed\", job);\n        } else {\n            throw new Error(`Job ${this.id} could not be removed because it is locked by another worker`);\n        }\n    }\n    /**\n     * Remove all children from this job that are not yet processed,\n     * in other words that are in any other state than completed, failed or active.\n     *\n     * @remarks\n     *  - Jobs with locks (most likely active) are ignored.\n     *  - This method can be slow if the number of children is large (\\> 1000).\n     */ async removeUnprocessedChildren() {\n        const jobId = this.id;\n        await this.scripts.removeUnprocessedChildren(jobId);\n    }\n    /**\n     * Extend the lock for this job.\n     *\n     * @param token - unique token for the lock\n     * @param duration - lock duration in milliseconds\n     */ extendLock(token, duration) {\n        return this.scripts.extendLock(this.id, token, duration);\n    }\n    /**\n     * Moves a job to the completed queue.\n     * Returned job to be used with Queue.prototype.nextJobFromJobData.\n     *\n     * @param returnValue - The jobs success message.\n     * @param token - Worker token used to acquire completed job.\n     * @param fetchNext - True when wanting to fetch the next job.\n     * @returns Returns the jobData of the next job in the waiting queue or void.\n     */ async moveToCompleted(returnValue, token, fetchNext = true) {\n        return this.queue.trace(enums_1.SpanKind.INTERNAL, \"complete\", this.queue.name, async (span, dstPropagationMedatadata)=>{\n            var _a, _b;\n            let tm;\n            if (!((_b = (_a = this.opts) === null || _a === void 0 ? void 0 : _a.telemetry) === null || _b === void 0 ? void 0 : _b.omitContext) && dstPropagationMedatadata) {\n                tm = dstPropagationMedatadata;\n            }\n            await this.queue.waitUntilReady();\n            this.returnvalue = returnValue || void 0;\n            const stringifiedReturnValue = (0, utils_1.tryCatch)(JSON.stringify, JSON, [\n                returnValue\n            ]);\n            if (stringifiedReturnValue === utils_1.errorObject) {\n                throw utils_1.errorObject.value;\n            }\n            const args = this.scripts.moveToCompletedArgs(this, stringifiedReturnValue, this.opts.removeOnComplete, token, fetchNext);\n            const result = await this.scripts.moveToFinished(this.id, args);\n            this.finishedOn = args[this.scripts.moveToFinishedKeys.length + 1];\n            this.attemptsMade += 1;\n            return result;\n        });\n    }\n    /**\n     * Moves a job to the wait or prioritized state.\n     *\n     * @param token - Worker token used to acquire completed job.\n     * @returns Returns pttl.\n     */ moveToWait(token) {\n        return this.scripts.moveJobFromActiveToWait(this.id, token);\n    }\n    async shouldRetryJob(err) {\n        if (this.attemptsMade + 1 < this.opts.attempts && !this.discarded && !(err instanceof unrecoverable_error_1.UnrecoverableError || err.name == \"UnrecoverableError\")) {\n            const opts = this.queue.opts;\n            const delay = await backoffs_1.Backoffs.calculate(this.opts.backoff, this.attemptsMade + 1, err, this, opts.settings && opts.settings.backoffStrategy);\n            return [\n                delay == -1 ? false : true,\n                delay == -1 ? 0 : delay\n            ];\n        } else {\n            return [\n                false,\n                0\n            ];\n        }\n    }\n    /**\n     * Moves a job to the failed queue.\n     *\n     * @param err - the jobs error message.\n     * @param token - token to check job is locked by current worker\n     * @param fetchNext - true when wanting to fetch the next job\n     * @returns Returns the jobData of the next job in the waiting queue or void.\n     */ async moveToFailed(err, token, fetchNext = false) {\n        this.failedReason = err === null || err === void 0 ? void 0 : err.message;\n        // Check if an automatic retry should be performed\n        const [shouldRetry, retryDelay] = await this.shouldRetryJob(err);\n        return this.queue.trace(enums_1.SpanKind.INTERNAL, this.getSpanOperation(shouldRetry, retryDelay), this.queue.name, async (span, dstPropagationMedatadata)=>{\n            var _a, _b;\n            let tm;\n            if (!((_b = (_a = this.opts) === null || _a === void 0 ? void 0 : _a.telemetry) === null || _b === void 0 ? void 0 : _b.omitContext) && dstPropagationMedatadata) {\n                tm = dstPropagationMedatadata;\n            }\n            let result;\n            this.updateStacktrace(err);\n            const fieldsToUpdate = {\n                failedReason: this.failedReason,\n                stacktrace: JSON.stringify(this.stacktrace),\n                tm\n            };\n            let finishedOn;\n            if (shouldRetry) {\n                if (retryDelay) {\n                    // Retry with delay\n                    result = await this.scripts.moveToDelayed(this.id, Date.now(), retryDelay, token, {\n                        fieldsToUpdate\n                    });\n                } else {\n                    // Retry immediately\n                    result = await this.scripts.retryJob(this.id, this.opts.lifo, token, {\n                        fieldsToUpdate\n                    });\n                }\n            } else {\n                const args = this.scripts.moveToFailedArgs(this, this.failedReason, this.opts.removeOnFail, token, fetchNext, fieldsToUpdate);\n                result = await this.scripts.moveToFinished(this.id, args);\n                finishedOn = args[this.scripts.moveToFinishedKeys.length + 1];\n            }\n            if (finishedOn && typeof finishedOn === \"number\") {\n                this.finishedOn = finishedOn;\n            }\n            if (retryDelay && typeof retryDelay === \"number\") {\n                this.delay = retryDelay;\n            }\n            this.attemptsMade += 1;\n            return result;\n        });\n    }\n    getSpanOperation(shouldRetry, retryDelay) {\n        if (shouldRetry) {\n            if (retryDelay) {\n                return \"delay\";\n            }\n            return \"retry\";\n        }\n        return \"fail\";\n    }\n    /**\n     * @returns true if the job has completed.\n     */ isCompleted() {\n        return this.isInZSet(\"completed\");\n    }\n    /**\n     * @returns true if the job has failed.\n     */ isFailed() {\n        return this.isInZSet(\"failed\");\n    }\n    /**\n     * @returns true if the job is delayed.\n     */ isDelayed() {\n        return this.isInZSet(\"delayed\");\n    }\n    /**\n     * @returns true if the job is waiting for children.\n     */ isWaitingChildren() {\n        return this.isInZSet(\"waiting-children\");\n    }\n    /**\n     * @returns true of the job is active.\n     */ isActive() {\n        return this.isInList(\"active\");\n    }\n    /**\n     * @returns true if the job is waiting.\n     */ async isWaiting() {\n        return await this.isInList(\"wait\") || await this.isInList(\"paused\");\n    }\n    /**\n     * @returns the queue name this job belongs to.\n     */ get queueName() {\n        return this.queue.name;\n    }\n    /**\n     * @returns the prefix that is used.\n     */ get prefix() {\n        return this.queue.opts.prefix;\n    }\n    /**\n     * Get current state.\n     *\n     * @returns Returns one of these values:\n     * 'completed', 'failed', 'delayed', 'active', 'waiting', 'waiting-children', 'unknown'.\n     */ getState() {\n        return this.scripts.getState(this.id);\n    }\n    /**\n     * Change delay of a delayed job.\n     *\n     * Reschedules a delayed job by setting a new delay from the current time.\n     * For example, calling changeDelay(5000) will reschedule the job to execute\n     * 5000 milliseconds (5 seconds) from now, regardless of the original delay.\n     *\n     * @param delay - milliseconds from now when the job should be processed.\n     * @returns void\n     * @throws JobNotExist\n     * This exception is thrown if jobId is missing.\n     * @throws JobNotInState\n     * This exception is thrown if job is not in delayed state.\n     */ async changeDelay(delay) {\n        await this.scripts.changeDelay(this.id, delay);\n        this.delay = delay;\n    }\n    /**\n     * Change job priority.\n     *\n     * @param opts - options containing priority and lifo values.\n     * @returns void\n     */ async changePriority(opts) {\n        await this.scripts.changePriority(this.id, opts.priority, opts.lifo);\n        this.priority = opts.priority || 0;\n    }\n    /**\n     * Get this jobs children result values if any.\n     *\n     * @returns Object mapping children job keys with their values.\n     */ async getChildrenValues() {\n        const client = await this.queue.client;\n        const result = await client.hgetall(this.toKey(`${this.id}:processed`));\n        if (result) {\n            return (0, utils_1.parseObjectValues)(result);\n        }\n    }\n    /**\n     * Retrieves the failures of child jobs that were explicitly ignored while using ignoreDependencyOnFailure option.\n     * This method is useful for inspecting which child jobs were intentionally ignored when an error occured.\n     * @see {@link https://docs.bullmq.io/guide/flows/ignore-dependency}\n     *\n     * @returns Object mapping children job keys with their failure values.\n     */ async getIgnoredChildrenFailures() {\n        const client = await this.queue.client;\n        return client.hgetall(this.toKey(`${this.id}:failed`));\n    }\n    /**\n     * Get job's children failure values that were ignored if any.\n     *\n     * @deprecated This method is deprecated and will be removed in v6. Use getIgnoredChildrenFailures instead.\n     *\n     * @returns Object mapping children job keys with their failure values.\n     */ async getFailedChildrenValues() {\n        const client = await this.queue.client;\n        return client.hgetall(this.toKey(`${this.id}:failed`));\n    }\n    /**\n     * Get children job keys if this job is a parent and has children.\n     * @remarks\n     * Count options before Redis v7.2 works as expected with any quantity of entries\n     * on processed/unprocessed dependencies, since v7.2 you must consider that count\n     * won't have any effect until processed/unprocessed dependencies have a length\n     * greater than 127\n     * @see {@link https://redis.io/docs/management/optimization/memory-optimization/#redis--72}\n     * @see {@link https://docs.bullmq.io/guide/flows#getters}\n     * @returns dependencies separated by processed, unprocessed, ignored and failed.\n     */ async getDependencies(opts = {}) {\n        const client = await this.queue.client;\n        const multi = client.multi();\n        if (!opts.processed && !opts.unprocessed && !opts.ignored && !opts.failed) {\n            multi.hgetall(this.toKey(`${this.id}:processed`));\n            multi.smembers(this.toKey(`${this.id}:dependencies`));\n            multi.hgetall(this.toKey(`${this.id}:failed`));\n            multi.zrange(this.toKey(`${this.id}:unsuccessful`), 0, -1);\n            const [[err1, processed], [err2, unprocessed], [err3, ignored], [err4, failed]] = await multi.exec();\n            return {\n                processed: (0, utils_1.parseObjectValues)(processed),\n                unprocessed,\n                failed,\n                ignored\n            };\n        } else {\n            const defaultOpts = {\n                cursor: 0,\n                count: 20\n            };\n            const childrenResultOrder = [];\n            if (opts.processed) {\n                childrenResultOrder.push(\"processed\");\n                const processedOpts = Object.assign(Object.assign({}, defaultOpts), opts.processed);\n                multi.hscan(this.toKey(`${this.id}:processed`), processedOpts.cursor, \"COUNT\", processedOpts.count);\n            }\n            if (opts.unprocessed) {\n                childrenResultOrder.push(\"unprocessed\");\n                const unprocessedOpts = Object.assign(Object.assign({}, defaultOpts), opts.unprocessed);\n                multi.sscan(this.toKey(`${this.id}:dependencies`), unprocessedOpts.cursor, \"COUNT\", unprocessedOpts.count);\n            }\n            if (opts.ignored) {\n                childrenResultOrder.push(\"ignored\");\n                const ignoredOpts = Object.assign(Object.assign({}, defaultOpts), opts.ignored);\n                multi.hscan(this.toKey(`${this.id}:failed`), ignoredOpts.cursor, \"COUNT\", ignoredOpts.count);\n            }\n            let failedCursor;\n            if (opts.failed) {\n                childrenResultOrder.push(\"failed\");\n                const failedOpts = Object.assign(Object.assign({}, defaultOpts), opts.failed);\n                failedCursor = failedOpts.cursor + failedOpts.count;\n                multi.zrange(this.toKey(`${this.id}:unsuccessful`), failedOpts.cursor, failedOpts.count - 1);\n            }\n            const results = await multi.exec();\n            let processedCursor, processed, unprocessedCursor, unprocessed, failed, ignoredCursor, ignored;\n            childrenResultOrder.forEach((key, index)=>{\n                switch(key){\n                    case \"processed\":\n                        {\n                            processedCursor = results[index][1][0];\n                            const rawProcessed = results[index][1][1];\n                            const transformedProcessed = {};\n                            for(let ind = 0; ind < rawProcessed.length; ++ind){\n                                if (ind % 2) {\n                                    transformedProcessed[rawProcessed[ind - 1]] = JSON.parse(rawProcessed[ind]);\n                                }\n                            }\n                            processed = transformedProcessed;\n                            break;\n                        }\n                    case \"failed\":\n                        {\n                            failed = results[index][1];\n                            break;\n                        }\n                    case \"ignored\":\n                        {\n                            ignoredCursor = results[index][1][0];\n                            const rawIgnored = results[index][1][1];\n                            const transformedIgnored = {};\n                            for(let ind = 0; ind < rawIgnored.length; ++ind){\n                                if (ind % 2) {\n                                    transformedIgnored[rawIgnored[ind - 1]] = rawIgnored[ind];\n                                }\n                            }\n                            ignored = transformedIgnored;\n                            break;\n                        }\n                    case \"unprocessed\":\n                        {\n                            unprocessedCursor = results[index][1][0];\n                            unprocessed = results[index][1][1];\n                            break;\n                        }\n                }\n            });\n            return Object.assign(Object.assign(Object.assign(Object.assign({}, processedCursor ? {\n                processed,\n                nextProcessedCursor: Number(processedCursor)\n            } : {}), ignoredCursor ? {\n                ignored,\n                nextIgnoredCursor: Number(ignoredCursor)\n            } : {}), failedCursor ? {\n                failed,\n                nextFailedCursor: failedCursor\n            } : {}), unprocessedCursor ? {\n                unprocessed,\n                nextUnprocessedCursor: Number(unprocessedCursor)\n            } : {});\n        }\n    }\n    /**\n     * Get children job counts if this job is a parent and has children.\n     *\n     * @returns dependencies count separated by processed, unprocessed, ignored and failed.\n     */ async getDependenciesCount(opts = {}) {\n        const types = [];\n        Object.entries(opts).forEach(([key, value])=>{\n            if (value) {\n                types.push(key);\n            }\n        });\n        const finalTypes = types.length ? types : [\n            \"processed\",\n            \"unprocessed\",\n            \"ignored\",\n            \"failed\"\n        ];\n        const responses = await this.scripts.getDependencyCounts(this.id, finalTypes);\n        const counts = {};\n        responses.forEach((res, index)=>{\n            counts[`${finalTypes[index]}`] = res || 0;\n        });\n        return counts;\n    }\n    /**\n     * Returns a promise the resolves when the job has completed (containing the return value of the job),\n     * or rejects when the job has failed (containing the failedReason).\n     *\n     * @param queueEvents - Instance of QueueEvents.\n     * @param ttl - Time in milliseconds to wait for job to finish before timing out.\n     */ async waitUntilFinished(queueEvents, ttl) {\n        await this.queue.waitUntilReady();\n        const jobId = this.id;\n        return new Promise(async (resolve, reject)=>{\n            let timeout;\n            if (ttl) {\n                timeout = setTimeout(()=>onFailed(/* eslint-disable max-len */ `Job wait ${this.name} timed out before finishing, no finish notification arrived after ${ttl}ms (id=${jobId})`), ttl);\n            }\n            function onCompleted(args) {\n                removeListeners();\n                resolve(args.returnvalue);\n            }\n            function onFailed(args) {\n                removeListeners();\n                reject(new Error(args.failedReason || args));\n            }\n            const completedEvent = `completed:${jobId}`;\n            const failedEvent = `failed:${jobId}`;\n            queueEvents.on(completedEvent, onCompleted);\n            queueEvents.on(failedEvent, onFailed);\n            this.queue.on(\"closing\", onFailed);\n            const removeListeners = ()=>{\n                clearInterval(timeout);\n                queueEvents.removeListener(completedEvent, onCompleted);\n                queueEvents.removeListener(failedEvent, onFailed);\n                this.queue.removeListener(\"closing\", onFailed);\n            };\n            // Poll once right now to see if the job has already finished. The job may have been completed before we were able\n            // to register the event handlers on the QueueEvents, so we check here to make sure we're not waiting for an event\n            // that has already happened. We block checking the job until the queue events object is actually listening to\n            // Redis so there's no chance that it will miss events.\n            await queueEvents.waitUntilReady();\n            const [status, result] = await this.scripts.isFinished(jobId, true);\n            const finished = status != 0;\n            if (finished) {\n                if (status == -1 || status == 2) {\n                    onFailed({\n                        failedReason: result\n                    });\n                } else {\n                    onCompleted({\n                        returnvalue: getReturnValue(result)\n                    });\n                }\n            }\n        });\n    }\n    /**\n     * Moves the job to the delay set.\n     *\n     * @param timestamp - timestamp when the job should be moved back to \"wait\"\n     * @param token - token to check job is locked by current worker\n     * @returns\n     */ async moveToDelayed(timestamp, token) {\n        const now = Date.now();\n        const delay = timestamp - now;\n        const finalDelay = delay > 0 ? delay : 0;\n        const movedToDelayed = await this.scripts.moveToDelayed(this.id, now, finalDelay, token, {\n            skipAttempt: true\n        });\n        this.delay = finalDelay;\n        return movedToDelayed;\n    }\n    /**\n     * Moves the job to the waiting-children set.\n     *\n     * @param token - Token to check job is locked by current worker\n     * @param opts - The options bag for moving a job to waiting-children.\n     * @returns true if the job was moved\n     */ async moveToWaitingChildren(token, opts = {}) {\n        const movedToWaitingChildren = await this.scripts.moveToWaitingChildren(this.id, token, opts);\n        return movedToWaitingChildren;\n    }\n    /**\n     * Promotes a delayed job so that it starts to be processed as soon as possible.\n     */ async promote() {\n        const jobId = this.id;\n        await this.scripts.promote(jobId);\n        this.delay = 0;\n    }\n    /**\n     * Attempts to retry the job. Only a job that has failed or completed can be retried.\n     *\n     * @param state - completed / failed\n     * @returns A promise that resolves when the job has been successfully moved to the wait queue.\n     * The queue emits a waiting event when the job is successfully moved.\n     * @throws Will throw an error if the job does not exist, is locked, or is not in the expected state.\n     */ retry(state = \"failed\") {\n        this.failedReason = null;\n        this.finishedOn = null;\n        this.processedOn = null;\n        this.returnvalue = null;\n        return this.scripts.reprocessJob(this, state);\n    }\n    /**\n     * Marks a job to not be retried if it fails (even if attempts has been configured)\n     * @deprecated use UnrecoverableError\n     */ discard() {\n        this.discarded = true;\n    }\n    async isInZSet(set) {\n        const client = await this.queue.client;\n        const score = await client.zscore(this.queue.toKey(set), this.id);\n        return score !== null;\n    }\n    async isInList(list) {\n        return this.scripts.isJobInList(this.queue.toKey(list), this.id);\n    }\n    /**\n     * Adds the job to Redis.\n     *\n     * @param client -\n     * @param parentOpts -\n     * @returns\n     */ addJob(client, parentOpts) {\n        const jobData = this.asJSON();\n        this.validateOptions(jobData);\n        return this.scripts.addJob(client, jobData, jobData.opts, this.id, parentOpts);\n    }\n    validateOptions(jobData) {\n        var _a, _b, _c, _d, _e, _f, _g, _h;\n        const exclusiveOptions = [\n            \"removeDependencyOnFailure\",\n            \"failParentOnFailure\",\n            \"continueParentOnFailure\",\n            \"ignoreDependencyOnFailure\"\n        ];\n        const exceedLimit = this.opts.sizeLimit && (0, utils_1.lengthInUtf8Bytes)(jobData.data) > this.opts.sizeLimit;\n        if (exceedLimit) {\n            throw new Error(`The size of job ${this.name} exceeds the limit ${this.opts.sizeLimit} bytes`);\n        }\n        if (this.opts.delay && this.opts.repeat && !((_a = this.opts.repeat) === null || _a === void 0 ? void 0 : _a.count)) {\n            throw new Error(`Delay and repeat options could not be used together`);\n        }\n        const enabledExclusiveOptions = exclusiveOptions.filter((opt)=>this.opts[opt]);\n        if (enabledExclusiveOptions.length > 1) {\n            const optionsList = enabledExclusiveOptions.join(\", \");\n            throw new Error(`The following options cannot be used together: ${optionsList}`);\n        }\n        if ((_b = this.opts) === null || _b === void 0 ? void 0 : _b.jobId) {\n            if (`${parseInt(this.opts.jobId, 10)}` === ((_c = this.opts) === null || _c === void 0 ? void 0 : _c.jobId)) {\n                throw new Error(\"Custom Id cannot be integers\");\n            }\n            // TODO: replace this check in next breaking check with include(':')\n            // By using split we are still keeping compatibility with old repeatable jobs\n            if (((_d = this.opts) === null || _d === void 0 ? void 0 : _d.jobId.includes(\":\")) && ((_f = (_e = this.opts) === null || _e === void 0 ? void 0 : _e.jobId) === null || _f === void 0 ? void 0 : _f.split(\":\").length) !== 3) {\n                throw new Error(\"Custom Id cannot contain :\");\n            }\n        }\n        if (this.opts.priority) {\n            if (Math.trunc(this.opts.priority) !== this.opts.priority) {\n                throw new Error(`Priority should not be float`);\n            }\n            if (this.opts.priority > exports.PRIORITY_LIMIT) {\n                throw new Error(`Priority should be between 0 and ${exports.PRIORITY_LIMIT}`);\n            }\n        }\n        if (this.opts.deduplication) {\n            if (!((_g = this.opts.deduplication) === null || _g === void 0 ? void 0 : _g.id)) {\n                throw new Error(\"Deduplication id must be provided\");\n            }\n        }\n        // TODO: remove in v6\n        if (this.opts.debounce) {\n            if (!((_h = this.opts.debounce) === null || _h === void 0 ? void 0 : _h.id)) {\n                throw new Error(\"Debounce id must be provided\");\n            }\n        }\n        if (typeof this.opts.backoff === \"object\" && typeof this.opts.backoff.jitter === \"number\") {\n            if (this.opts.backoff.jitter < 0 || this.opts.backoff.jitter > 1) {\n                throw new Error(`Jitter should be between 0 and 1`);\n            }\n        }\n    }\n    updateStacktrace(err) {\n        this.stacktrace = this.stacktrace || [];\n        if (err === null || err === void 0 ? void 0 : err.stack) {\n            this.stacktrace.push(err.stack);\n            if (this.opts.stackTraceLimit === 0) {\n                this.stacktrace = [];\n            } else if (this.opts.stackTraceLimit) {\n                this.stacktrace = this.stacktrace.slice(-this.opts.stackTraceLimit);\n            }\n        }\n    }\n}\nexports.Job = Job;\nfunction getTraces(stacktrace) {\n    if (!stacktrace) {\n        return [];\n    }\n    const traces = (0, utils_1.tryCatch)(JSON.parse, JSON, [\n        stacktrace\n    ]);\n    if (traces === utils_1.errorObject || !(traces instanceof Array)) {\n        return [];\n    } else {\n        return traces;\n    }\n}\nfunction getReturnValue(_value) {\n    const value = (0, utils_1.tryCatch)(JSON.parse, JSON, [\n        _value\n    ]);\n    if (value !== utils_1.errorObject) {\n        return value;\n    } else {\n        logger(\"corrupted returnvalue: \" + _value, value);\n    }\n} //# sourceMappingURL=job.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL2NsYXNzZXMvam9iLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCxXQUFXLEdBQUdBLHNCQUFzQixHQUFHLEtBQUs7QUFDNUMsTUFBTUksVUFBVUMsbUJBQU9BLENBQUMsdURBQU87QUFDL0IsTUFBTUMsU0FBU0QsbUJBQU9BLENBQUMsa0JBQU07QUFDN0IsTUFBTUUsVUFBVUYsbUJBQU9BLENBQUMscUVBQVU7QUFDbEMsTUFBTUcsbUJBQW1CSCxtQkFBT0EsQ0FBQyw2RkFBeUI7QUFDMUQsTUFBTUksYUFBYUosbUJBQU9BLENBQUMsNEVBQVk7QUFDdkMsTUFBTUssd0JBQXdCTCxtQkFBT0EsQ0FBQyxnSEFBOEI7QUFDcEUsTUFBTU0sVUFBVU4sbUJBQU9BLENBQUMscUVBQVU7QUFDbEMsTUFBTU8sU0FBUyxDQUFDLEdBQUdOLE9BQU9PLFFBQVEsRUFBRTtBQUNwQ2Isc0JBQXNCLEdBQUcsS0FBSztBQUM5Qjs7Ozs7Ozs7Q0FRQyxHQUNELE1BQU1FO0lBQ0ZZLFlBQVlDLEtBQUssRUFDakI7O0tBRUMsR0FDREMsSUFBSSxFQUNKOztLQUVDLEdBQ0RDLElBQUksRUFDSjs7S0FFQyxHQUNEQyxPQUFPLENBQUMsQ0FBQyxFQUFFQyxFQUFFLENBQUU7UUFDWCxJQUFJLENBQUNKLEtBQUssR0FBR0E7UUFDYixJQUFJLENBQUNDLElBQUksR0FBR0E7UUFDWixJQUFJLENBQUNDLElBQUksR0FBR0E7UUFDWixJQUFJLENBQUNDLElBQUksR0FBR0E7UUFDWixJQUFJLENBQUNDLEVBQUUsR0FBR0E7UUFDVjs7O1NBR0MsR0FDRCxJQUFJLENBQUNDLFFBQVEsR0FBRztRQUNoQjs7O1NBR0MsR0FDRCxJQUFJLENBQUNDLFdBQVcsR0FBRztRQUNuQjs7O1NBR0MsR0FDRCxJQUFJLENBQUNDLFVBQVUsR0FBRztRQUNsQjs7O1NBR0MsR0FDRCxJ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QVU7SUFDekIsSUFBSSxDQUFDQSxZQUFZO1FBQ2IsT0FBTyxFQUFFO0lBQ2I7SUFDQSxNQUFNa1MsU0FBUyxDQUFDLEdBQUdqVCxRQUFRNkosUUFBUSxFQUFFcEYsS0FBS0MsS0FBSyxFQUFFRCxNQUFNO1FBQUMxRDtLQUFXO0lBQ25FLElBQUlrUyxXQUFXalQsUUFBUThKLFdBQVcsSUFBSSxDQUFFbUosQ0FBQUEsa0JBQWtCQyxLQUFJLEdBQUk7UUFDOUQsT0FBTyxFQUFFO0lBQ2IsT0FDSztRQUNELE9BQU9EO0lBQ1g7QUFDSjtBQUNBLFNBQVN6TixlQUFlMk4sTUFBTTtJQUMxQixNQUFNelQsUUFBUSxDQUFDLEdBQUdNLFFBQVE2SixRQUFRLEVBQUVwRixLQUFLQyxLQUFLLEVBQUVELE1BQU07UUFBQzBPO0tBQU87SUFDOUQsSUFBSXpULFVBQVVNLFFBQVE4SixXQUFXLEVBQUU7UUFDL0IsT0FBT3BLO0lBQ1gsT0FDSztRQUNEVyxPQUFPLDRCQUE0QjhTLFFBQVF6VDtJQUMvQztBQUNKLEVBQ0EsK0JBQStCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb25seWZhbnMtcGxhdGZvcm0vLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL2NsYXNzZXMvam9iLmpzP2E2YTYiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkpvYiA9IGV4cG9ydHMuUFJJT1JJVFlfTElNSVQgPSB2b2lkIDA7XG5jb25zdCB0c2xpYl8xID0gcmVxdWlyZShcInRzbGliXCIpO1xuY29uc3QgdXRpbF8xID0gcmVxdWlyZShcInV0aWxcIik7XG5jb25zdCB1dGlsc18xID0gcmVxdWlyZShcIi4uL3V0aWxzXCIpO1xuY29uc3QgY3JlYXRlX3NjcmlwdHNfMSA9IHJlcXVpcmUoXCIuLi91dGlscy9jcmVhdGUtc2NyaXB0c1wiKTtcbmNvbnN0IGJhY2tvZmZzXzEgPSByZXF1aXJlKFwiLi9iYWNrb2Zmc1wiKTtcbmNvbnN0IHVucmVjb3ZlcmFibGVfZXJyb3JfMSA9IHJlcXVpcmUoXCIuL2Vycm9ycy91bnJlY292ZXJhYmxlLWVycm9yXCIpO1xuY29uc3QgZW51bXNfMSA9IHJlcXVpcmUoXCIuLi9lbnVtc1wiKTtcbmNvbnN0IGxvZ2dlciA9ICgwLCB1dGlsXzEuZGVidWdsb2cpKCdidWxsJyk7XG5leHBvcnRzLlBSSU9SSVRZX0xJTUlUID0gMiAqKiAyMTtcbi8qKlxuICogSm9iXG4gKlxuICogVGhpcyBjbGFzcyByZXByZXNlbnRzIGEgSm9iIGluIHRoZSBxdWV1ZS4gTm9ybWFsbHkgam9iIGFyZSBpbXBsaWNpdGx5IGNyZWF0ZWQgd2hlblxuICogeW91IGFkZCBhIGpvYiB0byB0aGUgcXVldWUgd2l0aCBtZXRob2RzIHN1Y2ggYXMgUXVldWUuYWRkSm9iKCAuLi4gKVxuICpcbiAqIEEgSm9iIGluc3RhbmNlIGlzIGFsc28gcGFzc2VkIHRvIHRoZSBXb3JrZXIncyBwcm9jZXNzIGZ1bmN0aW9uLlxuICpcbiAqL1xuY2xhc3MgSm9iIHtcbiAgICBjb25zdHJ1Y3RvcihxdWV1ZSwgXG4gICAgLyoqXG4gICAgICogVGhlIG5hbWUgb2YgdGhlIEpvYlxuICAgICAqL1xuICAgIG5hbWUsIFxuICAgIC8qKlxuICAgICAqIFRoZSBwYXlsb2FkIGZvciB0aGlzIGpvYi5cbiAgICAgKi9cbiAgICBkYXRhLCBcbiAgICAvKipcbiAgICAgKiBUaGUgb3B0aW9ucyBvYmplY3QgZm9yIHRoaXMgam9iLlxuICAgICAqL1xuICAgIG9wdHMgPSB7fSwgaWQpIHtcbiAgICAgICAgdGhpcy5xdWV1ZSA9IHF1ZXVlO1xuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgICAgICB0aGlzLmRhdGEgPSBkYXRhO1xuICAgICAgICB0aGlzLm9wdHMgPSBvcHRzO1xuICAgICAgICB0aGlzLmlkID0gaWQ7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgcHJvZ3Jlc3MgYSBqb2IgaGFzIHBlcmZvcm1lZCBzbyBmYXIuXG4gICAgICAgICAqIEBkZWZhdWx0VmFsdWUgMFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5wcm9ncmVzcyA9IDA7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgdmFsdWUgcmV0dXJuZWQgYnkgdGhlIHByb2Nlc3NvciB3aGVuIHByb2Nlc3NpbmcgdGhpcyBqb2IuXG4gICAgICAgICAqIEBkZWZhdWx0VmFsdWUgbnVsbFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5yZXR1cm52YWx1ZSA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTdGFja3RyYWNlIGZvciB0aGUgZXJyb3IgKGZvciBmYWlsZWQgam9icykuXG4gICAgICAgICAqIEBkZWZhdWx0VmFsdWUgbnVsbFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5zdGFja3RyYWNlID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEFuIGFtb3VudCBvZiBtaWxsaXNlY29uZHMgdG8gd2FpdCB1bnRpbCB0aGlzIGpvYiBjYW4gYmUgcHJvY2Vzc2VkLlxuICAgICAgICAgKiBAZGVmYXVsdFZhbHVlIDBcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZGVsYXkgPSAwO1xuICAgICAgICAvKipcbiAgICAgICAgICogUmFuZ2VzIGZyb20gMCAoaGlnaGVzdCBwcmlvcml0eSkgdG8gMiAwOTcgMTUyIChsb3dlc3QgcHJpb3JpdHkpLiBOb3RlIHRoYXRcbiAgICAgICAgICogdXNpbmcgcHJpb3JpdGllcyBoYXMgYSBzbGlnaHQgaW1wYWN0IG9uIHBlcmZvcm1hbmNlLFxuICAgICAgICAgKiBzbyBkbyBub3QgdXNlIGl0IGlmIG5vdCByZXF1aXJlZC5cbiAgICAgICAgICogQGRlZmF1bHRWYWx1ZSAwXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnByaW9yaXR5ID0gMDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIE51bWJlciBvZiBhdHRlbXB0cyB3aGVuIGpvYiBpcyBtb3ZlZCB0byBhY3RpdmUuXG4gICAgICAgICAqIEBkZWZhdWx0VmFsdWUgMFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5hdHRlbXB0c1N0YXJ0ZWQgPSAwO1xuICAgICAgICAvKipcbiAgICAgICAgICogTnVtYmVyIG9mIGF0dGVtcHRzIGFmdGVyIHRoZSBqb2IgaGFzIGZhaWxlZC5cbiAgICAgICAgICogQGRlZmF1bHRWYWx1ZSAwXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmF0dGVtcHRzTWFkZSA9IDA7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBOdW1iZXIgb2YgdGltZXMgd2hlcmUgam9iIGhhcyBzdGFsbGVkLlxuICAgICAgICAgKiBAZGVmYXVsdFZhbHVlIDBcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuc3RhbGxlZENvdW50ZXIgPSAwO1xuICAgICAgICBjb25zdCBfYSA9IHRoaXMub3B0cywgeyByZXBlYXRKb2JLZXkgfSA9IF9hLCByZXN0T3B0cyA9IHRzbGliXzEuX19yZXN0KF9hLCBbXCJyZXBlYXRKb2JLZXlcIl0pO1xuICAgICAgICB0aGlzLm9wdHMgPSBPYmplY3QuYXNzaWduKHtcbiAgICAgICAgICAgIGF0dGVtcHRzOiAwLFxuICAgICAgICB9LCByZXN0T3B0cyk7XG4gICAgICAgIHRoaXMuZGVsYXkgPSB0aGlzLm9wdHMuZGVsYXk7XG4gICAgICAgIHRoaXMucHJpb3JpdHkgPSB0aGlzLm9wdHMucHJpb3JpdHkgfHwgMDtcbiAgICAgICAgdGhpcy5yZXBlYXRKb2JLZXkgPSByZXBlYXRKb2JLZXk7XG4gICAgICAgIHRoaXMudGltZXN0YW1wID0gb3B0cy50aW1lc3RhbXAgPyBvcHRzLnRpbWVzdGFtcCA6IERhdGUubm93KCk7XG4gICAgICAgIHRoaXMub3B0cy5iYWNrb2ZmID0gYmFja29mZnNfMS5CYWNrb2Zmcy5ub3JtYWxpemUob3B0cy5iYWNrb2ZmKTtcbiAgICAgICAgdGhpcy5wYXJlbnRLZXkgPSAoMCwgdXRpbHNfMS5nZXRQYXJlbnRLZXkpKG9wdHMucGFyZW50KTtcbiAgICAgICAgaWYgKG9wdHMucGFyZW50KSB7XG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IHsgaWQ6IG9wdHMucGFyZW50LmlkLCBxdWV1ZUtleTogb3B0cy5wYXJlbnQucXVldWUgfTtcbiAgICAgICAgICAgIGlmIChvcHRzLmZhaWxQYXJlbnRPbkZhaWx1cmUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5mcG9mID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChvcHRzLnJlbW92ZURlcGVuZGVuY3lPbkZhaWx1cmUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5yZG9mID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChvcHRzLmlnbm9yZURlcGVuZGVuY3lPbkZhaWx1cmUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5pZG9mID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChvcHRzLmNvbnRpbnVlUGFyZW50T25GYWlsdXJlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuY3BvZiA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5kZWJvdW5jZUlkID0gb3B0cy5kZWJvdW5jZSA/IG9wdHMuZGVib3VuY2UuaWQgOiB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuZGVkdXBsaWNhdGlvbklkID0gb3B0cy5kZWR1cGxpY2F0aW9uXG4gICAgICAgICAgICA/IG9wdHMuZGVkdXBsaWNhdGlvbi5pZFxuICAgICAgICAgICAgOiB0aGlzLmRlYm91bmNlSWQ7XG4gICAgICAgIHRoaXMudG9LZXkgPSBxdWV1ZS50b0tleS5iaW5kKHF1ZXVlKTtcbiAgICAgICAgdGhpcy5jcmVhdGVTY3JpcHRzKCk7XG4gICAgICAgIHRoaXMucXVldWVRdWFsaWZpZWROYW1lID0gcXVldWUucXVhbGlmaWVkTmFtZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBqb2IgYW5kIGFkZHMgaXQgdG8gdGhlIHF1ZXVlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHF1ZXVlIC0gdGhlIHF1ZXVlIHdoZXJlIHRvIGFkZCB0aGUgam9iLlxuICAgICAqIEBwYXJhbSBuYW1lIC0gdGhlIG5hbWUgb2YgdGhlIGpvYi5cbiAgICAgKiBAcGFyYW0gZGF0YSAtIHRoZSBwYXlsb2FkIG9mIHRoZSBqb2IuXG4gICAgICogQHBhcmFtIG9wdHMgLSB0aGUgb3B0aW9ucyBiYWcgZm9yIHRoaXMgam9iLlxuICAgICAqIEByZXR1cm5zXG4gICAgICovXG4gICAgc3RhdGljIGFzeW5jIGNyZWF0ZShxdWV1ZSwgbmFtZSwgZGF0YSwgb3B0cykge1xuICAgICAgICBjb25zdCBjbGllbnQgPSBhd2FpdCBxdWV1ZS5jbGllbnQ7XG4gICAgICAgIGNvbnN0IGpvYiA9IG5ldyB0aGlzKHF1ZXVlLCBuYW1lLCBkYXRhLCBvcHRzLCBvcHRzICYmIG9wdHMuam9iSWQpO1xuICAgICAgICBqb2IuaWQgPSBhd2FpdCBqb2IuYWRkSm9iKGNsaWVudCwge1xuICAgICAgICAgICAgcGFyZW50S2V5OiBqb2IucGFyZW50S2V5LFxuICAgICAgICAgICAgcGFyZW50RGVwZW5kZW5jaWVzS2V5OiBqb2IucGFyZW50S2V5XG4gICAgICAgICAgICAgICAgPyBgJHtqb2IucGFyZW50S2V5fTpkZXBlbmRlbmNpZXNgXG4gICAgICAgICAgICAgICAgOiAnJyxcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBqb2I7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBidWxrIG9mIGpvYnMgYW5kIGFkZHMgdGhlbSBhdG9taWNhbGx5IHRvIHRoZSBnaXZlbiBxdWV1ZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBxdWV1ZSAtdGhlIHF1ZXVlIHdlcmUgdG8gYWRkIHRoZSBqb2JzLlxuICAgICAqIEBwYXJhbSBqb2JzIC0gYW4gYXJyYXkgb2Ygam9icyB0byBiZSBhZGRlZCB0byB0aGUgcXVldWUuXG4gICAgICogQHJldHVybnNcbiAgICAgKi9cbiAgICBzdGF0aWMgYXN5bmMgY3JlYXRlQnVsayhxdWV1ZSwgam9icykge1xuICAgICAgICBjb25zdCBjbGllbnQgPSBhd2FpdCBxdWV1ZS5jbGllbnQ7XG4gICAgICAgIGNvbnN0IGpvYkluc3RhbmNlcyA9IGpvYnMubWFwKGpvYiA9PiB7IHZhciBfYTsgcmV0dXJuIG5ldyB0aGlzKHF1ZXVlLCBqb2IubmFtZSwgam9iLmRhdGEsIGpvYi5vcHRzLCAoX2EgPSBqb2Iub3B0cykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmpvYklkKTsgfSk7XG4gICAgICAgIGNvbnN0IHBpcGVsaW5lID0gY2xpZW50LnBpcGVsaW5lKCk7XG4gICAgICAgIGZvciAoY29uc3Qgam9iIG9mIGpvYkluc3RhbmNlcykge1xuICAgICAgICAgICAgam9iLmFkZEpvYihwaXBlbGluZSwge1xuICAgICAgICAgICAgICAgIHBhcmVudEtleTogam9iLnBhcmVudEtleSxcbiAgICAgICAgICAgICAgICBwYXJlbnREZXBlbmRlbmNpZXNLZXk6IGpvYi5wYXJlbnRLZXlcbiAgICAgICAgICAgICAgICAgICAgPyBgJHtqb2IucGFyZW50S2V5fTpkZXBlbmRlbmNpZXNgXG4gICAgICAgICAgICAgICAgICAgIDogJycsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZXN1bHRzID0gKGF3YWl0IHBpcGVsaW5lLmV4ZWMoKSk7XG4gICAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCByZXN1bHRzLmxlbmd0aDsgKytpbmRleCkge1xuICAgICAgICAgICAgY29uc3QgW2VyciwgaWRdID0gcmVzdWx0c1tpbmRleF07XG4gICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgam9iSW5zdGFuY2VzW2luZGV4XS5pZCA9IGlkO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBqb2JJbnN0YW5jZXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEluc3RhbnRpYXRlcyBhIEpvYiBmcm9tIGEgSm9iSnNvblJhdyBvYmplY3QgKGNvbWluZyBmcm9tIGEgZGVzZXJpYWxpemVkIEpTT04gb2JqZWN0KVxuICAgICAqXG4gICAgICogQHBhcmFtIHF1ZXVlIC0gdGhlIHF1ZXVlIHdoZXJlIHRoZSBqb2IgYmVsb25ncyB0by5cbiAgICAgKiBAcGFyYW0ganNvbiAtIHRoZSBwbGFpbiBvYmplY3QgY29udGFpbmluZyB0aGUgam9iLlxuICAgICAqIEBwYXJhbSBqb2JJZCAtIGFuIG9wdGlvbmFsIGpvYiBpZCAob3ZlcnJpZGVzIHRoZSBpZCBjb21pbmcgZnJvbSB0aGUgSlNPTiBvYmplY3QpXG4gICAgICogQHJldHVybnNcbiAgICAgKi9cbiAgICBzdGF0aWMgZnJvbUpTT04ocXVldWUsIGpzb24sIGpvYklkKSB7XG4gICAgICAgIGNvbnN0IGRhdGEgPSBKU09OLnBhcnNlKGpzb24uZGF0YSB8fCAne30nKTtcbiAgICAgICAgY29uc3Qgb3B0cyA9IEpvYi5vcHRzRnJvbUpTT04oanNvbi5vcHRzKTtcbiAgICAgICAgY29uc3Qgam9iID0gbmV3IHRoaXMocXVldWUsIGpzb24ubmFtZSwgZGF0YSwgb3B0cywganNvbi5pZCB8fCBqb2JJZCk7XG4gICAgICAgIGpvYi5wcm9ncmVzcyA9IEpTT04ucGFyc2UoanNvbi5wcm9ncmVzcyB8fCAnMCcpO1xuICAgICAgICBqb2IuZGVsYXkgPSBwYXJzZUludChqc29uLmRlbGF5KTtcbiAgICAgICAgam9iLnByaW9yaXR5ID0gcGFyc2VJbnQoanNvbi5wcmlvcml0eSk7XG4gICAgICAgIGpvYi50aW1lc3RhbXAgPSBwYXJzZUludChqc29uLnRpbWVzdGFtcCk7XG4gICAgICAgIGlmIChqc29uLmZpbmlzaGVkT24pIHtcbiAgICAgICAgICAgIGpvYi5maW5pc2hlZE9uID0gcGFyc2VJbnQoanNvbi5maW5pc2hlZE9uKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoanNvbi5wcm9jZXNzZWRPbikge1xuICAgICAgICAgICAgam9iLnByb2Nlc3NlZE9uID0gcGFyc2VJbnQoanNvbi5wcm9jZXNzZWRPbik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGpzb24ucmprKSB7XG4gICAgICAgICAgICBqb2IucmVwZWF0Sm9iS2V5ID0ganNvbi5yams7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGpzb24uZGVpZCkge1xuICAgICAgICAgICAgam9iLmRlYm91bmNlSWQgPSBqc29uLmRlaWQ7XG4gICAgICAgICAgICBqb2IuZGVkdXBsaWNhdGlvbklkID0ganNvbi5kZWlkO1xuICAgICAgICB9XG4gICAgICAgIGlmIChqc29uLmZhaWxlZFJlYXNvbikge1xuICAgICAgICAgICAgam9iLmZhaWxlZFJlYXNvbiA9IGpzb24uZmFpbGVkUmVhc29uO1xuICAgICAgICB9XG4gICAgICAgIGpvYi5hdHRlbXB0c1N0YXJ0ZWQgPSBwYXJzZUludChqc29uLmF0cyB8fCAnMCcpO1xuICAgICAgICBqb2IuYXR0ZW1wdHNNYWRlID0gcGFyc2VJbnQoanNvbi5hdHRlbXB0c01hZGUgfHwganNvbi5hdG0gfHwgJzAnKTtcbiAgICAgICAgam9iLnN0YWxsZWRDb3VudGVyID0gcGFyc2VJbnQoanNvbi5zdGMgfHwgJzAnKTtcbiAgICAgICAgaWYgKGpzb24uZGVmYSkge1xuICAgICAgICAgICAgam9iLmRlZmVycmVkRmFpbHVyZSA9IGpzb24uZGVmYTtcbiAgICAgICAgfVxuICAgICAgICBqb2Iuc3RhY2t0cmFjZSA9IGdldFRyYWNlcyhqc29uLnN0YWNrdHJhY2UpO1xuICAgICAgICBpZiAodHlwZW9mIGpzb24ucmV0dXJudmFsdWUgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICBqb2IucmV0dXJudmFsdWUgPSBnZXRSZXR1cm5WYWx1ZShqc29uLnJldHVybnZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoanNvbi5wYXJlbnRLZXkpIHtcbiAgICAgICAgICAgIGpvYi5wYXJlbnRLZXkgPSBqc29uLnBhcmVudEtleTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoanNvbi5wYXJlbnQpIHtcbiAgICAgICAgICAgIGpvYi5wYXJlbnQgPSBKU09OLnBhcnNlKGpzb24ucGFyZW50KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoanNvbi5wYikge1xuICAgICAgICAgICAgam9iLnByb2Nlc3NlZEJ5ID0ganNvbi5wYjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoanNvbi5ucmppZCkge1xuICAgICAgICAgICAgam9iLm5leHRSZXBlYXRhYmxlSm9iSWQgPSBqc29uLm5yamlkO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBqb2I7XG4gICAgfVxuICAgIGNyZWF0ZVNjcmlwdHMoKSB7XG4gICAgICAgIHRoaXMuc2NyaXB0cyA9ICgwLCBjcmVhdGVfc2NyaXB0c18xLmNyZWF0ZVNjcmlwdHMpKHRoaXMucXVldWUpO1xuICAgIH1cbiAgICBzdGF0aWMgb3B0c0Zyb21KU09OKHJhd09wdHMsIG9wdHNEZWNvZGUgPSB1dGlsc18xLm9wdHNEZWNvZGVNYXApIHtcbiAgICAgICAgY29uc3Qgb3B0cyA9IEpTT04ucGFyc2UocmF3T3B0cyB8fCAne30nKTtcbiAgICAgICAgY29uc3Qgb3B0aW9uRW50cmllcyA9IE9iamVjdC5lbnRyaWVzKG9wdHMpO1xuICAgICAgICBjb25zdCBvcHRpb25zID0ge307XG4gICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBvcHRpb25FbnRyaWVzKSB7XG4gICAgICAgICAgICBjb25zdCBbYXR0cmlidXRlTmFtZSwgdmFsdWVdID0gaXRlbTtcbiAgICAgICAgICAgIGlmIChvcHRzRGVjb2RlW2F0dHJpYnV0ZU5hbWVdKSB7XG4gICAgICAgICAgICAgICAgb3B0aW9uc1tvcHRzRGVjb2RlW2F0dHJpYnV0ZU5hbWVdXSA9XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKGF0dHJpYnV0ZU5hbWUgPT09ICd0bScpIHtcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy50ZWxlbWV0cnkgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIG9wdGlvbnMudGVsZW1ldHJ5KSwgeyBtZXRhZGF0YTogdmFsdWUgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGF0dHJpYnV0ZU5hbWUgPT09ICdvbWMnKSB7XG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnMudGVsZW1ldHJ5ID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBvcHRpb25zLnRlbGVtZXRyeSksIHsgb21pdENvbnRleHQ6IHZhbHVlIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uc1thdHRyaWJ1dGVOYW1lXSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3B0aW9ucztcbiAgICB9XG4gICAgLyoqXG4gICAgICogRmV0Y2hlcyBhIEpvYiBmcm9tIHRoZSBxdWV1ZSBnaXZlbiB0aGUgcGFzc2VkIGpvYiBpZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBxdWV1ZSAtIHRoZSBxdWV1ZSB3aGVyZSB0aGUgam9iIGJlbG9uZ3MgdG8uXG4gICAgICogQHBhcmFtIGpvYklkIC0gdGhlIGpvYiBpZC5cbiAgICAgKiBAcmV0dXJuc1xuICAgICAqL1xuICAgIHN0YXRpYyBhc3luYyBmcm9tSWQocXVldWUsIGpvYklkKSB7XG4gICAgICAgIC8vIGpvYklkIGNhbiBiZSB1bmRlZmluZWQgaWYgbW92ZUpvYiByZXR1cm5zIHVuZGVmaW5lZFxuICAgICAgICBpZiAoam9iSWQpIHtcbiAgICAgICAgICAgIGNvbnN0IGNsaWVudCA9IGF3YWl0IHF1ZXVlLmNsaWVudDtcbiAgICAgICAgICAgIGNvbnN0IGpvYkRhdGEgPSBhd2FpdCBjbGllbnQuaGdldGFsbChxdWV1ZS50b0tleShqb2JJZCkpO1xuICAgICAgICAgICAgcmV0dXJuICgwLCB1dGlsc18xLmlzRW1wdHkpKGpvYkRhdGEpXG4gICAgICAgICAgICAgICAgPyB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICA6IHRoaXMuZnJvbUpTT04ocXVldWUsIGpvYkRhdGEsIGpvYklkKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBhZGRKb2JMb2dcbiAgICAgKlxuICAgICAqIEBwYXJhbSBxdWV1ZSAtIEEgbWluaW1hbCBxdWV1ZSBpbnN0YW5jZVxuICAgICAqIEBwYXJhbSBqb2JJZCAtIEpvYiBpZFxuICAgICAqIEBwYXJhbSBsb2dSb3cgLSBTdHJpbmcgd2l0aCBhIHJvdyBvZiBsb2cgZGF0YSB0byBiZSBsb2dnZWRcbiAgICAgKiBAcGFyYW0ga2VlcExvZ3MgLSBUaGUgb3B0aW9uYWwgYW1vdW50IG9mIGxvZyBlbnRyaWVzIHRvIHByZXNlcnZlXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBUaGUgdG90YWwgbnVtYmVyIG9mIGxvZyBlbnRyaWVzIGZvciB0aGlzIGpvYiBzbyBmYXIuXG4gICAgICovXG4gICAgc3RhdGljIGFkZEpvYkxvZyhxdWV1ZSwgam9iSWQsIGxvZ1Jvdywga2VlcExvZ3MpIHtcbiAgICAgICAgY29uc3Qgc2NyaXB0cyA9IHF1ZXVlLnNjcmlwdHM7XG4gICAgICAgIHJldHVybiBzY3JpcHRzLmFkZExvZyhqb2JJZCwgbG9nUm93LCBrZWVwTG9ncyk7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgY29uc3QgX2EgPSB0aGlzLCB7IHF1ZXVlLCBzY3JpcHRzIH0gPSBfYSwgd2l0aG91dFF1ZXVlQW5kU2NyaXB0cyA9IHRzbGliXzEuX19yZXN0KF9hLCBbXCJxdWV1ZVwiLCBcInNjcmlwdHNcIl0pO1xuICAgICAgICByZXR1cm4gd2l0aG91dFF1ZXVlQW5kU2NyaXB0cztcbiAgICB9XG4gICAgLyoqXG4gICAgICogUHJlcGFyZXMgYSBqb2IgdG8gYmUgc2VyaWFsaXplZCBmb3Igc3RvcmFnZSBpbiBSZWRpcy5cbiAgICAgKiBAcmV0dXJuc1xuICAgICAqL1xuICAgIGFzSlNPTigpIHtcbiAgICAgICAgcmV0dXJuICgwLCB1dGlsc18xLnJlbW92ZVVuZGVmaW5lZEZpZWxkcykoe1xuICAgICAgICAgICAgaWQ6IHRoaXMuaWQsXG4gICAgICAgICAgICBuYW1lOiB0aGlzLm5hbWUsXG4gICAgICAgICAgICBkYXRhOiBKU09OLnN0cmluZ2lmeSh0eXBlb2YgdGhpcy5kYXRhID09PSAndW5kZWZpbmVkJyA/IHt9IDogdGhpcy5kYXRhKSxcbiAgICAgICAgICAgIG9wdHM6IEpvYi5vcHRzQXNKU09OKHRoaXMub3B0cyksXG4gICAgICAgICAgICBwYXJlbnQ6IHRoaXMucGFyZW50ID8gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5wYXJlbnQpIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgcGFyZW50S2V5OiB0aGlzLnBhcmVudEtleSxcbiAgICAgICAgICAgIHByb2dyZXNzOiB0aGlzLnByb2dyZXNzLFxuICAgICAgICAgICAgYXR0ZW1wdHNNYWRlOiB0aGlzLmF0dGVtcHRzTWFkZSxcbiAgICAgICAgICAgIGF0dGVtcHRzU3RhcnRlZDogdGhpcy5hdHRlbXB0c1N0YXJ0ZWQsXG4gICAgICAgICAgICBzdGFsbGVkQ291bnRlcjogdGhpcy5zdGFsbGVkQ291bnRlcixcbiAgICAgICAgICAgIGZpbmlzaGVkT246IHRoaXMuZmluaXNoZWRPbixcbiAgICAgICAgICAgIHByb2Nlc3NlZE9uOiB0aGlzLnByb2Nlc3NlZE9uLFxuICAgICAgICAgICAgdGltZXN0YW1wOiB0aGlzLnRpbWVzdGFtcCxcbiAgICAgICAgICAgIGZhaWxlZFJlYXNvbjogSlNPTi5zdHJpbmdpZnkodGhpcy5mYWlsZWRSZWFzb24pLFxuICAgICAgICAgICAgc3RhY2t0cmFjZTogSlNPTi5zdHJpbmdpZnkodGhpcy5zdGFja3RyYWNlKSxcbiAgICAgICAgICAgIGRlYm91bmNlSWQ6IHRoaXMuZGVib3VuY2VJZCxcbiAgICAgICAgICAgIGRlZHVwbGljYXRpb25JZDogdGhpcy5kZWR1cGxpY2F0aW9uSWQsXG4gICAgICAgICAgICByZXBlYXRKb2JLZXk6IHRoaXMucmVwZWF0Sm9iS2V5LFxuICAgICAgICAgICAgcmV0dXJudmFsdWU6IEpTT04uc3RyaW5naWZ5KHRoaXMucmV0dXJudmFsdWUpLFxuICAgICAgICAgICAgbnJqaWQ6IHRoaXMubmV4dFJlcGVhdGFibGVKb2JJZCxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHN0YXRpYyBvcHRzQXNKU09OKG9wdHMgPSB7fSwgb3B0c0VuY29kZSA9IHV0aWxzXzEub3B0c0VuY29kZU1hcCkge1xuICAgICAgICBjb25zdCBvcHRpb25FbnRyaWVzID0gT2JqZWN0LmVudHJpZXMob3B0cyk7XG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSB7fTtcbiAgICAgICAgZm9yIChjb25zdCBbYXR0cmlidXRlTmFtZSwgdmFsdWVdIG9mIG9wdGlvbkVudHJpZXMpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoYXR0cmlidXRlTmFtZSBpbiBvcHRzRW5jb2RlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY29tcHJlc3NhYmxlQXR0cmlidXRlID0gYXR0cmlidXRlTmFtZTtcbiAgICAgICAgICAgICAgICBjb25zdCBrZXkgPSBvcHRzRW5jb2RlW2NvbXByZXNzYWJsZUF0dHJpYnV0ZV07XG4gICAgICAgICAgICAgICAgb3B0aW9uc1trZXldID0gdmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBIYW5kbGUgY29tcGxleCBjb21wcmVzc2FibGUgZmllbGRzIHNlcGFyYXRlbHlcbiAgICAgICAgICAgICAgICBpZiAoYXR0cmlidXRlTmFtZSA9PT0gJ3RlbGVtZXRyeScpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlLm1ldGFkYXRhICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMudG0gPSB2YWx1ZS5tZXRhZGF0YTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUub21pdENvbnRleHQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5vbWMgPSB2YWx1ZS5vbWl0Q29udGV4dDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uc1thdHRyaWJ1dGVOYW1lXSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3B0aW9ucztcbiAgICB9XG4gICAgLyoqXG4gICAgICogUHJlcGFyZXMgYSBqb2IgdG8gYmUgcGFzc2VkIHRvIFNhbmRib3guXG4gICAgICogQHJldHVybnNcbiAgICAgKi9cbiAgICBhc0pTT05TYW5kYm94KCkge1xuICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCB0aGlzLmFzSlNPTigpKSwgeyBxdWV1ZU5hbWU6IHRoaXMucXVldWVOYW1lLCBxdWV1ZVF1YWxpZmllZE5hbWU6IHRoaXMucXVldWVRdWFsaWZpZWROYW1lLCBwcmVmaXg6IHRoaXMucHJlZml4IH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIGEgam9iJ3MgZGF0YVxuICAgICAqXG4gICAgICogQHBhcmFtIGRhdGEgLSB0aGUgZGF0YSB0aGF0IHdpbGwgcmVwbGFjZSB0aGUgY3VycmVudCBqb2JzIGRhdGEuXG4gICAgICovXG4gICAgdXBkYXRlRGF0YShkYXRhKSB7XG4gICAgICAgIHRoaXMuZGF0YSA9IGRhdGE7XG4gICAgICAgIHJldHVybiB0aGlzLnNjcmlwdHMudXBkYXRlRGF0YSh0aGlzLCBkYXRhKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlcyBhIGpvYidzIHByb2dyZXNzXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcHJvZ3Jlc3MgLSBudW1iZXIgb3Igb2JqZWN0IHRvIGJlIHNhdmVkIGFzIHByb2dyZXNzLlxuICAgICAqL1xuICAgIGFzeW5jIHVwZGF0ZVByb2dyZXNzKHByb2dyZXNzKSB7XG4gICAgICAgIHRoaXMucHJvZ3Jlc3MgPSBwcm9ncmVzcztcbiAgICAgICAgYXdhaXQgdGhpcy5zY3JpcHRzLnVwZGF0ZVByb2dyZXNzKHRoaXMuaWQsIHByb2dyZXNzKTtcbiAgICAgICAgdGhpcy5xdWV1ZS5lbWl0KCdwcm9ncmVzcycsIHRoaXMsIHByb2dyZXNzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTG9ncyBvbmUgcm93IG9mIGxvZyBkYXRhLlxuICAgICAqXG4gICAgICogQHBhcmFtIGxvZ1JvdyAtIHN0cmluZyB3aXRoIGxvZyBkYXRhIHRvIGJlIGxvZ2dlZC5cbiAgICAgKiBAcmV0dXJucyBUaGUgdG90YWwgbnVtYmVyIG9mIGxvZyBlbnRyaWVzIGZvciB0aGlzIGpvYiBzbyBmYXIuXG4gICAgICovXG4gICAgYXN5bmMgbG9nKGxvZ1Jvdykge1xuICAgICAgICByZXR1cm4gSm9iLmFkZEpvYkxvZyh0aGlzLnF1ZXVlLCB0aGlzLmlkLCBsb2dSb3csIHRoaXMub3B0cy5rZWVwTG9ncyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgY2hpbGQgZGVwZW5kZW5jeSBmcm9tIHBhcmVudCB3aGVuIGNoaWxkIGlzIG5vdCB5ZXQgZmluaXNoZWRcbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFRydWUgaWYgdGhlIHJlbGF0aW9uc2hpcCBleGlzdGVkIGFuZCBpZiBpdCB3YXMgcmVtb3ZlZC5cbiAgICAgKi9cbiAgICBhc3luYyByZW1vdmVDaGlsZERlcGVuZGVuY3koKSB7XG4gICAgICAgIGNvbnN0IGNoaWxkRGVwZW5kZW5jeUlzUmVtb3ZlZCA9IGF3YWl0IHRoaXMuc2NyaXB0cy5yZW1vdmVDaGlsZERlcGVuZGVuY3kodGhpcy5pZCwgdGhpcy5wYXJlbnRLZXkpO1xuICAgICAgICBpZiAoY2hpbGREZXBlbmRlbmN5SXNSZW1vdmVkKSB7XG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIHRoaXMucGFyZW50S2V5ID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDbGVhcnMgam9iJ3MgbG9nc1xuICAgICAqXG4gICAgICogQHBhcmFtIGtlZXBMb2dzIC0gdGhlIGFtb3VudCBvZiBsb2cgZW50cmllcyB0byBwcmVzZXJ2ZVxuICAgICAqL1xuICAgIGFzeW5jIGNsZWFyTG9ncyhrZWVwTG9ncykge1xuICAgICAgICBjb25zdCBjbGllbnQgPSBhd2FpdCB0aGlzLnF1ZXVlLmNsaWVudDtcbiAgICAgICAgY29uc3QgbG9nc0tleSA9IHRoaXMudG9LZXkodGhpcy5pZCkgKyAnOmxvZ3MnO1xuICAgICAgICBpZiAoa2VlcExvZ3MpIHtcbiAgICAgICAgICAgIGF3YWl0IGNsaWVudC5sdHJpbShsb2dzS2V5LCAta2VlcExvZ3MsIC0xKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGF3YWl0IGNsaWVudC5kZWwobG9nc0tleSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29tcGxldGVseSByZW1vdmUgdGhlIGpvYiBmcm9tIHRoZSBxdWV1ZS5cbiAgICAgKiBOb3RlLCB0aGlzIGNhbGwgd2lsbCB0aHJvdyBhbiBleGNlcHRpb24gaWYgdGhlIGpvYlxuICAgICAqIGlzIGJlaW5nIHByb2Nlc3NlZCB3aGVuIHRoZSBjYWxsIGlzIHBlcmZvcm1lZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvcHRzIC0gT3B0aW9ucyB0byByZW1vdmUgYSBqb2JcbiAgICAgKi9cbiAgICBhc3luYyByZW1vdmUoeyByZW1vdmVDaGlsZHJlbiA9IHRydWUgfSA9IHt9KSB7XG4gICAgICAgIGF3YWl0IHRoaXMucXVldWUud2FpdFVudGlsUmVhZHkoKTtcbiAgICAgICAgY29uc3QgcXVldWUgPSB0aGlzLnF1ZXVlO1xuICAgICAgICBjb25zdCBqb2IgPSB0aGlzO1xuICAgICAgICBjb25zdCByZW1vdmVkID0gYXdhaXQgdGhpcy5zY3JpcHRzLnJlbW92ZShqb2IuaWQsIHJlbW92ZUNoaWxkcmVuKTtcbiAgICAgICAgaWYgKHJlbW92ZWQpIHtcbiAgICAgICAgICAgIHF1ZXVlLmVtaXQoJ3JlbW92ZWQnLCBqb2IpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBKb2IgJHt0aGlzLmlkfSBjb3VsZCBub3QgYmUgcmVtb3ZlZCBiZWNhdXNlIGl0IGlzIGxvY2tlZCBieSBhbm90aGVyIHdvcmtlcmApO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlbW92ZSBhbGwgY2hpbGRyZW4gZnJvbSB0aGlzIGpvYiB0aGF0IGFyZSBub3QgeWV0IHByb2Nlc3NlZCxcbiAgICAgKiBpbiBvdGhlciB3b3JkcyB0aGF0IGFyZSBpbiBhbnkgb3RoZXIgc3RhdGUgdGhhbiBjb21wbGV0ZWQsIGZhaWxlZCBvciBhY3RpdmUuXG4gICAgICpcbiAgICAgKiBAcmVtYXJrc1xuICAgICAqICAtIEpvYnMgd2l0aCBsb2NrcyAobW9zdCBsaWtlbHkgYWN0aXZlKSBhcmUgaWdub3JlZC5cbiAgICAgKiAgLSBUaGlzIG1ldGhvZCBjYW4gYmUgc2xvdyBpZiB0aGUgbnVtYmVyIG9mIGNoaWxkcmVuIGlzIGxhcmdlIChcXD4gMTAwMCkuXG4gICAgICovXG4gICAgYXN5bmMgcmVtb3ZlVW5wcm9jZXNzZWRDaGlsZHJlbigpIHtcbiAgICAgICAgY29uc3Qgam9iSWQgPSB0aGlzLmlkO1xuICAgICAgICBhd2FpdCB0aGlzLnNjcmlwdHMucmVtb3ZlVW5wcm9jZXNzZWRDaGlsZHJlbihqb2JJZCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEV4dGVuZCB0aGUgbG9jayBmb3IgdGhpcyBqb2IuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdG9rZW4gLSB1bmlxdWUgdG9rZW4gZm9yIHRoZSBsb2NrXG4gICAgICogQHBhcmFtIGR1cmF0aW9uIC0gbG9jayBkdXJhdGlvbiBpbiBtaWxsaXNlY29uZHNcbiAgICAgKi9cbiAgICBleHRlbmRMb2NrKHRva2VuLCBkdXJhdGlvbikge1xuICAgICAgICByZXR1cm4gdGhpcy5zY3JpcHRzLmV4dGVuZExvY2sodGhpcy5pZCwgdG9rZW4sIGR1cmF0aW9uKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTW92ZXMgYSBqb2IgdG8gdGhlIGNvbXBsZXRlZCBxdWV1ZS5cbiAgICAgKiBSZXR1cm5lZCBqb2IgdG8gYmUgdXNlZCB3aXRoIFF1ZXVlLnByb3RvdHlwZS5uZXh0Sm9iRnJvbUpvYkRhdGEuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcmV0dXJuVmFsdWUgLSBUaGUgam9icyBzdWNjZXNzIG1lc3NhZ2UuXG4gICAgICogQHBhcmFtIHRva2VuIC0gV29ya2VyIHRva2VuIHVzZWQgdG8gYWNxdWlyZSBjb21wbGV0ZWQgam9iLlxuICAgICAqIEBwYXJhbSBmZXRjaE5leHQgLSBUcnVlIHdoZW4gd2FudGluZyB0byBmZXRjaCB0aGUgbmV4dCBqb2IuXG4gICAgICogQHJldHVybnMgUmV0dXJucyB0aGUgam9iRGF0YSBvZiB0aGUgbmV4dCBqb2IgaW4gdGhlIHdhaXRpbmcgcXVldWUgb3Igdm9pZC5cbiAgICAgKi9cbiAgICBhc3luYyBtb3ZlVG9Db21wbGV0ZWQocmV0dXJuVmFsdWUsIHRva2VuLCBmZXRjaE5leHQgPSB0cnVlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnF1ZXVlLnRyYWNlKGVudW1zXzEuU3BhbktpbmQuSU5URVJOQUwsICdjb21wbGV0ZScsIHRoaXMucXVldWUubmFtZSwgYXN5bmMgKHNwYW4sIGRzdFByb3BhZ2F0aW9uTWVkYXRhZGF0YSkgPT4ge1xuICAgICAgICAgICAgdmFyIF9hLCBfYjtcbiAgICAgICAgICAgIGxldCB0bTtcbiAgICAgICAgICAgIGlmICghKChfYiA9IChfYSA9IHRoaXMub3B0cykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnRlbGVtZXRyeSkgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLm9taXRDb250ZXh0KSAmJiBkc3RQcm9wYWdhdGlvbk1lZGF0YWRhdGEpIHtcbiAgICAgICAgICAgICAgICB0bSA9IGRzdFByb3BhZ2F0aW9uTWVkYXRhZGF0YTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGF3YWl0IHRoaXMucXVldWUud2FpdFVudGlsUmVhZHkoKTtcbiAgICAgICAgICAgIHRoaXMucmV0dXJudmFsdWUgPSByZXR1cm5WYWx1ZSB8fCB2b2lkIDA7XG4gICAgICAgICAgICBjb25zdCBzdHJpbmdpZmllZFJldHVyblZhbHVlID0gKDAsIHV0aWxzXzEudHJ5Q2F0Y2gpKEpTT04uc3RyaW5naWZ5LCBKU09OLCBbXG4gICAgICAgICAgICAgICAgcmV0dXJuVmFsdWUsXG4gICAgICAgICAgICBdKTtcbiAgICAgICAgICAgIGlmIChzdHJpbmdpZmllZFJldHVyblZhbHVlID09PSB1dGlsc18xLmVycm9yT2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgdXRpbHNfMS5lcnJvck9iamVjdC52YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGFyZ3MgPSB0aGlzLnNjcmlwdHMubW92ZVRvQ29tcGxldGVkQXJncyh0aGlzLCBzdHJpbmdpZmllZFJldHVyblZhbHVlLCB0aGlzLm9wdHMucmVtb3ZlT25Db21wbGV0ZSwgdG9rZW4sIGZldGNoTmV4dCk7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLnNjcmlwdHMubW92ZVRvRmluaXNoZWQodGhpcy5pZCwgYXJncyk7XG4gICAgICAgICAgICB0aGlzLmZpbmlzaGVkT24gPSBhcmdzW3RoaXMuc2NyaXB0cy5tb3ZlVG9GaW5pc2hlZEtleXMubGVuZ3RoICsgMV07XG4gICAgICAgICAgICB0aGlzLmF0dGVtcHRzTWFkZSArPSAxO1xuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1vdmVzIGEgam9iIHRvIHRoZSB3YWl0IG9yIHByaW9yaXRpemVkIHN0YXRlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHRva2VuIC0gV29ya2VyIHRva2VuIHVzZWQgdG8gYWNxdWlyZSBjb21wbGV0ZWQgam9iLlxuICAgICAqIEByZXR1cm5zIFJldHVybnMgcHR0bC5cbiAgICAgKi9cbiAgICBtb3ZlVG9XYWl0KHRva2VuKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNjcmlwdHMubW92ZUpvYkZyb21BY3RpdmVUb1dhaXQodGhpcy5pZCwgdG9rZW4pO1xuICAgIH1cbiAgICBhc3luYyBzaG91bGRSZXRyeUpvYihlcnIpIHtcbiAgICAgICAgaWYgKHRoaXMuYXR0ZW1wdHNNYWRlICsgMSA8IHRoaXMub3B0cy5hdHRlbXB0cyAmJlxuICAgICAgICAgICAgIXRoaXMuZGlzY2FyZGVkICYmXG4gICAgICAgICAgICAhKGVyciBpbnN0YW5jZW9mIHVucmVjb3ZlcmFibGVfZXJyb3JfMS5VbnJlY292ZXJhYmxlRXJyb3IgfHwgZXJyLm5hbWUgPT0gJ1VucmVjb3ZlcmFibGVFcnJvcicpKSB7XG4gICAgICAgICAgICBjb25zdCBvcHRzID0gdGhpcy5xdWV1ZS5vcHRzO1xuICAgICAgICAgICAgY29uc3QgZGVsYXkgPSBhd2FpdCBiYWNrb2Zmc18xLkJhY2tvZmZzLmNhbGN1bGF0ZSh0aGlzLm9wdHMuYmFja29mZiwgdGhpcy5hdHRlbXB0c01hZGUgKyAxLCBlcnIsIHRoaXMsIG9wdHMuc2V0dGluZ3MgJiYgb3B0cy5zZXR0aW5ncy5iYWNrb2ZmU3RyYXRlZ3kpO1xuICAgICAgICAgICAgcmV0dXJuIFtkZWxheSA9PSAtMSA/IGZhbHNlIDogdHJ1ZSwgZGVsYXkgPT0gLTEgPyAwIDogZGVsYXldO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIFtmYWxzZSwgMF07XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogTW92ZXMgYSBqb2IgdG8gdGhlIGZhaWxlZCBxdWV1ZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBlcnIgLSB0aGUgam9icyBlcnJvciBtZXNzYWdlLlxuICAgICAqIEBwYXJhbSB0b2tlbiAtIHRva2VuIHRvIGNoZWNrIGpvYiBpcyBsb2NrZWQgYnkgY3VycmVudCB3b3JrZXJcbiAgICAgKiBAcGFyYW0gZmV0Y2hOZXh0IC0gdHJ1ZSB3aGVuIHdhbnRpbmcgdG8gZmV0Y2ggdGhlIG5leHQgam9iXG4gICAgICogQHJldHVybnMgUmV0dXJucyB0aGUgam9iRGF0YSBvZiB0aGUgbmV4dCBqb2IgaW4gdGhlIHdhaXRpbmcgcXVldWUgb3Igdm9pZC5cbiAgICAgKi9cbiAgICBhc3luYyBtb3ZlVG9GYWlsZWQoZXJyLCB0b2tlbiwgZmV0Y2hOZXh0ID0gZmFsc2UpIHtcbiAgICAgICAgdGhpcy5mYWlsZWRSZWFzb24gPSBlcnIgPT09IG51bGwgfHwgZXJyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBlcnIubWVzc2FnZTtcbiAgICAgICAgLy8gQ2hlY2sgaWYgYW4gYXV0b21hdGljIHJldHJ5IHNob3VsZCBiZSBwZXJmb3JtZWRcbiAgICAgICAgY29uc3QgW3Nob3VsZFJldHJ5LCByZXRyeURlbGF5XSA9IGF3YWl0IHRoaXMuc2hvdWxkUmV0cnlKb2IoZXJyKTtcbiAgICAgICAgcmV0dXJuIHRoaXMucXVldWUudHJhY2UoZW51bXNfMS5TcGFuS2luZC5JTlRFUk5BTCwgdGhpcy5nZXRTcGFuT3BlcmF0aW9uKHNob3VsZFJldHJ5LCByZXRyeURlbGF5KSwgdGhpcy5xdWV1ZS5uYW1lLCBhc3luYyAoc3BhbiwgZHN0UHJvcGFnYXRpb25NZWRhdGFkYXRhKSA9PiB7XG4gICAgICAgICAgICB2YXIgX2EsIF9iO1xuICAgICAgICAgICAgbGV0IHRtO1xuICAgICAgICAgICAgaWYgKCEoKF9iID0gKF9hID0gdGhpcy5vcHRzKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EudGVsZW1ldHJ5KSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Iub21pdENvbnRleHQpICYmIGRzdFByb3BhZ2F0aW9uTWVkYXRhZGF0YSkge1xuICAgICAgICAgICAgICAgIHRtID0gZHN0UHJvcGFnYXRpb25NZWRhdGFkYXRhO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IHJlc3VsdDtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlU3RhY2t0cmFjZShlcnIpO1xuICAgICAgICAgICAgY29uc3QgZmllbGRzVG9VcGRhdGUgPSB7XG4gICAgICAgICAgICAgICAgZmFpbGVkUmVhc29uOiB0aGlzLmZhaWxlZFJlYXNvbixcbiAgICAgICAgICAgICAgICBzdGFja3RyYWNlOiBKU09OLnN0cmluZ2lmeSh0aGlzLnN0YWNrdHJhY2UpLFxuICAgICAgICAgICAgICAgIHRtLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGxldCBmaW5pc2hlZE9uO1xuICAgICAgICAgICAgaWYgKHNob3VsZFJldHJ5KSB7XG4gICAgICAgICAgICAgICAgaWYgKHJldHJ5RGVsYXkpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gUmV0cnkgd2l0aCBkZWxheVxuICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBhd2FpdCB0aGlzLnNjcmlwdHMubW92ZVRvRGVsYXllZCh0aGlzLmlkLCBEYXRlLm5vdygpLCByZXRyeURlbGF5LCB0b2tlbiwgeyBmaWVsZHNUb1VwZGF0ZSB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFJldHJ5IGltbWVkaWF0ZWx5XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IGF3YWl0IHRoaXMuc2NyaXB0cy5yZXRyeUpvYih0aGlzLmlkLCB0aGlzLm9wdHMubGlmbywgdG9rZW4sIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkc1RvVXBkYXRlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCBhcmdzID0gdGhpcy5zY3JpcHRzLm1vdmVUb0ZhaWxlZEFyZ3ModGhpcywgdGhpcy5mYWlsZWRSZWFzb24sIHRoaXMub3B0cy5yZW1vdmVPbkZhaWwsIHRva2VuLCBmZXRjaE5leHQsIGZpZWxkc1RvVXBkYXRlKTtcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBhd2FpdCB0aGlzLnNjcmlwdHMubW92ZVRvRmluaXNoZWQodGhpcy5pZCwgYXJncyk7XG4gICAgICAgICAgICAgICAgZmluaXNoZWRPbiA9IGFyZ3NbdGhpcy5zY3JpcHRzLm1vdmVUb0ZpbmlzaGVkS2V5cy5sZW5ndGggKyAxXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChmaW5pc2hlZE9uICYmIHR5cGVvZiBmaW5pc2hlZE9uID09PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgICAgIHRoaXMuZmluaXNoZWRPbiA9IGZpbmlzaGVkT247XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocmV0cnlEZWxheSAmJiB0eXBlb2YgcmV0cnlEZWxheSA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRlbGF5ID0gcmV0cnlEZWxheTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuYXR0ZW1wdHNNYWRlICs9IDE7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgZ2V0U3Bhbk9wZXJhdGlvbihzaG91bGRSZXRyeSwgcmV0cnlEZWxheSkge1xuICAgICAgICBpZiAoc2hvdWxkUmV0cnkpIHtcbiAgICAgICAgICAgIGlmIChyZXRyeURlbGF5KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICdkZWxheSc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gJ3JldHJ5JztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gJ2ZhaWwnO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcmV0dXJucyB0cnVlIGlmIHRoZSBqb2IgaGFzIGNvbXBsZXRlZC5cbiAgICAgKi9cbiAgICBpc0NvbXBsZXRlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNJblpTZXQoJ2NvbXBsZXRlZCcpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcmV0dXJucyB0cnVlIGlmIHRoZSBqb2IgaGFzIGZhaWxlZC5cbiAgICAgKi9cbiAgICBpc0ZhaWxlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNJblpTZXQoJ2ZhaWxlZCcpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcmV0dXJucyB0cnVlIGlmIHRoZSBqb2IgaXMgZGVsYXllZC5cbiAgICAgKi9cbiAgICBpc0RlbGF5ZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmlzSW5aU2V0KCdkZWxheWVkJyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEByZXR1cm5zIHRydWUgaWYgdGhlIGpvYiBpcyB3YWl0aW5nIGZvciBjaGlsZHJlbi5cbiAgICAgKi9cbiAgICBpc1dhaXRpbmdDaGlsZHJlbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNJblpTZXQoJ3dhaXRpbmctY2hpbGRyZW4nKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHJldHVybnMgdHJ1ZSBvZiB0aGUgam9iIGlzIGFjdGl2ZS5cbiAgICAgKi9cbiAgICBpc0FjdGl2ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNJbkxpc3QoJ2FjdGl2ZScpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcmV0dXJucyB0cnVlIGlmIHRoZSBqb2IgaXMgd2FpdGluZy5cbiAgICAgKi9cbiAgICBhc3luYyBpc1dhaXRpbmcoKSB7XG4gICAgICAgIHJldHVybiAoYXdhaXQgdGhpcy5pc0luTGlzdCgnd2FpdCcpKSB8fCAoYXdhaXQgdGhpcy5pc0luTGlzdCgncGF1c2VkJykpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcmV0dXJucyB0aGUgcXVldWUgbmFtZSB0aGlzIGpvYiBiZWxvbmdzIHRvLlxuICAgICAqL1xuICAgIGdldCBxdWV1ZU5hbWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnF1ZXVlLm5hbWU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEByZXR1cm5zIHRoZSBwcmVmaXggdGhhdCBpcyB1c2VkLlxuICAgICAqL1xuICAgIGdldCBwcmVmaXgoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnF1ZXVlLm9wdHMucHJlZml4O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgY3VycmVudCBzdGF0ZS5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFJldHVybnMgb25lIG9mIHRoZXNlIHZhbHVlczpcbiAgICAgKiAnY29tcGxldGVkJywgJ2ZhaWxlZCcsICdkZWxheWVkJywgJ2FjdGl2ZScsICd3YWl0aW5nJywgJ3dhaXRpbmctY2hpbGRyZW4nLCAndW5rbm93bicuXG4gICAgICovXG4gICAgZ2V0U3RhdGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNjcmlwdHMuZ2V0U3RhdGUodGhpcy5pZCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENoYW5nZSBkZWxheSBvZiBhIGRlbGF5ZWQgam9iLlxuICAgICAqXG4gICAgICogUmVzY2hlZHVsZXMgYSBkZWxheWVkIGpvYiBieSBzZXR0aW5nIGEgbmV3IGRlbGF5IGZyb20gdGhlIGN1cnJlbnQgdGltZS5cbiAgICAgKiBGb3IgZXhhbXBsZSwgY2FsbGluZyBjaGFuZ2VEZWxheSg1MDAwKSB3aWxsIHJlc2NoZWR1bGUgdGhlIGpvYiB0byBleGVjdXRlXG4gICAgICogNTAwMCBtaWxsaXNlY29uZHMgKDUgc2Vjb25kcykgZnJvbSBub3csIHJlZ2FyZGxlc3Mgb2YgdGhlIG9yaWdpbmFsIGRlbGF5LlxuICAgICAqXG4gICAgICogQHBhcmFtIGRlbGF5IC0gbWlsbGlzZWNvbmRzIGZyb20gbm93IHdoZW4gdGhlIGpvYiBzaG91bGQgYmUgcHJvY2Vzc2VkLlxuICAgICAqIEByZXR1cm5zIHZvaWRcbiAgICAgKiBAdGhyb3dzIEpvYk5vdEV4aXN0XG4gICAgICogVGhpcyBleGNlcHRpb24gaXMgdGhyb3duIGlmIGpvYklkIGlzIG1pc3NpbmcuXG4gICAgICogQHRocm93cyBKb2JOb3RJblN0YXRlXG4gICAgICogVGhpcyBleGNlcHRpb24gaXMgdGhyb3duIGlmIGpvYiBpcyBub3QgaW4gZGVsYXllZCBzdGF0ZS5cbiAgICAgKi9cbiAgICBhc3luYyBjaGFuZ2VEZWxheShkZWxheSkge1xuICAgICAgICBhd2FpdCB0aGlzLnNjcmlwdHMuY2hhbmdlRGVsYXkodGhpcy5pZCwgZGVsYXkpO1xuICAgICAgICB0aGlzLmRlbGF5ID0gZGVsYXk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENoYW5nZSBqb2IgcHJpb3JpdHkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3B0cyAtIG9wdGlvbnMgY29udGFpbmluZyBwcmlvcml0eSBhbmQgbGlmbyB2YWx1ZXMuXG4gICAgICogQHJldHVybnMgdm9pZFxuICAgICAqL1xuICAgIGFzeW5jIGNoYW5nZVByaW9yaXR5KG9wdHMpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5zY3JpcHRzLmNoYW5nZVByaW9yaXR5KHRoaXMuaWQsIG9wdHMucHJpb3JpdHksIG9wdHMubGlmbyk7XG4gICAgICAgIHRoaXMucHJpb3JpdHkgPSBvcHRzLnByaW9yaXR5IHx8IDA7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCB0aGlzIGpvYnMgY2hpbGRyZW4gcmVzdWx0IHZhbHVlcyBpZiBhbnkuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBPYmplY3QgbWFwcGluZyBjaGlsZHJlbiBqb2Iga2V5cyB3aXRoIHRoZWlyIHZhbHVlcy5cbiAgICAgKi9cbiAgICBhc3luYyBnZXRDaGlsZHJlblZhbHVlcygpIHtcbiAgICAgICAgY29uc3QgY2xpZW50ID0gYXdhaXQgdGhpcy5xdWV1ZS5jbGllbnQ7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IChhd2FpdCBjbGllbnQuaGdldGFsbCh0aGlzLnRvS2V5KGAke3RoaXMuaWR9OnByb2Nlc3NlZGApKSk7XG4gICAgICAgIGlmIChyZXN1bHQpIHtcbiAgICAgICAgICAgIHJldHVybiAoMCwgdXRpbHNfMS5wYXJzZU9iamVjdFZhbHVlcykocmVzdWx0KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZXMgdGhlIGZhaWx1cmVzIG9mIGNoaWxkIGpvYnMgdGhhdCB3ZXJlIGV4cGxpY2l0bHkgaWdub3JlZCB3aGlsZSB1c2luZyBpZ25vcmVEZXBlbmRlbmN5T25GYWlsdXJlIG9wdGlvbi5cbiAgICAgKiBUaGlzIG1ldGhvZCBpcyB1c2VmdWwgZm9yIGluc3BlY3Rpbmcgd2hpY2ggY2hpbGQgam9icyB3ZXJlIGludGVudGlvbmFsbHkgaWdub3JlZCB3aGVuIGFuIGVycm9yIG9jY3VyZWQuXG4gICAgICogQHNlZSB7QGxpbmsgaHR0cHM6Ly9kb2NzLmJ1bGxtcS5pby9ndWlkZS9mbG93cy9pZ25vcmUtZGVwZW5kZW5jeX1cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIE9iamVjdCBtYXBwaW5nIGNoaWxkcmVuIGpvYiBrZXlzIHdpdGggdGhlaXIgZmFpbHVyZSB2YWx1ZXMuXG4gICAgICovXG4gICAgYXN5bmMgZ2V0SWdub3JlZENoaWxkcmVuRmFpbHVyZXMoKSB7XG4gICAgICAgIGNvbnN0IGNsaWVudCA9IGF3YWl0IHRoaXMucXVldWUuY2xpZW50O1xuICAgICAgICByZXR1cm4gY2xpZW50LmhnZXRhbGwodGhpcy50b0tleShgJHt0aGlzLmlkfTpmYWlsZWRgKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCBqb2IncyBjaGlsZHJlbiBmYWlsdXJlIHZhbHVlcyB0aGF0IHdlcmUgaWdub3JlZCBpZiBhbnkuXG4gICAgICpcbiAgICAgKiBAZGVwcmVjYXRlZCBUaGlzIG1ldGhvZCBpcyBkZXByZWNhdGVkIGFuZCB3aWxsIGJlIHJlbW92ZWQgaW4gdjYuIFVzZSBnZXRJZ25vcmVkQ2hpbGRyZW5GYWlsdXJlcyBpbnN0ZWFkLlxuICAgICAqXG4gICAgICogQHJldHVybnMgT2JqZWN0IG1hcHBpbmcgY2hpbGRyZW4gam9iIGtleXMgd2l0aCB0aGVpciBmYWlsdXJlIHZhbHVlcy5cbiAgICAgKi9cbiAgICBhc3luYyBnZXRGYWlsZWRDaGlsZHJlblZhbHVlcygpIHtcbiAgICAgICAgY29uc3QgY2xpZW50ID0gYXdhaXQgdGhpcy5xdWV1ZS5jbGllbnQ7XG4gICAgICAgIHJldHVybiBjbGllbnQuaGdldGFsbCh0aGlzLnRvS2V5KGAke3RoaXMuaWR9OmZhaWxlZGApKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IGNoaWxkcmVuIGpvYiBrZXlzIGlmIHRoaXMgam9iIGlzIGEgcGFyZW50IGFuZCBoYXMgY2hpbGRyZW4uXG4gICAgICogQHJlbWFya3NcbiAgICAgKiBDb3VudCBvcHRpb25zIGJlZm9yZSBSZWRpcyB2Ny4yIHdvcmtzIGFzIGV4cGVjdGVkIHdpdGggYW55IHF1YW50aXR5IG9mIGVudHJpZXNcbiAgICAgKiBvbiBwcm9jZXNzZWQvdW5wcm9jZXNzZWQgZGVwZW5kZW5jaWVzLCBzaW5jZSB2Ny4yIHlvdSBtdXN0IGNvbnNpZGVyIHRoYXQgY291bnRcbiAgICAgKiB3b24ndCBoYXZlIGFueSBlZmZlY3QgdW50aWwgcHJvY2Vzc2VkL3VucHJvY2Vzc2VkIGRlcGVuZGVuY2llcyBoYXZlIGEgbGVuZ3RoXG4gICAgICogZ3JlYXRlciB0aGFuIDEyN1xuICAgICAqIEBzZWUge0BsaW5rIGh0dHBzOi8vcmVkaXMuaW8vZG9jcy9tYW5hZ2VtZW50L29wdGltaXphdGlvbi9tZW1vcnktb3B0aW1pemF0aW9uLyNyZWRpcy0tNzJ9XG4gICAgICogQHNlZSB7QGxpbmsgaHR0cHM6Ly9kb2NzLmJ1bGxtcS5pby9ndWlkZS9mbG93cyNnZXR0ZXJzfVxuICAgICAqIEByZXR1cm5zIGRlcGVuZGVuY2llcyBzZXBhcmF0ZWQgYnkgcHJvY2Vzc2VkLCB1bnByb2Nlc3NlZCwgaWdub3JlZCBhbmQgZmFpbGVkLlxuICAgICAqL1xuICAgIGFzeW5jIGdldERlcGVuZGVuY2llcyhvcHRzID0ge30pIHtcbiAgICAgICAgY29uc3QgY2xpZW50ID0gYXdhaXQgdGhpcy5xdWV1ZS5jbGllbnQ7XG4gICAgICAgIGNvbnN0IG11bHRpID0gY2xpZW50Lm11bHRpKCk7XG4gICAgICAgIGlmICghb3B0cy5wcm9jZXNzZWQgJiYgIW9wdHMudW5wcm9jZXNzZWQgJiYgIW9wdHMuaWdub3JlZCAmJiAhb3B0cy5mYWlsZWQpIHtcbiAgICAgICAgICAgIG11bHRpLmhnZXRhbGwodGhpcy50b0tleShgJHt0aGlzLmlkfTpwcm9jZXNzZWRgKSk7XG4gICAgICAgICAgICBtdWx0aS5zbWVtYmVycyh0aGlzLnRvS2V5KGAke3RoaXMuaWR9OmRlcGVuZGVuY2llc2ApKTtcbiAgICAgICAgICAgIG11bHRpLmhnZXRhbGwodGhpcy50b0tleShgJHt0aGlzLmlkfTpmYWlsZWRgKSk7XG4gICAgICAgICAgICBtdWx0aS56cmFuZ2UodGhpcy50b0tleShgJHt0aGlzLmlkfTp1bnN1Y2Nlc3NmdWxgKSwgMCwgLTEpO1xuICAgICAgICAgICAgY29uc3QgW1tlcnIxLCBwcm9jZXNzZWRdLCBbZXJyMiwgdW5wcm9jZXNzZWRdLCBbZXJyMywgaWdub3JlZF0sIFtlcnI0LCBmYWlsZWRdLF0gPSAoYXdhaXQgbXVsdGkuZXhlYygpKTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgcHJvY2Vzc2VkOiAoMCwgdXRpbHNfMS5wYXJzZU9iamVjdFZhbHVlcykocHJvY2Vzc2VkKSxcbiAgICAgICAgICAgICAgICB1bnByb2Nlc3NlZCxcbiAgICAgICAgICAgICAgICBmYWlsZWQsXG4gICAgICAgICAgICAgICAgaWdub3JlZCxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBkZWZhdWx0T3B0cyA9IHtcbiAgICAgICAgICAgICAgICBjdXJzb3I6IDAsXG4gICAgICAgICAgICAgICAgY291bnQ6IDIwLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IGNoaWxkcmVuUmVzdWx0T3JkZXIgPSBbXTtcbiAgICAgICAgICAgIGlmIChvcHRzLnByb2Nlc3NlZCkge1xuICAgICAgICAgICAgICAgIGNoaWxkcmVuUmVzdWx0T3JkZXIucHVzaCgncHJvY2Vzc2VkJyk7XG4gICAgICAgICAgICAgICAgY29uc3QgcHJvY2Vzc2VkT3B0cyA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgZGVmYXVsdE9wdHMpLCBvcHRzLnByb2Nlc3NlZCk7XG4gICAgICAgICAgICAgICAgbXVsdGkuaHNjYW4odGhpcy50b0tleShgJHt0aGlzLmlkfTpwcm9jZXNzZWRgKSwgcHJvY2Vzc2VkT3B0cy5jdXJzb3IsICdDT1VOVCcsIHByb2Nlc3NlZE9wdHMuY291bnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG9wdHMudW5wcm9jZXNzZWQpIHtcbiAgICAgICAgICAgICAgICBjaGlsZHJlblJlc3VsdE9yZGVyLnB1c2goJ3VucHJvY2Vzc2VkJyk7XG4gICAgICAgICAgICAgICAgY29uc3QgdW5wcm9jZXNzZWRPcHRzID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBkZWZhdWx0T3B0cyksIG9wdHMudW5wcm9jZXNzZWQpO1xuICAgICAgICAgICAgICAgIG11bHRpLnNzY2FuKHRoaXMudG9LZXkoYCR7dGhpcy5pZH06ZGVwZW5kZW5jaWVzYCksIHVucHJvY2Vzc2VkT3B0cy5jdXJzb3IsICdDT1VOVCcsIHVucHJvY2Vzc2VkT3B0cy5jb3VudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAob3B0cy5pZ25vcmVkKSB7XG4gICAgICAgICAgICAgICAgY2hpbGRyZW5SZXN1bHRPcmRlci5wdXNoKCdpZ25vcmVkJyk7XG4gICAgICAgICAgICAgICAgY29uc3QgaWdub3JlZE9wdHMgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIGRlZmF1bHRPcHRzKSwgb3B0cy5pZ25vcmVkKTtcbiAgICAgICAgICAgICAgICBtdWx0aS5oc2Nhbih0aGlzLnRvS2V5KGAke3RoaXMuaWR9OmZhaWxlZGApLCBpZ25vcmVkT3B0cy5jdXJzb3IsICdDT1VOVCcsIGlnbm9yZWRPcHRzLmNvdW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBmYWlsZWRDdXJzb3I7XG4gICAgICAgICAgICBpZiAob3B0cy5mYWlsZWQpIHtcbiAgICAgICAgICAgICAgICBjaGlsZHJlblJlc3VsdE9yZGVyLnB1c2goJ2ZhaWxlZCcpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGZhaWxlZE9wdHMgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIGRlZmF1bHRPcHRzKSwgb3B0cy5mYWlsZWQpO1xuICAgICAgICAgICAgICAgIGZhaWxlZEN1cnNvciA9IGZhaWxlZE9wdHMuY3Vyc29yICsgZmFpbGVkT3B0cy5jb3VudDtcbiAgICAgICAgICAgICAgICBtdWx0aS56cmFuZ2UodGhpcy50b0tleShgJHt0aGlzLmlkfTp1bnN1Y2Nlc3NmdWxgKSwgZmFpbGVkT3B0cy5jdXJzb3IsIGZhaWxlZE9wdHMuY291bnQgLSAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdHMgPSAoYXdhaXQgbXVsdGkuZXhlYygpKTtcbiAgICAgICAgICAgIGxldCBwcm9jZXNzZWRDdXJzb3IsIHByb2Nlc3NlZCwgdW5wcm9jZXNzZWRDdXJzb3IsIHVucHJvY2Vzc2VkLCBmYWlsZWQsIGlnbm9yZWRDdXJzb3IsIGlnbm9yZWQ7XG4gICAgICAgICAgICBjaGlsZHJlblJlc3VsdE9yZGVyLmZvckVhY2goKGtleSwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKGtleSkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdwcm9jZXNzZWQnOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9jZXNzZWRDdXJzb3IgPSByZXN1bHRzW2luZGV4XVsxXVswXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJhd1Byb2Nlc3NlZCA9IHJlc3VsdHNbaW5kZXhdWzFdWzFdO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdHJhbnNmb3JtZWRQcm9jZXNzZWQgPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGluZCA9IDA7IGluZCA8IHJhd1Byb2Nlc3NlZC5sZW5ndGg7ICsraW5kKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGluZCAlIDIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtZWRQcm9jZXNzZWRbcmF3UHJvY2Vzc2VkW2luZCAtIDFdXSA9IEpTT04ucGFyc2UocmF3UHJvY2Vzc2VkW2luZF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHByb2Nlc3NlZCA9IHRyYW5zZm9ybWVkUHJvY2Vzc2VkO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnZmFpbGVkJzoge1xuICAgICAgICAgICAgICAgICAgICAgICAgZmFpbGVkID0gcmVzdWx0c1tpbmRleF1bMV07XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXNlICdpZ25vcmVkJzoge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWdub3JlZEN1cnNvciA9IHJlc3VsdHNbaW5kZXhdWzFdWzBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmF3SWdub3JlZCA9IHJlc3VsdHNbaW5kZXhdWzFdWzFdO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdHJhbnNmb3JtZWRJZ25vcmVkID0ge307XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpbmQgPSAwOyBpbmQgPCByYXdJZ25vcmVkLmxlbmd0aDsgKytpbmQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5kICUgMikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm1lZElnbm9yZWRbcmF3SWdub3JlZFtpbmQgLSAxXV0gPSByYXdJZ25vcmVkW2luZF07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWdub3JlZCA9IHRyYW5zZm9ybWVkSWdub3JlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3VucHJvY2Vzc2VkJzoge1xuICAgICAgICAgICAgICAgICAgICAgICAgdW5wcm9jZXNzZWRDdXJzb3IgPSByZXN1bHRzW2luZGV4XVsxXVswXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHVucHJvY2Vzc2VkID0gcmVzdWx0c1tpbmRleF1bMV1bMV07XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIChwcm9jZXNzZWRDdXJzb3JcbiAgICAgICAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgICAgICAgcHJvY2Vzc2VkLFxuICAgICAgICAgICAgICAgICAgICBuZXh0UHJvY2Vzc2VkQ3Vyc29yOiBOdW1iZXIocHJvY2Vzc2VkQ3Vyc29yKSxcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgOiB7fSkpLCAoaWdub3JlZEN1cnNvclxuICAgICAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAgICAgICBpZ25vcmVkLFxuICAgICAgICAgICAgICAgICAgICBuZXh0SWdub3JlZEN1cnNvcjogTnVtYmVyKGlnbm9yZWRDdXJzb3IpLFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICA6IHt9KSksIChmYWlsZWRDdXJzb3JcbiAgICAgICAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgICAgICAgZmFpbGVkLFxuICAgICAgICAgICAgICAgICAgICBuZXh0RmFpbGVkQ3Vyc29yOiBmYWlsZWRDdXJzb3IsXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIDoge30pKSwgKHVucHJvY2Vzc2VkQ3Vyc29yXG4gICAgICAgICAgICAgICAgPyB7IHVucHJvY2Vzc2VkLCBuZXh0VW5wcm9jZXNzZWRDdXJzb3I6IE51bWJlcih1bnByb2Nlc3NlZEN1cnNvcikgfVxuICAgICAgICAgICAgICAgIDoge30pKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgY2hpbGRyZW4gam9iIGNvdW50cyBpZiB0aGlzIGpvYiBpcyBhIHBhcmVudCBhbmQgaGFzIGNoaWxkcmVuLlxuICAgICAqXG4gICAgICogQHJldHVybnMgZGVwZW5kZW5jaWVzIGNvdW50IHNlcGFyYXRlZCBieSBwcm9jZXNzZWQsIHVucHJvY2Vzc2VkLCBpZ25vcmVkIGFuZCBmYWlsZWQuXG4gICAgICovXG4gICAgYXN5bmMgZ2V0RGVwZW5kZW5jaWVzQ291bnQob3B0cyA9IHt9KSB7XG4gICAgICAgIGNvbnN0IHR5cGVzID0gW107XG4gICAgICAgIE9iamVjdC5lbnRyaWVzKG9wdHMpLmZvckVhY2goKFtrZXksIHZhbHVlXSkgPT4ge1xuICAgICAgICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgdHlwZXMucHVzaChrZXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgZmluYWxUeXBlcyA9IHR5cGVzLmxlbmd0aFxuICAgICAgICAgICAgPyB0eXBlc1xuICAgICAgICAgICAgOiBbJ3Byb2Nlc3NlZCcsICd1bnByb2Nlc3NlZCcsICdpZ25vcmVkJywgJ2ZhaWxlZCddO1xuICAgICAgICBjb25zdCByZXNwb25zZXMgPSBhd2FpdCB0aGlzLnNjcmlwdHMuZ2V0RGVwZW5kZW5jeUNvdW50cyh0aGlzLmlkLCBmaW5hbFR5cGVzKTtcbiAgICAgICAgY29uc3QgY291bnRzID0ge307XG4gICAgICAgIHJlc3BvbnNlcy5mb3JFYWNoKChyZXMsIGluZGV4KSA9PiB7XG4gICAgICAgICAgICBjb3VudHNbYCR7ZmluYWxUeXBlc1tpbmRleF19YF0gPSByZXMgfHwgMDtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBjb3VudHM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBwcm9taXNlIHRoZSByZXNvbHZlcyB3aGVuIHRoZSBqb2IgaGFzIGNvbXBsZXRlZCAoY29udGFpbmluZyB0aGUgcmV0dXJuIHZhbHVlIG9mIHRoZSBqb2IpLFxuICAgICAqIG9yIHJlamVjdHMgd2hlbiB0aGUgam9iIGhhcyBmYWlsZWQgKGNvbnRhaW5pbmcgdGhlIGZhaWxlZFJlYXNvbikuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcXVldWVFdmVudHMgLSBJbnN0YW5jZSBvZiBRdWV1ZUV2ZW50cy5cbiAgICAgKiBAcGFyYW0gdHRsIC0gVGltZSBpbiBtaWxsaXNlY29uZHMgdG8gd2FpdCBmb3Igam9iIHRvIGZpbmlzaCBiZWZvcmUgdGltaW5nIG91dC5cbiAgICAgKi9cbiAgICBhc3luYyB3YWl0VW50aWxGaW5pc2hlZChxdWV1ZUV2ZW50cywgdHRsKSB7XG4gICAgICAgIGF3YWl0IHRoaXMucXVldWUud2FpdFVudGlsUmVhZHkoKTtcbiAgICAgICAgY29uc3Qgam9iSWQgPSB0aGlzLmlkO1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoYXN5bmMgKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgbGV0IHRpbWVvdXQ7XG4gICAgICAgICAgICBpZiAodHRsKSB7XG4gICAgICAgICAgICAgICAgdGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4gb25GYWlsZWQoXG4gICAgICAgICAgICAgICAgLyogZXNsaW50LWRpc2FibGUgbWF4LWxlbiAqL1xuICAgICAgICAgICAgICAgIGBKb2Igd2FpdCAke3RoaXMubmFtZX0gdGltZWQgb3V0IGJlZm9yZSBmaW5pc2hpbmcsIG5vIGZpbmlzaCBub3RpZmljYXRpb24gYXJyaXZlZCBhZnRlciAke3R0bH1tcyAoaWQ9JHtqb2JJZH0pYCksIHR0bCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmdW5jdGlvbiBvbkNvbXBsZXRlZChhcmdzKSB7XG4gICAgICAgICAgICAgICAgcmVtb3ZlTGlzdGVuZXJzKCk7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZShhcmdzLnJldHVybnZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZ1bmN0aW9uIG9uRmFpbGVkKGFyZ3MpIHtcbiAgICAgICAgICAgICAgICByZW1vdmVMaXN0ZW5lcnMoKTtcbiAgICAgICAgICAgICAgICByZWplY3QobmV3IEVycm9yKGFyZ3MuZmFpbGVkUmVhc29uIHx8IGFyZ3MpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGNvbXBsZXRlZEV2ZW50ID0gYGNvbXBsZXRlZDoke2pvYklkfWA7XG4gICAgICAgICAgICBjb25zdCBmYWlsZWRFdmVudCA9IGBmYWlsZWQ6JHtqb2JJZH1gO1xuICAgICAgICAgICAgcXVldWVFdmVudHMub24oY29tcGxldGVkRXZlbnQsIG9uQ29tcGxldGVkKTtcbiAgICAgICAgICAgIHF1ZXVlRXZlbnRzLm9uKGZhaWxlZEV2ZW50LCBvbkZhaWxlZCk7XG4gICAgICAgICAgICB0aGlzLnF1ZXVlLm9uKCdjbG9zaW5nJywgb25GYWlsZWQpO1xuICAgICAgICAgICAgY29uc3QgcmVtb3ZlTGlzdGVuZXJzID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGltZW91dCk7XG4gICAgICAgICAgICAgICAgcXVldWVFdmVudHMucmVtb3ZlTGlzdGVuZXIoY29tcGxldGVkRXZlbnQsIG9uQ29tcGxldGVkKTtcbiAgICAgICAgICAgICAgICBxdWV1ZUV2ZW50cy5yZW1vdmVMaXN0ZW5lcihmYWlsZWRFdmVudCwgb25GYWlsZWQpO1xuICAgICAgICAgICAgICAgIHRoaXMucXVldWUucmVtb3ZlTGlzdGVuZXIoJ2Nsb3NpbmcnLCBvbkZhaWxlZCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgLy8gUG9sbCBvbmNlIHJpZ2h0IG5vdyB0byBzZWUgaWYgdGhlIGpvYiBoYXMgYWxyZWFkeSBmaW5pc2hlZC4gVGhlIGpvYiBtYXkgaGF2ZSBiZWVuIGNvbXBsZXRlZCBiZWZvcmUgd2Ugd2VyZSBhYmxlXG4gICAgICAgICAgICAvLyB0byByZWdpc3RlciB0aGUgZXZlbnQgaGFuZGxlcnMgb24gdGhlIFF1ZXVlRXZlbnRzLCBzbyB3ZSBjaGVjayBoZXJlIHRvIG1ha2Ugc3VyZSB3ZSdyZSBub3Qgd2FpdGluZyBmb3IgYW4gZXZlbnRcbiAgICAgICAgICAgIC8vIHRoYXQgaGFzIGFscmVhZHkgaGFwcGVuZWQuIFdlIGJsb2NrIGNoZWNraW5nIHRoZSBqb2IgdW50aWwgdGhlIHF1ZXVlIGV2ZW50cyBvYmplY3QgaXMgYWN0dWFsbHkgbGlzdGVuaW5nIHRvXG4gICAgICAgICAgICAvLyBSZWRpcyBzbyB0aGVyZSdzIG5vIGNoYW5jZSB0aGF0IGl0IHdpbGwgbWlzcyBldmVudHMuXG4gICAgICAgICAgICBhd2FpdCBxdWV1ZUV2ZW50cy53YWl0VW50aWxSZWFkeSgpO1xuICAgICAgICAgICAgY29uc3QgW3N0YXR1cywgcmVzdWx0XSA9IChhd2FpdCB0aGlzLnNjcmlwdHMuaXNGaW5pc2hlZChqb2JJZCwgdHJ1ZSkpO1xuICAgICAgICAgICAgY29uc3QgZmluaXNoZWQgPSBzdGF0dXMgIT0gMDtcbiAgICAgICAgICAgIGlmIChmaW5pc2hlZCkge1xuICAgICAgICAgICAgICAgIGlmIChzdGF0dXMgPT0gLTEgfHwgc3RhdHVzID09IDIpIHtcbiAgICAgICAgICAgICAgICAgICAgb25GYWlsZWQoeyBmYWlsZWRSZWFzb246IHJlc3VsdCB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG9uQ29tcGxldGVkKHsgcmV0dXJudmFsdWU6IGdldFJldHVyblZhbHVlKHJlc3VsdCkgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTW92ZXMgdGhlIGpvYiB0byB0aGUgZGVsYXkgc2V0LlxuICAgICAqXG4gICAgICogQHBhcmFtIHRpbWVzdGFtcCAtIHRpbWVzdGFtcCB3aGVuIHRoZSBqb2Igc2hvdWxkIGJlIG1vdmVkIGJhY2sgdG8gXCJ3YWl0XCJcbiAgICAgKiBAcGFyYW0gdG9rZW4gLSB0b2tlbiB0byBjaGVjayBqb2IgaXMgbG9ja2VkIGJ5IGN1cnJlbnQgd29ya2VyXG4gICAgICogQHJldHVybnNcbiAgICAgKi9cbiAgICBhc3luYyBtb3ZlVG9EZWxheWVkKHRpbWVzdGFtcCwgdG9rZW4pIHtcbiAgICAgICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcbiAgICAgICAgY29uc3QgZGVsYXkgPSB0aW1lc3RhbXAgLSBub3c7XG4gICAgICAgIGNvbnN0IGZpbmFsRGVsYXkgPSBkZWxheSA+IDAgPyBkZWxheSA6IDA7XG4gICAgICAgIGNvbnN0IG1vdmVkVG9EZWxheWVkID0gYXdhaXQgdGhpcy5zY3JpcHRzLm1vdmVUb0RlbGF5ZWQodGhpcy5pZCwgbm93LCBmaW5hbERlbGF5LCB0b2tlbiwgeyBza2lwQXR0ZW1wdDogdHJ1ZSB9KTtcbiAgICAgICAgdGhpcy5kZWxheSA9IGZpbmFsRGVsYXk7XG4gICAgICAgIHJldHVybiBtb3ZlZFRvRGVsYXllZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTW92ZXMgdGhlIGpvYiB0byB0aGUgd2FpdGluZy1jaGlsZHJlbiBzZXQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdG9rZW4gLSBUb2tlbiB0byBjaGVjayBqb2IgaXMgbG9ja2VkIGJ5IGN1cnJlbnQgd29ya2VyXG4gICAgICogQHBhcmFtIG9wdHMgLSBUaGUgb3B0aW9ucyBiYWcgZm9yIG1vdmluZyBhIGpvYiB0byB3YWl0aW5nLWNoaWxkcmVuLlxuICAgICAqIEByZXR1cm5zIHRydWUgaWYgdGhlIGpvYiB3YXMgbW92ZWRcbiAgICAgKi9cbiAgICBhc3luYyBtb3ZlVG9XYWl0aW5nQ2hpbGRyZW4odG9rZW4sIG9wdHMgPSB7fSkge1xuICAgICAgICBjb25zdCBtb3ZlZFRvV2FpdGluZ0NoaWxkcmVuID0gYXdhaXQgdGhpcy5zY3JpcHRzLm1vdmVUb1dhaXRpbmdDaGlsZHJlbih0aGlzLmlkLCB0b2tlbiwgb3B0cyk7XG4gICAgICAgIHJldHVybiBtb3ZlZFRvV2FpdGluZ0NoaWxkcmVuO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQcm9tb3RlcyBhIGRlbGF5ZWQgam9iIHNvIHRoYXQgaXQgc3RhcnRzIHRvIGJlIHByb2Nlc3NlZCBhcyBzb29uIGFzIHBvc3NpYmxlLlxuICAgICAqL1xuICAgIGFzeW5jIHByb21vdGUoKSB7XG4gICAgICAgIGNvbnN0IGpvYklkID0gdGhpcy5pZDtcbiAgICAgICAgYXdhaXQgdGhpcy5zY3JpcHRzLnByb21vdGUoam9iSWQpO1xuICAgICAgICB0aGlzLmRlbGF5ID0gMDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQXR0ZW1wdHMgdG8gcmV0cnkgdGhlIGpvYi4gT25seSBhIGpvYiB0aGF0IGhhcyBmYWlsZWQgb3IgY29tcGxldGVkIGNhbiBiZSByZXRyaWVkLlxuICAgICAqXG4gICAgICogQHBhcmFtIHN0YXRlIC0gY29tcGxldGVkIC8gZmFpbGVkXG4gICAgICogQHJldHVybnMgQSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2hlbiB0aGUgam9iIGhhcyBiZWVuIHN1Y2Nlc3NmdWxseSBtb3ZlZCB0byB0aGUgd2FpdCBxdWV1ZS5cbiAgICAgKiBUaGUgcXVldWUgZW1pdHMgYSB3YWl0aW5nIGV2ZW50IHdoZW4gdGhlIGpvYiBpcyBzdWNjZXNzZnVsbHkgbW92ZWQuXG4gICAgICogQHRocm93cyBXaWxsIHRocm93IGFuIGVycm9yIGlmIHRoZSBqb2IgZG9lcyBub3QgZXhpc3QsIGlzIGxvY2tlZCwgb3IgaXMgbm90IGluIHRoZSBleHBlY3RlZCBzdGF0ZS5cbiAgICAgKi9cbiAgICByZXRyeShzdGF0ZSA9ICdmYWlsZWQnKSB7XG4gICAgICAgIHRoaXMuZmFpbGVkUmVhc29uID0gbnVsbDtcbiAgICAgICAgdGhpcy5maW5pc2hlZE9uID0gbnVsbDtcbiAgICAgICAgdGhpcy5wcm9jZXNzZWRPbiA9IG51bGw7XG4gICAgICAgIHRoaXMucmV0dXJudmFsdWUgPSBudWxsO1xuICAgICAgICByZXR1cm4gdGhpcy5zY3JpcHRzLnJlcHJvY2Vzc0pvYih0aGlzLCBzdGF0ZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1hcmtzIGEgam9iIHRvIG5vdCBiZSByZXRyaWVkIGlmIGl0IGZhaWxzIChldmVuIGlmIGF0dGVtcHRzIGhhcyBiZWVuIGNvbmZpZ3VyZWQpXG4gICAgICogQGRlcHJlY2F0ZWQgdXNlIFVucmVjb3ZlcmFibGVFcnJvclxuICAgICAqL1xuICAgIGRpc2NhcmQoKSB7XG4gICAgICAgIHRoaXMuZGlzY2FyZGVkID0gdHJ1ZTtcbiAgICB9XG4gICAgYXN5bmMgaXNJblpTZXQoc2V0KSB7XG4gICAgICAgIGNvbnN0IGNsaWVudCA9IGF3YWl0IHRoaXMucXVldWUuY2xpZW50O1xuICAgICAgICBjb25zdCBzY29yZSA9IGF3YWl0IGNsaWVudC56c2NvcmUodGhpcy5xdWV1ZS50b0tleShzZXQpLCB0aGlzLmlkKTtcbiAgICAgICAgcmV0dXJuIHNjb3JlICE9PSBudWxsO1xuICAgIH1cbiAgICBhc3luYyBpc0luTGlzdChsaXN0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNjcmlwdHMuaXNKb2JJbkxpc3QodGhpcy5xdWV1ZS50b0tleShsaXN0KSwgdGhpcy5pZCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkZHMgdGhlIGpvYiB0byBSZWRpcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBjbGllbnQgLVxuICAgICAqIEBwYXJhbSBwYXJlbnRPcHRzIC1cbiAgICAgKiBAcmV0dXJuc1xuICAgICAqL1xuICAgIGFkZEpvYihjbGllbnQsIHBhcmVudE9wdHMpIHtcbiAgICAgICAgY29uc3Qgam9iRGF0YSA9IHRoaXMuYXNKU09OKCk7XG4gICAgICAgIHRoaXMudmFsaWRhdGVPcHRpb25zKGpvYkRhdGEpO1xuICAgICAgICByZXR1cm4gdGhpcy5zY3JpcHRzLmFkZEpvYihjbGllbnQsIGpvYkRhdGEsIGpvYkRhdGEub3B0cywgdGhpcy5pZCwgcGFyZW50T3B0cyk7XG4gICAgfVxuICAgIHZhbGlkYXRlT3B0aW9ucyhqb2JEYXRhKSB7XG4gICAgICAgIHZhciBfYSwgX2IsIF9jLCBfZCwgX2UsIF9mLCBfZywgX2g7XG4gICAgICAgIGNvbnN0IGV4Y2x1c2l2ZU9wdGlvbnMgPSBbXG4gICAgICAgICAgICAncmVtb3ZlRGVwZW5kZW5jeU9uRmFpbHVyZScsXG4gICAgICAgICAgICAnZmFpbFBhcmVudE9uRmFpbHVyZScsXG4gICAgICAgICAgICAnY29udGludWVQYXJlbnRPbkZhaWx1cmUnLFxuICAgICAgICAgICAgJ2lnbm9yZURlcGVuZGVuY3lPbkZhaWx1cmUnLFxuICAgICAgICBdO1xuICAgICAgICBjb25zdCBleGNlZWRMaW1pdCA9IHRoaXMub3B0cy5zaXplTGltaXQgJiZcbiAgICAgICAgICAgICgwLCB1dGlsc18xLmxlbmd0aEluVXRmOEJ5dGVzKShqb2JEYXRhLmRhdGEpID4gdGhpcy5vcHRzLnNpemVMaW1pdDtcbiAgICAgICAgaWYgKGV4Y2VlZExpbWl0KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFRoZSBzaXplIG9mIGpvYiAke3RoaXMubmFtZX0gZXhjZWVkcyB0aGUgbGltaXQgJHt0aGlzLm9wdHMuc2l6ZUxpbWl0fSBieXRlc2ApO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLm9wdHMuZGVsYXkgJiYgdGhpcy5vcHRzLnJlcGVhdCAmJiAhKChfYSA9IHRoaXMub3B0cy5yZXBlYXQpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5jb3VudCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRGVsYXkgYW5kIHJlcGVhdCBvcHRpb25zIGNvdWxkIG5vdCBiZSB1c2VkIHRvZ2V0aGVyYCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZW5hYmxlZEV4Y2x1c2l2ZU9wdGlvbnMgPSBleGNsdXNpdmVPcHRpb25zLmZpbHRlcihvcHQgPT4gdGhpcy5vcHRzW29wdF0pO1xuICAgICAgICBpZiAoZW5hYmxlZEV4Y2x1c2l2ZU9wdGlvbnMubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgY29uc3Qgb3B0aW9uc0xpc3QgPSBlbmFibGVkRXhjbHVzaXZlT3B0aW9ucy5qb2luKCcsICcpO1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBUaGUgZm9sbG93aW5nIG9wdGlvbnMgY2Fubm90IGJlIHVzZWQgdG9nZXRoZXI6ICR7b3B0aW9uc0xpc3R9YCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKChfYiA9IHRoaXMub3B0cykgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLmpvYklkKSB7XG4gICAgICAgICAgICBpZiAoYCR7cGFyc2VJbnQodGhpcy5vcHRzLmpvYklkLCAxMCl9YCA9PT0gKChfYyA9IHRoaXMub3B0cykgPT09IG51bGwgfHwgX2MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jLmpvYklkKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQ3VzdG9tIElkIGNhbm5vdCBiZSBpbnRlZ2VycycpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gVE9ETzogcmVwbGFjZSB0aGlzIGNoZWNrIGluIG5leHQgYnJlYWtpbmcgY2hlY2sgd2l0aCBpbmNsdWRlKCc6JylcbiAgICAgICAgICAgIC8vIEJ5IHVzaW5nIHNwbGl0IHdlIGFyZSBzdGlsbCBrZWVwaW5nIGNvbXBhdGliaWxpdHkgd2l0aCBvbGQgcmVwZWF0YWJsZSBqb2JzXG4gICAgICAgICAgICBpZiAoKChfZCA9IHRoaXMub3B0cykgPT09IG51bGwgfHwgX2QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9kLmpvYklkLmluY2x1ZGVzKCc6JykpICYmXG4gICAgICAgICAgICAgICAgKChfZiA9IChfZSA9IHRoaXMub3B0cykgPT09IG51bGwgfHwgX2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9lLmpvYklkKSA9PT0gbnVsbCB8fCBfZiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Yuc3BsaXQoJzonKS5sZW5ndGgpICE9PSAzKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDdXN0b20gSWQgY2Fubm90IGNvbnRhaW4gOicpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLm9wdHMucHJpb3JpdHkpIHtcbiAgICAgICAgICAgIGlmIChNYXRoLnRydW5jKHRoaXMub3B0cy5wcmlvcml0eSkgIT09IHRoaXMub3B0cy5wcmlvcml0eSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgUHJpb3JpdHkgc2hvdWxkIG5vdCBiZSBmbG9hdGApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMub3B0cy5wcmlvcml0eSA+IGV4cG9ydHMuUFJJT1JJVFlfTElNSVQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFByaW9yaXR5IHNob3VsZCBiZSBiZXR3ZWVuIDAgYW5kICR7ZXhwb3J0cy5QUklPUklUWV9MSU1JVH1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5vcHRzLmRlZHVwbGljYXRpb24pIHtcbiAgICAgICAgICAgIGlmICghKChfZyA9IHRoaXMub3B0cy5kZWR1cGxpY2F0aW9uKSA9PT0gbnVsbCB8fCBfZyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2cuaWQpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdEZWR1cGxpY2F0aW9uIGlkIG11c3QgYmUgcHJvdmlkZWQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBUT0RPOiByZW1vdmUgaW4gdjZcbiAgICAgICAgaWYgKHRoaXMub3B0cy5kZWJvdW5jZSkge1xuICAgICAgICAgICAgaWYgKCEoKF9oID0gdGhpcy5vcHRzLmRlYm91bmNlKSA9PT0gbnVsbCB8fCBfaCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2guaWQpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdEZWJvdW5jZSBpZCBtdXN0IGJlIHByb3ZpZGVkJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLm9wdHMuYmFja29mZiA9PT0gJ29iamVjdCcgJiZcbiAgICAgICAgICAgIHR5cGVvZiB0aGlzLm9wdHMuYmFja29mZi5qaXR0ZXIgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5vcHRzLmJhY2tvZmYuaml0dGVyIDwgMCB8fCB0aGlzLm9wdHMuYmFja29mZi5qaXR0ZXIgPiAxKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBKaXR0ZXIgc2hvdWxkIGJlIGJldHdlZW4gMCBhbmQgMWApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHVwZGF0ZVN0YWNrdHJhY2UoZXJyKSB7XG4gICAgICAgIHRoaXMuc3RhY2t0cmFjZSA9IHRoaXMuc3RhY2t0cmFjZSB8fCBbXTtcbiAgICAgICAgaWYgKGVyciA9PT0gbnVsbCB8fCBlcnIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGVyci5zdGFjaykge1xuICAgICAgICAgICAgdGhpcy5zdGFja3RyYWNlLnB1c2goZXJyLnN0YWNrKTtcbiAgICAgICAgICAgIGlmICh0aGlzLm9wdHMuc3RhY2tUcmFjZUxpbWl0ID09PSAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zdGFja3RyYWNlID0gW107XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0aGlzLm9wdHMuc3RhY2tUcmFjZUxpbWl0KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zdGFja3RyYWNlID0gdGhpcy5zdGFja3RyYWNlLnNsaWNlKC10aGlzLm9wdHMuc3RhY2tUcmFjZUxpbWl0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cbmV4cG9ydHMuSm9iID0gSm9iO1xuZnVuY3Rpb24gZ2V0VHJhY2VzKHN0YWNrdHJhY2UpIHtcbiAgICBpZiAoIXN0YWNrdHJhY2UpIHtcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgICBjb25zdCB0cmFjZXMgPSAoMCwgdXRpbHNfMS50cnlDYXRjaCkoSlNPTi5wYXJzZSwgSlNPTiwgW3N0YWNrdHJhY2VdKTtcbiAgICBpZiAodHJhY2VzID09PSB1dGlsc18xLmVycm9yT2JqZWN0IHx8ICEodHJhY2VzIGluc3RhbmNlb2YgQXJyYXkpKSB7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiB0cmFjZXM7XG4gICAgfVxufVxuZnVuY3Rpb24gZ2V0UmV0dXJuVmFsdWUoX3ZhbHVlKSB7XG4gICAgY29uc3QgdmFsdWUgPSAoMCwgdXRpbHNfMS50cnlDYXRjaCkoSlNPTi5wYXJzZSwgSlNPTiwgW192YWx1ZV0pO1xuICAgIGlmICh2YWx1ZSAhPT0gdXRpbHNfMS5lcnJvck9iamVjdCkge1xuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBsb2dnZXIoJ2NvcnJ1cHRlZCByZXR1cm52YWx1ZTogJyArIF92YWx1ZSwgdmFsdWUpO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWpvYi5qcy5tYXAiXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJKb2IiLCJQUklPUklUWV9MSU1JVCIsInRzbGliXzEiLCJyZXF1aXJlIiwidXRpbF8xIiwidXRpbHNfMSIsImNyZWF0ZV9zY3JpcHRzXzEiLCJiYWNrb2Zmc18xIiwidW5yZWNvdmVyYWJsZV9lcnJvcl8xIiwiZW51bXNfMSIsImxvZ2dlciIsImRlYnVnbG9nIiwiY29uc3RydWN0b3IiLCJxdWV1ZSIsIm5hbWUiLCJkYXRhIiwib3B0cyIsImlkIiwicHJvZ3Jlc3MiLCJyZXR1cm52YWx1ZSIsInN0YWNrdHJhY2UiLCJkZWxheSIsInByaW9yaXR5IiwiYXR0ZW1wdHNTdGFydGVkIiwiYXR0ZW1wdHNNYWRlIiwic3RhbGxlZENvdW50ZXIiLCJfYSIsInJlcGVhdEpvYktleSIsInJlc3RPcHRzIiwiX19yZXN0IiwiYXNzaWduIiwiYXR0ZW1wdHMiLCJ0aW1lc3RhbXAiLCJEYXRlIiwibm93IiwiYmFja29mZiIsIkJhY2tvZmZzIiwibm9ybWFsaXplIiwicGFyZW50S2V5IiwiZ2V0UGFyZW50S2V5IiwicGFyZW50IiwicXVldWVLZXkiLCJmYWlsUGFyZW50T25GYWlsdXJlIiwiZnBvZiIsInJlbW92ZURlcGVuZGVuY3lPbkZhaWx1cmUiLCJyZG9mIiwiaWdub3JlRGVwZW5kZW5jeU9uRmFpbHVyZSIsImlkb2YiLCJjb250aW51ZVBhcmVudE9uRmFpbHVyZSIsImNwb2YiLCJkZWJvdW5jZUlkIiwiZGVib3VuY2UiLCJ1bmRlZmluZWQiLCJkZWR1cGxpY2F0aW9uSWQiLCJkZWR1cGxpY2F0aW9uIiwidG9LZXkiLCJiaW5kIiwiY3JlYXRlU2NyaXB0cyIsInF1ZXVlUXVhbGlmaWVkTmFtZSIsInF1YWxpZmllZE5hbWUiLCJjcmVhdGUiLCJjbGllbnQiLCJqb2IiLCJqb2JJZCIsImFkZEpvYiIsInBhcmVudERlcGVuZGVuY2llc0tleSIsImNyZWF0ZUJ1bGsiLCJqb2JzIiwiam9iSW5zdGFuY2VzIiwibWFwIiwicGlwZWxpbmUiLCJyZXN1bHRzIiwiZXhlYyIsImluZGV4IiwibGVuZ3RoIiwiZXJyIiwiZnJvbUpTT04iLCJqc29uIiwiSlNPTiIsInBhcnNlIiwib3B0c0Zyb21KU09OIiwicGFyc2VJbnQiLCJmaW5pc2hlZE9uIiwicHJvY2Vzc2VkT24iLCJyamsiLCJkZWlkIiwiZmFpbGVkUmVhc29uIiwiYXRzIiwiYXRtIiwic3RjIiwiZGVmYSIsImRlZmVycmVkRmFpbHVyZSIsImdldFRyYWNlcyIsImdldFJldHVyblZhbHVlIiwicGIiLCJwcm9jZXNzZWRCeSIsIm5yamlkIiwibmV4dFJlcGVhdGFibGVKb2JJZCIsInNjcmlwdHMiLCJyYXdPcHRzIiwib3B0c0RlY29kZSIsIm9wdHNEZWNvZGVNYXAiLCJvcHRpb25FbnRyaWVzIiwiZW50cmllcyIsIm9wdGlvbnMiLCJpdGVtIiwiYXR0cmlidXRlTmFtZSIsInRlbGVtZXRyeSIsIm1ldGFkYXRhIiwib21pdENvbnRleHQiLCJmcm9tSWQiLCJqb2JEYXRhIiwiaGdldGFsbCIsImlzRW1wdHkiLCJhZGRKb2JMb2ciLCJsb2dSb3ciLCJrZWVwTG9ncyIsImFkZExvZyIsInRvSlNPTiIsIndpdGhvdXRRdWV1ZUFuZFNjcmlwdHMiLCJhc0pTT04iLCJyZW1vdmVVbmRlZmluZWRGaWVsZHMiLCJzdHJpbmdpZnkiLCJvcHRzQXNKU09OIiwib3B0c0VuY29kZSIsIm9wdHNFbmNvZGVNYXAiLCJjb21wcmVzc2FibGVBdHRyaWJ1dGUiLCJrZXkiLCJ0bSIsIm9tYyIsImFzSlNPTlNhbmRib3giLCJxdWV1ZU5hbWUiLCJwcmVmaXgiLCJ1cGRhdGVEYXRhIiwidXBkYXRlUHJvZ3Jlc3MiLCJlbWl0IiwibG9nIiwicmVtb3ZlQ2hpbGREZXBlbmRlbmN5IiwiY2hpbGREZXBlbmRlbmN5SXNSZW1vdmVkIiwiY2xlYXJMb2dzIiwibG9nc0tleSIsImx0cmltIiwiZGVsIiwicmVtb3ZlIiwicmVtb3ZlQ2hpbGRyZW4iLCJ3YWl0VW50aWxSZWFkeSIsInJlbW92ZWQiLCJFcnJvciIsInJlbW92ZVVucHJvY2Vzc2VkQ2hpbGRyZW4iLCJleHRlbmRMb2NrIiwidG9rZW4iLCJkdXJhdGlvbiIsIm1vdmVUb0NvbXBsZXRlZCIsInJldHVyblZhbHVlIiwiZmV0Y2hOZXh0IiwidHJhY2UiLCJTcGFuS2luZCIsIklOVEVSTkFMIiwic3BhbiIsImRzdFByb3BhZ2F0aW9uTWVkYXRhZGF0YSIsIl9iIiwic3RyaW5naWZpZWRSZXR1cm5WYWx1ZSIsInRyeUNhdGNoIiwiZXJyb3JPYmplY3QiLCJhcmdzIiwibW92ZVRvQ29tcGxldGVkQXJncyIsInJlbW92ZU9uQ29tcGxldGUiLCJyZXN1bHQiLCJtb3ZlVG9GaW5pc2hlZCIsIm1vdmVUb0ZpbmlzaGVkS2V5cyIsIm1vdmVUb1dhaXQiLCJtb3ZlSm9iRnJvbUFjdGl2ZVRvV2FpdCIsInNob3VsZFJldHJ5Sm9iIiwiZGlzY2FyZGVkIiwiVW5yZWNvdmVyYWJsZUVycm9yIiwiY2FsY3VsYXRlIiwic2V0dGluZ3MiLCJiYWNrb2ZmU3RyYXRlZ3kiLCJtb3ZlVG9GYWlsZWQiLCJtZXNzYWdlIiwic2hvdWxkUmV0cnkiLCJyZXRyeURlbGF5IiwiZ2V0U3Bhbk9wZXJhdGlvbiIsInVwZGF0ZVN0YWNrdHJhY2UiLCJmaWVsZHNUb1VwZGF0ZSIsIm1vdmVUb0RlbGF5ZWQiLCJyZXRyeUpvYiIsImxpZm8iLCJtb3ZlVG9GYWlsZWRBcmdzIiwicmVtb3ZlT25GYWlsIiwiaXNDb21wbGV0ZWQiLCJpc0luWlNldCIsImlzRmFpbGVkIiwiaXNEZWxheWVkIiwiaXNXYWl0aW5nQ2hpbGRyZW4iLCJpc0FjdGl2ZSIsImlzSW5MaXN0IiwiaXNXYWl0aW5nIiwiZ2V0U3RhdGUiLCJjaGFuZ2VEZWxheSIsImNoYW5nZVByaW9yaXR5IiwiZ2V0Q2hpbGRyZW5WYWx1ZXMiLCJwYXJzZU9iamVjdFZhbHVlcyIsImdldElnbm9yZWRDaGlsZHJlbkZhaWx1cmVzIiwiZ2V0RmFpbGVkQ2hpbGRyZW5WYWx1ZXMiLCJnZXREZXBlbmRlbmNpZXMiLCJtdWx0aSIsInByb2Nlc3NlZCIsInVucHJvY2Vzc2VkIiwiaWdub3JlZCIsImZhaWxlZCIsInNtZW1iZXJzIiwienJhbmdlIiwiZXJyMSIsImVycjIiLCJlcnIzIiwiZXJyNCIsImRlZmF1bHRPcHRzIiwiY3Vyc29yIiwiY291bnQiLCJjaGlsZHJlblJlc3VsdE9yZGVyIiwicHVzaCIsInByb2Nlc3NlZE9wdHMiLCJoc2NhbiIsInVucHJvY2Vzc2VkT3B0cyIsInNzY2FuIiwiaWdub3JlZE9wdHMiLCJmYWlsZWRDdXJzb3IiLCJmYWlsZWRPcHRzIiwicHJvY2Vzc2VkQ3Vyc29yIiwidW5wcm9jZXNzZWRDdXJzb3IiLCJpZ25vcmVkQ3Vyc29yIiwiZm9yRWFjaCIsInJhd1Byb2Nlc3NlZCIsInRyYW5zZm9ybWVkUHJvY2Vzc2VkIiwiaW5kIiwicmF3SWdub3JlZCIsInRyYW5zZm9ybWVkSWdub3JlZCIsIm5leHRQcm9jZXNzZWRDdXJzb3IiLCJOdW1iZXIiLCJuZXh0SWdub3JlZEN1cnNvciIsIm5leHRGYWlsZWRDdXJzb3IiLCJuZXh0VW5wcm9jZXNzZWRDdXJzb3IiLCJnZXREZXBlbmRlbmNpZXNDb3VudCIsInR5cGVzIiwiZmluYWxUeXBlcyIsInJlc3BvbnNlcyIsImdldERlcGVuZGVuY3lDb3VudHMiLCJjb3VudHMiLCJyZXMiLCJ3YWl0VW50aWxGaW5pc2hlZCIsInF1ZXVlRXZlbnRzIiwidHRsIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJ0aW1lb3V0Iiwic2V0VGltZW91dCIsIm9uRmFpbGVkIiwib25Db21wbGV0ZWQiLCJyZW1vdmVMaXN0ZW5lcnMiLCJjb21wbGV0ZWRFdmVudCIsImZhaWxlZEV2ZW50Iiwib24iLCJjbGVhckludGVydmFsIiwicmVtb3ZlTGlzdGVuZXIiLCJzdGF0dXMiLCJpc0ZpbmlzaGVkIiwiZmluaXNoZWQiLCJmaW5hbERlbGF5IiwibW92ZWRUb0RlbGF5ZWQiLCJza2lwQXR0ZW1wdCIsIm1vdmVUb1dhaXRpbmdDaGlsZHJlbiIsIm1vdmVkVG9XYWl0aW5nQ2hpbGRyZW4iLCJwcm9tb3RlIiwicmV0cnkiLCJzdGF0ZSIsInJlcHJvY2Vzc0pvYiIsImRpc2NhcmQiLCJzZXQiLCJzY29yZSIsInpzY29yZSIsImxpc3QiLCJpc0pvYkluTGlzdCIsInBhcmVudE9wdHMiLCJ2YWxpZGF0ZU9wdGlvbnMiLCJfYyIsIl9kIiwiX2UiLCJfZiIsIl9nIiwiX2giLCJleGNsdXNpdmVPcHRpb25zIiwiZXhjZWVkTGltaXQiLCJzaXplTGltaXQiLCJsZW5ndGhJblV0ZjhCeXRlcyIsInJlcGVhdCIsImVuYWJsZWRFeGNsdXNpdmVPcHRpb25zIiwiZmlsdGVyIiwib3B0Iiwib3B0aW9uc0xpc3QiLCJqb2luIiwiaW5jbHVkZXMiLCJzcGxpdCIsIk1hdGgiLCJ0cnVuYyIsImppdHRlciIsInN0YWNrIiwic3RhY2tUcmFjZUxpbWl0Iiwic2xpY2UiLCJ0cmFjZXMiLCJBcnJheSIsIl92YWx1ZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/classes/job.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/classes/lock-manager.js":
/*!**************************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/classes/lock-manager.js ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.LockManager = void 0;\nconst enums_1 = __webpack_require__(/*! ../enums */ \"(rsc)/./node_modules/bullmq/dist/cjs/enums/index.js\");\n/**\n * Manages lock renewal for BullMQ workers.\n * It periodically extends locks for active jobs to prevent them from being\n * considered stalled by other workers.\n */ class LockManager {\n    constructor(worker, opts){\n        this.worker = worker;\n        this.opts = opts;\n        // Maps job ids with their timestamps\n        this.trackedJobs = new Map();\n        this.closed = false;\n    }\n    /**\n     * Starts the lock manager timers for lock renewal.\n     */ start() {\n        if (this.closed) {\n            return;\n        }\n        // Start lock renewal timer if not disabled\n        if (this.opts.lockRenewTime > 0) {\n            this.startLockExtenderTimer();\n        }\n    }\n    async extendLocks(jobIds) {\n        await this.worker.trace(enums_1.SpanKind.INTERNAL, \"extendLocks\", this.worker.name, async (span)=>{\n            span === null || span === void 0 ? void 0 : span.setAttributes({\n                [enums_1.TelemetryAttributes.WorkerId]: this.opts.workerId,\n                [enums_1.TelemetryAttributes.WorkerName]: this.opts.workerName,\n                [enums_1.TelemetryAttributes.WorkerJobsToExtendLocks]: jobIds\n            });\n            try {\n                const jobTokens = jobIds.map((id)=>{\n                    var _a;\n                    return ((_a = this.trackedJobs.get(id)) === null || _a === void 0 ? void 0 : _a.token) || \"\";\n                });\n                const erroredJobIds = await this.worker.extendJobLocks(jobIds, jobTokens, this.opts.lockDuration);\n                if (erroredJobIds.length > 0) {\n                    this.worker.emit(\"lockRenewalFailed\", erroredJobIds);\n                    for (const jobId of erroredJobIds){\n                        // TODO: Send signal to process function that the job has been lost.\n                        this.worker.emit(\"error\", new Error(`could not renew lock for job ${jobId}`));\n                    }\n                }\n                const succeededJobIds = jobIds.filter((id)=>!erroredJobIds.includes(id));\n                if (succeededJobIds.length > 0) {\n                    this.worker.emit(\"locksRenewed\", {\n                        count: succeededJobIds.length,\n                        jobIds: succeededJobIds\n                    });\n                }\n            } catch (err) {\n                this.worker.emit(\"error\", err);\n            }\n        });\n    }\n    startLockExtenderTimer() {\n        clearTimeout(this.lockRenewalTimer);\n        if (!this.closed) {\n            this.lockRenewalTimer = setTimeout(async ()=>{\n                // Get all the jobs whose locks expire in less than 1/2 of the lockRenewTime\n                const now = Date.now();\n                const jobsToExtend = [];\n                for (const jobId of this.trackedJobs.keys()){\n                    const { ts, token } = this.trackedJobs.get(jobId);\n                    if (!ts) {\n                        this.trackedJobs.set(jobId, {\n                            token,\n                            ts: now\n                        });\n                        continue;\n                    }\n                    if (ts + this.opts.lockRenewTime / 2 < now) {\n                        this.trackedJobs.set(jobId, {\n                            token,\n                            ts: now\n                        });\n                        jobsToExtend.push(jobId);\n                    }\n                }\n                if (jobsToExtend.length) {\n                    await this.extendLocks(jobsToExtend);\n                }\n                this.startLockExtenderTimer();\n            }, this.opts.lockRenewTime / 2);\n        }\n    }\n    /**\n     * Stops the lock manager and clears all timers.\n     */ async close() {\n        if (this.closed) {\n            return;\n        }\n        this.closed = true;\n        if (this.lockRenewalTimer) {\n            clearTimeout(this.lockRenewalTimer);\n            this.lockRenewalTimer = undefined;\n        }\n        this.trackedJobs.clear();\n    }\n    /**\n     * Adds a job to be tracked for lock renewal.\n     */ trackJob(jobId, token, ts) {\n        if (!this.closed && jobId) {\n            this.trackedJobs.set(jobId, {\n                token,\n                ts\n            });\n        }\n    }\n    /**\n     * Removes a job from lock renewal tracking.\n     */ untrackJob(jobId) {\n        this.trackedJobs.delete(jobId);\n    }\n    /**\n     * Gets the number of jobs currently being tracked.\n     */ getActiveJobCount() {\n        return this.trackedJobs.size;\n    }\n    /**\n     * Checks if the lock manager is running.\n     */ isRunning() {\n        return !this.closed && this.lockRenewalTimer !== undefined;\n    }\n}\nexports.LockManager = LockManager; //# sourceMappingURL=lock-manager.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL2NsYXNzZXMvbG9jay1tYW5hZ2VyLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCxtQkFBbUIsR0FBRyxLQUFLO0FBQzNCLE1BQU1HLFVBQVVDLG1CQUFPQSxDQUFDLHFFQUFVO0FBQ2xDOzs7O0NBSUMsR0FDRCxNQUFNRjtJQUNGRyxZQUFZQyxNQUFNLEVBQUVDLElBQUksQ0FBRTtRQUN0QixJQUFJLENBQUNELE1BQU0sR0FBR0E7UUFDZCxJQUFJLENBQUNDLElBQUksR0FBR0E7UUFDWixxQ0FBcUM7UUFDckMsSUFBSSxDQUFDQyxXQUFXLEdBQUcsSUFBSUM7UUFDdkIsSUFBSSxDQUFDQyxNQUFNLEdBQUc7SUFDbEI7SUFDQTs7S0FFQyxHQUNEQyxRQUFRO1FBQ0osSUFBSSxJQUFJLENBQUNELE1BQU0sRUFBRTtZQUNiO1FBQ0o7UUFDQSwyQ0FBMkM7UUFDM0MsSUFBSSxJQUFJLENBQUNILElBQUksQ0FBQ0ssYUFBYSxHQUFHLEdBQUc7WUFDN0IsSUFBSSxDQUFDQyxzQkFBc0I7UUFDL0I7SUFDSjtJQUNBLE1BQU1DLFlBQVlDLE1BQU0sRUFBRTtRQUN0QixNQUFNLElBQUksQ0FBQ1QsTUFBTSxDQUFDVSxLQUFLLENBQUNiLFFBQVFjLFFBQVEsQ0FBQ0MsUUFBUSxFQUFFLGVBQWUsSUFBSSxDQUFDWixNQUFNLENBQUNhLElBQUksRUFBRSxPQUFPQztZQUN2RkEsU0FBUyxRQUFRQSxTQUFTLEtBQUssSUFBSSxLQUFLLElBQUlBLEtBQUtDLGFBQWEsQ0FBQztnQkFDM0QsQ0FBQ2xCLFFBQVFtQixtQkFBbUIsQ0FBQ0MsUUFBUSxDQUFDLEVBQUUsSUFBSSxDQUFDaEIsSUFBSSxDQUFDaUIsUUFBUTtnQkFDMUQsQ0FBQ3JCLFFBQVFtQixtQkFBbUIsQ0FBQ0csVUFBVSxDQUFDLEVBQUUsSUFBSSxDQUFDbEIsSUFBSSxDQUFDbUIs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QUFDQSxnQkFBZ0IsR0FBR1U7UUFDNUI7UUFDQSxJQUFJLENBQUNqRCxXQUFXLENBQUNrRCxLQUFLO0lBQzFCO0lBQ0E7O0tBRUMsR0FDREMsU0FBU3BCLEtBQUssRUFBRU4sS0FBSyxFQUFFb0IsRUFBRSxFQUFFO1FBQ3ZCLElBQUksQ0FBQyxJQUFJLENBQUMzQyxNQUFNLElBQUk2QixPQUFPO1lBQ3ZCLElBQUksQ0FBQy9CLFdBQVcsQ0FBQzhDLEdBQUcsQ0FBQ2YsT0FBTztnQkFBRU47Z0JBQU9vQjtZQUFHO1FBQzVDO0lBQ0o7SUFDQTs7S0FFQyxHQUNETyxXQUFXckIsS0FBSyxFQUFFO1FBQ2QsSUFBSSxDQUFDL0IsV0FBVyxDQUFDcUQsTUFBTSxDQUFDdEI7SUFDNUI7SUFDQTs7S0FFQyxHQUNEdUIsb0JBQW9CO1FBQ2hCLE9BQU8sSUFBSSxDQUFDdEQsV0FBVyxDQUFDdUQsSUFBSTtJQUNoQztJQUNBOztLQUVDLEdBQ0RDLFlBQVk7UUFDUixPQUFPLENBQUMsSUFBSSxDQUFDdEQsTUFBTSxJQUFJLElBQUksQ0FBQ3FDLGdCQUFnQixLQUFLVTtJQUNyRDtBQUNKO0FBQ0F6RCxtQkFBbUIsR0FBR0UsYUFDdEIsd0NBQXdDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb25seWZhbnMtcGxhdGZvcm0vLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL2NsYXNzZXMvbG9jay1tYW5hZ2VyLmpzP2RjZTciXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkxvY2tNYW5hZ2VyID0gdm9pZCAwO1xuY29uc3QgZW51bXNfMSA9IHJlcXVpcmUoXCIuLi9lbnVtc1wiKTtcbi8qKlxuICogTWFuYWdlcyBsb2NrIHJlbmV3YWwgZm9yIEJ1bGxNUSB3b3JrZXJzLlxuICogSXQgcGVyaW9kaWNhbGx5IGV4dGVuZHMgbG9ja3MgZm9yIGFjdGl2ZSBqb2JzIHRvIHByZXZlbnQgdGhlbSBmcm9tIGJlaW5nXG4gKiBjb25zaWRlcmVkIHN0YWxsZWQgYnkgb3RoZXIgd29ya2Vycy5cbiAqL1xuY2xhc3MgTG9ja01hbmFnZXIge1xuICAgIGNvbnN0cnVjdG9yKHdvcmtlciwgb3B0cykge1xuICAgICAgICB0aGlzLndvcmtlciA9IHdvcmtlcjtcbiAgICAgICAgdGhpcy5vcHRzID0gb3B0cztcbiAgICAgICAgLy8gTWFwcyBqb2IgaWRzIHdpdGggdGhlaXIgdGltZXN0YW1wc1xuICAgICAgICB0aGlzLnRyYWNrZWRKb2JzID0gbmV3IE1hcCgpO1xuICAgICAgICB0aGlzLmNsb3NlZCA9IGZhbHNlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTdGFydHMgdGhlIGxvY2sgbWFuYWdlciB0aW1lcnMgZm9yIGxvY2sgcmVuZXdhbC5cbiAgICAgKi9cbiAgICBzdGFydCgpIHtcbiAgICAgICAgaWYgKHRoaXMuY2xvc2VkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gU3RhcnQgbG9jayByZW5ld2FsIHRpbWVyIGlmIG5vdCBkaXNhYmxlZFxuICAgICAgICBpZiAodGhpcy5vcHRzLmxvY2tSZW5ld1RpbWUgPiAwKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXJ0TG9ja0V4dGVuZGVyVGltZXIoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBleHRlbmRMb2Nrcyhqb2JJZHMpIHtcbiAgICAgICAgYXdhaXQgdGhpcy53b3JrZXIudHJhY2UoZW51bXNfMS5TcGFuS2luZC5JTlRFUk5BTCwgJ2V4dGVuZExvY2tzJywgdGhpcy53b3JrZXIubmFtZSwgYXN5bmMgKHNwYW4pID0+IHtcbiAgICAgICAgICAgIHNwYW4gPT09IG51bGwgfHwgc3BhbiA9PT0gdm9pZCAwID8gdm9pZCAwIDogc3Bhbi5zZXRBdHRyaWJ1dGVzKHtcbiAgICAgICAgICAgICAgICBbZW51bXNfMS5UZWxlbWV0cnlBdHRyaWJ1dGVzLldvcmtlcklkXTogdGhpcy5vcHRzLndvcmtlcklkLFxuICAgICAgICAgICAgICAgIFtlbnVtc18xLlRlbGVtZXRyeUF0dHJpYnV0ZXMuV29ya2VyTmFtZV06IHRoaXMub3B0cy53b3JrZXJOYW1lLFxuICAgICAgICAgICAgICAgIFtlbnVtc18xLlRlbGVtZXRyeUF0dHJpYnV0ZXMuV29ya2VySm9ic1RvRXh0ZW5kTG9ja3NdOiBqb2JJZHMsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgam9iVG9rZW5zID0gam9iSWRzLm1hcChpZCA9PiB7IHZhciBfYTsgcmV0dXJuICgoX2EgPSB0aGlzLnRyYWNrZWRKb2JzLmdldChpZCkpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS50b2tlbikgfHwgJyc7IH0pO1xuICAgICAgICAgICAgICAgIGNvbnN0IGVycm9yZWRKb2JJZHMgPSBhd2FpdCB0aGlzLndvcmtlci5leHRlbmRKb2JMb2Nrcyhqb2JJZHMsIGpvYlRva2VucywgdGhpcy5vcHRzLmxvY2tEdXJhdGlvbik7XG4gICAgICAgICAgICAgICAgaWYgKGVycm9yZWRKb2JJZHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLndvcmtlci5lbWl0KCdsb2NrUmVuZXdhbEZhaWxlZCcsIGVycm9yZWRKb2JJZHMpO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGpvYklkIG9mIGVycm9yZWRKb2JJZHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRPRE86IFNlbmQgc2lnbmFsIHRvIHByb2Nlc3MgZnVuY3Rpb24gdGhhdCB0aGUgam9iIGhhcyBiZWVuIGxvc3QuXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLndvcmtlci5lbWl0KCdlcnJvcicsIG5ldyBFcnJvcihgY291bGQgbm90IHJlbmV3IGxvY2sgZm9yIGpvYiAke2pvYklkfWApKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBzdWNjZWVkZWRKb2JJZHMgPSBqb2JJZHMuZmlsdGVyKGlkID0+ICFlcnJvcmVkSm9iSWRzLmluY2x1ZGVzKGlkKSk7XG4gICAgICAgICAgICAgICAgaWYgKHN1Y2NlZWRlZEpvYklkcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMud29ya2VyLmVtaXQoJ2xvY2tzUmVuZXdlZCcsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50OiBzdWNjZWVkZWRKb2JJZHMubGVuZ3RoLFxuICAgICAgICAgICAgICAgICAgICAgICAgam9iSWRzOiBzdWNjZWVkZWRKb2JJZHMsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLndvcmtlci5lbWl0KCdlcnJvcicsIGVycik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzdGFydExvY2tFeHRlbmRlclRpbWVyKCkge1xuICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5sb2NrUmVuZXdhbFRpbWVyKTtcbiAgICAgICAgaWYgKCF0aGlzLmNsb3NlZCkge1xuICAgICAgICAgICAgdGhpcy5sb2NrUmVuZXdhbFRpbWVyID0gc2V0VGltZW91dChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gR2V0IGFsbCB0aGUgam9icyB3aG9zZSBsb2NrcyBleHBpcmUgaW4gbGVzcyB0aGFuIDEvMiBvZiB0aGUgbG9ja1JlbmV3VGltZVxuICAgICAgICAgICAgICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG4gICAgICAgICAgICAgICAgY29uc3Qgam9ic1RvRXh0ZW5kID0gW107XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBqb2JJZCBvZiB0aGlzLnRyYWNrZWRKb2JzLmtleXMoKSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB7IHRzLCB0b2tlbiB9ID0gdGhpcy50cmFja2VkSm9icy5nZXQoam9iSWQpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXRzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRyYWNrZWRKb2JzLnNldChqb2JJZCwgeyB0b2tlbiwgdHM6IG5vdyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICh0cyArIHRoaXMub3B0cy5sb2NrUmVuZXdUaW1lIC8gMiA8IG5vdykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50cmFja2VkSm9icy5zZXQoam9iSWQsIHsgdG9rZW4sIHRzOiBub3cgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBqb2JzVG9FeHRlbmQucHVzaChqb2JJZCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGpvYnNUb0V4dGVuZC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5leHRlbmRMb2Nrcyhqb2JzVG9FeHRlbmQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0TG9ja0V4dGVuZGVyVGltZXIoKTtcbiAgICAgICAgICAgIH0sIHRoaXMub3B0cy5sb2NrUmVuZXdUaW1lIC8gMik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogU3RvcHMgdGhlIGxvY2sgbWFuYWdlciBhbmQgY2xlYXJzIGFsbCB0aW1lcnMuXG4gICAgICovXG4gICAgYXN5bmMgY2xvc2UoKSB7XG4gICAgICAgIGlmICh0aGlzLmNsb3NlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY2xvc2VkID0gdHJ1ZTtcbiAgICAgICAgaWYgKHRoaXMubG9ja1JlbmV3YWxUaW1lcikge1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMubG9ja1JlbmV3YWxUaW1lcik7XG4gICAgICAgICAgICB0aGlzLmxvY2tSZW5ld2FsVGltZXIgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy50cmFja2VkSm9icy5jbGVhcigpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGRzIGEgam9iIHRvIGJlIHRyYWNrZWQgZm9yIGxvY2sgcmVuZXdhbC5cbiAgICAgKi9cbiAgICB0cmFja0pvYihqb2JJZCwgdG9rZW4sIHRzKSB7XG4gICAgICAgIGlmICghdGhpcy5jbG9zZWQgJiYgam9iSWQpIHtcbiAgICAgICAgICAgIHRoaXMudHJhY2tlZEpvYnMuc2V0KGpvYklkLCB7IHRva2VuLCB0cyB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIGEgam9iIGZyb20gbG9jayByZW5ld2FsIHRyYWNraW5nLlxuICAgICAqL1xuICAgIHVudHJhY2tKb2Ioam9iSWQpIHtcbiAgICAgICAgdGhpcy50cmFja2VkSm9icy5kZWxldGUoam9iSWQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBudW1iZXIgb2Ygam9icyBjdXJyZW50bHkgYmVpbmcgdHJhY2tlZC5cbiAgICAgKi9cbiAgICBnZXRBY3RpdmVKb2JDb3VudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudHJhY2tlZEpvYnMuc2l6ZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGlmIHRoZSBsb2NrIG1hbmFnZXIgaXMgcnVubmluZy5cbiAgICAgKi9cbiAgICBpc1J1bm5pbmcoKSB7XG4gICAgICAgIHJldHVybiAhdGhpcy5jbG9zZWQgJiYgdGhpcy5sb2NrUmVuZXdhbFRpbWVyICE9PSB1bmRlZmluZWQ7XG4gICAgfVxufVxuZXhwb3J0cy5Mb2NrTWFuYWdlciA9IExvY2tNYW5hZ2VyO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bG9jay1tYW5hZ2VyLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsIkxvY2tNYW5hZ2VyIiwiZW51bXNfMSIsInJlcXVpcmUiLCJjb25zdHJ1Y3RvciIsIndvcmtlciIsIm9wdHMiLCJ0cmFja2VkSm9icyIsIk1hcCIsImNsb3NlZCIsInN0YXJ0IiwibG9ja1JlbmV3VGltZSIsInN0YXJ0TG9ja0V4dGVuZGVyVGltZXIiLCJleHRlbmRMb2NrcyIsImpvYklkcyIsInRyYWNlIiwiU3BhbktpbmQiLCJJTlRFUk5BTCIsIm5hbWUiLCJzcGFuIiwic2V0QXR0cmlidXRlcyIsIlRlbGVtZXRyeUF0dHJpYnV0ZXMiLCJXb3JrZXJJZCIsIndvcmtlcklkIiwiV29ya2VyTmFtZSIsIndvcmtlck5hbWUiLCJXb3JrZXJKb2JzVG9FeHRlbmRMb2NrcyIsImpvYlRva2VucyIsIm1hcCIsImlkIiwiX2EiLCJnZXQiLCJ0b2tlbiIsImVycm9yZWRKb2JJZHMiLCJleHRlbmRKb2JMb2NrcyIsImxvY2tEdXJhdGlvbiIsImxlbmd0aCIsImVtaXQiLCJqb2JJZCIsIkVycm9yIiwic3VjY2VlZGVkSm9iSWRzIiwiZmlsdGVyIiwiaW5jbHVkZXMiLCJjb3VudCIsImVyciIsImNsZWFyVGltZW91dCIsImxvY2tSZW5ld2FsVGltZXIiLCJzZXRUaW1lb3V0Iiwibm93IiwiRGF0ZSIsImpvYnNUb0V4dGVuZCIsImtleXMiLCJ0cyIsInNldCIsInB1c2giLCJjbG9zZSIsInVuZGVmaW5lZCIsImNsZWFyIiwidHJhY2tKb2IiLCJ1bnRyYWNrSm9iIiwiZGVsZXRlIiwiZ2V0QWN0aXZlSm9iQ291bnQiLCJzaXplIiwiaXNSdW5uaW5nIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/classes/lock-manager.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/classes/queue-base.js":
/*!************************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/classes/queue-base.js ***!
  \************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.QueueBase = void 0;\nconst events_1 = __webpack_require__(/*! events */ \"events\");\nconst utils_1 = __webpack_require__(/*! ../utils */ \"(rsc)/./node_modules/bullmq/dist/cjs/utils/index.js\");\nconst create_scripts_1 = __webpack_require__(/*! ../utils/create-scripts */ \"(rsc)/./node_modules/bullmq/dist/cjs/utils/create-scripts.js\");\nconst redis_connection_1 = __webpack_require__(/*! ./redis-connection */ \"(rsc)/./node_modules/bullmq/dist/cjs/classes/redis-connection.js\");\nconst job_1 = __webpack_require__(/*! ./job */ \"(rsc)/./node_modules/bullmq/dist/cjs/classes/job.js\");\nconst queue_keys_1 = __webpack_require__(/*! ./queue-keys */ \"(rsc)/./node_modules/bullmq/dist/cjs/classes/queue-keys.js\");\n/**\n * Base class for all classes that need to interact with queues.\n * This class is normally not used directly, but extended by the other classes.\n *\n */ class QueueBase extends events_1.EventEmitter {\n    /**\n     *\n     * @param name - The name of the queue.\n     * @param opts - Options for the queue.\n     * @param Connection - An optional \"Connection\" class used to instantiate a Connection. This is useful for\n     * testing with mockups and/or extending the Connection class and passing an alternate implementation.\n     */ constructor(name, opts = {\n        connection: {}\n    }, Connection = redis_connection_1.RedisConnection, hasBlockingConnection = false){\n        super();\n        this.name = name;\n        this.opts = opts;\n        this.closed = false;\n        this.hasBlockingConnection = false;\n        this.hasBlockingConnection = hasBlockingConnection;\n        this.opts = Object.assign({\n            prefix: \"bull\"\n        }, opts);\n        if (!name) {\n            throw new Error(\"Queue name must be provided\");\n        }\n        if (name.includes(\":\")) {\n            throw new Error(\"Queue name cannot contain :\");\n        }\n        this.connection = new Connection(opts.connection, {\n            shared: (0, utils_1.isRedisInstance)(opts.connection),\n            blocking: hasBlockingConnection,\n            skipVersionCheck: opts.skipVersionCheck,\n            skipWaitingForReady: opts.skipWaitingForReady\n        });\n        this.connection.on(\"error\", (error)=>this.emit(\"error\", error));\n        this.connection.on(\"close\", ()=>{\n            if (!this.closing) {\n                this.emit(\"ioredis:close\");\n            }\n        });\n        const queueKeys = new queue_keys_1.QueueKeys(opts.prefix);\n        this.qualifiedName = queueKeys.getQueueQualifiedName(name);\n        this.keys = queueKeys.getKeys(name);\n        this.toKey = (type)=>queueKeys.toKey(name, type);\n        this.createScripts();\n    }\n    /**\n     * Returns a promise that resolves to a redis client. Normally used only by subclasses.\n     */ get client() {\n        return this.connection.client;\n    }\n    createScripts() {\n        this.scripts = (0, create_scripts_1.createScripts)(this);\n    }\n    /**\n     * Returns the version of the Redis instance the client is connected to,\n     */ get redisVersion() {\n        return this.connection.redisVersion;\n    }\n    /**\n     * Helper to easily extend Job class calls.\n     */ get Job() {\n        return job_1.Job;\n    }\n    /**\n     * Emits an event. Normally used by subclasses to emit events.\n     *\n     * @param event - The emitted event.\n     * @param args -\n     * @returns\n     */ emit(event, ...args) {\n        try {\n            return super.emit(event, ...args);\n        } catch (err) {\n            try {\n                return super.emit(\"error\", err);\n            } catch (err) {\n                // We give up if the error event also throws an exception.\n                console.error(err);\n                return false;\n            }\n        }\n    }\n    waitUntilReady() {\n        return this.client;\n    }\n    base64Name() {\n        return Buffer.from(this.name).toString(\"base64\");\n    }\n    clientName(suffix = \"\") {\n        const queueNameBase64 = this.base64Name();\n        return `${this.opts.prefix}:${queueNameBase64}${suffix}`;\n    }\n    /**\n     *\n     * Closes the connection and returns a promise that resolves when the connection is closed.\n     */ async close() {\n        if (!this.closing) {\n            this.closing = this.connection.close();\n        }\n        await this.closing;\n        this.closed = true;\n    }\n    /**\n     *\n     * Force disconnects a connection.\n     */ disconnect() {\n        return this.connection.disconnect();\n    }\n    async checkConnectionError(fn, delayInMs = utils_1.DELAY_TIME_5) {\n        try {\n            return await fn();\n        } catch (error) {\n            if ((0, utils_1.isNotConnectionError)(error)) {\n                this.emit(\"error\", error);\n            }\n            if (!this.closing && delayInMs) {\n                await (0, utils_1.delay)(delayInMs);\n            } else {\n                return;\n            }\n        }\n    }\n    /**\n     * Wraps the code with telemetry and provides a span for configuration.\n     *\n     * @param spanKind - kind of the span: Producer, Consumer, Internal\n     * @param operation - operation name (such as add, process, etc)\n     * @param destination - destination name (normally the queue name)\n     * @param callback - code to wrap with telemetry\n     * @param srcPropagationMedatada -\n     * @returns\n     */ trace(spanKind, operation, destination, callback, srcPropagationMetadata) {\n        return (0, utils_1.trace)(this.opts.telemetry, spanKind, this.name, operation, destination, callback, srcPropagationMetadata);\n    }\n}\nexports.QueueBase = QueueBase; //# sourceMappingURL=queue-base.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL2NsYXNzZXMvcXVldWUtYmFzZS5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsaUJBQWlCLEdBQUcsS0FBSztBQUN6QixNQUFNRyxXQUFXQyxtQkFBT0EsQ0FBQyxzQkFBUTtBQUNqQyxNQUFNQyxVQUFVRCxtQkFBT0EsQ0FBQyxxRUFBVTtBQUNsQyxNQUFNRSxtQkFBbUJGLG1CQUFPQSxDQUFDLDZGQUF5QjtBQUMxRCxNQUFNRyxxQkFBcUJILG1CQUFPQSxDQUFDLDRGQUFvQjtBQUN2RCxNQUFNSSxRQUFRSixtQkFBT0EsQ0FBQyxrRUFBTztBQUM3QixNQUFNSyxlQUFlTCxtQkFBT0EsQ0FBQyxnRkFBYztBQUMzQzs7OztDQUlDLEdBQ0QsTUFBTUYsa0JBQWtCQyxTQUFTTyxZQUFZO0lBQ3pDOzs7Ozs7S0FNQyxHQUNEQyxZQUFZQyxJQUFJLEVBQUVDLE9BQU87UUFBRUMsWUFBWSxDQUFDO0lBQUUsQ0FBQyxFQUFFQyxhQUFhUixtQkFBbUJTLGVBQWUsRUFBRUMsd0JBQXdCLEtBQUssQ0FBRTtRQUN6SCxLQUFLO1FBQ0wsSUFBSSxDQUFDTCxJQUFJLEdBQUdBO1FBQ1osSUFBSSxDQUFDQyxJQUFJLEdBQUdBO1FBQ1osSUFBSSxDQUFDSyxNQUFNLEdBQUc7UUFDZCxJQUFJLENBQUNELHFCQUFxQixHQUFHO1FBQzdCLElBQUksQ0FBQ0EscUJBQXFCLEdBQUdBO1FBQzdCLElBQUksQ0FBQ0osSUFBSSxHQUFHZixPQUFPcUIsTUFBTSxDQUFDO1lBQUVDLFFBQVE7UUFBTyxHQUFHUDtRQUM5QyxJQUFJLENBQUNELE1BQU07WUFDUCxNQUFNLElBQUlTLE1BQU07UUFDcEI7UUFDQSxJQUFJVCxLQUFLVSxRQUFRLENBQUMsTUFBTTtZQUNwQixNQUFNLElBQUlELE1BQU07UUFDcEI7UUFDQSxJQUFJLENBQUNQLFVBQVUsR0FBRyxJQUFJ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QUFFbEMsUUFBUTtnQkFDMUMsSUFBSSxDQUFDQyxJQUFJLENBQUMsU0FBU0Q7WUFDdkI7WUFDQSxJQUFJLENBQUMsSUFBSSxDQUFDRSxPQUFPLElBQUk4QixXQUFXO2dCQUM1QixNQUFNLENBQUMsR0FBR3hELFFBQVEyRCxLQUFLLEVBQUVIO1lBQzdCLE9BQ0s7Z0JBQ0Q7WUFDSjtRQUNKO0lBQ0o7SUFDQTs7Ozs7Ozs7O0tBU0MsR0FDREksTUFBTUMsUUFBUSxFQUFFQyxTQUFTLEVBQUVDLFdBQVcsRUFBRUMsUUFBUSxFQUFFQyxzQkFBc0IsRUFBRTtRQUN0RSxPQUFPLENBQUMsR0FBR2pFLFFBQVE0RCxLQUFLLEVBQUUsSUFBSSxDQUFDcEQsSUFBSSxDQUFDMEQsU0FBUyxFQUFFTCxVQUFVLElBQUksQ0FBQ3RELElBQUksRUFBRXVELFdBQVdDLGFBQWFDLFVBQVVDO0lBQzFHO0FBQ0o7QUFDQXRFLGlCQUFpQixHQUFHRSxXQUNwQixzQ0FBc0MiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vbmx5ZmFucy1wbGF0Zm9ybS8uL25vZGVfbW9kdWxlcy9idWxsbXEvZGlzdC9janMvY2xhc3Nlcy9xdWV1ZS1iYXNlLmpzP2IxYTciXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLlF1ZXVlQmFzZSA9IHZvaWQgMDtcbmNvbnN0IGV2ZW50c18xID0gcmVxdWlyZShcImV2ZW50c1wiKTtcbmNvbnN0IHV0aWxzXzEgPSByZXF1aXJlKFwiLi4vdXRpbHNcIik7XG5jb25zdCBjcmVhdGVfc2NyaXB0c18xID0gcmVxdWlyZShcIi4uL3V0aWxzL2NyZWF0ZS1zY3JpcHRzXCIpO1xuY29uc3QgcmVkaXNfY29ubmVjdGlvbl8xID0gcmVxdWlyZShcIi4vcmVkaXMtY29ubmVjdGlvblwiKTtcbmNvbnN0IGpvYl8xID0gcmVxdWlyZShcIi4vam9iXCIpO1xuY29uc3QgcXVldWVfa2V5c18xID0gcmVxdWlyZShcIi4vcXVldWUta2V5c1wiKTtcbi8qKlxuICogQmFzZSBjbGFzcyBmb3IgYWxsIGNsYXNzZXMgdGhhdCBuZWVkIHRvIGludGVyYWN0IHdpdGggcXVldWVzLlxuICogVGhpcyBjbGFzcyBpcyBub3JtYWxseSBub3QgdXNlZCBkaXJlY3RseSwgYnV0IGV4dGVuZGVkIGJ5IHRoZSBvdGhlciBjbGFzc2VzLlxuICpcbiAqL1xuY2xhc3MgUXVldWVCYXNlIGV4dGVuZHMgZXZlbnRzXzEuRXZlbnRFbWl0dGVyIHtcbiAgICAvKipcbiAgICAgKlxuICAgICAqIEBwYXJhbSBuYW1lIC0gVGhlIG5hbWUgb2YgdGhlIHF1ZXVlLlxuICAgICAqIEBwYXJhbSBvcHRzIC0gT3B0aW9ucyBmb3IgdGhlIHF1ZXVlLlxuICAgICAqIEBwYXJhbSBDb25uZWN0aW9uIC0gQW4gb3B0aW9uYWwgXCJDb25uZWN0aW9uXCIgY2xhc3MgdXNlZCB0byBpbnN0YW50aWF0ZSBhIENvbm5lY3Rpb24uIFRoaXMgaXMgdXNlZnVsIGZvclxuICAgICAqIHRlc3Rpbmcgd2l0aCBtb2NrdXBzIGFuZC9vciBleHRlbmRpbmcgdGhlIENvbm5lY3Rpb24gY2xhc3MgYW5kIHBhc3NpbmcgYW4gYWx0ZXJuYXRlIGltcGxlbWVudGF0aW9uLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKG5hbWUsIG9wdHMgPSB7IGNvbm5lY3Rpb246IHt9IH0sIENvbm5lY3Rpb24gPSByZWRpc19jb25uZWN0aW9uXzEuUmVkaXNDb25uZWN0aW9uLCBoYXNCbG9ja2luZ0Nvbm5lY3Rpb24gPSBmYWxzZSkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgICAgICB0aGlzLm9wdHMgPSBvcHRzO1xuICAgICAgICB0aGlzLmNsb3NlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmhhc0Jsb2NraW5nQ29ubmVjdGlvbiA9IGZhbHNlO1xuICAgICAgICB0aGlzLmhhc0Jsb2NraW5nQ29ubmVjdGlvbiA9IGhhc0Jsb2NraW5nQ29ubmVjdGlvbjtcbiAgICAgICAgdGhpcy5vcHRzID0gT2JqZWN0LmFzc2lnbih7IHByZWZpeDogJ2J1bGwnIH0sIG9wdHMpO1xuICAgICAgICBpZiAoIW5hbWUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUXVldWUgbmFtZSBtdXN0IGJlIHByb3ZpZGVkJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG5hbWUuaW5jbHVkZXMoJzonKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdRdWV1ZSBuYW1lIGNhbm5vdCBjb250YWluIDonKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNvbm5lY3Rpb24gPSBuZXcgQ29ubmVjdGlvbihvcHRzLmNvbm5lY3Rpb24sIHtcbiAgICAgICAgICAgIHNoYXJlZDogKDAsIHV0aWxzXzEuaXNSZWRpc0luc3RhbmNlKShvcHRzLmNvbm5lY3Rpb24pLFxuICAgICAgICAgICAgYmxvY2tpbmc6IGhhc0Jsb2NraW5nQ29ubmVjdGlvbixcbiAgICAgICAgICAgIHNraXBWZXJzaW9uQ2hlY2s6IG9wdHMuc2tpcFZlcnNpb25DaGVjayxcbiAgICAgICAgICAgIHNraXBXYWl0aW5nRm9yUmVhZHk6IG9wdHMuc2tpcFdhaXRpbmdGb3JSZWFkeSxcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuY29ubmVjdGlvbi5vbignZXJyb3InLCAoZXJyb3IpID0+IHRoaXMuZW1pdCgnZXJyb3InLCBlcnJvcikpO1xuICAgICAgICB0aGlzLmNvbm5lY3Rpb24ub24oJ2Nsb3NlJywgKCkgPT4ge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmNsb3NpbmcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2lvcmVkaXM6Y2xvc2UnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHF1ZXVlS2V5cyA9IG5ldyBxdWV1ZV9rZXlzXzEuUXVldWVLZXlzKG9wdHMucHJlZml4KTtcbiAgICAgICAgdGhpcy5xdWFsaWZpZWROYW1lID0gcXVldWVLZXlzLmdldFF1ZXVlUXVhbGlmaWVkTmFtZShuYW1lKTtcbiAgICAgICAgdGhpcy5rZXlzID0gcXVldWVLZXlzLmdldEtleXMobmFtZSk7XG4gICAgICAgIHRoaXMudG9LZXkgPSAodHlwZSkgPT4gcXVldWVLZXlzLnRvS2V5KG5hbWUsIHR5cGUpO1xuICAgICAgICB0aGlzLmNyZWF0ZVNjcmlwdHMoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIHByb21pc2UgdGhhdCByZXNvbHZlcyB0byBhIHJlZGlzIGNsaWVudC4gTm9ybWFsbHkgdXNlZCBvbmx5IGJ5IHN1YmNsYXNzZXMuXG4gICAgICovXG4gICAgZ2V0IGNsaWVudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29ubmVjdGlvbi5jbGllbnQ7XG4gICAgfVxuICAgIGNyZWF0ZVNjcmlwdHMoKSB7XG4gICAgICAgIHRoaXMuc2NyaXB0cyA9ICgwLCBjcmVhdGVfc2NyaXB0c18xLmNyZWF0ZVNjcmlwdHMpKHRoaXMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSB2ZXJzaW9uIG9mIHRoZSBSZWRpcyBpbnN0YW5jZSB0aGUgY2xpZW50IGlzIGNvbm5lY3RlZCB0byxcbiAgICAgKi9cbiAgICBnZXQgcmVkaXNWZXJzaW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb25uZWN0aW9uLnJlZGlzVmVyc2lvbjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSGVscGVyIHRvIGVhc2lseSBleHRlbmQgSm9iIGNsYXNzIGNhbGxzLlxuICAgICAqL1xuICAgIGdldCBKb2IoKSB7XG4gICAgICAgIHJldHVybiBqb2JfMS5Kb2I7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEVtaXRzIGFuIGV2ZW50LiBOb3JtYWxseSB1c2VkIGJ5IHN1YmNsYXNzZXMgdG8gZW1pdCBldmVudHMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZXZlbnQgLSBUaGUgZW1pdHRlZCBldmVudC5cbiAgICAgKiBAcGFyYW0gYXJncyAtXG4gICAgICogQHJldHVybnNcbiAgICAgKi9cbiAgICBlbWl0KGV2ZW50LCAuLi5hcmdzKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gc3VwZXIuZW1pdChldmVudCwgLi4uYXJncyk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gc3VwZXIuZW1pdCgnZXJyb3InLCBlcnIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIC8vIFdlIGdpdmUgdXAgaWYgdGhlIGVycm9yIGV2ZW50IGFsc28gdGhyb3dzIGFuIGV4Y2VwdGlvbi5cbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHdhaXRVbnRpbFJlYWR5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jbGllbnQ7XG4gICAgfVxuICAgIGJhc2U2NE5hbWUoKSB7XG4gICAgICAgIHJldHVybiBCdWZmZXIuZnJvbSh0aGlzLm5hbWUpLnRvU3RyaW5nKCdiYXNlNjQnKTtcbiAgICB9XG4gICAgY2xpZW50TmFtZShzdWZmaXggPSAnJykge1xuICAgICAgICBjb25zdCBxdWV1ZU5hbWVCYXNlNjQgPSB0aGlzLmJhc2U2NE5hbWUoKTtcbiAgICAgICAgcmV0dXJuIGAke3RoaXMub3B0cy5wcmVmaXh9OiR7cXVldWVOYW1lQmFzZTY0fSR7c3VmZml4fWA7XG4gICAgfVxuICAgIC8qKlxuICAgICAqXG4gICAgICogQ2xvc2VzIHRoZSBjb25uZWN0aW9uIGFuZCByZXR1cm5zIGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHdoZW4gdGhlIGNvbm5lY3Rpb24gaXMgY2xvc2VkLlxuICAgICAqL1xuICAgIGFzeW5jIGNsb3NlKCkge1xuICAgICAgICBpZiAoIXRoaXMuY2xvc2luZykge1xuICAgICAgICAgICAgdGhpcy5jbG9zaW5nID0gdGhpcy5jb25uZWN0aW9uLmNsb3NlKCk7XG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgdGhpcy5jbG9zaW5nO1xuICAgICAgICB0aGlzLmNsb3NlZCA9IHRydWU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqXG4gICAgICogRm9yY2UgZGlzY29ubmVjdHMgYSBjb25uZWN0aW9uLlxuICAgICAqL1xuICAgIGRpc2Nvbm5lY3QoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbm5lY3Rpb24uZGlzY29ubmVjdCgpO1xuICAgIH1cbiAgICBhc3luYyBjaGVja0Nvbm5lY3Rpb25FcnJvcihmbiwgZGVsYXlJbk1zID0gdXRpbHNfMS5ERUxBWV9USU1FXzUpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCBmbigpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgaWYgKCgwLCB1dGlsc18xLmlzTm90Q29ubmVjdGlvbkVycm9yKShlcnJvcikpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2Vycm9yJywgZXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCF0aGlzLmNsb3NpbmcgJiYgZGVsYXlJbk1zKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgKDAsIHV0aWxzXzEuZGVsYXkpKGRlbGF5SW5Ncyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogV3JhcHMgdGhlIGNvZGUgd2l0aCB0ZWxlbWV0cnkgYW5kIHByb3ZpZGVzIGEgc3BhbiBmb3IgY29uZmlndXJhdGlvbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBzcGFuS2luZCAtIGtpbmQgb2YgdGhlIHNwYW46IFByb2R1Y2VyLCBDb25zdW1lciwgSW50ZXJuYWxcbiAgICAgKiBAcGFyYW0gb3BlcmF0aW9uIC0gb3BlcmF0aW9uIG5hbWUgKHN1Y2ggYXMgYWRkLCBwcm9jZXNzLCBldGMpXG4gICAgICogQHBhcmFtIGRlc3RpbmF0aW9uIC0gZGVzdGluYXRpb24gbmFtZSAobm9ybWFsbHkgdGhlIHF1ZXVlIG5hbWUpXG4gICAgICogQHBhcmFtIGNhbGxiYWNrIC0gY29kZSB0byB3cmFwIHdpdGggdGVsZW1ldHJ5XG4gICAgICogQHBhcmFtIHNyY1Byb3BhZ2F0aW9uTWVkYXRhZGEgLVxuICAgICAqIEByZXR1cm5zXG4gICAgICovXG4gICAgdHJhY2Uoc3BhbktpbmQsIG9wZXJhdGlvbiwgZGVzdGluYXRpb24sIGNhbGxiYWNrLCBzcmNQcm9wYWdhdGlvbk1ldGFkYXRhKSB7XG4gICAgICAgIHJldHVybiAoMCwgdXRpbHNfMS50cmFjZSkodGhpcy5vcHRzLnRlbGVtZXRyeSwgc3BhbktpbmQsIHRoaXMubmFtZSwgb3BlcmF0aW9uLCBkZXN0aW5hdGlvbiwgY2FsbGJhY2ssIHNyY1Byb3BhZ2F0aW9uTWV0YWRhdGEpO1xuICAgIH1cbn1cbmV4cG9ydHMuUXVldWVCYXNlID0gUXVldWVCYXNlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cXVldWUtYmFzZS5qcy5tYXAiXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJRdWV1ZUJhc2UiLCJldmVudHNfMSIsInJlcXVpcmUiLCJ1dGlsc18xIiwiY3JlYXRlX3NjcmlwdHNfMSIsInJlZGlzX2Nvbm5lY3Rpb25fMSIsImpvYl8xIiwicXVldWVfa2V5c18xIiwiRXZlbnRFbWl0dGVyIiwiY29uc3RydWN0b3IiLCJuYW1lIiwib3B0cyIsImNvbm5lY3Rpb24iLCJDb25uZWN0aW9uIiwiUmVkaXNDb25uZWN0aW9uIiwiaGFzQmxvY2tpbmdDb25uZWN0aW9uIiwiY2xvc2VkIiwiYXNzaWduIiwicHJlZml4IiwiRXJyb3IiLCJpbmNsdWRlcyIsInNoYXJlZCIsImlzUmVkaXNJbnN0YW5jZSIsImJsb2NraW5nIiwic2tpcFZlcnNpb25DaGVjayIsInNraXBXYWl0aW5nRm9yUmVhZHkiLCJvbiIsImVycm9yIiwiZW1pdCIsImNsb3NpbmciLCJxdWV1ZUtleXMiLCJRdWV1ZUtleXMiLCJxdWFsaWZpZWROYW1lIiwiZ2V0UXVldWVRdWFsaWZpZWROYW1lIiwia2V5cyIsImdldEtleXMiLCJ0b0tleSIsInR5cGUiLCJjcmVhdGVTY3JpcHRzIiwiY2xpZW50Iiwic2NyaXB0cyIsInJlZGlzVmVyc2lvbiIsIkpvYiIsImV2ZW50IiwiYXJncyIsImVyciIsImNvbnNvbGUiLCJ3YWl0VW50aWxSZWFkeSIsImJhc2U2NE5hbWUiLCJCdWZmZXIiLCJmcm9tIiwidG9TdHJpbmciLCJjbGllbnROYW1lIiwic3VmZml4IiwicXVldWVOYW1lQmFzZTY0IiwiY2xvc2UiLCJkaXNjb25uZWN0IiwiY2hlY2tDb25uZWN0aW9uRXJyb3IiLCJmbiIsImRlbGF5SW5NcyIsIkRFTEFZX1RJTUVfNSIsImlzTm90Q29ubmVjdGlvbkVycm9yIiwiZGVsYXkiLCJ0cmFjZSIsInNwYW5LaW5kIiwib3BlcmF0aW9uIiwiZGVzdGluYXRpb24iLCJjYWxsYmFjayIsInNyY1Byb3BhZ2F0aW9uTWV0YWRhdGEiLCJ0ZWxlbWV0cnkiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/classes/queue-base.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/classes/queue-events-producer.js":
/*!***********************************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/classes/queue-events-producer.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.QueueEventsProducer = void 0;\nconst tslib_1 = __webpack_require__(/*! tslib */ \"(rsc)/./node_modules/tslib/tslib.es6.mjs\");\nconst queue_base_1 = __webpack_require__(/*! ./queue-base */ \"(rsc)/./node_modules/bullmq/dist/cjs/classes/queue-base.js\");\n/**\n * The QueueEventsProducer class is used for publishing custom events.\n */ class QueueEventsProducer extends queue_base_1.QueueBase {\n    constructor(name, opts = {\n        connection: {}\n    }, Connection){\n        super(name, Object.assign({\n            blockingConnection: false\n        }, opts), Connection);\n        this.opts = opts;\n    }\n    /**\n     * Publish custom event to be processed in QueueEvents.\n     * @param argsObj - Event payload\n     * @param maxEvents - Max quantity of events to be saved\n     */ async publishEvent(argsObj, maxEvents = 1000) {\n        const client = await this.client;\n        const key = this.keys.events;\n        const { eventName } = argsObj, restArgs = tslib_1.__rest(argsObj, [\n            \"eventName\"\n        ]);\n        const args = [\n            \"MAXLEN\",\n            \"~\",\n            maxEvents,\n            \"*\",\n            \"event\",\n            eventName\n        ];\n        for (const [key, value] of Object.entries(restArgs)){\n            args.push(key, value);\n        }\n        await client.xadd(key, ...args);\n    }\n    /**\n     * Closes the connection and returns a promise that resolves when the connection is closed.\n     */ async close() {\n        if (!this.closing) {\n            this.closing = this.connection.close();\n        }\n        await this.closing;\n    }\n}\nexports.QueueEventsProducer = QueueEventsProducer; //# sourceMappingURL=queue-events-producer.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL2NsYXNzZXMvcXVldWUtZXZlbnRzLXByb2R1Y2VyLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCwyQkFBMkIsR0FBRyxLQUFLO0FBQ25DLE1BQU1HLFVBQVVDLG1CQUFPQSxDQUFDLHVEQUFPO0FBQy9CLE1BQU1DLGVBQWVELG1CQUFPQSxDQUFDLGdGQUFjO0FBQzNDOztDQUVDLEdBQ0QsTUFBTUYsNEJBQTRCRyxhQUFhQyxTQUFTO0lBQ3BEQyxZQUFZQyxJQUFJLEVBQUVDLE9BQU87UUFDckJDLFlBQVksQ0FBQztJQUNqQixDQUFDLEVBQUVDLFVBQVUsQ0FBRTtRQUNYLEtBQUssQ0FBQ0gsTUFBTVYsT0FBT2MsTUFBTSxDQUFDO1lBQUVDLG9CQUFvQjtRQUFNLEdBQUdKLE9BQU9FO1FBQ2hFLElBQUksQ0FBQ0YsSUFBSSxHQUFHQTtJQUNoQjtJQUNBOzs7O0tBSUMsR0FDRCxNQUFNSyxhQUFhQyxPQUFPLEVBQUVDLFlBQVksSUFBSSxFQUFFO1FBQzFDLE1BQU1DLFNBQVMsTUFBTSxJQUFJLENBQUNBLE1BQU07UUFDaEMsTUFBTUMsTUFBTSxJQUFJLENBQUNDLElBQUksQ0FBQ0MsTUFBTTtRQUM1QixNQUFNLEVBQUVDLFNBQVMsRUFBRSxHQUFHTixTQUFTTyxXQUFXbkIsUUFBUW9CLE1BQU0sQ0FBQ1IsU0FBUztZQUFDO1NBQVk7UUFDL0UsTUFBTVMsT0FBTztZQUFDO1lBQVU7WUFBS1I7WUFBVztZQUFLO1lBQVNLO1NBQVU7UUFDaEUsS0FBSyxNQUFNLENBQUNILEtBQUtqQixNQUFNLElBQUlILE9BQU8yQixPQUFPLENBQUNILFVBQVc7WUFDakRFLEtBQUtFLElBQUksQ0FBQ1IsS0FBS2pCO1FBQ25CO1FBQ0EsTUFBTWdCLE9BQU9VLElBQUksQ0FBQ1QsUUFBUU07SUFDOUI7SUFDQTs7S0FFQyxHQUNELE1BQU1JLFFBQVE7UUFDVixJQUFJLENBQUMsSUFBSSxDQUFDQyxPQUFPLEVBQUU7WUFDZixJQUFJLENBQUNBLE9BQU8sR0FBRyxJQUFJLENBQUNuQixVQUFVLENBQUNrQixLQUFLO1FBQ3hDO1FBQ0EsTUFBTSxJQUFJLENBQUNDLE9BQU87SUFDdEI7QUFDSjtBQUNBN0IsMkJBQTJCLEdBQUdFLHFCQUM5QixpREFBaUQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vbmx5ZmFucy1wbGF0Zm9ybS8uL25vZGVfbW9kdWxlcy9idWxsbXEvZGlzdC9janMvY2xhc3Nlcy9xdWV1ZS1ldmVudHMtcHJvZHVjZXIuanM/YmYyNCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuUXVldWVFdmVudHNQcm9kdWNlciA9IHZvaWQgMDtcbmNvbnN0IHRzbGliXzEgPSByZXF1aXJlKFwidHNsaWJcIik7XG5jb25zdCBxdWV1ZV9iYXNlXzEgPSByZXF1aXJlKFwiLi9xdWV1ZS1iYXNlXCIpO1xuLyoqXG4gKiBUaGUgUXVldWVFdmVudHNQcm9kdWNlciBjbGFzcyBpcyB1c2VkIGZvciBwdWJsaXNoaW5nIGN1c3RvbSBldmVudHMuXG4gKi9cbmNsYXNzIFF1ZXVlRXZlbnRzUHJvZHVjZXIgZXh0ZW5kcyBxdWV1ZV9iYXNlXzEuUXVldWVCYXNlIHtcbiAgICBjb25zdHJ1Y3RvcihuYW1lLCBvcHRzID0ge1xuICAgICAgICBjb25uZWN0aW9uOiB7fSxcbiAgICB9LCBDb25uZWN0aW9uKSB7XG4gICAgICAgIHN1cGVyKG5hbWUsIE9iamVjdC5hc3NpZ24oeyBibG9ja2luZ0Nvbm5lY3Rpb246IGZhbHNlIH0sIG9wdHMpLCBDb25uZWN0aW9uKTtcbiAgICAgICAgdGhpcy5vcHRzID0gb3B0cztcbiAgICB9XG4gICAgLyoqXG4gICAgICogUHVibGlzaCBjdXN0b20gZXZlbnQgdG8gYmUgcHJvY2Vzc2VkIGluIFF1ZXVlRXZlbnRzLlxuICAgICAqIEBwYXJhbSBhcmdzT2JqIC0gRXZlbnQgcGF5bG9hZFxuICAgICAqIEBwYXJhbSBtYXhFdmVudHMgLSBNYXggcXVhbnRpdHkgb2YgZXZlbnRzIHRvIGJlIHNhdmVkXG4gICAgICovXG4gICAgYXN5bmMgcHVibGlzaEV2ZW50KGFyZ3NPYmosIG1heEV2ZW50cyA9IDEwMDApIHtcbiAgICAgICAgY29uc3QgY2xpZW50ID0gYXdhaXQgdGhpcy5jbGllbnQ7XG4gICAgICAgIGNvbnN0IGtleSA9IHRoaXMua2V5cy5ldmVudHM7XG4gICAgICAgIGNvbnN0IHsgZXZlbnROYW1lIH0gPSBhcmdzT2JqLCByZXN0QXJncyA9IHRzbGliXzEuX19yZXN0KGFyZ3NPYmosIFtcImV2ZW50TmFtZVwiXSk7XG4gICAgICAgIGNvbnN0IGFyZ3MgPSBbJ01BWExFTicsICd+JywgbWF4RXZlbnRzLCAnKicsICdldmVudCcsIGV2ZW50TmFtZV07XG4gICAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHJlc3RBcmdzKSkge1xuICAgICAgICAgICAgYXJncy5wdXNoKGtleSwgdmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGF3YWl0IGNsaWVudC54YWRkKGtleSwgLi4uYXJncyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENsb3NlcyB0aGUgY29ubmVjdGlvbiBhbmQgcmV0dXJucyBhIHByb21pc2UgdGhhdCByZXNvbHZlcyB3aGVuIHRoZSBjb25uZWN0aW9uIGlzIGNsb3NlZC5cbiAgICAgKi9cbiAgICBhc3luYyBjbG9zZSgpIHtcbiAgICAgICAgaWYgKCF0aGlzLmNsb3NpbmcpIHtcbiAgICAgICAgICAgIHRoaXMuY2xvc2luZyA9IHRoaXMuY29ubmVjdGlvbi5jbG9zZSgpO1xuICAgICAgICB9XG4gICAgICAgIGF3YWl0IHRoaXMuY2xvc2luZztcbiAgICB9XG59XG5leHBvcnRzLlF1ZXVlRXZlbnRzUHJvZHVjZXIgPSBRdWV1ZUV2ZW50c1Byb2R1Y2VyO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cXVldWUtZXZlbnRzLXByb2R1Y2VyLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsIlF1ZXVlRXZlbnRzUHJvZHVjZXIiLCJ0c2xpYl8xIiwicmVxdWlyZSIsInF1ZXVlX2Jhc2VfMSIsIlF1ZXVlQmFzZSIsImNvbnN0cnVjdG9yIiwibmFtZSIsIm9wdHMiLCJjb25uZWN0aW9uIiwiQ29ubmVjdGlvbiIsImFzc2lnbiIsImJsb2NraW5nQ29ubmVjdGlvbiIsInB1Ymxpc2hFdmVudCIsImFyZ3NPYmoiLCJtYXhFdmVudHMiLCJjbGllbnQiLCJrZXkiLCJrZXlzIiwiZXZlbnRzIiwiZXZlbnROYW1lIiwicmVzdEFyZ3MiLCJfX3Jlc3QiLCJhcmdzIiwiZW50cmllcyIsInB1c2giLCJ4YWRkIiwiY2xvc2UiLCJjbG9zaW5nIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/classes/queue-events-producer.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/classes/queue-events.js":
/*!**************************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/classes/queue-events.js ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.QueueEvents = void 0;\nconst tslib_1 = __webpack_require__(/*! tslib */ \"(rsc)/./node_modules/tslib/tslib.es6.mjs\");\nconst utils_1 = __webpack_require__(/*! ../utils */ \"(rsc)/./node_modules/bullmq/dist/cjs/utils/index.js\");\nconst queue_base_1 = __webpack_require__(/*! ./queue-base */ \"(rsc)/./node_modules/bullmq/dist/cjs/classes/queue-base.js\");\n/**\n * The QueueEvents class is used for listening to the global events\n * emitted by a given queue.\n *\n * This class requires a dedicated redis connection.\n *\n */ class QueueEvents extends queue_base_1.QueueBase {\n    constructor(name, _a = {\n        connection: {}\n    }, Connection){\n        var { connection, autorun = true } = _a, opts = tslib_1.__rest(_a, [\n            \"connection\",\n            \"autorun\"\n        ]);\n        super(name, Object.assign(Object.assign({}, opts), {\n            connection: (0, utils_1.isRedisInstance)(connection) ? connection.duplicate() : connection\n        }), Connection, true);\n        this.running = false;\n        this.opts = Object.assign({\n            blockingTimeout: 10000\n        }, this.opts);\n        if (autorun) {\n            this.run().catch((error)=>this.emit(\"error\", error));\n        }\n    }\n    emit(event, ...args) {\n        return super.emit(event, ...args);\n    }\n    off(eventName, listener) {\n        super.off(eventName, listener);\n        return this;\n    }\n    on(event, listener) {\n        super.on(event, listener);\n        return this;\n    }\n    once(event, listener) {\n        super.once(event, listener);\n        return this;\n    }\n    /**\n     * Manually starts running the event consumming loop. This shall be used if you do not\n     * use the default \"autorun\" option on the constructor.\n     */ async run() {\n        if (!this.running) {\n            try {\n                this.running = true;\n                const client = await this.client;\n                // TODO: Planed for deprecation as it has no really a use case\n                try {\n                    await client.client(\"SETNAME\", this.clientName(utils_1.QUEUE_EVENT_SUFFIX));\n                } catch (err) {\n                    if (!utils_1.clientCommandMessageReg.test(err.message)) {\n                        throw err;\n                    }\n                }\n                await this.consumeEvents(client);\n            } catch (error) {\n                this.running = false;\n                throw error;\n            }\n        } else {\n            throw new Error(\"Queue Events is already running.\");\n        }\n    }\n    async consumeEvents(client) {\n        const opts = this.opts;\n        const key = this.keys.events;\n        let id = opts.lastEventId || \"$\";\n        while(!this.closing){\n            // Cast to actual return type, see: https://github.com/DefinitelyTyped/DefinitelyTyped/issues/44301\n            const data = await this.checkConnectionError(()=>client.xread(\"BLOCK\", opts.blockingTimeout, \"STREAMS\", key, id));\n            if (data) {\n                const stream = data[0];\n                const events = stream[1];\n                for(let i = 0; i < events.length; i++){\n                    id = events[i][0];\n                    const args = (0, utils_1.array2obj)(events[i][1]);\n                    //\n                    // TODO: we may need to have a separate xtream for progress data\n                    // to avoid this hack.\n                    switch(args.event){\n                        case \"progress\":\n                            args.data = JSON.parse(args.data);\n                            break;\n                        case \"completed\":\n                            args.returnvalue = JSON.parse(args.returnvalue);\n                            break;\n                    }\n                    const { event } = args, restArgs = tslib_1.__rest(args, [\n                        \"event\"\n                    ]);\n                    if (event === \"drained\") {\n                        this.emit(event, id);\n                    } else {\n                        this.emit(event, restArgs, id);\n                        if (restArgs.jobId) {\n                            this.emit(`${event}:${restArgs.jobId}`, restArgs, id);\n                        }\n                    }\n                }\n            }\n        }\n    }\n    /**\n     * Stops consuming events and close the underlying Redis connection if necessary.\n     *\n     * @returns\n     */ close() {\n        if (!this.closing) {\n            this.closing = this.disconnect();\n        }\n        return this.closing;\n    }\n}\nexports.QueueEvents = QueueEvents; //# sourceMappingURL=queue-events.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL2NsYXNzZXMvcXVldWUtZXZlbnRzLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCxtQkFBbUIsR0FBRyxLQUFLO0FBQzNCLE1BQU1HLFVBQVVDLG1CQUFPQSxDQUFDLHVEQUFPO0FBQy9CLE1BQU1DLFVBQVVELG1CQUFPQSxDQUFDLHFFQUFVO0FBQ2xDLE1BQU1FLGVBQWVGLG1CQUFPQSxDQUFDLGdGQUFjO0FBQzNDOzs7Ozs7Q0FNQyxHQUNELE1BQU1GLG9CQUFvQkksYUFBYUMsU0FBUztJQUM1Q0MsWUFBWUMsSUFBSSxFQUFFQyxLQUFLO1FBQ25CQyxZQUFZLENBQUM7SUFDakIsQ0FBQyxFQUFFQyxVQUFVLENBQUU7UUFDWCxJQUFJLEVBQUVELFVBQVUsRUFBRUUsVUFBVSxJQUFJLEVBQUUsR0FBR0gsSUFBSUksT0FBT1gsUUFBUVksTUFBTSxDQUFDTCxJQUFJO1lBQUM7WUFBYztTQUFVO1FBQzVGLEtBQUssQ0FBQ0QsTUFBTVgsT0FBT2tCLE1BQU0sQ0FBQ2xCLE9BQU9rQixNQUFNLENBQUMsQ0FBQyxHQUFHRixPQUFPO1lBQUVILFlBQVksQ0FBQyxHQUFHTixRQUFRWSxlQUFlLEVBQUVOLGNBQ3BGQSxXQUFXTyxTQUFTLEtBQ3BCUDtRQUFXLElBQUlDLFlBQVk7UUFDckMsSUFBSSxDQUFDTyxPQUFPLEdBQUc7UUFDZixJQUFJLENBQUNMLElBQUksR0FBR2hCLE9BQU9rQixNQUFNLENBQUM7WUFDdEJJLGlCQUFpQjtRQUNyQixHQUFHLElBQUksQ0FBQ04sSUFBSTtRQUNaLElBQUlELFNBQVM7WUFDVCxJQUFJLENBQUNRLEdBQUcsR0FBR0MsS0FBSyxDQUFDQyxDQUFBQSxRQUFTLElBQUksQ0FBQ0MsSUFBSSxDQUFDLFNBQVNEO1FBQ2pEO0lBQ0o7SUFDQUMsS0FBS0MsS0FBSyxFQUFFLEdBQUdDLElBQUksRUFBRTtRQUNq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QUMsRUFBRUMsTUFBTSxDQUFDLEVBQUVnQyxTQUFTQyxLQUFLLENBQUMsQ0FBQyxFQUFFRCxVQUFVYjt3QkFDdEQ7b0JBQ0o7Z0JBQ0o7WUFDSjtRQUNKO0lBQ0o7SUFDQTs7OztLQUlDLEdBQ0RlLFFBQVE7UUFDSixJQUFJLENBQUMsSUFBSSxDQUFDYixPQUFPLEVBQUU7WUFDZixJQUFJLENBQUNBLE9BQU8sR0FBRyxJQUFJLENBQUNjLFVBQVU7UUFDbEM7UUFDQSxPQUFPLElBQUksQ0FBQ2QsT0FBTztJQUN2QjtBQUNKO0FBQ0E5QyxtQkFBbUIsR0FBR0UsYUFDdEIsd0NBQXdDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb25seWZhbnMtcGxhdGZvcm0vLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL2NsYXNzZXMvcXVldWUtZXZlbnRzLmpzP2FlMjMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLlF1ZXVlRXZlbnRzID0gdm9pZCAwO1xuY29uc3QgdHNsaWJfMSA9IHJlcXVpcmUoXCJ0c2xpYlwiKTtcbmNvbnN0IHV0aWxzXzEgPSByZXF1aXJlKFwiLi4vdXRpbHNcIik7XG5jb25zdCBxdWV1ZV9iYXNlXzEgPSByZXF1aXJlKFwiLi9xdWV1ZS1iYXNlXCIpO1xuLyoqXG4gKiBUaGUgUXVldWVFdmVudHMgY2xhc3MgaXMgdXNlZCBmb3IgbGlzdGVuaW5nIHRvIHRoZSBnbG9iYWwgZXZlbnRzXG4gKiBlbWl0dGVkIGJ5IGEgZ2l2ZW4gcXVldWUuXG4gKlxuICogVGhpcyBjbGFzcyByZXF1aXJlcyBhIGRlZGljYXRlZCByZWRpcyBjb25uZWN0aW9uLlxuICpcbiAqL1xuY2xhc3MgUXVldWVFdmVudHMgZXh0ZW5kcyBxdWV1ZV9iYXNlXzEuUXVldWVCYXNlIHtcbiAgICBjb25zdHJ1Y3RvcihuYW1lLCBfYSA9IHtcbiAgICAgICAgY29ubmVjdGlvbjoge30sXG4gICAgfSwgQ29ubmVjdGlvbikge1xuICAgICAgICB2YXIgeyBjb25uZWN0aW9uLCBhdXRvcnVuID0gdHJ1ZSB9ID0gX2EsIG9wdHMgPSB0c2xpYl8xLl9fcmVzdChfYSwgW1wiY29ubmVjdGlvblwiLCBcImF1dG9ydW5cIl0pO1xuICAgICAgICBzdXBlcihuYW1lLCBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIG9wdHMpLCB7IGNvbm5lY3Rpb246ICgwLCB1dGlsc18xLmlzUmVkaXNJbnN0YW5jZSkoY29ubmVjdGlvbilcbiAgICAgICAgICAgICAgICA/IGNvbm5lY3Rpb24uZHVwbGljYXRlKClcbiAgICAgICAgICAgICAgICA6IGNvbm5lY3Rpb24gfSksIENvbm5lY3Rpb24sIHRydWUpO1xuICAgICAgICB0aGlzLnJ1bm5pbmcgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5vcHRzID0gT2JqZWN0LmFzc2lnbih7XG4gICAgICAgICAgICBibG9ja2luZ1RpbWVvdXQ6IDEwMDAwLFxuICAgICAgICB9LCB0aGlzLm9wdHMpO1xuICAgICAgICBpZiAoYXV0b3J1bikge1xuICAgICAgICAgICAgdGhpcy5ydW4oKS5jYXRjaChlcnJvciA9PiB0aGlzLmVtaXQoJ2Vycm9yJywgZXJyb3IpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbWl0KGV2ZW50LCAuLi5hcmdzKSB7XG4gICAgICAgIHJldHVybiBzdXBlci5lbWl0KGV2ZW50LCAuLi5hcmdzKTtcbiAgICB9XG4gICAgb2ZmKGV2ZW50TmFtZSwgbGlzdGVuZXIpIHtcbiAgICAgICAgc3VwZXIub2ZmKGV2ZW50TmFtZSwgbGlzdGVuZXIpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgb24oZXZlbnQsIGxpc3RlbmVyKSB7XG4gICAgICAgIHN1cGVyLm9uKGV2ZW50LCBsaXN0ZW5lcik7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBvbmNlKGV2ZW50LCBsaXN0ZW5lcikge1xuICAgICAgICBzdXBlci5vbmNlKGV2ZW50LCBsaXN0ZW5lcik7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNYW51YWxseSBzdGFydHMgcnVubmluZyB0aGUgZXZlbnQgY29uc3VtbWluZyBsb29wLiBUaGlzIHNoYWxsIGJlIHVzZWQgaWYgeW91IGRvIG5vdFxuICAgICAqIHVzZSB0aGUgZGVmYXVsdCBcImF1dG9ydW5cIiBvcHRpb24gb24gdGhlIGNvbnN0cnVjdG9yLlxuICAgICAqL1xuICAgIGFzeW5jIHJ1bigpIHtcbiAgICAgICAgaWYgKCF0aGlzLnJ1bm5pbmcpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdGhpcy5ydW5uaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBjb25zdCBjbGllbnQgPSBhd2FpdCB0aGlzLmNsaWVudDtcbiAgICAgICAgICAgICAgICAvLyBUT0RPOiBQbGFuZWQgZm9yIGRlcHJlY2F0aW9uIGFzIGl0IGhhcyBubyByZWFsbHkgYSB1c2UgY2FzZVxuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGNsaWVudC5jbGllbnQoJ1NFVE5BTUUnLCB0aGlzLmNsaWVudE5hbWUodXRpbHNfMS5RVUVVRV9FVkVOVF9TVUZGSVgpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXV0aWxzXzEuY2xpZW50Q29tbWFuZE1lc3NhZ2VSZWcudGVzdChlcnIubWVzc2FnZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IGVycjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmNvbnN1bWVFdmVudHMoY2xpZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIHRoaXMucnVubmluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdRdWV1ZSBFdmVudHMgaXMgYWxyZWFkeSBydW5uaW5nLicpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIGNvbnN1bWVFdmVudHMoY2xpZW50KSB7XG4gICAgICAgIGNvbnN0IG9wdHMgPSB0aGlzLm9wdHM7XG4gICAgICAgIGNvbnN0IGtleSA9IHRoaXMua2V5cy5ldmVudHM7XG4gICAgICAgIGxldCBpZCA9IG9wdHMubGFzdEV2ZW50SWQgfHwgJyQnO1xuICAgICAgICB3aGlsZSAoIXRoaXMuY2xvc2luZykge1xuICAgICAgICAgICAgLy8gQ2FzdCB0byBhY3R1YWwgcmV0dXJuIHR5cGUsIHNlZTogaHR0cHM6Ly9naXRodWIuY29tL0RlZmluaXRlbHlUeXBlZC9EZWZpbml0ZWx5VHlwZWQvaXNzdWVzLzQ0MzAxXG4gICAgICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgdGhpcy5jaGVja0Nvbm5lY3Rpb25FcnJvcigoKSA9PiBjbGllbnQueHJlYWQoJ0JMT0NLJywgb3B0cy5ibG9ja2luZ1RpbWVvdXQsICdTVFJFQU1TJywga2V5LCBpZCkpO1xuICAgICAgICAgICAgaWYgKGRhdGEpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzdHJlYW0gPSBkYXRhWzBdO1xuICAgICAgICAgICAgICAgIGNvbnN0IGV2ZW50cyA9IHN0cmVhbVsxXTtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGV2ZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBpZCA9IGV2ZW50c1tpXVswXTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYXJncyA9ICgwLCB1dGlsc18xLmFycmF5Mm9iaikoZXZlbnRzW2ldWzFdKTtcbiAgICAgICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgICAgICAgLy8gVE9ETzogd2UgbWF5IG5lZWQgdG8gaGF2ZSBhIHNlcGFyYXRlIHh0cmVhbSBmb3IgcHJvZ3Jlc3MgZGF0YVxuICAgICAgICAgICAgICAgICAgICAvLyB0byBhdm9pZCB0aGlzIGhhY2suXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoYXJncy5ldmVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAncHJvZ3Jlc3MnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3MuZGF0YSA9IEpTT04ucGFyc2UoYXJncy5kYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2NvbXBsZXRlZCc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJncy5yZXR1cm52YWx1ZSA9IEpTT04ucGFyc2UoYXJncy5yZXR1cm52YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgeyBldmVudCB9ID0gYXJncywgcmVzdEFyZ3MgPSB0c2xpYl8xLl9fcmVzdChhcmdzLCBbXCJldmVudFwiXSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChldmVudCA9PT0gJ2RyYWluZWQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVtaXQoZXZlbnQsIGlkKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZW1pdChldmVudCwgcmVzdEFyZ3MsIGlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN0QXJncy5qb2JJZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZW1pdChgJHtldmVudH06JHtyZXN0QXJncy5qb2JJZH1gLCByZXN0QXJncywgaWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFN0b3BzIGNvbnN1bWluZyBldmVudHMgYW5kIGNsb3NlIHRoZSB1bmRlcmx5aW5nIFJlZGlzIGNvbm5lY3Rpb24gaWYgbmVjZXNzYXJ5LlxuICAgICAqXG4gICAgICogQHJldHVybnNcbiAgICAgKi9cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgaWYgKCF0aGlzLmNsb3NpbmcpIHtcbiAgICAgICAgICAgIHRoaXMuY2xvc2luZyA9IHRoaXMuZGlzY29ubmVjdCgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmNsb3Npbmc7XG4gICAgfVxufVxuZXhwb3J0cy5RdWV1ZUV2ZW50cyA9IFF1ZXVlRXZlbnRzO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cXVldWUtZXZlbnRzLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsIlF1ZXVlRXZlbnRzIiwidHNsaWJfMSIsInJlcXVpcmUiLCJ1dGlsc18xIiwicXVldWVfYmFzZV8xIiwiUXVldWVCYXNlIiwiY29uc3RydWN0b3IiLCJuYW1lIiwiX2EiLCJjb25uZWN0aW9uIiwiQ29ubmVjdGlvbiIsImF1dG9ydW4iLCJvcHRzIiwiX19yZXN0IiwiYXNzaWduIiwiaXNSZWRpc0luc3RhbmNlIiwiZHVwbGljYXRlIiwicnVubmluZyIsImJsb2NraW5nVGltZW91dCIsInJ1biIsImNhdGNoIiwiZXJyb3IiLCJlbWl0IiwiZXZlbnQiLCJhcmdzIiwib2ZmIiwiZXZlbnROYW1lIiwibGlzdGVuZXIiLCJvbiIsIm9uY2UiLCJjbGllbnQiLCJjbGllbnROYW1lIiwiUVVFVUVfRVZFTlRfU1VGRklYIiwiZXJyIiwiY2xpZW50Q29tbWFuZE1lc3NhZ2VSZWciLCJ0ZXN0IiwibWVzc2FnZSIsImNvbnN1bWVFdmVudHMiLCJFcnJvciIsImtleSIsImtleXMiLCJldmVudHMiLCJpZCIsImxhc3RFdmVudElkIiwiY2xvc2luZyIsImRhdGEiLCJjaGVja0Nvbm5lY3Rpb25FcnJvciIsInhyZWFkIiwic3RyZWFtIiwiaSIsImxlbmd0aCIsImFycmF5Mm9iaiIsIkpTT04iLCJwYXJzZSIsInJldHVybnZhbHVlIiwicmVzdEFyZ3MiLCJqb2JJZCIsImNsb3NlIiwiZGlzY29ubmVjdCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/classes/queue-events.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/classes/queue-getters.js":
/*!***************************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/classes/queue-getters.js ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("/*eslint-env node */ \nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.QueueGetters = void 0;\nconst tslib_1 = __webpack_require__(/*! tslib */ \"(rsc)/./node_modules/tslib/tslib.es6.mjs\");\nconst queue_base_1 = __webpack_require__(/*! ./queue-base */ \"(rsc)/./node_modules/bullmq/dist/cjs/classes/queue-base.js\");\nconst utils_1 = __webpack_require__(/*! ../utils */ \"(rsc)/./node_modules/bullmq/dist/cjs/utils/index.js\");\n/**\n * Provides different getters for different aspects of a queue.\n */ class QueueGetters extends queue_base_1.QueueBase {\n    getJob(jobId) {\n        return this.Job.fromId(this, jobId);\n    }\n    commandByType(types, count, callback) {\n        return types.map((type)=>{\n            type = type === \"waiting\" ? \"wait\" : type; // alias\n            const key = this.toKey(type);\n            switch(type){\n                case \"completed\":\n                case \"failed\":\n                case \"delayed\":\n                case \"prioritized\":\n                case \"repeat\":\n                case \"waiting-children\":\n                    return callback(key, count ? \"zcard\" : \"zrange\");\n                case \"active\":\n                case \"wait\":\n                case \"paused\":\n                    return callback(key, count ? \"llen\" : \"lrange\");\n            }\n        });\n    }\n    sanitizeJobTypes(types) {\n        const currentTypes = typeof types === \"string\" ? [\n            types\n        ] : types;\n        if (Array.isArray(currentTypes) && currentTypes.length > 0) {\n            const sanitizedTypes = [\n                ...currentTypes\n            ];\n            if (sanitizedTypes.indexOf(\"waiting\") !== -1) {\n                sanitizedTypes.push(\"paused\");\n            }\n            return [\n                ...new Set(sanitizedTypes)\n            ];\n        }\n        return [\n            \"active\",\n            \"completed\",\n            \"delayed\",\n            \"failed\",\n            \"paused\",\n            \"prioritized\",\n            \"waiting\",\n            \"waiting-children\"\n        ];\n    }\n    /**\n      Returns the number of jobs waiting to be processed. This includes jobs that are\n      \"waiting\" or \"delayed\" or \"prioritized\" or \"waiting-children\".\n    */ async count() {\n        const count = await this.getJobCountByTypes(\"waiting\", \"paused\", \"delayed\", \"prioritized\", \"waiting-children\");\n        return count;\n    }\n    /**\n     * Returns the time to live for a rate limited key in milliseconds.\n     * @param maxJobs - max jobs to be considered in rate limit state. If not passed\n     * it will return the remaining ttl without considering if max jobs is excedeed.\n     * @returns -2 if the key does not exist.\n     * -1 if the key exists but has no associated expire.\n     * @see {@link https://redis.io/commands/pttl/}\n     */ async getRateLimitTtl(maxJobs) {\n        return this.scripts.getRateLimitTtl(maxJobs);\n    }\n    /**\n     * Get jobId that starts debounced state.\n     * @deprecated use getDeduplicationJobId method\n     *\n     * @param id - debounce identifier\n     */ async getDebounceJobId(id) {\n        const client = await this.client;\n        return client.get(`${this.keys.de}:${id}`);\n    }\n    /**\n     * Get jobId from deduplicated state.\n     *\n     * @param id - deduplication identifier\n     */ async getDeduplicationJobId(id) {\n        const client = await this.client;\n        return client.get(`${this.keys.de}:${id}`);\n    }\n    /**\n     * Get global concurrency value.\n     * Returns null in case no value is set.\n     */ async getGlobalConcurrency() {\n        const client = await this.client;\n        const concurrency = await client.hget(this.keys.meta, \"concurrency\");\n        if (concurrency) {\n            return Number(concurrency);\n        }\n        return null;\n    }\n    /**\n     * Get global rate limit values.\n     * Returns null in case no value is set.\n     */ async getGlobalRateLimit() {\n        const client = await this.client;\n        const [max, duration] = await client.hmget(this.keys.meta, \"max\", \"duration\");\n        if (max && duration) {\n            return {\n                max: Number(max),\n                duration: Number(duration)\n            };\n        }\n        return null;\n    }\n    /**\n     * Job counts by type\n     *\n     * Queue#getJobCountByTypes('completed') =\\> completed count\n     * Queue#getJobCountByTypes('completed,failed') =\\> completed + failed count\n     * Queue#getJobCountByTypes('completed', 'failed') =\\> completed + failed count\n     * Queue#getJobCountByTypes('completed', 'waiting', 'failed') =\\> completed + waiting + failed count\n     */ async getJobCountByTypes(...types) {\n        const result = await this.getJobCounts(...types);\n        return Object.values(result).reduce((sum, count)=>sum + count, 0);\n    }\n    /**\n     * Returns the job counts for each type specified or every list/set in the queue by default.\n     *\n     * @returns An object, key (type) and value (count)\n     */ async getJobCounts(...types) {\n        const currentTypes = this.sanitizeJobTypes(types);\n        const responses = await this.scripts.getCounts(currentTypes);\n        const counts = {};\n        responses.forEach((res, index)=>{\n            counts[currentTypes[index]] = res || 0;\n        });\n        return counts;\n    }\n    /**\n     * Get current job state.\n     *\n     * @param jobId - job identifier.\n     * @returns Returns one of these values:\n     * 'completed', 'failed', 'delayed', 'active', 'waiting', 'waiting-children', 'unknown'.\n     */ getJobState(jobId) {\n        return this.scripts.getState(jobId);\n    }\n    /**\n     * Get global queue configuration.\n     *\n     * @returns Returns the global queue configuration.\n     */ async getMeta() {\n        const client = await this.client;\n        const config = await client.hgetall(this.keys.meta);\n        const { concurrency, max, duration, paused, \"opts.maxLenEvents\": maxLenEvents } = config, rest = tslib_1.__rest(config, [\n            \"concurrency\",\n            \"max\",\n            \"duration\",\n            \"paused\",\n            \"opts.maxLenEvents\"\n        ]);\n        const parsedConfig = rest;\n        if (concurrency) {\n            parsedConfig[\"concurrency\"] = Number(concurrency);\n        }\n        if (maxLenEvents) {\n            parsedConfig[\"maxLenEvents\"] = Number(maxLenEvents);\n        }\n        if (max) {\n            parsedConfig[\"max\"] = Number(max);\n        }\n        if (duration) {\n            parsedConfig[\"duration\"] = Number(duration);\n        }\n        parsedConfig[\"paused\"] = paused === \"1\";\n        return parsedConfig;\n    }\n    /**\n     * @returns Returns the number of jobs in completed status.\n     */ getCompletedCount() {\n        return this.getJobCountByTypes(\"completed\");\n    }\n    /**\n     * Returns the number of jobs in failed status.\n     */ getFailedCount() {\n        return this.getJobCountByTypes(\"failed\");\n    }\n    /**\n     * Returns the number of jobs in delayed status.\n     */ getDelayedCount() {\n        return this.getJobCountByTypes(\"delayed\");\n    }\n    /**\n     * Returns the number of jobs in active status.\n     */ getActiveCount() {\n        return this.getJobCountByTypes(\"active\");\n    }\n    /**\n     * Returns the number of jobs in prioritized status.\n     */ getPrioritizedCount() {\n        return this.getJobCountByTypes(\"prioritized\");\n    }\n    /**\n     * Returns the number of jobs per priority.\n     */ async getCountsPerPriority(priorities) {\n        const uniquePriorities = [\n            ...new Set(priorities)\n        ];\n        const responses = await this.scripts.getCountsPerPriority(uniquePriorities);\n        const counts = {};\n        responses.forEach((res, index)=>{\n            counts[`${uniquePriorities[index]}`] = res || 0;\n        });\n        return counts;\n    }\n    /**\n     * Returns the number of jobs in waiting or paused statuses.\n     */ getWaitingCount() {\n        return this.getJobCountByTypes(\"waiting\");\n    }\n    /**\n     * Returns the number of jobs in waiting-children status.\n     */ getWaitingChildrenCount() {\n        return this.getJobCountByTypes(\"waiting-children\");\n    }\n    /**\n     * Returns the jobs that are in the \"waiting\" status.\n     * @param start - zero based index from where to start returning jobs.\n     * @param end - zero based index where to stop returning jobs.\n     */ getWaiting(start = 0, end = -1) {\n        return this.getJobs([\n            \"waiting\"\n        ], start, end, true);\n    }\n    /**\n     * Returns the jobs that are in the \"waiting-children\" status.\n     * I.E. parent jobs that have at least one child that has not completed yet.\n     * @param start - zero based index from where to start returning jobs.\n     * @param end - zero based index where to stop returning jobs.\n     */ getWaitingChildren(start = 0, end = -1) {\n        return this.getJobs([\n            \"waiting-children\"\n        ], start, end, true);\n    }\n    /**\n     * Returns the jobs that are in the \"active\" status.\n     * @param start - zero based index from where to start returning jobs.\n     * @param end - zero based index where to stop returning jobs.\n     */ getActive(start = 0, end = -1) {\n        return this.getJobs([\n            \"active\"\n        ], start, end, true);\n    }\n    /**\n     * Returns the jobs that are in the \"delayed\" status.\n     * @param start - zero based index from where to start returning jobs.\n     * @param end - zero based index where to stop returning jobs.\n     */ getDelayed(start = 0, end = -1) {\n        return this.getJobs([\n            \"delayed\"\n        ], start, end, true);\n    }\n    /**\n     * Returns the jobs that are in the \"prioritized\" status.\n     * @param start - zero based index from where to start returning jobs.\n     * @param end - zero based index where to stop returning jobs.\n     */ getPrioritized(start = 0, end = -1) {\n        return this.getJobs([\n            \"prioritized\"\n        ], start, end, true);\n    }\n    /**\n     * Returns the jobs that are in the \"completed\" status.\n     * @param start - zero based index from where to start returning jobs.\n     * @param end - zero based index where to stop returning jobs.\n     */ getCompleted(start = 0, end = -1) {\n        return this.getJobs([\n            \"completed\"\n        ], start, end, false);\n    }\n    /**\n     * Returns the jobs that are in the \"failed\" status.\n     * @param start - zero based index from where to start returning jobs.\n     * @param end - zero based index where to stop returning jobs.\n     */ getFailed(start = 0, end = -1) {\n        return this.getJobs([\n            \"failed\"\n        ], start, end, false);\n    }\n    /**\n     * Returns the qualified job ids and the raw job data (if available) of the\n     * children jobs of the given parent job.\n     * It is possible to get either the already processed children, in this case\n     * an array of qualified job ids and their result values will be returned,\n     * or the pending children, in this case an array of qualified job ids will\n     * be returned.\n     * A qualified job id is a string representing the job id in a given queue,\n     * for example: \"bull:myqueue:jobid\".\n     *\n     * @param parentId - The id of the parent job\n     * @param type - \"processed\" | \"pending\"\n     * @param opts - Options for the query.\n     *\n     * @returns an object with the following shape:\n     * `{ items: { id: string, v?: any, err?: string } [], jobs: JobJsonRaw[], total: number}`\n     */ async getDependencies(parentId, type, start, end) {\n        const key = this.toKey(type == \"processed\" ? `${parentId}:processed` : `${parentId}:dependencies`);\n        const { items, total, jobs } = await this.scripts.paginate(key, {\n            start,\n            end,\n            fetchJobs: true\n        });\n        return {\n            items,\n            jobs,\n            total\n        };\n    }\n    async getRanges(types, start = 0, end = 1, asc = false) {\n        const multiCommands = [];\n        this.commandByType(types, false, (key, command)=>{\n            switch(command){\n                case \"lrange\":\n                    multiCommands.push(\"lrange\");\n                    break;\n                case \"zrange\":\n                    multiCommands.push(\"zrange\");\n                    break;\n            }\n        });\n        const responses = await this.scripts.getRanges(types, start, end, asc);\n        let results = [];\n        responses.forEach((response, index)=>{\n            const result = response || [];\n            if (asc && multiCommands[index] === \"lrange\") {\n                results = results.concat(result.reverse());\n            } else {\n                results = results.concat(result);\n            }\n        });\n        return [\n            ...new Set(results)\n        ];\n    }\n    /**\n     * Returns the jobs that are on the given statuses (note that JobType is synonym for job status)\n     * @param types - the statuses of the jobs to return.\n     * @param start - zero based index from where to start returning jobs.\n     * @param end - zero based index where to stop returning jobs.\n     * @param asc - if true, the jobs will be returned in ascending order.\n     */ async getJobs(types, start = 0, end = -1, asc = false) {\n        const currentTypes = this.sanitizeJobTypes(types);\n        const jobIds = await this.getRanges(currentTypes, start, end, asc);\n        return Promise.all(jobIds.map((jobId)=>this.Job.fromId(this, jobId)));\n    }\n    /**\n     * Returns the logs for a given Job.\n     * @param jobId - the id of the job to get the logs for.\n     * @param start - zero based index from where to start returning jobs.\n     * @param end - zero based index where to stop returning jobs.\n     * @param asc - if true, the jobs will be returned in ascending order.\n     */ async getJobLogs(jobId, start = 0, end = -1, asc = true) {\n        const client = await this.client;\n        const multi = client.multi();\n        const logsKey = this.toKey(jobId + \":logs\");\n        if (asc) {\n            multi.lrange(logsKey, start, end);\n        } else {\n            multi.lrange(logsKey, -(end + 1), -(start + 1));\n        }\n        multi.llen(logsKey);\n        const result = await multi.exec();\n        if (!asc) {\n            result[0][1].reverse();\n        }\n        return {\n            logs: result[0][1],\n            count: result[1][1]\n        };\n    }\n    async baseGetClients(matcher) {\n        const client = await this.client;\n        try {\n            const clients = await client.client(\"LIST\");\n            const list = this.parseClientList(clients, matcher);\n            return list;\n        } catch (err) {\n            if (!utils_1.clientCommandMessageReg.test(err.message)) {\n                throw err;\n            }\n            return [\n                {\n                    name: \"GCP does not support client list\"\n                }\n            ];\n        }\n    }\n    /**\n     * Get the worker list related to the queue. i.e. all the known\n     * workers that are available to process jobs for this queue.\n     * Note: GCP does not support SETNAME, so this call will not work\n     *\n     * @returns - Returns an array with workers info.\n     */ getWorkers() {\n        const unnamedWorkerClientName = `${this.clientName()}`;\n        const namedWorkerClientName = `${this.clientName()}:w:`;\n        const matcher = (name)=>name && (name === unnamedWorkerClientName || name.startsWith(namedWorkerClientName));\n        return this.baseGetClients(matcher);\n    }\n    /**\n     * Returns the current count of workers for the queue.\n     *\n     * getWorkersCount(): Promise<number>\n     *\n     */ async getWorkersCount() {\n        const workers = await this.getWorkers();\n        return workers.length;\n    }\n    /**\n     * Get queue events list related to the queue.\n     * Note: GCP does not support SETNAME, so this call will not work\n     *\n     * @deprecated do not use this method, it will be removed in the future.\n     *\n     * @returns - Returns an array with queue events info.\n     */ async getQueueEvents() {\n        const clientName = `${this.clientName()}${utils_1.QUEUE_EVENT_SUFFIX}`;\n        return this.baseGetClients((name)=>name === clientName);\n    }\n    /**\n     * Get queue metrics related to the queue.\n     *\n     * This method returns the gathered metrics for the queue.\n     * The metrics are represented as an array of job counts\n     * per unit of time (1 minute).\n     *\n     * @param start - Start point of the metrics, where 0\n     * is the newest point to be returned.\n     * @param end - End point of the metrics, where -1 is the\n     * oldest point to be returned.\n     *\n     * @returns - Returns an object with queue metrics.\n     */ async getMetrics(type, start = 0, end = -1) {\n        const [meta, data, count] = await this.scripts.getMetrics(type, start, end);\n        return {\n            meta: {\n                count: parseInt(meta[0] || \"0\", 10),\n                prevTS: parseInt(meta[1] || \"0\", 10),\n                prevCount: parseInt(meta[2] || \"0\", 10)\n            },\n            data: data.map((point)=>+point || 0),\n            count\n        };\n    }\n    parseClientList(list, matcher) {\n        const lines = list.split(/\\r?\\n/);\n        const clients = [];\n        lines.forEach((line)=>{\n            const client = {};\n            const keyValues = line.split(\" \");\n            keyValues.forEach(function(keyValue) {\n                const index = keyValue.indexOf(\"=\");\n                const key = keyValue.substring(0, index);\n                const value = keyValue.substring(index + 1);\n                client[key] = value;\n            });\n            const name = client[\"name\"];\n            if (matcher(name)) {\n                client[\"name\"] = this.name;\n                client[\"rawname\"] = name;\n                clients.push(client);\n            }\n        });\n        return clients;\n    }\n    /**\n     * Export the metrics for the queue in the Prometheus format.\n     * Automatically exports all the counts returned by getJobCounts().\n     *\n     * @returns - Returns a string with the metrics in the Prometheus format.\n     *\n     * @see {@link https://prometheus.io/docs/instrumenting/exposition_formats/}\n     *\n     **/ async exportPrometheusMetrics(globalVariables) {\n        const counts = await this.getJobCounts();\n        const metrics = [];\n        // Match the test's expected HELP text\n        metrics.push(\"# HELP bullmq_job_count Number of jobs in the queue by state\");\n        metrics.push(\"# TYPE bullmq_job_count gauge\");\n        const variables = !globalVariables ? \"\" : Object.keys(globalVariables).reduce((acc, curr)=>`${acc}, ${curr}=\"${globalVariables[curr]}\"`, \"\");\n        for (const [state, count] of Object.entries(counts)){\n            metrics.push(`bullmq_job_count{queue=\"${this.name}\", state=\"${state}\"${variables}} ${count}`);\n        }\n        return metrics.join(\"\\n\");\n    }\n}\nexports.QueueGetters = QueueGetters; //# sourceMappingURL=queue-getters.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL2NsYXNzZXMvcXVldWUtZ2V0dGVycy5qcyIsIm1hcHBpbmdzIjoiQUFBQSxrQkFBa0IsR0FDbEI7QUFDQUEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELG9CQUFvQixHQUFHLEtBQUs7QUFDNUIsTUFBTUcsVUFBVUMsbUJBQU9BLENBQUMsdURBQU87QUFDL0IsTUFBTUMsZUFBZUQsbUJBQU9BLENBQUMsZ0ZBQWM7QUFDM0MsTUFBTUUsVUFBVUYsbUJBQU9BLENBQUMscUVBQVU7QUFDbEM7O0NBRUMsR0FDRCxNQUFNRixxQkFBcUJHLGFBQWFFLFNBQVM7SUFDN0NDLE9BQU9DLEtBQUssRUFBRTtRQUNWLE9BQU8sSUFBSSxDQUFDQyxHQUFHLENBQUNDLE1BQU0sQ0FBQyxJQUFJLEVBQUVGO0lBQ2pDO0lBQ0FHLGNBQWNDLEtBQUssRUFBRUMsS0FBSyxFQUFFQyxRQUFRLEVBQUU7UUFDbEMsT0FBT0YsTUFBTUcsR0FBRyxDQUFDLENBQUNDO1lBQ2RBLE9BQU9BLFNBQVMsWUFBWSxTQUFTQSxNQUFNLFFBQVE7WUFDbkQsTUFBTUMsTUFBTSxJQUFJLENBQUNDLEtBQUssQ0FBQ0Y7WUFDdkIsT0FBUUE7Z0JBQ0osS0FBSztnQkFDTCxLQUFLO2dCQUNMLEtBQUs7Z0JBQ0wsS0FBSztnQkFDTCxLQUFLO2dCQUNMLEtBQUs7b0JBQ0QsT0FBT0YsU0FBU0csS0FBS0osUUFBUSxVQUFVO2dCQUMzQyxLQUFLO2dCQUNMLEtBQUs7Z0JBQ0wsS0FBSztvQkFDRCxPQUFPQyxTQUFTRyxLQUFLSixRQUFRLFNBQVM7WUFDOUM7UUFDSjtJQUNKO0lBQ0FNLGlCQUFpQlAsS0FBSyxFQUFFO1FBQ3BCLE1BQU1RLGVBQWUsT0FBT1IsVUFBVSxXQUFXO1lBQUNBO1NBQU0sR0FBR0E7UUFDM0QsSUFBSVMsTUFBTUMsT0FBTyxDQUFDRixpQkFBaUJBLGFBQWFHLE1BQU0sR0FBRyxHQUFHO1lBQ3hELE1B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TSxJQUFJaEIsT0FBTzJKLE9BQU8sQ0FBQ2pHLFFBQVM7WUFDakQ0RixRQUFRekgsSUFBSSxDQUFDLENBQUMsd0JBQXdCLEVBQUUsSUFBSSxDQUFDaUcsSUFBSSxDQUFDLFVBQVUsRUFBRTRCLE1BQU0sQ0FBQyxFQUFFSCxVQUFVLEVBQUUsRUFBRXZJLE1BQU0sQ0FBQztRQUNoRztRQUNBLE9BQU9zSSxRQUFRTSxJQUFJLENBQUM7SUFDeEI7QUFDSjtBQUNBMUosb0JBQW9CLEdBQUdFLGNBQ3ZCLHlDQUF5QyIsInNvdXJjZXMiOlsid2VicGFjazovL29ubHlmYW5zLXBsYXRmb3JtLy4vbm9kZV9tb2R1bGVzL2J1bGxtcS9kaXN0L2Nqcy9jbGFzc2VzL3F1ZXVlLWdldHRlcnMuanM/ZjFiNSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKmVzbGludC1lbnYgbm9kZSAqL1xuJ3VzZSBzdHJpY3QnO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5RdWV1ZUdldHRlcnMgPSB2b2lkIDA7XG5jb25zdCB0c2xpYl8xID0gcmVxdWlyZShcInRzbGliXCIpO1xuY29uc3QgcXVldWVfYmFzZV8xID0gcmVxdWlyZShcIi4vcXVldWUtYmFzZVwiKTtcbmNvbnN0IHV0aWxzXzEgPSByZXF1aXJlKFwiLi4vdXRpbHNcIik7XG4vKipcbiAqIFByb3ZpZGVzIGRpZmZlcmVudCBnZXR0ZXJzIGZvciBkaWZmZXJlbnQgYXNwZWN0cyBvZiBhIHF1ZXVlLlxuICovXG5jbGFzcyBRdWV1ZUdldHRlcnMgZXh0ZW5kcyBxdWV1ZV9iYXNlXzEuUXVldWVCYXNlIHtcbiAgICBnZXRKb2Ioam9iSWQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuSm9iLmZyb21JZCh0aGlzLCBqb2JJZCk7XG4gICAgfVxuICAgIGNvbW1hbmRCeVR5cGUodHlwZXMsIGNvdW50LCBjYWxsYmFjaykge1xuICAgICAgICByZXR1cm4gdHlwZXMubWFwKCh0eXBlKSA9PiB7XG4gICAgICAgICAgICB0eXBlID0gdHlwZSA9PT0gJ3dhaXRpbmcnID8gJ3dhaXQnIDogdHlwZTsgLy8gYWxpYXNcbiAgICAgICAgICAgIGNvbnN0IGtleSA9IHRoaXMudG9LZXkodHlwZSk7XG4gICAgICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgICAgICAgICBjYXNlICdjb21wbGV0ZWQnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ2ZhaWxlZCc6XG4gICAgICAgICAgICAgICAgY2FzZSAnZGVsYXllZCc6XG4gICAgICAgICAgICAgICAgY2FzZSAncHJpb3JpdGl6ZWQnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ3JlcGVhdCc6XG4gICAgICAgICAgICAgICAgY2FzZSAnd2FpdGluZy1jaGlsZHJlbic6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhrZXksIGNvdW50ID8gJ3pjYXJkJyA6ICd6cmFuZ2UnKTtcbiAgICAgICAgICAgICAgICBjYXNlICdhY3RpdmUnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ3dhaXQnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ3BhdXNlZCc6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhrZXksIGNvdW50ID8gJ2xsZW4nIDogJ2xyYW5nZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgc2FuaXRpemVKb2JUeXBlcyh0eXBlcykge1xuICAgICAgICBjb25zdCBjdXJyZW50VHlwZXMgPSB0eXBlb2YgdHlwZXMgPT09ICdzdHJpbmcnID8gW3R5cGVzXSA6IHR5cGVzO1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShjdXJyZW50VHlwZXMpICYmIGN1cnJlbnRUeXBlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjb25zdCBzYW5pdGl6ZWRUeXBlcyA9IFsuLi5jdXJyZW50VHlwZXNdO1xuICAgICAgICAgICAgaWYgKHNhbml0aXplZFR5cGVzLmluZGV4T2YoJ3dhaXRpbmcnKSAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICBzYW5pdGl6ZWRUeXBlcy5wdXNoKCdwYXVzZWQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBbLi4ubmV3IFNldChzYW5pdGl6ZWRUeXBlcyldO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICAnYWN0aXZlJyxcbiAgICAgICAgICAgICdjb21wbGV0ZWQnLFxuICAgICAgICAgICAgJ2RlbGF5ZWQnLFxuICAgICAgICAgICAgJ2ZhaWxlZCcsXG4gICAgICAgICAgICAncGF1c2VkJyxcbiAgICAgICAgICAgICdwcmlvcml0aXplZCcsXG4gICAgICAgICAgICAnd2FpdGluZycsXG4gICAgICAgICAgICAnd2FpdGluZy1jaGlsZHJlbicsXG4gICAgICAgIF07XG4gICAgfVxuICAgIC8qKlxuICAgICAgUmV0dXJucyB0aGUgbnVtYmVyIG9mIGpvYnMgd2FpdGluZyB0byBiZSBwcm9jZXNzZWQuIFRoaXMgaW5jbHVkZXMgam9icyB0aGF0IGFyZVxuICAgICAgXCJ3YWl0aW5nXCIgb3IgXCJkZWxheWVkXCIgb3IgXCJwcmlvcml0aXplZFwiIG9yIFwid2FpdGluZy1jaGlsZHJlblwiLlxuICAgICovXG4gICAgYXN5bmMgY291bnQoKSB7XG4gICAgICAgIGNvbnN0IGNvdW50ID0gYXdhaXQgdGhpcy5nZXRKb2JDb3VudEJ5VHlwZXMoJ3dhaXRpbmcnLCAncGF1c2VkJywgJ2RlbGF5ZWQnLCAncHJpb3JpdGl6ZWQnLCAnd2FpdGluZy1jaGlsZHJlbicpO1xuICAgICAgICByZXR1cm4gY291bnQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHRpbWUgdG8gbGl2ZSBmb3IgYSByYXRlIGxpbWl0ZWQga2V5IGluIG1pbGxpc2Vjb25kcy5cbiAgICAgKiBAcGFyYW0gbWF4Sm9icyAtIG1heCBqb2JzIHRvIGJlIGNvbnNpZGVyZWQgaW4gcmF0ZSBsaW1pdCBzdGF0ZS4gSWYgbm90IHBhc3NlZFxuICAgICAqIGl0IHdpbGwgcmV0dXJuIHRoZSByZW1haW5pbmcgdHRsIHdpdGhvdXQgY29uc2lkZXJpbmcgaWYgbWF4IGpvYnMgaXMgZXhjZWRlZWQuXG4gICAgICogQHJldHVybnMgLTIgaWYgdGhlIGtleSBkb2VzIG5vdCBleGlzdC5cbiAgICAgKiAtMSBpZiB0aGUga2V5IGV4aXN0cyBidXQgaGFzIG5vIGFzc29jaWF0ZWQgZXhwaXJlLlxuICAgICAqIEBzZWUge0BsaW5rIGh0dHBzOi8vcmVkaXMuaW8vY29tbWFuZHMvcHR0bC99XG4gICAgICovXG4gICAgYXN5bmMgZ2V0UmF0ZUxpbWl0VHRsKG1heEpvYnMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2NyaXB0cy5nZXRSYXRlTGltaXRUdGwobWF4Sm9icyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCBqb2JJZCB0aGF0IHN0YXJ0cyBkZWJvdW5jZWQgc3RhdGUuXG4gICAgICogQGRlcHJlY2F0ZWQgdXNlIGdldERlZHVwbGljYXRpb25Kb2JJZCBtZXRob2RcbiAgICAgKlxuICAgICAqIEBwYXJhbSBpZCAtIGRlYm91bmNlIGlkZW50aWZpZXJcbiAgICAgKi9cbiAgICBhc3luYyBnZXREZWJvdW5jZUpvYklkKGlkKSB7XG4gICAgICAgIGNvbnN0IGNsaWVudCA9IGF3YWl0IHRoaXMuY2xpZW50O1xuICAgICAgICByZXR1cm4gY2xpZW50LmdldChgJHt0aGlzLmtleXMuZGV9OiR7aWR9YCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCBqb2JJZCBmcm9tIGRlZHVwbGljYXRlZCBzdGF0ZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBpZCAtIGRlZHVwbGljYXRpb24gaWRlbnRpZmllclxuICAgICAqL1xuICAgIGFzeW5jIGdldERlZHVwbGljYXRpb25Kb2JJZChpZCkge1xuICAgICAgICBjb25zdCBjbGllbnQgPSBhd2FpdCB0aGlzLmNsaWVudDtcbiAgICAgICAgcmV0dXJuIGNsaWVudC5nZXQoYCR7dGhpcy5rZXlzLmRlfToke2lkfWApO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgZ2xvYmFsIGNvbmN1cnJlbmN5IHZhbHVlLlxuICAgICAqIFJldHVybnMgbnVsbCBpbiBjYXNlIG5vIHZhbHVlIGlzIHNldC5cbiAgICAgKi9cbiAgICBhc3luYyBnZXRHbG9iYWxDb25jdXJyZW5jeSgpIHtcbiAgICAgICAgY29uc3QgY2xpZW50ID0gYXdhaXQgdGhpcy5jbGllbnQ7XG4gICAgICAgIGNvbnN0IGNvbmN1cnJlbmN5ID0gYXdhaXQgY2xpZW50LmhnZXQodGhpcy5rZXlzLm1ldGEsICdjb25jdXJyZW5jeScpO1xuICAgICAgICBpZiAoY29uY3VycmVuY3kpIHtcbiAgICAgICAgICAgIHJldHVybiBOdW1iZXIoY29uY3VycmVuY3kpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgZ2xvYmFsIHJhdGUgbGltaXQgdmFsdWVzLlxuICAgICAqIFJldHVybnMgbnVsbCBpbiBjYXNlIG5vIHZhbHVlIGlzIHNldC5cbiAgICAgKi9cbiAgICBhc3luYyBnZXRHbG9iYWxSYXRlTGltaXQoKSB7XG4gICAgICAgIGNvbnN0IGNsaWVudCA9IGF3YWl0IHRoaXMuY2xpZW50O1xuICAgICAgICBjb25zdCBbbWF4LCBkdXJhdGlvbl0gPSBhd2FpdCBjbGllbnQuaG1nZXQodGhpcy5rZXlzLm1ldGEsICdtYXgnLCAnZHVyYXRpb24nKTtcbiAgICAgICAgaWYgKG1heCAmJiBkdXJhdGlvbikge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBtYXg6IE51bWJlcihtYXgpLFxuICAgICAgICAgICAgICAgIGR1cmF0aW9uOiBOdW1iZXIoZHVyYXRpb24pLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSm9iIGNvdW50cyBieSB0eXBlXG4gICAgICpcbiAgICAgKiBRdWV1ZSNnZXRKb2JDb3VudEJ5VHlwZXMoJ2NvbXBsZXRlZCcpID1cXD4gY29tcGxldGVkIGNvdW50XG4gICAgICogUXVldWUjZ2V0Sm9iQ291bnRCeVR5cGVzKCdjb21wbGV0ZWQsZmFpbGVkJykgPVxcPiBjb21wbGV0ZWQgKyBmYWlsZWQgY291bnRcbiAgICAgKiBRdWV1ZSNnZXRKb2JDb3VudEJ5VHlwZXMoJ2NvbXBsZXRlZCcsICdmYWlsZWQnKSA9XFw+IGNvbXBsZXRlZCArIGZhaWxlZCBjb3VudFxuICAgICAqIFF1ZXVlI2dldEpvYkNvdW50QnlUeXBlcygnY29tcGxldGVkJywgJ3dhaXRpbmcnLCAnZmFpbGVkJykgPVxcPiBjb21wbGV0ZWQgKyB3YWl0aW5nICsgZmFpbGVkIGNvdW50XG4gICAgICovXG4gICAgYXN5bmMgZ2V0Sm9iQ291bnRCeVR5cGVzKC4uLnR5cGVzKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuZ2V0Sm9iQ291bnRzKC4uLnR5cGVzKTtcbiAgICAgICAgcmV0dXJuIE9iamVjdC52YWx1ZXMocmVzdWx0KS5yZWR1Y2UoKHN1bSwgY291bnQpID0+IHN1bSArIGNvdW50LCAwKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgam9iIGNvdW50cyBmb3IgZWFjaCB0eXBlIHNwZWNpZmllZCBvciBldmVyeSBsaXN0L3NldCBpbiB0aGUgcXVldWUgYnkgZGVmYXVsdC5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIEFuIG9iamVjdCwga2V5ICh0eXBlKSBhbmQgdmFsdWUgKGNvdW50KVxuICAgICAqL1xuICAgIGFzeW5jIGdldEpvYkNvdW50cyguLi50eXBlcykge1xuICAgICAgICBjb25zdCBjdXJyZW50VHlwZXMgPSB0aGlzLnNhbml0aXplSm9iVHlwZXModHlwZXMpO1xuICAgICAgICBjb25zdCByZXNwb25zZXMgPSBhd2FpdCB0aGlzLnNjcmlwdHMuZ2V0Q291bnRzKGN1cnJlbnRUeXBlcyk7XG4gICAgICAgIGNvbnN0IGNvdW50cyA9IHt9O1xuICAgICAgICByZXNwb25zZXMuZm9yRWFjaCgocmVzLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgY291bnRzW2N1cnJlbnRUeXBlc1tpbmRleF1dID0gcmVzIHx8IDA7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gY291bnRzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgY3VycmVudCBqb2Igc3RhdGUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gam9iSWQgLSBqb2IgaWRlbnRpZmllci5cbiAgICAgKiBAcmV0dXJucyBSZXR1cm5zIG9uZSBvZiB0aGVzZSB2YWx1ZXM6XG4gICAgICogJ2NvbXBsZXRlZCcsICdmYWlsZWQnLCAnZGVsYXllZCcsICdhY3RpdmUnLCAnd2FpdGluZycsICd3YWl0aW5nLWNoaWxkcmVuJywgJ3Vua25vd24nLlxuICAgICAqL1xuICAgIGdldEpvYlN0YXRlKGpvYklkKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNjcmlwdHMuZ2V0U3RhdGUoam9iSWQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgZ2xvYmFsIHF1ZXVlIGNvbmZpZ3VyYXRpb24uXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBSZXR1cm5zIHRoZSBnbG9iYWwgcXVldWUgY29uZmlndXJhdGlvbi5cbiAgICAgKi9cbiAgICBhc3luYyBnZXRNZXRhKCkge1xuICAgICAgICBjb25zdCBjbGllbnQgPSBhd2FpdCB0aGlzLmNsaWVudDtcbiAgICAgICAgY29uc3QgY29uZmlnID0gYXdhaXQgY2xpZW50LmhnZXRhbGwodGhpcy5rZXlzLm1ldGEpO1xuICAgICAgICBjb25zdCB7IGNvbmN1cnJlbmN5LCBtYXgsIGR1cmF0aW9uLCBwYXVzZWQsICdvcHRzLm1heExlbkV2ZW50cyc6IG1heExlbkV2ZW50cyB9ID0gY29uZmlnLCByZXN0ID0gdHNsaWJfMS5fX3Jlc3QoY29uZmlnLCBbXCJjb25jdXJyZW5jeVwiLCBcIm1heFwiLCBcImR1cmF0aW9uXCIsIFwicGF1c2VkXCIsICdvcHRzLm1heExlbkV2ZW50cyddKTtcbiAgICAgICAgY29uc3QgcGFyc2VkQ29uZmlnID0gcmVzdDtcbiAgICAgICAgaWYgKGNvbmN1cnJlbmN5KSB7XG4gICAgICAgICAgICBwYXJzZWRDb25maWdbJ2NvbmN1cnJlbmN5J10gPSBOdW1iZXIoY29uY3VycmVuY3kpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtYXhMZW5FdmVudHMpIHtcbiAgICAgICAgICAgIHBhcnNlZENvbmZpZ1snbWF4TGVuRXZlbnRzJ10gPSBOdW1iZXIobWF4TGVuRXZlbnRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWF4KSB7XG4gICAgICAgICAgICBwYXJzZWRDb25maWdbJ21heCddID0gTnVtYmVyKG1heCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGR1cmF0aW9uKSB7XG4gICAgICAgICAgICBwYXJzZWRDb25maWdbJ2R1cmF0aW9uJ10gPSBOdW1iZXIoZHVyYXRpb24pO1xuICAgICAgICB9XG4gICAgICAgIHBhcnNlZENvbmZpZ1sncGF1c2VkJ10gPSBwYXVzZWQgPT09ICcxJztcbiAgICAgICAgcmV0dXJuIHBhcnNlZENvbmZpZztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHJldHVybnMgUmV0dXJucyB0aGUgbnVtYmVyIG9mIGpvYnMgaW4gY29tcGxldGVkIHN0YXR1cy5cbiAgICAgKi9cbiAgICBnZXRDb21wbGV0ZWRDb3VudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Sm9iQ291bnRCeVR5cGVzKCdjb21wbGV0ZWQnKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgbnVtYmVyIG9mIGpvYnMgaW4gZmFpbGVkIHN0YXR1cy5cbiAgICAgKi9cbiAgICBnZXRGYWlsZWRDb3VudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Sm9iQ291bnRCeVR5cGVzKCdmYWlsZWQnKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgbnVtYmVyIG9mIGpvYnMgaW4gZGVsYXllZCBzdGF0dXMuXG4gICAgICovXG4gICAgZ2V0RGVsYXllZENvdW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRKb2JDb3VudEJ5VHlwZXMoJ2RlbGF5ZWQnKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgbnVtYmVyIG9mIGpvYnMgaW4gYWN0aXZlIHN0YXR1cy5cbiAgICAgKi9cbiAgICBnZXRBY3RpdmVDb3VudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Sm9iQ291bnRCeVR5cGVzKCdhY3RpdmUnKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgbnVtYmVyIG9mIGpvYnMgaW4gcHJpb3JpdGl6ZWQgc3RhdHVzLlxuICAgICAqL1xuICAgIGdldFByaW9yaXRpemVkQ291bnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldEpvYkNvdW50QnlUeXBlcygncHJpb3JpdGl6ZWQnKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgbnVtYmVyIG9mIGpvYnMgcGVyIHByaW9yaXR5LlxuICAgICAqL1xuICAgIGFzeW5jIGdldENvdW50c1BlclByaW9yaXR5KHByaW9yaXRpZXMpIHtcbiAgICAgICAgY29uc3QgdW5pcXVlUHJpb3JpdGllcyA9IFsuLi5uZXcgU2V0KHByaW9yaXRpZXMpXTtcbiAgICAgICAgY29uc3QgcmVzcG9uc2VzID0gYXdhaXQgdGhpcy5zY3JpcHRzLmdldENvdW50c1BlclByaW9yaXR5KHVuaXF1ZVByaW9yaXRpZXMpO1xuICAgICAgICBjb25zdCBjb3VudHMgPSB7fTtcbiAgICAgICAgcmVzcG9uc2VzLmZvckVhY2goKHJlcywgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIGNvdW50c1tgJHt1bmlxdWVQcmlvcml0aWVzW2luZGV4XX1gXSA9IHJlcyB8fCAwO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGNvdW50cztcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgbnVtYmVyIG9mIGpvYnMgaW4gd2FpdGluZyBvciBwYXVzZWQgc3RhdHVzZXMuXG4gICAgICovXG4gICAgZ2V0V2FpdGluZ0NvdW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRKb2JDb3VudEJ5VHlwZXMoJ3dhaXRpbmcnKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgbnVtYmVyIG9mIGpvYnMgaW4gd2FpdGluZy1jaGlsZHJlbiBzdGF0dXMuXG4gICAgICovXG4gICAgZ2V0V2FpdGluZ0NoaWxkcmVuQ291bnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldEpvYkNvdW50QnlUeXBlcygnd2FpdGluZy1jaGlsZHJlbicpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBqb2JzIHRoYXQgYXJlIGluIHRoZSBcIndhaXRpbmdcIiBzdGF0dXMuXG4gICAgICogQHBhcmFtIHN0YXJ0IC0gemVybyBiYXNlZCBpbmRleCBmcm9tIHdoZXJlIHRvIHN0YXJ0IHJldHVybmluZyBqb2JzLlxuICAgICAqIEBwYXJhbSBlbmQgLSB6ZXJvIGJhc2VkIGluZGV4IHdoZXJlIHRvIHN0b3AgcmV0dXJuaW5nIGpvYnMuXG4gICAgICovXG4gICAgZ2V0V2FpdGluZyhzdGFydCA9IDAsIGVuZCA9IC0xKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldEpvYnMoWyd3YWl0aW5nJ10sIHN0YXJ0LCBlbmQsIHRydWUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBqb2JzIHRoYXQgYXJlIGluIHRoZSBcIndhaXRpbmctY2hpbGRyZW5cIiBzdGF0dXMuXG4gICAgICogSS5FLiBwYXJlbnQgam9icyB0aGF0IGhhdmUgYXQgbGVhc3Qgb25lIGNoaWxkIHRoYXQgaGFzIG5vdCBjb21wbGV0ZWQgeWV0LlxuICAgICAqIEBwYXJhbSBzdGFydCAtIHplcm8gYmFzZWQgaW5kZXggZnJvbSB3aGVyZSB0byBzdGFydCByZXR1cm5pbmcgam9icy5cbiAgICAgKiBAcGFyYW0gZW5kIC0gemVybyBiYXNlZCBpbmRleCB3aGVyZSB0byBzdG9wIHJldHVybmluZyBqb2JzLlxuICAgICAqL1xuICAgIGdldFdhaXRpbmdDaGlsZHJlbihzdGFydCA9IDAsIGVuZCA9IC0xKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldEpvYnMoWyd3YWl0aW5nLWNoaWxkcmVuJ10sIHN0YXJ0LCBlbmQsIHRydWUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBqb2JzIHRoYXQgYXJlIGluIHRoZSBcImFjdGl2ZVwiIHN0YXR1cy5cbiAgICAgKiBAcGFyYW0gc3RhcnQgLSB6ZXJvIGJhc2VkIGluZGV4IGZyb20gd2hlcmUgdG8gc3RhcnQgcmV0dXJuaW5nIGpvYnMuXG4gICAgICogQHBhcmFtIGVuZCAtIHplcm8gYmFzZWQgaW5kZXggd2hlcmUgdG8gc3RvcCByZXR1cm5pbmcgam9icy5cbiAgICAgKi9cbiAgICBnZXRBY3RpdmUoc3RhcnQgPSAwLCBlbmQgPSAtMSkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRKb2JzKFsnYWN0aXZlJ10sIHN0YXJ0LCBlbmQsIHRydWUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBqb2JzIHRoYXQgYXJlIGluIHRoZSBcImRlbGF5ZWRcIiBzdGF0dXMuXG4gICAgICogQHBhcmFtIHN0YXJ0IC0gemVybyBiYXNlZCBpbmRleCBmcm9tIHdoZXJlIHRvIHN0YXJ0IHJldHVybmluZyBqb2JzLlxuICAgICAqIEBwYXJhbSBlbmQgLSB6ZXJvIGJhc2VkIGluZGV4IHdoZXJlIHRvIHN0b3AgcmV0dXJuaW5nIGpvYnMuXG4gICAgICovXG4gICAgZ2V0RGVsYXllZChzdGFydCA9IDAsIGVuZCA9IC0xKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldEpvYnMoWydkZWxheWVkJ10sIHN0YXJ0LCBlbmQsIHRydWUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBqb2JzIHRoYXQgYXJlIGluIHRoZSBcInByaW9yaXRpemVkXCIgc3RhdHVzLlxuICAgICAqIEBwYXJhbSBzdGFydCAtIHplcm8gYmFzZWQgaW5kZXggZnJvbSB3aGVyZSB0byBzdGFydCByZXR1cm5pbmcgam9icy5cbiAgICAgKiBAcGFyYW0gZW5kIC0gemVybyBiYXNlZCBpbmRleCB3aGVyZSB0byBzdG9wIHJldHVybmluZyBqb2JzLlxuICAgICAqL1xuICAgIGdldFByaW9yaXRpemVkKHN0YXJ0ID0gMCwgZW5kID0gLTEpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Sm9icyhbJ3ByaW9yaXRpemVkJ10sIHN0YXJ0LCBlbmQsIHRydWUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBqb2JzIHRoYXQgYXJlIGluIHRoZSBcImNvbXBsZXRlZFwiIHN0YXR1cy5cbiAgICAgKiBAcGFyYW0gc3RhcnQgLSB6ZXJvIGJhc2VkIGluZGV4IGZyb20gd2hlcmUgdG8gc3RhcnQgcmV0dXJuaW5nIGpvYnMuXG4gICAgICogQHBhcmFtIGVuZCAtIHplcm8gYmFzZWQgaW5kZXggd2hlcmUgdG8gc3RvcCByZXR1cm5pbmcgam9icy5cbiAgICAgKi9cbiAgICBnZXRDb21wbGV0ZWQoc3RhcnQgPSAwLCBlbmQgPSAtMSkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRKb2JzKFsnY29tcGxldGVkJ10sIHN0YXJ0LCBlbmQsIGZhbHNlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgam9icyB0aGF0IGFyZSBpbiB0aGUgXCJmYWlsZWRcIiBzdGF0dXMuXG4gICAgICogQHBhcmFtIHN0YXJ0IC0gemVybyBiYXNlZCBpbmRleCBmcm9tIHdoZXJlIHRvIHN0YXJ0IHJldHVybmluZyBqb2JzLlxuICAgICAqIEBwYXJhbSBlbmQgLSB6ZXJvIGJhc2VkIGluZGV4IHdoZXJlIHRvIHN0b3AgcmV0dXJuaW5nIGpvYnMuXG4gICAgICovXG4gICAgZ2V0RmFpbGVkKHN0YXJ0ID0gMCwgZW5kID0gLTEpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Sm9icyhbJ2ZhaWxlZCddLCBzdGFydCwgZW5kLCBmYWxzZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHF1YWxpZmllZCBqb2IgaWRzIGFuZCB0aGUgcmF3IGpvYiBkYXRhIChpZiBhdmFpbGFibGUpIG9mIHRoZVxuICAgICAqIGNoaWxkcmVuIGpvYnMgb2YgdGhlIGdpdmVuIHBhcmVudCBqb2IuXG4gICAgICogSXQgaXMgcG9zc2libGUgdG8gZ2V0IGVpdGhlciB0aGUgYWxyZWFkeSBwcm9jZXNzZWQgY2hpbGRyZW4sIGluIHRoaXMgY2FzZVxuICAgICAqIGFuIGFycmF5IG9mIHF1YWxpZmllZCBqb2IgaWRzIGFuZCB0aGVpciByZXN1bHQgdmFsdWVzIHdpbGwgYmUgcmV0dXJuZWQsXG4gICAgICogb3IgdGhlIHBlbmRpbmcgY2hpbGRyZW4sIGluIHRoaXMgY2FzZSBhbiBhcnJheSBvZiBxdWFsaWZpZWQgam9iIGlkcyB3aWxsXG4gICAgICogYmUgcmV0dXJuZWQuXG4gICAgICogQSBxdWFsaWZpZWQgam9iIGlkIGlzIGEgc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgam9iIGlkIGluIGEgZ2l2ZW4gcXVldWUsXG4gICAgICogZm9yIGV4YW1wbGU6IFwiYnVsbDpteXF1ZXVlOmpvYmlkXCIuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcGFyZW50SWQgLSBUaGUgaWQgb2YgdGhlIHBhcmVudCBqb2JcbiAgICAgKiBAcGFyYW0gdHlwZSAtIFwicHJvY2Vzc2VkXCIgfCBcInBlbmRpbmdcIlxuICAgICAqIEBwYXJhbSBvcHRzIC0gT3B0aW9ucyBmb3IgdGhlIHF1ZXJ5LlxuICAgICAqXG4gICAgICogQHJldHVybnMgYW4gb2JqZWN0IHdpdGggdGhlIGZvbGxvd2luZyBzaGFwZTpcbiAgICAgKiBgeyBpdGVtczogeyBpZDogc3RyaW5nLCB2PzogYW55LCBlcnI/OiBzdHJpbmcgfSBbXSwgam9iczogSm9iSnNvblJhd1tdLCB0b3RhbDogbnVtYmVyfWBcbiAgICAgKi9cbiAgICBhc3luYyBnZXREZXBlbmRlbmNpZXMocGFyZW50SWQsIHR5cGUsIHN0YXJ0LCBlbmQpIHtcbiAgICAgICAgY29uc3Qga2V5ID0gdGhpcy50b0tleSh0eXBlID09ICdwcm9jZXNzZWQnXG4gICAgICAgICAgICA/IGAke3BhcmVudElkfTpwcm9jZXNzZWRgXG4gICAgICAgICAgICA6IGAke3BhcmVudElkfTpkZXBlbmRlbmNpZXNgKTtcbiAgICAgICAgY29uc3QgeyBpdGVtcywgdG90YWwsIGpvYnMgfSA9IGF3YWl0IHRoaXMuc2NyaXB0cy5wYWdpbmF0ZShrZXksIHtcbiAgICAgICAgICAgIHN0YXJ0LFxuICAgICAgICAgICAgZW5kLFxuICAgICAgICAgICAgZmV0Y2hKb2JzOiB0cnVlLFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGl0ZW1zLFxuICAgICAgICAgICAgam9icyxcbiAgICAgICAgICAgIHRvdGFsLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBhc3luYyBnZXRSYW5nZXModHlwZXMsIHN0YXJ0ID0gMCwgZW5kID0gMSwgYXNjID0gZmFsc2UpIHtcbiAgICAgICAgY29uc3QgbXVsdGlDb21tYW5kcyA9IFtdO1xuICAgICAgICB0aGlzLmNvbW1hbmRCeVR5cGUodHlwZXMsIGZhbHNlLCAoa2V5LCBjb21tYW5kKSA9PiB7XG4gICAgICAgICAgICBzd2l0Y2ggKGNvbW1hbmQpIHtcbiAgICAgICAgICAgICAgICBjYXNlICdscmFuZ2UnOlxuICAgICAgICAgICAgICAgICAgICBtdWx0aUNvbW1hbmRzLnB1c2goJ2xyYW5nZScpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICd6cmFuZ2UnOlxuICAgICAgICAgICAgICAgICAgICBtdWx0aUNvbW1hbmRzLnB1c2goJ3pyYW5nZScpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlcyA9IGF3YWl0IHRoaXMuc2NyaXB0cy5nZXRSYW5nZXModHlwZXMsIHN0YXJ0LCBlbmQsIGFzYyk7XG4gICAgICAgIGxldCByZXN1bHRzID0gW107XG4gICAgICAgIHJlc3BvbnNlcy5mb3JFYWNoKChyZXNwb25zZSwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHJlc3BvbnNlIHx8IFtdO1xuICAgICAgICAgICAgaWYgKGFzYyAmJiBtdWx0aUNvbW1hbmRzW2luZGV4XSA9PT0gJ2xyYW5nZScpIHtcbiAgICAgICAgICAgICAgICByZXN1bHRzID0gcmVzdWx0cy5jb25jYXQocmVzdWx0LnJldmVyc2UoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXN1bHRzID0gcmVzdWx0cy5jb25jYXQocmVzdWx0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBbLi4ubmV3IFNldChyZXN1bHRzKV07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGpvYnMgdGhhdCBhcmUgb24gdGhlIGdpdmVuIHN0YXR1c2VzIChub3RlIHRoYXQgSm9iVHlwZSBpcyBzeW5vbnltIGZvciBqb2Igc3RhdHVzKVxuICAgICAqIEBwYXJhbSB0eXBlcyAtIHRoZSBzdGF0dXNlcyBvZiB0aGUgam9icyB0byByZXR1cm4uXG4gICAgICogQHBhcmFtIHN0YXJ0IC0gemVybyBiYXNlZCBpbmRleCBmcm9tIHdoZXJlIHRvIHN0YXJ0IHJldHVybmluZyBqb2JzLlxuICAgICAqIEBwYXJhbSBlbmQgLSB6ZXJvIGJhc2VkIGluZGV4IHdoZXJlIHRvIHN0b3AgcmV0dXJuaW5nIGpvYnMuXG4gICAgICogQHBhcmFtIGFzYyAtIGlmIHRydWUsIHRoZSBqb2JzIHdpbGwgYmUgcmV0dXJuZWQgaW4gYXNjZW5kaW5nIG9yZGVyLlxuICAgICAqL1xuICAgIGFzeW5jIGdldEpvYnModHlwZXMsIHN0YXJ0ID0gMCwgZW5kID0gLTEsIGFzYyA9IGZhbHNlKSB7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRUeXBlcyA9IHRoaXMuc2FuaXRpemVKb2JUeXBlcyh0eXBlcyk7XG4gICAgICAgIGNvbnN0IGpvYklkcyA9IGF3YWl0IHRoaXMuZ2V0UmFuZ2VzKGN1cnJlbnRUeXBlcywgc3RhcnQsIGVuZCwgYXNjKTtcbiAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKGpvYklkcy5tYXAoam9iSWQgPT4gdGhpcy5Kb2IuZnJvbUlkKHRoaXMsIGpvYklkKSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBsb2dzIGZvciBhIGdpdmVuIEpvYi5cbiAgICAgKiBAcGFyYW0gam9iSWQgLSB0aGUgaWQgb2YgdGhlIGpvYiB0byBnZXQgdGhlIGxvZ3MgZm9yLlxuICAgICAqIEBwYXJhbSBzdGFydCAtIHplcm8gYmFzZWQgaW5kZXggZnJvbSB3aGVyZSB0byBzdGFydCByZXR1cm5pbmcgam9icy5cbiAgICAgKiBAcGFyYW0gZW5kIC0gemVybyBiYXNlZCBpbmRleCB3aGVyZSB0byBzdG9wIHJldHVybmluZyBqb2JzLlxuICAgICAqIEBwYXJhbSBhc2MgLSBpZiB0cnVlLCB0aGUgam9icyB3aWxsIGJlIHJldHVybmVkIGluIGFzY2VuZGluZyBvcmRlci5cbiAgICAgKi9cbiAgICBhc3luYyBnZXRKb2JMb2dzKGpvYklkLCBzdGFydCA9IDAsIGVuZCA9IC0xLCBhc2MgPSB0cnVlKSB7XG4gICAgICAgIGNvbnN0IGNsaWVudCA9IGF3YWl0IHRoaXMuY2xpZW50O1xuICAgICAgICBjb25zdCBtdWx0aSA9IGNsaWVudC5tdWx0aSgpO1xuICAgICAgICBjb25zdCBsb2dzS2V5ID0gdGhpcy50b0tleShqb2JJZCArICc6bG9ncycpO1xuICAgICAgICBpZiAoYXNjKSB7XG4gICAgICAgICAgICBtdWx0aS5scmFuZ2UobG9nc0tleSwgc3RhcnQsIGVuZCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBtdWx0aS5scmFuZ2UobG9nc0tleSwgLShlbmQgKyAxKSwgLShzdGFydCArIDEpKTtcbiAgICAgICAgfVxuICAgICAgICBtdWx0aS5sbGVuKGxvZ3NLZXkpO1xuICAgICAgICBjb25zdCByZXN1bHQgPSAoYXdhaXQgbXVsdGkuZXhlYygpKTtcbiAgICAgICAgaWYgKCFhc2MpIHtcbiAgICAgICAgICAgIHJlc3VsdFswXVsxXS5yZXZlcnNlKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGxvZ3M6IHJlc3VsdFswXVsxXSxcbiAgICAgICAgICAgIGNvdW50OiByZXN1bHRbMV1bMV0sXG4gICAgICAgIH07XG4gICAgfVxuICAgIGFzeW5jIGJhc2VHZXRDbGllbnRzKG1hdGNoZXIpIHtcbiAgICAgICAgY29uc3QgY2xpZW50ID0gYXdhaXQgdGhpcy5jbGllbnQ7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBjbGllbnRzID0gKGF3YWl0IGNsaWVudC5jbGllbnQoJ0xJU1QnKSk7XG4gICAgICAgICAgICBjb25zdCBsaXN0ID0gdGhpcy5wYXJzZUNsaWVudExpc3QoY2xpZW50cywgbWF0Y2hlcik7XG4gICAgICAgICAgICByZXR1cm4gbGlzdDtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICBpZiAoIXV0aWxzXzEuY2xpZW50Q29tbWFuZE1lc3NhZ2VSZWcudGVzdChlcnIubWVzc2FnZSkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gW3sgbmFtZTogJ0dDUCBkb2VzIG5vdCBzdXBwb3J0IGNsaWVudCBsaXN0JyB9XTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHdvcmtlciBsaXN0IHJlbGF0ZWQgdG8gdGhlIHF1ZXVlLiBpLmUuIGFsbCB0aGUga25vd25cbiAgICAgKiB3b3JrZXJzIHRoYXQgYXJlIGF2YWlsYWJsZSB0byBwcm9jZXNzIGpvYnMgZm9yIHRoaXMgcXVldWUuXG4gICAgICogTm90ZTogR0NQIGRvZXMgbm90IHN1cHBvcnQgU0VUTkFNRSwgc28gdGhpcyBjYWxsIHdpbGwgbm90IHdvcmtcbiAgICAgKlxuICAgICAqIEByZXR1cm5zIC0gUmV0dXJucyBhbiBhcnJheSB3aXRoIHdvcmtlcnMgaW5mby5cbiAgICAgKi9cbiAgICBnZXRXb3JrZXJzKCkge1xuICAgICAgICBjb25zdCB1bm5hbWVkV29ya2VyQ2xpZW50TmFtZSA9IGAke3RoaXMuY2xpZW50TmFtZSgpfWA7XG4gICAgICAgIGNvbnN0IG5hbWVkV29ya2VyQ2xpZW50TmFtZSA9IGAke3RoaXMuY2xpZW50TmFtZSgpfTp3OmA7XG4gICAgICAgIGNvbnN0IG1hdGNoZXIgPSAobmFtZSkgPT4gbmFtZSAmJlxuICAgICAgICAgICAgKG5hbWUgPT09IHVubmFtZWRXb3JrZXJDbGllbnROYW1lIHx8XG4gICAgICAgICAgICAgICAgbmFtZS5zdGFydHNXaXRoKG5hbWVkV29ya2VyQ2xpZW50TmFtZSkpO1xuICAgICAgICByZXR1cm4gdGhpcy5iYXNlR2V0Q2xpZW50cyhtYXRjaGVyKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgY3VycmVudCBjb3VudCBvZiB3b3JrZXJzIGZvciB0aGUgcXVldWUuXG4gICAgICpcbiAgICAgKiBnZXRXb3JrZXJzQ291bnQoKTogUHJvbWlzZTxudW1iZXI+XG4gICAgICpcbiAgICAgKi9cbiAgICBhc3luYyBnZXRXb3JrZXJzQ291bnQoKSB7XG4gICAgICAgIGNvbnN0IHdvcmtlcnMgPSBhd2FpdCB0aGlzLmdldFdvcmtlcnMoKTtcbiAgICAgICAgcmV0dXJuIHdvcmtlcnMubGVuZ3RoO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgcXVldWUgZXZlbnRzIGxpc3QgcmVsYXRlZCB0byB0aGUgcXVldWUuXG4gICAgICogTm90ZTogR0NQIGRvZXMgbm90IHN1cHBvcnQgU0VUTkFNRSwgc28gdGhpcyBjYWxsIHdpbGwgbm90IHdvcmtcbiAgICAgKlxuICAgICAqIEBkZXByZWNhdGVkIGRvIG5vdCB1c2UgdGhpcyBtZXRob2QsIGl0IHdpbGwgYmUgcmVtb3ZlZCBpbiB0aGUgZnV0dXJlLlxuICAgICAqXG4gICAgICogQHJldHVybnMgLSBSZXR1cm5zIGFuIGFycmF5IHdpdGggcXVldWUgZXZlbnRzIGluZm8uXG4gICAgICovXG4gICAgYXN5bmMgZ2V0UXVldWVFdmVudHMoKSB7XG4gICAgICAgIGNvbnN0IGNsaWVudE5hbWUgPSBgJHt0aGlzLmNsaWVudE5hbWUoKX0ke3V0aWxzXzEuUVVFVUVfRVZFTlRfU1VGRklYfWA7XG4gICAgICAgIHJldHVybiB0aGlzLmJhc2VHZXRDbGllbnRzKChuYW1lKSA9PiBuYW1lID09PSBjbGllbnROYW1lKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IHF1ZXVlIG1ldHJpY3MgcmVsYXRlZCB0byB0aGUgcXVldWUuXG4gICAgICpcbiAgICAgKiBUaGlzIG1ldGhvZCByZXR1cm5zIHRoZSBnYXRoZXJlZCBtZXRyaWNzIGZvciB0aGUgcXVldWUuXG4gICAgICogVGhlIG1ldHJpY3MgYXJlIHJlcHJlc2VudGVkIGFzIGFuIGFycmF5IG9mIGpvYiBjb3VudHNcbiAgICAgKiBwZXIgdW5pdCBvZiB0aW1lICgxIG1pbnV0ZSkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gc3RhcnQgLSBTdGFydCBwb2ludCBvZiB0aGUgbWV0cmljcywgd2hlcmUgMFxuICAgICAqIGlzIHRoZSBuZXdlc3QgcG9pbnQgdG8gYmUgcmV0dXJuZWQuXG4gICAgICogQHBhcmFtIGVuZCAtIEVuZCBwb2ludCBvZiB0aGUgbWV0cmljcywgd2hlcmUgLTEgaXMgdGhlXG4gICAgICogb2xkZXN0IHBvaW50IHRvIGJlIHJldHVybmVkLlxuICAgICAqXG4gICAgICogQHJldHVybnMgLSBSZXR1cm5zIGFuIG9iamVjdCB3aXRoIHF1ZXVlIG1ldHJpY3MuXG4gICAgICovXG4gICAgYXN5bmMgZ2V0TWV0cmljcyh0eXBlLCBzdGFydCA9IDAsIGVuZCA9IC0xKSB7XG4gICAgICAgIGNvbnN0IFttZXRhLCBkYXRhLCBjb3VudF0gPSBhd2FpdCB0aGlzLnNjcmlwdHMuZ2V0TWV0cmljcyh0eXBlLCBzdGFydCwgZW5kKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG1ldGE6IHtcbiAgICAgICAgICAgICAgICBjb3VudDogcGFyc2VJbnQobWV0YVswXSB8fCAnMCcsIDEwKSxcbiAgICAgICAgICAgICAgICBwcmV2VFM6IHBhcnNlSW50KG1ldGFbMV0gfHwgJzAnLCAxMCksXG4gICAgICAgICAgICAgICAgcHJldkNvdW50OiBwYXJzZUludChtZXRhWzJdIHx8ICcwJywgMTApLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGRhdGE6IGRhdGEubWFwKHBvaW50ID0+ICtwb2ludCB8fCAwKSxcbiAgICAgICAgICAgIGNvdW50LFxuICAgICAgICB9O1xuICAgIH1cbiAgICBwYXJzZUNsaWVudExpc3QobGlzdCwgbWF0Y2hlcikge1xuICAgICAgICBjb25zdCBsaW5lcyA9IGxpc3Quc3BsaXQoL1xccj9cXG4vKTtcbiAgICAgICAgY29uc3QgY2xpZW50cyA9IFtdO1xuICAgICAgICBsaW5lcy5mb3JFYWNoKChsaW5lKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBjbGllbnQgPSB7fTtcbiAgICAgICAgICAgIGNvbnN0IGtleVZhbHVlcyA9IGxpbmUuc3BsaXQoJyAnKTtcbiAgICAgICAgICAgIGtleVZhbHVlcy5mb3JFYWNoKGZ1bmN0aW9uIChrZXlWYWx1ZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4ID0ga2V5VmFsdWUuaW5kZXhPZignPScpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGtleSA9IGtleVZhbHVlLnN1YnN0cmluZygwLCBpbmRleCk7XG4gICAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBrZXlWYWx1ZS5zdWJzdHJpbmcoaW5kZXggKyAxKTtcbiAgICAgICAgICAgICAgICBjbGllbnRba2V5XSA9IHZhbHVlO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb25zdCBuYW1lID0gY2xpZW50WyduYW1lJ107XG4gICAgICAgICAgICBpZiAobWF0Y2hlcihuYW1lKSkge1xuICAgICAgICAgICAgICAgIGNsaWVudFsnbmFtZSddID0gdGhpcy5uYW1lO1xuICAgICAgICAgICAgICAgIGNsaWVudFsncmF3bmFtZSddID0gbmFtZTtcbiAgICAgICAgICAgICAgICBjbGllbnRzLnB1c2goY2xpZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBjbGllbnRzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBFeHBvcnQgdGhlIG1ldHJpY3MgZm9yIHRoZSBxdWV1ZSBpbiB0aGUgUHJvbWV0aGV1cyBmb3JtYXQuXG4gICAgICogQXV0b21hdGljYWxseSBleHBvcnRzIGFsbCB0aGUgY291bnRzIHJldHVybmVkIGJ5IGdldEpvYkNvdW50cygpLlxuICAgICAqXG4gICAgICogQHJldHVybnMgLSBSZXR1cm5zIGEgc3RyaW5nIHdpdGggdGhlIG1ldHJpY3MgaW4gdGhlIFByb21ldGhldXMgZm9ybWF0LlxuICAgICAqXG4gICAgICogQHNlZSB7QGxpbmsgaHR0cHM6Ly9wcm9tZXRoZXVzLmlvL2RvY3MvaW5zdHJ1bWVudGluZy9leHBvc2l0aW9uX2Zvcm1hdHMvfVxuICAgICAqXG4gICAgICoqL1xuICAgIGFzeW5jIGV4cG9ydFByb21ldGhldXNNZXRyaWNzKGdsb2JhbFZhcmlhYmxlcykge1xuICAgICAgICBjb25zdCBjb3VudHMgPSBhd2FpdCB0aGlzLmdldEpvYkNvdW50cygpO1xuICAgICAgICBjb25zdCBtZXRyaWNzID0gW107XG4gICAgICAgIC8vIE1hdGNoIHRoZSB0ZXN0J3MgZXhwZWN0ZWQgSEVMUCB0ZXh0XG4gICAgICAgIG1ldHJpY3MucHVzaCgnIyBIRUxQIGJ1bGxtcV9qb2JfY291bnQgTnVtYmVyIG9mIGpvYnMgaW4gdGhlIHF1ZXVlIGJ5IHN0YXRlJyk7XG4gICAgICAgIG1ldHJpY3MucHVzaCgnIyBUWVBFIGJ1bGxtcV9qb2JfY291bnQgZ2F1Z2UnKTtcbiAgICAgICAgY29uc3QgdmFyaWFibGVzID0gIWdsb2JhbFZhcmlhYmxlc1xuICAgICAgICAgICAgPyAnJ1xuICAgICAgICAgICAgOiBPYmplY3Qua2V5cyhnbG9iYWxWYXJpYWJsZXMpLnJlZHVjZSgoYWNjLCBjdXJyKSA9PiBgJHthY2N9LCAke2N1cnJ9PVwiJHtnbG9iYWxWYXJpYWJsZXNbY3Vycl19XCJgLCAnJyk7XG4gICAgICAgIGZvciAoY29uc3QgW3N0YXRlLCBjb3VudF0gb2YgT2JqZWN0LmVudHJpZXMoY291bnRzKSkge1xuICAgICAgICAgICAgbWV0cmljcy5wdXNoKGBidWxsbXFfam9iX2NvdW50e3F1ZXVlPVwiJHt0aGlzLm5hbWV9XCIsIHN0YXRlPVwiJHtzdGF0ZX1cIiR7dmFyaWFibGVzfX0gJHtjb3VudH1gKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWV0cmljcy5qb2luKCdcXG4nKTtcbiAgICB9XG59XG5leHBvcnRzLlF1ZXVlR2V0dGVycyA9IFF1ZXVlR2V0dGVycztcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXF1ZXVlLWdldHRlcnMuanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiUXVldWVHZXR0ZXJzIiwidHNsaWJfMSIsInJlcXVpcmUiLCJxdWV1ZV9iYXNlXzEiLCJ1dGlsc18xIiwiUXVldWVCYXNlIiwiZ2V0Sm9iIiwiam9iSWQiLCJKb2IiLCJmcm9tSWQiLCJjb21tYW5kQnlUeXBlIiwidHlwZXMiLCJjb3VudCIsImNhbGxiYWNrIiwibWFwIiwidHlwZSIsImtleSIsInRvS2V5Iiwic2FuaXRpemVKb2JUeXBlcyIsImN1cnJlbnRUeXBlcyIsIkFycmF5IiwiaXNBcnJheSIsImxlbmd0aCIsInNhbml0aXplZFR5cGVzIiwiaW5kZXhPZiIsInB1c2giLCJTZXQiLCJnZXRKb2JDb3VudEJ5VHlwZXMiLCJnZXRSYXRlTGltaXRUdGwiLCJtYXhKb2JzIiwic2NyaXB0cyIsImdldERlYm91bmNlSm9iSWQiLCJpZCIsImNsaWVudCIsImdldCIsImtleXMiLCJkZSIsImdldERlZHVwbGljYXRpb25Kb2JJZCIsImdldEdsb2JhbENvbmN1cnJlbmN5IiwiY29uY3VycmVuY3kiLCJoZ2V0IiwibWV0YSIsIk51bWJlciIsImdldEdsb2JhbFJhdGVMaW1pdCIsIm1heCIsImR1cmF0aW9uIiwiaG1nZXQiLCJyZXN1bHQiLCJnZXRKb2JDb3VudHMiLCJ2YWx1ZXMiLCJyZWR1Y2UiLCJzdW0iLCJyZXNwb25zZXMiLCJnZXRDb3VudHMiLCJjb3VudHMiLCJmb3JFYWNoIiwicmVzIiwiaW5kZXgiLCJnZXRKb2JTdGF0ZSIsImdldFN0YXRlIiwiZ2V0TWV0YSIsImNvbmZpZyIsImhnZXRhbGwiLCJwYXVzZWQiLCJtYXhMZW5FdmVudHMiLCJyZXN0IiwiX19yZXN0IiwicGFyc2VkQ29uZmlnIiwiZ2V0Q29tcGxldGVkQ291bnQiLCJnZXRGYWlsZWRDb3VudCIsImdldERlbGF5ZWRDb3VudCIsImdldEFjdGl2ZUNvdW50IiwiZ2V0UHJpb3JpdGl6ZWRDb3VudCIsImdldENvdW50c1BlclByaW9yaXR5IiwicHJpb3JpdGllcyIsInVuaXF1ZVByaW9yaXRpZXMiLCJnZXRXYWl0aW5nQ291bnQiLCJnZXRXYWl0aW5nQ2hpbGRyZW5Db3VudCIsImdldFdhaXRpbmciLCJzdGFydCIsImVuZCIsImdldEpvYnMiLCJnZXRXYWl0aW5nQ2hpbGRyZW4iLCJnZXRBY3RpdmUiLCJnZXREZWxheWVkIiwiZ2V0UHJpb3JpdGl6ZWQiLCJnZXRDb21wbGV0ZWQiLCJnZXRGYWlsZWQiLCJnZXREZXBlbmRlbmNpZXMiLCJwYXJlbnRJZCIsIml0ZW1zIiwidG90YWwiLCJqb2JzIiwicGFnaW5hdGUiLCJmZXRjaEpvYnMiLCJnZXRSYW5nZXMiLCJhc2MiLCJtdWx0aUNvbW1hbmRzIiwiY29tbWFuZCIsInJlc3VsdHMiLCJyZXNwb25zZSIsImNvbmNhdCIsInJldmVyc2UiLCJqb2JJZHMiLCJQcm9taXNlIiwiYWxsIiwiZ2V0Sm9iTG9ncyIsIm11bHRpIiwibG9nc0tleSIsImxyYW5nZSIsImxsZW4iLCJleGVjIiwibG9ncyIsImJhc2VHZXRDbGllbnRzIiwibWF0Y2hlciIsImNsaWVudHMiLCJsaXN0IiwicGFyc2VDbGllbnRMaXN0IiwiZXJyIiwiY2xpZW50Q29tbWFuZE1lc3NhZ2VSZWciLCJ0ZXN0IiwibWVzc2FnZSIsIm5hbWUiLCJnZXRXb3JrZXJzIiwidW5uYW1lZFdvcmtlckNsaWVudE5hbWUiLCJjbGllbnROYW1lIiwibmFtZWRXb3JrZXJDbGllbnROYW1lIiwic3RhcnRzV2l0aCIsImdldFdvcmtlcnNDb3VudCIsIndvcmtlcnMiLCJnZXRRdWV1ZUV2ZW50cyIsIlFVRVVFX0VWRU5UX1NVRkZJWCIsImdldE1ldHJpY3MiLCJkYXRhIiwicGFyc2VJbnQiLCJwcmV2VFMiLCJwcmV2Q291bnQiLCJwb2ludCIsImxpbmVzIiwic3BsaXQiLCJsaW5lIiwia2V5VmFsdWVzIiwia2V5VmFsdWUiLCJzdWJzdHJpbmciLCJleHBvcnRQcm9tZXRoZXVzTWV0cmljcyIsImdsb2JhbFZhcmlhYmxlcyIsIm1ldHJpY3MiLCJ2YXJpYWJsZXMiLCJhY2MiLCJjdXJyIiwic3RhdGUiLCJlbnRyaWVzIiwiam9pbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/classes/queue-getters.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/classes/queue-keys.js":
/*!************************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/classes/queue-keys.js ***!
  \************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.QueueKeys = void 0;\nclass QueueKeys {\n    constructor(prefix = \"bull\"){\n        this.prefix = prefix;\n    }\n    getKeys(name) {\n        const keys = {};\n        [\n            \"\",\n            \"active\",\n            \"wait\",\n            \"waiting-children\",\n            \"paused\",\n            \"id\",\n            \"delayed\",\n            \"prioritized\",\n            \"stalled-check\",\n            \"completed\",\n            \"failed\",\n            \"stalled\",\n            \"repeat\",\n            \"limiter\",\n            \"meta\",\n            \"events\",\n            \"pc\",\n            \"marker\",\n            \"de\"\n        ].forEach((key)=>{\n            keys[key] = this.toKey(name, key);\n        });\n        return keys;\n    }\n    toKey(name, type) {\n        return `${this.getQueueQualifiedName(name)}:${type}`;\n    }\n    getQueueQualifiedName(name) {\n        return `${this.prefix}:${name}`;\n    }\n}\nexports.QueueKeys = QueueKeys; //# sourceMappingURL=queue-keys.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL2NsYXNzZXMvcXVldWUta2V5cy5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsaUJBQWlCLEdBQUcsS0FBSztBQUN6QixNQUFNRTtJQUNGQyxZQUFZQyxTQUFTLE1BQU0sQ0FBRTtRQUN6QixJQUFJLENBQUNBLE1BQU0sR0FBR0E7SUFDbEI7SUFDQUMsUUFBUUMsSUFBSSxFQUFFO1FBQ1YsTUFBTUMsT0FBTyxDQUFDO1FBQ2Q7WUFDSTtZQUNBO1lBQ0E7WUFDQTtZQUNBO1lBQ0E7WUFDQTtZQUNBO1lBQ0E7WUFDQTtZQUNBO1lBQ0E7WUFDQTtZQUNBO1lBQ0E7WUFDQTtZQUNBO1lBQ0E7WUFDQTtTQUNILENBQUNDLE9BQU8sQ0FBQ0MsQ0FBQUE7WUFDTkYsSUFBSSxDQUFDRSxJQUFJLEdBQUcsSUFBSSxDQUFDQyxLQUFLLENBQUNKLE1BQU1HO1FBQ2pDO1FBQ0EsT0FBT0Y7SUFDWDtJQUNBRyxNQUFNSixJQUFJLEVBQUVLLElBQUksRUFBRTtRQUNkLE9BQU8sQ0FBQyxFQUFFLElBQUksQ0FBQ0MscUJBQXFCLENBQUNOLE1BQU0sQ0FBQyxFQUFFSyxLQUFLLENBQUM7SUFDeEQ7SUFDQUMsc0JBQXNCTixJQUFJLEVBQUU7UUFDeEIsT0FBTyxDQUFDLEVBQUUsSUFBSSxDQUFDRixNQUFNLENBQUMsQ0FBQyxFQUFFRSxLQUFLLENBQUM7SUFDbkM7QUFDSjtBQUNBTixpQkFBaUIsR0FBR0UsV0FDcEIsc0NBQXNDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb25seWZhbnMtcGxhdGZvcm0vLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL2NsYXNzZXMvcXVldWUta2V5cy5qcz84ZTlhIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5RdWV1ZUtleXMgPSB2b2lkIDA7XG5jbGFzcyBRdWV1ZUtleXMge1xuICAgIGNvbnN0cnVjdG9yKHByZWZpeCA9ICdidWxsJykge1xuICAgICAgICB0aGlzLnByZWZpeCA9IHByZWZpeDtcbiAgICB9XG4gICAgZ2V0S2V5cyhuYW1lKSB7XG4gICAgICAgIGNvbnN0IGtleXMgPSB7fTtcbiAgICAgICAgW1xuICAgICAgICAgICAgJycsXG4gICAgICAgICAgICAnYWN0aXZlJyxcbiAgICAgICAgICAgICd3YWl0JyxcbiAgICAgICAgICAgICd3YWl0aW5nLWNoaWxkcmVuJyxcbiAgICAgICAgICAgICdwYXVzZWQnLFxuICAgICAgICAgICAgJ2lkJyxcbiAgICAgICAgICAgICdkZWxheWVkJyxcbiAgICAgICAgICAgICdwcmlvcml0aXplZCcsXG4gICAgICAgICAgICAnc3RhbGxlZC1jaGVjaycsXG4gICAgICAgICAgICAnY29tcGxldGVkJyxcbiAgICAgICAgICAgICdmYWlsZWQnLFxuICAgICAgICAgICAgJ3N0YWxsZWQnLFxuICAgICAgICAgICAgJ3JlcGVhdCcsXG4gICAgICAgICAgICAnbGltaXRlcicsXG4gICAgICAgICAgICAnbWV0YScsXG4gICAgICAgICAgICAnZXZlbnRzJyxcbiAgICAgICAgICAgICdwYycsIC8vIHByaW9yaXR5IGNvdW50ZXIga2V5XG4gICAgICAgICAgICAnbWFya2VyJywgLy8gbWFya2VyIGtleVxuICAgICAgICAgICAgJ2RlJywgLy8gZGVkdXBsaWNhdGlvbiBrZXlcbiAgICAgICAgXS5mb3JFYWNoKGtleSA9PiB7XG4gICAgICAgICAgICBrZXlzW2tleV0gPSB0aGlzLnRvS2V5KG5hbWUsIGtleSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4ga2V5cztcbiAgICB9XG4gICAgdG9LZXkobmFtZSwgdHlwZSkge1xuICAgICAgICByZXR1cm4gYCR7dGhpcy5nZXRRdWV1ZVF1YWxpZmllZE5hbWUobmFtZSl9OiR7dHlwZX1gO1xuICAgIH1cbiAgICBnZXRRdWV1ZVF1YWxpZmllZE5hbWUobmFtZSkge1xuICAgICAgICByZXR1cm4gYCR7dGhpcy5wcmVmaXh9OiR7bmFtZX1gO1xuICAgIH1cbn1cbmV4cG9ydHMuUXVldWVLZXlzID0gUXVldWVLZXlzO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cXVldWUta2V5cy5qcy5tYXAiXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJRdWV1ZUtleXMiLCJjb25zdHJ1Y3RvciIsInByZWZpeCIsImdldEtleXMiLCJuYW1lIiwia2V5cyIsImZvckVhY2giLCJrZXkiLCJ0b0tleSIsInR5cGUiLCJnZXRRdWV1ZVF1YWxpZmllZE5hbWUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/classes/queue-keys.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/classes/queue.js":
/*!*******************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/classes/queue.js ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.Queue = void 0;\nconst uuid_1 = __webpack_require__(/*! uuid */ \"(rsc)/./node_modules/uuid/dist/cjs/index.js\");\nconst job_1 = __webpack_require__(/*! ./job */ \"(rsc)/./node_modules/bullmq/dist/cjs/classes/job.js\");\nconst queue_getters_1 = __webpack_require__(/*! ./queue-getters */ \"(rsc)/./node_modules/bullmq/dist/cjs/classes/queue-getters.js\");\nconst repeat_1 = __webpack_require__(/*! ./repeat */ \"(rsc)/./node_modules/bullmq/dist/cjs/classes/repeat.js\");\nconst enums_1 = __webpack_require__(/*! ../enums */ \"(rsc)/./node_modules/bullmq/dist/cjs/enums/index.js\");\nconst job_scheduler_1 = __webpack_require__(/*! ./job-scheduler */ \"(rsc)/./node_modules/bullmq/dist/cjs/classes/job-scheduler.js\");\nconst version_1 = __webpack_require__(/*! ../version */ \"(rsc)/./node_modules/bullmq/dist/cjs/version.js\");\n/**\n * Queue\n *\n * This class provides methods to add jobs to a queue and some other high-level\n * administration such as pausing or deleting queues.\n *\n * @typeParam DataType - The type of the data that the job will process.\n * @typeParam ResultType - The type of the result of the job.\n * @typeParam NameType - The type of the name of the job.\n *\n * @example\n *\n * ```typescript\n * import { Queue } from 'bullmq';\n *\n * interface MyDataType {\n *  foo: string;\n * }\n *\n * interface MyResultType {\n *   bar: string;\n * }\n *\n * const queue = new Queue<MyDataType, MyResultType, \"blue\" | \"brown\">('myQueue');\n * ```\n */ class Queue extends queue_getters_1.QueueGetters {\n    constructor(name, opts, Connection){\n        var _a;\n        super(name, Object.assign({}, opts), Connection);\n        this.token = (0, uuid_1.v4)();\n        this.libName = \"bullmq\";\n        this.jobsOpts = (_a = opts === null || opts === void 0 ? void 0 : opts.defaultJobOptions) !== null && _a !== void 0 ? _a : {};\n        this.waitUntilReady().then((client)=>{\n            if (!this.closing && !(opts === null || opts === void 0 ? void 0 : opts.skipMetasUpdate)) {\n                return client.hmset(this.keys.meta, this.metaValues);\n            }\n        }).catch((err)=>{\n        // We ignore this error to avoid warnings. The error can still\n        // be received by listening to event 'error'\n        });\n    }\n    emit(event, ...args) {\n        return super.emit(event, ...args);\n    }\n    off(eventName, listener) {\n        super.off(eventName, listener);\n        return this;\n    }\n    on(event, listener) {\n        super.on(event, listener);\n        return this;\n    }\n    once(event, listener) {\n        super.once(event, listener);\n        return this;\n    }\n    /**\n     * Returns this instance current default job options.\n     */ get defaultJobOptions() {\n        return Object.assign({}, this.jobsOpts);\n    }\n    get metaValues() {\n        var _a, _b, _c, _d;\n        return {\n            \"opts.maxLenEvents\": (_d = (_c = (_b = (_a = this.opts) === null || _a === void 0 ? void 0 : _a.streams) === null || _b === void 0 ? void 0 : _b.events) === null || _c === void 0 ? void 0 : _c.maxLen) !== null && _d !== void 0 ? _d : 10000,\n            version: `${this.libName}:${version_1.version}`\n        };\n    }\n    /**\n     * Get library version.\n     *\n     * @returns the content of the meta.library field.\n     */ async getVersion() {\n        const client = await this.client;\n        return await client.hget(this.keys.meta, \"version\");\n    }\n    get repeat() {\n        return new Promise(async (resolve)=>{\n            if (!this._repeat) {\n                this._repeat = new repeat_1.Repeat(this.name, Object.assign(Object.assign({}, this.opts), {\n                    connection: await this.client\n                }));\n                this._repeat.on(\"error\", (e)=>this.emit.bind(this, e));\n            }\n            resolve(this._repeat);\n        });\n    }\n    get jobScheduler() {\n        return new Promise(async (resolve)=>{\n            if (!this._jobScheduler) {\n                this._jobScheduler = new job_scheduler_1.JobScheduler(this.name, Object.assign(Object.assign({}, this.opts), {\n                    connection: await this.client\n                }));\n                this._jobScheduler.on(\"error\", (e)=>this.emit.bind(this, e));\n            }\n            resolve(this._jobScheduler);\n        });\n    }\n    /**\n     * Enable and set global concurrency value.\n     * @param concurrency - Maximum number of simultaneous jobs that the workers can handle.\n     * For instance, setting this value to 1 ensures that no more than one job\n     * is processed at any given time. If this limit is not defined, there will be no\n     * restriction on the number of concurrent jobs.\n     */ async setGlobalConcurrency(concurrency) {\n        const client = await this.client;\n        return client.hset(this.keys.meta, \"concurrency\", concurrency);\n    }\n    /**\n     * Enable and set rate limit.\n     * @param max - Max number of jobs to process in the time period specified in `duration`\n     * @param duration - Time in milliseconds. During this time, a maximum of `max` jobs will be processed.\n     */ async setGlobalRateLimit(max, duration) {\n        const client = await this.client;\n        return client.hset(this.keys.meta, \"max\", max, \"duration\", duration);\n    }\n    /**\n     * Remove global concurrency value.\n     */ async removeGlobalConcurrency() {\n        const client = await this.client;\n        return client.hdel(this.keys.meta, \"concurrency\");\n    }\n    /**\n     * Remove global rate limit values.\n     */ async removeGlobalRateLimit() {\n        const client = await this.client;\n        return client.hdel(this.keys.meta, \"max\", \"duration\");\n    }\n    /**\n     * Adds a new job to the queue.\n     *\n     * @param name - Name of the job to be added to the queue.\n     * @param data - Arbitrary data to append to the job.\n     * @param opts - Job options that affects how the job is going to be processed.\n     */ async add(name, data, opts) {\n        return this.trace(enums_1.SpanKind.PRODUCER, \"add\", `${this.name}.${name}`, async (span, srcPropagationMedatada)=>{\n            var _a;\n            if (srcPropagationMedatada && !((_a = opts === null || opts === void 0 ? void 0 : opts.telemetry) === null || _a === void 0 ? void 0 : _a.omitContext)) {\n                const telemetry = {\n                    metadata: srcPropagationMedatada\n                };\n                opts = Object.assign(Object.assign({}, opts), {\n                    telemetry\n                });\n            }\n            const job = await this.addJob(name, data, opts);\n            span === null || span === void 0 ? void 0 : span.setAttributes({\n                [enums_1.TelemetryAttributes.JobName]: name,\n                [enums_1.TelemetryAttributes.JobId]: job.id\n            });\n            return job;\n        });\n    }\n    /**\n     * addJob is a telemetry free version of the add method, useful in order to wrap it\n     * with custom telemetry on subclasses.\n     *\n     * @param name - Name of the job to be added to the queue.\n     * @param data - Arbitrary data to append to the job.\n     * @param opts - Job options that affects how the job is going to be processed.\n     *\n     * @returns Job\n     */ async addJob(name, data, opts) {\n        if (opts && opts.repeat) {\n            if (opts.repeat.endDate) {\n                if (+new Date(opts.repeat.endDate) < Date.now()) {\n                    throw new Error(\"End date must be greater than current timestamp\");\n                }\n            }\n            return (await this.repeat).updateRepeatableJob(name, data, Object.assign(Object.assign({}, this.jobsOpts), opts), {\n                override: true\n            });\n        } else {\n            const jobId = opts === null || opts === void 0 ? void 0 : opts.jobId;\n            if (jobId == \"0\" || (jobId === null || jobId === void 0 ? void 0 : jobId.startsWith(\"0:\"))) {\n                throw new Error(\"JobId cannot be '0' or start with 0:\");\n            }\n            const job = await this.Job.create(this, name, data, Object.assign(Object.assign(Object.assign({}, this.jobsOpts), opts), {\n                jobId\n            }));\n            this.emit(\"waiting\", job);\n            return job;\n        }\n    }\n    /**\n     * Adds an array of jobs to the queue. This method may be faster than adding\n     * one job at a time in a sequence.\n     *\n     * @param jobs - The array of jobs to add to the queue. Each job is defined by 3\n     * properties, 'name', 'data' and 'opts'. They follow the same signature as 'Queue.add'.\n     */ async addBulk(jobs) {\n        return this.trace(enums_1.SpanKind.PRODUCER, \"addBulk\", this.name, async (span, srcPropagationMedatada)=>{\n            if (span) {\n                span.setAttributes({\n                    [enums_1.TelemetryAttributes.BulkNames]: jobs.map((job)=>job.name),\n                    [enums_1.TelemetryAttributes.BulkCount]: jobs.length\n                });\n            }\n            return await this.Job.createBulk(this, jobs.map((job)=>{\n                var _a, _b, _c, _d, _e, _f;\n                let telemetry = (_a = job.opts) === null || _a === void 0 ? void 0 : _a.telemetry;\n                if (srcPropagationMedatada) {\n                    const omitContext = (_c = (_b = job.opts) === null || _b === void 0 ? void 0 : _b.telemetry) === null || _c === void 0 ? void 0 : _c.omitContext;\n                    const telemetryMetadata = ((_e = (_d = job.opts) === null || _d === void 0 ? void 0 : _d.telemetry) === null || _e === void 0 ? void 0 : _e.metadata) || !omitContext && srcPropagationMedatada;\n                    if (telemetryMetadata || omitContext) {\n                        telemetry = {\n                            metadata: telemetryMetadata,\n                            omitContext\n                        };\n                    }\n                }\n                return {\n                    name: job.name,\n                    data: job.data,\n                    opts: Object.assign(Object.assign(Object.assign({}, this.jobsOpts), job.opts), {\n                        jobId: (_f = job.opts) === null || _f === void 0 ? void 0 : _f.jobId,\n                        telemetry\n                    })\n                };\n            }));\n        });\n    }\n    /**\n     * Upserts a scheduler.\n     *\n     * A scheduler is a job factory that creates jobs at a given interval.\n     * Upserting a scheduler will create a new job scheduler or update an existing one.\n     * It will also create the first job based on the repeat options and delayed accordingly.\n     *\n     * @param key - Unique key for the repeatable job meta.\n     * @param repeatOpts - Repeat options\n     * @param jobTemplate - Job template. If provided it will be used for all the jobs\n     * created by the scheduler.\n     *\n     * @returns The next job to be scheduled (would normally be in delayed state).\n     */ async upsertJobScheduler(jobSchedulerId, repeatOpts, jobTemplate) {\n        var _a, _b;\n        if (repeatOpts.endDate) {\n            if (+new Date(repeatOpts.endDate) < Date.now()) {\n                throw new Error(\"End date must be greater than current timestamp\");\n            }\n        }\n        return (await this.jobScheduler).upsertJobScheduler(jobSchedulerId, repeatOpts, (_a = jobTemplate === null || jobTemplate === void 0 ? void 0 : jobTemplate.name) !== null && _a !== void 0 ? _a : jobSchedulerId, (_b = jobTemplate === null || jobTemplate === void 0 ? void 0 : jobTemplate.data) !== null && _b !== void 0 ? _b : {}, Object.assign(Object.assign({}, this.jobsOpts), jobTemplate === null || jobTemplate === void 0 ? void 0 : jobTemplate.opts), {\n            override: true\n        });\n    }\n    /**\n     * Pauses the processing of this queue globally.\n     *\n     * We use an atomic RENAME operation on the wait queue. Since\n     * we have blocking calls with BRPOPLPUSH on the wait queue, as long as the queue\n     * is renamed to 'paused', no new jobs will be processed (the current ones\n     * will run until finalized).\n     *\n     * Adding jobs requires a LUA script to check first if the paused list exist\n     * and in that case it will add it there instead of the wait list.\n     */ async pause() {\n        await this.trace(enums_1.SpanKind.INTERNAL, \"pause\", this.name, async ()=>{\n            await this.scripts.pause(true);\n            this.emit(\"paused\");\n        });\n    }\n    /**\n     * Close the queue instance.\n     *\n     */ async close() {\n        await this.trace(enums_1.SpanKind.INTERNAL, \"close\", this.name, async ()=>{\n            if (!this.closing) {\n                if (this._repeat) {\n                    await this._repeat.close();\n                }\n            }\n            await super.close();\n        });\n    }\n    /**\n     * Overrides the rate limit to be active for the next jobs.\n     *\n     * @param expireTimeMs - expire time in ms of this rate limit.\n     */ async rateLimit(expireTimeMs) {\n        await this.trace(enums_1.SpanKind.INTERNAL, \"rateLimit\", this.name, async (span)=>{\n            span === null || span === void 0 ? void 0 : span.setAttributes({\n                [enums_1.TelemetryAttributes.QueueRateLimit]: expireTimeMs\n            });\n            await this.client.then((client)=>client.set(this.keys.limiter, Number.MAX_SAFE_INTEGER, \"PX\", expireTimeMs));\n        });\n    }\n    /**\n     * Resumes the processing of this queue globally.\n     *\n     * The method reverses the pause operation by resuming the processing of the\n     * queue.\n     */ async resume() {\n        await this.trace(enums_1.SpanKind.INTERNAL, \"resume\", this.name, async ()=>{\n            await this.scripts.pause(false);\n            this.emit(\"resumed\");\n        });\n    }\n    /**\n     * Returns true if the queue is currently paused.\n     */ async isPaused() {\n        const client = await this.client;\n        const pausedKeyExists = await client.hexists(this.keys.meta, \"paused\");\n        return pausedKeyExists === 1;\n    }\n    /**\n     * Returns true if the queue is currently maxed.\n     */ isMaxed() {\n        return this.scripts.isMaxed();\n    }\n    /**\n     * Get all repeatable meta jobs.\n     *\n     * @deprecated This method is deprecated and will be removed in v6. Use getJobSchedulers instead.\n     *\n     * @param start - Offset of first job to return.\n     * @param end - Offset of last job to return.\n     * @param asc - Determine the order in which jobs are returned based on their\n     * next execution time.\n     */ async getRepeatableJobs(start, end, asc) {\n        return (await this.repeat).getRepeatableJobs(start, end, asc);\n    }\n    /**\n     * Get Job Scheduler by id\n     *\n     * @param id - identifier of scheduler.\n     */ async getJobScheduler(id) {\n        return (await this.jobScheduler).getScheduler(id);\n    }\n    /**\n     * Get all Job Schedulers\n     *\n     * @param start - Offset of first scheduler to return.\n     * @param end - Offset of last scheduler to return.\n     * @param asc - Determine the order in which schedulers are returned based on their\n     * next execution time.\n     */ async getJobSchedulers(start, end, asc) {\n        return (await this.jobScheduler).getJobSchedulers(start, end, asc);\n    }\n    /**\n     *\n     * Get the number of job schedulers.\n     *\n     * @returns The number of job schedulers.\n     */ async getJobSchedulersCount() {\n        return (await this.jobScheduler).getSchedulersCount();\n    }\n    /**\n     * Removes a repeatable job.\n     *\n     * Note: you need to use the exact same repeatOpts when deleting a repeatable job\n     * than when adding it.\n     *\n     * @deprecated This method is deprecated and will be removed in v6. Use removeJobScheduler instead.\n     *\n     * @see removeRepeatableByKey\n     *\n     * @param name - Job name\n     * @param repeatOpts - Repeat options\n     * @param jobId - Job id to remove. If not provided, all jobs with the same repeatOpts\n     * @returns\n     */ async removeRepeatable(name, repeatOpts, jobId) {\n        return this.trace(enums_1.SpanKind.INTERNAL, \"removeRepeatable\", `${this.name}.${name}`, async (span)=>{\n            span === null || span === void 0 ? void 0 : span.setAttributes({\n                [enums_1.TelemetryAttributes.JobName]: name,\n                [enums_1.TelemetryAttributes.JobId]: jobId\n            });\n            const repeat = await this.repeat;\n            const removed = await repeat.removeRepeatable(name, repeatOpts, jobId);\n            return !removed;\n        });\n    }\n    /**\n     *\n     * Removes a job scheduler.\n     *\n     * @param jobSchedulerId - identifier of the job scheduler.\n     *\n     * @returns\n     */ async removeJobScheduler(jobSchedulerId) {\n        const jobScheduler = await this.jobScheduler;\n        const removed = await jobScheduler.removeJobScheduler(jobSchedulerId);\n        return !removed;\n    }\n    /**\n     * Removes a debounce key.\n     * @deprecated use removeDeduplicationKey\n     *\n     * @param id - debounce identifier\n     */ async removeDebounceKey(id) {\n        return this.trace(enums_1.SpanKind.INTERNAL, \"removeDebounceKey\", `${this.name}`, async (span)=>{\n            span === null || span === void 0 ? void 0 : span.setAttributes({\n                [enums_1.TelemetryAttributes.JobKey]: id\n            });\n            const client = await this.client;\n            return await client.del(`${this.keys.de}:${id}`);\n        });\n    }\n    /**\n     * Removes a deduplication key.\n     *\n     * @param id - identifier\n     */ async removeDeduplicationKey(id) {\n        return this.trace(enums_1.SpanKind.INTERNAL, \"removeDeduplicationKey\", `${this.name}`, async (span)=>{\n            span === null || span === void 0 ? void 0 : span.setAttributes({\n                [enums_1.TelemetryAttributes.DeduplicationKey]: id\n            });\n            const client = await this.client;\n            return client.del(`${this.keys.de}:${id}`);\n        });\n    }\n    /**\n     * Removes rate limit key.\n     */ async removeRateLimitKey() {\n        const client = await this.client;\n        return client.del(this.keys.limiter);\n    }\n    /**\n     * Removes a repeatable job by its key. Note that the key is the one used\n     * to store the repeatable job metadata and not one of the job iterations\n     * themselves. You can use \"getRepeatableJobs\" in order to get the keys.\n     *\n     * @see getRepeatableJobs\n     *\n     * @deprecated This method is deprecated and will be removed in v6. Use removeJobScheduler instead.\n     *\n     * @param repeatJobKey - To the repeatable job.\n     * @returns\n     */ async removeRepeatableByKey(key) {\n        return this.trace(enums_1.SpanKind.INTERNAL, \"removeRepeatableByKey\", `${this.name}`, async (span)=>{\n            span === null || span === void 0 ? void 0 : span.setAttributes({\n                [enums_1.TelemetryAttributes.JobKey]: key\n            });\n            const repeat = await this.repeat;\n            const removed = await repeat.removeRepeatableByKey(key);\n            return !removed;\n        });\n    }\n    /**\n     * Removes the given job from the queue as well as all its\n     * dependencies.\n     *\n     * @param jobId - The id of the job to remove\n     * @param opts - Options to remove a job\n     * @returns 1 if it managed to remove the job or 0 if the job or\n     * any of its dependencies were locked.\n     */ async remove(jobId, { removeChildren = true } = {}) {\n        return this.trace(enums_1.SpanKind.INTERNAL, \"remove\", this.name, async (span)=>{\n            span === null || span === void 0 ? void 0 : span.setAttributes({\n                [enums_1.TelemetryAttributes.JobId]: jobId,\n                [enums_1.TelemetryAttributes.JobOptions]: JSON.stringify({\n                    removeChildren\n                })\n            });\n            const code = await this.scripts.remove(jobId, removeChildren);\n            if (code === 1) {\n                this.emit(\"removed\", jobId);\n            }\n            return code;\n        });\n    }\n    /**\n     * Updates the given job's progress.\n     *\n     * @param jobId - The id of the job to update\n     * @param progress - Number or object to be saved as progress.\n     */ async updateJobProgress(jobId, progress) {\n        await this.trace(enums_1.SpanKind.INTERNAL, \"updateJobProgress\", this.name, async (span)=>{\n            span === null || span === void 0 ? void 0 : span.setAttributes({\n                [enums_1.TelemetryAttributes.JobId]: jobId,\n                [enums_1.TelemetryAttributes.JobProgress]: JSON.stringify(progress)\n            });\n            await this.scripts.updateProgress(jobId, progress);\n            this.emit(\"progress\", jobId, progress);\n        });\n    }\n    /**\n     * Logs one row of job's log data.\n     *\n     * @param jobId - The job id to log against.\n     * @param logRow - String with log data to be logged.\n     * @param keepLogs - Max number of log entries to keep (0 for unlimited).\n     *\n     * @returns The total number of log entries for this job so far.\n     */ async addJobLog(jobId, logRow, keepLogs) {\n        return job_1.Job.addJobLog(this, jobId, logRow, keepLogs);\n    }\n    /**\n     * Drains the queue, i.e., removes all jobs that are waiting\n     * or delayed, but not active, completed or failed.\n     *\n     * @param delayed - Pass true if it should also clean the\n     * delayed jobs.\n     */ async drain(delayed = false) {\n        await this.trace(enums_1.SpanKind.INTERNAL, \"drain\", this.name, async (span)=>{\n            span === null || span === void 0 ? void 0 : span.setAttributes({\n                [enums_1.TelemetryAttributes.QueueDrainDelay]: delayed\n            });\n            await this.scripts.drain(delayed);\n        });\n    }\n    /**\n     * Cleans jobs from a queue. Similar to drain but keeps jobs within a certain\n     * grace period.\n     *\n     * @param grace - The grace period in milliseconds\n     * @param limit - Max number of jobs to clean\n     * @param type - The type of job to clean\n     * Possible values are completed, wait, active, paused, delayed, failed. Defaults to completed.\n     * @returns Id jobs from the deleted records\n     */ async clean(grace, limit, type = \"completed\") {\n        return this.trace(enums_1.SpanKind.INTERNAL, \"clean\", this.name, async (span)=>{\n            const maxCount = limit || Infinity;\n            const maxCountPerCall = Math.min(10000, maxCount);\n            const timestamp = Date.now() - grace;\n            let deletedCount = 0;\n            const deletedJobsIds = [];\n            // Normalize 'waiting' to 'wait' for consistency with internal Redis keys\n            const normalizedType = type === \"waiting\" ? \"wait\" : type;\n            while(deletedCount < maxCount){\n                const jobsIds = await this.scripts.cleanJobsInSet(normalizedType, timestamp, maxCountPerCall);\n                this.emit(\"cleaned\", jobsIds, normalizedType);\n                deletedCount += jobsIds.length;\n                deletedJobsIds.push(...jobsIds);\n                if (jobsIds.length < maxCountPerCall) {\n                    break;\n                }\n            }\n            span === null || span === void 0 ? void 0 : span.setAttributes({\n                [enums_1.TelemetryAttributes.QueueGrace]: grace,\n                [enums_1.TelemetryAttributes.JobType]: type,\n                [enums_1.TelemetryAttributes.QueueCleanLimit]: maxCount,\n                [enums_1.TelemetryAttributes.JobIds]: deletedJobsIds\n            });\n            return deletedJobsIds;\n        });\n    }\n    /**\n     * Completely destroys the queue and all of its contents irreversibly.\n     * This method will *pause* the queue and requires that there are no\n     * active jobs. It is possible to bypass this requirement, i.e. not\n     * having active jobs using the \"force\" option.\n     *\n     * Note: This operation requires to iterate on all the jobs stored in the queue\n     * and can be slow for very large queues.\n     *\n     * @param opts - Obliterate options.\n     */ async obliterate(opts) {\n        await this.trace(enums_1.SpanKind.INTERNAL, \"obliterate\", this.name, async ()=>{\n            await this.pause();\n            let cursor = 0;\n            do {\n                cursor = await this.scripts.obliterate(Object.assign({\n                    force: false,\n                    count: 1000\n                }, opts));\n            }while (cursor);\n        });\n    }\n    /**\n     * Retry all the failed or completed jobs.\n     *\n     * @param opts - An object with the following properties:\n     *   - count  number to limit how many jobs will be moved to wait status per iteration,\n     *   - state  failed by default or completed.\n     *   - timestamp from which timestamp to start moving jobs to wait status, default Date.now().\n     *\n     * @returns\n     */ async retryJobs(opts = {}) {\n        await this.trace(enums_1.SpanKind.PRODUCER, \"retryJobs\", this.name, async (span)=>{\n            span === null || span === void 0 ? void 0 : span.setAttributes({\n                [enums_1.TelemetryAttributes.QueueOptions]: JSON.stringify(opts)\n            });\n            let cursor = 0;\n            do {\n                cursor = await this.scripts.retryJobs(opts.state, opts.count, opts.timestamp);\n            }while (cursor);\n        });\n    }\n    /**\n     * Promote all the delayed jobs.\n     *\n     * @param opts - An object with the following properties:\n     *   - count  number to limit how many jobs will be moved to wait status per iteration\n     *\n     * @returns\n     */ async promoteJobs(opts = {}) {\n        await this.trace(enums_1.SpanKind.INTERNAL, \"promoteJobs\", this.name, async (span)=>{\n            span === null || span === void 0 ? void 0 : span.setAttributes({\n                [enums_1.TelemetryAttributes.QueueOptions]: JSON.stringify(opts)\n            });\n            let cursor = 0;\n            do {\n                cursor = await this.scripts.promoteJobs(opts.count);\n            }while (cursor);\n        });\n    }\n    /**\n     * Trim the event stream to an approximately maxLength.\n     *\n     * @param maxLength -\n     */ async trimEvents(maxLength) {\n        return this.trace(enums_1.SpanKind.INTERNAL, \"trimEvents\", this.name, async (span)=>{\n            span === null || span === void 0 ? void 0 : span.setAttributes({\n                [enums_1.TelemetryAttributes.QueueEventMaxLength]: maxLength\n            });\n            const client = await this.client;\n            return await client.xtrim(this.keys.events, \"MAXLEN\", \"~\", maxLength);\n        });\n    }\n    /**\n     * Delete old priority helper key.\n     */ async removeDeprecatedPriorityKey() {\n        const client = await this.client;\n        return client.del(this.toKey(\"priority\"));\n    }\n}\nexports.Queue = Queue; //# sourceMappingURL=queue.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL2NsYXNzZXMvcXVldWUuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELGFBQWEsR0FBRyxLQUFLO0FBQ3JCLE1BQU1HLFNBQVNDLG1CQUFPQSxDQUFDLHlEQUFNO0FBQzdCLE1BQU1DLFFBQVFELG1CQUFPQSxDQUFDLGtFQUFPO0FBQzdCLE1BQU1FLGtCQUFrQkYsbUJBQU9BLENBQUMsc0ZBQWlCO0FBQ2pELE1BQU1HLFdBQVdILG1CQUFPQSxDQUFDLHdFQUFVO0FBQ25DLE1BQU1JLFVBQVVKLG1CQUFPQSxDQUFDLHFFQUFVO0FBQ2xDLE1BQU1LLGtCQUFrQkwsbUJBQU9BLENBQUMsc0ZBQWlCO0FBQ2pELE1BQU1NLFlBQVlOLG1CQUFPQSxDQUFDLG1FQUFZO0FBQ3RDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0NBeUJDLEdBQ0QsTUFBTUYsY0FBY0ksZ0JBQWdCSyxZQUFZO0lBQzVDQyxZQUFZQyxJQUFJLEVBQUVDLElBQUksRUFBRUMsVUFBVSxDQUFFO1FBQ2hDLElBQUlDO1FBQ0osS0FBSyxDQUFDSCxNQUFNZixPQUFPbUIsTUFBTSxDQUFDLENBQUMsR0FBR0gsT0FBT0M7UUFDckMsSUFBSSxDQUFDRyxLQUFLLEdBQUcsQ0FBQyxHQUFHZixPQUFPZ0IsRUFBRTtRQUMxQixJQUFJLENBQUNDLE9BQU8sR0FBRztRQUNmLElBQUksQ0FBQ0MsUUFBUSxHQUFHLENBQUNMLEtBQUtGLFNBQVMsUUFBUUEsU0FBUyxLQUFLLElBQUksS0FBSyxJQUFJQSxLQUFLUSxpQkFBaUIsTUFBTSxRQUFRTixPQUFPLEtBQUssSUFBSUEsS0FBSyxDQUFDO1FBQzVILElBQUksQ0FBQ08sY0FBYyxHQUNkQyxJQUFJLENBQUNDLENBQUFBO1lBQ04sSUFBSSxDQUFDLElBQUksQ0FBQ0MsT0FBTyxJQUFJLENBQUVaLENBQUFBLFNBQVMsUUFBUUEsU0FB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QUN0RCxRQUFTRixRQUFRO1FBQ3JCO0lBQ0o7SUFDQTs7OztLQUlDLEdBQ0QsTUFBTU8sV0FBV0MsU0FBUyxFQUFFO1FBQ3hCLE9BQU8sSUFBSSxDQUFDekgsS0FBSyxDQUFDakUsUUFBUWtFLFFBQVEsQ0FBQ3VDLFFBQVEsRUFBRSxjQUFjLElBQUksQ0FBQ3BHLElBQUksRUFBRSxPQUFPK0Q7WUFDekVBLFNBQVMsUUFBUUEsU0FBUyxLQUFLLElBQUksS0FBSyxJQUFJQSxLQUFLTyxhQUFhLENBQUM7Z0JBQzNELENBQUMzRSxRQUFRNEUsbUJBQW1CLENBQUMrRyxtQkFBbUIsQ0FBQyxFQUFFRDtZQUN2RDtZQUNBLE1BQU16SyxTQUFTLE1BQU0sSUFBSSxDQUFDQSxNQUFNO1lBQ2hDLE9BQU8sTUFBTUEsT0FBTzJLLEtBQUssQ0FBQyxJQUFJLENBQUN2SyxJQUFJLENBQUNpQixNQUFNLEVBQUUsVUFBVSxLQUFLb0o7UUFDL0Q7SUFDSjtJQUNBOztLQUVDLEdBQ0QsTUFBTUcsOEJBQThCO1FBQ2hDLE1BQU01SyxTQUFTLE1BQU0sSUFBSSxDQUFDQSxNQUFNO1FBQ2hDLE9BQU9BLE9BQU9xSCxHQUFHLENBQUMsSUFBSSxDQUFDd0QsS0FBSyxDQUFDO0lBQ2pDO0FBQ0o7QUFDQXRNLGFBQWEsR0FBR0UsT0FDaEIsaUNBQWlDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb25seWZhbnMtcGxhdGZvcm0vLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL2NsYXNzZXMvcXVldWUuanM/OGNhOSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuUXVldWUgPSB2b2lkIDA7XG5jb25zdCB1dWlkXzEgPSByZXF1aXJlKFwidXVpZFwiKTtcbmNvbnN0IGpvYl8xID0gcmVxdWlyZShcIi4vam9iXCIpO1xuY29uc3QgcXVldWVfZ2V0dGVyc18xID0gcmVxdWlyZShcIi4vcXVldWUtZ2V0dGVyc1wiKTtcbmNvbnN0IHJlcGVhdF8xID0gcmVxdWlyZShcIi4vcmVwZWF0XCIpO1xuY29uc3QgZW51bXNfMSA9IHJlcXVpcmUoXCIuLi9lbnVtc1wiKTtcbmNvbnN0IGpvYl9zY2hlZHVsZXJfMSA9IHJlcXVpcmUoXCIuL2pvYi1zY2hlZHVsZXJcIik7XG5jb25zdCB2ZXJzaW9uXzEgPSByZXF1aXJlKFwiLi4vdmVyc2lvblwiKTtcbi8qKlxuICogUXVldWVcbiAqXG4gKiBUaGlzIGNsYXNzIHByb3ZpZGVzIG1ldGhvZHMgdG8gYWRkIGpvYnMgdG8gYSBxdWV1ZSBhbmQgc29tZSBvdGhlciBoaWdoLWxldmVsXG4gKiBhZG1pbmlzdHJhdGlvbiBzdWNoIGFzIHBhdXNpbmcgb3IgZGVsZXRpbmcgcXVldWVzLlxuICpcbiAqIEB0eXBlUGFyYW0gRGF0YVR5cGUgLSBUaGUgdHlwZSBvZiB0aGUgZGF0YSB0aGF0IHRoZSBqb2Igd2lsbCBwcm9jZXNzLlxuICogQHR5cGVQYXJhbSBSZXN1bHRUeXBlIC0gVGhlIHR5cGUgb2YgdGhlIHJlc3VsdCBvZiB0aGUgam9iLlxuICogQHR5cGVQYXJhbSBOYW1lVHlwZSAtIFRoZSB0eXBlIG9mIHRoZSBuYW1lIG9mIHRoZSBqb2IuXG4gKlxuICogQGV4YW1wbGVcbiAqXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiBpbXBvcnQgeyBRdWV1ZSB9IGZyb20gJ2J1bGxtcSc7XG4gKlxuICogaW50ZXJmYWNlIE15RGF0YVR5cGUge1xuICogIGZvbzogc3RyaW5nO1xuICogfVxuICpcbiAqIGludGVyZmFjZSBNeVJlc3VsdFR5cGUge1xuICogICBiYXI6IHN0cmluZztcbiAqIH1cbiAqXG4gKiBjb25zdCBxdWV1ZSA9IG5ldyBRdWV1ZTxNeURhdGFUeXBlLCBNeVJlc3VsdFR5cGUsIFwiYmx1ZVwiIHwgXCJicm93blwiPignbXlRdWV1ZScpO1xuICogYGBgXG4gKi9cbmNsYXNzIFF1ZXVlIGV4dGVuZHMgcXVldWVfZ2V0dGVyc18xLlF1ZXVlR2V0dGVycyB7XG4gICAgY29uc3RydWN0b3IobmFtZSwgb3B0cywgQ29ubmVjdGlvbikge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHN1cGVyKG5hbWUsIE9iamVjdC5hc3NpZ24oe30sIG9wdHMpLCBDb25uZWN0aW9uKTtcbiAgICAgICAgdGhpcy50b2tlbiA9ICgwLCB1dWlkXzEudjQpKCk7XG4gICAgICAgIHRoaXMubGliTmFtZSA9ICdidWxsbXEnO1xuICAgICAgICB0aGlzLmpvYnNPcHRzID0gKF9hID0gb3B0cyA9PT0gbnVsbCB8fCBvcHRzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRzLmRlZmF1bHRKb2JPcHRpb25zKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiB7fTtcbiAgICAgICAgdGhpcy53YWl0VW50aWxSZWFkeSgpXG4gICAgICAgICAgICAudGhlbihjbGllbnQgPT4ge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmNsb3NpbmcgJiYgIShvcHRzID09PSBudWxsIHx8IG9wdHMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdHMuc2tpcE1ldGFzVXBkYXRlKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBjbGllbnQuaG1zZXQodGhpcy5rZXlzLm1ldGEsIHRoaXMubWV0YVZhbHVlcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgICAgICAuY2F0Y2goZXJyID0+IHtcbiAgICAgICAgICAgIC8vIFdlIGlnbm9yZSB0aGlzIGVycm9yIHRvIGF2b2lkIHdhcm5pbmdzLiBUaGUgZXJyb3IgY2FuIHN0aWxsXG4gICAgICAgICAgICAvLyBiZSByZWNlaXZlZCBieSBsaXN0ZW5pbmcgdG8gZXZlbnQgJ2Vycm9yJ1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgZW1pdChldmVudCwgLi4uYXJncykge1xuICAgICAgICByZXR1cm4gc3VwZXIuZW1pdChldmVudCwgLi4uYXJncyk7XG4gICAgfVxuICAgIG9mZihldmVudE5hbWUsIGxpc3RlbmVyKSB7XG4gICAgICAgIHN1cGVyLm9mZihldmVudE5hbWUsIGxpc3RlbmVyKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIG9uKGV2ZW50LCBsaXN0ZW5lcikge1xuICAgICAgICBzdXBlci5vbihldmVudCwgbGlzdGVuZXIpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgb25jZShldmVudCwgbGlzdGVuZXIpIHtcbiAgICAgICAgc3VwZXIub25jZShldmVudCwgbGlzdGVuZXIpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGlzIGluc3RhbmNlIGN1cnJlbnQgZGVmYXVsdCBqb2Igb3B0aW9ucy5cbiAgICAgKi9cbiAgICBnZXQgZGVmYXVsdEpvYk9wdGlvbnMoKSB7XG4gICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKHt9LCB0aGlzLmpvYnNPcHRzKTtcbiAgICB9XG4gICAgZ2V0IG1ldGFWYWx1ZXMoKSB7XG4gICAgICAgIHZhciBfYSwgX2IsIF9jLCBfZDtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICdvcHRzLm1heExlbkV2ZW50cyc6IChfZCA9IChfYyA9IChfYiA9IChfYSA9IHRoaXMub3B0cykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnN0cmVhbXMpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5ldmVudHMpID09PSBudWxsIHx8IF9jID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYy5tYXhMZW4pICE9PSBudWxsICYmIF9kICE9PSB2b2lkIDAgPyBfZCA6IDEwMDAwLFxuICAgICAgICAgICAgdmVyc2lvbjogYCR7dGhpcy5saWJOYW1lfToke3ZlcnNpb25fMS52ZXJzaW9ufWAsXG4gICAgICAgIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCBsaWJyYXJ5IHZlcnNpb24uXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB0aGUgY29udGVudCBvZiB0aGUgbWV0YS5saWJyYXJ5IGZpZWxkLlxuICAgICAqL1xuICAgIGFzeW5jIGdldFZlcnNpb24oKSB7XG4gICAgICAgIGNvbnN0IGNsaWVudCA9IGF3YWl0IHRoaXMuY2xpZW50O1xuICAgICAgICByZXR1cm4gYXdhaXQgY2xpZW50LmhnZXQodGhpcy5rZXlzLm1ldGEsICd2ZXJzaW9uJyk7XG4gICAgfVxuICAgIGdldCByZXBlYXQoKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShhc3luYyAocmVzb2x2ZSkgPT4ge1xuICAgICAgICAgICAgaWYgKCF0aGlzLl9yZXBlYXQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9yZXBlYXQgPSBuZXcgcmVwZWF0XzEuUmVwZWF0KHRoaXMubmFtZSwgT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCB0aGlzLm9wdHMpLCB7IGNvbm5lY3Rpb246IGF3YWl0IHRoaXMuY2xpZW50IH0pKTtcbiAgICAgICAgICAgICAgICB0aGlzLl9yZXBlYXQub24oJ2Vycm9yJywgZSA9PiB0aGlzLmVtaXQuYmluZCh0aGlzLCBlKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXNvbHZlKHRoaXMuX3JlcGVhdCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBnZXQgam9iU2NoZWR1bGVyKCkge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoYXN5bmMgKHJlc29sdmUpID0+IHtcbiAgICAgICAgICAgIGlmICghdGhpcy5fam9iU2NoZWR1bGVyKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fam9iU2NoZWR1bGVyID0gbmV3IGpvYl9zY2hlZHVsZXJfMS5Kb2JTY2hlZHVsZXIodGhpcy5uYW1lLCBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHRoaXMub3B0cyksIHsgY29ubmVjdGlvbjogYXdhaXQgdGhpcy5jbGllbnQgfSkpO1xuICAgICAgICAgICAgICAgIHRoaXMuX2pvYlNjaGVkdWxlci5vbignZXJyb3InLCBlID0+IHRoaXMuZW1pdC5iaW5kKHRoaXMsIGUpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlc29sdmUodGhpcy5fam9iU2NoZWR1bGVyKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEVuYWJsZSBhbmQgc2V0IGdsb2JhbCBjb25jdXJyZW5jeSB2YWx1ZS5cbiAgICAgKiBAcGFyYW0gY29uY3VycmVuY3kgLSBNYXhpbXVtIG51bWJlciBvZiBzaW11bHRhbmVvdXMgam9icyB0aGF0IHRoZSB3b3JrZXJzIGNhbiBoYW5kbGUuXG4gICAgICogRm9yIGluc3RhbmNlLCBzZXR0aW5nIHRoaXMgdmFsdWUgdG8gMSBlbnN1cmVzIHRoYXQgbm8gbW9yZSB0aGFuIG9uZSBqb2JcbiAgICAgKiBpcyBwcm9jZXNzZWQgYXQgYW55IGdpdmVuIHRpbWUuIElmIHRoaXMgbGltaXQgaXMgbm90IGRlZmluZWQsIHRoZXJlIHdpbGwgYmUgbm9cbiAgICAgKiByZXN0cmljdGlvbiBvbiB0aGUgbnVtYmVyIG9mIGNvbmN1cnJlbnQgam9icy5cbiAgICAgKi9cbiAgICBhc3luYyBzZXRHbG9iYWxDb25jdXJyZW5jeShjb25jdXJyZW5jeSkge1xuICAgICAgICBjb25zdCBjbGllbnQgPSBhd2FpdCB0aGlzLmNsaWVudDtcbiAgICAgICAgcmV0dXJuIGNsaWVudC5oc2V0KHRoaXMua2V5cy5tZXRhLCAnY29uY3VycmVuY3knLCBjb25jdXJyZW5jeSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEVuYWJsZSBhbmQgc2V0IHJhdGUgbGltaXQuXG4gICAgICogQHBhcmFtIG1heCAtIE1heCBudW1iZXIgb2Ygam9icyB0byBwcm9jZXNzIGluIHRoZSB0aW1lIHBlcmlvZCBzcGVjaWZpZWQgaW4gYGR1cmF0aW9uYFxuICAgICAqIEBwYXJhbSBkdXJhdGlvbiAtIFRpbWUgaW4gbWlsbGlzZWNvbmRzLiBEdXJpbmcgdGhpcyB0aW1lLCBhIG1heGltdW0gb2YgYG1heGAgam9icyB3aWxsIGJlIHByb2Nlc3NlZC5cbiAgICAgKi9cbiAgICBhc3luYyBzZXRHbG9iYWxSYXRlTGltaXQobWF4LCBkdXJhdGlvbikge1xuICAgICAgICBjb25zdCBjbGllbnQgPSBhd2FpdCB0aGlzLmNsaWVudDtcbiAgICAgICAgcmV0dXJuIGNsaWVudC5oc2V0KHRoaXMua2V5cy5tZXRhLCAnbWF4JywgbWF4LCAnZHVyYXRpb24nLCBkdXJhdGlvbik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlbW92ZSBnbG9iYWwgY29uY3VycmVuY3kgdmFsdWUuXG4gICAgICovXG4gICAgYXN5bmMgcmVtb3ZlR2xvYmFsQ29uY3VycmVuY3koKSB7XG4gICAgICAgIGNvbnN0IGNsaWVudCA9IGF3YWl0IHRoaXMuY2xpZW50O1xuICAgICAgICByZXR1cm4gY2xpZW50LmhkZWwodGhpcy5rZXlzLm1ldGEsICdjb25jdXJyZW5jeScpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZW1vdmUgZ2xvYmFsIHJhdGUgbGltaXQgdmFsdWVzLlxuICAgICAqL1xuICAgIGFzeW5jIHJlbW92ZUdsb2JhbFJhdGVMaW1pdCgpIHtcbiAgICAgICAgY29uc3QgY2xpZW50ID0gYXdhaXQgdGhpcy5jbGllbnQ7XG4gICAgICAgIHJldHVybiBjbGllbnQuaGRlbCh0aGlzLmtleXMubWV0YSwgJ21heCcsICdkdXJhdGlvbicpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGRzIGEgbmV3IGpvYiB0byB0aGUgcXVldWUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbmFtZSAtIE5hbWUgb2YgdGhlIGpvYiB0byBiZSBhZGRlZCB0byB0aGUgcXVldWUuXG4gICAgICogQHBhcmFtIGRhdGEgLSBBcmJpdHJhcnkgZGF0YSB0byBhcHBlbmQgdG8gdGhlIGpvYi5cbiAgICAgKiBAcGFyYW0gb3B0cyAtIEpvYiBvcHRpb25zIHRoYXQgYWZmZWN0cyBob3cgdGhlIGpvYiBpcyBnb2luZyB0byBiZSBwcm9jZXNzZWQuXG4gICAgICovXG4gICAgYXN5bmMgYWRkKG5hbWUsIGRhdGEsIG9wdHMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudHJhY2UoZW51bXNfMS5TcGFuS2luZC5QUk9EVUNFUiwgJ2FkZCcsIGAke3RoaXMubmFtZX0uJHtuYW1lfWAsIGFzeW5jIChzcGFuLCBzcmNQcm9wYWdhdGlvbk1lZGF0YWRhKSA9PiB7XG4gICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICBpZiAoc3JjUHJvcGFnYXRpb25NZWRhdGFkYSAmJiAhKChfYSA9IG9wdHMgPT09IG51bGwgfHwgb3B0cyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0cy50ZWxlbWV0cnkpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5vbWl0Q29udGV4dCkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0ZWxlbWV0cnkgPSB7XG4gICAgICAgICAgICAgICAgICAgIG1ldGFkYXRhOiBzcmNQcm9wYWdhdGlvbk1lZGF0YWRhLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgb3B0cyA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgb3B0cyksIHsgdGVsZW1ldHJ5IH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3Qgam9iID0gYXdhaXQgdGhpcy5hZGRKb2IobmFtZSwgZGF0YSwgb3B0cyk7XG4gICAgICAgICAgICBzcGFuID09PSBudWxsIHx8IHNwYW4gPT09IHZvaWQgMCA/IHZvaWQgMCA6IHNwYW4uc2V0QXR0cmlidXRlcyh7XG4gICAgICAgICAgICAgICAgW2VudW1zXzEuVGVsZW1ldHJ5QXR0cmlidXRlcy5Kb2JOYW1lXTogbmFtZSxcbiAgICAgICAgICAgICAgICBbZW51bXNfMS5UZWxlbWV0cnlBdHRyaWJ1dGVzLkpvYklkXTogam9iLmlkLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gam9iO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogYWRkSm9iIGlzIGEgdGVsZW1ldHJ5IGZyZWUgdmVyc2lvbiBvZiB0aGUgYWRkIG1ldGhvZCwgdXNlZnVsIGluIG9yZGVyIHRvIHdyYXAgaXRcbiAgICAgKiB3aXRoIGN1c3RvbSB0ZWxlbWV0cnkgb24gc3ViY2xhc3Nlcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBuYW1lIC0gTmFtZSBvZiB0aGUgam9iIHRvIGJlIGFkZGVkIHRvIHRoZSBxdWV1ZS5cbiAgICAgKiBAcGFyYW0gZGF0YSAtIEFyYml0cmFyeSBkYXRhIHRvIGFwcGVuZCB0byB0aGUgam9iLlxuICAgICAqIEBwYXJhbSBvcHRzIC0gSm9iIG9wdGlvbnMgdGhhdCBhZmZlY3RzIGhvdyB0aGUgam9iIGlzIGdvaW5nIHRvIGJlIHByb2Nlc3NlZC5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIEpvYlxuICAgICAqL1xuICAgIGFzeW5jIGFkZEpvYihuYW1lLCBkYXRhLCBvcHRzKSB7XG4gICAgICAgIGlmIChvcHRzICYmIG9wdHMucmVwZWF0KSB7XG4gICAgICAgICAgICBpZiAob3B0cy5yZXBlYXQuZW5kRGF0ZSkge1xuICAgICAgICAgICAgICAgIGlmICgrbmV3IERhdGUob3B0cy5yZXBlYXQuZW5kRGF0ZSkgPCBEYXRlLm5vdygpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRW5kIGRhdGUgbXVzdCBiZSBncmVhdGVyIHRoYW4gY3VycmVudCB0aW1lc3RhbXAnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gKGF3YWl0IHRoaXMucmVwZWF0KS51cGRhdGVSZXBlYXRhYmxlSm9iKG5hbWUsIGRhdGEsIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5qb2JzT3B0cyksIG9wdHMpLCB7IG92ZXJyaWRlOiB0cnVlIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3Qgam9iSWQgPSBvcHRzID09PSBudWxsIHx8IG9wdHMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdHMuam9iSWQ7XG4gICAgICAgICAgICBpZiAoam9iSWQgPT0gJzAnIHx8IChqb2JJZCA9PT0gbnVsbCB8fCBqb2JJZCA9PT0gdm9pZCAwID8gdm9pZCAwIDogam9iSWQuc3RhcnRzV2l0aCgnMDonKSkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJKb2JJZCBjYW5ub3QgYmUgJzAnIG9yIHN0YXJ0IHdpdGggMDpcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBqb2IgPSBhd2FpdCB0aGlzLkpvYi5jcmVhdGUodGhpcywgbmFtZSwgZGF0YSwgT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHRoaXMuam9ic09wdHMpLCBvcHRzKSwgeyBqb2JJZCB9KSk7XG4gICAgICAgICAgICB0aGlzLmVtaXQoJ3dhaXRpbmcnLCBqb2IpO1xuICAgICAgICAgICAgcmV0dXJuIGpvYjtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGRzIGFuIGFycmF5IG9mIGpvYnMgdG8gdGhlIHF1ZXVlLiBUaGlzIG1ldGhvZCBtYXkgYmUgZmFzdGVyIHRoYW4gYWRkaW5nXG4gICAgICogb25lIGpvYiBhdCBhIHRpbWUgaW4gYSBzZXF1ZW5jZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBqb2JzIC0gVGhlIGFycmF5IG9mIGpvYnMgdG8gYWRkIHRvIHRoZSBxdWV1ZS4gRWFjaCBqb2IgaXMgZGVmaW5lZCBieSAzXG4gICAgICogcHJvcGVydGllcywgJ25hbWUnLCAnZGF0YScgYW5kICdvcHRzJy4gVGhleSBmb2xsb3cgdGhlIHNhbWUgc2lnbmF0dXJlIGFzICdRdWV1ZS5hZGQnLlxuICAgICAqL1xuICAgIGFzeW5jIGFkZEJ1bGsoam9icykge1xuICAgICAgICByZXR1cm4gdGhpcy50cmFjZShlbnVtc18xLlNwYW5LaW5kLlBST0RVQ0VSLCAnYWRkQnVsaycsIHRoaXMubmFtZSwgYXN5bmMgKHNwYW4sIHNyY1Byb3BhZ2F0aW9uTWVkYXRhZGEpID0+IHtcbiAgICAgICAgICAgIGlmIChzcGFuKSB7XG4gICAgICAgICAgICAgICAgc3Bhbi5zZXRBdHRyaWJ1dGVzKHtcbiAgICAgICAgICAgICAgICAgICAgW2VudW1zXzEuVGVsZW1ldHJ5QXR0cmlidXRlcy5CdWxrTmFtZXNdOiBqb2JzLm1hcChqb2IgPT4gam9iLm5hbWUpLFxuICAgICAgICAgICAgICAgICAgICBbZW51bXNfMS5UZWxlbWV0cnlBdHRyaWJ1dGVzLkJ1bGtDb3VudF06IGpvYnMubGVuZ3RoLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuSm9iLmNyZWF0ZUJ1bGsodGhpcywgam9icy5tYXAoam9iID0+IHtcbiAgICAgICAgICAgICAgICB2YXIgX2EsIF9iLCBfYywgX2QsIF9lLCBfZjtcbiAgICAgICAgICAgICAgICBsZXQgdGVsZW1ldHJ5ID0gKF9hID0gam9iLm9wdHMpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS50ZWxlbWV0cnk7XG4gICAgICAgICAgICAgICAgaWYgKHNyY1Byb3BhZ2F0aW9uTWVkYXRhZGEpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgb21pdENvbnRleHQgPSAoX2MgPSAoX2IgPSBqb2Iub3B0cykgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLnRlbGVtZXRyeSkgPT09IG51bGwgfHwgX2MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jLm9taXRDb250ZXh0O1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZWxlbWV0cnlNZXRhZGF0YSA9ICgoX2UgPSAoX2QgPSBqb2Iub3B0cykgPT09IG51bGwgfHwgX2QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9kLnRlbGVtZXRyeSkgPT09IG51bGwgfHwgX2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9lLm1ldGFkYXRhKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgKCFvbWl0Q29udGV4dCAmJiBzcmNQcm9wYWdhdGlvbk1lZGF0YWRhKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRlbGVtZXRyeU1ldGFkYXRhIHx8IG9taXRDb250ZXh0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ZWxlbWV0cnkgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0YWRhdGE6IHRlbGVtZXRyeU1ldGFkYXRhLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9taXRDb250ZXh0LFxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBqb2IubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogam9iLmRhdGEsXG4gICAgICAgICAgICAgICAgICAgIG9wdHM6IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCB0aGlzLmpvYnNPcHRzKSwgam9iLm9wdHMpLCB7IGpvYklkOiAoX2YgPSBqb2Iub3B0cykgPT09IG51bGwgfHwgX2YgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9mLmpvYklkLCB0ZWxlbWV0cnkgfSksXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwc2VydHMgYSBzY2hlZHVsZXIuXG4gICAgICpcbiAgICAgKiBBIHNjaGVkdWxlciBpcyBhIGpvYiBmYWN0b3J5IHRoYXQgY3JlYXRlcyBqb2JzIGF0IGEgZ2l2ZW4gaW50ZXJ2YWwuXG4gICAgICogVXBzZXJ0aW5nIGEgc2NoZWR1bGVyIHdpbGwgY3JlYXRlIGEgbmV3IGpvYiBzY2hlZHVsZXIgb3IgdXBkYXRlIGFuIGV4aXN0aW5nIG9uZS5cbiAgICAgKiBJdCB3aWxsIGFsc28gY3JlYXRlIHRoZSBmaXJzdCBqb2IgYmFzZWQgb24gdGhlIHJlcGVhdCBvcHRpb25zIGFuZCBkZWxheWVkIGFjY29yZGluZ2x5LlxuICAgICAqXG4gICAgICogQHBhcmFtIGtleSAtIFVuaXF1ZSBrZXkgZm9yIHRoZSByZXBlYXRhYmxlIGpvYiBtZXRhLlxuICAgICAqIEBwYXJhbSByZXBlYXRPcHRzIC0gUmVwZWF0IG9wdGlvbnNcbiAgICAgKiBAcGFyYW0gam9iVGVtcGxhdGUgLSBKb2IgdGVtcGxhdGUuIElmIHByb3ZpZGVkIGl0IHdpbGwgYmUgdXNlZCBmb3IgYWxsIHRoZSBqb2JzXG4gICAgICogY3JlYXRlZCBieSB0aGUgc2NoZWR1bGVyLlxuICAgICAqXG4gICAgICogQHJldHVybnMgVGhlIG5leHQgam9iIHRvIGJlIHNjaGVkdWxlZCAod291bGQgbm9ybWFsbHkgYmUgaW4gZGVsYXllZCBzdGF0ZSkuXG4gICAgICovXG4gICAgYXN5bmMgdXBzZXJ0Sm9iU2NoZWR1bGVyKGpvYlNjaGVkdWxlcklkLCByZXBlYXRPcHRzLCBqb2JUZW1wbGF0ZSkge1xuICAgICAgICB2YXIgX2EsIF9iO1xuICAgICAgICBpZiAocmVwZWF0T3B0cy5lbmREYXRlKSB7XG4gICAgICAgICAgICBpZiAoK25ldyBEYXRlKHJlcGVhdE9wdHMuZW5kRGF0ZSkgPCBEYXRlLm5vdygpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdFbmQgZGF0ZSBtdXN0IGJlIGdyZWF0ZXIgdGhhbiBjdXJyZW50IHRpbWVzdGFtcCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiAoYXdhaXQgdGhpcy5qb2JTY2hlZHVsZXIpLnVwc2VydEpvYlNjaGVkdWxlcihqb2JTY2hlZHVsZXJJZCwgcmVwZWF0T3B0cywgKF9hID0gam9iVGVtcGxhdGUgPT09IG51bGwgfHwgam9iVGVtcGxhdGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGpvYlRlbXBsYXRlLm5hbWUpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IGpvYlNjaGVkdWxlcklkLCAoX2IgPSBqb2JUZW1wbGF0ZSA9PT0gbnVsbCB8fCBqb2JUZW1wbGF0ZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogam9iVGVtcGxhdGUuZGF0YSkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDoge30sIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5qb2JzT3B0cyksIGpvYlRlbXBsYXRlID09PSBudWxsIHx8IGpvYlRlbXBsYXRlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBqb2JUZW1wbGF0ZS5vcHRzKSwgeyBvdmVycmlkZTogdHJ1ZSB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGF1c2VzIHRoZSBwcm9jZXNzaW5nIG9mIHRoaXMgcXVldWUgZ2xvYmFsbHkuXG4gICAgICpcbiAgICAgKiBXZSB1c2UgYW4gYXRvbWljIFJFTkFNRSBvcGVyYXRpb24gb24gdGhlIHdhaXQgcXVldWUuIFNpbmNlXG4gICAgICogd2UgaGF2ZSBibG9ja2luZyBjYWxscyB3aXRoIEJSUE9QTFBVU0ggb24gdGhlIHdhaXQgcXVldWUsIGFzIGxvbmcgYXMgdGhlIHF1ZXVlXG4gICAgICogaXMgcmVuYW1lZCB0byAncGF1c2VkJywgbm8gbmV3IGpvYnMgd2lsbCBiZSBwcm9jZXNzZWQgKHRoZSBjdXJyZW50IG9uZXNcbiAgICAgKiB3aWxsIHJ1biB1bnRpbCBmaW5hbGl6ZWQpLlxuICAgICAqXG4gICAgICogQWRkaW5nIGpvYnMgcmVxdWlyZXMgYSBMVUEgc2NyaXB0IHRvIGNoZWNrIGZpcnN0IGlmIHRoZSBwYXVzZWQgbGlzdCBleGlzdFxuICAgICAqIGFuZCBpbiB0aGF0IGNhc2UgaXQgd2lsbCBhZGQgaXQgdGhlcmUgaW5zdGVhZCBvZiB0aGUgd2FpdCBsaXN0LlxuICAgICAqL1xuICAgIGFzeW5jIHBhdXNlKCkge1xuICAgICAgICBhd2FpdCB0aGlzLnRyYWNlKGVudW1zXzEuU3BhbktpbmQuSU5URVJOQUwsICdwYXVzZScsIHRoaXMubmFtZSwgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5zY3JpcHRzLnBhdXNlKHRydWUpO1xuICAgICAgICAgICAgdGhpcy5lbWl0KCdwYXVzZWQnKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENsb3NlIHRoZSBxdWV1ZSBpbnN0YW5jZS5cbiAgICAgKlxuICAgICAqL1xuICAgIGFzeW5jIGNsb3NlKCkge1xuICAgICAgICBhd2FpdCB0aGlzLnRyYWNlKGVudW1zXzEuU3BhbktpbmQuSU5URVJOQUwsICdjbG9zZScsIHRoaXMubmFtZSwgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmNsb3NpbmcpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5fcmVwZWF0KSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuX3JlcGVhdC5jbG9zZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGF3YWl0IHN1cGVyLmNsb3NlKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBPdmVycmlkZXMgdGhlIHJhdGUgbGltaXQgdG8gYmUgYWN0aXZlIGZvciB0aGUgbmV4dCBqb2JzLlxuICAgICAqXG4gICAgICogQHBhcmFtIGV4cGlyZVRpbWVNcyAtIGV4cGlyZSB0aW1lIGluIG1zIG9mIHRoaXMgcmF0ZSBsaW1pdC5cbiAgICAgKi9cbiAgICBhc3luYyByYXRlTGltaXQoZXhwaXJlVGltZU1zKSB7XG4gICAgICAgIGF3YWl0IHRoaXMudHJhY2UoZW51bXNfMS5TcGFuS2luZC5JTlRFUk5BTCwgJ3JhdGVMaW1pdCcsIHRoaXMubmFtZSwgYXN5bmMgKHNwYW4pID0+IHtcbiAgICAgICAgICAgIHNwYW4gPT09IG51bGwgfHwgc3BhbiA9PT0gdm9pZCAwID8gdm9pZCAwIDogc3Bhbi5zZXRBdHRyaWJ1dGVzKHtcbiAgICAgICAgICAgICAgICBbZW51bXNfMS5UZWxlbWV0cnlBdHRyaWJ1dGVzLlF1ZXVlUmF0ZUxpbWl0XTogZXhwaXJlVGltZU1zLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmNsaWVudC50aGVuKGNsaWVudCA9PiBjbGllbnQuc2V0KHRoaXMua2V5cy5saW1pdGVyLCBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUiwgJ1BYJywgZXhwaXJlVGltZU1zKSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXN1bWVzIHRoZSBwcm9jZXNzaW5nIG9mIHRoaXMgcXVldWUgZ2xvYmFsbHkuXG4gICAgICpcbiAgICAgKiBUaGUgbWV0aG9kIHJldmVyc2VzIHRoZSBwYXVzZSBvcGVyYXRpb24gYnkgcmVzdW1pbmcgdGhlIHByb2Nlc3Npbmcgb2YgdGhlXG4gICAgICogcXVldWUuXG4gICAgICovXG4gICAgYXN5bmMgcmVzdW1lKCkge1xuICAgICAgICBhd2FpdCB0aGlzLnRyYWNlKGVudW1zXzEuU3BhbktpbmQuSU5URVJOQUwsICdyZXN1bWUnLCB0aGlzLm5hbWUsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuc2NyaXB0cy5wYXVzZShmYWxzZSk7XG4gICAgICAgICAgICB0aGlzLmVtaXQoJ3Jlc3VtZWQnKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgcXVldWUgaXMgY3VycmVudGx5IHBhdXNlZC5cbiAgICAgKi9cbiAgICBhc3luYyBpc1BhdXNlZCgpIHtcbiAgICAgICAgY29uc3QgY2xpZW50ID0gYXdhaXQgdGhpcy5jbGllbnQ7XG4gICAgICAgIGNvbnN0IHBhdXNlZEtleUV4aXN0cyA9IGF3YWl0IGNsaWVudC5oZXhpc3RzKHRoaXMua2V5cy5tZXRhLCAncGF1c2VkJyk7XG4gICAgICAgIHJldHVybiBwYXVzZWRLZXlFeGlzdHMgPT09IDE7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgcXVldWUgaXMgY3VycmVudGx5IG1heGVkLlxuICAgICAqL1xuICAgIGlzTWF4ZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNjcmlwdHMuaXNNYXhlZCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgYWxsIHJlcGVhdGFibGUgbWV0YSBqb2JzLlxuICAgICAqXG4gICAgICogQGRlcHJlY2F0ZWQgVGhpcyBtZXRob2QgaXMgZGVwcmVjYXRlZCBhbmQgd2lsbCBiZSByZW1vdmVkIGluIHY2LiBVc2UgZ2V0Sm9iU2NoZWR1bGVycyBpbnN0ZWFkLlxuICAgICAqXG4gICAgICogQHBhcmFtIHN0YXJ0IC0gT2Zmc2V0IG9mIGZpcnN0IGpvYiB0byByZXR1cm4uXG4gICAgICogQHBhcmFtIGVuZCAtIE9mZnNldCBvZiBsYXN0IGpvYiB0byByZXR1cm4uXG4gICAgICogQHBhcmFtIGFzYyAtIERldGVybWluZSB0aGUgb3JkZXIgaW4gd2hpY2ggam9icyBhcmUgcmV0dXJuZWQgYmFzZWQgb24gdGhlaXJcbiAgICAgKiBuZXh0IGV4ZWN1dGlvbiB0aW1lLlxuICAgICAqL1xuICAgIGFzeW5jIGdldFJlcGVhdGFibGVKb2JzKHN0YXJ0LCBlbmQsIGFzYykge1xuICAgICAgICByZXR1cm4gKGF3YWl0IHRoaXMucmVwZWF0KS5nZXRSZXBlYXRhYmxlSm9icyhzdGFydCwgZW5kLCBhc2MpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgSm9iIFNjaGVkdWxlciBieSBpZFxuICAgICAqXG4gICAgICogQHBhcmFtIGlkIC0gaWRlbnRpZmllciBvZiBzY2hlZHVsZXIuXG4gICAgICovXG4gICAgYXN5bmMgZ2V0Sm9iU2NoZWR1bGVyKGlkKSB7XG4gICAgICAgIHJldHVybiAoYXdhaXQgdGhpcy5qb2JTY2hlZHVsZXIpLmdldFNjaGVkdWxlcihpZCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCBhbGwgSm9iIFNjaGVkdWxlcnNcbiAgICAgKlxuICAgICAqIEBwYXJhbSBzdGFydCAtIE9mZnNldCBvZiBmaXJzdCBzY2hlZHVsZXIgdG8gcmV0dXJuLlxuICAgICAqIEBwYXJhbSBlbmQgLSBPZmZzZXQgb2YgbGFzdCBzY2hlZHVsZXIgdG8gcmV0dXJuLlxuICAgICAqIEBwYXJhbSBhc2MgLSBEZXRlcm1pbmUgdGhlIG9yZGVyIGluIHdoaWNoIHNjaGVkdWxlcnMgYXJlIHJldHVybmVkIGJhc2VkIG9uIHRoZWlyXG4gICAgICogbmV4dCBleGVjdXRpb24gdGltZS5cbiAgICAgKi9cbiAgICBhc3luYyBnZXRKb2JTY2hlZHVsZXJzKHN0YXJ0LCBlbmQsIGFzYykge1xuICAgICAgICByZXR1cm4gKGF3YWl0IHRoaXMuam9iU2NoZWR1bGVyKS5nZXRKb2JTY2hlZHVsZXJzKHN0YXJ0LCBlbmQsIGFzYyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqXG4gICAgICogR2V0IHRoZSBudW1iZXIgb2Ygam9iIHNjaGVkdWxlcnMuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBUaGUgbnVtYmVyIG9mIGpvYiBzY2hlZHVsZXJzLlxuICAgICAqL1xuICAgIGFzeW5jIGdldEpvYlNjaGVkdWxlcnNDb3VudCgpIHtcbiAgICAgICAgcmV0dXJuIChhd2FpdCB0aGlzLmpvYlNjaGVkdWxlcikuZ2V0U2NoZWR1bGVyc0NvdW50KCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgYSByZXBlYXRhYmxlIGpvYi5cbiAgICAgKlxuICAgICAqIE5vdGU6IHlvdSBuZWVkIHRvIHVzZSB0aGUgZXhhY3Qgc2FtZSByZXBlYXRPcHRzIHdoZW4gZGVsZXRpbmcgYSByZXBlYXRhYmxlIGpvYlxuICAgICAqIHRoYW4gd2hlbiBhZGRpbmcgaXQuXG4gICAgICpcbiAgICAgKiBAZGVwcmVjYXRlZCBUaGlzIG1ldGhvZCBpcyBkZXByZWNhdGVkIGFuZCB3aWxsIGJlIHJlbW92ZWQgaW4gdjYuIFVzZSByZW1vdmVKb2JTY2hlZHVsZXIgaW5zdGVhZC5cbiAgICAgKlxuICAgICAqIEBzZWUgcmVtb3ZlUmVwZWF0YWJsZUJ5S2V5XG4gICAgICpcbiAgICAgKiBAcGFyYW0gbmFtZSAtIEpvYiBuYW1lXG4gICAgICogQHBhcmFtIHJlcGVhdE9wdHMgLSBSZXBlYXQgb3B0aW9uc1xuICAgICAqIEBwYXJhbSBqb2JJZCAtIEpvYiBpZCB0byByZW1vdmUuIElmIG5vdCBwcm92aWRlZCwgYWxsIGpvYnMgd2l0aCB0aGUgc2FtZSByZXBlYXRPcHRzXG4gICAgICogQHJldHVybnNcbiAgICAgKi9cbiAgICBhc3luYyByZW1vdmVSZXBlYXRhYmxlKG5hbWUsIHJlcGVhdE9wdHMsIGpvYklkKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRyYWNlKGVudW1zXzEuU3BhbktpbmQuSU5URVJOQUwsICdyZW1vdmVSZXBlYXRhYmxlJywgYCR7dGhpcy5uYW1lfS4ke25hbWV9YCwgYXN5bmMgKHNwYW4pID0+IHtcbiAgICAgICAgICAgIHNwYW4gPT09IG51bGwgfHwgc3BhbiA9PT0gdm9pZCAwID8gdm9pZCAwIDogc3Bhbi5zZXRBdHRyaWJ1dGVzKHtcbiAgICAgICAgICAgICAgICBbZW51bXNfMS5UZWxlbWV0cnlBdHRyaWJ1dGVzLkpvYk5hbWVdOiBuYW1lLFxuICAgICAgICAgICAgICAgIFtlbnVtc18xLlRlbGVtZXRyeUF0dHJpYnV0ZXMuSm9iSWRdOiBqb2JJZCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29uc3QgcmVwZWF0ID0gYXdhaXQgdGhpcy5yZXBlYXQ7XG4gICAgICAgICAgICBjb25zdCByZW1vdmVkID0gYXdhaXQgcmVwZWF0LnJlbW92ZVJlcGVhdGFibGUobmFtZSwgcmVwZWF0T3B0cywgam9iSWQpO1xuICAgICAgICAgICAgcmV0dXJuICFyZW1vdmVkO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBSZW1vdmVzIGEgam9iIHNjaGVkdWxlci5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBqb2JTY2hlZHVsZXJJZCAtIGlkZW50aWZpZXIgb2YgdGhlIGpvYiBzY2hlZHVsZXIuXG4gICAgICpcbiAgICAgKiBAcmV0dXJuc1xuICAgICAqL1xuICAgIGFzeW5jIHJlbW92ZUpvYlNjaGVkdWxlcihqb2JTY2hlZHVsZXJJZCkge1xuICAgICAgICBjb25zdCBqb2JTY2hlZHVsZXIgPSBhd2FpdCB0aGlzLmpvYlNjaGVkdWxlcjtcbiAgICAgICAgY29uc3QgcmVtb3ZlZCA9IGF3YWl0IGpvYlNjaGVkdWxlci5yZW1vdmVKb2JTY2hlZHVsZXIoam9iU2NoZWR1bGVySWQpO1xuICAgICAgICByZXR1cm4gIXJlbW92ZWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgYSBkZWJvdW5jZSBrZXkuXG4gICAgICogQGRlcHJlY2F0ZWQgdXNlIHJlbW92ZURlZHVwbGljYXRpb25LZXlcbiAgICAgKlxuICAgICAqIEBwYXJhbSBpZCAtIGRlYm91bmNlIGlkZW50aWZpZXJcbiAgICAgKi9cbiAgICBhc3luYyByZW1vdmVEZWJvdW5jZUtleShpZCkge1xuICAgICAgICByZXR1cm4gdGhpcy50cmFjZShlbnVtc18xLlNwYW5LaW5kLklOVEVSTkFMLCAncmVtb3ZlRGVib3VuY2VLZXknLCBgJHt0aGlzLm5hbWV9YCwgYXN5bmMgKHNwYW4pID0+IHtcbiAgICAgICAgICAgIHNwYW4gPT09IG51bGwgfHwgc3BhbiA9PT0gdm9pZCAwID8gdm9pZCAwIDogc3Bhbi5zZXRBdHRyaWJ1dGVzKHtcbiAgICAgICAgICAgICAgICBbZW51bXNfMS5UZWxlbWV0cnlBdHRyaWJ1dGVzLkpvYktleV06IGlkLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb25zdCBjbGllbnQgPSBhd2FpdCB0aGlzLmNsaWVudDtcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCBjbGllbnQuZGVsKGAke3RoaXMua2V5cy5kZX06JHtpZH1gKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgYSBkZWR1cGxpY2F0aW9uIGtleS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBpZCAtIGlkZW50aWZpZXJcbiAgICAgKi9cbiAgICBhc3luYyByZW1vdmVEZWR1cGxpY2F0aW9uS2V5KGlkKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRyYWNlKGVudW1zXzEuU3BhbktpbmQuSU5URVJOQUwsICdyZW1vdmVEZWR1cGxpY2F0aW9uS2V5JywgYCR7dGhpcy5uYW1lfWAsIGFzeW5jIChzcGFuKSA9PiB7XG4gICAgICAgICAgICBzcGFuID09PSBudWxsIHx8IHNwYW4gPT09IHZvaWQgMCA/IHZvaWQgMCA6IHNwYW4uc2V0QXR0cmlidXRlcyh7XG4gICAgICAgICAgICAgICAgW2VudW1zXzEuVGVsZW1ldHJ5QXR0cmlidXRlcy5EZWR1cGxpY2F0aW9uS2V5XTogaWQsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnN0IGNsaWVudCA9IGF3YWl0IHRoaXMuY2xpZW50O1xuICAgICAgICAgICAgcmV0dXJuIGNsaWVudC5kZWwoYCR7dGhpcy5rZXlzLmRlfToke2lkfWApO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyByYXRlIGxpbWl0IGtleS5cbiAgICAgKi9cbiAgICBhc3luYyByZW1vdmVSYXRlTGltaXRLZXkoKSB7XG4gICAgICAgIGNvbnN0IGNsaWVudCA9IGF3YWl0IHRoaXMuY2xpZW50O1xuICAgICAgICByZXR1cm4gY2xpZW50LmRlbCh0aGlzLmtleXMubGltaXRlcik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgYSByZXBlYXRhYmxlIGpvYiBieSBpdHMga2V5LiBOb3RlIHRoYXQgdGhlIGtleSBpcyB0aGUgb25lIHVzZWRcbiAgICAgKiB0byBzdG9yZSB0aGUgcmVwZWF0YWJsZSBqb2IgbWV0YWRhdGEgYW5kIG5vdCBvbmUgb2YgdGhlIGpvYiBpdGVyYXRpb25zXG4gICAgICogdGhlbXNlbHZlcy4gWW91IGNhbiB1c2UgXCJnZXRSZXBlYXRhYmxlSm9ic1wiIGluIG9yZGVyIHRvIGdldCB0aGUga2V5cy5cbiAgICAgKlxuICAgICAqIEBzZWUgZ2V0UmVwZWF0YWJsZUpvYnNcbiAgICAgKlxuICAgICAqIEBkZXByZWNhdGVkIFRoaXMgbWV0aG9kIGlzIGRlcHJlY2F0ZWQgYW5kIHdpbGwgYmUgcmVtb3ZlZCBpbiB2Ni4gVXNlIHJlbW92ZUpvYlNjaGVkdWxlciBpbnN0ZWFkLlxuICAgICAqXG4gICAgICogQHBhcmFtIHJlcGVhdEpvYktleSAtIFRvIHRoZSByZXBlYXRhYmxlIGpvYi5cbiAgICAgKiBAcmV0dXJuc1xuICAgICAqL1xuICAgIGFzeW5jIHJlbW92ZVJlcGVhdGFibGVCeUtleShrZXkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudHJhY2UoZW51bXNfMS5TcGFuS2luZC5JTlRFUk5BTCwgJ3JlbW92ZVJlcGVhdGFibGVCeUtleScsIGAke3RoaXMubmFtZX1gLCBhc3luYyAoc3BhbikgPT4ge1xuICAgICAgICAgICAgc3BhbiA9PT0gbnVsbCB8fCBzcGFuID09PSB2b2lkIDAgPyB2b2lkIDAgOiBzcGFuLnNldEF0dHJpYnV0ZXMoe1xuICAgICAgICAgICAgICAgIFtlbnVtc18xLlRlbGVtZXRyeUF0dHJpYnV0ZXMuSm9iS2V5XToga2V5LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb25zdCByZXBlYXQgPSBhd2FpdCB0aGlzLnJlcGVhdDtcbiAgICAgICAgICAgIGNvbnN0IHJlbW92ZWQgPSBhd2FpdCByZXBlYXQucmVtb3ZlUmVwZWF0YWJsZUJ5S2V5KGtleSk7XG4gICAgICAgICAgICByZXR1cm4gIXJlbW92ZWQ7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIHRoZSBnaXZlbiBqb2IgZnJvbSB0aGUgcXVldWUgYXMgd2VsbCBhcyBhbGwgaXRzXG4gICAgICogZGVwZW5kZW5jaWVzLlxuICAgICAqXG4gICAgICogQHBhcmFtIGpvYklkIC0gVGhlIGlkIG9mIHRoZSBqb2IgdG8gcmVtb3ZlXG4gICAgICogQHBhcmFtIG9wdHMgLSBPcHRpb25zIHRvIHJlbW92ZSBhIGpvYlxuICAgICAqIEByZXR1cm5zIDEgaWYgaXQgbWFuYWdlZCB0byByZW1vdmUgdGhlIGpvYiBvciAwIGlmIHRoZSBqb2Igb3JcbiAgICAgKiBhbnkgb2YgaXRzIGRlcGVuZGVuY2llcyB3ZXJlIGxvY2tlZC5cbiAgICAgKi9cbiAgICBhc3luYyByZW1vdmUoam9iSWQsIHsgcmVtb3ZlQ2hpbGRyZW4gPSB0cnVlIH0gPSB7fSkge1xuICAgICAgICByZXR1cm4gdGhpcy50cmFjZShlbnVtc18xLlNwYW5LaW5kLklOVEVSTkFMLCAncmVtb3ZlJywgdGhpcy5uYW1lLCBhc3luYyAoc3BhbikgPT4ge1xuICAgICAgICAgICAgc3BhbiA9PT0gbnVsbCB8fCBzcGFuID09PSB2b2lkIDAgPyB2b2lkIDAgOiBzcGFuLnNldEF0dHJpYnV0ZXMoe1xuICAgICAgICAgICAgICAgIFtlbnVtc18xLlRlbGVtZXRyeUF0dHJpYnV0ZXMuSm9iSWRdOiBqb2JJZCxcbiAgICAgICAgICAgICAgICBbZW51bXNfMS5UZWxlbWV0cnlBdHRyaWJ1dGVzLkpvYk9wdGlvbnNdOiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgICAgIHJlbW92ZUNoaWxkcmVuLFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb25zdCBjb2RlID0gYXdhaXQgdGhpcy5zY3JpcHRzLnJlbW92ZShqb2JJZCwgcmVtb3ZlQ2hpbGRyZW4pO1xuICAgICAgICAgICAgaWYgKGNvZGUgPT09IDEpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ3JlbW92ZWQnLCBqb2JJZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY29kZTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwZGF0ZXMgdGhlIGdpdmVuIGpvYidzIHByb2dyZXNzLlxuICAgICAqXG4gICAgICogQHBhcmFtIGpvYklkIC0gVGhlIGlkIG9mIHRoZSBqb2IgdG8gdXBkYXRlXG4gICAgICogQHBhcmFtIHByb2dyZXNzIC0gTnVtYmVyIG9yIG9iamVjdCB0byBiZSBzYXZlZCBhcyBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBhc3luYyB1cGRhdGVKb2JQcm9ncmVzcyhqb2JJZCwgcHJvZ3Jlc3MpIHtcbiAgICAgICAgYXdhaXQgdGhpcy50cmFjZShlbnVtc18xLlNwYW5LaW5kLklOVEVSTkFMLCAndXBkYXRlSm9iUHJvZ3Jlc3MnLCB0aGlzLm5hbWUsIGFzeW5jIChzcGFuKSA9PiB7XG4gICAgICAgICAgICBzcGFuID09PSBudWxsIHx8IHNwYW4gPT09IHZvaWQgMCA/IHZvaWQgMCA6IHNwYW4uc2V0QXR0cmlidXRlcyh7XG4gICAgICAgICAgICAgICAgW2VudW1zXzEuVGVsZW1ldHJ5QXR0cmlidXRlcy5Kb2JJZF06IGpvYklkLFxuICAgICAgICAgICAgICAgIFtlbnVtc18xLlRlbGVtZXRyeUF0dHJpYnV0ZXMuSm9iUHJvZ3Jlc3NdOiBKU09OLnN0cmluZ2lmeShwcm9ncmVzcyksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuc2NyaXB0cy51cGRhdGVQcm9ncmVzcyhqb2JJZCwgcHJvZ3Jlc3MpO1xuICAgICAgICAgICAgdGhpcy5lbWl0KCdwcm9ncmVzcycsIGpvYklkLCBwcm9ncmVzcyk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBMb2dzIG9uZSByb3cgb2Ygam9iJ3MgbG9nIGRhdGEuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gam9iSWQgLSBUaGUgam9iIGlkIHRvIGxvZyBhZ2FpbnN0LlxuICAgICAqIEBwYXJhbSBsb2dSb3cgLSBTdHJpbmcgd2l0aCBsb2cgZGF0YSB0byBiZSBsb2dnZWQuXG4gICAgICogQHBhcmFtIGtlZXBMb2dzIC0gTWF4IG51bWJlciBvZiBsb2cgZW50cmllcyB0byBrZWVwICgwIGZvciB1bmxpbWl0ZWQpLlxuICAgICAqXG4gICAgICogQHJldHVybnMgVGhlIHRvdGFsIG51bWJlciBvZiBsb2cgZW50cmllcyBmb3IgdGhpcyBqb2Igc28gZmFyLlxuICAgICAqL1xuICAgIGFzeW5jIGFkZEpvYkxvZyhqb2JJZCwgbG9nUm93LCBrZWVwTG9ncykge1xuICAgICAgICByZXR1cm4gam9iXzEuSm9iLmFkZEpvYkxvZyh0aGlzLCBqb2JJZCwgbG9nUm93LCBrZWVwTG9ncyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERyYWlucyB0aGUgcXVldWUsIGkuZS4sIHJlbW92ZXMgYWxsIGpvYnMgdGhhdCBhcmUgd2FpdGluZ1xuICAgICAqIG9yIGRlbGF5ZWQsIGJ1dCBub3QgYWN0aXZlLCBjb21wbGV0ZWQgb3IgZmFpbGVkLlxuICAgICAqXG4gICAgICogQHBhcmFtIGRlbGF5ZWQgLSBQYXNzIHRydWUgaWYgaXQgc2hvdWxkIGFsc28gY2xlYW4gdGhlXG4gICAgICogZGVsYXllZCBqb2JzLlxuICAgICAqL1xuICAgIGFzeW5jIGRyYWluKGRlbGF5ZWQgPSBmYWxzZSkge1xuICAgICAgICBhd2FpdCB0aGlzLnRyYWNlKGVudW1zXzEuU3BhbktpbmQuSU5URVJOQUwsICdkcmFpbicsIHRoaXMubmFtZSwgYXN5bmMgKHNwYW4pID0+IHtcbiAgICAgICAgICAgIHNwYW4gPT09IG51bGwgfHwgc3BhbiA9PT0gdm9pZCAwID8gdm9pZCAwIDogc3Bhbi5zZXRBdHRyaWJ1dGVzKHtcbiAgICAgICAgICAgICAgICBbZW51bXNfMS5UZWxlbWV0cnlBdHRyaWJ1dGVzLlF1ZXVlRHJhaW5EZWxheV06IGRlbGF5ZWQsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuc2NyaXB0cy5kcmFpbihkZWxheWVkKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENsZWFucyBqb2JzIGZyb20gYSBxdWV1ZS4gU2ltaWxhciB0byBkcmFpbiBidXQga2VlcHMgam9icyB3aXRoaW4gYSBjZXJ0YWluXG4gICAgICogZ3JhY2UgcGVyaW9kLlxuICAgICAqXG4gICAgICogQHBhcmFtIGdyYWNlIC0gVGhlIGdyYWNlIHBlcmlvZCBpbiBtaWxsaXNlY29uZHNcbiAgICAgKiBAcGFyYW0gbGltaXQgLSBNYXggbnVtYmVyIG9mIGpvYnMgdG8gY2xlYW5cbiAgICAgKiBAcGFyYW0gdHlwZSAtIFRoZSB0eXBlIG9mIGpvYiB0byBjbGVhblxuICAgICAqIFBvc3NpYmxlIHZhbHVlcyBhcmUgY29tcGxldGVkLCB3YWl0LCBhY3RpdmUsIHBhdXNlZCwgZGVsYXllZCwgZmFpbGVkLiBEZWZhdWx0cyB0byBjb21wbGV0ZWQuXG4gICAgICogQHJldHVybnMgSWQgam9icyBmcm9tIHRoZSBkZWxldGVkIHJlY29yZHNcbiAgICAgKi9cbiAgICBhc3luYyBjbGVhbihncmFjZSwgbGltaXQsIHR5cGUgPSAnY29tcGxldGVkJykge1xuICAgICAgICByZXR1cm4gdGhpcy50cmFjZShlbnVtc18xLlNwYW5LaW5kLklOVEVSTkFMLCAnY2xlYW4nLCB0aGlzLm5hbWUsIGFzeW5jIChzcGFuKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBtYXhDb3VudCA9IGxpbWl0IHx8IEluZmluaXR5O1xuICAgICAgICAgICAgY29uc3QgbWF4Q291bnRQZXJDYWxsID0gTWF0aC5taW4oMTAwMDAsIG1heENvdW50KTtcbiAgICAgICAgICAgIGNvbnN0IHRpbWVzdGFtcCA9IERhdGUubm93KCkgLSBncmFjZTtcbiAgICAgICAgICAgIGxldCBkZWxldGVkQ291bnQgPSAwO1xuICAgICAgICAgICAgY29uc3QgZGVsZXRlZEpvYnNJZHMgPSBbXTtcbiAgICAgICAgICAgIC8vIE5vcm1hbGl6ZSAnd2FpdGluZycgdG8gJ3dhaXQnIGZvciBjb25zaXN0ZW5jeSB3aXRoIGludGVybmFsIFJlZGlzIGtleXNcbiAgICAgICAgICAgIGNvbnN0IG5vcm1hbGl6ZWRUeXBlID0gdHlwZSA9PT0gJ3dhaXRpbmcnID8gJ3dhaXQnIDogdHlwZTtcbiAgICAgICAgICAgIHdoaWxlIChkZWxldGVkQ291bnQgPCBtYXhDb3VudCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGpvYnNJZHMgPSBhd2FpdCB0aGlzLnNjcmlwdHMuY2xlYW5Kb2JzSW5TZXQobm9ybWFsaXplZFR5cGUsIHRpbWVzdGFtcCwgbWF4Q291bnRQZXJDYWxsKTtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2NsZWFuZWQnLCBqb2JzSWRzLCBub3JtYWxpemVkVHlwZSk7XG4gICAgICAgICAgICAgICAgZGVsZXRlZENvdW50ICs9IGpvYnNJZHMubGVuZ3RoO1xuICAgICAgICAgICAgICAgIGRlbGV0ZWRKb2JzSWRzLnB1c2goLi4uam9ic0lkcyk7XG4gICAgICAgICAgICAgICAgaWYgKGpvYnNJZHMubGVuZ3RoIDwgbWF4Q291bnRQZXJDYWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNwYW4gPT09IG51bGwgfHwgc3BhbiA9PT0gdm9pZCAwID8gdm9pZCAwIDogc3Bhbi5zZXRBdHRyaWJ1dGVzKHtcbiAgICAgICAgICAgICAgICBbZW51bXNfMS5UZWxlbWV0cnlBdHRyaWJ1dGVzLlF1ZXVlR3JhY2VdOiBncmFjZSxcbiAgICAgICAgICAgICAgICBbZW51bXNfMS5UZWxlbWV0cnlBdHRyaWJ1dGVzLkpvYlR5cGVdOiB0eXBlLFxuICAgICAgICAgICAgICAgIFtlbnVtc18xLlRlbGVtZXRyeUF0dHJpYnV0ZXMuUXVldWVDbGVhbkxpbWl0XTogbWF4Q291bnQsXG4gICAgICAgICAgICAgICAgW2VudW1zXzEuVGVsZW1ldHJ5QXR0cmlidXRlcy5Kb2JJZHNdOiBkZWxldGVkSm9ic0lkcyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIGRlbGV0ZWRKb2JzSWRzO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29tcGxldGVseSBkZXN0cm95cyB0aGUgcXVldWUgYW5kIGFsbCBvZiBpdHMgY29udGVudHMgaXJyZXZlcnNpYmx5LlxuICAgICAqIFRoaXMgbWV0aG9kIHdpbGwgKnBhdXNlKiB0aGUgcXVldWUgYW5kIHJlcXVpcmVzIHRoYXQgdGhlcmUgYXJlIG5vXG4gICAgICogYWN0aXZlIGpvYnMuIEl0IGlzIHBvc3NpYmxlIHRvIGJ5cGFzcyB0aGlzIHJlcXVpcmVtZW50LCBpLmUuIG5vdFxuICAgICAqIGhhdmluZyBhY3RpdmUgam9icyB1c2luZyB0aGUgXCJmb3JjZVwiIG9wdGlvbi5cbiAgICAgKlxuICAgICAqIE5vdGU6IFRoaXMgb3BlcmF0aW9uIHJlcXVpcmVzIHRvIGl0ZXJhdGUgb24gYWxsIHRoZSBqb2JzIHN0b3JlZCBpbiB0aGUgcXVldWVcbiAgICAgKiBhbmQgY2FuIGJlIHNsb3cgZm9yIHZlcnkgbGFyZ2UgcXVldWVzLlxuICAgICAqXG4gICAgICogQHBhcmFtIG9wdHMgLSBPYmxpdGVyYXRlIG9wdGlvbnMuXG4gICAgICovXG4gICAgYXN5bmMgb2JsaXRlcmF0ZShvcHRzKSB7XG4gICAgICAgIGF3YWl0IHRoaXMudHJhY2UoZW51bXNfMS5TcGFuS2luZC5JTlRFUk5BTCwgJ29ibGl0ZXJhdGUnLCB0aGlzLm5hbWUsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF1c2UoKTtcbiAgICAgICAgICAgIGxldCBjdXJzb3IgPSAwO1xuICAgICAgICAgICAgZG8ge1xuICAgICAgICAgICAgICAgIGN1cnNvciA9IGF3YWl0IHRoaXMuc2NyaXB0cy5vYmxpdGVyYXRlKE9iamVjdC5hc3NpZ24oeyBmb3JjZTogZmFsc2UsIGNvdW50OiAxMDAwIH0sIG9wdHMpKTtcbiAgICAgICAgICAgIH0gd2hpbGUgKGN1cnNvcik7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXRyeSBhbGwgdGhlIGZhaWxlZCBvciBjb21wbGV0ZWQgam9icy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvcHRzIC0gQW4gb2JqZWN0IHdpdGggdGhlIGZvbGxvd2luZyBwcm9wZXJ0aWVzOlxuICAgICAqICAgLSBjb3VudCAgbnVtYmVyIHRvIGxpbWl0IGhvdyBtYW55IGpvYnMgd2lsbCBiZSBtb3ZlZCB0byB3YWl0IHN0YXR1cyBwZXIgaXRlcmF0aW9uLFxuICAgICAqICAgLSBzdGF0ZSAgZmFpbGVkIGJ5IGRlZmF1bHQgb3IgY29tcGxldGVkLlxuICAgICAqICAgLSB0aW1lc3RhbXAgZnJvbSB3aGljaCB0aW1lc3RhbXAgdG8gc3RhcnQgbW92aW5nIGpvYnMgdG8gd2FpdCBzdGF0dXMsIGRlZmF1bHQgRGF0ZS5ub3coKS5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zXG4gICAgICovXG4gICAgYXN5bmMgcmV0cnlKb2JzKG9wdHMgPSB7fSkge1xuICAgICAgICBhd2FpdCB0aGlzLnRyYWNlKGVudW1zXzEuU3BhbktpbmQuUFJPRFVDRVIsICdyZXRyeUpvYnMnLCB0aGlzLm5hbWUsIGFzeW5jIChzcGFuKSA9PiB7XG4gICAgICAgICAgICBzcGFuID09PSBudWxsIHx8IHNwYW4gPT09IHZvaWQgMCA/IHZvaWQgMCA6IHNwYW4uc2V0QXR0cmlidXRlcyh7XG4gICAgICAgICAgICAgICAgW2VudW1zXzEuVGVsZW1ldHJ5QXR0cmlidXRlcy5RdWV1ZU9wdGlvbnNdOiBKU09OLnN0cmluZ2lmeShvcHRzKSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgbGV0IGN1cnNvciA9IDA7XG4gICAgICAgICAgICBkbyB7XG4gICAgICAgICAgICAgICAgY3Vyc29yID0gYXdhaXQgdGhpcy5zY3JpcHRzLnJldHJ5Sm9icyhvcHRzLnN0YXRlLCBvcHRzLmNvdW50LCBvcHRzLnRpbWVzdGFtcCk7XG4gICAgICAgICAgICB9IHdoaWxlIChjdXJzb3IpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUHJvbW90ZSBhbGwgdGhlIGRlbGF5ZWQgam9icy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvcHRzIC0gQW4gb2JqZWN0IHdpdGggdGhlIGZvbGxvd2luZyBwcm9wZXJ0aWVzOlxuICAgICAqICAgLSBjb3VudCAgbnVtYmVyIHRvIGxpbWl0IGhvdyBtYW55IGpvYnMgd2lsbCBiZSBtb3ZlZCB0byB3YWl0IHN0YXR1cyBwZXIgaXRlcmF0aW9uXG4gICAgICpcbiAgICAgKiBAcmV0dXJuc1xuICAgICAqL1xuICAgIGFzeW5jIHByb21vdGVKb2JzKG9wdHMgPSB7fSkge1xuICAgICAgICBhd2FpdCB0aGlzLnRyYWNlKGVudW1zXzEuU3BhbktpbmQuSU5URVJOQUwsICdwcm9tb3RlSm9icycsIHRoaXMubmFtZSwgYXN5bmMgKHNwYW4pID0+IHtcbiAgICAgICAgICAgIHNwYW4gPT09IG51bGwgfHwgc3BhbiA9PT0gdm9pZCAwID8gdm9pZCAwIDogc3Bhbi5zZXRBdHRyaWJ1dGVzKHtcbiAgICAgICAgICAgICAgICBbZW51bXNfMS5UZWxlbWV0cnlBdHRyaWJ1dGVzLlF1ZXVlT3B0aW9uc106IEpTT04uc3RyaW5naWZ5KG9wdHMpLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBsZXQgY3Vyc29yID0gMDtcbiAgICAgICAgICAgIGRvIHtcbiAgICAgICAgICAgICAgICBjdXJzb3IgPSBhd2FpdCB0aGlzLnNjcmlwdHMucHJvbW90ZUpvYnMob3B0cy5jb3VudCk7XG4gICAgICAgICAgICB9IHdoaWxlIChjdXJzb3IpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVHJpbSB0aGUgZXZlbnQgc3RyZWFtIHRvIGFuIGFwcHJveGltYXRlbHkgbWF4TGVuZ3RoLlxuICAgICAqXG4gICAgICogQHBhcmFtIG1heExlbmd0aCAtXG4gICAgICovXG4gICAgYXN5bmMgdHJpbUV2ZW50cyhtYXhMZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudHJhY2UoZW51bXNfMS5TcGFuS2luZC5JTlRFUk5BTCwgJ3RyaW1FdmVudHMnLCB0aGlzLm5hbWUsIGFzeW5jIChzcGFuKSA9PiB7XG4gICAgICAgICAgICBzcGFuID09PSBudWxsIHx8IHNwYW4gPT09IHZvaWQgMCA/IHZvaWQgMCA6IHNwYW4uc2V0QXR0cmlidXRlcyh7XG4gICAgICAgICAgICAgICAgW2VudW1zXzEuVGVsZW1ldHJ5QXR0cmlidXRlcy5RdWV1ZUV2ZW50TWF4TGVuZ3RoXTogbWF4TGVuZ3RoLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb25zdCBjbGllbnQgPSBhd2FpdCB0aGlzLmNsaWVudDtcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCBjbGllbnQueHRyaW0odGhpcy5rZXlzLmV2ZW50cywgJ01BWExFTicsICd+JywgbWF4TGVuZ3RoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERlbGV0ZSBvbGQgcHJpb3JpdHkgaGVscGVyIGtleS5cbiAgICAgKi9cbiAgICBhc3luYyByZW1vdmVEZXByZWNhdGVkUHJpb3JpdHlLZXkoKSB7XG4gICAgICAgIGNvbnN0IGNsaWVudCA9IGF3YWl0IHRoaXMuY2xpZW50O1xuICAgICAgICByZXR1cm4gY2xpZW50LmRlbCh0aGlzLnRvS2V5KCdwcmlvcml0eScpKTtcbiAgICB9XG59XG5leHBvcnRzLlF1ZXVlID0gUXVldWU7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1xdWV1ZS5qcy5tYXAiXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJRdWV1ZSIsInV1aWRfMSIsInJlcXVpcmUiLCJqb2JfMSIsInF1ZXVlX2dldHRlcnNfMSIsInJlcGVhdF8xIiwiZW51bXNfMSIsImpvYl9zY2hlZHVsZXJfMSIsInZlcnNpb25fMSIsIlF1ZXVlR2V0dGVycyIsImNvbnN0cnVjdG9yIiwibmFtZSIsIm9wdHMiLCJDb25uZWN0aW9uIiwiX2EiLCJhc3NpZ24iLCJ0b2tlbiIsInY0IiwibGliTmFtZSIsImpvYnNPcHRzIiwiZGVmYXVsdEpvYk9wdGlvbnMiLCJ3YWl0VW50aWxSZWFkeSIsInRoZW4iLCJjbGllbnQiLCJjbG9zaW5nIiwic2tpcE1ldGFzVXBkYXRlIiwiaG1zZXQiLCJrZXlzIiwibWV0YSIsIm1ldGFWYWx1ZXMiLCJjYXRjaCIsImVyciIsImVtaXQiLCJldmVudCIsImFyZ3MiLCJvZmYiLCJldmVudE5hbWUiLCJsaXN0ZW5lciIsIm9uIiwib25jZSIsIl9iIiwiX2MiLCJfZCIsInN0cmVhbXMiLCJldmVudHMiLCJtYXhMZW4iLCJ2ZXJzaW9uIiwiZ2V0VmVyc2lvbiIsImhnZXQiLCJyZXBlYXQiLCJQcm9taXNlIiwicmVzb2x2ZSIsIl9yZXBlYXQiLCJSZXBlYXQiLCJjb25uZWN0aW9uIiwiZSIsImJpbmQiLCJqb2JTY2hlZHVsZXIiLCJfam9iU2NoZWR1bGVyIiwiSm9iU2NoZWR1bGVyIiwic2V0R2xvYmFsQ29uY3VycmVuY3kiLCJjb25jdXJyZW5jeSIsImhzZXQiLCJzZXRHbG9iYWxSYXRlTGltaXQiLCJtYXgiLCJkdXJhdGlvbiIsInJlbW92ZUdsb2JhbENvbmN1cnJlbmN5IiwiaGRlbCIsInJlbW92ZUdsb2JhbFJhdGVMaW1pdCIsImFkZCIsImRhdGEiLCJ0cmFjZSIsIlNwYW5LaW5kIiwiUFJPRFVDRVIiLCJzcGFuIiwic3JjUHJvcGFnYXRpb25NZWRhdGFkYSIsInRlbGVtZXRyeSIsIm9taXRDb250ZXh0IiwibWV0YWRhdGEiLCJqb2IiLCJhZGRKb2IiLCJzZXRBdHRyaWJ1dGVzIiwiVGVsZW1ldHJ5QXR0cmlidXRlcyIsIkpvYk5hbWUiLCJKb2JJZCIsImlkIiwiZW5kRGF0ZSIsIkRhdGUiLCJub3ciLCJFcnJvciIsInVwZGF0ZVJlcGVhdGFibGVKb2IiLCJvdmVycmlkZSIsImpvYklkIiwic3RhcnRzV2l0aCIsIkpvYiIsImNyZWF0ZSIsImFkZEJ1bGsiLCJqb2JzIiwiQnVsa05hbWVzIiwibWFwIiwiQnVsa0NvdW50IiwibGVuZ3RoIiwiY3JlYXRlQnVsayIsIl9lIiwiX2YiLCJ0ZWxlbWV0cnlNZXRhZGF0YSIsInVwc2VydEpvYlNjaGVkdWxlciIsImpvYlNjaGVkdWxlcklkIiwicmVwZWF0T3B0cyIsImpvYlRlbXBsYXRlIiwicGF1c2UiLCJJTlRFUk5BTCIsInNjcmlwdHMiLCJjbG9zZSIsInJhdGVMaW1pdCIsImV4cGlyZVRpbWVNcyIsIlF1ZXVlUmF0ZUxpbWl0Iiwic2V0IiwibGltaXRlciIsIk51bWJlciIsIk1BWF9TQUZFX0lOVEVHRVIiLCJyZXN1bWUiLCJpc1BhdXNlZCIsInBhdXNlZEtleUV4aXN0cyIsImhleGlzdHMiLCJpc01heGVkIiwiZ2V0UmVwZWF0YWJsZUpvYnMiLCJzdGFydCIsImVuZCIsImFzYyIsImdldEpvYlNjaGVkdWxlciIsImdldFNjaGVkdWxlciIsImdldEpvYlNjaGVkdWxlcnMiLCJnZXRKb2JTY2hlZHVsZXJzQ291bnQiLCJnZXRTY2hlZHVsZXJzQ291bnQiLCJyZW1vdmVSZXBlYXRhYmxlIiwicmVtb3ZlZCIsInJlbW92ZUpvYlNjaGVkdWxlciIsInJlbW92ZURlYm91bmNlS2V5IiwiSm9iS2V5IiwiZGVsIiwiZGUiLCJyZW1vdmVEZWR1cGxpY2F0aW9uS2V5IiwiRGVkdXBsaWNhdGlvbktleSIsInJlbW92ZVJhdGVMaW1pdEtleSIsInJlbW92ZVJlcGVhdGFibGVCeUtleSIsImtleSIsInJlbW92ZSIsInJlbW92ZUNoaWxkcmVuIiwiSm9iT3B0aW9ucyIsIkpTT04iLCJzdHJpbmdpZnkiLCJjb2RlIiwidXBkYXRlSm9iUHJvZ3Jlc3MiLCJwcm9ncmVzcyIsIkpvYlByb2dyZXNzIiwidXBkYXRlUHJvZ3Jlc3MiLCJhZGRKb2JMb2ciLCJsb2dSb3ciLCJrZWVwTG9ncyIsImRyYWluIiwiZGVsYXllZCIsIlF1ZXVlRHJhaW5EZWxheSIsImNsZWFuIiwiZ3JhY2UiLCJsaW1pdCIsInR5cGUiLCJtYXhDb3VudCIsIkluZmluaXR5IiwibWF4Q291bnRQZXJDYWxsIiwiTWF0aCIsIm1pbiIsInRpbWVzdGFtcCIsImRlbGV0ZWRDb3VudCIsImRlbGV0ZWRKb2JzSWRzIiwibm9ybWFsaXplZFR5cGUiLCJqb2JzSWRzIiwiY2xlYW5Kb2JzSW5TZXQiLCJwdXNoIiwiUXVldWVHcmFjZSIsIkpvYlR5cGUiLCJRdWV1ZUNsZWFuTGltaXQiLCJKb2JJZHMiLCJvYmxpdGVyYXRlIiwiY3Vyc29yIiwiZm9yY2UiLCJjb3VudCIsInJldHJ5Sm9icyIsIlF1ZXVlT3B0aW9ucyIsInN0YXRlIiwicHJvbW90ZUpvYnMiLCJ0cmltRXZlbnRzIiwibWF4TGVuZ3RoIiwiUXVldWVFdmVudE1heExlbmd0aCIsInh0cmltIiwicmVtb3ZlRGVwcmVjYXRlZFByaW9yaXR5S2V5IiwidG9LZXkiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/classes/queue.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/classes/redis-connection.js":
/*!******************************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/classes/redis-connection.js ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.RedisConnection = void 0;\nconst tslib_1 = __webpack_require__(/*! tslib */ \"(rsc)/./node_modules/tslib/tslib.es6.mjs\");\nconst events_1 = __webpack_require__(/*! events */ \"events\");\nconst ioredis_1 = __webpack_require__(/*! ioredis */ \"(rsc)/./node_modules/ioredis/built/index.js\");\n// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n// @ts-ignore\nconst utils_1 = __webpack_require__(/*! ioredis/built/utils */ \"(rsc)/./node_modules/ioredis/built/utils/index.js\");\nconst utils_2 = __webpack_require__(/*! ../utils */ \"(rsc)/./node_modules/bullmq/dist/cjs/utils/index.js\");\nconst version_1 = __webpack_require__(/*! ../version */ \"(rsc)/./node_modules/bullmq/dist/cjs/version.js\");\nconst scripts = __webpack_require__(/*! ../scripts */ \"(rsc)/./node_modules/bullmq/dist/cjs/scripts/index.js\");\nconst overrideMessage = [\n    \"BullMQ: WARNING! Your redis options maxRetriesPerRequest must be null\",\n    \"and will be overridden by BullMQ.\"\n].join(\" \");\nconst deprecationMessage = \"BullMQ: Your redis options maxRetriesPerRequest must be null.\";\nclass RedisConnection extends events_1.EventEmitter {\n    constructor(opts, extraOptions){\n        super();\n        this.extraOptions = extraOptions;\n        this.capabilities = {\n            canDoubleTimeout: false,\n            canBlockFor1Ms: true\n        };\n        this.status = \"initializing\";\n        this.packageVersion = version_1.version;\n        // Set extra options defaults\n        this.extraOptions = Object.assign({\n            shared: false,\n            blocking: true,\n            skipVersionCheck: false,\n            skipWaitingForReady: false\n        }, extraOptions);\n        if (!(0, utils_2.isRedisInstance)(opts)) {\n            this.checkBlockingOptions(overrideMessage, opts);\n            this.opts = Object.assign({\n                port: 6379,\n                host: \"127.0.0.1\",\n                retryStrategy: function(times) {\n                    return Math.max(Math.min(Math.exp(times), 20000), 1000);\n                }\n            }, opts);\n            if (this.extraOptions.blocking) {\n                this.opts.maxRetriesPerRequest = null;\n            }\n        } else {\n            this._client = opts;\n            // Test if the redis instance is using keyPrefix\n            // and if so, throw an error.\n            if (this._client.options.keyPrefix) {\n                throw new Error(\"BullMQ: ioredis does not support ioredis prefixes, use the prefix option instead.\");\n            }\n            if ((0, utils_2.isRedisCluster)(this._client)) {\n                this.opts = this._client.options.redisOptions;\n            } else {\n                this.opts = this._client.options;\n            }\n            this.checkBlockingOptions(deprecationMessage, this.opts, true);\n        }\n        this.skipVersionCheck = (extraOptions === null || extraOptions === void 0 ? void 0 : extraOptions.skipVersionCheck) || !!(this.opts && this.opts.skipVersionCheck);\n        this.handleClientError = (err)=>{\n            this.emit(\"error\", err);\n        };\n        this.handleClientClose = ()=>{\n            this.emit(\"close\");\n        };\n        this.handleClientReady = ()=>{\n            this.emit(\"ready\");\n        };\n        this.initializing = this.init();\n        this.initializing.catch((err)=>this.emit(\"error\", err));\n    }\n    checkBlockingOptions(msg, options, throwError = false) {\n        if (this.extraOptions.blocking && options && options.maxRetriesPerRequest) {\n            if (throwError) {\n                throw new Error(msg);\n            } else {\n                console.error(msg);\n            }\n        }\n    }\n    /**\n     * Waits for a redis client to be ready.\n     * @param redis - client\n     */ static async waitUntilReady(client) {\n        if (client.status === \"ready\") {\n            return;\n        }\n        if (client.status === \"wait\") {\n            return client.connect();\n        }\n        if (client.status === \"end\") {\n            throw new Error(utils_1.CONNECTION_CLOSED_ERROR_MSG);\n        }\n        let handleReady;\n        let handleEnd;\n        let handleError;\n        try {\n            await new Promise((resolve, reject)=>{\n                let lastError;\n                handleError = (err)=>{\n                    lastError = err;\n                };\n                handleReady = ()=>{\n                    resolve();\n                };\n                handleEnd = ()=>{\n                    if (client.status !== \"end\") {\n                        reject(lastError || new Error(utils_1.CONNECTION_CLOSED_ERROR_MSG));\n                    } else {\n                        if (lastError) {\n                            reject(lastError);\n                        } else {\n                            // when custon 'end' status is set we already closed\n                            resolve();\n                        }\n                    }\n                };\n                (0, utils_2.increaseMaxListeners)(client, 3);\n                client.once(\"ready\", handleReady);\n                client.on(\"end\", handleEnd);\n                client.once(\"error\", handleError);\n            });\n        } finally{\n            client.removeListener(\"end\", handleEnd);\n            client.removeListener(\"error\", handleError);\n            client.removeListener(\"ready\", handleReady);\n            (0, utils_2.decreaseMaxListeners)(client, 3);\n        }\n    }\n    get client() {\n        return this.initializing;\n    }\n    loadCommands(packageVersion, providedScripts) {\n        const finalScripts = providedScripts || scripts;\n        for(const property in finalScripts){\n            // Only define the command if not already defined\n            const commandName = `${finalScripts[property].name}:${packageVersion}`;\n            if (!this._client[commandName]) {\n                this._client.defineCommand(commandName, {\n                    numberOfKeys: finalScripts[property].keys,\n                    lua: finalScripts[property].content\n                });\n            }\n        }\n    }\n    async init() {\n        if (!this._client) {\n            const _a = this.opts, { url } = _a, rest = tslib_1.__rest(_a, [\n                \"url\"\n            ]);\n            this._client = url ? new ioredis_1.default(url, rest) : new ioredis_1.default(rest);\n        }\n        (0, utils_2.increaseMaxListeners)(this._client, 3);\n        this._client.on(\"error\", this.handleClientError);\n        // ioredis treats connection errors as a different event ('close')\n        this._client.on(\"close\", this.handleClientClose);\n        this._client.on(\"ready\", this.handleClientReady);\n        if (!this.extraOptions.skipWaitingForReady) {\n            await RedisConnection.waitUntilReady(this._client);\n        }\n        this.loadCommands(this.packageVersion);\n        if (this._client[\"status\"] !== \"end\") {\n            this.version = await this.getRedisVersion();\n            if (this.skipVersionCheck !== true && !this.closing) {\n                if ((0, utils_2.isRedisVersionLowerThan)(this.version, RedisConnection.minimumVersion)) {\n                    throw new Error(`Redis version needs to be greater or equal than ${RedisConnection.minimumVersion} ` + `Current: ${this.version}`);\n                }\n                if ((0, utils_2.isRedisVersionLowerThan)(this.version, RedisConnection.recommendedMinimumVersion)) {\n                    console.warn(`It is highly recommended to use a minimum Redis version of ${RedisConnection.recommendedMinimumVersion}\n             Current: ${this.version}`);\n                }\n            }\n            this.capabilities = {\n                canDoubleTimeout: !(0, utils_2.isRedisVersionLowerThan)(this.version, \"6.0.0\"),\n                canBlockFor1Ms: !(0, utils_2.isRedisVersionLowerThan)(this.version, \"7.0.8\")\n            };\n            this.status = \"ready\";\n        }\n        return this._client;\n    }\n    async disconnect(wait = true) {\n        const client = await this.client;\n        if (client.status !== \"end\") {\n            let _resolve, _reject;\n            if (!wait) {\n                return client.disconnect();\n            }\n            const disconnecting = new Promise((resolve, reject)=>{\n                (0, utils_2.increaseMaxListeners)(client, 2);\n                client.once(\"end\", resolve);\n                client.once(\"error\", reject);\n                _resolve = resolve;\n                _reject = reject;\n            });\n            client.disconnect();\n            try {\n                await disconnecting;\n            } finally{\n                (0, utils_2.decreaseMaxListeners)(client, 2);\n                client.removeListener(\"end\", _resolve);\n                client.removeListener(\"error\", _reject);\n            }\n        }\n    }\n    async reconnect() {\n        const client = await this.client;\n        return client.connect();\n    }\n    async close(force = false) {\n        if (!this.closing) {\n            const status = this.status;\n            this.status = \"closing\";\n            this.closing = true;\n            try {\n                if (status === \"ready\") {\n                    // Not sure if we need to wait for this\n                    await this.initializing;\n                }\n                if (!this.extraOptions.shared) {\n                    if (status == \"initializing\" || force) {\n                        // If we have not still connected to Redis, we need to disconnect.\n                        this._client.disconnect();\n                    } else {\n                        await this._client.quit();\n                    }\n                    // As IORedis does not update this status properly, we do it ourselves.\n                    this._client[\"status\"] = \"end\";\n                }\n            } catch (error) {\n                if ((0, utils_2.isNotConnectionError)(error)) {\n                    throw error;\n                }\n            } finally{\n                this._client.off(\"error\", this.handleClientError);\n                this._client.off(\"close\", this.handleClientClose);\n                this._client.off(\"ready\", this.handleClientReady);\n                (0, utils_2.decreaseMaxListeners)(this._client, 3);\n                this.removeAllListeners();\n                this.status = \"closed\";\n            }\n        }\n    }\n    async getRedisVersion() {\n        if (this.skipVersionCheck) {\n            return RedisConnection.minimumVersion;\n        }\n        const doc = await this._client.info();\n        const redisPrefix = \"redis_version:\";\n        const maxMemoryPolicyPrefix = \"maxmemory_policy:\";\n        const lines = doc.split(/\\r?\\n/);\n        let redisVersion;\n        for(let i = 0; i < lines.length; i++){\n            if (lines[i].indexOf(maxMemoryPolicyPrefix) === 0) {\n                const maxMemoryPolicy = lines[i].substr(maxMemoryPolicyPrefix.length);\n                if (maxMemoryPolicy !== \"noeviction\") {\n                    console.warn(`IMPORTANT! Eviction policy is ${maxMemoryPolicy}. It should be \"noeviction\"`);\n                }\n            }\n            if (lines[i].indexOf(redisPrefix) === 0) {\n                redisVersion = lines[i].substr(redisPrefix.length);\n            }\n        }\n        return redisVersion;\n    }\n    get redisVersion() {\n        return this.version;\n    }\n}\nexports.RedisConnection = RedisConnection;\nRedisConnection.minimumVersion = \"5.0.0\";\nRedisConnection.recommendedMinimumVersion = \"6.2.0\"; //# sourceMappingURL=redis-connection.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL2NsYXNzZXMvcmVkaXMtY29ubmVjdGlvbi5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsdUJBQXVCLEdBQUcsS0FBSztBQUMvQixNQUFNRyxVQUFVQyxtQkFBT0EsQ0FBQyx1REFBTztBQUMvQixNQUFNQyxXQUFXRCxtQkFBT0EsQ0FBQyxzQkFBUTtBQUNqQyxNQUFNRSxZQUFZRixtQkFBT0EsQ0FBQyw0REFBUztBQUNuQyw2REFBNkQ7QUFDN0QsYUFBYTtBQUNiLE1BQU1HLFVBQVVILG1CQUFPQSxDQUFDLDhFQUFxQjtBQUM3QyxNQUFNSSxVQUFVSixtQkFBT0EsQ0FBQyxxRUFBVTtBQUNsQyxNQUFNSyxZQUFZTCxtQkFBT0EsQ0FBQyxtRUFBWTtBQUN0QyxNQUFNTSxVQUFVTixtQkFBT0EsQ0FBQyx5RUFBWTtBQUNwQyxNQUFNTyxrQkFBa0I7SUFDcEI7SUFDQTtDQUNILENBQUNDLElBQUksQ0FBQztBQUNQLE1BQU1DLHFCQUFxQjtBQUMzQixNQUFNWCx3QkFBd0JHLFNBQVNTLFlBQVk7SUFDL0NDLFlBQVlDLElBQUksRUFBRUMsWUFBWSxDQUFFO1FBQzVCLEtBQUs7UUFDTCxJQUFJLENBQUNBLFlBQVksR0FBR0E7UUFDcEIsSUFBSSxDQUFDQyxZQUFZLEdBQUc7WUFDaEJDLGtCQUFrQjtZQUNsQkMsZ0JBQWdCO1FBQ3BCO1FBQ0EsSUFBSSxDQUFDQyxNQUFNLEdBQUc7UUFDZCxJQUFJLENBQUNDLGNBQWMsR0FBR2IsVUFBVWMsT0FBTztRQUN2Qyw2QkFBNkI7UUFDN0IsSUFBSSxDQUFDTixZQUFZLEdBQUduQixPQUFPMEIsTUFBTSxDQUFDO1lBQUVDLFFBQVE7WUFBT0MsVUFBVTtZQUFNQyxrQkFBa0I7WUFBT0MscUJBQXFCO1FBQU0sR0FBR1g7UUFDMUgsSUFBSSxDQUFDLENBQUMsR0FBR1QsUUFBUXFCLGVBQWUsRUFB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TUFBTSxDQUFDVCxZQUFZTSxNQUFNO1lBQ3JEO1FBQ0o7UUFDQSxPQUFPRjtJQUNYO0lBQ0EsSUFBSUEsZUFBZTtRQUNmLE9BQU8sSUFBSSxDQUFDM0YsT0FBTztJQUN2QjtBQUNKO0FBQ0F2Qix1QkFBdUIsR0FBR0U7QUFDMUJBLGdCQUFnQjJGLGNBQWMsR0FBRztBQUNqQzNGLGdCQUFnQjRGLHlCQUF5QixHQUFHLFNBQzVDLDRDQUE0QyIsInNvdXJjZXMiOlsid2VicGFjazovL29ubHlmYW5zLXBsYXRmb3JtLy4vbm9kZV9tb2R1bGVzL2J1bGxtcS9kaXN0L2Nqcy9jbGFzc2VzL3JlZGlzLWNvbm5lY3Rpb24uanM/M2ZhYiJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuUmVkaXNDb25uZWN0aW9uID0gdm9pZCAwO1xuY29uc3QgdHNsaWJfMSA9IHJlcXVpcmUoXCJ0c2xpYlwiKTtcbmNvbnN0IGV2ZW50c18xID0gcmVxdWlyZShcImV2ZW50c1wiKTtcbmNvbnN0IGlvcmVkaXNfMSA9IHJlcXVpcmUoXCJpb3JlZGlzXCIpO1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9iYW4tdHMtY29tbWVudFxuLy8gQHRzLWlnbm9yZVxuY29uc3QgdXRpbHNfMSA9IHJlcXVpcmUoXCJpb3JlZGlzL2J1aWx0L3V0aWxzXCIpO1xuY29uc3QgdXRpbHNfMiA9IHJlcXVpcmUoXCIuLi91dGlsc1wiKTtcbmNvbnN0IHZlcnNpb25fMSA9IHJlcXVpcmUoXCIuLi92ZXJzaW9uXCIpO1xuY29uc3Qgc2NyaXB0cyA9IHJlcXVpcmUoXCIuLi9zY3JpcHRzXCIpO1xuY29uc3Qgb3ZlcnJpZGVNZXNzYWdlID0gW1xuICAgICdCdWxsTVE6IFdBUk5JTkchIFlvdXIgcmVkaXMgb3B0aW9ucyBtYXhSZXRyaWVzUGVyUmVxdWVzdCBtdXN0IGJlIG51bGwnLFxuICAgICdhbmQgd2lsbCBiZSBvdmVycmlkZGVuIGJ5IEJ1bGxNUS4nLFxuXS5qb2luKCcgJyk7XG5jb25zdCBkZXByZWNhdGlvbk1lc3NhZ2UgPSAnQnVsbE1ROiBZb3VyIHJlZGlzIG9wdGlvbnMgbWF4UmV0cmllc1BlclJlcXVlc3QgbXVzdCBiZSBudWxsLic7XG5jbGFzcyBSZWRpc0Nvbm5lY3Rpb24gZXh0ZW5kcyBldmVudHNfMS5FdmVudEVtaXR0ZXIge1xuICAgIGNvbnN0cnVjdG9yKG9wdHMsIGV4dHJhT3B0aW9ucykge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLmV4dHJhT3B0aW9ucyA9IGV4dHJhT3B0aW9ucztcbiAgICAgICAgdGhpcy5jYXBhYmlsaXRpZXMgPSB7XG4gICAgICAgICAgICBjYW5Eb3VibGVUaW1lb3V0OiBmYWxzZSxcbiAgICAgICAgICAgIGNhbkJsb2NrRm9yMU1zOiB0cnVlLFxuICAgICAgICB9O1xuICAgICAgICB0aGlzLnN0YXR1cyA9ICdpbml0aWFsaXppbmcnO1xuICAgICAgICB0aGlzLnBhY2thZ2VWZXJzaW9uID0gdmVyc2lvbl8xLnZlcnNpb247XG4gICAgICAgIC8vIFNldCBleHRyYSBvcHRpb25zIGRlZmF1bHRzXG4gICAgICAgIHRoaXMuZXh0cmFPcHRpb25zID0gT2JqZWN0LmFzc2lnbih7IHNoYXJlZDogZmFsc2UsIGJsb2NraW5nOiB0cnVlLCBza2lwVmVyc2lvbkNoZWNrOiBmYWxzZSwgc2tpcFdhaXRpbmdGb3JSZWFkeTogZmFsc2UgfSwgZXh0cmFPcHRpb25zKTtcbiAgICAgICAgaWYgKCEoMCwgdXRpbHNfMi5pc1JlZGlzSW5zdGFuY2UpKG9wdHMpKSB7XG4gICAgICAgICAgICB0aGlzLmNoZWNrQmxvY2tpbmdPcHRpb25zKG92ZXJyaWRlTWVzc2FnZSwgb3B0cyk7XG4gICAgICAgICAgICB0aGlzLm9wdHMgPSBPYmplY3QuYXNzaWduKHsgcG9ydDogNjM3OSwgaG9zdDogJzEyNy4wLjAuMScsIHJldHJ5U3RyYXRlZ3k6IGZ1bmN0aW9uICh0aW1lcykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gTWF0aC5tYXgoTWF0aC5taW4oTWF0aC5leHAodGltZXMpLCAyMDAwMCksIDEwMDApO1xuICAgICAgICAgICAgICAgIH0gfSwgb3B0cyk7XG4gICAgICAgICAgICBpZiAodGhpcy5leHRyYU9wdGlvbnMuYmxvY2tpbmcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9wdHMubWF4UmV0cmllc1BlclJlcXVlc3QgPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fY2xpZW50ID0gb3B0cztcbiAgICAgICAgICAgIC8vIFRlc3QgaWYgdGhlIHJlZGlzIGluc3RhbmNlIGlzIHVzaW5nIGtleVByZWZpeFxuICAgICAgICAgICAgLy8gYW5kIGlmIHNvLCB0aHJvdyBhbiBlcnJvci5cbiAgICAgICAgICAgIGlmICh0aGlzLl9jbGllbnQub3B0aW9ucy5rZXlQcmVmaXgpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0J1bGxNUTogaW9yZWRpcyBkb2VzIG5vdCBzdXBwb3J0IGlvcmVkaXMgcHJlZml4ZXMsIHVzZSB0aGUgcHJlZml4IG9wdGlvbiBpbnN0ZWFkLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCgwLCB1dGlsc18yLmlzUmVkaXNDbHVzdGVyKSh0aGlzLl9jbGllbnQpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vcHRzID0gdGhpcy5fY2xpZW50Lm9wdGlvbnMucmVkaXNPcHRpb25zO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vcHRzID0gdGhpcy5fY2xpZW50Lm9wdGlvbnM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmNoZWNrQmxvY2tpbmdPcHRpb25zKGRlcHJlY2F0aW9uTWVzc2FnZSwgdGhpcy5vcHRzLCB0cnVlKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNraXBWZXJzaW9uQ2hlY2sgPVxuICAgICAgICAgICAgKGV4dHJhT3B0aW9ucyA9PT0gbnVsbCB8fCBleHRyYU9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGV4dHJhT3B0aW9ucy5za2lwVmVyc2lvbkNoZWNrKSB8fFxuICAgICAgICAgICAgICAgICEhKHRoaXMub3B0cyAmJiB0aGlzLm9wdHMuc2tpcFZlcnNpb25DaGVjayk7XG4gICAgICAgIHRoaXMuaGFuZGxlQ2xpZW50RXJyb3IgPSAoZXJyKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmVtaXQoJ2Vycm9yJywgZXJyKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5oYW5kbGVDbGllbnRDbG9zZSA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZW1pdCgnY2xvc2UnKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5oYW5kbGVDbGllbnRSZWFkeSA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZW1pdCgncmVhZHknKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5pbml0aWFsaXppbmcgPSB0aGlzLmluaXQoKTtcbiAgICAgICAgdGhpcy5pbml0aWFsaXppbmcuY2F0Y2goZXJyID0+IHRoaXMuZW1pdCgnZXJyb3InLCBlcnIpKTtcbiAgICB9XG4gICAgY2hlY2tCbG9ja2luZ09wdGlvbnMobXNnLCBvcHRpb25zLCB0aHJvd0Vycm9yID0gZmFsc2UpIHtcbiAgICAgICAgaWYgKHRoaXMuZXh0cmFPcHRpb25zLmJsb2NraW5nICYmIG9wdGlvbnMgJiYgb3B0aW9ucy5tYXhSZXRyaWVzUGVyUmVxdWVzdCkge1xuICAgICAgICAgICAgaWYgKHRocm93RXJyb3IpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IobXNnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IobXNnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBXYWl0cyBmb3IgYSByZWRpcyBjbGllbnQgdG8gYmUgcmVhZHkuXG4gICAgICogQHBhcmFtIHJlZGlzIC0gY2xpZW50XG4gICAgICovXG4gICAgc3RhdGljIGFzeW5jIHdhaXRVbnRpbFJlYWR5KGNsaWVudCkge1xuICAgICAgICBpZiAoY2xpZW50LnN0YXR1cyA9PT0gJ3JlYWR5Jykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjbGllbnQuc3RhdHVzID09PSAnd2FpdCcpIHtcbiAgICAgICAgICAgIHJldHVybiBjbGllbnQuY29ubmVjdCgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjbGllbnQuc3RhdHVzID09PSAnZW5kJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKHV0aWxzXzEuQ09OTkVDVElPTl9DTE9TRURfRVJST1JfTVNHKTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgaGFuZGxlUmVhZHk7XG4gICAgICAgIGxldCBoYW5kbGVFbmQ7XG4gICAgICAgIGxldCBoYW5kbGVFcnJvcjtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgbGFzdEVycm9yO1xuICAgICAgICAgICAgICAgIGhhbmRsZUVycm9yID0gKGVycikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBsYXN0RXJyb3IgPSBlcnI7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBoYW5kbGVSZWFkeSA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgaGFuZGxlRW5kID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoY2xpZW50LnN0YXR1cyAhPT0gJ2VuZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChsYXN0RXJyb3IgfHwgbmV3IEVycm9yKHV0aWxzXzEuQ09OTkVDVElPTl9DTE9TRURfRVJST1JfTVNHKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobGFzdEVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGxhc3RFcnJvcik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB3aGVuIGN1c3RvbiAnZW5kJyBzdGF0dXMgaXMgc2V0IHdlIGFscmVhZHkgY2xvc2VkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAoMCwgdXRpbHNfMi5pbmNyZWFzZU1heExpc3RlbmVycykoY2xpZW50LCAzKTtcbiAgICAgICAgICAgICAgICBjbGllbnQub25jZSgncmVhZHknLCBoYW5kbGVSZWFkeSk7XG4gICAgICAgICAgICAgICAgY2xpZW50Lm9uKCdlbmQnLCBoYW5kbGVFbmQpO1xuICAgICAgICAgICAgICAgIGNsaWVudC5vbmNlKCdlcnJvcicsIGhhbmRsZUVycm9yKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgY2xpZW50LnJlbW92ZUxpc3RlbmVyKCdlbmQnLCBoYW5kbGVFbmQpO1xuICAgICAgICAgICAgY2xpZW50LnJlbW92ZUxpc3RlbmVyKCdlcnJvcicsIGhhbmRsZUVycm9yKTtcbiAgICAgICAgICAgIGNsaWVudC5yZW1vdmVMaXN0ZW5lcigncmVhZHknLCBoYW5kbGVSZWFkeSk7XG4gICAgICAgICAgICAoMCwgdXRpbHNfMi5kZWNyZWFzZU1heExpc3RlbmVycykoY2xpZW50LCAzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQgY2xpZW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pbml0aWFsaXppbmc7XG4gICAgfVxuICAgIGxvYWRDb21tYW5kcyhwYWNrYWdlVmVyc2lvbiwgcHJvdmlkZWRTY3JpcHRzKSB7XG4gICAgICAgIGNvbnN0IGZpbmFsU2NyaXB0cyA9IHByb3ZpZGVkU2NyaXB0cyB8fCBzY3JpcHRzO1xuICAgICAgICBmb3IgKGNvbnN0IHByb3BlcnR5IGluIGZpbmFsU2NyaXB0cykge1xuICAgICAgICAgICAgLy8gT25seSBkZWZpbmUgdGhlIGNvbW1hbmQgaWYgbm90IGFscmVhZHkgZGVmaW5lZFxuICAgICAgICAgICAgY29uc3QgY29tbWFuZE5hbWUgPSBgJHtmaW5hbFNjcmlwdHNbcHJvcGVydHldLm5hbWV9OiR7cGFja2FnZVZlcnNpb259YDtcbiAgICAgICAgICAgIGlmICghdGhpcy5fY2xpZW50W2NvbW1hbmROYW1lXSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX2NsaWVudC5kZWZpbmVDb21tYW5kKGNvbW1hbmROYW1lLCB7XG4gICAgICAgICAgICAgICAgICAgIG51bWJlck9mS2V5czogZmluYWxTY3JpcHRzW3Byb3BlcnR5XS5rZXlzLFxuICAgICAgICAgICAgICAgICAgICBsdWE6IGZpbmFsU2NyaXB0c1twcm9wZXJ0eV0uY29udGVudCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBpbml0KCkge1xuICAgICAgICBpZiAoIXRoaXMuX2NsaWVudCkge1xuICAgICAgICAgICAgY29uc3QgX2EgPSB0aGlzLm9wdHMsIHsgdXJsIH0gPSBfYSwgcmVzdCA9IHRzbGliXzEuX19yZXN0KF9hLCBbXCJ1cmxcIl0pO1xuICAgICAgICAgICAgdGhpcy5fY2xpZW50ID0gdXJsID8gbmV3IGlvcmVkaXNfMS5kZWZhdWx0KHVybCwgcmVzdCkgOiBuZXcgaW9yZWRpc18xLmRlZmF1bHQocmVzdCk7XG4gICAgICAgIH1cbiAgICAgICAgKDAsIHV0aWxzXzIuaW5jcmVhc2VNYXhMaXN0ZW5lcnMpKHRoaXMuX2NsaWVudCwgMyk7XG4gICAgICAgIHRoaXMuX2NsaWVudC5vbignZXJyb3InLCB0aGlzLmhhbmRsZUNsaWVudEVycm9yKTtcbiAgICAgICAgLy8gaW9yZWRpcyB0cmVhdHMgY29ubmVjdGlvbiBlcnJvcnMgYXMgYSBkaWZmZXJlbnQgZXZlbnQgKCdjbG9zZScpXG4gICAgICAgIHRoaXMuX2NsaWVudC5vbignY2xvc2UnLCB0aGlzLmhhbmRsZUNsaWVudENsb3NlKTtcbiAgICAgICAgdGhpcy5fY2xpZW50Lm9uKCdyZWFkeScsIHRoaXMuaGFuZGxlQ2xpZW50UmVhZHkpO1xuICAgICAgICBpZiAoIXRoaXMuZXh0cmFPcHRpb25zLnNraXBXYWl0aW5nRm9yUmVhZHkpIHtcbiAgICAgICAgICAgIGF3YWl0IFJlZGlzQ29ubmVjdGlvbi53YWl0VW50aWxSZWFkeSh0aGlzLl9jbGllbnQpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubG9hZENvbW1hbmRzKHRoaXMucGFja2FnZVZlcnNpb24pO1xuICAgICAgICBpZiAodGhpcy5fY2xpZW50WydzdGF0dXMnXSAhPT0gJ2VuZCcpIHtcbiAgICAgICAgICAgIHRoaXMudmVyc2lvbiA9IGF3YWl0IHRoaXMuZ2V0UmVkaXNWZXJzaW9uKCk7XG4gICAgICAgICAgICBpZiAodGhpcy5za2lwVmVyc2lvbkNoZWNrICE9PSB0cnVlICYmICF0aGlzLmNsb3NpbmcpIHtcbiAgICAgICAgICAgICAgICBpZiAoKDAsIHV0aWxzXzIuaXNSZWRpc1ZlcnNpb25Mb3dlclRoYW4pKHRoaXMudmVyc2lvbiwgUmVkaXNDb25uZWN0aW9uLm1pbmltdW1WZXJzaW9uKSkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFJlZGlzIHZlcnNpb24gbmVlZHMgdG8gYmUgZ3JlYXRlciBvciBlcXVhbCB0aGFuICR7UmVkaXNDb25uZWN0aW9uLm1pbmltdW1WZXJzaW9ufSBgICtcbiAgICAgICAgICAgICAgICAgICAgICAgIGBDdXJyZW50OiAke3RoaXMudmVyc2lvbn1gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCgwLCB1dGlsc18yLmlzUmVkaXNWZXJzaW9uTG93ZXJUaGFuKSh0aGlzLnZlcnNpb24sIFJlZGlzQ29ubmVjdGlvbi5yZWNvbW1lbmRlZE1pbmltdW1WZXJzaW9uKSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oYEl0IGlzIGhpZ2hseSByZWNvbW1lbmRlZCB0byB1c2UgYSBtaW5pbXVtIFJlZGlzIHZlcnNpb24gb2YgJHtSZWRpc0Nvbm5lY3Rpb24ucmVjb21tZW5kZWRNaW5pbXVtVmVyc2lvbn1cbiAgICAgICAgICAgICBDdXJyZW50OiAke3RoaXMudmVyc2lvbn1gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmNhcGFiaWxpdGllcyA9IHtcbiAgICAgICAgICAgICAgICBjYW5Eb3VibGVUaW1lb3V0OiAhKDAsIHV0aWxzXzIuaXNSZWRpc1ZlcnNpb25Mb3dlclRoYW4pKHRoaXMudmVyc2lvbiwgJzYuMC4wJyksXG4gICAgICAgICAgICAgICAgY2FuQmxvY2tGb3IxTXM6ICEoMCwgdXRpbHNfMi5pc1JlZGlzVmVyc2lvbkxvd2VyVGhhbikodGhpcy52ZXJzaW9uLCAnNy4wLjgnKSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLnN0YXR1cyA9ICdyZWFkeSc7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX2NsaWVudDtcbiAgICB9XG4gICAgYXN5bmMgZGlzY29ubmVjdCh3YWl0ID0gdHJ1ZSkge1xuICAgICAgICBjb25zdCBjbGllbnQgPSBhd2FpdCB0aGlzLmNsaWVudDtcbiAgICAgICAgaWYgKGNsaWVudC5zdGF0dXMgIT09ICdlbmQnKSB7XG4gICAgICAgICAgICBsZXQgX3Jlc29sdmUsIF9yZWplY3Q7XG4gICAgICAgICAgICBpZiAoIXdhaXQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY2xpZW50LmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGRpc2Nvbm5lY3RpbmcgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICAgICAgKDAsIHV0aWxzXzIuaW5jcmVhc2VNYXhMaXN0ZW5lcnMpKGNsaWVudCwgMik7XG4gICAgICAgICAgICAgICAgY2xpZW50Lm9uY2UoJ2VuZCcsIHJlc29sdmUpO1xuICAgICAgICAgICAgICAgIGNsaWVudC5vbmNlKCdlcnJvcicsIHJlamVjdCk7XG4gICAgICAgICAgICAgICAgX3Jlc29sdmUgPSByZXNvbHZlO1xuICAgICAgICAgICAgICAgIF9yZWplY3QgPSByZWplY3Q7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNsaWVudC5kaXNjb25uZWN0KCk7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGF3YWl0IGRpc2Nvbm5lY3Rpbmc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICAoMCwgdXRpbHNfMi5kZWNyZWFzZU1heExpc3RlbmVycykoY2xpZW50LCAyKTtcbiAgICAgICAgICAgICAgICBjbGllbnQucmVtb3ZlTGlzdGVuZXIoJ2VuZCcsIF9yZXNvbHZlKTtcbiAgICAgICAgICAgICAgICBjbGllbnQucmVtb3ZlTGlzdGVuZXIoJ2Vycm9yJywgX3JlamVjdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgcmVjb25uZWN0KCkge1xuICAgICAgICBjb25zdCBjbGllbnQgPSBhd2FpdCB0aGlzLmNsaWVudDtcbiAgICAgICAgcmV0dXJuIGNsaWVudC5jb25uZWN0KCk7XG4gICAgfVxuICAgIGFzeW5jIGNsb3NlKGZvcmNlID0gZmFsc2UpIHtcbiAgICAgICAgaWYgKCF0aGlzLmNsb3NpbmcpIHtcbiAgICAgICAgICAgIGNvbnN0IHN0YXR1cyA9IHRoaXMuc3RhdHVzO1xuICAgICAgICAgICAgdGhpcy5zdGF0dXMgPSAnY2xvc2luZyc7XG4gICAgICAgICAgICB0aGlzLmNsb3NpbmcgPSB0cnVlO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBpZiAoc3RhdHVzID09PSAncmVhZHknKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIE5vdCBzdXJlIGlmIHdlIG5lZWQgdG8gd2FpdCBmb3IgdGhpc1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmluaXRpYWxpemluZztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmV4dHJhT3B0aW9ucy5zaGFyZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXR1cyA9PSAnaW5pdGlhbGl6aW5nJyB8fCBmb3JjZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgd2UgaGF2ZSBub3Qgc3RpbGwgY29ubmVjdGVkIHRvIFJlZGlzLCB3ZSBuZWVkIHRvIGRpc2Nvbm5lY3QuXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9jbGllbnQuZGlzY29ubmVjdCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5fY2xpZW50LnF1aXQoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvLyBBcyBJT1JlZGlzIGRvZXMgbm90IHVwZGF0ZSB0aGlzIHN0YXR1cyBwcm9wZXJseSwgd2UgZG8gaXQgb3Vyc2VsdmVzLlxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9jbGllbnRbJ3N0YXR1cyddID0gJ2VuZCc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgaWYgKCgwLCB1dGlsc18yLmlzTm90Q29ubmVjdGlvbkVycm9yKShlcnJvcikpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fY2xpZW50Lm9mZignZXJyb3InLCB0aGlzLmhhbmRsZUNsaWVudEVycm9yKTtcbiAgICAgICAgICAgICAgICB0aGlzLl9jbGllbnQub2ZmKCdjbG9zZScsIHRoaXMuaGFuZGxlQ2xpZW50Q2xvc2UpO1xuICAgICAgICAgICAgICAgIHRoaXMuX2NsaWVudC5vZmYoJ3JlYWR5JywgdGhpcy5oYW5kbGVDbGllbnRSZWFkeSk7XG4gICAgICAgICAgICAgICAgKDAsIHV0aWxzXzIuZGVjcmVhc2VNYXhMaXN0ZW5lcnMpKHRoaXMuX2NsaWVudCwgMyk7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoKTtcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXR1cyA9ICdjbG9zZWQnO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIGdldFJlZGlzVmVyc2lvbigpIHtcbiAgICAgICAgaWYgKHRoaXMuc2tpcFZlcnNpb25DaGVjaykge1xuICAgICAgICAgICAgcmV0dXJuIFJlZGlzQ29ubmVjdGlvbi5taW5pbXVtVmVyc2lvbjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBkb2MgPSBhd2FpdCB0aGlzLl9jbGllbnQuaW5mbygpO1xuICAgICAgICBjb25zdCByZWRpc1ByZWZpeCA9ICdyZWRpc192ZXJzaW9uOic7XG4gICAgICAgIGNvbnN0IG1heE1lbW9yeVBvbGljeVByZWZpeCA9ICdtYXhtZW1vcnlfcG9saWN5Oic7XG4gICAgICAgIGNvbnN0IGxpbmVzID0gZG9jLnNwbGl0KC9cXHI/XFxuLyk7XG4gICAgICAgIGxldCByZWRpc1ZlcnNpb247XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGluZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChsaW5lc1tpXS5pbmRleE9mKG1heE1lbW9yeVBvbGljeVByZWZpeCkgPT09IDApIHtcbiAgICAgICAgICAgICAgICBjb25zdCBtYXhNZW1vcnlQb2xpY3kgPSBsaW5lc1tpXS5zdWJzdHIobWF4TWVtb3J5UG9saWN5UHJlZml4Lmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgaWYgKG1heE1lbW9yeVBvbGljeSAhPT0gJ25vZXZpY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihgSU1QT1JUQU5UISBFdmljdGlvbiBwb2xpY3kgaXMgJHttYXhNZW1vcnlQb2xpY3l9LiBJdCBzaG91bGQgYmUgXCJub2V2aWN0aW9uXCJgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobGluZXNbaV0uaW5kZXhPZihyZWRpc1ByZWZpeCkgPT09IDApIHtcbiAgICAgICAgICAgICAgICByZWRpc1ZlcnNpb24gPSBsaW5lc1tpXS5zdWJzdHIocmVkaXNQcmVmaXgubGVuZ3RoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVkaXNWZXJzaW9uO1xuICAgIH1cbiAgICBnZXQgcmVkaXNWZXJzaW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy52ZXJzaW9uO1xuICAgIH1cbn1cbmV4cG9ydHMuUmVkaXNDb25uZWN0aW9uID0gUmVkaXNDb25uZWN0aW9uO1xuUmVkaXNDb25uZWN0aW9uLm1pbmltdW1WZXJzaW9uID0gJzUuMC4wJztcblJlZGlzQ29ubmVjdGlvbi5yZWNvbW1lbmRlZE1pbmltdW1WZXJzaW9uID0gJzYuMi4wJztcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJlZGlzLWNvbm5lY3Rpb24uanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiUmVkaXNDb25uZWN0aW9uIiwidHNsaWJfMSIsInJlcXVpcmUiLCJldmVudHNfMSIsImlvcmVkaXNfMSIsInV0aWxzXzEiLCJ1dGlsc18yIiwidmVyc2lvbl8xIiwic2NyaXB0cyIsIm92ZXJyaWRlTWVzc2FnZSIsImpvaW4iLCJkZXByZWNhdGlvbk1lc3NhZ2UiLCJFdmVudEVtaXR0ZXIiLCJjb25zdHJ1Y3RvciIsIm9wdHMiLCJleHRyYU9wdGlvbnMiLCJjYXBhYmlsaXRpZXMiLCJjYW5Eb3VibGVUaW1lb3V0IiwiY2FuQmxvY2tGb3IxTXMiLCJzdGF0dXMiLCJwYWNrYWdlVmVyc2lvbiIsInZlcnNpb24iLCJhc3NpZ24iLCJzaGFyZWQiLCJibG9ja2luZyIsInNraXBWZXJzaW9uQ2hlY2siLCJza2lwV2FpdGluZ0ZvclJlYWR5IiwiaXNSZWRpc0luc3RhbmNlIiwiY2hlY2tCbG9ja2luZ09wdGlvbnMiLCJwb3J0IiwiaG9zdCIsInJldHJ5U3RyYXRlZ3kiLCJ0aW1lcyIsIk1hdGgiLCJtYXgiLCJtaW4iLCJleHAiLCJtYXhSZXRyaWVzUGVyUmVxdWVzdCIsIl9jbGllbnQiLCJvcHRpb25zIiwia2V5UHJlZml4IiwiRXJyb3IiLCJpc1JlZGlzQ2x1c3RlciIsInJlZGlzT3B0aW9ucyIsImhhbmRsZUNsaWVudEVycm9yIiwiZXJyIiwiZW1pdCIsImhhbmRsZUNsaWVudENsb3NlIiwiaGFuZGxlQ2xpZW50UmVhZHkiLCJpbml0aWFsaXppbmciLCJpbml0IiwiY2F0Y2giLCJtc2ciLCJ0aHJvd0Vycm9yIiwiY29uc29sZSIsImVycm9yIiwid2FpdFVudGlsUmVhZHkiLCJjbGllbnQiLCJjb25uZWN0IiwiQ09OTkVDVElPTl9DTE9TRURfRVJST1JfTVNHIiwiaGFuZGxlUmVhZHkiLCJoYW5kbGVFbmQiLCJoYW5kbGVFcnJvciIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwibGFzdEVycm9yIiwiaW5jcmVhc2VNYXhMaXN0ZW5lcnMiLCJvbmNlIiwib24iLCJyZW1vdmVMaXN0ZW5lciIsImRlY3JlYXNlTWF4TGlzdGVuZXJzIiwibG9hZENvbW1hbmRzIiwicHJvdmlkZWRTY3JpcHRzIiwiZmluYWxTY3JpcHRzIiwicHJvcGVydHkiLCJjb21tYW5kTmFtZSIsIm5hbWUiLCJkZWZpbmVDb21tYW5kIiwibnVtYmVyT2ZLZXlzIiwia2V5cyIsImx1YSIsImNvbnRlbnQiLCJfYSIsInVybCIsInJlc3QiLCJfX3Jlc3QiLCJkZWZhdWx0IiwiZ2V0UmVkaXNWZXJzaW9uIiwiY2xvc2luZyIsImlzUmVkaXNWZXJzaW9uTG93ZXJUaGFuIiwibWluaW11bVZlcnNpb24iLCJyZWNvbW1lbmRlZE1pbmltdW1WZXJzaW9uIiwid2FybiIsImRpc2Nvbm5lY3QiLCJ3YWl0IiwiX3Jlc29sdmUiLCJfcmVqZWN0IiwiZGlzY29ubmVjdGluZyIsInJlY29ubmVjdCIsImNsb3NlIiwiZm9yY2UiLCJxdWl0IiwiaXNOb3RDb25uZWN0aW9uRXJyb3IiLCJvZmYiLCJyZW1vdmVBbGxMaXN0ZW5lcnMiLCJkb2MiLCJpbmZvIiwicmVkaXNQcmVmaXgiLCJtYXhNZW1vcnlQb2xpY3lQcmVmaXgiLCJsaW5lcyIsInNwbGl0IiwicmVkaXNWZXJzaW9uIiwiaSIsImxlbmd0aCIsImluZGV4T2YiLCJtYXhNZW1vcnlQb2xpY3kiLCJzdWJzdHIiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/classes/redis-connection.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/classes/repeat.js":
/*!********************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/classes/repeat.js ***!
  \********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.getNextMillis = exports.Repeat = void 0;\nconst tslib_1 = __webpack_require__(/*! tslib */ \"(rsc)/./node_modules/tslib/tslib.es6.mjs\");\nconst cron_parser_1 = __webpack_require__(/*! cron-parser */ \"(rsc)/./node_modules/cron-parser/lib/parser.js\");\nconst crypto_1 = __webpack_require__(/*! crypto */ \"crypto\");\nconst queue_base_1 = __webpack_require__(/*! ./queue-base */ \"(rsc)/./node_modules/bullmq/dist/cjs/classes/queue-base.js\");\nclass Repeat extends queue_base_1.QueueBase {\n    constructor(name, opts, Connection){\n        super(name, opts, Connection);\n        this.repeatStrategy = opts.settings && opts.settings.repeatStrategy || exports.getNextMillis;\n        this.repeatKeyHashAlgorithm = opts.settings && opts.settings.repeatKeyHashAlgorithm || \"md5\";\n    }\n    async updateRepeatableJob(name, data, opts, { override }) {\n        var _a, _b;\n        // Backwards compatibility for repeatable jobs for versions <= 3.0.0\n        const repeatOpts = Object.assign({}, opts.repeat);\n        (_a = repeatOpts.pattern) !== null && _a !== void 0 ? _a : repeatOpts.pattern = repeatOpts.cron;\n        delete repeatOpts.cron;\n        // Check if we reached the limit of the repeatable job's iterations\n        const iterationCount = repeatOpts.count ? repeatOpts.count + 1 : 1;\n        if (typeof repeatOpts.limit !== \"undefined\" && iterationCount > repeatOpts.limit) {\n            return;\n        }\n        // Check if we reached the end date of the repeatable job\n        let now = Date.now();\n        const { endDate } = repeatOpts;\n        if (endDate && now > new Date(endDate).getTime()) {\n            return;\n        }\n        const prevMillis = opts.prevMillis || 0;\n        now = prevMillis < now ? now : prevMillis;\n        const nextMillis = await this.repeatStrategy(now, repeatOpts, name);\n        const { every, pattern } = repeatOpts;\n        const hasImmediately = Boolean((every || pattern) && repeatOpts.immediately);\n        const offset = hasImmediately && every ? now - nextMillis : undefined;\n        if (nextMillis) {\n            // We store the undecorated opts.jobId into the repeat options\n            if (!prevMillis && opts.jobId) {\n                repeatOpts.jobId = opts.jobId;\n            }\n            const legacyRepeatKey = getRepeatConcatOptions(name, repeatOpts);\n            const newRepeatKey = (_b = opts.repeat.key) !== null && _b !== void 0 ? _b : this.hash(legacyRepeatKey);\n            let repeatJobKey;\n            if (override) {\n                repeatJobKey = await this.scripts.addRepeatableJob(newRepeatKey, nextMillis, {\n                    name,\n                    endDate: endDate ? new Date(endDate).getTime() : undefined,\n                    tz: repeatOpts.tz,\n                    pattern,\n                    every\n                }, legacyRepeatKey);\n            } else {\n                const client = await this.client;\n                repeatJobKey = await this.scripts.updateRepeatableJobMillis(client, newRepeatKey, nextMillis, legacyRepeatKey);\n            }\n            const { immediately } = repeatOpts, filteredRepeatOpts = tslib_1.__rest(repeatOpts, [\n                \"immediately\"\n            ]);\n            return this.createNextJob(name, nextMillis, repeatJobKey, Object.assign(Object.assign({}, opts), {\n                repeat: Object.assign({\n                    offset\n                }, filteredRepeatOpts)\n            }), data, iterationCount, hasImmediately);\n        }\n    }\n    async createNextJob(name, nextMillis, repeatJobKey, opts, data, currentCount, hasImmediately) {\n        //\n        // Generate unique job id for this iteration.\n        //\n        const jobId = this.getRepeatJobKey(name, nextMillis, repeatJobKey, data);\n        const now = Date.now();\n        const delay = nextMillis + (opts.repeat.offset ? opts.repeat.offset : 0) - now;\n        const mergedOpts = Object.assign(Object.assign({}, opts), {\n            jobId,\n            delay: delay < 0 || hasImmediately ? 0 : delay,\n            timestamp: now,\n            prevMillis: nextMillis,\n            repeatJobKey\n        });\n        mergedOpts.repeat = Object.assign(Object.assign({}, opts.repeat), {\n            count: currentCount\n        });\n        return this.Job.create(this, name, data, mergedOpts);\n    }\n    // TODO: remove legacy code in next breaking change\n    getRepeatJobKey(name, nextMillis, repeatJobKey, data) {\n        if (repeatJobKey.split(\":\").length > 2) {\n            return this.getRepeatJobId({\n                name: name,\n                nextMillis: nextMillis,\n                namespace: this.hash(repeatJobKey),\n                jobId: data === null || data === void 0 ? void 0 : data.id\n            });\n        }\n        return this.getRepeatDelayedJobId({\n            customKey: repeatJobKey,\n            nextMillis\n        });\n    }\n    async removeRepeatable(name, repeat, jobId) {\n        var _a;\n        const repeatConcatOptions = getRepeatConcatOptions(name, Object.assign(Object.assign({}, repeat), {\n            jobId\n        }));\n        const repeatJobKey = (_a = repeat.key) !== null && _a !== void 0 ? _a : this.hash(repeatConcatOptions);\n        const legacyRepeatJobId = this.getRepeatJobId({\n            name,\n            nextMillis: \"\",\n            namespace: this.hash(repeatConcatOptions),\n            jobId: jobId !== null && jobId !== void 0 ? jobId : repeat.jobId,\n            key: repeat.key\n        });\n        return this.scripts.removeRepeatable(legacyRepeatJobId, repeatConcatOptions, repeatJobKey);\n    }\n    async removeRepeatableByKey(repeatJobKey) {\n        const data = this.keyToData(repeatJobKey);\n        const legacyRepeatJobId = this.getRepeatJobId({\n            name: data.name,\n            nextMillis: \"\",\n            namespace: this.hash(repeatJobKey),\n            jobId: data.id\n        });\n        return this.scripts.removeRepeatable(legacyRepeatJobId, \"\", repeatJobKey);\n    }\n    async getRepeatableData(client, key, next) {\n        const jobData = await client.hgetall(this.toKey(\"repeat:\" + key));\n        if (jobData) {\n            return {\n                key,\n                name: jobData.name,\n                endDate: parseInt(jobData.endDate) || null,\n                tz: jobData.tz || null,\n                pattern: jobData.pattern || null,\n                every: jobData.every || null,\n                next\n            };\n        }\n        return this.keyToData(key, next);\n    }\n    keyToData(key, next) {\n        const data = key.split(\":\");\n        const pattern = data.slice(4).join(\":\") || null;\n        return {\n            key,\n            name: data[0],\n            id: data[1] || null,\n            endDate: parseInt(data[2]) || null,\n            tz: data[3] || null,\n            pattern,\n            next\n        };\n    }\n    async getRepeatableJobs(start = 0, end = -1, asc = false) {\n        const client = await this.client;\n        const key = this.keys.repeat;\n        const result = asc ? await client.zrange(key, start, end, \"WITHSCORES\") : await client.zrevrange(key, start, end, \"WITHSCORES\");\n        const jobs = [];\n        for(let i = 0; i < result.length; i += 2){\n            jobs.push(this.getRepeatableData(client, result[i], parseInt(result[i + 1])));\n        }\n        return Promise.all(jobs);\n    }\n    async getRepeatableCount() {\n        const client = await this.client;\n        return client.zcard(this.toKey(\"repeat\"));\n    }\n    hash(str) {\n        return (0, crypto_1.createHash)(this.repeatKeyHashAlgorithm).update(str).digest(\"hex\");\n    }\n    getRepeatDelayedJobId({ nextMillis, customKey }) {\n        return `repeat:${customKey}:${nextMillis}`;\n    }\n    getRepeatJobId({ name, nextMillis, namespace, jobId, key }) {\n        const checksum = key !== null && key !== void 0 ? key : this.hash(`${name}${jobId || \"\"}${namespace}`);\n        return `repeat:${checksum}:${nextMillis}`;\n    }\n}\nexports.Repeat = Repeat;\nfunction getRepeatConcatOptions(name, repeat) {\n    const endDate = repeat.endDate ? new Date(repeat.endDate).getTime() : \"\";\n    const tz = repeat.tz || \"\";\n    const pattern = repeat.pattern;\n    const suffix = (pattern ? pattern : String(repeat.every)) || \"\";\n    const jobId = repeat.jobId ? repeat.jobId : \"\";\n    return `${name}:${jobId}:${endDate}:${tz}:${suffix}`;\n}\nconst getNextMillis = (millis, opts)=>{\n    const pattern = opts.pattern;\n    if (pattern && opts.every) {\n        throw new Error(\"Both .pattern and .every options are defined for this repeatable job\");\n    }\n    if (opts.every) {\n        return Math.floor(millis / opts.every) * opts.every + (opts.immediately ? 0 : opts.every);\n    }\n    const currentDate = opts.startDate && new Date(opts.startDate) > new Date(millis) ? new Date(opts.startDate) : new Date(millis);\n    const interval = (0, cron_parser_1.parseExpression)(pattern, Object.assign(Object.assign({}, opts), {\n        currentDate\n    }));\n    try {\n        if (opts.immediately) {\n            return new Date().getTime();\n        } else {\n            return interval.next().getTime();\n        }\n    } catch (e) {\n    // Ignore error\n    }\n};\nexports.getNextMillis = getNextMillis; //# sourceMappingURL=repeat.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL2NsYXNzZXMvcmVwZWF0LmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCxxQkFBcUIsR0FBR0EsY0FBYyxHQUFHLEtBQUs7QUFDOUMsTUFBTUksVUFBVUMsbUJBQU9BLENBQUMsdURBQU87QUFDL0IsTUFBTUMsZ0JBQWdCRCxtQkFBT0EsQ0FBQyxtRUFBYTtBQUMzQyxNQUFNRSxXQUFXRixtQkFBT0EsQ0FBQyxzQkFBUTtBQUNqQyxNQUFNRyxlQUFlSCxtQkFBT0EsQ0FBQyxnRkFBYztBQUMzQyxNQUFNRixlQUFlSyxhQUFhQyxTQUFTO0lBQ3ZDQyxZQUFZQyxJQUFJLEVBQUVDLElBQUksRUFBRUMsVUFBVSxDQUFFO1FBQ2hDLEtBQUssQ0FBQ0YsTUFBTUMsTUFBTUM7UUFDbEIsSUFBSSxDQUFDQyxjQUFjLEdBQ2YsS0FBTUMsUUFBUSxJQUFJSCxLQUFLRyxRQUFRLENBQUNELGNBQWMsSUFBS2QsUUFBUUUsYUFBYTtRQUM1RSxJQUFJLENBQUNjLHNCQUFzQixHQUN2QixLQUFNRCxRQUFRLElBQUlILEtBQUtHLFFBQVEsQ0FBQ0Msc0JBQXNCLElBQUs7SUFDbkU7SUFDQSxNQUFNQyxvQkFBb0JOLElBQUksRUFBRU8sSUFBSSxFQUFFTixJQUFJLEVBQUUsRUFBRU8sUUFBUSxFQUFFLEVBQUU7UUFDdEQsSUFBSUMsSUFBSUM7UUFDUixvRUFBb0U7UUFDcEUsTUFBTUMsYUFBYXhCLE9BQU95QixNQUFNLENBQUMsQ0FBQyxHQUFHWCxLQUFLWSxNQUFNO1FBQy9DSixDQUFBQSxLQUFLRSxXQUFXRyxPQUFPLE1BQU0sUUFBUUwsT0FBTyxLQUFLLElBQUlBLEtBQU1FLFdBQVdHLE9BQU8sR0FBR0gsV0FBV0ksSUFBSTtRQUNoRyxPQUFPSixXQUFXSSxJQUFJO1FBQ3RCLG1FQUFtRTtRQUNuRSxNQUFNQyxpQkFBaUJMLFdBQVdNLEtBQUssR0FBR04sV0FBV00sS0FBSyxHQUFHLElBQUk7UUFDakUsSUFBSSxPQUFPTixXQUFXTyxLQUFLLEtBQUssZUFDNUJGLGlCQUFpQkwsV0FBV08sS0FBSyxFQUFFO1lBQ25DO1FBQ0o7UUFDQSx5REFBeUQ7UUFDekQsSUFBSUMsTUFBTUMsS0FBS0QsR0FBRztRQUNsQixNQUFNLEVBQUVFLE9BQU8sRUFBRSxHQUFHVjtRQUNwQixJQUFJVSxXQUFXRixNQUFNLElBQUlDLEtBQUtDLFNBQVNDLE9BQU8sSUFBSTtZQUM5QztRQUNKO1FBQ0EsTUFBTUMsYUFBYXRCLEtBQUtzQixVQUFVLElBQUk7UUFDdENKLE1BQU1JLGFBQWFKLE1BQU1BLE1BQU1JO1FBQy9CLE1BQU1DLGFBQWEsTUFBTSxJQUFJLENBQUNyQixjQUFjLENBQUNnQixLQUFLUixZQUFZWDtRQUM5RCxNQUFNLEVBQUV5QixLQUFLLEVBQUVYLE9BQU8sRUFBRSxHQUFHSDtRQUMzQixNQUFNZSxpQkFBaUJDLFFBQVEsQ0FBQ0YsU0FBU1gsT0FBTSxLQUFNSCxXQUFXaUIsV0FBVztRQUMzRSxNQUFNQyxTQUFTSCxrQkFBa0JELFFBQVFOLE1BQU1LLGFBQWFNO1FBQzVELElBQUlOLFlBQVk7WUFDWiw4REFBOEQ7WUFDOUQsSUFBSSxDQUFDRCxjQUFjdEIsS0FBSzhCLEtBQUssRUFBRTtnQkFDM0JwQixXQUFXb0IsS0FBSyxHQUFHOUIsS0FBSzhCLEtBQUs7WUFDakM7WUFDQSxNQUFNQyxrQkFBa0JDLHVCQUF1QmpDLE1BQU1XO1lBQ3JELE1BQU11QixlQUFlLENBQUN4QixLQUFLVCxLQUFLWSxNQUFNLENBQUNzQixHQUFHLE1BQU0sUUFBUXpCLE9BQU8sS0FBSyxJQUFJQSxLQUFLLElBQUksQ0FBQzBCLElBQUksQ0FBQ0o7WUFDdkYsSUFBSUs7WUFDSixJQUFJN0IsVUFBVTtnQkFDVjZCLGVBQWUsTUFBTSxJQUFJLENBQUNDLE9BQU8sQ0FBQ0MsZ0JBQWdCLENBQUNMLGNBQWNWLFlBQVk7b0JBQ3pFeEI7b0JBQ0FxQixTQUFTQSxVQUFVLElBQUlELEtBQUtDLFNBQVNDLE9BQU8sS0FBS1E7b0JBQ2pEVSxJQUFJN0IsV0FBVzZCLEVBQUU7b0JBQ2pCMUI7b0JBQ0FXO2dCQUNKLEdBQUdPO1lBQ1AsT0FDSztnQkFDRCxNQUFNUyxTQUFTLE1BQU0sSUFBSSxDQUFDQSxNQUFNO2dCQUNoQ0osZUFBZSxNQUFNLElBQUksQ0FBQ0MsT0FBTyxDQUFDSSx5QkFBeUIsQ0FBQ0QsUUFBUVAsY0FBY1YsWUFBWVE7WUFDbEc7WUFDQSxNQUFNLEVBQUVKLFdBQVcsRUFBRSxHQUFHakIsWUFBWWdDLHFCQUFxQmxELFFBQVFtRCxNQUFNLENBQUNqQyxZQUFZO2dCQUFDO2FBQWM7WUFDbkcsT0FBTyxJQUFJLENBQUNrQyxhQUFhLENBQUM3QyxNQUFNd0IsWUFBWWEsY0FBY2xELE9BQU95QixNQUFNLENBQUN6QixPQUFPeUIsTUFBTSxDQUFDLENBQUMsR0FBR1gsT0FBTztnQkFBRVksUUFBUTFCLE9BQU95QixNQUFNLENBQUM7b0JBQUVpQjtnQkFBTyxHQUFHYztZQUFvQixJQUFJcEMsTUFBTVMsZ0JBQWdCVTtRQUN2TDtJQUNKO0lBQ0EsTUFBTW1CLGNBQWM3QyxJQUFJLEVBQUV3QixVQUFVLEVBQUVhLFlBQVksRUFBRXBDLElBQUksRUFBRU0sSUFBSSxFQUFFdUMsWUFBWSxFQUFFcEIsY0FBYyxFQUFFO1FBQzFGLEVBQUU7UUFDRiw2Q0FBNkM7UUFDN0MsRUFBRTtRQUNGLE1BQU1LLFFBQVEsSUFBSSxDQUFDZ0IsZUFBZSxDQUFDL0MsTUFBTXdCLFlBQVlhLGNBQWM5QjtRQUNuRSxNQUFNWSxNQUFNQyxLQUFLRCxHQUFHO1FBQ3BCLE1BQU02QixRQUFReEIsYUFBY3ZCLENBQUFBLEtBQUtZLE1BQU0sQ0FBQ2dCLE1BQU0sR0FBRzVCLEtBQUtZLE1BQU0sQ0FBQ2dCLE1BQU0sR0FBRyxLQUFLVjtRQUMzRSxNQUFNOEIsYUFBYTlELE9BQU95QixNQUFNLENBQUN6QixPQUFPeUIsTUFBTSxDQUFDLENBQUMsR0FBR1gsT0FBTztZQUFFOEI7WUFBT2lCLE9BQU9BLFFBQVEsS0FBS3RCLGlCQUFpQixJQUFJc0I7WUFBT0UsV0FBVy9CO1lBQUtJLFlBQVlDO1lBQVlhO1FBQWE7UUFDeEtZLFdBQVdwQyxNQUFNLEdBQUcxQixPQUFPeUIsTUFBTSxDQUFDekIsT0FBT3lCLE1BQU0sQ0FBQyxDQUFDLEdBQUdYLEtBQUtZLE1BQU0sR0FBRztZQUFFSSxPQUFPNkI7UUFBYTtRQUN4RixPQUFPLElBQUksQ0FBQ0ssR0FBRyxDQUFDQyxNQUFNLENBQUMsSUFBSSxFQUFFcEQsTUFBTU8sTUFBTTBDO0lBQzdDO0lBQ0EsbURBQW1EO0lBQ25ERixnQkFBZ0IvQyxJQUFJLEVBQUV3QixVQUFVLEVBQUVhLFlBQVksRUFBRTlCLElBQUksRUFBRTtRQUNsRCxJQUFJOEIsYUFBYWdCLEtBQUssQ0FBQyxLQUFLQyxNQUFNLEdBQUcsR0FBRztZQUNwQyxPQUFPLElBQUksQ0FBQ0MsY0FBYyxDQUFDO2dCQUN2QnZELE1BQU1BO2dCQUNOd0IsWUFBWUE7Z0JBQ1pnQyxXQUFXLElBQUksQ0FBQ3BCLElBQUksQ0FBQ0M7Z0JBQ3JCTixPQUFPeEIsU0FBUyxRQUFRQSxTQUFTLEtBQUssSUFBSSxLQUFLLElBQUlBLEtBQUtrRCxFQUFFO1lBQzlEO1FBQ0o7UUFDQSxPQUFPLElBQUksQ0FBQ0MscUJBQXFCLENBQUM7WUFDOUJDLFdBQVd0QjtZQUNYYjtRQUNKO0lBQ0o7SUFDQSxNQUFNb0MsaUJBQWlCNUQsSUFBSSxFQUFFYSxNQUFNLEVBQUVrQixLQUFLLEVBQUU7UUFDeEMsSUFBSXRCO1FBQ0osTUFBTW9ELHNCQUFzQjVCLHVCQUF1QmpDLE1BQU1iLE9BQU95QixNQUFNLENBQUN6QixPQUFPeUIsTUFBTSxDQUFDLENBQUMsR0FBR0MsU0FBUztZQUFFa0I7UUFBTTtRQUMxRyxNQUFNTSxlQUFlLENBQUM1QixLQUFLSSxPQUFPc0IsR0FBRyxNQUFNLFFBQVExQixPQUFPLEtBQUssSUFBSUEsS0FBSyxJQUFJLENBQUMyQixJQUFJLENBQUN5QjtRQUNsRixNQUFNQyxvQkFBb0IsSUFBSSxDQUFDUCxjQUFjLENBQUM7WUFDMUN2RDtZQUNBd0IsWUFBWTtZQUNaZ0MsV0FBVyxJQUFJLENBQUNwQixJQUFJLENBQUN5QjtZQUNyQjlCLE9BQU9BLFVBQVUsUUFBUUEsVUFBVSxLQUFLLElBQUlBLFFBQVFsQixPQUFPa0IsS0FBSztZQUNoRUksS0FBS3RCLE9BQU9zQixHQUFHO1FBQ25CO1FBQ0EsT0FBTyxJQUFJLENBQUNHLE9BQU8sQ0FBQ3NCLGdCQUFnQixDQUFDRSxtQkFBbUJELHFCQUFxQnhCO0lBQ2pGO0lBQ0EsTUFBTTBCLHNCQUFzQjFCLFlBQVksRUFBRTtRQUN0QyxNQUFNOUIsT0FBTyxJQUFJLENBQUN5RCxTQUFTLENBQUMzQjtRQUM1QixNQUFNeUIsb0JBQW9CLElBQUksQ0FBQ1AsY0FBYyxDQUFDO1lBQzFDdkQsTUFBTU8sS0FBS1AsSUFBSTtZQUNmd0IsWUFBWTtZQUNaZ0MsV0FBVyxJQUFJLENBQUNwQixJQUFJLENBQUNDO1lBQ3JCTixPQUFPeEIsS0FBS2tELEVBQUU7UUFDbEI7UUFDQSxPQUFPLElBQUksQ0FBQ25CLE9BQU8sQ0FBQ3NCLGdCQUFnQixDQUFDRSxtQkFBbUIsSUFBSXpCO0lBQ2hFO0lBQ0EsTUFBTTRCLGtCQUFrQnhCLE1BQU0sRUFBRU4sR0FBRyxFQUFFK0IsSUFBSSxFQUFFO1FBQ3ZDLE1BQU1DLFVBQVUsTUFBTTFCLE9BQU8yQixPQUFPLENBQUMsSUFBSSxDQUFDQyxLQUFLLENBQUMsWUFBWWxDO1FBQzVELElBQUlnQyxTQUFTO1lBQ1QsT0FBTztnQkFDSGhDO2dCQUNBbkMsTUFBTW1FLFFBQVFuRSxJQUFJO2dCQUNsQnFCLFNBQVNpRCxTQUFTSCxRQUFROUMsT0FBTyxLQUFLO2dCQUN0Q21CLElBQUkyQixRQUFRM0IsRUFBRSxJQUFJO2dCQUNsQjFCLFNBQVNxRCxRQUFRckQsT0FBTyxJQUFJO2dCQUM1QlcsT0FBTzBDLFFBQVExQyxLQUFLLElBQUk7Z0JBQ3hCeUM7WUFDSjtRQUNKO1FBQ0EsT0FBTyxJQUFJLENBQUNGLFNBQVMsQ0FBQzdCLEtBQUsrQjtJQUMvQjtJQUNBRixVQUFVN0IsR0FBRyxFQUFFK0IsSUFBSSxFQUFFO1FBQ2pCLE1BQU0zRCxPQUFPNEIsSUFBSWtCLEtBQUssQ0FBQztRQUN2QixNQUFNdkMsVUFBVVAsS0FBS2dFLEtBQUssQ0FBQyxHQUFHQyxJQUFJLENBQUMsUUFBUTtRQUMzQyxPQUFPO1lBQ0hyQztZQUNBbkMsTUFBTU8sSUFBSSxDQUFDLEVBQUU7WUFDYmtELElBQUlsRCxJQUFJLENBQUMsRUFBRSxJQUFJO1lBQ2ZjLFNBQVNpRCxTQUFTL0QsSUFBSSxDQUFDLEVBQUUsS0FBSztZQUM5QmlDLElBQUlqQyxJQUFJLENBQUMsRUFBRSxJQUFJO1lBQ2ZPO1lBQ0FvRDtRQUNKO0lBQ0o7SUFDQSxNQUFNTyxrQkFBa0JDLFFBQVEsQ0FBQyxFQUFFQyxNQUFNLENBQUMsQ0FBQyxFQUFFQyxNQUFNLEtBQUssRUFBRTtRQUN0RCxNQUFNbkMsU0FBUyxNQUFNLElBQUksQ0FBQ0EsTUFBTTtRQUNoQyxNQUFNTixNQUFNLElBQUksQ0FBQzBDLElBQUksQ0FBQ2hFLE1BQU07UUFDNUIsTUFBTWlFLFNBQVNGLE1BQ1QsTUFBTW5DLE9BQU9zQyxNQUFNLENBQUM1QyxLQUFLdUMsT0FBT0MsS0FBSyxnQkFDckMsTUFBTWxDLE9BQU91QyxTQUFTLENBQUM3QyxLQUFLdUMsT0FBT0MsS0FBSztRQUM5QyxNQUFNTSxPQUFPLEVBQUU7UUFDZixJQUFLLElBQUlDLElBQUksR0FBR0EsSUFBSUosT0FBT3hCLE1BQU0sRUFBRTRCLEtBQUssRUFBRztZQUN2Q0QsS0FBS0UsSUFBSSxDQUFDLElBQUksQ0FBQ2xCLGlCQUFpQixDQUFDeEIsUUFBUXFDLE1BQU0sQ0FBQ0ksRUFBRSxFQUFFWixTQUFTUSxNQUFNLENBQUNJLElBQUksRUFBRTtRQUM5RTtRQUNBLE9BQU9FLFFBQVFDLEdBQUcsQ0FBQ0o7SUFDdkI7SUFDQSxNQUFNSyxxQkFBcUI7UUFDdkIsTUFBTTdDLFNBQVMsTUFBTSxJQUFJLENBQUNBLE1BQU07UUFDaEMsT0FBT0EsT0FBTzhDLEtBQUssQ0FBQyxJQUFJLENBQUNsQixLQUFLLENBQUM7SUFDbkM7SUFDQWpDLEtBQUtvRCxHQUFHLEVBQUU7UUFDTixPQUFPLENBQUMsR0FBRzVGLFNBQVM2RixVQUFVLEVBQUUsSUFBSSxDQUFDcEYsc0JBQXNCLEVBQUVxRixNQUFNLENBQUNGLEtBQUtHLE1BQU0sQ0FBQztJQUNwRjtJQUNBakMsc0JBQXNCLEVBQUVsQyxVQUFVLEVBQUVtQyxTQUFTLEVBQUcsRUFBRTtRQUM5QyxPQUFPLENBQUMsT0FBTyxFQUFFQSxVQUFVLENBQUMsRUFBRW5DLFdBQVcsQ0FBQztJQUM5QztJQUNBK0IsZUFBZSxFQUFFdkQsSUFBSSxFQUFFd0IsVUFBVSxFQUFFZ0MsU0FBUyxFQUFFekIsS0FBSyxFQUFFSSxHQUFHLEVBQUcsRUFBRTtRQUN6RCxNQUFNeUQsV0FBV3pELFFBQVEsUUFBUUEsUUFBUSxLQUFLLElBQUlBLE1BQU0sSUFBSSxDQUFDQyxJQUFJLENBQUMsQ0FBQyxFQUFFcEMsS0FBSyxFQUFFK0IsU0FBUyxHQUFHLEVBQUV5QixVQUFVLENBQUM7UUFDckcsT0FBTyxDQUFDLE9BQU8sRUFBRW9DLFNBQVMsQ0FBQyxFQUFFcEUsV0FBVyxDQUFDO0lBQzdDO0FBQ0o7QUFDQW5DLGNBQWMsR0FBR0c7QUFDakIsU0FBU3lDLHVCQUF1QmpDLElBQUksRUFBRWEsTUFBTTtJQUN4QyxNQUFNUSxVQUFVUixPQUFPUSxPQUFPLEdBQUcsSUFBSUQsS0FBS1AsT0FBT1EsT0FBTyxFQUFFQyxPQUFPLEtBQUs7SUFDdEUsTUFBTWtCLEtBQUszQixPQUFPMkIsRUFBRSxJQUFJO0lBQ3hCLE1BQU0xQixVQUFVRCxPQUFPQyxPQUFPO0lBQzlCLE1BQU0rRSxTQUFTLENBQUMvRSxVQUFVQSxVQUFVZ0YsT0FBT2pGLE9BQU9ZLEtBQUssTUFBTTtJQUM3RCxNQUFNTSxRQUFRbEIsT0FBT2tCLEtBQUssR0FBR2xCLE9BQU9rQixLQUFLLEdBQUc7SUFDNUMsT0FBTyxDQUFDLEVBQUUvQixLQUFLLENBQUMsRUFBRStCLE1BQU0sQ0FBQyxFQUFFVixRQUFRLENBQUMsRUFBRW1CLEdBQUcsQ0FBQyxFQUFFcUQsT0FBTyxDQUFDO0FBQ3hEO0FBQ0EsTUFBTXRHLGdCQUFnQixDQUFDd0csUUFBUTlGO0lBQzNCLE1BQU1hLFVBQVViLEtBQUthLE9BQU87SUFDNUIsSUFBSUEsV0FBV2IsS0FBS3dCLEtBQUssRUFBRTtRQUN2QixNQUFNLElBQUl1RSxNQUFNO0lBQ3BCO0lBQ0EsSUFBSS9GLEtBQUt3QixLQUFLLEVBQUU7UUFDWixPQUFRd0UsS0FBS0MsS0FBSyxDQUFDSCxTQUFTOUYsS0FBS3dCLEtBQUssSUFBSXhCLEtBQUt3QixLQUFLLEdBQy9DeEIsQ0FBQUEsS0FBSzJCLFdBQVcsR0FBRyxJQUFJM0IsS0FBS3dCLEtBQUs7SUFDMUM7SUFDQSxNQUFNMEUsY0FBY2xHLEtBQUttRyxTQUFTLElBQUksSUFBSWhGLEtBQUtuQixLQUFLbUcsU0FBUyxJQUFJLElBQUloRixLQUFLMkUsVUFDcEUsSUFBSTNFLEtBQUtuQixLQUFLbUcsU0FBUyxJQUN2QixJQUFJaEYsS0FBSzJFO0lBQ2YsTUFBTU0sV0FBVyxDQUFDLEdBQUcxRyxjQUFjMkcsZUFBZSxFQUFFeEYsU0FBUzNCLE9BQU95QixNQUFNLENBQUN6QixPQUFPeUIsTUFBTSxDQUFDLENBQUMsR0FBR1gsT0FBTztRQUFFa0c7SUFBWTtJQUNsSCxJQUFJO1FBQ0EsSUFBSWxHLEtBQUsyQixXQUFXLEVBQUU7WUFDbEIsT0FBTyxJQUFJUixPQUFPRSxPQUFPO1FBQzdCLE9BQ0s7WUFDRCxPQUFPK0UsU0FBU25DLElBQUksR0FBRzVDLE9BQU87UUFDbEM7SUFDSixFQUNBLE9BQU9pRixHQUFHO0lBQ04sZUFBZTtJQUNuQjtBQUNKO0FBQ0FsSCxxQkFBcUIsR0FBR0UsZUFDeEIsa0NBQWtDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb25seWZhbnMtcGxhdGZvcm0vLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL2NsYXNzZXMvcmVwZWF0LmpzPzRiZjAiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLmdldE5leHRNaWxsaXMgPSBleHBvcnRzLlJlcGVhdCA9IHZvaWQgMDtcbmNvbnN0IHRzbGliXzEgPSByZXF1aXJlKFwidHNsaWJcIik7XG5jb25zdCBjcm9uX3BhcnNlcl8xID0gcmVxdWlyZShcImNyb24tcGFyc2VyXCIpO1xuY29uc3QgY3J5cHRvXzEgPSByZXF1aXJlKFwiY3J5cHRvXCIpO1xuY29uc3QgcXVldWVfYmFzZV8xID0gcmVxdWlyZShcIi4vcXVldWUtYmFzZVwiKTtcbmNsYXNzIFJlcGVhdCBleHRlbmRzIHF1ZXVlX2Jhc2VfMS5RdWV1ZUJhc2Uge1xuICAgIGNvbnN0cnVjdG9yKG5hbWUsIG9wdHMsIENvbm5lY3Rpb24pIHtcbiAgICAgICAgc3VwZXIobmFtZSwgb3B0cywgQ29ubmVjdGlvbik7XG4gICAgICAgIHRoaXMucmVwZWF0U3RyYXRlZ3kgPVxuICAgICAgICAgICAgKG9wdHMuc2V0dGluZ3MgJiYgb3B0cy5zZXR0aW5ncy5yZXBlYXRTdHJhdGVneSkgfHwgZXhwb3J0cy5nZXROZXh0TWlsbGlzO1xuICAgICAgICB0aGlzLnJlcGVhdEtleUhhc2hBbGdvcml0aG0gPVxuICAgICAgICAgICAgKG9wdHMuc2V0dGluZ3MgJiYgb3B0cy5zZXR0aW5ncy5yZXBlYXRLZXlIYXNoQWxnb3JpdGhtKSB8fCAnbWQ1JztcbiAgICB9XG4gICAgYXN5bmMgdXBkYXRlUmVwZWF0YWJsZUpvYihuYW1lLCBkYXRhLCBvcHRzLCB7IG92ZXJyaWRlIH0pIHtcbiAgICAgICAgdmFyIF9hLCBfYjtcbiAgICAgICAgLy8gQmFja3dhcmRzIGNvbXBhdGliaWxpdHkgZm9yIHJlcGVhdGFibGUgam9icyBmb3IgdmVyc2lvbnMgPD0gMy4wLjBcbiAgICAgICAgY29uc3QgcmVwZWF0T3B0cyA9IE9iamVjdC5hc3NpZ24oe30sIG9wdHMucmVwZWF0KTtcbiAgICAgICAgKF9hID0gcmVwZWF0T3B0cy5wYXR0ZXJuKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiAocmVwZWF0T3B0cy5wYXR0ZXJuID0gcmVwZWF0T3B0cy5jcm9uKTtcbiAgICAgICAgZGVsZXRlIHJlcGVhdE9wdHMuY3JvbjtcbiAgICAgICAgLy8gQ2hlY2sgaWYgd2UgcmVhY2hlZCB0aGUgbGltaXQgb2YgdGhlIHJlcGVhdGFibGUgam9iJ3MgaXRlcmF0aW9uc1xuICAgICAgICBjb25zdCBpdGVyYXRpb25Db3VudCA9IHJlcGVhdE9wdHMuY291bnQgPyByZXBlYXRPcHRzLmNvdW50ICsgMSA6IDE7XG4gICAgICAgIGlmICh0eXBlb2YgcmVwZWF0T3B0cy5saW1pdCAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgICAgIGl0ZXJhdGlvbkNvdW50ID4gcmVwZWF0T3B0cy5saW1pdCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIENoZWNrIGlmIHdlIHJlYWNoZWQgdGhlIGVuZCBkYXRlIG9mIHRoZSByZXBlYXRhYmxlIGpvYlxuICAgICAgICBsZXQgbm93ID0gRGF0ZS5ub3coKTtcbiAgICAgICAgY29uc3QgeyBlbmREYXRlIH0gPSByZXBlYXRPcHRzO1xuICAgICAgICBpZiAoZW5kRGF0ZSAmJiBub3cgPiBuZXcgRGF0ZShlbmREYXRlKS5nZXRUaW1lKCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwcmV2TWlsbGlzID0gb3B0cy5wcmV2TWlsbGlzIHx8IDA7XG4gICAgICAgIG5vdyA9IHByZXZNaWxsaXMgPCBub3cgPyBub3cgOiBwcmV2TWlsbGlzO1xuICAgICAgICBjb25zdCBuZXh0TWlsbGlzID0gYXdhaXQgdGhpcy5yZXBlYXRTdHJhdGVneShub3csIHJlcGVhdE9wdHMsIG5hbWUpO1xuICAgICAgICBjb25zdCB7IGV2ZXJ5LCBwYXR0ZXJuIH0gPSByZXBlYXRPcHRzO1xuICAgICAgICBjb25zdCBoYXNJbW1lZGlhdGVseSA9IEJvb2xlYW4oKGV2ZXJ5IHx8IHBhdHRlcm4pICYmIHJlcGVhdE9wdHMuaW1tZWRpYXRlbHkpO1xuICAgICAgICBjb25zdCBvZmZzZXQgPSBoYXNJbW1lZGlhdGVseSAmJiBldmVyeSA/IG5vdyAtIG5leHRNaWxsaXMgOiB1bmRlZmluZWQ7XG4gICAgICAgIGlmIChuZXh0TWlsbGlzKSB7XG4gICAgICAgICAgICAvLyBXZSBzdG9yZSB0aGUgdW5kZWNvcmF0ZWQgb3B0cy5qb2JJZCBpbnRvIHRoZSByZXBlYXQgb3B0aW9uc1xuICAgICAgICAgICAgaWYgKCFwcmV2TWlsbGlzICYmIG9wdHMuam9iSWQpIHtcbiAgICAgICAgICAgICAgICByZXBlYXRPcHRzLmpvYklkID0gb3B0cy5qb2JJZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGxlZ2FjeVJlcGVhdEtleSA9IGdldFJlcGVhdENvbmNhdE9wdGlvbnMobmFtZSwgcmVwZWF0T3B0cyk7XG4gICAgICAgICAgICBjb25zdCBuZXdSZXBlYXRLZXkgPSAoX2IgPSBvcHRzLnJlcGVhdC5rZXkpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IHRoaXMuaGFzaChsZWdhY3lSZXBlYXRLZXkpO1xuICAgICAgICAgICAgbGV0IHJlcGVhdEpvYktleTtcbiAgICAgICAgICAgIGlmIChvdmVycmlkZSkge1xuICAgICAgICAgICAgICAgIHJlcGVhdEpvYktleSA9IGF3YWl0IHRoaXMuc2NyaXB0cy5hZGRSZXBlYXRhYmxlSm9iKG5ld1JlcGVhdEtleSwgbmV4dE1pbGxpcywge1xuICAgICAgICAgICAgICAgICAgICBuYW1lLFxuICAgICAgICAgICAgICAgICAgICBlbmREYXRlOiBlbmREYXRlID8gbmV3IERhdGUoZW5kRGF0ZSkuZ2V0VGltZSgpIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgICAgICB0ejogcmVwZWF0T3B0cy50eixcbiAgICAgICAgICAgICAgICAgICAgcGF0dGVybixcbiAgICAgICAgICAgICAgICAgICAgZXZlcnksXG4gICAgICAgICAgICAgICAgfSwgbGVnYWN5UmVwZWF0S2V5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNsaWVudCA9IGF3YWl0IHRoaXMuY2xpZW50O1xuICAgICAgICAgICAgICAgIHJlcGVhdEpvYktleSA9IGF3YWl0IHRoaXMuc2NyaXB0cy51cGRhdGVSZXBlYXRhYmxlSm9iTWlsbGlzKGNsaWVudCwgbmV3UmVwZWF0S2V5LCBuZXh0TWlsbGlzLCBsZWdhY3lSZXBlYXRLZXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgeyBpbW1lZGlhdGVseSB9ID0gcmVwZWF0T3B0cywgZmlsdGVyZWRSZXBlYXRPcHRzID0gdHNsaWJfMS5fX3Jlc3QocmVwZWF0T3B0cywgW1wiaW1tZWRpYXRlbHlcIl0pO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY3JlYXRlTmV4dEpvYihuYW1lLCBuZXh0TWlsbGlzLCByZXBlYXRKb2JLZXksIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgb3B0cyksIHsgcmVwZWF0OiBPYmplY3QuYXNzaWduKHsgb2Zmc2V0IH0sIGZpbHRlcmVkUmVwZWF0T3B0cykgfSksIGRhdGEsIGl0ZXJhdGlvbkNvdW50LCBoYXNJbW1lZGlhdGVseSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgY3JlYXRlTmV4dEpvYihuYW1lLCBuZXh0TWlsbGlzLCByZXBlYXRKb2JLZXksIG9wdHMsIGRhdGEsIGN1cnJlbnRDb3VudCwgaGFzSW1tZWRpYXRlbHkpIHtcbiAgICAgICAgLy9cbiAgICAgICAgLy8gR2VuZXJhdGUgdW5pcXVlIGpvYiBpZCBmb3IgdGhpcyBpdGVyYXRpb24uXG4gICAgICAgIC8vXG4gICAgICAgIGNvbnN0IGpvYklkID0gdGhpcy5nZXRSZXBlYXRKb2JLZXkobmFtZSwgbmV4dE1pbGxpcywgcmVwZWF0Sm9iS2V5LCBkYXRhKTtcbiAgICAgICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcbiAgICAgICAgY29uc3QgZGVsYXkgPSBuZXh0TWlsbGlzICsgKG9wdHMucmVwZWF0Lm9mZnNldCA/IG9wdHMucmVwZWF0Lm9mZnNldCA6IDApIC0gbm93O1xuICAgICAgICBjb25zdCBtZXJnZWRPcHRzID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBvcHRzKSwgeyBqb2JJZCwgZGVsYXk6IGRlbGF5IDwgMCB8fCBoYXNJbW1lZGlhdGVseSA/IDAgOiBkZWxheSwgdGltZXN0YW1wOiBub3csIHByZXZNaWxsaXM6IG5leHRNaWxsaXMsIHJlcGVhdEpvYktleSB9KTtcbiAgICAgICAgbWVyZ2VkT3B0cy5yZXBlYXQgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIG9wdHMucmVwZWF0KSwgeyBjb3VudDogY3VycmVudENvdW50IH0pO1xuICAgICAgICByZXR1cm4gdGhpcy5Kb2IuY3JlYXRlKHRoaXMsIG5hbWUsIGRhdGEsIG1lcmdlZE9wdHMpO1xuICAgIH1cbiAgICAvLyBUT0RPOiByZW1vdmUgbGVnYWN5IGNvZGUgaW4gbmV4dCBicmVha2luZyBjaGFuZ2VcbiAgICBnZXRSZXBlYXRKb2JLZXkobmFtZSwgbmV4dE1pbGxpcywgcmVwZWF0Sm9iS2V5LCBkYXRhKSB7XG4gICAgICAgIGlmIChyZXBlYXRKb2JLZXkuc3BsaXQoJzonKS5sZW5ndGggPiAyKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRSZXBlYXRKb2JJZCh7XG4gICAgICAgICAgICAgICAgbmFtZTogbmFtZSxcbiAgICAgICAgICAgICAgICBuZXh0TWlsbGlzOiBuZXh0TWlsbGlzLFxuICAgICAgICAgICAgICAgIG5hbWVzcGFjZTogdGhpcy5oYXNoKHJlcGVhdEpvYktleSksXG4gICAgICAgICAgICAgICAgam9iSWQ6IGRhdGEgPT09IG51bGwgfHwgZGF0YSA9PT0gdm9pZCAwID8gdm9pZCAwIDogZGF0YS5pZCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmdldFJlcGVhdERlbGF5ZWRKb2JJZCh7XG4gICAgICAgICAgICBjdXN0b21LZXk6IHJlcGVhdEpvYktleSxcbiAgICAgICAgICAgIG5leHRNaWxsaXMsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyByZW1vdmVSZXBlYXRhYmxlKG5hbWUsIHJlcGVhdCwgam9iSWQpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICBjb25zdCByZXBlYXRDb25jYXRPcHRpb25zID0gZ2V0UmVwZWF0Q29uY2F0T3B0aW9ucyhuYW1lLCBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHJlcGVhdCksIHsgam9iSWQgfSkpO1xuICAgICAgICBjb25zdCByZXBlYXRKb2JLZXkgPSAoX2EgPSByZXBlYXQua2V5KSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiB0aGlzLmhhc2gocmVwZWF0Q29uY2F0T3B0aW9ucyk7XG4gICAgICAgIGNvbnN0IGxlZ2FjeVJlcGVhdEpvYklkID0gdGhpcy5nZXRSZXBlYXRKb2JJZCh7XG4gICAgICAgICAgICBuYW1lLFxuICAgICAgICAgICAgbmV4dE1pbGxpczogJycsXG4gICAgICAgICAgICBuYW1lc3BhY2U6IHRoaXMuaGFzaChyZXBlYXRDb25jYXRPcHRpb25zKSxcbiAgICAgICAgICAgIGpvYklkOiBqb2JJZCAhPT0gbnVsbCAmJiBqb2JJZCAhPT0gdm9pZCAwID8gam9iSWQgOiByZXBlYXQuam9iSWQsXG4gICAgICAgICAgICBrZXk6IHJlcGVhdC5rZXksXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gdGhpcy5zY3JpcHRzLnJlbW92ZVJlcGVhdGFibGUobGVnYWN5UmVwZWF0Sm9iSWQsIHJlcGVhdENvbmNhdE9wdGlvbnMsIHJlcGVhdEpvYktleSk7XG4gICAgfVxuICAgIGFzeW5jIHJlbW92ZVJlcGVhdGFibGVCeUtleShyZXBlYXRKb2JLZXkpIHtcbiAgICAgICAgY29uc3QgZGF0YSA9IHRoaXMua2V5VG9EYXRhKHJlcGVhdEpvYktleSk7XG4gICAgICAgIGNvbnN0IGxlZ2FjeVJlcGVhdEpvYklkID0gdGhpcy5nZXRSZXBlYXRKb2JJZCh7XG4gICAgICAgICAgICBuYW1lOiBkYXRhLm5hbWUsXG4gICAgICAgICAgICBuZXh0TWlsbGlzOiAnJyxcbiAgICAgICAgICAgIG5hbWVzcGFjZTogdGhpcy5oYXNoKHJlcGVhdEpvYktleSksXG4gICAgICAgICAgICBqb2JJZDogZGF0YS5pZCxcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB0aGlzLnNjcmlwdHMucmVtb3ZlUmVwZWF0YWJsZShsZWdhY3lSZXBlYXRKb2JJZCwgJycsIHJlcGVhdEpvYktleSk7XG4gICAgfVxuICAgIGFzeW5jIGdldFJlcGVhdGFibGVEYXRhKGNsaWVudCwga2V5LCBuZXh0KSB7XG4gICAgICAgIGNvbnN0IGpvYkRhdGEgPSBhd2FpdCBjbGllbnQuaGdldGFsbCh0aGlzLnRvS2V5KCdyZXBlYXQ6JyArIGtleSkpO1xuICAgICAgICBpZiAoam9iRGF0YSkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBrZXksXG4gICAgICAgICAgICAgICAgbmFtZTogam9iRGF0YS5uYW1lLFxuICAgICAgICAgICAgICAgIGVuZERhdGU6IHBhcnNlSW50KGpvYkRhdGEuZW5kRGF0ZSkgfHwgbnVsbCxcbiAgICAgICAgICAgICAgICB0ejogam9iRGF0YS50eiB8fCBudWxsLFxuICAgICAgICAgICAgICAgIHBhdHRlcm46IGpvYkRhdGEucGF0dGVybiB8fCBudWxsLFxuICAgICAgICAgICAgICAgIGV2ZXJ5OiBqb2JEYXRhLmV2ZXJ5IHx8IG51bGwsXG4gICAgICAgICAgICAgICAgbmV4dCxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMua2V5VG9EYXRhKGtleSwgbmV4dCk7XG4gICAgfVxuICAgIGtleVRvRGF0YShrZXksIG5leHQpIHtcbiAgICAgICAgY29uc3QgZGF0YSA9IGtleS5zcGxpdCgnOicpO1xuICAgICAgICBjb25zdCBwYXR0ZXJuID0gZGF0YS5zbGljZSg0KS5qb2luKCc6JykgfHwgbnVsbDtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGtleSxcbiAgICAgICAgICAgIG5hbWU6IGRhdGFbMF0sXG4gICAgICAgICAgICBpZDogZGF0YVsxXSB8fCBudWxsLFxuICAgICAgICAgICAgZW5kRGF0ZTogcGFyc2VJbnQoZGF0YVsyXSkgfHwgbnVsbCxcbiAgICAgICAgICAgIHR6OiBkYXRhWzNdIHx8IG51bGwsXG4gICAgICAgICAgICBwYXR0ZXJuLFxuICAgICAgICAgICAgbmV4dCxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgYXN5bmMgZ2V0UmVwZWF0YWJsZUpvYnMoc3RhcnQgPSAwLCBlbmQgPSAtMSwgYXNjID0gZmFsc2UpIHtcbiAgICAgICAgY29uc3QgY2xpZW50ID0gYXdhaXQgdGhpcy5jbGllbnQ7XG4gICAgICAgIGNvbnN0IGtleSA9IHRoaXMua2V5cy5yZXBlYXQ7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGFzY1xuICAgICAgICAgICAgPyBhd2FpdCBjbGllbnQuenJhbmdlKGtleSwgc3RhcnQsIGVuZCwgJ1dJVEhTQ09SRVMnKVxuICAgICAgICAgICAgOiBhd2FpdCBjbGllbnQuenJldnJhbmdlKGtleSwgc3RhcnQsIGVuZCwgJ1dJVEhTQ09SRVMnKTtcbiAgICAgICAgY29uc3Qgam9icyA9IFtdO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlc3VsdC5sZW5ndGg7IGkgKz0gMikge1xuICAgICAgICAgICAgam9icy5wdXNoKHRoaXMuZ2V0UmVwZWF0YWJsZURhdGEoY2xpZW50LCByZXN1bHRbaV0sIHBhcnNlSW50KHJlc3VsdFtpICsgMV0pKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKGpvYnMpO1xuICAgIH1cbiAgICBhc3luYyBnZXRSZXBlYXRhYmxlQ291bnQoKSB7XG4gICAgICAgIGNvbnN0IGNsaWVudCA9IGF3YWl0IHRoaXMuY2xpZW50O1xuICAgICAgICByZXR1cm4gY2xpZW50LnpjYXJkKHRoaXMudG9LZXkoJ3JlcGVhdCcpKTtcbiAgICB9XG4gICAgaGFzaChzdHIpIHtcbiAgICAgICAgcmV0dXJuICgwLCBjcnlwdG9fMS5jcmVhdGVIYXNoKSh0aGlzLnJlcGVhdEtleUhhc2hBbGdvcml0aG0pLnVwZGF0ZShzdHIpLmRpZ2VzdCgnaGV4Jyk7XG4gICAgfVxuICAgIGdldFJlcGVhdERlbGF5ZWRKb2JJZCh7IG5leHRNaWxsaXMsIGN1c3RvbUtleSwgfSkge1xuICAgICAgICByZXR1cm4gYHJlcGVhdDoke2N1c3RvbUtleX06JHtuZXh0TWlsbGlzfWA7XG4gICAgfVxuICAgIGdldFJlcGVhdEpvYklkKHsgbmFtZSwgbmV4dE1pbGxpcywgbmFtZXNwYWNlLCBqb2JJZCwga2V5LCB9KSB7XG4gICAgICAgIGNvbnN0IGNoZWNrc3VtID0ga2V5ICE9PSBudWxsICYmIGtleSAhPT0gdm9pZCAwID8ga2V5IDogdGhpcy5oYXNoKGAke25hbWV9JHtqb2JJZCB8fCAnJ30ke25hbWVzcGFjZX1gKTtcbiAgICAgICAgcmV0dXJuIGByZXBlYXQ6JHtjaGVja3N1bX06JHtuZXh0TWlsbGlzfWA7XG4gICAgfVxufVxuZXhwb3J0cy5SZXBlYXQgPSBSZXBlYXQ7XG5mdW5jdGlvbiBnZXRSZXBlYXRDb25jYXRPcHRpb25zKG5hbWUsIHJlcGVhdCkge1xuICAgIGNvbnN0IGVuZERhdGUgPSByZXBlYXQuZW5kRGF0ZSA/IG5ldyBEYXRlKHJlcGVhdC5lbmREYXRlKS5nZXRUaW1lKCkgOiAnJztcbiAgICBjb25zdCB0eiA9IHJlcGVhdC50eiB8fCAnJztcbiAgICBjb25zdCBwYXR0ZXJuID0gcmVwZWF0LnBhdHRlcm47XG4gICAgY29uc3Qgc3VmZml4ID0gKHBhdHRlcm4gPyBwYXR0ZXJuIDogU3RyaW5nKHJlcGVhdC5ldmVyeSkpIHx8ICcnO1xuICAgIGNvbnN0IGpvYklkID0gcmVwZWF0LmpvYklkID8gcmVwZWF0LmpvYklkIDogJyc7XG4gICAgcmV0dXJuIGAke25hbWV9OiR7am9iSWR9OiR7ZW5kRGF0ZX06JHt0en06JHtzdWZmaXh9YDtcbn1cbmNvbnN0IGdldE5leHRNaWxsaXMgPSAobWlsbGlzLCBvcHRzKSA9PiB7XG4gICAgY29uc3QgcGF0dGVybiA9IG9wdHMucGF0dGVybjtcbiAgICBpZiAocGF0dGVybiAmJiBvcHRzLmV2ZXJ5KSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignQm90aCAucGF0dGVybiBhbmQgLmV2ZXJ5IG9wdGlvbnMgYXJlIGRlZmluZWQgZm9yIHRoaXMgcmVwZWF0YWJsZSBqb2InKTtcbiAgICB9XG4gICAgaWYgKG9wdHMuZXZlcnkpIHtcbiAgICAgICAgcmV0dXJuIChNYXRoLmZsb29yKG1pbGxpcyAvIG9wdHMuZXZlcnkpICogb3B0cy5ldmVyeSArXG4gICAgICAgICAgICAob3B0cy5pbW1lZGlhdGVseSA/IDAgOiBvcHRzLmV2ZXJ5KSk7XG4gICAgfVxuICAgIGNvbnN0IGN1cnJlbnREYXRlID0gb3B0cy5zdGFydERhdGUgJiYgbmV3IERhdGUob3B0cy5zdGFydERhdGUpID4gbmV3IERhdGUobWlsbGlzKVxuICAgICAgICA/IG5ldyBEYXRlKG9wdHMuc3RhcnREYXRlKVxuICAgICAgICA6IG5ldyBEYXRlKG1pbGxpcyk7XG4gICAgY29uc3QgaW50ZXJ2YWwgPSAoMCwgY3Jvbl9wYXJzZXJfMS5wYXJzZUV4cHJlc3Npb24pKHBhdHRlcm4sIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgb3B0cyksIHsgY3VycmVudERhdGUgfSkpO1xuICAgIHRyeSB7XG4gICAgICAgIGlmIChvcHRzLmltbWVkaWF0ZWx5KSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gaW50ZXJ2YWwubmV4dCgpLmdldFRpbWUoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjYXRjaCAoZSkge1xuICAgICAgICAvLyBJZ25vcmUgZXJyb3JcbiAgICB9XG59O1xuZXhwb3J0cy5nZXROZXh0TWlsbGlzID0gZ2V0TmV4dE1pbGxpcztcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJlcGVhdC5qcy5tYXAiXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJnZXROZXh0TWlsbGlzIiwiUmVwZWF0IiwidHNsaWJfMSIsInJlcXVpcmUiLCJjcm9uX3BhcnNlcl8xIiwiY3J5cHRvXzEiLCJxdWV1ZV9iYXNlXzEiLCJRdWV1ZUJhc2UiLCJjb25zdHJ1Y3RvciIsIm5hbWUiLCJvcHRzIiwiQ29ubmVjdGlvbiIsInJlcGVhdFN0cmF0ZWd5Iiwic2V0dGluZ3MiLCJyZXBlYXRLZXlIYXNoQWxnb3JpdGhtIiwidXBkYXRlUmVwZWF0YWJsZUpvYiIsImRhdGEiLCJvdmVycmlkZSIsIl9hIiwiX2IiLCJyZXBlYXRPcHRzIiwiYXNzaWduIiwicmVwZWF0IiwicGF0dGVybiIsImNyb24iLCJpdGVyYXRpb25Db3VudCIsImNvdW50IiwibGltaXQiLCJub3ciLCJEYXRlIiwiZW5kRGF0ZSIsImdldFRpbWUiLCJwcmV2TWlsbGlzIiwibmV4dE1pbGxpcyIsImV2ZXJ5IiwiaGFzSW1tZWRpYXRlbHkiLCJCb29sZWFuIiwiaW1tZWRpYXRlbHkiLCJvZmZzZXQiLCJ1bmRlZmluZWQiLCJqb2JJZCIsImxlZ2FjeVJlcGVhdEtleSIsImdldFJlcGVhdENvbmNhdE9wdGlvbnMiLCJuZXdSZXBlYXRLZXkiLCJrZXkiLCJoYXNoIiwicmVwZWF0Sm9iS2V5Iiwic2NyaXB0cyIsImFkZFJlcGVhdGFibGVKb2IiLCJ0eiIsImNsaWVudCIsInVwZGF0ZVJlcGVhdGFibGVKb2JNaWxsaXMiLCJmaWx0ZXJlZFJlcGVhdE9wdHMiLCJfX3Jlc3QiLCJjcmVhdGVOZXh0Sm9iIiwiY3VycmVudENvdW50IiwiZ2V0UmVwZWF0Sm9iS2V5IiwiZGVsYXkiLCJtZXJnZWRPcHRzIiwidGltZXN0YW1wIiwiSm9iIiwiY3JlYXRlIiwic3BsaXQiLCJsZW5ndGgiLCJnZXRSZXBlYXRKb2JJZCIsIm5hbWVzcGFjZSIsImlkIiwiZ2V0UmVwZWF0RGVsYXllZEpvYklkIiwiY3VzdG9tS2V5IiwicmVtb3ZlUmVwZWF0YWJsZSIsInJlcGVhdENvbmNhdE9wdGlvbnMiLCJsZWdhY3lSZXBlYXRKb2JJZCIsInJlbW92ZVJlcGVhdGFibGVCeUtleSIsImtleVRvRGF0YSIsImdldFJlcGVhdGFibGVEYXRhIiwibmV4dCIsImpvYkRhdGEiLCJoZ2V0YWxsIiwidG9LZXkiLCJwYXJzZUludCIsInNsaWNlIiwiam9pbiIsImdldFJlcGVhdGFibGVKb2JzIiwic3RhcnQiLCJlbmQiLCJhc2MiLCJrZXlzIiwicmVzdWx0IiwienJhbmdlIiwienJldnJhbmdlIiwiam9icyIsImkiLCJwdXNoIiwiUHJvbWlzZSIsImFsbCIsImdldFJlcGVhdGFibGVDb3VudCIsInpjYXJkIiwic3RyIiwiY3JlYXRlSGFzaCIsInVwZGF0ZSIsImRpZ2VzdCIsImNoZWNrc3VtIiwic3VmZml4IiwiU3RyaW5nIiwibWlsbGlzIiwiRXJyb3IiLCJNYXRoIiwiZmxvb3IiLCJjdXJyZW50RGF0ZSIsInN0YXJ0RGF0ZSIsImludGVydmFsIiwicGFyc2VFeHByZXNzaW9uIiwiZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/classes/repeat.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/classes/sandbox.js":
/*!*********************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/classes/sandbox.js ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nconst enums_1 = __webpack_require__(/*! ../enums */ \"(rsc)/./node_modules/bullmq/dist/cjs/enums/index.js\");\nconst sandbox = (processFile, childPool)=>{\n    return async function process(job, token) {\n        let child;\n        let msgHandler;\n        let exitHandler;\n        try {\n            const done = new Promise((resolve, reject)=>{\n                const initChild = async ()=>{\n                    try {\n                        exitHandler = (exitCode, signal)=>{\n                            reject(new Error(\"Unexpected exit code: \" + exitCode + \" signal: \" + signal));\n                        };\n                        child = await childPool.retain(processFile);\n                        child.on(\"exit\", exitHandler);\n                        msgHandler = async (msg)=>{\n                            var _a, _b, _c, _d, _e;\n                            try {\n                                switch(msg.cmd){\n                                    case enums_1.ParentCommand.Completed:\n                                        resolve(msg.value);\n                                        break;\n                                    case enums_1.ParentCommand.Failed:\n                                    case enums_1.ParentCommand.Error:\n                                        {\n                                            const err = new Error();\n                                            Object.assign(err, msg.value);\n                                            reject(err);\n                                            break;\n                                        }\n                                    case enums_1.ParentCommand.Progress:\n                                        await job.updateProgress(msg.value);\n                                        break;\n                                    case enums_1.ParentCommand.Log:\n                                        await job.log(msg.value);\n                                        break;\n                                    case enums_1.ParentCommand.MoveToDelayed:\n                                        await job.moveToDelayed((_a = msg.value) === null || _a === void 0 ? void 0 : _a.timestamp, (_b = msg.value) === null || _b === void 0 ? void 0 : _b.token);\n                                        break;\n                                    case enums_1.ParentCommand.MoveToWait:\n                                        await job.moveToWait((_c = msg.value) === null || _c === void 0 ? void 0 : _c.token);\n                                        break;\n                                    case enums_1.ParentCommand.MoveToWaitingChildren:\n                                        {\n                                            const value = await job.moveToWaitingChildren((_d = msg.value) === null || _d === void 0 ? void 0 : _d.token, (_e = msg.value) === null || _e === void 0 ? void 0 : _e.opts);\n                                            child.send({\n                                                requestId: msg.requestId,\n                                                cmd: enums_1.ChildCommand.MoveToWaitingChildrenResponse,\n                                                value\n                                            });\n                                        }\n                                        break;\n                                    case enums_1.ParentCommand.Update:\n                                        await job.updateData(msg.value);\n                                        break;\n                                    case enums_1.ParentCommand.GetChildrenValues:\n                                        {\n                                            const value = await job.getChildrenValues();\n                                            child.send({\n                                                requestId: msg.requestId,\n                                                cmd: enums_1.ChildCommand.GetChildrenValuesResponse,\n                                                value\n                                            });\n                                        }\n                                        break;\n                                    case enums_1.ParentCommand.GetIgnoredChildrenFailures:\n                                        {\n                                            const value = await job.getIgnoredChildrenFailures();\n                                            child.send({\n                                                requestId: msg.requestId,\n                                                cmd: enums_1.ChildCommand.GetIgnoredChildrenFailuresResponse,\n                                                value\n                                            });\n                                        }\n                                        break;\n                                }\n                            } catch (err) {\n                                reject(err);\n                            }\n                        };\n                        child.on(\"message\", msgHandler);\n                        child.send({\n                            cmd: enums_1.ChildCommand.Start,\n                            job: job.asJSONSandbox(),\n                            token\n                        });\n                    } catch (error) {\n                        reject(error);\n                    }\n                };\n                initChild();\n            });\n            await done;\n            return done;\n        } finally{\n            if (child) {\n                child.off(\"message\", msgHandler);\n                child.off(\"exit\", exitHandler);\n                if (child.exitCode === null && child.signalCode === null) {\n                    childPool.release(child);\n                }\n            }\n        }\n    };\n};\nexports[\"default\"] = sandbox; //# sourceMappingURL=sandbox.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL2NsYXNzZXMvc2FuZGJveC5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3RCxNQUFNQyxVQUFVQyxtQkFBT0EsQ0FBQyxxRUFBVTtBQUNsQyxNQUFNQyxVQUFVLENBQUNDLGFBQWFDO0lBQzFCLE9BQU8sZUFBZUMsUUFBUUMsR0FBRyxFQUFFQyxLQUFLO1FBQ3BDLElBQUlDO1FBQ0osSUFBSUM7UUFDSixJQUFJQztRQUNKLElBQUk7WUFDQSxNQUFNQyxPQUFPLElBQUlDLFFBQVEsQ0FBQ0MsU0FBU0M7Z0JBQy9CLE1BQU1DLFlBQVk7b0JBQ2QsSUFBSTt3QkFDQUwsY0FBYyxDQUFDTSxVQUFVQzs0QkFDckJILE9BQU8sSUFBSUksTUFBTSwyQkFBMkJGLFdBQVcsY0FBY0M7d0JBQ3pFO3dCQUNBVCxRQUFRLE1BQU1KLFVBQVVlLE1BQU0sQ0FBQ2hCO3dCQUMvQkssTUFBTVksRUFBRSxDQUFDLFFBQVFWO3dCQUNqQkQsYUFBYSxPQUFPWTs0QkFDaEIsSUFBSUMsSUFBSUMsSUFBSUMsSUFBSUMsSUFBSUM7NEJBQ3BCLElBQUk7Z0NBQ0EsT0FBUUwsSUFBSU0sR0FBRztvQ0FDWCxLQUFLM0IsUUFBUTRCLGFBQWEsQ0FBQ0MsU0FBUzt3Q0FDaENoQixRQUFRUSxJQUFJdEIsS0FBSzt3Q0FDakI7b0NBQ0osS0FBS0MsUUFBUTRCLGFBQWEsQ0FBQ0UsTUFBTTtvQ0FDakMsS0FBSzlCLFFBQVE0QixhQUFhLENBQUNWLEtBQUs7d0NBQUU7NENBQzlCLE1BQU1hLE1BQU0sSUFBSWI7NENBQ2hCdEIsT0FBT29DLE1BQU0sQ0FBQ0QsS0FBS1YsSUFBSXRCLEtBQUs7NENBQzVCZSxPQUFPaUI7NENBQ1A7d0NBQ0o7b0NBQ0EsS0FBSy9CLFFBQVE0QixhQUFhLENBQUNLLFFBQVE7d0NBQy9CLE1BQU0zQixJQUFJNEIsY0FBYyxDQUFDYixJQUFJdEIs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SjtBQUNKO0FBQ0FWLGtCQUFlLEdBQUdJLFNBQ2xCLG1DQUFtQyIsInNvdXJjZXMiOlsid2VicGFjazovL29ubHlmYW5zLXBsYXRmb3JtLy4vbm9kZV9tb2R1bGVzL2J1bGxtcS9kaXN0L2Nqcy9jbGFzc2VzL3NhbmRib3guanM/OGU4MSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmNvbnN0IGVudW1zXzEgPSByZXF1aXJlKFwiLi4vZW51bXNcIik7XG5jb25zdCBzYW5kYm94ID0gKHByb2Nlc3NGaWxlLCBjaGlsZFBvb2wpID0+IHtcbiAgICByZXR1cm4gYXN5bmMgZnVuY3Rpb24gcHJvY2Vzcyhqb2IsIHRva2VuKSB7XG4gICAgICAgIGxldCBjaGlsZDtcbiAgICAgICAgbGV0IG1zZ0hhbmRsZXI7XG4gICAgICAgIGxldCBleGl0SGFuZGxlcjtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGRvbmUgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgaW5pdENoaWxkID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZXhpdEhhbmRsZXIgPSAoZXhpdENvZGUsIHNpZ25hbCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoJ1VuZXhwZWN0ZWQgZXhpdCBjb2RlOiAnICsgZXhpdENvZGUgKyAnIHNpZ25hbDogJyArIHNpZ25hbCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkID0gYXdhaXQgY2hpbGRQb29sLnJldGFpbihwcm9jZXNzRmlsZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjaGlsZC5vbignZXhpdCcsIGV4aXRIYW5kbGVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1zZ0hhbmRsZXIgPSBhc3luYyAobXNnKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF9hLCBfYiwgX2MsIF9kLCBfZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKG1zZy5jbWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgZW51bXNfMS5QYXJlbnRDb21tYW5kLkNvbXBsZXRlZDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKG1zZy52YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIGVudW1zXzEuUGFyZW50Q29tbWFuZC5GYWlsZWQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIGVudW1zXzEuUGFyZW50Q29tbWFuZC5FcnJvcjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGVyciA9IG5ldyBFcnJvcigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oZXJyLCBtc2cudmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChlcnIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBlbnVtc18xLlBhcmVudENvbW1hbmQuUHJvZ3Jlc3M6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgam9iLnVwZGF0ZVByb2dyZXNzKG1zZy52YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIGVudW1zXzEuUGFyZW50Q29tbWFuZC5Mb2c6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgam9iLmxvZyhtc2cudmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBlbnVtc18xLlBhcmVudENvbW1hbmQuTW92ZVRvRGVsYXllZDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBqb2IubW92ZVRvRGVsYXllZCgoX2EgPSBtc2cudmFsdWUpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS50aW1lc3RhbXAsIChfYiA9IG1zZy52YWx1ZSkgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLnRva2VuKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgZW51bXNfMS5QYXJlbnRDb21tYW5kLk1vdmVUb1dhaXQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgam9iLm1vdmVUb1dhaXQoKF9jID0gbXNnLnZhbHVlKSA9PT0gbnVsbCB8fCBfYyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2MudG9rZW4pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBlbnVtc18xLlBhcmVudENvbW1hbmQuTW92ZVRvV2FpdGluZ0NoaWxkcmVuOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBhd2FpdCBqb2IubW92ZVRvV2FpdGluZ0NoaWxkcmVuKChfZCA9IG1zZy52YWx1ZSkgPT09IG51bGwgfHwgX2QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9kLnRva2VuLCAoX2UgPSBtc2cudmFsdWUpID09PSBudWxsIHx8IF9lID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZS5vcHRzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGQuc2VuZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1ZXN0SWQ6IG1zZy5yZXF1ZXN0SWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbWQ6IGVudW1zXzEuQ2hpbGRDb21tYW5kLk1vdmVUb1dhaXRpbmdDaGlsZHJlblJlc3BvbnNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgZW51bXNfMS5QYXJlbnRDb21tYW5kLlVwZGF0ZTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBqb2IudXBkYXRlRGF0YShtc2cudmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBlbnVtc18xLlBhcmVudENvbW1hbmQuR2V0Q2hpbGRyZW5WYWx1ZXM6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGF3YWl0IGpvYi5nZXRDaGlsZHJlblZhbHVlcygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGlsZC5zZW5kKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3RJZDogbXNnLnJlcXVlc3RJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNtZDogZW51bXNfMS5DaGlsZENvbW1hbmQuR2V0Q2hpbGRyZW5WYWx1ZXNSZXNwb25zZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIGVudW1zXzEuUGFyZW50Q29tbWFuZC5HZXRJZ25vcmVkQ2hpbGRyZW5GYWlsdXJlczpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gYXdhaXQgam9iLmdldElnbm9yZWRDaGlsZHJlbkZhaWx1cmVzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkLnNlbmQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWVzdElkOiBtc2cucmVxdWVzdElkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY21kOiBlbnVtc18xLkNoaWxkQ29tbWFuZC5HZXRJZ25vcmVkQ2hpbGRyZW5GYWlsdXJlc1Jlc3BvbnNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChlcnIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICBjaGlsZC5vbignbWVzc2FnZScsIG1zZ0hhbmRsZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGQuc2VuZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY21kOiBlbnVtc18xLkNoaWxkQ29tbWFuZC5TdGFydCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqb2I6IGpvYi5hc0pTT05TYW5kYm94KCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9rZW4sXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGluaXRDaGlsZCgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBhd2FpdCBkb25lO1xuICAgICAgICAgICAgcmV0dXJuIGRvbmU7XG4gICAgICAgIH1cbiAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICBpZiAoY2hpbGQpIHtcbiAgICAgICAgICAgICAgICBjaGlsZC5vZmYoJ21lc3NhZ2UnLCBtc2dIYW5kbGVyKTtcbiAgICAgICAgICAgICAgICBjaGlsZC5vZmYoJ2V4aXQnLCBleGl0SGFuZGxlcik7XG4gICAgICAgICAgICAgICAgaWYgKGNoaWxkLmV4aXRDb2RlID09PSBudWxsICYmIGNoaWxkLnNpZ25hbENvZGUgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2hpbGRQb29sLnJlbGVhc2UoY2hpbGQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG59O1xuZXhwb3J0cy5kZWZhdWx0ID0gc2FuZGJveDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNhbmRib3guanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiZW51bXNfMSIsInJlcXVpcmUiLCJzYW5kYm94IiwicHJvY2Vzc0ZpbGUiLCJjaGlsZFBvb2wiLCJwcm9jZXNzIiwiam9iIiwidG9rZW4iLCJjaGlsZCIsIm1zZ0hhbmRsZXIiLCJleGl0SGFuZGxlciIsImRvbmUiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsImluaXRDaGlsZCIsImV4aXRDb2RlIiwic2lnbmFsIiwiRXJyb3IiLCJyZXRhaW4iLCJvbiIsIm1zZyIsIl9hIiwiX2IiLCJfYyIsIl9kIiwiX2UiLCJjbWQiLCJQYXJlbnRDb21tYW5kIiwiQ29tcGxldGVkIiwiRmFpbGVkIiwiZXJyIiwiYXNzaWduIiwiUHJvZ3Jlc3MiLCJ1cGRhdGVQcm9ncmVzcyIsIkxvZyIsImxvZyIsIk1vdmVUb0RlbGF5ZWQiLCJtb3ZlVG9EZWxheWVkIiwidGltZXN0YW1wIiwiTW92ZVRvV2FpdCIsIm1vdmVUb1dhaXQiLCJNb3ZlVG9XYWl0aW5nQ2hpbGRyZW4iLCJtb3ZlVG9XYWl0aW5nQ2hpbGRyZW4iLCJvcHRzIiwic2VuZCIsInJlcXVlc3RJZCIsIkNoaWxkQ29tbWFuZCIsIk1vdmVUb1dhaXRpbmdDaGlsZHJlblJlc3BvbnNlIiwiVXBkYXRlIiwidXBkYXRlRGF0YSIsIkdldENoaWxkcmVuVmFsdWVzIiwiZ2V0Q2hpbGRyZW5WYWx1ZXMiLCJHZXRDaGlsZHJlblZhbHVlc1Jlc3BvbnNlIiwiR2V0SWdub3JlZENoaWxkcmVuRmFpbHVyZXMiLCJnZXRJZ25vcmVkQ2hpbGRyZW5GYWlsdXJlcyIsIkdldElnbm9yZWRDaGlsZHJlbkZhaWx1cmVzUmVzcG9uc2UiLCJTdGFydCIsImFzSlNPTlNhbmRib3giLCJlcnJvciIsIm9mZiIsInNpZ25hbENvZGUiLCJyZWxlYXNlIiwiZGVmYXVsdCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/classes/sandbox.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/classes/scripts.js":
/*!*********************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/classes/scripts.js ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("/**\n * Includes all the scripts needed by the queue and jobs.\n */ /*eslint-env node */ \nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.Scripts = void 0;\nexports.raw2NextJobData = raw2NextJobData;\nconst msgpackr_1 = __webpack_require__(/*! msgpackr */ \"(rsc)/./node_modules/msgpackr/dist/node.cjs\");\nconst packer = new msgpackr_1.Packr({\n    useRecords: false,\n    encodeUndefinedAsNil: true\n});\nconst pack = packer.pack;\nconst enums_1 = __webpack_require__(/*! ../enums */ \"(rsc)/./node_modules/bullmq/dist/cjs/enums/index.js\");\nconst utils_1 = __webpack_require__(/*! ../utils */ \"(rsc)/./node_modules/bullmq/dist/cjs/utils/index.js\");\nconst version_1 = __webpack_require__(/*! ../version */ \"(rsc)/./node_modules/bullmq/dist/cjs/version.js\");\nconst errors_1 = __webpack_require__(/*! ./errors */ \"(rsc)/./node_modules/bullmq/dist/cjs/classes/errors/index.js\");\nclass Scripts {\n    constructor(queue){\n        this.queue = queue;\n        this.version = version_1.version;\n        const queueKeys = this.queue.keys;\n        this.moveToFinishedKeys = [\n            queueKeys.wait,\n            queueKeys.active,\n            queueKeys.prioritized,\n            queueKeys.events,\n            queueKeys.stalled,\n            queueKeys.limiter,\n            queueKeys.delayed,\n            queueKeys.paused,\n            queueKeys.meta,\n            queueKeys.pc,\n            undefined,\n            undefined,\n            undefined,\n            undefined\n        ];\n    }\n    execCommand(client, commandName, args) {\n        const commandNameWithVersion = `${commandName}:${this.version}`;\n        return client[commandNameWithVersion](args);\n    }\n    async isJobInList(listKey, jobId) {\n        const client = await this.queue.client;\n        let result;\n        if ((0, utils_1.isRedisVersionLowerThan)(this.queue.redisVersion, \"6.0.6\")) {\n            result = await this.execCommand(client, \"isJobInList\", [\n                listKey,\n                jobId\n            ]);\n        } else {\n            result = await client.lpos(listKey, jobId);\n        }\n        return Number.isInteger(result);\n    }\n    addDelayedJobArgs(job, encodedOpts, args) {\n        const queueKeys = this.queue.keys;\n        const keys = [\n            queueKeys.marker,\n            queueKeys.meta,\n            queueKeys.id,\n            queueKeys.delayed,\n            queueKeys.completed,\n            queueKeys.events\n        ];\n        keys.push(pack(args), job.data, encodedOpts);\n        return keys;\n    }\n    addDelayedJob(client, job, encodedOpts, args) {\n        const argsList = this.addDelayedJobArgs(job, encodedOpts, args);\n        return this.execCommand(client, \"addDelayedJob\", argsList);\n    }\n    addPrioritizedJobArgs(job, encodedOpts, args) {\n        const queueKeys = this.queue.keys;\n        const keys = [\n            queueKeys.marker,\n            queueKeys.meta,\n            queueKeys.id,\n            queueKeys.prioritized,\n            queueKeys.delayed,\n            queueKeys.completed,\n            queueKeys.active,\n            queueKeys.events,\n            queueKeys.pc\n        ];\n        keys.push(pack(args), job.data, encodedOpts);\n        return keys;\n    }\n    addPrioritizedJob(client, job, encodedOpts, args) {\n        const argsList = this.addPrioritizedJobArgs(job, encodedOpts, args);\n        return this.execCommand(client, \"addPrioritizedJob\", argsList);\n    }\n    addParentJobArgs(job, encodedOpts, args) {\n        const queueKeys = this.queue.keys;\n        const keys = [\n            queueKeys.meta,\n            queueKeys.id,\n            queueKeys.delayed,\n            queueKeys[\"waiting-children\"],\n            queueKeys.completed,\n            queueKeys.events\n        ];\n        keys.push(pack(args), job.data, encodedOpts);\n        return keys;\n    }\n    addParentJob(client, job, encodedOpts, args) {\n        const argsList = this.addParentJobArgs(job, encodedOpts, args);\n        return this.execCommand(client, \"addParentJob\", argsList);\n    }\n    addStandardJobArgs(job, encodedOpts, args) {\n        const queueKeys = this.queue.keys;\n        const keys = [\n            queueKeys.wait,\n            queueKeys.paused,\n            queueKeys.meta,\n            queueKeys.id,\n            queueKeys.completed,\n            queueKeys.delayed,\n            queueKeys.active,\n            queueKeys.events,\n            queueKeys.marker\n        ];\n        keys.push(pack(args), job.data, encodedOpts);\n        return keys;\n    }\n    addStandardJob(client, job, encodedOpts, args) {\n        const argsList = this.addStandardJobArgs(job, encodedOpts, args);\n        return this.execCommand(client, \"addStandardJob\", argsList);\n    }\n    async addJob(client, job, opts, jobId, parentKeyOpts = {}) {\n        const queueKeys = this.queue.keys;\n        const parent = job.parent;\n        const args = [\n            queueKeys[\"\"],\n            typeof jobId !== \"undefined\" ? jobId : \"\",\n            job.name,\n            job.timestamp,\n            job.parentKey || null,\n            parentKeyOpts.parentDependenciesKey || null,\n            parent,\n            job.repeatJobKey,\n            job.deduplicationId ? `${queueKeys.de}:${job.deduplicationId}` : null\n        ];\n        let encodedOpts;\n        if (opts.repeat) {\n            const repeat = Object.assign({}, opts.repeat);\n            if (repeat.startDate) {\n                repeat.startDate = +new Date(repeat.startDate);\n            }\n            if (repeat.endDate) {\n                repeat.endDate = +new Date(repeat.endDate);\n            }\n            encodedOpts = pack(Object.assign(Object.assign({}, opts), {\n                repeat\n            }));\n        } else {\n            encodedOpts = pack(opts);\n        }\n        let result;\n        if (parentKeyOpts.addToWaitingChildren) {\n            result = await this.addParentJob(client, job, encodedOpts, args);\n        } else if (typeof opts.delay == \"number\" && opts.delay > 0) {\n            result = await this.addDelayedJob(client, job, encodedOpts, args);\n        } else if (opts.priority) {\n            result = await this.addPrioritizedJob(client, job, encodedOpts, args);\n        } else {\n            result = await this.addStandardJob(client, job, encodedOpts, args);\n        }\n        if (result < 0) {\n            throw this.finishedErrors({\n                code: result,\n                parentKey: parentKeyOpts.parentKey,\n                command: \"addJob\"\n            });\n        }\n        return result;\n    }\n    pauseArgs(pause) {\n        let src = \"wait\", dst = \"paused\";\n        if (!pause) {\n            src = \"paused\";\n            dst = \"wait\";\n        }\n        const keys = [\n            src,\n            dst,\n            \"meta\",\n            \"prioritized\"\n        ].map((name)=>this.queue.toKey(name));\n        keys.push(this.queue.keys.events, this.queue.keys.delayed, this.queue.keys.marker);\n        const args = [\n            pause ? \"paused\" : \"resumed\"\n        ];\n        return keys.concat(args);\n    }\n    async pause(pause) {\n        const client = await this.queue.client;\n        const args = this.pauseArgs(pause);\n        return this.execCommand(client, \"pause\", args);\n    }\n    addRepeatableJobArgs(customKey, nextMillis, opts, legacyCustomKey) {\n        const queueKeys = this.queue.keys;\n        const keys = [\n            queueKeys.repeat,\n            queueKeys.delayed\n        ];\n        const args = [\n            nextMillis,\n            pack(opts),\n            legacyCustomKey,\n            customKey,\n            queueKeys[\"\"]\n        ];\n        return keys.concat(args);\n    }\n    async addRepeatableJob(customKey, nextMillis, opts, legacyCustomKey) {\n        const client = await this.queue.client;\n        const args = this.addRepeatableJobArgs(customKey, nextMillis, opts, legacyCustomKey);\n        return this.execCommand(client, \"addRepeatableJob\", args);\n    }\n    async addJobScheduler(jobSchedulerId, nextMillis, templateData, templateOpts, opts, delayedJobOpts, // The job id of the job that produced this next iteration\n    producerId) {\n        const client = await this.queue.client;\n        const queueKeys = this.queue.keys;\n        const keys = [\n            queueKeys.repeat,\n            queueKeys.delayed,\n            queueKeys.wait,\n            queueKeys.paused,\n            queueKeys.meta,\n            queueKeys.prioritized,\n            queueKeys.marker,\n            queueKeys.id,\n            queueKeys.events,\n            queueKeys.pc,\n            queueKeys.active\n        ];\n        const args = [\n            nextMillis,\n            pack(opts),\n            jobSchedulerId,\n            templateData,\n            pack(templateOpts),\n            pack(delayedJobOpts),\n            Date.now(),\n            queueKeys[\"\"],\n            producerId ? this.queue.toKey(producerId) : \"\"\n        ];\n        const result = await this.execCommand(client, \"addJobScheduler\", keys.concat(args));\n        if (typeof result === \"number\" && result < 0) {\n            throw this.finishedErrors({\n                code: result,\n                command: \"addJobScheduler\"\n            });\n        }\n        return result;\n    }\n    async updateRepeatableJobMillis(client, customKey, nextMillis, legacyCustomKey) {\n        const args = [\n            this.queue.keys.repeat,\n            nextMillis,\n            customKey,\n            legacyCustomKey\n        ];\n        return this.execCommand(client, \"updateRepeatableJobMillis\", args);\n    }\n    async updateJobSchedulerNextMillis(jobSchedulerId, nextMillis, templateData, delayedJobOpts, // The job id of the job that produced this next iteration - TODO: remove in next breaking change\n    producerId) {\n        const client = await this.queue.client;\n        const queueKeys = this.queue.keys;\n        const keys = [\n            queueKeys.repeat,\n            queueKeys.delayed,\n            queueKeys.wait,\n            queueKeys.paused,\n            queueKeys.meta,\n            queueKeys.prioritized,\n            queueKeys.marker,\n            queueKeys.id,\n            queueKeys.events,\n            queueKeys.pc,\n            producerId ? this.queue.toKey(producerId) : \"\",\n            queueKeys.active\n        ];\n        const args = [\n            nextMillis,\n            jobSchedulerId,\n            templateData,\n            pack(delayedJobOpts),\n            Date.now(),\n            queueKeys[\"\"],\n            producerId\n        ];\n        return this.execCommand(client, \"updateJobScheduler\", keys.concat(args));\n    }\n    removeRepeatableArgs(legacyRepeatJobId, repeatConcatOptions, repeatJobKey) {\n        const queueKeys = this.queue.keys;\n        const keys = [\n            queueKeys.repeat,\n            queueKeys.delayed,\n            queueKeys.events\n        ];\n        const args = [\n            legacyRepeatJobId,\n            this.getRepeatConcatOptions(repeatConcatOptions, repeatJobKey),\n            repeatJobKey,\n            queueKeys[\"\"]\n        ];\n        return keys.concat(args);\n    }\n    // TODO: remove this check in next breaking change\n    getRepeatConcatOptions(repeatConcatOptions, repeatJobKey) {\n        if (repeatJobKey && repeatJobKey.split(\":\").length > 2) {\n            return repeatJobKey;\n        }\n        return repeatConcatOptions;\n    }\n    async removeRepeatable(legacyRepeatJobId, repeatConcatOptions, repeatJobKey) {\n        const client = await this.queue.client;\n        const args = this.removeRepeatableArgs(legacyRepeatJobId, repeatConcatOptions, repeatJobKey);\n        return this.execCommand(client, \"removeRepeatable\", args);\n    }\n    async removeJobScheduler(jobSchedulerId) {\n        const client = await this.queue.client;\n        const queueKeys = this.queue.keys;\n        const keys = [\n            queueKeys.repeat,\n            queueKeys.delayed,\n            queueKeys.events\n        ];\n        const args = [\n            jobSchedulerId,\n            queueKeys[\"\"]\n        ];\n        return this.execCommand(client, \"removeJobScheduler\", keys.concat(args));\n    }\n    removeArgs(jobId, removeChildren) {\n        const keys = [\n            jobId,\n            \"repeat\"\n        ].map((name)=>this.queue.toKey(name));\n        const args = [\n            jobId,\n            removeChildren ? 1 : 0,\n            this.queue.toKey(\"\")\n        ];\n        return keys.concat(args);\n    }\n    async remove(jobId, removeChildren) {\n        const client = await this.queue.client;\n        const args = this.removeArgs(jobId, removeChildren);\n        const result = await this.execCommand(client, \"removeJob\", args);\n        if (result < 0) {\n            throw this.finishedErrors({\n                code: result,\n                jobId,\n                command: \"removeJob\"\n            });\n        }\n        return result;\n    }\n    async removeUnprocessedChildren(jobId) {\n        const client = await this.queue.client;\n        const args = [\n            this.queue.toKey(jobId),\n            this.queue.keys.meta,\n            this.queue.toKey(\"\"),\n            jobId\n        ];\n        await this.execCommand(client, \"removeUnprocessedChildren\", args);\n    }\n    async extendLock(jobId, token, duration, client) {\n        client = client || await this.queue.client;\n        const args = [\n            this.queue.toKey(jobId) + \":lock\",\n            this.queue.keys.stalled,\n            token,\n            duration,\n            jobId\n        ];\n        return this.execCommand(client, \"extendLock\", args);\n    }\n    async extendLocks(jobIds, tokens, duration) {\n        const client = await this.queue.client;\n        const args = [\n            this.queue.keys.stalled,\n            this.queue.toKey(\"\"),\n            pack(tokens),\n            pack(jobIds),\n            duration\n        ];\n        return this.execCommand(client, \"extendLocks\", args);\n    }\n    async updateData(job, data) {\n        const client = await this.queue.client;\n        const keys = [\n            this.queue.toKey(job.id)\n        ];\n        const dataJson = JSON.stringify(data);\n        const result = await this.execCommand(client, \"updateData\", keys.concat([\n            dataJson\n        ]));\n        if (result < 0) {\n            throw this.finishedErrors({\n                code: result,\n                jobId: job.id,\n                command: \"updateData\"\n            });\n        }\n    }\n    async updateProgress(jobId, progress) {\n        const client = await this.queue.client;\n        const keys = [\n            this.queue.toKey(jobId),\n            this.queue.keys.events,\n            this.queue.keys.meta\n        ];\n        const progressJson = JSON.stringify(progress);\n        const result = await this.execCommand(client, \"updateProgress\", keys.concat([\n            jobId,\n            progressJson\n        ]));\n        if (result < 0) {\n            throw this.finishedErrors({\n                code: result,\n                jobId,\n                command: \"updateProgress\"\n            });\n        }\n    }\n    async addLog(jobId, logRow, keepLogs) {\n        const client = await this.queue.client;\n        const keys = [\n            this.queue.toKey(jobId),\n            this.queue.toKey(jobId) + \":logs\"\n        ];\n        const result = await this.execCommand(client, \"addLog\", keys.concat([\n            jobId,\n            logRow,\n            keepLogs ? keepLogs : \"\"\n        ]));\n        if (result < 0) {\n            throw this.finishedErrors({\n                code: result,\n                jobId,\n                command: \"addLog\"\n            });\n        }\n        return result;\n    }\n    moveToFinishedArgs(job, val, propVal, shouldRemove, target, token, timestamp, fetchNext = true, fieldsToUpdate) {\n        var _a, _b, _c, _d, _e, _f, _g;\n        const queueKeys = this.queue.keys;\n        const opts = this.queue.opts;\n        const workerKeepJobs = target === \"completed\" ? opts.removeOnComplete : opts.removeOnFail;\n        const metricsKey = this.queue.toKey(`metrics:${target}`);\n        const keys = this.moveToFinishedKeys;\n        keys[10] = queueKeys[target];\n        keys[11] = this.queue.toKey((_a = job.id) !== null && _a !== void 0 ? _a : \"\");\n        keys[12] = metricsKey;\n        keys[13] = this.queue.keys.marker;\n        const keepJobs = this.getKeepJobs(shouldRemove, workerKeepJobs);\n        const args = [\n            job.id,\n            timestamp,\n            propVal,\n            typeof val === \"undefined\" ? \"null\" : val,\n            target,\n            !fetchNext || this.queue.closing ? 0 : 1,\n            queueKeys[\"\"],\n            pack({\n                token,\n                name: opts.name,\n                keepJobs,\n                limiter: opts.limiter,\n                lockDuration: opts.lockDuration,\n                attempts: job.opts.attempts,\n                maxMetricsSize: ((_b = opts.metrics) === null || _b === void 0 ? void 0 : _b.maxDataPoints) ? (_c = opts.metrics) === null || _c === void 0 ? void 0 : _c.maxDataPoints : \"\",\n                fpof: !!((_d = job.opts) === null || _d === void 0 ? void 0 : _d.failParentOnFailure),\n                cpof: !!((_e = job.opts) === null || _e === void 0 ? void 0 : _e.continueParentOnFailure),\n                idof: !!((_f = job.opts) === null || _f === void 0 ? void 0 : _f.ignoreDependencyOnFailure),\n                rdof: !!((_g = job.opts) === null || _g === void 0 ? void 0 : _g.removeDependencyOnFailure)\n            }),\n            fieldsToUpdate ? pack((0, utils_1.objectToFlatArray)(fieldsToUpdate)) : void 0\n        ];\n        return keys.concat(args);\n    }\n    getKeepJobs(shouldRemove, workerKeepJobs) {\n        if (typeof shouldRemove === \"undefined\") {\n            return workerKeepJobs || {\n                count: shouldRemove ? 0 : -1\n            };\n        }\n        return typeof shouldRemove === \"object\" ? shouldRemove : typeof shouldRemove === \"number\" ? {\n            count: shouldRemove\n        } : {\n            count: shouldRemove ? 0 : -1\n        };\n    }\n    async moveToFinished(jobId, args) {\n        const client = await this.queue.client;\n        const result = await this.execCommand(client, \"moveToFinished\", args);\n        if (result < 0) {\n            throw this.finishedErrors({\n                code: result,\n                jobId,\n                command: \"moveToFinished\",\n                state: \"active\"\n            });\n        } else {\n            if (typeof result !== \"undefined\") {\n                return raw2NextJobData(result);\n            }\n        }\n    }\n    drainArgs(delayed) {\n        const queueKeys = this.queue.keys;\n        const keys = [\n            queueKeys.wait,\n            queueKeys.paused,\n            queueKeys.delayed,\n            queueKeys.prioritized,\n            queueKeys.repeat\n        ];\n        const args = [\n            queueKeys[\"\"],\n            delayed ? \"1\" : \"0\"\n        ];\n        return keys.concat(args);\n    }\n    async drain(delayed) {\n        const client = await this.queue.client;\n        const args = this.drainArgs(delayed);\n        return this.execCommand(client, \"drain\", args);\n    }\n    removeChildDependencyArgs(jobId, parentKey) {\n        const queueKeys = this.queue.keys;\n        const keys = [\n            queueKeys[\"\"]\n        ];\n        const args = [\n            this.queue.toKey(jobId),\n            parentKey\n        ];\n        return keys.concat(args);\n    }\n    async removeChildDependency(jobId, parentKey) {\n        const client = await this.queue.client;\n        const args = this.removeChildDependencyArgs(jobId, parentKey);\n        const result = await this.execCommand(client, \"removeChildDependency\", args);\n        switch(result){\n            case 0:\n                return true;\n            case 1:\n                return false;\n            default:\n                throw this.finishedErrors({\n                    code: result,\n                    jobId,\n                    parentKey,\n                    command: \"removeChildDependency\"\n                });\n        }\n    }\n    getRangesArgs(types, start, end, asc) {\n        const queueKeys = this.queue.keys;\n        const transformedTypes = types.map((type)=>{\n            return type === \"waiting\" ? \"wait\" : type;\n        });\n        const keys = [\n            queueKeys[\"\"]\n        ];\n        const args = [\n            start,\n            end,\n            asc ? \"1\" : \"0\",\n            ...transformedTypes\n        ];\n        return keys.concat(args);\n    }\n    async getRanges(types, start = 0, end = 1, asc = false) {\n        const client = await this.queue.client;\n        const args = this.getRangesArgs(types, start, end, asc);\n        return await this.execCommand(client, \"getRanges\", args);\n    }\n    getCountsArgs(types) {\n        const queueKeys = this.queue.keys;\n        const transformedTypes = types.map((type)=>{\n            return type === \"waiting\" ? \"wait\" : type;\n        });\n        const keys = [\n            queueKeys[\"\"]\n        ];\n        const args = [\n            ...transformedTypes\n        ];\n        return keys.concat(args);\n    }\n    async getCounts(types) {\n        const client = await this.queue.client;\n        const args = this.getCountsArgs(types);\n        return await this.execCommand(client, \"getCounts\", args);\n    }\n    getCountsPerPriorityArgs(priorities) {\n        const keys = [\n            this.queue.keys.wait,\n            this.queue.keys.paused,\n            this.queue.keys.meta,\n            this.queue.keys.prioritized\n        ];\n        const args = priorities;\n        return keys.concat(args);\n    }\n    async getCountsPerPriority(priorities) {\n        const client = await this.queue.client;\n        const args = this.getCountsPerPriorityArgs(priorities);\n        return await this.execCommand(client, \"getCountsPerPriority\", args);\n    }\n    getDependencyCountsArgs(jobId, types) {\n        const keys = [\n            `${jobId}:processed`,\n            `${jobId}:dependencies`,\n            `${jobId}:failed`,\n            `${jobId}:unsuccessful`\n        ].map((name)=>{\n            return this.queue.toKey(name);\n        });\n        const args = types;\n        return keys.concat(args);\n    }\n    async getDependencyCounts(jobId, types) {\n        const client = await this.queue.client;\n        const args = this.getDependencyCountsArgs(jobId, types);\n        return await this.execCommand(client, \"getDependencyCounts\", args);\n    }\n    moveToCompletedArgs(job, returnvalue, removeOnComplete, token, fetchNext = false) {\n        const timestamp = Date.now();\n        return this.moveToFinishedArgs(job, returnvalue, \"returnvalue\", removeOnComplete, \"completed\", token, timestamp, fetchNext);\n    }\n    moveToFailedArgs(job, failedReason, removeOnFailed, token, fetchNext = false, fieldsToUpdate) {\n        const timestamp = Date.now();\n        return this.moveToFinishedArgs(job, failedReason, \"failedReason\", removeOnFailed, \"failed\", token, timestamp, fetchNext, fieldsToUpdate);\n    }\n    async isFinished(jobId, returnValue = false) {\n        const client = await this.queue.client;\n        const keys = [\n            \"completed\",\n            \"failed\",\n            jobId\n        ].map((key)=>{\n            return this.queue.toKey(key);\n        });\n        return this.execCommand(client, \"isFinished\", keys.concat([\n            jobId,\n            returnValue ? \"1\" : \"\"\n        ]));\n    }\n    async getState(jobId) {\n        const client = await this.queue.client;\n        const keys = [\n            \"completed\",\n            \"failed\",\n            \"delayed\",\n            \"active\",\n            \"wait\",\n            \"paused\",\n            \"waiting-children\",\n            \"prioritized\"\n        ].map((key)=>{\n            return this.queue.toKey(key);\n        });\n        if ((0, utils_1.isRedisVersionLowerThan)(this.queue.redisVersion, \"6.0.6\")) {\n            return this.execCommand(client, \"getState\", keys.concat([\n                jobId\n            ]));\n        }\n        return this.execCommand(client, \"getStateV2\", keys.concat([\n            jobId\n        ]));\n    }\n    /**\n     * Change delay of a delayed job.\n     *\n     * Reschedules a delayed job by setting a new delay from the current time.\n     * For example, calling changeDelay(5000) will reschedule the job to execute\n     * 5000 milliseconds (5 seconds) from now, regardless of the original delay.\n     *\n     * @param jobId - the ID of the job to change the delay for.\n     * @param delay - milliseconds from now when the job should be processed.\n     * @returns delay in milliseconds.\n     * @throws JobNotExist\n     * This exception is thrown if jobId is missing.\n     * @throws JobNotInState\n     * This exception is thrown if job is not in delayed state.\n     */ async changeDelay(jobId, delay) {\n        const client = await this.queue.client;\n        const args = this.changeDelayArgs(jobId, delay);\n        const result = await this.execCommand(client, \"changeDelay\", args);\n        if (result < 0) {\n            throw this.finishedErrors({\n                code: result,\n                jobId,\n                command: \"changeDelay\",\n                state: \"delayed\"\n            });\n        }\n    }\n    changeDelayArgs(jobId, delay) {\n        const timestamp = Date.now();\n        const keys = [\n            this.queue.keys.delayed,\n            this.queue.keys.meta,\n            this.queue.keys.marker,\n            this.queue.keys.events\n        ];\n        return keys.concat([\n            delay,\n            JSON.stringify(timestamp),\n            jobId,\n            this.queue.toKey(jobId)\n        ]);\n    }\n    async changePriority(jobId, priority = 0, lifo = false) {\n        const client = await this.queue.client;\n        const args = this.changePriorityArgs(jobId, priority, lifo);\n        const result = await this.execCommand(client, \"changePriority\", args);\n        if (result < 0) {\n            throw this.finishedErrors({\n                code: result,\n                jobId,\n                command: \"changePriority\"\n            });\n        }\n    }\n    changePriorityArgs(jobId, priority = 0, lifo = false) {\n        const keys = [\n            this.queue.keys.wait,\n            this.queue.keys.paused,\n            this.queue.keys.meta,\n            this.queue.keys.prioritized,\n            this.queue.keys.active,\n            this.queue.keys.pc,\n            this.queue.keys.marker\n        ];\n        return keys.concat([\n            priority,\n            this.queue.toKey(\"\"),\n            jobId,\n            lifo ? 1 : 0\n        ]);\n    }\n    moveToDelayedArgs(jobId, timestamp, token, delay, opts = {}) {\n        const queueKeys = this.queue.keys;\n        const keys = [\n            queueKeys.marker,\n            queueKeys.active,\n            queueKeys.prioritized,\n            queueKeys.delayed,\n            this.queue.toKey(jobId),\n            queueKeys.events,\n            queueKeys.meta,\n            queueKeys.stalled\n        ];\n        return keys.concat([\n            this.queue.keys[\"\"],\n            timestamp,\n            jobId,\n            token,\n            delay,\n            opts.skipAttempt ? \"1\" : \"0\",\n            opts.fieldsToUpdate ? pack((0, utils_1.objectToFlatArray)(opts.fieldsToUpdate)) : void 0\n        ]);\n    }\n    moveToWaitingChildrenArgs(jobId, token, opts) {\n        const timestamp = Date.now();\n        const childKey = (0, utils_1.getParentKey)(opts.child);\n        const keys = [\n            \"active\",\n            \"waiting-children\",\n            jobId,\n            `${jobId}:dependencies`,\n            `${jobId}:unsuccessful`,\n            \"stalled\",\n            \"events\"\n        ].map((name)=>{\n            return this.queue.toKey(name);\n        });\n        return keys.concat([\n            token,\n            childKey !== null && childKey !== void 0 ? childKey : \"\",\n            JSON.stringify(timestamp),\n            jobId,\n            this.queue.toKey(\"\")\n        ]);\n    }\n    isMaxedArgs() {\n        const queueKeys = this.queue.keys;\n        const keys = [\n            queueKeys.meta,\n            queueKeys.active\n        ];\n        return keys;\n    }\n    async isMaxed() {\n        const client = await this.queue.client;\n        const args = this.isMaxedArgs();\n        return !!await this.execCommand(client, \"isMaxed\", args);\n    }\n    async moveToDelayed(jobId, timestamp, delay, token = \"0\", opts = {}) {\n        const client = await this.queue.client;\n        const args = this.moveToDelayedArgs(jobId, timestamp, token, delay, opts);\n        const result = await this.execCommand(client, \"moveToDelayed\", args);\n        if (result < 0) {\n            throw this.finishedErrors({\n                code: result,\n                jobId,\n                command: \"moveToDelayed\",\n                state: \"active\"\n            });\n        }\n    }\n    /**\n     * Move parent job to waiting-children state.\n     *\n     * @returns true if job is successfully moved, false if there are pending dependencies.\n     * @throws JobNotExist\n     * This exception is thrown if jobId is missing.\n     * @throws JobLockNotExist\n     * This exception is thrown if job lock is missing.\n     * @throws JobNotInState\n     * This exception is thrown if job is not in active state.\n     */ async moveToWaitingChildren(jobId, token, opts = {}) {\n        const client = await this.queue.client;\n        const args = this.moveToWaitingChildrenArgs(jobId, token, opts);\n        const result = await this.execCommand(client, \"moveToWaitingChildren\", args);\n        switch(result){\n            case 0:\n                return true;\n            case 1:\n                return false;\n            default:\n                throw this.finishedErrors({\n                    code: result,\n                    jobId,\n                    command: \"moveToWaitingChildren\",\n                    state: \"active\"\n                });\n        }\n    }\n    getRateLimitTtlArgs(maxJobs) {\n        const keys = [\n            this.queue.keys.limiter,\n            this.queue.keys.meta\n        ];\n        return keys.concat([\n            maxJobs !== null && maxJobs !== void 0 ? maxJobs : \"0\"\n        ]);\n    }\n    async getRateLimitTtl(maxJobs) {\n        const client = await this.queue.client;\n        const args = this.getRateLimitTtlArgs(maxJobs);\n        return this.execCommand(client, \"getRateLimitTtl\", args);\n    }\n    /**\n     * Remove jobs in a specific state.\n     *\n     * @returns Id jobs from the deleted records.\n     */ async cleanJobsInSet(set, timestamp, limit = 0) {\n        const client = await this.queue.client;\n        return this.execCommand(client, \"cleanJobsInSet\", [\n            this.queue.toKey(set),\n            this.queue.toKey(\"events\"),\n            this.queue.toKey(\"repeat\"),\n            this.queue.toKey(\"\"),\n            timestamp,\n            limit,\n            set\n        ]);\n    }\n    getJobSchedulerArgs(id) {\n        const keys = [\n            this.queue.keys.repeat\n        ];\n        return keys.concat([\n            id\n        ]);\n    }\n    async getJobScheduler(id) {\n        const client = await this.queue.client;\n        const args = this.getJobSchedulerArgs(id);\n        return this.execCommand(client, \"getJobScheduler\", args);\n    }\n    retryJobArgs(jobId, lifo, token, opts = {}) {\n        const keys = [\n            this.queue.keys.active,\n            this.queue.keys.wait,\n            this.queue.keys.paused,\n            this.queue.toKey(jobId),\n            this.queue.keys.meta,\n            this.queue.keys.events,\n            this.queue.keys.delayed,\n            this.queue.keys.prioritized,\n            this.queue.keys.pc,\n            this.queue.keys.marker,\n            this.queue.keys.stalled\n        ];\n        const pushCmd = (lifo ? \"R\" : \"L\") + \"PUSH\";\n        return keys.concat([\n            this.queue.toKey(\"\"),\n            Date.now(),\n            pushCmd,\n            jobId,\n            token,\n            opts.fieldsToUpdate ? pack((0, utils_1.objectToFlatArray)(opts.fieldsToUpdate)) : void 0\n        ]);\n    }\n    async retryJob(jobId, lifo, token = \"0\", opts = {}) {\n        const client = await this.queue.client;\n        const args = this.retryJobArgs(jobId, lifo, token, opts);\n        const result = await this.execCommand(client, \"retryJob\", args);\n        if (result < 0) {\n            throw this.finishedErrors({\n                code: result,\n                jobId,\n                command: \"retryJob\",\n                state: \"active\"\n            });\n        }\n    }\n    moveJobsToWaitArgs(state, count, timestamp) {\n        const keys = [\n            this.queue.toKey(\"\"),\n            this.queue.keys.events,\n            this.queue.toKey(state),\n            this.queue.toKey(\"wait\"),\n            this.queue.toKey(\"paused\"),\n            this.queue.keys.meta,\n            this.queue.keys.active,\n            this.queue.keys.marker\n        ];\n        const args = [\n            count,\n            timestamp,\n            state\n        ];\n        return keys.concat(args);\n    }\n    async retryJobs(state = \"failed\", count = 1000, timestamp = new Date().getTime()) {\n        const client = await this.queue.client;\n        const args = this.moveJobsToWaitArgs(state, count, timestamp);\n        return this.execCommand(client, \"moveJobsToWait\", args);\n    }\n    async promoteJobs(count = 1000) {\n        const client = await this.queue.client;\n        const args = this.moveJobsToWaitArgs(\"delayed\", count, Number.MAX_VALUE);\n        return this.execCommand(client, \"moveJobsToWait\", args);\n    }\n    /**\n     * Attempts to reprocess a job\n     *\n     * @param job - The job to reprocess\n     * @param state - The expected job state. If the job is not found\n     * on the provided state, then it's not reprocessed. Supported states: 'failed', 'completed'\n     *\n     * @returns A promise that resolves when the job has been successfully moved to the wait queue.\n     * @throws Will throw an error with a code property indicating the failure reason:\n     *   - code 0: Job does not exist\n     *   - code -1: Job is currently locked and can't be retried\n     *   - code -2: Job was not found in the expected set\n     */ async reprocessJob(job, state) {\n        const client = await this.queue.client;\n        const keys = [\n            this.queue.toKey(job.id),\n            this.queue.keys.events,\n            this.queue.toKey(state),\n            this.queue.keys.wait,\n            this.queue.keys.meta,\n            this.queue.keys.paused,\n            this.queue.keys.active,\n            this.queue.keys.marker\n        ];\n        const args = [\n            job.id,\n            (job.opts.lifo ? \"R\" : \"L\") + \"PUSH\",\n            state === \"failed\" ? \"failedReason\" : \"returnvalue\",\n            state\n        ];\n        const result = await this.execCommand(client, \"reprocessJob\", keys.concat(args));\n        switch(result){\n            case 1:\n                return;\n            default:\n                throw this.finishedErrors({\n                    code: result,\n                    jobId: job.id,\n                    command: \"reprocessJob\",\n                    state\n                });\n        }\n    }\n    async getMetrics(type, start = 0, end = -1) {\n        const client = await this.queue.client;\n        const keys = [\n            this.queue.toKey(`metrics:${type}`),\n            this.queue.toKey(`metrics:${type}:data`)\n        ];\n        const args = [\n            start,\n            end\n        ];\n        const result = await this.execCommand(client, \"getMetrics\", keys.concat(args));\n        return result;\n    }\n    async moveToActive(client, token, name) {\n        const opts = this.queue.opts;\n        const queueKeys = this.queue.keys;\n        const keys = [\n            queueKeys.wait,\n            queueKeys.active,\n            queueKeys.prioritized,\n            queueKeys.events,\n            queueKeys.stalled,\n            queueKeys.limiter,\n            queueKeys.delayed,\n            queueKeys.paused,\n            queueKeys.meta,\n            queueKeys.pc,\n            queueKeys.marker\n        ];\n        const args = [\n            queueKeys[\"\"],\n            Date.now(),\n            pack({\n                token,\n                lockDuration: opts.lockDuration,\n                limiter: opts.limiter,\n                name\n            })\n        ];\n        const result = await this.execCommand(client, \"moveToActive\", keys.concat(args));\n        return raw2NextJobData(result);\n    }\n    async promote(jobId) {\n        const client = await this.queue.client;\n        const keys = [\n            this.queue.keys.delayed,\n            this.queue.keys.wait,\n            this.queue.keys.paused,\n            this.queue.keys.meta,\n            this.queue.keys.prioritized,\n            this.queue.keys.active,\n            this.queue.keys.pc,\n            this.queue.keys.events,\n            this.queue.keys.marker\n        ];\n        const args = [\n            this.queue.toKey(\"\"),\n            jobId\n        ];\n        const code = await this.execCommand(client, \"promote\", keys.concat(args));\n        if (code < 0) {\n            throw this.finishedErrors({\n                code,\n                jobId,\n                command: \"promote\",\n                state: \"delayed\"\n            });\n        }\n    }\n    moveStalledJobsToWaitArgs() {\n        const opts = this.queue.opts;\n        const keys = [\n            this.queue.keys.stalled,\n            this.queue.keys.wait,\n            this.queue.keys.active,\n            this.queue.keys[\"stalled-check\"],\n            this.queue.keys.meta,\n            this.queue.keys.paused,\n            this.queue.keys.marker,\n            this.queue.keys.events\n        ];\n        const args = [\n            opts.maxStalledCount,\n            this.queue.toKey(\"\"),\n            Date.now(),\n            opts.stalledInterval\n        ];\n        return keys.concat(args);\n    }\n    /**\n     * Looks for unlocked jobs in the active queue.\n     *\n     * The job was being worked on, but the worker process died and it failed to renew the lock.\n     * We call these jobs 'stalled'. This is the most common case. We resolve these by moving them\n     * back to wait to be re-processed. To prevent jobs from cycling endlessly between active and wait,\n     * (e.g. if the job handler keeps crashing),\n     * we limit the number stalled job recoveries to settings.maxStalledCount.\n     */ async moveStalledJobsToWait() {\n        const client = await this.queue.client;\n        const args = this.moveStalledJobsToWaitArgs();\n        return this.execCommand(client, \"moveStalledJobsToWait\", args);\n    }\n    /**\n     * Moves a job back from Active to Wait.\n     * This script is used when a job has been manually rate limited and needs\n     * to be moved back to wait from active status.\n     *\n     * @param client - Redis client\n     * @param jobId - Job id\n     * @returns\n     */ async moveJobFromActiveToWait(jobId, token = \"0\") {\n        const client = await this.queue.client;\n        const keys = [\n            this.queue.keys.active,\n            this.queue.keys.wait,\n            this.queue.keys.stalled,\n            this.queue.keys.paused,\n            this.queue.keys.meta,\n            this.queue.keys.limiter,\n            this.queue.keys.prioritized,\n            this.queue.keys.marker,\n            this.queue.keys.events\n        ];\n        const args = [\n            jobId,\n            token,\n            this.queue.toKey(jobId)\n        ];\n        const result = await this.execCommand(client, \"moveJobFromActiveToWait\", keys.concat(args));\n        if (result < 0) {\n            throw this.finishedErrors({\n                code: result,\n                jobId,\n                command: \"moveJobFromActiveToWait\",\n                state: \"active\"\n            });\n        }\n        return result;\n    }\n    async obliterate(opts) {\n        const client = await this.queue.client;\n        const keys = [\n            this.queue.keys.meta,\n            this.queue.toKey(\"\")\n        ];\n        const args = [\n            opts.count,\n            opts.force ? \"force\" : null\n        ];\n        const result = await this.execCommand(client, \"obliterate\", keys.concat(args));\n        if (result < 0) {\n            switch(result){\n                case -1:\n                    throw new Error(\"Cannot obliterate non-paused queue\");\n                case -2:\n                    throw new Error(\"Cannot obliterate queue with active jobs\");\n            }\n        }\n        return result;\n    }\n    /**\n     * Paginate a set or hash keys.\n     * @param opts - options to define the pagination behaviour\n     *\n     */ async paginate(key, opts) {\n        const client = await this.queue.client;\n        const keys = [\n            key\n        ];\n        const maxIterations = 5;\n        const pageSize = opts.end >= 0 ? opts.end - opts.start + 1 : Infinity;\n        let cursor = \"0\", offset = 0, items, total, rawJobs, page = [], jobs = [];\n        do {\n            const args = [\n                opts.start + page.length,\n                opts.end,\n                cursor,\n                offset,\n                maxIterations\n            ];\n            if (opts.fetchJobs) {\n                args.push(1);\n            }\n            [cursor, offset, items, total, rawJobs] = await this.execCommand(client, \"paginate\", keys.concat(args));\n            page = page.concat(items);\n            if (rawJobs && rawJobs.length) {\n                jobs = jobs.concat(rawJobs.map(utils_1.array2obj));\n            }\n        // Important to keep this coercive inequality (!=) instead of strict inequality (!==)\n        }while (cursor != \"0\" && page.length < pageSize);\n        // If we get an array of arrays, it means we are paginating a hash\n        if (page.length && Array.isArray(page[0])) {\n            const result = [];\n            for(let index = 0; index < page.length; index++){\n                const [id, value] = page[index];\n                try {\n                    result.push({\n                        id,\n                        v: JSON.parse(value)\n                    });\n                } catch (err) {\n                    result.push({\n                        id,\n                        err: err.message\n                    });\n                }\n            }\n            return {\n                cursor,\n                items: result,\n                total,\n                jobs\n            };\n        } else {\n            return {\n                cursor,\n                items: page.map((item)=>({\n                        id: item\n                    })),\n                total,\n                jobs\n            };\n        }\n    }\n    finishedErrors({ code, jobId, parentKey, command, state }) {\n        let error;\n        switch(code){\n            case enums_1.ErrorCode.JobNotExist:\n                error = new Error(`Missing key for job ${jobId}. ${command}`);\n                break;\n            case enums_1.ErrorCode.JobLockNotExist:\n                error = new Error(`Missing lock for job ${jobId}. ${command}`);\n                break;\n            case enums_1.ErrorCode.JobNotInState:\n                error = new Error(`Job ${jobId} is not in the ${state} state. ${command}`);\n                break;\n            case enums_1.ErrorCode.JobPendingChildren:\n                error = new Error(`Job ${jobId} has pending dependencies. ${command}`);\n                break;\n            case enums_1.ErrorCode.ParentJobNotExist:\n                error = new Error(`Missing key for parent job ${parentKey}. ${command}`);\n                break;\n            case enums_1.ErrorCode.JobLockMismatch:\n                error = new Error(`Lock mismatch for job ${jobId}. Cmd ${command} from ${state}`);\n                break;\n            case enums_1.ErrorCode.ParentJobCannotBeReplaced:\n                error = new Error(`The parent job ${parentKey} cannot be replaced. ${command}`);\n                break;\n            case enums_1.ErrorCode.JobBelongsToJobScheduler:\n                error = new Error(`Job ${jobId} belongs to a job scheduler and cannot be removed directly. ${command}`);\n                break;\n            case enums_1.ErrorCode.JobHasFailedChildren:\n                error = new errors_1.UnrecoverableError(`Cannot complete job ${jobId} because it has at least one failed child. ${command}`);\n                break;\n            case enums_1.ErrorCode.SchedulerJobIdCollision:\n                error = new Error(`Cannot create job scheduler iteration - job ID already exists. ${command}`);\n                break;\n            case enums_1.ErrorCode.SchedulerJobSlotsBusy:\n                error = new Error(`Cannot create job scheduler iteration - current and next time slots already have jobs. ${command}`);\n                break;\n            default:\n                error = new Error(`Unknown code ${code} error for ${jobId}. ${command}`);\n        }\n        // Add the code property to the error object\n        error.code = code;\n        return error;\n    }\n}\nexports.Scripts = Scripts;\nfunction raw2NextJobData(raw) {\n    if (raw) {\n        const result = [\n            null,\n            raw[1],\n            raw[2],\n            raw[3]\n        ];\n        if (raw[0]) {\n            result[0] = (0, utils_1.array2obj)(raw[0]);\n        }\n        return result;\n    }\n    return [];\n} //# sourceMappingURL=scripts.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL2NsYXNzZXMvc2NyaXB0cy5qcyIsIm1hcHBpbmdzIjoiQUFBQTs7Q0FFQyxHQUNELGtCQUFrQixHQUNsQjtBQUNBQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsZUFBZSxHQUFHLEtBQUs7QUFDdkJBLHVCQUF1QixHQUFHRztBQUMxQixNQUFNQyxhQUFhQyxtQkFBT0EsQ0FBQyw2REFBVTtBQUNyQyxNQUFNQyxTQUFTLElBQUlGLFdBQVdHLEtBQUssQ0FBQztJQUNoQ0MsWUFBWTtJQUNaQyxzQkFBc0I7QUFDMUI7QUFDQSxNQUFNQyxPQUFPSixPQUFPSSxJQUFJO0FBQ3hCLE1BQU1DLFVBQVVOLG1CQUFPQSxDQUFDLHFFQUFVO0FBQ2xDLE1BQU1PLFVBQVVQLG1CQUFPQSxDQUFDLHFFQUFVO0FBQ2xDLE1BQU1RLFlBQVlSLG1CQUFPQSxDQUFDLG1FQUFZO0FBQ3RDLE1BQU1TLFdBQVdULG1CQUFPQSxDQUFDLDhFQUFVO0FBQ25DLE1BQU1IO0lBQ0ZhLFlBQVlDLEtBQUssQ0FBRTtRQUNmLElBQUksQ0FBQ0EsS0FBSyxHQUFHQTtRQUNiLElBQUksQ0FBQ0MsT0FBTyxHQUFHSixVQUFVSSxPQUFPO1FBQ2hDLE1BQU1DLFlBQVksSUFBSSxDQUFDRixLQUFLLENBQUNHLElBQUk7UUFDakMsSUFBSSxDQUFDQyxrQkFBa0IsR0FBRztZQUN0QkYsVUFBVUcsSUFBSTtZQUNkSCxVQUFVSSxNQUFNO1lBQ2hCSixVQUFVSyxXQUFXO1lBQ3JCTCxVQUFVTSxNQUFNO1lBQ2hCTixVQUFVTyxPQUFPO1lBQ2pCUCxVQUFVUSxPQUFPO1lBQ2pCUixVQUFVUyxPQUFPO1lBQ2pCVCxVQUFVVSxNQUFNO1lBQ2hCVixVQUFVVyxJQUFJO1lBQ2RYLFVBQVVZLEVBQUU7WUFDWkM7WUFDQUE7WUFDQUE7WUFDQUE7U0FDSDtJQUNMO0lBQ0FDLFlBQVlDLE1BQU0sRUFBRUMsV0FBVyxFQUFFQyxJQUFJ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LEVBQUU7WUFDUjdPLE1BQU0sQ0FBQyxFQUFFLEdBQUcsQ0FBQyxHQUFHNUIsUUFBUWtQLFNBQVMsRUFBRXVCLEdBQUcsQ0FBQyxFQUFFO1FBQzdDO1FBQ0EsT0FBTzdPO0lBQ1g7SUFDQSxPQUFPLEVBQUU7QUFDYixFQUNBLG1DQUFtQyIsInNvdXJjZXMiOlsid2VicGFjazovL29ubHlmYW5zLXBsYXRmb3JtLy4vbm9kZV9tb2R1bGVzL2J1bGxtcS9kaXN0L2Nqcy9jbGFzc2VzL3NjcmlwdHMuanM/ZjJhNiJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEluY2x1ZGVzIGFsbCB0aGUgc2NyaXB0cyBuZWVkZWQgYnkgdGhlIHF1ZXVlIGFuZCBqb2JzLlxuICovXG4vKmVzbGludC1lbnYgbm9kZSAqL1xuJ3VzZSBzdHJpY3QnO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5TY3JpcHRzID0gdm9pZCAwO1xuZXhwb3J0cy5yYXcyTmV4dEpvYkRhdGEgPSByYXcyTmV4dEpvYkRhdGE7XG5jb25zdCBtc2dwYWNrcl8xID0gcmVxdWlyZShcIm1zZ3BhY2tyXCIpO1xuY29uc3QgcGFja2VyID0gbmV3IG1zZ3BhY2tyXzEuUGFja3Ioe1xuICAgIHVzZVJlY29yZHM6IGZhbHNlLFxuICAgIGVuY29kZVVuZGVmaW5lZEFzTmlsOiB0cnVlLFxufSk7XG5jb25zdCBwYWNrID0gcGFja2VyLnBhY2s7XG5jb25zdCBlbnVtc18xID0gcmVxdWlyZShcIi4uL2VudW1zXCIpO1xuY29uc3QgdXRpbHNfMSA9IHJlcXVpcmUoXCIuLi91dGlsc1wiKTtcbmNvbnN0IHZlcnNpb25fMSA9IHJlcXVpcmUoXCIuLi92ZXJzaW9uXCIpO1xuY29uc3QgZXJyb3JzXzEgPSByZXF1aXJlKFwiLi9lcnJvcnNcIik7XG5jbGFzcyBTY3JpcHRzIHtcbiAgICBjb25zdHJ1Y3RvcihxdWV1ZSkge1xuICAgICAgICB0aGlzLnF1ZXVlID0gcXVldWU7XG4gICAgICAgIHRoaXMudmVyc2lvbiA9IHZlcnNpb25fMS52ZXJzaW9uO1xuICAgICAgICBjb25zdCBxdWV1ZUtleXMgPSB0aGlzLnF1ZXVlLmtleXM7XG4gICAgICAgIHRoaXMubW92ZVRvRmluaXNoZWRLZXlzID0gW1xuICAgICAgICAgICAgcXVldWVLZXlzLndhaXQsXG4gICAgICAgICAgICBxdWV1ZUtleXMuYWN0aXZlLFxuICAgICAgICAgICAgcXVldWVLZXlzLnByaW9yaXRpemVkLFxuICAgICAgICAgICAgcXVldWVLZXlzLmV2ZW50cyxcbiAgICAgICAgICAgIHF1ZXVlS2V5cy5zdGFsbGVkLFxuICAgICAgICAgICAgcXVldWVLZXlzLmxpbWl0ZXIsXG4gICAgICAgICAgICBxdWV1ZUtleXMuZGVsYXllZCxcbiAgICAgICAgICAgIHF1ZXVlS2V5cy5wYXVzZWQsXG4gICAgICAgICAgICBxdWV1ZUtleXMubWV0YSxcbiAgICAgICAgICAgIHF1ZXVlS2V5cy5wYyxcbiAgICAgICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgXTtcbiAgICB9XG4gICAgZXhlY0NvbW1hbmQoY2xpZW50LCBjb21tYW5kTmFtZSwgYXJncykge1xuICAgICAgICBjb25zdCBjb21tYW5kTmFtZVdpdGhWZXJzaW9uID0gYCR7Y29tbWFuZE5hbWV9OiR7dGhpcy52ZXJzaW9ufWA7XG4gICAgICAgIHJldHVybiBjbGllbnRbY29tbWFuZE5hbWVXaXRoVmVyc2lvbl0oYXJncyk7XG4gICAgfVxuICAgIGFzeW5jIGlzSm9iSW5MaXN0KGxpc3RLZXksIGpvYklkKSB7XG4gICAgICAgIGNvbnN0IGNsaWVudCA9IGF3YWl0IHRoaXMucXVldWUuY2xpZW50O1xuICAgICAgICBsZXQgcmVzdWx0O1xuICAgICAgICBpZiAoKDAsIHV0aWxzXzEuaXNSZWRpc1ZlcnNpb25Mb3dlclRoYW4pKHRoaXMucXVldWUucmVkaXNWZXJzaW9uLCAnNi4wLjYnKSkge1xuICAgICAgICAgICAgcmVzdWx0ID0gYXdhaXQgdGhpcy5leGVjQ29tbWFuZChjbGllbnQsICdpc0pvYkluTGlzdCcsIFtsaXN0S2V5LCBqb2JJZF0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmVzdWx0ID0gYXdhaXQgY2xpZW50Lmxwb3MobGlzdEtleSwgam9iSWQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBOdW1iZXIuaXNJbnRlZ2VyKHJlc3VsdCk7XG4gICAgfVxuICAgIGFkZERlbGF5ZWRKb2JBcmdzKGpvYiwgZW5jb2RlZE9wdHMsIGFyZ3MpIHtcbiAgICAgICAgY29uc3QgcXVldWVLZXlzID0gdGhpcy5xdWV1ZS5rZXlzO1xuICAgICAgICBjb25zdCBrZXlzID0gW1xuICAgICAgICAgICAgcXVldWVLZXlzLm1hcmtlcixcbiAgICAgICAgICAgIHF1ZXVlS2V5cy5tZXRhLFxuICAgICAgICAgICAgcXVldWVLZXlzLmlkLFxuICAgICAgICAgICAgcXVldWVLZXlzLmRlbGF5ZWQsXG4gICAgICAgICAgICBxdWV1ZUtleXMuY29tcGxldGVkLFxuICAgICAgICAgICAgcXVldWVLZXlzLmV2ZW50cyxcbiAgICAgICAgXTtcbiAgICAgICAga2V5cy5wdXNoKHBhY2soYXJncyksIGpvYi5kYXRhLCBlbmNvZGVkT3B0cyk7XG4gICAgICAgIHJldHVybiBrZXlzO1xuICAgIH1cbiAgICBhZGREZWxheWVkSm9iKGNsaWVudCwgam9iLCBlbmNvZGVkT3B0cywgYXJncykge1xuICAgICAgICBjb25zdCBhcmdzTGlzdCA9IHRoaXMuYWRkRGVsYXllZEpvYkFyZ3Moam9iLCBlbmNvZGVkT3B0cywgYXJncyk7XG4gICAgICAgIHJldHVybiB0aGlzLmV4ZWNDb21tYW5kKGNsaWVudCwgJ2FkZERlbGF5ZWRKb2InLCBhcmdzTGlzdCk7XG4gICAgfVxuICAgIGFkZFByaW9yaXRpemVkSm9iQXJncyhqb2IsIGVuY29kZWRPcHRzLCBhcmdzKSB7XG4gICAgICAgIGNvbnN0IHF1ZXVlS2V5cyA9IHRoaXMucXVldWUua2V5cztcbiAgICAgICAgY29uc3Qga2V5cyA9IFtcbiAgICAgICAgICAgIHF1ZXVlS2V5cy5tYXJrZXIsXG4gICAgICAgICAgICBxdWV1ZUtleXMubWV0YSxcbiAgICAgICAgICAgIHF1ZXVlS2V5cy5pZCxcbiAgICAgICAgICAgIHF1ZXVlS2V5cy5wcmlvcml0aXplZCxcbiAgICAgICAgICAgIHF1ZXVlS2V5cy5kZWxheWVkLFxuICAgICAgICAgICAgcXVldWVLZXlzLmNvbXBsZXRlZCxcbiAgICAgICAgICAgIHF1ZXVlS2V5cy5hY3RpdmUsXG4gICAgICAgICAgICBxdWV1ZUtleXMuZXZlbnRzLFxuICAgICAgICAgICAgcXVldWVLZXlzLnBjLFxuICAgICAgICBdO1xuICAgICAgICBrZXlzLnB1c2gocGFjayhhcmdzKSwgam9iLmRhdGEsIGVuY29kZWRPcHRzKTtcbiAgICAgICAgcmV0dXJuIGtleXM7XG4gICAgfVxuICAgIGFkZFByaW9yaXRpemVkSm9iKGNsaWVudCwgam9iLCBlbmNvZGVkT3B0cywgYXJncykge1xuICAgICAgICBjb25zdCBhcmdzTGlzdCA9IHRoaXMuYWRkUHJpb3JpdGl6ZWRKb2JBcmdzKGpvYiwgZW5jb2RlZE9wdHMsIGFyZ3MpO1xuICAgICAgICByZXR1cm4gdGhpcy5leGVjQ29tbWFuZChjbGllbnQsICdhZGRQcmlvcml0aXplZEpvYicsIGFyZ3NMaXN0KTtcbiAgICB9XG4gICAgYWRkUGFyZW50Sm9iQXJncyhqb2IsIGVuY29kZWRPcHRzLCBhcmdzKSB7XG4gICAgICAgIGNvbnN0IHF1ZXVlS2V5cyA9IHRoaXMucXVldWUua2V5cztcbiAgICAgICAgY29uc3Qga2V5cyA9IFtcbiAgICAgICAgICAgIHF1ZXVlS2V5cy5tZXRhLFxuICAgICAgICAgICAgcXVldWVLZXlzLmlkLFxuICAgICAgICAgICAgcXVldWVLZXlzLmRlbGF5ZWQsXG4gICAgICAgICAgICBxdWV1ZUtleXNbJ3dhaXRpbmctY2hpbGRyZW4nXSxcbiAgICAgICAgICAgIHF1ZXVlS2V5cy5jb21wbGV0ZWQsXG4gICAgICAgICAgICBxdWV1ZUtleXMuZXZlbnRzLFxuICAgICAgICBdO1xuICAgICAgICBrZXlzLnB1c2gocGFjayhhcmdzKSwgam9iLmRhdGEsIGVuY29kZWRPcHRzKTtcbiAgICAgICAgcmV0dXJuIGtleXM7XG4gICAgfVxuICAgIGFkZFBhcmVudEpvYihjbGllbnQsIGpvYiwgZW5jb2RlZE9wdHMsIGFyZ3MpIHtcbiAgICAgICAgY29uc3QgYXJnc0xpc3QgPSB0aGlzLmFkZFBhcmVudEpvYkFyZ3Moam9iLCBlbmNvZGVkT3B0cywgYXJncyk7XG4gICAgICAgIHJldHVybiB0aGlzLmV4ZWNDb21tYW5kKGNsaWVudCwgJ2FkZFBhcmVudEpvYicsIGFyZ3NMaXN0KTtcbiAgICB9XG4gICAgYWRkU3RhbmRhcmRKb2JBcmdzKGpvYiwgZW5jb2RlZE9wdHMsIGFyZ3MpIHtcbiAgICAgICAgY29uc3QgcXVldWVLZXlzID0gdGhpcy5xdWV1ZS5rZXlzO1xuICAgICAgICBjb25zdCBrZXlzID0gW1xuICAgICAgICAgICAgcXVldWVLZXlzLndhaXQsXG4gICAgICAgICAgICBxdWV1ZUtleXMucGF1c2VkLFxuICAgICAgICAgICAgcXVldWVLZXlzLm1ldGEsXG4gICAgICAgICAgICBxdWV1ZUtleXMuaWQsXG4gICAgICAgICAgICBxdWV1ZUtleXMuY29tcGxldGVkLFxuICAgICAgICAgICAgcXVldWVLZXlzLmRlbGF5ZWQsXG4gICAgICAgICAgICBxdWV1ZUtleXMuYWN0aXZlLFxuICAgICAgICAgICAgcXVldWVLZXlzLmV2ZW50cyxcbiAgICAgICAgICAgIHF1ZXVlS2V5cy5tYXJrZXIsXG4gICAgICAgIF07XG4gICAgICAgIGtleXMucHVzaChwYWNrKGFyZ3MpLCBqb2IuZGF0YSwgZW5jb2RlZE9wdHMpO1xuICAgICAgICByZXR1cm4ga2V5cztcbiAgICB9XG4gICAgYWRkU3RhbmRhcmRKb2IoY2xpZW50LCBqb2IsIGVuY29kZWRPcHRzLCBhcmdzKSB7XG4gICAgICAgIGNvbnN0IGFyZ3NMaXN0ID0gdGhpcy5hZGRTdGFuZGFyZEpvYkFyZ3Moam9iLCBlbmNvZGVkT3B0cywgYXJncyk7XG4gICAgICAgIHJldHVybiB0aGlzLmV4ZWNDb21tYW5kKGNsaWVudCwgJ2FkZFN0YW5kYXJkSm9iJywgYXJnc0xpc3QpO1xuICAgIH1cbiAgICBhc3luYyBhZGRKb2IoY2xpZW50LCBqb2IsIG9wdHMsIGpvYklkLCBwYXJlbnRLZXlPcHRzID0ge30pIHtcbiAgICAgICAgY29uc3QgcXVldWVLZXlzID0gdGhpcy5xdWV1ZS5rZXlzO1xuICAgICAgICBjb25zdCBwYXJlbnQgPSBqb2IucGFyZW50O1xuICAgICAgICBjb25zdCBhcmdzID0gW1xuICAgICAgICAgICAgcXVldWVLZXlzWycnXSxcbiAgICAgICAgICAgIHR5cGVvZiBqb2JJZCAhPT0gJ3VuZGVmaW5lZCcgPyBqb2JJZCA6ICcnLFxuICAgICAgICAgICAgam9iLm5hbWUsXG4gICAgICAgICAgICBqb2IudGltZXN0YW1wLFxuICAgICAgICAgICAgam9iLnBhcmVudEtleSB8fCBudWxsLFxuICAgICAgICAgICAgcGFyZW50S2V5T3B0cy5wYXJlbnREZXBlbmRlbmNpZXNLZXkgfHwgbnVsbCxcbiAgICAgICAgICAgIHBhcmVudCxcbiAgICAgICAgICAgIGpvYi5yZXBlYXRKb2JLZXksXG4gICAgICAgICAgICBqb2IuZGVkdXBsaWNhdGlvbklkID8gYCR7cXVldWVLZXlzLmRlfToke2pvYi5kZWR1cGxpY2F0aW9uSWR9YCA6IG51bGwsXG4gICAgICAgIF07XG4gICAgICAgIGxldCBlbmNvZGVkT3B0cztcbiAgICAgICAgaWYgKG9wdHMucmVwZWF0KSB7XG4gICAgICAgICAgICBjb25zdCByZXBlYXQgPSBPYmplY3QuYXNzaWduKHt9LCBvcHRzLnJlcGVhdCk7XG4gICAgICAgICAgICBpZiAocmVwZWF0LnN0YXJ0RGF0ZSkge1xuICAgICAgICAgICAgICAgIHJlcGVhdC5zdGFydERhdGUgPSArbmV3IERhdGUocmVwZWF0LnN0YXJ0RGF0ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocmVwZWF0LmVuZERhdGUpIHtcbiAgICAgICAgICAgICAgICByZXBlYXQuZW5kRGF0ZSA9ICtuZXcgRGF0ZShyZXBlYXQuZW5kRGF0ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbmNvZGVkT3B0cyA9IHBhY2soT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBvcHRzKSwgeyByZXBlYXQgfSkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZW5jb2RlZE9wdHMgPSBwYWNrKG9wdHMpO1xuICAgICAgICB9XG4gICAgICAgIGxldCByZXN1bHQ7XG4gICAgICAgIGlmIChwYXJlbnRLZXlPcHRzLmFkZFRvV2FpdGluZ0NoaWxkcmVuKSB7XG4gICAgICAgICAgICByZXN1bHQgPSBhd2FpdCB0aGlzLmFkZFBhcmVudEpvYihjbGllbnQsIGpvYiwgZW5jb2RlZE9wdHMsIGFyZ3MpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHR5cGVvZiBvcHRzLmRlbGF5ID09ICdudW1iZXInICYmIG9wdHMuZGVsYXkgPiAwKSB7XG4gICAgICAgICAgICByZXN1bHQgPSBhd2FpdCB0aGlzLmFkZERlbGF5ZWRKb2IoY2xpZW50LCBqb2IsIGVuY29kZWRPcHRzLCBhcmdzKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChvcHRzLnByaW9yaXR5KSB7XG4gICAgICAgICAgICByZXN1bHQgPSBhd2FpdCB0aGlzLmFkZFByaW9yaXRpemVkSm9iKGNsaWVudCwgam9iLCBlbmNvZGVkT3B0cywgYXJncyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXN1bHQgPSBhd2FpdCB0aGlzLmFkZFN0YW5kYXJkSm9iKGNsaWVudCwgam9iLCBlbmNvZGVkT3B0cywgYXJncyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlc3VsdCA8IDApIHtcbiAgICAgICAgICAgIHRocm93IHRoaXMuZmluaXNoZWRFcnJvcnMoe1xuICAgICAgICAgICAgICAgIGNvZGU6IHJlc3VsdCxcbiAgICAgICAgICAgICAgICBwYXJlbnRLZXk6IHBhcmVudEtleU9wdHMucGFyZW50S2V5LFxuICAgICAgICAgICAgICAgIGNvbW1hbmQ6ICdhZGRKb2InLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgcGF1c2VBcmdzKHBhdXNlKSB7XG4gICAgICAgIGxldCBzcmMgPSAnd2FpdCcsIGRzdCA9ICdwYXVzZWQnO1xuICAgICAgICBpZiAoIXBhdXNlKSB7XG4gICAgICAgICAgICBzcmMgPSAncGF1c2VkJztcbiAgICAgICAgICAgIGRzdCA9ICd3YWl0JztcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBrZXlzID0gW3NyYywgZHN0LCAnbWV0YScsICdwcmlvcml0aXplZCddLm1hcCgobmFtZSkgPT4gdGhpcy5xdWV1ZS50b0tleShuYW1lKSk7XG4gICAgICAgIGtleXMucHVzaCh0aGlzLnF1ZXVlLmtleXMuZXZlbnRzLCB0aGlzLnF1ZXVlLmtleXMuZGVsYXllZCwgdGhpcy5xdWV1ZS5rZXlzLm1hcmtlcik7XG4gICAgICAgIGNvbnN0IGFyZ3MgPSBbcGF1c2UgPyAncGF1c2VkJyA6ICdyZXN1bWVkJ107XG4gICAgICAgIHJldHVybiBrZXlzLmNvbmNhdChhcmdzKTtcbiAgICB9XG4gICAgYXN5bmMgcGF1c2UocGF1c2UpIHtcbiAgICAgICAgY29uc3QgY2xpZW50ID0gYXdhaXQgdGhpcy5xdWV1ZS5jbGllbnQ7XG4gICAgICAgIGNvbnN0IGFyZ3MgPSB0aGlzLnBhdXNlQXJncyhwYXVzZSk7XG4gICAgICAgIHJldHVybiB0aGlzLmV4ZWNDb21tYW5kKGNsaWVudCwgJ3BhdXNlJywgYXJncyk7XG4gICAgfVxuICAgIGFkZFJlcGVhdGFibGVKb2JBcmdzKGN1c3RvbUtleSwgbmV4dE1pbGxpcywgb3B0cywgbGVnYWN5Q3VzdG9tS2V5KSB7XG4gICAgICAgIGNvbnN0IHF1ZXVlS2V5cyA9IHRoaXMucXVldWUua2V5cztcbiAgICAgICAgY29uc3Qga2V5cyA9IFtcbiAgICAgICAgICAgIHF1ZXVlS2V5cy5yZXBlYXQsXG4gICAgICAgICAgICBxdWV1ZUtleXMuZGVsYXllZCxcbiAgICAgICAgXTtcbiAgICAgICAgY29uc3QgYXJncyA9IFtcbiAgICAgICAgICAgIG5leHRNaWxsaXMsXG4gICAgICAgICAgICBwYWNrKG9wdHMpLFxuICAgICAgICAgICAgbGVnYWN5Q3VzdG9tS2V5LFxuICAgICAgICAgICAgY3VzdG9tS2V5LFxuICAgICAgICAgICAgcXVldWVLZXlzWycnXSxcbiAgICAgICAgXTtcbiAgICAgICAgcmV0dXJuIGtleXMuY29uY2F0KGFyZ3MpO1xuICAgIH1cbiAgICBhc3luYyBhZGRSZXBlYXRhYmxlSm9iKGN1c3RvbUtleSwgbmV4dE1pbGxpcywgb3B0cywgbGVnYWN5Q3VzdG9tS2V5KSB7XG4gICAgICAgIGNvbnN0IGNsaWVudCA9IGF3YWl0IHRoaXMucXVldWUuY2xpZW50O1xuICAgICAgICBjb25zdCBhcmdzID0gdGhpcy5hZGRSZXBlYXRhYmxlSm9iQXJncyhjdXN0b21LZXksIG5leHRNaWxsaXMsIG9wdHMsIGxlZ2FjeUN1c3RvbUtleSk7XG4gICAgICAgIHJldHVybiB0aGlzLmV4ZWNDb21tYW5kKGNsaWVudCwgJ2FkZFJlcGVhdGFibGVKb2InLCBhcmdzKTtcbiAgICB9XG4gICAgYXN5bmMgYWRkSm9iU2NoZWR1bGVyKGpvYlNjaGVkdWxlcklkLCBuZXh0TWlsbGlzLCB0ZW1wbGF0ZURhdGEsIHRlbXBsYXRlT3B0cywgb3B0cywgZGVsYXllZEpvYk9wdHMsIFxuICAgIC8vIFRoZSBqb2IgaWQgb2YgdGhlIGpvYiB0aGF0IHByb2R1Y2VkIHRoaXMgbmV4dCBpdGVyYXRpb25cbiAgICBwcm9kdWNlcklkKSB7XG4gICAgICAgIGNvbnN0IGNsaWVudCA9IGF3YWl0IHRoaXMucXVldWUuY2xpZW50O1xuICAgICAgICBjb25zdCBxdWV1ZUtleXMgPSB0aGlzLnF1ZXVlLmtleXM7XG4gICAgICAgIGNvbnN0IGtleXMgPSBbXG4gICAgICAgICAgICBxdWV1ZUtleXMucmVwZWF0LFxuICAgICAgICAgICAgcXVldWVLZXlzLmRlbGF5ZWQsXG4gICAgICAgICAgICBxdWV1ZUtleXMud2FpdCxcbiAgICAgICAgICAgIHF1ZXVlS2V5cy5wYXVzZWQsXG4gICAgICAgICAgICBxdWV1ZUtleXMubWV0YSxcbiAgICAgICAgICAgIHF1ZXVlS2V5cy5wcmlvcml0aXplZCxcbiAgICAgICAgICAgIHF1ZXVlS2V5cy5tYXJrZXIsXG4gICAgICAgICAgICBxdWV1ZUtleXMuaWQsXG4gICAgICAgICAgICBxdWV1ZUtleXMuZXZlbnRzLFxuICAgICAgICAgICAgcXVldWVLZXlzLnBjLFxuICAgICAgICAgICAgcXVldWVLZXlzLmFjdGl2ZSxcbiAgICAgICAgXTtcbiAgICAgICAgY29uc3QgYXJncyA9IFtcbiAgICAgICAgICAgIG5leHRNaWxsaXMsXG4gICAgICAgICAgICBwYWNrKG9wdHMpLFxuICAgICAgICAgICAgam9iU2NoZWR1bGVySWQsXG4gICAgICAgICAgICB0ZW1wbGF0ZURhdGEsXG4gICAgICAgICAgICBwYWNrKHRlbXBsYXRlT3B0cyksXG4gICAgICAgICAgICBwYWNrKGRlbGF5ZWRKb2JPcHRzKSxcbiAgICAgICAgICAgIERhdGUubm93KCksXG4gICAgICAgICAgICBxdWV1ZUtleXNbJyddLFxuICAgICAgICAgICAgcHJvZHVjZXJJZCA/IHRoaXMucXVldWUudG9LZXkocHJvZHVjZXJJZCkgOiAnJyxcbiAgICAgICAgXTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5leGVjQ29tbWFuZChjbGllbnQsICdhZGRKb2JTY2hlZHVsZXInLCBrZXlzLmNvbmNhdChhcmdzKSk7XG4gICAgICAgIGlmICh0eXBlb2YgcmVzdWx0ID09PSAnbnVtYmVyJyAmJiByZXN1bHQgPCAwKSB7XG4gICAgICAgICAgICB0aHJvdyB0aGlzLmZpbmlzaGVkRXJyb3JzKHtcbiAgICAgICAgICAgICAgICBjb2RlOiByZXN1bHQsXG4gICAgICAgICAgICAgICAgY29tbWFuZDogJ2FkZEpvYlNjaGVkdWxlcicsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICBhc3luYyB1cGRhdGVSZXBlYXRhYmxlSm9iTWlsbGlzKGNsaWVudCwgY3VzdG9tS2V5LCBuZXh0TWlsbGlzLCBsZWdhY3lDdXN0b21LZXkpIHtcbiAgICAgICAgY29uc3QgYXJncyA9IFtcbiAgICAgICAgICAgIHRoaXMucXVldWUua2V5cy5yZXBlYXQsXG4gICAgICAgICAgICBuZXh0TWlsbGlzLFxuICAgICAgICAgICAgY3VzdG9tS2V5LFxuICAgICAgICAgICAgbGVnYWN5Q3VzdG9tS2V5LFxuICAgICAgICBdO1xuICAgICAgICByZXR1cm4gdGhpcy5leGVjQ29tbWFuZChjbGllbnQsICd1cGRhdGVSZXBlYXRhYmxlSm9iTWlsbGlzJywgYXJncyk7XG4gICAgfVxuICAgIGFzeW5jIHVwZGF0ZUpvYlNjaGVkdWxlck5leHRNaWxsaXMoam9iU2NoZWR1bGVySWQsIG5leHRNaWxsaXMsIHRlbXBsYXRlRGF0YSwgZGVsYXllZEpvYk9wdHMsIFxuICAgIC8vIFRoZSBqb2IgaWQgb2YgdGhlIGpvYiB0aGF0IHByb2R1Y2VkIHRoaXMgbmV4dCBpdGVyYXRpb24gLSBUT0RPOiByZW1vdmUgaW4gbmV4dCBicmVha2luZyBjaGFuZ2VcbiAgICBwcm9kdWNlcklkKSB7XG4gICAgICAgIGNvbnN0IGNsaWVudCA9IGF3YWl0IHRoaXMucXVldWUuY2xpZW50O1xuICAgICAgICBjb25zdCBxdWV1ZUtleXMgPSB0aGlzLnF1ZXVlLmtleXM7XG4gICAgICAgIGNvbnN0IGtleXMgPSBbXG4gICAgICAgICAgICBxdWV1ZUtleXMucmVwZWF0LFxuICAgICAgICAgICAgcXVldWVLZXlzLmRlbGF5ZWQsXG4gICAgICAgICAgICBxdWV1ZUtleXMud2FpdCxcbiAgICAgICAgICAgIHF1ZXVlS2V5cy5wYXVzZWQsXG4gICAgICAgICAgICBxdWV1ZUtleXMubWV0YSxcbiAgICAgICAgICAgIHF1ZXVlS2V5cy5wcmlvcml0aXplZCxcbiAgICAgICAgICAgIHF1ZXVlS2V5cy5tYXJrZXIsXG4gICAgICAgICAgICBxdWV1ZUtleXMuaWQsXG4gICAgICAgICAgICBxdWV1ZUtleXMuZXZlbnRzLFxuICAgICAgICAgICAgcXVldWVLZXlzLnBjLFxuICAgICAgICAgICAgcHJvZHVjZXJJZCA/IHRoaXMucXVldWUudG9LZXkocHJvZHVjZXJJZCkgOiAnJyxcbiAgICAgICAgICAgIHF1ZXVlS2V5cy5hY3RpdmUsXG4gICAgICAgIF07XG4gICAgICAgIGNvbnN0IGFyZ3MgPSBbXG4gICAgICAgICAgICBuZXh0TWlsbGlzLFxuICAgICAgICAgICAgam9iU2NoZWR1bGVySWQsXG4gICAgICAgICAgICB0ZW1wbGF0ZURhdGEsXG4gICAgICAgICAgICBwYWNrKGRlbGF5ZWRKb2JPcHRzKSxcbiAgICAgICAgICAgIERhdGUubm93KCksXG4gICAgICAgICAgICBxdWV1ZUtleXNbJyddLFxuICAgICAgICAgICAgcHJvZHVjZXJJZCxcbiAgICAgICAgXTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZXhlY0NvbW1hbmQoY2xpZW50LCAndXBkYXRlSm9iU2NoZWR1bGVyJywga2V5cy5jb25jYXQoYXJncykpO1xuICAgIH1cbiAgICByZW1vdmVSZXBlYXRhYmxlQXJncyhsZWdhY3lSZXBlYXRKb2JJZCwgcmVwZWF0Q29uY2F0T3B0aW9ucywgcmVwZWF0Sm9iS2V5KSB7XG4gICAgICAgIGNvbnN0IHF1ZXVlS2V5cyA9IHRoaXMucXVldWUua2V5cztcbiAgICAgICAgY29uc3Qga2V5cyA9IFtxdWV1ZUtleXMucmVwZWF0LCBxdWV1ZUtleXMuZGVsYXllZCwgcXVldWVLZXlzLmV2ZW50c107XG4gICAgICAgIGNvbnN0IGFyZ3MgPSBbXG4gICAgICAgICAgICBsZWdhY3lSZXBlYXRKb2JJZCxcbiAgICAgICAgICAgIHRoaXMuZ2V0UmVwZWF0Q29uY2F0T3B0aW9ucyhyZXBlYXRDb25jYXRPcHRpb25zLCByZXBlYXRKb2JLZXkpLFxuICAgICAgICAgICAgcmVwZWF0Sm9iS2V5LFxuICAgICAgICAgICAgcXVldWVLZXlzWycnXSxcbiAgICAgICAgXTtcbiAgICAgICAgcmV0dXJuIGtleXMuY29uY2F0KGFyZ3MpO1xuICAgIH1cbiAgICAvLyBUT0RPOiByZW1vdmUgdGhpcyBjaGVjayBpbiBuZXh0IGJyZWFraW5nIGNoYW5nZVxuICAgIGdldFJlcGVhdENvbmNhdE9wdGlvbnMocmVwZWF0Q29uY2F0T3B0aW9ucywgcmVwZWF0Sm9iS2V5KSB7XG4gICAgICAgIGlmIChyZXBlYXRKb2JLZXkgJiYgcmVwZWF0Sm9iS2V5LnNwbGl0KCc6JykubGVuZ3RoID4gMikge1xuICAgICAgICAgICAgcmV0dXJuIHJlcGVhdEpvYktleTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVwZWF0Q29uY2F0T3B0aW9ucztcbiAgICB9XG4gICAgYXN5bmMgcmVtb3ZlUmVwZWF0YWJsZShsZWdhY3lSZXBlYXRKb2JJZCwgcmVwZWF0Q29uY2F0T3B0aW9ucywgcmVwZWF0Sm9iS2V5KSB7XG4gICAgICAgIGNvbnN0IGNsaWVudCA9IGF3YWl0IHRoaXMucXVldWUuY2xpZW50O1xuICAgICAgICBjb25zdCBhcmdzID0gdGhpcy5yZW1vdmVSZXBlYXRhYmxlQXJncyhsZWdhY3lSZXBlYXRKb2JJZCwgcmVwZWF0Q29uY2F0T3B0aW9ucywgcmVwZWF0Sm9iS2V5KTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZXhlY0NvbW1hbmQoY2xpZW50LCAncmVtb3ZlUmVwZWF0YWJsZScsIGFyZ3MpO1xuICAgIH1cbiAgICBhc3luYyByZW1vdmVKb2JTY2hlZHVsZXIoam9iU2NoZWR1bGVySWQpIHtcbiAgICAgICAgY29uc3QgY2xpZW50ID0gYXdhaXQgdGhpcy5xdWV1ZS5jbGllbnQ7XG4gICAgICAgIGNvbnN0IHF1ZXVlS2V5cyA9IHRoaXMucXVldWUua2V5cztcbiAgICAgICAgY29uc3Qga2V5cyA9IFtxdWV1ZUtleXMucmVwZWF0LCBxdWV1ZUtleXMuZGVsYXllZCwgcXVldWVLZXlzLmV2ZW50c107XG4gICAgICAgIGNvbnN0IGFyZ3MgPSBbam9iU2NoZWR1bGVySWQsIHF1ZXVlS2V5c1snJ11dO1xuICAgICAgICByZXR1cm4gdGhpcy5leGVjQ29tbWFuZChjbGllbnQsICdyZW1vdmVKb2JTY2hlZHVsZXInLCBrZXlzLmNvbmNhdChhcmdzKSk7XG4gICAgfVxuICAgIHJlbW92ZUFyZ3Moam9iSWQsIHJlbW92ZUNoaWxkcmVuKSB7XG4gICAgICAgIGNvbnN0IGtleXMgPSBbam9iSWQsICdyZXBlYXQnXS5tYXAobmFtZSA9PiB0aGlzLnF1ZXVlLnRvS2V5KG5hbWUpKTtcbiAgICAgICAgY29uc3QgYXJncyA9IFtqb2JJZCwgcmVtb3ZlQ2hpbGRyZW4gPyAxIDogMCwgdGhpcy5xdWV1ZS50b0tleSgnJyldO1xuICAgICAgICByZXR1cm4ga2V5cy5jb25jYXQoYXJncyk7XG4gICAgfVxuICAgIGFzeW5jIHJlbW92ZShqb2JJZCwgcmVtb3ZlQ2hpbGRyZW4pIHtcbiAgICAgICAgY29uc3QgY2xpZW50ID0gYXdhaXQgdGhpcy5xdWV1ZS5jbGllbnQ7XG4gICAgICAgIGNvbnN0IGFyZ3MgPSB0aGlzLnJlbW92ZUFyZ3Moam9iSWQsIHJlbW92ZUNoaWxkcmVuKTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5leGVjQ29tbWFuZChjbGllbnQsICdyZW1vdmVKb2InLCBhcmdzKTtcbiAgICAgICAgaWYgKHJlc3VsdCA8IDApIHtcbiAgICAgICAgICAgIHRocm93IHRoaXMuZmluaXNoZWRFcnJvcnMoe1xuICAgICAgICAgICAgICAgIGNvZGU6IHJlc3VsdCxcbiAgICAgICAgICAgICAgICBqb2JJZCxcbiAgICAgICAgICAgICAgICBjb21tYW5kOiAncmVtb3ZlSm9iJyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIGFzeW5jIHJlbW92ZVVucHJvY2Vzc2VkQ2hpbGRyZW4oam9iSWQpIHtcbiAgICAgICAgY29uc3QgY2xpZW50ID0gYXdhaXQgdGhpcy5xdWV1ZS5jbGllbnQ7XG4gICAgICAgIGNvbnN0IGFyZ3MgPSBbXG4gICAgICAgICAgICB0aGlzLnF1ZXVlLnRvS2V5KGpvYklkKSxcbiAgICAgICAgICAgIHRoaXMucXVldWUua2V5cy5tZXRhLFxuICAgICAgICAgICAgdGhpcy5xdWV1ZS50b0tleSgnJyksXG4gICAgICAgICAgICBqb2JJZCxcbiAgICAgICAgXTtcbiAgICAgICAgYXdhaXQgdGhpcy5leGVjQ29tbWFuZChjbGllbnQsICdyZW1vdmVVbnByb2Nlc3NlZENoaWxkcmVuJywgYXJncyk7XG4gICAgfVxuICAgIGFzeW5jIGV4dGVuZExvY2soam9iSWQsIHRva2VuLCBkdXJhdGlvbiwgY2xpZW50KSB7XG4gICAgICAgIGNsaWVudCA9IGNsaWVudCB8fCAoYXdhaXQgdGhpcy5xdWV1ZS5jbGllbnQpO1xuICAgICAgICBjb25zdCBhcmdzID0gW1xuICAgICAgICAgICAgdGhpcy5xdWV1ZS50b0tleShqb2JJZCkgKyAnOmxvY2snLFxuICAgICAgICAgICAgdGhpcy5xdWV1ZS5rZXlzLnN0YWxsZWQsXG4gICAgICAgICAgICB0b2tlbixcbiAgICAgICAgICAgIGR1cmF0aW9uLFxuICAgICAgICAgICAgam9iSWQsXG4gICAgICAgIF07XG4gICAgICAgIHJldHVybiB0aGlzLmV4ZWNDb21tYW5kKGNsaWVudCwgJ2V4dGVuZExvY2snLCBhcmdzKTtcbiAgICB9XG4gICAgYXN5bmMgZXh0ZW5kTG9ja3Moam9iSWRzLCB0b2tlbnMsIGR1cmF0aW9uKSB7XG4gICAgICAgIGNvbnN0IGNsaWVudCA9IGF3YWl0IHRoaXMucXVldWUuY2xpZW50O1xuICAgICAgICBjb25zdCBhcmdzID0gW1xuICAgICAgICAgICAgdGhpcy5xdWV1ZS5rZXlzLnN0YWxsZWQsXG4gICAgICAgICAgICB0aGlzLnF1ZXVlLnRvS2V5KCcnKSxcbiAgICAgICAgICAgIHBhY2sodG9rZW5zKSxcbiAgICAgICAgICAgIHBhY2soam9iSWRzKSxcbiAgICAgICAgICAgIGR1cmF0aW9uLFxuICAgICAgICBdO1xuICAgICAgICByZXR1cm4gdGhpcy5leGVjQ29tbWFuZChjbGllbnQsICdleHRlbmRMb2NrcycsIGFyZ3MpO1xuICAgIH1cbiAgICBhc3luYyB1cGRhdGVEYXRhKGpvYiwgZGF0YSkge1xuICAgICAgICBjb25zdCBjbGllbnQgPSBhd2FpdCB0aGlzLnF1ZXVlLmNsaWVudDtcbiAgICAgICAgY29uc3Qga2V5cyA9IFt0aGlzLnF1ZXVlLnRvS2V5KGpvYi5pZCldO1xuICAgICAgICBjb25zdCBkYXRhSnNvbiA9IEpTT04uc3RyaW5naWZ5KGRhdGEpO1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLmV4ZWNDb21tYW5kKGNsaWVudCwgJ3VwZGF0ZURhdGEnLCBrZXlzLmNvbmNhdChbZGF0YUpzb25dKSk7XG4gICAgICAgIGlmIChyZXN1bHQgPCAwKSB7XG4gICAgICAgICAgICB0aHJvdyB0aGlzLmZpbmlzaGVkRXJyb3JzKHtcbiAgICAgICAgICAgICAgICBjb2RlOiByZXN1bHQsXG4gICAgICAgICAgICAgICAgam9iSWQ6IGpvYi5pZCxcbiAgICAgICAgICAgICAgICBjb21tYW5kOiAndXBkYXRlRGF0YScsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyB1cGRhdGVQcm9ncmVzcyhqb2JJZCwgcHJvZ3Jlc3MpIHtcbiAgICAgICAgY29uc3QgY2xpZW50ID0gYXdhaXQgdGhpcy5xdWV1ZS5jbGllbnQ7XG4gICAgICAgIGNvbnN0IGtleXMgPSBbXG4gICAgICAgICAgICB0aGlzLnF1ZXVlLnRvS2V5KGpvYklkKSxcbiAgICAgICAgICAgIHRoaXMucXVldWUua2V5cy5ldmVudHMsXG4gICAgICAgICAgICB0aGlzLnF1ZXVlLmtleXMubWV0YSxcbiAgICAgICAgXTtcbiAgICAgICAgY29uc3QgcHJvZ3Jlc3NKc29uID0gSlNPTi5zdHJpbmdpZnkocHJvZ3Jlc3MpO1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLmV4ZWNDb21tYW5kKGNsaWVudCwgJ3VwZGF0ZVByb2dyZXNzJywga2V5cy5jb25jYXQoW2pvYklkLCBwcm9ncmVzc0pzb25dKSk7XG4gICAgICAgIGlmIChyZXN1bHQgPCAwKSB7XG4gICAgICAgICAgICB0aHJvdyB0aGlzLmZpbmlzaGVkRXJyb3JzKHtcbiAgICAgICAgICAgICAgICBjb2RlOiByZXN1bHQsXG4gICAgICAgICAgICAgICAgam9iSWQsXG4gICAgICAgICAgICAgICAgY29tbWFuZDogJ3VwZGF0ZVByb2dyZXNzJyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIGFkZExvZyhqb2JJZCwgbG9nUm93LCBrZWVwTG9ncykge1xuICAgICAgICBjb25zdCBjbGllbnQgPSBhd2FpdCB0aGlzLnF1ZXVlLmNsaWVudDtcbiAgICAgICAgY29uc3Qga2V5cyA9IFtcbiAgICAgICAgICAgIHRoaXMucXVldWUudG9LZXkoam9iSWQpLFxuICAgICAgICAgICAgdGhpcy5xdWV1ZS50b0tleShqb2JJZCkgKyAnOmxvZ3MnLFxuICAgICAgICBdO1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLmV4ZWNDb21tYW5kKGNsaWVudCwgJ2FkZExvZycsIGtleXMuY29uY2F0KFtqb2JJZCwgbG9nUm93LCBrZWVwTG9ncyA/IGtlZXBMb2dzIDogJyddKSk7XG4gICAgICAgIGlmIChyZXN1bHQgPCAwKSB7XG4gICAgICAgICAgICB0aHJvdyB0aGlzLmZpbmlzaGVkRXJyb3JzKHtcbiAgICAgICAgICAgICAgICBjb2RlOiByZXN1bHQsXG4gICAgICAgICAgICAgICAgam9iSWQsXG4gICAgICAgICAgICAgICAgY29tbWFuZDogJ2FkZExvZycsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICBtb3ZlVG9GaW5pc2hlZEFyZ3Moam9iLCB2YWwsIHByb3BWYWwsIHNob3VsZFJlbW92ZSwgdGFyZ2V0LCB0b2tlbiwgdGltZXN0YW1wLCBmZXRjaE5leHQgPSB0cnVlLCBmaWVsZHNUb1VwZGF0ZSkge1xuICAgICAgICB2YXIgX2EsIF9iLCBfYywgX2QsIF9lLCBfZiwgX2c7XG4gICAgICAgIGNvbnN0IHF1ZXVlS2V5cyA9IHRoaXMucXVldWUua2V5cztcbiAgICAgICAgY29uc3Qgb3B0cyA9IHRoaXMucXVldWUub3B0cztcbiAgICAgICAgY29uc3Qgd29ya2VyS2VlcEpvYnMgPSB0YXJnZXQgPT09ICdjb21wbGV0ZWQnID8gb3B0cy5yZW1vdmVPbkNvbXBsZXRlIDogb3B0cy5yZW1vdmVPbkZhaWw7XG4gICAgICAgIGNvbnN0IG1ldHJpY3NLZXkgPSB0aGlzLnF1ZXVlLnRvS2V5KGBtZXRyaWNzOiR7dGFyZ2V0fWApO1xuICAgICAgICBjb25zdCBrZXlzID0gdGhpcy5tb3ZlVG9GaW5pc2hlZEtleXM7XG4gICAgICAgIGtleXNbMTBdID0gcXVldWVLZXlzW3RhcmdldF07XG4gICAgICAgIGtleXNbMTFdID0gdGhpcy5xdWV1ZS50b0tleSgoX2EgPSBqb2IuaWQpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6ICcnKTtcbiAgICAgICAga2V5c1sxMl0gPSBtZXRyaWNzS2V5O1xuICAgICAgICBrZXlzWzEzXSA9IHRoaXMucXVldWUua2V5cy5tYXJrZXI7XG4gICAgICAgIGNvbnN0IGtlZXBKb2JzID0gdGhpcy5nZXRLZWVwSm9icyhzaG91bGRSZW1vdmUsIHdvcmtlcktlZXBKb2JzKTtcbiAgICAgICAgY29uc3QgYXJncyA9IFtcbiAgICAgICAgICAgIGpvYi5pZCxcbiAgICAgICAgICAgIHRpbWVzdGFtcCxcbiAgICAgICAgICAgIHByb3BWYWwsXG4gICAgICAgICAgICB0eXBlb2YgdmFsID09PSAndW5kZWZpbmVkJyA/ICdudWxsJyA6IHZhbCxcbiAgICAgICAgICAgIHRhcmdldCxcbiAgICAgICAgICAgICFmZXRjaE5leHQgfHwgdGhpcy5xdWV1ZS5jbG9zaW5nID8gMCA6IDEsXG4gICAgICAgICAgICBxdWV1ZUtleXNbJyddLFxuICAgICAgICAgICAgcGFjayh7XG4gICAgICAgICAgICAgICAgdG9rZW4sXG4gICAgICAgICAgICAgICAgbmFtZTogb3B0cy5uYW1lLFxuICAgICAgICAgICAgICAgIGtlZXBKb2JzLFxuICAgICAgICAgICAgICAgIGxpbWl0ZXI6IG9wdHMubGltaXRlcixcbiAgICAgICAgICAgICAgICBsb2NrRHVyYXRpb246IG9wdHMubG9ja0R1cmF0aW9uLFxuICAgICAgICAgICAgICAgIGF0dGVtcHRzOiBqb2Iub3B0cy5hdHRlbXB0cyxcbiAgICAgICAgICAgICAgICBtYXhNZXRyaWNzU2l6ZTogKChfYiA9IG9wdHMubWV0cmljcykgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLm1heERhdGFQb2ludHMpXG4gICAgICAgICAgICAgICAgICAgID8gKF9jID0gb3B0cy5tZXRyaWNzKSA9PT0gbnVsbCB8fCBfYyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2MubWF4RGF0YVBvaW50c1xuICAgICAgICAgICAgICAgICAgICA6ICcnLFxuICAgICAgICAgICAgICAgIGZwb2Y6ICEhKChfZCA9IGpvYi5vcHRzKSA9PT0gbnVsbCB8fCBfZCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2QuZmFpbFBhcmVudE9uRmFpbHVyZSksXG4gICAgICAgICAgICAgICAgY3BvZjogISEoKF9lID0gam9iLm9wdHMpID09PSBudWxsIHx8IF9lID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZS5jb250aW51ZVBhcmVudE9uRmFpbHVyZSksXG4gICAgICAgICAgICAgICAgaWRvZjogISEoKF9mID0gam9iLm9wdHMpID09PSBudWxsIHx8IF9mID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZi5pZ25vcmVEZXBlbmRlbmN5T25GYWlsdXJlKSxcbiAgICAgICAgICAgICAgICByZG9mOiAhISgoX2cgPSBqb2Iub3B0cykgPT09IG51bGwgfHwgX2cgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9nLnJlbW92ZURlcGVuZGVuY3lPbkZhaWx1cmUpLFxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBmaWVsZHNUb1VwZGF0ZSA/IHBhY2soKDAsIHV0aWxzXzEub2JqZWN0VG9GbGF0QXJyYXkpKGZpZWxkc1RvVXBkYXRlKSkgOiB2b2lkIDAsXG4gICAgICAgIF07XG4gICAgICAgIHJldHVybiBrZXlzLmNvbmNhdChhcmdzKTtcbiAgICB9XG4gICAgZ2V0S2VlcEpvYnMoc2hvdWxkUmVtb3ZlLCB3b3JrZXJLZWVwSm9icykge1xuICAgICAgICBpZiAodHlwZW9mIHNob3VsZFJlbW92ZSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHJldHVybiB3b3JrZXJLZWVwSm9icyB8fCB7IGNvdW50OiBzaG91bGRSZW1vdmUgPyAwIDogLTEgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHlwZW9mIHNob3VsZFJlbW92ZSA9PT0gJ29iamVjdCdcbiAgICAgICAgICAgID8gc2hvdWxkUmVtb3ZlXG4gICAgICAgICAgICA6IHR5cGVvZiBzaG91bGRSZW1vdmUgPT09ICdudW1iZXInXG4gICAgICAgICAgICAgICAgPyB7IGNvdW50OiBzaG91bGRSZW1vdmUgfVxuICAgICAgICAgICAgICAgIDogeyBjb3VudDogc2hvdWxkUmVtb3ZlID8gMCA6IC0xIH07XG4gICAgfVxuICAgIGFzeW5jIG1vdmVUb0ZpbmlzaGVkKGpvYklkLCBhcmdzKSB7XG4gICAgICAgIGNvbnN0IGNsaWVudCA9IGF3YWl0IHRoaXMucXVldWUuY2xpZW50O1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLmV4ZWNDb21tYW5kKGNsaWVudCwgJ21vdmVUb0ZpbmlzaGVkJywgYXJncyk7XG4gICAgICAgIGlmIChyZXN1bHQgPCAwKSB7XG4gICAgICAgICAgICB0aHJvdyB0aGlzLmZpbmlzaGVkRXJyb3JzKHtcbiAgICAgICAgICAgICAgICBjb2RlOiByZXN1bHQsXG4gICAgICAgICAgICAgICAgam9iSWQsXG4gICAgICAgICAgICAgICAgY29tbWFuZDogJ21vdmVUb0ZpbmlzaGVkJyxcbiAgICAgICAgICAgICAgICBzdGF0ZTogJ2FjdGl2ZScsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgcmVzdWx0ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgIHJldHVybiByYXcyTmV4dEpvYkRhdGEocmVzdWx0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBkcmFpbkFyZ3MoZGVsYXllZCkge1xuICAgICAgICBjb25zdCBxdWV1ZUtleXMgPSB0aGlzLnF1ZXVlLmtleXM7XG4gICAgICAgIGNvbnN0IGtleXMgPSBbXG4gICAgICAgICAgICBxdWV1ZUtleXMud2FpdCxcbiAgICAgICAgICAgIHF1ZXVlS2V5cy5wYXVzZWQsXG4gICAgICAgICAgICBxdWV1ZUtleXMuZGVsYXllZCxcbiAgICAgICAgICAgIHF1ZXVlS2V5cy5wcmlvcml0aXplZCxcbiAgICAgICAgICAgIHF1ZXVlS2V5cy5yZXBlYXQsXG4gICAgICAgIF07XG4gICAgICAgIGNvbnN0IGFyZ3MgPSBbcXVldWVLZXlzWycnXSwgZGVsYXllZCA/ICcxJyA6ICcwJ107XG4gICAgICAgIHJldHVybiBrZXlzLmNvbmNhdChhcmdzKTtcbiAgICB9XG4gICAgYXN5bmMgZHJhaW4oZGVsYXllZCkge1xuICAgICAgICBjb25zdCBjbGllbnQgPSBhd2FpdCB0aGlzLnF1ZXVlLmNsaWVudDtcbiAgICAgICAgY29uc3QgYXJncyA9IHRoaXMuZHJhaW5BcmdzKGRlbGF5ZWQpO1xuICAgICAgICByZXR1cm4gdGhpcy5leGVjQ29tbWFuZChjbGllbnQsICdkcmFpbicsIGFyZ3MpO1xuICAgIH1cbiAgICByZW1vdmVDaGlsZERlcGVuZGVuY3lBcmdzKGpvYklkLCBwYXJlbnRLZXkpIHtcbiAgICAgICAgY29uc3QgcXVldWVLZXlzID0gdGhpcy5xdWV1ZS5rZXlzO1xuICAgICAgICBjb25zdCBrZXlzID0gW3F1ZXVlS2V5c1snJ11dO1xuICAgICAgICBjb25zdCBhcmdzID0gW3RoaXMucXVldWUudG9LZXkoam9iSWQpLCBwYXJlbnRLZXldO1xuICAgICAgICByZXR1cm4ga2V5cy5jb25jYXQoYXJncyk7XG4gICAgfVxuICAgIGFzeW5jIHJlbW92ZUNoaWxkRGVwZW5kZW5jeShqb2JJZCwgcGFyZW50S2V5KSB7XG4gICAgICAgIGNvbnN0IGNsaWVudCA9IGF3YWl0IHRoaXMucXVldWUuY2xpZW50O1xuICAgICAgICBjb25zdCBhcmdzID0gdGhpcy5yZW1vdmVDaGlsZERlcGVuZGVuY3lBcmdzKGpvYklkLCBwYXJlbnRLZXkpO1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLmV4ZWNDb21tYW5kKGNsaWVudCwgJ3JlbW92ZUNoaWxkRGVwZW5kZW5jeScsIGFyZ3MpO1xuICAgICAgICBzd2l0Y2ggKHJlc3VsdCkge1xuICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgdGhyb3cgdGhpcy5maW5pc2hlZEVycm9ycyh7XG4gICAgICAgICAgICAgICAgICAgIGNvZGU6IHJlc3VsdCxcbiAgICAgICAgICAgICAgICAgICAgam9iSWQsXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudEtleSxcbiAgICAgICAgICAgICAgICAgICAgY29tbWFuZDogJ3JlbW92ZUNoaWxkRGVwZW5kZW5jeScsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0UmFuZ2VzQXJncyh0eXBlcywgc3RhcnQsIGVuZCwgYXNjKSB7XG4gICAgICAgIGNvbnN0IHF1ZXVlS2V5cyA9IHRoaXMucXVldWUua2V5cztcbiAgICAgICAgY29uc3QgdHJhbnNmb3JtZWRUeXBlcyA9IHR5cGVzLm1hcCh0eXBlID0+IHtcbiAgICAgICAgICAgIHJldHVybiB0eXBlID09PSAnd2FpdGluZycgPyAnd2FpdCcgOiB0eXBlO1xuICAgICAgICB9KTtcbiAgICAgICAgY29uc3Qga2V5cyA9IFtxdWV1ZUtleXNbJyddXTtcbiAgICAgICAgY29uc3QgYXJncyA9IFtzdGFydCwgZW5kLCBhc2MgPyAnMScgOiAnMCcsIC4uLnRyYW5zZm9ybWVkVHlwZXNdO1xuICAgICAgICByZXR1cm4ga2V5cy5jb25jYXQoYXJncyk7XG4gICAgfVxuICAgIGFzeW5jIGdldFJhbmdlcyh0eXBlcywgc3RhcnQgPSAwLCBlbmQgPSAxLCBhc2MgPSBmYWxzZSkge1xuICAgICAgICBjb25zdCBjbGllbnQgPSBhd2FpdCB0aGlzLnF1ZXVlLmNsaWVudDtcbiAgICAgICAgY29uc3QgYXJncyA9IHRoaXMuZ2V0UmFuZ2VzQXJncyh0eXBlcywgc3RhcnQsIGVuZCwgYXNjKTtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuZXhlY0NvbW1hbmQoY2xpZW50LCAnZ2V0UmFuZ2VzJywgYXJncyk7XG4gICAgfVxuICAgIGdldENvdW50c0FyZ3ModHlwZXMpIHtcbiAgICAgICAgY29uc3QgcXVldWVLZXlzID0gdGhpcy5xdWV1ZS5rZXlzO1xuICAgICAgICBjb25zdCB0cmFuc2Zvcm1lZFR5cGVzID0gdHlwZXMubWFwKHR5cGUgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHR5cGUgPT09ICd3YWl0aW5nJyA/ICd3YWl0JyA6IHR5cGU7XG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBrZXlzID0gW3F1ZXVlS2V5c1snJ11dO1xuICAgICAgICBjb25zdCBhcmdzID0gWy4uLnRyYW5zZm9ybWVkVHlwZXNdO1xuICAgICAgICByZXR1cm4ga2V5cy5jb25jYXQoYXJncyk7XG4gICAgfVxuICAgIGFzeW5jIGdldENvdW50cyh0eXBlcykge1xuICAgICAgICBjb25zdCBjbGllbnQgPSBhd2FpdCB0aGlzLnF1ZXVlLmNsaWVudDtcbiAgICAgICAgY29uc3QgYXJncyA9IHRoaXMuZ2V0Q291bnRzQXJncyh0eXBlcyk7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmV4ZWNDb21tYW5kKGNsaWVudCwgJ2dldENvdW50cycsIGFyZ3MpO1xuICAgIH1cbiAgICBnZXRDb3VudHNQZXJQcmlvcml0eUFyZ3MocHJpb3JpdGllcykge1xuICAgICAgICBjb25zdCBrZXlzID0gW1xuICAgICAgICAgICAgdGhpcy5xdWV1ZS5rZXlzLndhaXQsXG4gICAgICAgICAgICB0aGlzLnF1ZXVlLmtleXMucGF1c2VkLFxuICAgICAgICAgICAgdGhpcy5xdWV1ZS5rZXlzLm1ldGEsXG4gICAgICAgICAgICB0aGlzLnF1ZXVlLmtleXMucHJpb3JpdGl6ZWQsXG4gICAgICAgIF07XG4gICAgICAgIGNvbnN0IGFyZ3MgPSBwcmlvcml0aWVzO1xuICAgICAgICByZXR1cm4ga2V5cy5jb25jYXQoYXJncyk7XG4gICAgfVxuICAgIGFzeW5jIGdldENvdW50c1BlclByaW9yaXR5KHByaW9yaXRpZXMpIHtcbiAgICAgICAgY29uc3QgY2xpZW50ID0gYXdhaXQgdGhpcy5xdWV1ZS5jbGllbnQ7XG4gICAgICAgIGNvbnN0IGFyZ3MgPSB0aGlzLmdldENvdW50c1BlclByaW9yaXR5QXJncyhwcmlvcml0aWVzKTtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuZXhlY0NvbW1hbmQoY2xpZW50LCAnZ2V0Q291bnRzUGVyUHJpb3JpdHknLCBhcmdzKTtcbiAgICB9XG4gICAgZ2V0RGVwZW5kZW5jeUNvdW50c0FyZ3Moam9iSWQsIHR5cGVzKSB7XG4gICAgICAgIGNvbnN0IGtleXMgPSBbXG4gICAgICAgICAgICBgJHtqb2JJZH06cHJvY2Vzc2VkYCxcbiAgICAgICAgICAgIGAke2pvYklkfTpkZXBlbmRlbmNpZXNgLFxuICAgICAgICAgICAgYCR7am9iSWR9OmZhaWxlZGAsXG4gICAgICAgICAgICBgJHtqb2JJZH06dW5zdWNjZXNzZnVsYCxcbiAgICAgICAgXS5tYXAobmFtZSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5xdWV1ZS50b0tleShuYW1lKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IGFyZ3MgPSB0eXBlcztcbiAgICAgICAgcmV0dXJuIGtleXMuY29uY2F0KGFyZ3MpO1xuICAgIH1cbiAgICBhc3luYyBnZXREZXBlbmRlbmN5Q291bnRzKGpvYklkLCB0eXBlcykge1xuICAgICAgICBjb25zdCBjbGllbnQgPSBhd2FpdCB0aGlzLnF1ZXVlLmNsaWVudDtcbiAgICAgICAgY29uc3QgYXJncyA9IHRoaXMuZ2V0RGVwZW5kZW5jeUNvdW50c0FyZ3Moam9iSWQsIHR5cGVzKTtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuZXhlY0NvbW1hbmQoY2xpZW50LCAnZ2V0RGVwZW5kZW5jeUNvdW50cycsIGFyZ3MpO1xuICAgIH1cbiAgICBtb3ZlVG9Db21wbGV0ZWRBcmdzKGpvYiwgcmV0dXJudmFsdWUsIHJlbW92ZU9uQ29tcGxldGUsIHRva2VuLCBmZXRjaE5leHQgPSBmYWxzZSkge1xuICAgICAgICBjb25zdCB0aW1lc3RhbXAgPSBEYXRlLm5vdygpO1xuICAgICAgICByZXR1cm4gdGhpcy5tb3ZlVG9GaW5pc2hlZEFyZ3Moam9iLCByZXR1cm52YWx1ZSwgJ3JldHVybnZhbHVlJywgcmVtb3ZlT25Db21wbGV0ZSwgJ2NvbXBsZXRlZCcsIHRva2VuLCB0aW1lc3RhbXAsIGZldGNoTmV4dCk7XG4gICAgfVxuICAgIG1vdmVUb0ZhaWxlZEFyZ3Moam9iLCBmYWlsZWRSZWFzb24sIHJlbW92ZU9uRmFpbGVkLCB0b2tlbiwgZmV0Y2hOZXh0ID0gZmFsc2UsIGZpZWxkc1RvVXBkYXRlKSB7XG4gICAgICAgIGNvbnN0IHRpbWVzdGFtcCA9IERhdGUubm93KCk7XG4gICAgICAgIHJldHVybiB0aGlzLm1vdmVUb0ZpbmlzaGVkQXJncyhqb2IsIGZhaWxlZFJlYXNvbiwgJ2ZhaWxlZFJlYXNvbicsIHJlbW92ZU9uRmFpbGVkLCAnZmFpbGVkJywgdG9rZW4sIHRpbWVzdGFtcCwgZmV0Y2hOZXh0LCBmaWVsZHNUb1VwZGF0ZSk7XG4gICAgfVxuICAgIGFzeW5jIGlzRmluaXNoZWQoam9iSWQsIHJldHVyblZhbHVlID0gZmFsc2UpIHtcbiAgICAgICAgY29uc3QgY2xpZW50ID0gYXdhaXQgdGhpcy5xdWV1ZS5jbGllbnQ7XG4gICAgICAgIGNvbnN0IGtleXMgPSBbJ2NvbXBsZXRlZCcsICdmYWlsZWQnLCBqb2JJZF0ubWFwKChrZXkpID0+IHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnF1ZXVlLnRvS2V5KGtleSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gdGhpcy5leGVjQ29tbWFuZChjbGllbnQsICdpc0ZpbmlzaGVkJywga2V5cy5jb25jYXQoW2pvYklkLCByZXR1cm5WYWx1ZSA/ICcxJyA6ICcnXSkpO1xuICAgIH1cbiAgICBhc3luYyBnZXRTdGF0ZShqb2JJZCkge1xuICAgICAgICBjb25zdCBjbGllbnQgPSBhd2FpdCB0aGlzLnF1ZXVlLmNsaWVudDtcbiAgICAgICAgY29uc3Qga2V5cyA9IFtcbiAgICAgICAgICAgICdjb21wbGV0ZWQnLFxuICAgICAgICAgICAgJ2ZhaWxlZCcsXG4gICAgICAgICAgICAnZGVsYXllZCcsXG4gICAgICAgICAgICAnYWN0aXZlJyxcbiAgICAgICAgICAgICd3YWl0JyxcbiAgICAgICAgICAgICdwYXVzZWQnLFxuICAgICAgICAgICAgJ3dhaXRpbmctY2hpbGRyZW4nLFxuICAgICAgICAgICAgJ3ByaW9yaXRpemVkJyxcbiAgICAgICAgXS5tYXAoKGtleSkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucXVldWUudG9LZXkoa2V5KTtcbiAgICAgICAgfSk7XG4gICAgICAgIGlmICgoMCwgdXRpbHNfMS5pc1JlZGlzVmVyc2lvbkxvd2VyVGhhbikodGhpcy5xdWV1ZS5yZWRpc1ZlcnNpb24sICc2LjAuNicpKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5leGVjQ29tbWFuZChjbGllbnQsICdnZXRTdGF0ZScsIGtleXMuY29uY2F0KFtqb2JJZF0pKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5leGVjQ29tbWFuZChjbGllbnQsICdnZXRTdGF0ZVYyJywga2V5cy5jb25jYXQoW2pvYklkXSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDaGFuZ2UgZGVsYXkgb2YgYSBkZWxheWVkIGpvYi5cbiAgICAgKlxuICAgICAqIFJlc2NoZWR1bGVzIGEgZGVsYXllZCBqb2IgYnkgc2V0dGluZyBhIG5ldyBkZWxheSBmcm9tIHRoZSBjdXJyZW50IHRpbWUuXG4gICAgICogRm9yIGV4YW1wbGUsIGNhbGxpbmcgY2hhbmdlRGVsYXkoNTAwMCkgd2lsbCByZXNjaGVkdWxlIHRoZSBqb2IgdG8gZXhlY3V0ZVxuICAgICAqIDUwMDAgbWlsbGlzZWNvbmRzICg1IHNlY29uZHMpIGZyb20gbm93LCByZWdhcmRsZXNzIG9mIHRoZSBvcmlnaW5hbCBkZWxheS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBqb2JJZCAtIHRoZSBJRCBvZiB0aGUgam9iIHRvIGNoYW5nZSB0aGUgZGVsYXkgZm9yLlxuICAgICAqIEBwYXJhbSBkZWxheSAtIG1pbGxpc2Vjb25kcyBmcm9tIG5vdyB3aGVuIHRoZSBqb2Igc2hvdWxkIGJlIHByb2Nlc3NlZC5cbiAgICAgKiBAcmV0dXJucyBkZWxheSBpbiBtaWxsaXNlY29uZHMuXG4gICAgICogQHRocm93cyBKb2JOb3RFeGlzdFxuICAgICAqIFRoaXMgZXhjZXB0aW9uIGlzIHRocm93biBpZiBqb2JJZCBpcyBtaXNzaW5nLlxuICAgICAqIEB0aHJvd3MgSm9iTm90SW5TdGF0ZVxuICAgICAqIFRoaXMgZXhjZXB0aW9uIGlzIHRocm93biBpZiBqb2IgaXMgbm90IGluIGRlbGF5ZWQgc3RhdGUuXG4gICAgICovXG4gICAgYXN5bmMgY2hhbmdlRGVsYXkoam9iSWQsIGRlbGF5KSB7XG4gICAgICAgIGNvbnN0IGNsaWVudCA9IGF3YWl0IHRoaXMucXVldWUuY2xpZW50O1xuICAgICAgICBjb25zdCBhcmdzID0gdGhpcy5jaGFuZ2VEZWxheUFyZ3Moam9iSWQsIGRlbGF5KTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5leGVjQ29tbWFuZChjbGllbnQsICdjaGFuZ2VEZWxheScsIGFyZ3MpO1xuICAgICAgICBpZiAocmVzdWx0IDwgMCkge1xuICAgICAgICAgICAgdGhyb3cgdGhpcy5maW5pc2hlZEVycm9ycyh7XG4gICAgICAgICAgICAgICAgY29kZTogcmVzdWx0LFxuICAgICAgICAgICAgICAgIGpvYklkLFxuICAgICAgICAgICAgICAgIGNvbW1hbmQ6ICdjaGFuZ2VEZWxheScsXG4gICAgICAgICAgICAgICAgc3RhdGU6ICdkZWxheWVkJyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNoYW5nZURlbGF5QXJncyhqb2JJZCwgZGVsYXkpIHtcbiAgICAgICAgY29uc3QgdGltZXN0YW1wID0gRGF0ZS5ub3coKTtcbiAgICAgICAgY29uc3Qga2V5cyA9IFtcbiAgICAgICAgICAgIHRoaXMucXVldWUua2V5cy5kZWxheWVkLFxuICAgICAgICAgICAgdGhpcy5xdWV1ZS5rZXlzLm1ldGEsXG4gICAgICAgICAgICB0aGlzLnF1ZXVlLmtleXMubWFya2VyLFxuICAgICAgICAgICAgdGhpcy5xdWV1ZS5rZXlzLmV2ZW50cyxcbiAgICAgICAgXTtcbiAgICAgICAgcmV0dXJuIGtleXMuY29uY2F0KFtcbiAgICAgICAgICAgIGRlbGF5LFxuICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkodGltZXN0YW1wKSxcbiAgICAgICAgICAgIGpvYklkLFxuICAgICAgICAgICAgdGhpcy5xdWV1ZS50b0tleShqb2JJZCksXG4gICAgICAgIF0pO1xuICAgIH1cbiAgICBhc3luYyBjaGFuZ2VQcmlvcml0eShqb2JJZCwgcHJpb3JpdHkgPSAwLCBsaWZvID0gZmFsc2UpIHtcbiAgICAgICAgY29uc3QgY2xpZW50ID0gYXdhaXQgdGhpcy5xdWV1ZS5jbGllbnQ7XG4gICAgICAgIGNvbnN0IGFyZ3MgPSB0aGlzLmNoYW5nZVByaW9yaXR5QXJncyhqb2JJZCwgcHJpb3JpdHksIGxpZm8pO1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLmV4ZWNDb21tYW5kKGNsaWVudCwgJ2NoYW5nZVByaW9yaXR5JywgYXJncyk7XG4gICAgICAgIGlmIChyZXN1bHQgPCAwKSB7XG4gICAgICAgICAgICB0aHJvdyB0aGlzLmZpbmlzaGVkRXJyb3JzKHtcbiAgICAgICAgICAgICAgICBjb2RlOiByZXN1bHQsXG4gICAgICAgICAgICAgICAgam9iSWQsXG4gICAgICAgICAgICAgICAgY29tbWFuZDogJ2NoYW5nZVByaW9yaXR5JyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNoYW5nZVByaW9yaXR5QXJncyhqb2JJZCwgcHJpb3JpdHkgPSAwLCBsaWZvID0gZmFsc2UpIHtcbiAgICAgICAgY29uc3Qga2V5cyA9IFtcbiAgICAgICAgICAgIHRoaXMucXVldWUua2V5cy53YWl0LFxuICAgICAgICAgICAgdGhpcy5xdWV1ZS5rZXlzLnBhdXNlZCxcbiAgICAgICAgICAgIHRoaXMucXVldWUua2V5cy5tZXRhLFxuICAgICAgICAgICAgdGhpcy5xdWV1ZS5rZXlzLnByaW9yaXRpemVkLFxuICAgICAgICAgICAgdGhpcy5xdWV1ZS5rZXlzLmFjdGl2ZSxcbiAgICAgICAgICAgIHRoaXMucXVldWUua2V5cy5wYyxcbiAgICAgICAgICAgIHRoaXMucXVldWUua2V5cy5tYXJrZXIsXG4gICAgICAgIF07XG4gICAgICAgIHJldHVybiBrZXlzLmNvbmNhdChbcHJpb3JpdHksIHRoaXMucXVldWUudG9LZXkoJycpLCBqb2JJZCwgbGlmbyA/IDEgOiAwXSk7XG4gICAgfVxuICAgIG1vdmVUb0RlbGF5ZWRBcmdzKGpvYklkLCB0aW1lc3RhbXAsIHRva2VuLCBkZWxheSwgb3B0cyA9IHt9KSB7XG4gICAgICAgIGNvbnN0IHF1ZXVlS2V5cyA9IHRoaXMucXVldWUua2V5cztcbiAgICAgICAgY29uc3Qga2V5cyA9IFtcbiAgICAgICAgICAgIHF1ZXVlS2V5cy5tYXJrZXIsXG4gICAgICAgICAgICBxdWV1ZUtleXMuYWN0aXZlLFxuICAgICAgICAgICAgcXVldWVLZXlzLnByaW9yaXRpemVkLFxuICAgICAgICAgICAgcXVldWVLZXlzLmRlbGF5ZWQsXG4gICAgICAgICAgICB0aGlzLnF1ZXVlLnRvS2V5KGpvYklkKSxcbiAgICAgICAgICAgIHF1ZXVlS2V5cy5ldmVudHMsXG4gICAgICAgICAgICBxdWV1ZUtleXMubWV0YSxcbiAgICAgICAgICAgIHF1ZXVlS2V5cy5zdGFsbGVkLFxuICAgICAgICBdO1xuICAgICAgICByZXR1cm4ga2V5cy5jb25jYXQoW1xuICAgICAgICAgICAgdGhpcy5xdWV1ZS5rZXlzWycnXSxcbiAgICAgICAgICAgIHRpbWVzdGFtcCxcbiAgICAgICAgICAgIGpvYklkLFxuICAgICAgICAgICAgdG9rZW4sXG4gICAgICAgICAgICBkZWxheSxcbiAgICAgICAgICAgIG9wdHMuc2tpcEF0dGVtcHQgPyAnMScgOiAnMCcsXG4gICAgICAgICAgICBvcHRzLmZpZWxkc1RvVXBkYXRlXG4gICAgICAgICAgICAgICAgPyBwYWNrKCgwLCB1dGlsc18xLm9iamVjdFRvRmxhdEFycmF5KShvcHRzLmZpZWxkc1RvVXBkYXRlKSlcbiAgICAgICAgICAgICAgICA6IHZvaWQgMCxcbiAgICAgICAgXSk7XG4gICAgfVxuICAgIG1vdmVUb1dhaXRpbmdDaGlsZHJlbkFyZ3Moam9iSWQsIHRva2VuLCBvcHRzKSB7XG4gICAgICAgIGNvbnN0IHRpbWVzdGFtcCA9IERhdGUubm93KCk7XG4gICAgICAgIGNvbnN0IGNoaWxkS2V5ID0gKDAsIHV0aWxzXzEuZ2V0UGFyZW50S2V5KShvcHRzLmNoaWxkKTtcbiAgICAgICAgY29uc3Qga2V5cyA9IFtcbiAgICAgICAgICAgICdhY3RpdmUnLFxuICAgICAgICAgICAgJ3dhaXRpbmctY2hpbGRyZW4nLFxuICAgICAgICAgICAgam9iSWQsXG4gICAgICAgICAgICBgJHtqb2JJZH06ZGVwZW5kZW5jaWVzYCxcbiAgICAgICAgICAgIGAke2pvYklkfTp1bnN1Y2Nlc3NmdWxgLFxuICAgICAgICAgICAgJ3N0YWxsZWQnLFxuICAgICAgICAgICAgJ2V2ZW50cycsXG4gICAgICAgIF0ubWFwKG5hbWUgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucXVldWUudG9LZXkobmFtZSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4ga2V5cy5jb25jYXQoW1xuICAgICAgICAgICAgdG9rZW4sXG4gICAgICAgICAgICBjaGlsZEtleSAhPT0gbnVsbCAmJiBjaGlsZEtleSAhPT0gdm9pZCAwID8gY2hpbGRLZXkgOiAnJyxcbiAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KHRpbWVzdGFtcCksXG4gICAgICAgICAgICBqb2JJZCxcbiAgICAgICAgICAgIHRoaXMucXVldWUudG9LZXkoJycpLFxuICAgICAgICBdKTtcbiAgICB9XG4gICAgaXNNYXhlZEFyZ3MoKSB7XG4gICAgICAgIGNvbnN0IHF1ZXVlS2V5cyA9IHRoaXMucXVldWUua2V5cztcbiAgICAgICAgY29uc3Qga2V5cyA9IFtxdWV1ZUtleXMubWV0YSwgcXVldWVLZXlzLmFjdGl2ZV07XG4gICAgICAgIHJldHVybiBrZXlzO1xuICAgIH1cbiAgICBhc3luYyBpc01heGVkKCkge1xuICAgICAgICBjb25zdCBjbGllbnQgPSBhd2FpdCB0aGlzLnF1ZXVlLmNsaWVudDtcbiAgICAgICAgY29uc3QgYXJncyA9IHRoaXMuaXNNYXhlZEFyZ3MoKTtcbiAgICAgICAgcmV0dXJuICEhKGF3YWl0IHRoaXMuZXhlY0NvbW1hbmQoY2xpZW50LCAnaXNNYXhlZCcsIGFyZ3MpKTtcbiAgICB9XG4gICAgYXN5bmMgbW92ZVRvRGVsYXllZChqb2JJZCwgdGltZXN0YW1wLCBkZWxheSwgdG9rZW4gPSAnMCcsIG9wdHMgPSB7fSkge1xuICAgICAgICBjb25zdCBjbGllbnQgPSBhd2FpdCB0aGlzLnF1ZXVlLmNsaWVudDtcbiAgICAgICAgY29uc3QgYXJncyA9IHRoaXMubW92ZVRvRGVsYXllZEFyZ3Moam9iSWQsIHRpbWVzdGFtcCwgdG9rZW4sIGRlbGF5LCBvcHRzKTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5leGVjQ29tbWFuZChjbGllbnQsICdtb3ZlVG9EZWxheWVkJywgYXJncyk7XG4gICAgICAgIGlmIChyZXN1bHQgPCAwKSB7XG4gICAgICAgICAgICB0aHJvdyB0aGlzLmZpbmlzaGVkRXJyb3JzKHtcbiAgICAgICAgICAgICAgICBjb2RlOiByZXN1bHQsXG4gICAgICAgICAgICAgICAgam9iSWQsXG4gICAgICAgICAgICAgICAgY29tbWFuZDogJ21vdmVUb0RlbGF5ZWQnLFxuICAgICAgICAgICAgICAgIHN0YXRlOiAnYWN0aXZlJyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1vdmUgcGFyZW50IGpvYiB0byB3YWl0aW5nLWNoaWxkcmVuIHN0YXRlLlxuICAgICAqXG4gICAgICogQHJldHVybnMgdHJ1ZSBpZiBqb2IgaXMgc3VjY2Vzc2Z1bGx5IG1vdmVkLCBmYWxzZSBpZiB0aGVyZSBhcmUgcGVuZGluZyBkZXBlbmRlbmNpZXMuXG4gICAgICogQHRocm93cyBKb2JOb3RFeGlzdFxuICAgICAqIFRoaXMgZXhjZXB0aW9uIGlzIHRocm93biBpZiBqb2JJZCBpcyBtaXNzaW5nLlxuICAgICAqIEB0aHJvd3MgSm9iTG9ja05vdEV4aXN0XG4gICAgICogVGhpcyBleGNlcHRpb24gaXMgdGhyb3duIGlmIGpvYiBsb2NrIGlzIG1pc3NpbmcuXG4gICAgICogQHRocm93cyBKb2JOb3RJblN0YXRlXG4gICAgICogVGhpcyBleGNlcHRpb24gaXMgdGhyb3duIGlmIGpvYiBpcyBub3QgaW4gYWN0aXZlIHN0YXRlLlxuICAgICAqL1xuICAgIGFzeW5jIG1vdmVUb1dhaXRpbmdDaGlsZHJlbihqb2JJZCwgdG9rZW4sIG9wdHMgPSB7fSkge1xuICAgICAgICBjb25zdCBjbGllbnQgPSBhd2FpdCB0aGlzLnF1ZXVlLmNsaWVudDtcbiAgICAgICAgY29uc3QgYXJncyA9IHRoaXMubW92ZVRvV2FpdGluZ0NoaWxkcmVuQXJncyhqb2JJZCwgdG9rZW4sIG9wdHMpO1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLmV4ZWNDb21tYW5kKGNsaWVudCwgJ21vdmVUb1dhaXRpbmdDaGlsZHJlbicsIGFyZ3MpO1xuICAgICAgICBzd2l0Y2ggKHJlc3VsdCkge1xuICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgdGhyb3cgdGhpcy5maW5pc2hlZEVycm9ycyh7XG4gICAgICAgICAgICAgICAgICAgIGNvZGU6IHJlc3VsdCxcbiAgICAgICAgICAgICAgICAgICAgam9iSWQsXG4gICAgICAgICAgICAgICAgICAgIGNvbW1hbmQ6ICdtb3ZlVG9XYWl0aW5nQ2hpbGRyZW4nLFxuICAgICAgICAgICAgICAgICAgICBzdGF0ZTogJ2FjdGl2ZScsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0UmF0ZUxpbWl0VHRsQXJncyhtYXhKb2JzKSB7XG4gICAgICAgIGNvbnN0IGtleXMgPSBbXG4gICAgICAgICAgICB0aGlzLnF1ZXVlLmtleXMubGltaXRlcixcbiAgICAgICAgICAgIHRoaXMucXVldWUua2V5cy5tZXRhLFxuICAgICAgICBdO1xuICAgICAgICByZXR1cm4ga2V5cy5jb25jYXQoW21heEpvYnMgIT09IG51bGwgJiYgbWF4Sm9icyAhPT0gdm9pZCAwID8gbWF4Sm9icyA6ICcwJ10pO1xuICAgIH1cbiAgICBhc3luYyBnZXRSYXRlTGltaXRUdGwobWF4Sm9icykge1xuICAgICAgICBjb25zdCBjbGllbnQgPSBhd2FpdCB0aGlzLnF1ZXVlLmNsaWVudDtcbiAgICAgICAgY29uc3QgYXJncyA9IHRoaXMuZ2V0UmF0ZUxpbWl0VHRsQXJncyhtYXhKb2JzKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZXhlY0NvbW1hbmQoY2xpZW50LCAnZ2V0UmF0ZUxpbWl0VHRsJywgYXJncyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlbW92ZSBqb2JzIGluIGEgc3BlY2lmaWMgc3RhdGUuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBJZCBqb2JzIGZyb20gdGhlIGRlbGV0ZWQgcmVjb3Jkcy5cbiAgICAgKi9cbiAgICBhc3luYyBjbGVhbkpvYnNJblNldChzZXQsIHRpbWVzdGFtcCwgbGltaXQgPSAwKSB7XG4gICAgICAgIGNvbnN0IGNsaWVudCA9IGF3YWl0IHRoaXMucXVldWUuY2xpZW50O1xuICAgICAgICByZXR1cm4gdGhpcy5leGVjQ29tbWFuZChjbGllbnQsICdjbGVhbkpvYnNJblNldCcsIFtcbiAgICAgICAgICAgIHRoaXMucXVldWUudG9LZXkoc2V0KSxcbiAgICAgICAgICAgIHRoaXMucXVldWUudG9LZXkoJ2V2ZW50cycpLFxuICAgICAgICAgICAgdGhpcy5xdWV1ZS50b0tleSgncmVwZWF0JyksXG4gICAgICAgICAgICB0aGlzLnF1ZXVlLnRvS2V5KCcnKSxcbiAgICAgICAgICAgIHRpbWVzdGFtcCxcbiAgICAgICAgICAgIGxpbWl0LFxuICAgICAgICAgICAgc2V0LFxuICAgICAgICBdKTtcbiAgICB9XG4gICAgZ2V0Sm9iU2NoZWR1bGVyQXJncyhpZCkge1xuICAgICAgICBjb25zdCBrZXlzID0gW3RoaXMucXVldWUua2V5cy5yZXBlYXRdO1xuICAgICAgICByZXR1cm4ga2V5cy5jb25jYXQoW2lkXSk7XG4gICAgfVxuICAgIGFzeW5jIGdldEpvYlNjaGVkdWxlcihpZCkge1xuICAgICAgICBjb25zdCBjbGllbnQgPSBhd2FpdCB0aGlzLnF1ZXVlLmNsaWVudDtcbiAgICAgICAgY29uc3QgYXJncyA9IHRoaXMuZ2V0Sm9iU2NoZWR1bGVyQXJncyhpZCk7XG4gICAgICAgIHJldHVybiB0aGlzLmV4ZWNDb21tYW5kKGNsaWVudCwgJ2dldEpvYlNjaGVkdWxlcicsIGFyZ3MpO1xuICAgIH1cbiAgICByZXRyeUpvYkFyZ3Moam9iSWQsIGxpZm8sIHRva2VuLCBvcHRzID0ge30pIHtcbiAgICAgICAgY29uc3Qga2V5cyA9IFtcbiAgICAgICAgICAgIHRoaXMucXVldWUua2V5cy5hY3RpdmUsXG4gICAgICAgICAgICB0aGlzLnF1ZXVlLmtleXMud2FpdCxcbiAgICAgICAgICAgIHRoaXMucXVldWUua2V5cy5wYXVzZWQsXG4gICAgICAgICAgICB0aGlzLnF1ZXVlLnRvS2V5KGpvYklkKSxcbiAgICAgICAgICAgIHRoaXMucXVldWUua2V5cy5tZXRhLFxuICAgICAgICAgICAgdGhpcy5xdWV1ZS5rZXlzLmV2ZW50cyxcbiAgICAgICAgICAgIHRoaXMucXVldWUua2V5cy5kZWxheWVkLFxuICAgICAgICAgICAgdGhpcy5xdWV1ZS5rZXlzLnByaW9yaXRpemVkLFxuICAgICAgICAgICAgdGhpcy5xdWV1ZS5rZXlzLnBjLFxuICAgICAgICAgICAgdGhpcy5xdWV1ZS5rZXlzLm1hcmtlcixcbiAgICAgICAgICAgIHRoaXMucXVldWUua2V5cy5zdGFsbGVkLFxuICAgICAgICBdO1xuICAgICAgICBjb25zdCBwdXNoQ21kID0gKGxpZm8gPyAnUicgOiAnTCcpICsgJ1BVU0gnO1xuICAgICAgICByZXR1cm4ga2V5cy5jb25jYXQoW1xuICAgICAgICAgICAgdGhpcy5xdWV1ZS50b0tleSgnJyksXG4gICAgICAgICAgICBEYXRlLm5vdygpLFxuICAgICAgICAgICAgcHVzaENtZCxcbiAgICAgICAgICAgIGpvYklkLFxuICAgICAgICAgICAgdG9rZW4sXG4gICAgICAgICAgICBvcHRzLmZpZWxkc1RvVXBkYXRlXG4gICAgICAgICAgICAgICAgPyBwYWNrKCgwLCB1dGlsc18xLm9iamVjdFRvRmxhdEFycmF5KShvcHRzLmZpZWxkc1RvVXBkYXRlKSlcbiAgICAgICAgICAgICAgICA6IHZvaWQgMCxcbiAgICAgICAgXSk7XG4gICAgfVxuICAgIGFzeW5jIHJldHJ5Sm9iKGpvYklkLCBsaWZvLCB0b2tlbiA9ICcwJywgb3B0cyA9IHt9KSB7XG4gICAgICAgIGNvbnN0IGNsaWVudCA9IGF3YWl0IHRoaXMucXVldWUuY2xpZW50O1xuICAgICAgICBjb25zdCBhcmdzID0gdGhpcy5yZXRyeUpvYkFyZ3Moam9iSWQsIGxpZm8sIHRva2VuLCBvcHRzKTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5leGVjQ29tbWFuZChjbGllbnQsICdyZXRyeUpvYicsIGFyZ3MpO1xuICAgICAgICBpZiAocmVzdWx0IDwgMCkge1xuICAgICAgICAgICAgdGhyb3cgdGhpcy5maW5pc2hlZEVycm9ycyh7XG4gICAgICAgICAgICAgICAgY29kZTogcmVzdWx0LFxuICAgICAgICAgICAgICAgIGpvYklkLFxuICAgICAgICAgICAgICAgIGNvbW1hbmQ6ICdyZXRyeUpvYicsXG4gICAgICAgICAgICAgICAgc3RhdGU6ICdhY3RpdmUnLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgbW92ZUpvYnNUb1dhaXRBcmdzKHN0YXRlLCBjb3VudCwgdGltZXN0YW1wKSB7XG4gICAgICAgIGNvbnN0IGtleXMgPSBbXG4gICAgICAgICAgICB0aGlzLnF1ZXVlLnRvS2V5KCcnKSxcbiAgICAgICAgICAgIHRoaXMucXVldWUua2V5cy5ldmVudHMsXG4gICAgICAgICAgICB0aGlzLnF1ZXVlLnRvS2V5KHN0YXRlKSxcbiAgICAgICAgICAgIHRoaXMucXVldWUudG9LZXkoJ3dhaXQnKSxcbiAgICAgICAgICAgIHRoaXMucXVldWUudG9LZXkoJ3BhdXNlZCcpLFxuICAgICAgICAgICAgdGhpcy5xdWV1ZS5rZXlzLm1ldGEsXG4gICAgICAgICAgICB0aGlzLnF1ZXVlLmtleXMuYWN0aXZlLFxuICAgICAgICAgICAgdGhpcy5xdWV1ZS5rZXlzLm1hcmtlcixcbiAgICAgICAgXTtcbiAgICAgICAgY29uc3QgYXJncyA9IFtjb3VudCwgdGltZXN0YW1wLCBzdGF0ZV07XG4gICAgICAgIHJldHVybiBrZXlzLmNvbmNhdChhcmdzKTtcbiAgICB9XG4gICAgYXN5bmMgcmV0cnlKb2JzKHN0YXRlID0gJ2ZhaWxlZCcsIGNvdW50ID0gMTAwMCwgdGltZXN0YW1wID0gbmV3IERhdGUoKS5nZXRUaW1lKCkpIHtcbiAgICAgICAgY29uc3QgY2xpZW50ID0gYXdhaXQgdGhpcy5xdWV1ZS5jbGllbnQ7XG4gICAgICAgIGNvbnN0IGFyZ3MgPSB0aGlzLm1vdmVKb2JzVG9XYWl0QXJncyhzdGF0ZSwgY291bnQsIHRpbWVzdGFtcCk7XG4gICAgICAgIHJldHVybiB0aGlzLmV4ZWNDb21tYW5kKGNsaWVudCwgJ21vdmVKb2JzVG9XYWl0JywgYXJncyk7XG4gICAgfVxuICAgIGFzeW5jIHByb21vdGVKb2JzKGNvdW50ID0gMTAwMCkge1xuICAgICAgICBjb25zdCBjbGllbnQgPSBhd2FpdCB0aGlzLnF1ZXVlLmNsaWVudDtcbiAgICAgICAgY29uc3QgYXJncyA9IHRoaXMubW92ZUpvYnNUb1dhaXRBcmdzKCdkZWxheWVkJywgY291bnQsIE51bWJlci5NQVhfVkFMVUUpO1xuICAgICAgICByZXR1cm4gdGhpcy5leGVjQ29tbWFuZChjbGllbnQsICdtb3ZlSm9ic1RvV2FpdCcsIGFyZ3MpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBdHRlbXB0cyB0byByZXByb2Nlc3MgYSBqb2JcbiAgICAgKlxuICAgICAqIEBwYXJhbSBqb2IgLSBUaGUgam9iIHRvIHJlcHJvY2Vzc1xuICAgICAqIEBwYXJhbSBzdGF0ZSAtIFRoZSBleHBlY3RlZCBqb2Igc3RhdGUuIElmIHRoZSBqb2IgaXMgbm90IGZvdW5kXG4gICAgICogb24gdGhlIHByb3ZpZGVkIHN0YXRlLCB0aGVuIGl0J3Mgbm90IHJlcHJvY2Vzc2VkLiBTdXBwb3J0ZWQgc3RhdGVzOiAnZmFpbGVkJywgJ2NvbXBsZXRlZCdcbiAgICAgKlxuICAgICAqIEByZXR1cm5zIEEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHdoZW4gdGhlIGpvYiBoYXMgYmVlbiBzdWNjZXNzZnVsbHkgbW92ZWQgdG8gdGhlIHdhaXQgcXVldWUuXG4gICAgICogQHRocm93cyBXaWxsIHRocm93IGFuIGVycm9yIHdpdGggYSBjb2RlIHByb3BlcnR5IGluZGljYXRpbmcgdGhlIGZhaWx1cmUgcmVhc29uOlxuICAgICAqICAgLSBjb2RlIDA6IEpvYiBkb2VzIG5vdCBleGlzdFxuICAgICAqICAgLSBjb2RlIC0xOiBKb2IgaXMgY3VycmVudGx5IGxvY2tlZCBhbmQgY2FuJ3QgYmUgcmV0cmllZFxuICAgICAqICAgLSBjb2RlIC0yOiBKb2Igd2FzIG5vdCBmb3VuZCBpbiB0aGUgZXhwZWN0ZWQgc2V0XG4gICAgICovXG4gICAgYXN5bmMgcmVwcm9jZXNzSm9iKGpvYiwgc3RhdGUpIHtcbiAgICAgICAgY29uc3QgY2xpZW50ID0gYXdhaXQgdGhpcy5xdWV1ZS5jbGllbnQ7XG4gICAgICAgIGNvbnN0IGtleXMgPSBbXG4gICAgICAgICAgICB0aGlzLnF1ZXVlLnRvS2V5KGpvYi5pZCksXG4gICAgICAgICAgICB0aGlzLnF1ZXVlLmtleXMuZXZlbnRzLFxuICAgICAgICAgICAgdGhpcy5xdWV1ZS50b0tleShzdGF0ZSksXG4gICAgICAgICAgICB0aGlzLnF1ZXVlLmtleXMud2FpdCxcbiAgICAgICAgICAgIHRoaXMucXVldWUua2V5cy5tZXRhLFxuICAgICAgICAgICAgdGhpcy5xdWV1ZS5rZXlzLnBhdXNlZCxcbiAgICAgICAgICAgIHRoaXMucXVldWUua2V5cy5hY3RpdmUsXG4gICAgICAgICAgICB0aGlzLnF1ZXVlLmtleXMubWFya2VyLFxuICAgICAgICBdO1xuICAgICAgICBjb25zdCBhcmdzID0gW1xuICAgICAgICAgICAgam9iLmlkLFxuICAgICAgICAgICAgKGpvYi5vcHRzLmxpZm8gPyAnUicgOiAnTCcpICsgJ1BVU0gnLFxuICAgICAgICAgICAgc3RhdGUgPT09ICdmYWlsZWQnID8gJ2ZhaWxlZFJlYXNvbicgOiAncmV0dXJudmFsdWUnLFxuICAgICAgICAgICAgc3RhdGUsXG4gICAgICAgIF07XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuZXhlY0NvbW1hbmQoY2xpZW50LCAncmVwcm9jZXNzSm9iJywga2V5cy5jb25jYXQoYXJncykpO1xuICAgICAgICBzd2l0Y2ggKHJlc3VsdCkge1xuICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgdGhyb3cgdGhpcy5maW5pc2hlZEVycm9ycyh7XG4gICAgICAgICAgICAgICAgICAgIGNvZGU6IHJlc3VsdCxcbiAgICAgICAgICAgICAgICAgICAgam9iSWQ6IGpvYi5pZCxcbiAgICAgICAgICAgICAgICAgICAgY29tbWFuZDogJ3JlcHJvY2Vzc0pvYicsXG4gICAgICAgICAgICAgICAgICAgIHN0YXRlLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIGdldE1ldHJpY3ModHlwZSwgc3RhcnQgPSAwLCBlbmQgPSAtMSkge1xuICAgICAgICBjb25zdCBjbGllbnQgPSBhd2FpdCB0aGlzLnF1ZXVlLmNsaWVudDtcbiAgICAgICAgY29uc3Qga2V5cyA9IFtcbiAgICAgICAgICAgIHRoaXMucXVldWUudG9LZXkoYG1ldHJpY3M6JHt0eXBlfWApLFxuICAgICAgICAgICAgdGhpcy5xdWV1ZS50b0tleShgbWV0cmljczoke3R5cGV9OmRhdGFgKSxcbiAgICAgICAgXTtcbiAgICAgICAgY29uc3QgYXJncyA9IFtzdGFydCwgZW5kXTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5leGVjQ29tbWFuZChjbGllbnQsICdnZXRNZXRyaWNzJywga2V5cy5jb25jYXQoYXJncykpO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICBhc3luYyBtb3ZlVG9BY3RpdmUoY2xpZW50LCB0b2tlbiwgbmFtZSkge1xuICAgICAgICBjb25zdCBvcHRzID0gdGhpcy5xdWV1ZS5vcHRzO1xuICAgICAgICBjb25zdCBxdWV1ZUtleXMgPSB0aGlzLnF1ZXVlLmtleXM7XG4gICAgICAgIGNvbnN0IGtleXMgPSBbXG4gICAgICAgICAgICBxdWV1ZUtleXMud2FpdCxcbiAgICAgICAgICAgIHF1ZXVlS2V5cy5hY3RpdmUsXG4gICAgICAgICAgICBxdWV1ZUtleXMucHJpb3JpdGl6ZWQsXG4gICAgICAgICAgICBxdWV1ZUtleXMuZXZlbnRzLFxuICAgICAgICAgICAgcXVldWVLZXlzLnN0YWxsZWQsXG4gICAgICAgICAgICBxdWV1ZUtleXMubGltaXRlcixcbiAgICAgICAgICAgIHF1ZXVlS2V5cy5kZWxheWVkLFxuICAgICAgICAgICAgcXVldWVLZXlzLnBhdXNlZCxcbiAgICAgICAgICAgIHF1ZXVlS2V5cy5tZXRhLFxuICAgICAgICAgICAgcXVldWVLZXlzLnBjLFxuICAgICAgICAgICAgcXVldWVLZXlzLm1hcmtlcixcbiAgICAgICAgXTtcbiAgICAgICAgY29uc3QgYXJncyA9IFtcbiAgICAgICAgICAgIHF1ZXVlS2V5c1snJ10sXG4gICAgICAgICAgICBEYXRlLm5vdygpLFxuICAgICAgICAgICAgcGFjayh7XG4gICAgICAgICAgICAgICAgdG9rZW4sXG4gICAgICAgICAgICAgICAgbG9ja0R1cmF0aW9uOiBvcHRzLmxvY2tEdXJhdGlvbixcbiAgICAgICAgICAgICAgICBsaW1pdGVyOiBvcHRzLmxpbWl0ZXIsXG4gICAgICAgICAgICAgICAgbmFtZSxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICBdO1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLmV4ZWNDb21tYW5kKGNsaWVudCwgJ21vdmVUb0FjdGl2ZScsIGtleXMuY29uY2F0KGFyZ3MpKTtcbiAgICAgICAgcmV0dXJuIHJhdzJOZXh0Sm9iRGF0YShyZXN1bHQpO1xuICAgIH1cbiAgICBhc3luYyBwcm9tb3RlKGpvYklkKSB7XG4gICAgICAgIGNvbnN0IGNsaWVudCA9IGF3YWl0IHRoaXMucXVldWUuY2xpZW50O1xuICAgICAgICBjb25zdCBrZXlzID0gW1xuICAgICAgICAgICAgdGhpcy5xdWV1ZS5rZXlzLmRlbGF5ZWQsXG4gICAgICAgICAgICB0aGlzLnF1ZXVlLmtleXMud2FpdCxcbiAgICAgICAgICAgIHRoaXMucXVldWUua2V5cy5wYXVzZWQsXG4gICAgICAgICAgICB0aGlzLnF1ZXVlLmtleXMubWV0YSxcbiAgICAgICAgICAgIHRoaXMucXVldWUua2V5cy5wcmlvcml0aXplZCxcbiAgICAgICAgICAgIHRoaXMucXVldWUua2V5cy5hY3RpdmUsXG4gICAgICAgICAgICB0aGlzLnF1ZXVlLmtleXMucGMsXG4gICAgICAgICAgICB0aGlzLnF1ZXVlLmtleXMuZXZlbnRzLFxuICAgICAgICAgICAgdGhpcy5xdWV1ZS5rZXlzLm1hcmtlcixcbiAgICAgICAgXTtcbiAgICAgICAgY29uc3QgYXJncyA9IFt0aGlzLnF1ZXVlLnRvS2V5KCcnKSwgam9iSWRdO1xuICAgICAgICBjb25zdCBjb2RlID0gYXdhaXQgdGhpcy5leGVjQ29tbWFuZChjbGllbnQsICdwcm9tb3RlJywga2V5cy5jb25jYXQoYXJncykpO1xuICAgICAgICBpZiAoY29kZSA8IDApIHtcbiAgICAgICAgICAgIHRocm93IHRoaXMuZmluaXNoZWRFcnJvcnMoe1xuICAgICAgICAgICAgICAgIGNvZGUsXG4gICAgICAgICAgICAgICAgam9iSWQsXG4gICAgICAgICAgICAgICAgY29tbWFuZDogJ3Byb21vdGUnLFxuICAgICAgICAgICAgICAgIHN0YXRlOiAnZGVsYXllZCcsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBtb3ZlU3RhbGxlZEpvYnNUb1dhaXRBcmdzKCkge1xuICAgICAgICBjb25zdCBvcHRzID0gdGhpcy5xdWV1ZS5vcHRzO1xuICAgICAgICBjb25zdCBrZXlzID0gW1xuICAgICAgICAgICAgdGhpcy5xdWV1ZS5rZXlzLnN0YWxsZWQsXG4gICAgICAgICAgICB0aGlzLnF1ZXVlLmtleXMud2FpdCxcbiAgICAgICAgICAgIHRoaXMucXVldWUua2V5cy5hY3RpdmUsXG4gICAgICAgICAgICB0aGlzLnF1ZXVlLmtleXNbJ3N0YWxsZWQtY2hlY2snXSxcbiAgICAgICAgICAgIHRoaXMucXVldWUua2V5cy5tZXRhLFxuICAgICAgICAgICAgdGhpcy5xdWV1ZS5rZXlzLnBhdXNlZCxcbiAgICAgICAgICAgIHRoaXMucXVldWUua2V5cy5tYXJrZXIsXG4gICAgICAgICAgICB0aGlzLnF1ZXVlLmtleXMuZXZlbnRzLFxuICAgICAgICBdO1xuICAgICAgICBjb25zdCBhcmdzID0gW1xuICAgICAgICAgICAgb3B0cy5tYXhTdGFsbGVkQ291bnQsXG4gICAgICAgICAgICB0aGlzLnF1ZXVlLnRvS2V5KCcnKSxcbiAgICAgICAgICAgIERhdGUubm93KCksXG4gICAgICAgICAgICBvcHRzLnN0YWxsZWRJbnRlcnZhbCxcbiAgICAgICAgXTtcbiAgICAgICAgcmV0dXJuIGtleXMuY29uY2F0KGFyZ3MpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBMb29rcyBmb3IgdW5sb2NrZWQgam9icyBpbiB0aGUgYWN0aXZlIHF1ZXVlLlxuICAgICAqXG4gICAgICogVGhlIGpvYiB3YXMgYmVpbmcgd29ya2VkIG9uLCBidXQgdGhlIHdvcmtlciBwcm9jZXNzIGRpZWQgYW5kIGl0IGZhaWxlZCB0byByZW5ldyB0aGUgbG9jay5cbiAgICAgKiBXZSBjYWxsIHRoZXNlIGpvYnMgJ3N0YWxsZWQnLiBUaGlzIGlzIHRoZSBtb3N0IGNvbW1vbiBjYXNlLiBXZSByZXNvbHZlIHRoZXNlIGJ5IG1vdmluZyB0aGVtXG4gICAgICogYmFjayB0byB3YWl0IHRvIGJlIHJlLXByb2Nlc3NlZC4gVG8gcHJldmVudCBqb2JzIGZyb20gY3ljbGluZyBlbmRsZXNzbHkgYmV0d2VlbiBhY3RpdmUgYW5kIHdhaXQsXG4gICAgICogKGUuZy4gaWYgdGhlIGpvYiBoYW5kbGVyIGtlZXBzIGNyYXNoaW5nKSxcbiAgICAgKiB3ZSBsaW1pdCB0aGUgbnVtYmVyIHN0YWxsZWQgam9iIHJlY292ZXJpZXMgdG8gc2V0dGluZ3MubWF4U3RhbGxlZENvdW50LlxuICAgICAqL1xuICAgIGFzeW5jIG1vdmVTdGFsbGVkSm9ic1RvV2FpdCgpIHtcbiAgICAgICAgY29uc3QgY2xpZW50ID0gYXdhaXQgdGhpcy5xdWV1ZS5jbGllbnQ7XG4gICAgICAgIGNvbnN0IGFyZ3MgPSB0aGlzLm1vdmVTdGFsbGVkSm9ic1RvV2FpdEFyZ3MoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZXhlY0NvbW1hbmQoY2xpZW50LCAnbW92ZVN0YWxsZWRKb2JzVG9XYWl0JywgYXJncyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1vdmVzIGEgam9iIGJhY2sgZnJvbSBBY3RpdmUgdG8gV2FpdC5cbiAgICAgKiBUaGlzIHNjcmlwdCBpcyB1c2VkIHdoZW4gYSBqb2IgaGFzIGJlZW4gbWFudWFsbHkgcmF0ZSBsaW1pdGVkIGFuZCBuZWVkc1xuICAgICAqIHRvIGJlIG1vdmVkIGJhY2sgdG8gd2FpdCBmcm9tIGFjdGl2ZSBzdGF0dXMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY2xpZW50IC0gUmVkaXMgY2xpZW50XG4gICAgICogQHBhcmFtIGpvYklkIC0gSm9iIGlkXG4gICAgICogQHJldHVybnNcbiAgICAgKi9cbiAgICBhc3luYyBtb3ZlSm9iRnJvbUFjdGl2ZVRvV2FpdChqb2JJZCwgdG9rZW4gPSAnMCcpIHtcbiAgICAgICAgY29uc3QgY2xpZW50ID0gYXdhaXQgdGhpcy5xdWV1ZS5jbGllbnQ7XG4gICAgICAgIGNvbnN0IGtleXMgPSBbXG4gICAgICAgICAgICB0aGlzLnF1ZXVlLmtleXMuYWN0aXZlLFxuICAgICAgICAgICAgdGhpcy5xdWV1ZS5rZXlzLndhaXQsXG4gICAgICAgICAgICB0aGlzLnF1ZXVlLmtleXMuc3RhbGxlZCxcbiAgICAgICAgICAgIHRoaXMucXVldWUua2V5cy5wYXVzZWQsXG4gICAgICAgICAgICB0aGlzLnF1ZXVlLmtleXMubWV0YSxcbiAgICAgICAgICAgIHRoaXMucXVldWUua2V5cy5saW1pdGVyLFxuICAgICAgICAgICAgdGhpcy5xdWV1ZS5rZXlzLnByaW9yaXRpemVkLFxuICAgICAgICAgICAgdGhpcy5xdWV1ZS5rZXlzLm1hcmtlcixcbiAgICAgICAgICAgIHRoaXMucXVldWUua2V5cy5ldmVudHMsXG4gICAgICAgIF07XG4gICAgICAgIGNvbnN0IGFyZ3MgPSBbam9iSWQsIHRva2VuLCB0aGlzLnF1ZXVlLnRvS2V5KGpvYklkKV07XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuZXhlY0NvbW1hbmQoY2xpZW50LCAnbW92ZUpvYkZyb21BY3RpdmVUb1dhaXQnLCBrZXlzLmNvbmNhdChhcmdzKSk7XG4gICAgICAgIGlmIChyZXN1bHQgPCAwKSB7XG4gICAgICAgICAgICB0aHJvdyB0aGlzLmZpbmlzaGVkRXJyb3JzKHtcbiAgICAgICAgICAgICAgICBjb2RlOiByZXN1bHQsXG4gICAgICAgICAgICAgICAgam9iSWQsXG4gICAgICAgICAgICAgICAgY29tbWFuZDogJ21vdmVKb2JGcm9tQWN0aXZlVG9XYWl0JyxcbiAgICAgICAgICAgICAgICBzdGF0ZTogJ2FjdGl2ZScsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICBhc3luYyBvYmxpdGVyYXRlKG9wdHMpIHtcbiAgICAgICAgY29uc3QgY2xpZW50ID0gYXdhaXQgdGhpcy5xdWV1ZS5jbGllbnQ7XG4gICAgICAgIGNvbnN0IGtleXMgPSBbXG4gICAgICAgICAgICB0aGlzLnF1ZXVlLmtleXMubWV0YSxcbiAgICAgICAgICAgIHRoaXMucXVldWUudG9LZXkoJycpLFxuICAgICAgICBdO1xuICAgICAgICBjb25zdCBhcmdzID0gW29wdHMuY291bnQsIG9wdHMuZm9yY2UgPyAnZm9yY2UnIDogbnVsbF07XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuZXhlY0NvbW1hbmQoY2xpZW50LCAnb2JsaXRlcmF0ZScsIGtleXMuY29uY2F0KGFyZ3MpKTtcbiAgICAgICAgaWYgKHJlc3VsdCA8IDApIHtcbiAgICAgICAgICAgIHN3aXRjaCAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgY2FzZSAtMTpcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDYW5ub3Qgb2JsaXRlcmF0ZSBub24tcGF1c2VkIHF1ZXVlJyk7XG4gICAgICAgICAgICAgICAgY2FzZSAtMjpcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDYW5ub3Qgb2JsaXRlcmF0ZSBxdWV1ZSB3aXRoIGFjdGl2ZSBqb2JzJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGFnaW5hdGUgYSBzZXQgb3IgaGFzaCBrZXlzLlxuICAgICAqIEBwYXJhbSBvcHRzIC0gb3B0aW9ucyB0byBkZWZpbmUgdGhlIHBhZ2luYXRpb24gYmVoYXZpb3VyXG4gICAgICpcbiAgICAgKi9cbiAgICBhc3luYyBwYWdpbmF0ZShrZXksIG9wdHMpIHtcbiAgICAgICAgY29uc3QgY2xpZW50ID0gYXdhaXQgdGhpcy5xdWV1ZS5jbGllbnQ7XG4gICAgICAgIGNvbnN0IGtleXMgPSBba2V5XTtcbiAgICAgICAgY29uc3QgbWF4SXRlcmF0aW9ucyA9IDU7XG4gICAgICAgIGNvbnN0IHBhZ2VTaXplID0gb3B0cy5lbmQgPj0gMCA/IG9wdHMuZW5kIC0gb3B0cy5zdGFydCArIDEgOiBJbmZpbml0eTtcbiAgICAgICAgbGV0IGN1cnNvciA9ICcwJywgb2Zmc2V0ID0gMCwgaXRlbXMsIHRvdGFsLCByYXdKb2JzLCBwYWdlID0gW10sIGpvYnMgPSBbXTtcbiAgICAgICAgZG8ge1xuICAgICAgICAgICAgY29uc3QgYXJncyA9IFtcbiAgICAgICAgICAgICAgICBvcHRzLnN0YXJ0ICsgcGFnZS5sZW5ndGgsXG4gICAgICAgICAgICAgICAgb3B0cy5lbmQsXG4gICAgICAgICAgICAgICAgY3Vyc29yLFxuICAgICAgICAgICAgICAgIG9mZnNldCxcbiAgICAgICAgICAgICAgICBtYXhJdGVyYXRpb25zLFxuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGlmIChvcHRzLmZldGNoSm9icykge1xuICAgICAgICAgICAgICAgIGFyZ3MucHVzaCgxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFtjdXJzb3IsIG9mZnNldCwgaXRlbXMsIHRvdGFsLCByYXdKb2JzXSA9IGF3YWl0IHRoaXMuZXhlY0NvbW1hbmQoY2xpZW50LCAncGFnaW5hdGUnLCBrZXlzLmNvbmNhdChhcmdzKSk7XG4gICAgICAgICAgICBwYWdlID0gcGFnZS5jb25jYXQoaXRlbXMpO1xuICAgICAgICAgICAgaWYgKHJhd0pvYnMgJiYgcmF3Sm9icy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBqb2JzID0gam9icy5jb25jYXQocmF3Sm9icy5tYXAodXRpbHNfMS5hcnJheTJvYmopKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIEltcG9ydGFudCB0byBrZWVwIHRoaXMgY29lcmNpdmUgaW5lcXVhbGl0eSAoIT0pIGluc3RlYWQgb2Ygc3RyaWN0IGluZXF1YWxpdHkgKCE9PSlcbiAgICAgICAgfSB3aGlsZSAoY3Vyc29yICE9ICcwJyAmJiBwYWdlLmxlbmd0aCA8IHBhZ2VTaXplKTtcbiAgICAgICAgLy8gSWYgd2UgZ2V0IGFuIGFycmF5IG9mIGFycmF5cywgaXQgbWVhbnMgd2UgYXJlIHBhZ2luYXRpbmcgYSBoYXNoXG4gICAgICAgIGlmIChwYWdlLmxlbmd0aCAmJiBBcnJheS5pc0FycmF5KHBhZ2VbMF0pKSB7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBbXTtcbiAgICAgICAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBwYWdlLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IFtpZCwgdmFsdWVdID0gcGFnZVtpbmRleF07XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnB1c2goeyBpZCwgdjogSlNPTi5wYXJzZSh2YWx1ZSkgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnB1c2goeyBpZCwgZXJyOiBlcnIubWVzc2FnZSB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGN1cnNvcixcbiAgICAgICAgICAgICAgICBpdGVtczogcmVzdWx0LFxuICAgICAgICAgICAgICAgIHRvdGFsLFxuICAgICAgICAgICAgICAgIGpvYnMsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBjdXJzb3IsXG4gICAgICAgICAgICAgICAgaXRlbXM6IHBhZ2UubWFwKGl0ZW0gPT4gKHsgaWQ6IGl0ZW0gfSkpLFxuICAgICAgICAgICAgICAgIHRvdGFsLFxuICAgICAgICAgICAgICAgIGpvYnMsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfVxuICAgIGZpbmlzaGVkRXJyb3JzKHsgY29kZSwgam9iSWQsIHBhcmVudEtleSwgY29tbWFuZCwgc3RhdGUsIH0pIHtcbiAgICAgICAgbGV0IGVycm9yO1xuICAgICAgICBzd2l0Y2ggKGNvZGUpIHtcbiAgICAgICAgICAgIGNhc2UgZW51bXNfMS5FcnJvckNvZGUuSm9iTm90RXhpc3Q6XG4gICAgICAgICAgICAgICAgZXJyb3IgPSBuZXcgRXJyb3IoYE1pc3Npbmcga2V5IGZvciBqb2IgJHtqb2JJZH0uICR7Y29tbWFuZH1gKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgZW51bXNfMS5FcnJvckNvZGUuSm9iTG9ja05vdEV4aXN0OlxuICAgICAgICAgICAgICAgIGVycm9yID0gbmV3IEVycm9yKGBNaXNzaW5nIGxvY2sgZm9yIGpvYiAke2pvYklkfS4gJHtjb21tYW5kfWApO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBlbnVtc18xLkVycm9yQ29kZS5Kb2JOb3RJblN0YXRlOlxuICAgICAgICAgICAgICAgIGVycm9yID0gbmV3IEVycm9yKGBKb2IgJHtqb2JJZH0gaXMgbm90IGluIHRoZSAke3N0YXRlfSBzdGF0ZS4gJHtjb21tYW5kfWApO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBlbnVtc18xLkVycm9yQ29kZS5Kb2JQZW5kaW5nQ2hpbGRyZW46XG4gICAgICAgICAgICAgICAgZXJyb3IgPSBuZXcgRXJyb3IoYEpvYiAke2pvYklkfSBoYXMgcGVuZGluZyBkZXBlbmRlbmNpZXMuICR7Y29tbWFuZH1gKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgZW51bXNfMS5FcnJvckNvZGUuUGFyZW50Sm9iTm90RXhpc3Q6XG4gICAgICAgICAgICAgICAgZXJyb3IgPSBuZXcgRXJyb3IoYE1pc3Npbmcga2V5IGZvciBwYXJlbnQgam9iICR7cGFyZW50S2V5fS4gJHtjb21tYW5kfWApO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBlbnVtc18xLkVycm9yQ29kZS5Kb2JMb2NrTWlzbWF0Y2g6XG4gICAgICAgICAgICAgICAgZXJyb3IgPSBuZXcgRXJyb3IoYExvY2sgbWlzbWF0Y2ggZm9yIGpvYiAke2pvYklkfS4gQ21kICR7Y29tbWFuZH0gZnJvbSAke3N0YXRlfWApO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBlbnVtc18xLkVycm9yQ29kZS5QYXJlbnRKb2JDYW5ub3RCZVJlcGxhY2VkOlxuICAgICAgICAgICAgICAgIGVycm9yID0gbmV3IEVycm9yKGBUaGUgcGFyZW50IGpvYiAke3BhcmVudEtleX0gY2Fubm90IGJlIHJlcGxhY2VkLiAke2NvbW1hbmR9YCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIGVudW1zXzEuRXJyb3JDb2RlLkpvYkJlbG9uZ3NUb0pvYlNjaGVkdWxlcjpcbiAgICAgICAgICAgICAgICBlcnJvciA9IG5ldyBFcnJvcihgSm9iICR7am9iSWR9IGJlbG9uZ3MgdG8gYSBqb2Igc2NoZWR1bGVyIGFuZCBjYW5ub3QgYmUgcmVtb3ZlZCBkaXJlY3RseS4gJHtjb21tYW5kfWApO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBlbnVtc18xLkVycm9yQ29kZS5Kb2JIYXNGYWlsZWRDaGlsZHJlbjpcbiAgICAgICAgICAgICAgICBlcnJvciA9IG5ldyBlcnJvcnNfMS5VbnJlY292ZXJhYmxlRXJyb3IoYENhbm5vdCBjb21wbGV0ZSBqb2IgJHtqb2JJZH0gYmVjYXVzZSBpdCBoYXMgYXQgbGVhc3Qgb25lIGZhaWxlZCBjaGlsZC4gJHtjb21tYW5kfWApO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBlbnVtc18xLkVycm9yQ29kZS5TY2hlZHVsZXJKb2JJZENvbGxpc2lvbjpcbiAgICAgICAgICAgICAgICBlcnJvciA9IG5ldyBFcnJvcihgQ2Fubm90IGNyZWF0ZSBqb2Igc2NoZWR1bGVyIGl0ZXJhdGlvbiAtIGpvYiBJRCBhbHJlYWR5IGV4aXN0cy4gJHtjb21tYW5kfWApO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBlbnVtc18xLkVycm9yQ29kZS5TY2hlZHVsZXJKb2JTbG90c0J1c3k6XG4gICAgICAgICAgICAgICAgZXJyb3IgPSBuZXcgRXJyb3IoYENhbm5vdCBjcmVhdGUgam9iIHNjaGVkdWxlciBpdGVyYXRpb24gLSBjdXJyZW50IGFuZCBuZXh0IHRpbWUgc2xvdHMgYWxyZWFkeSBoYXZlIGpvYnMuICR7Y29tbWFuZH1gKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgZXJyb3IgPSBuZXcgRXJyb3IoYFVua25vd24gY29kZSAke2NvZGV9IGVycm9yIGZvciAke2pvYklkfS4gJHtjb21tYW5kfWApO1xuICAgICAgICB9XG4gICAgICAgIC8vIEFkZCB0aGUgY29kZSBwcm9wZXJ0eSB0byB0aGUgZXJyb3Igb2JqZWN0XG4gICAgICAgIGVycm9yLmNvZGUgPSBjb2RlO1xuICAgICAgICByZXR1cm4gZXJyb3I7XG4gICAgfVxufVxuZXhwb3J0cy5TY3JpcHRzID0gU2NyaXB0cztcbmZ1bmN0aW9uIHJhdzJOZXh0Sm9iRGF0YShyYXcpIHtcbiAgICBpZiAocmF3KSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IFtudWxsLCByYXdbMV0sIHJhd1syXSwgcmF3WzNdXTtcbiAgICAgICAgaWYgKHJhd1swXSkge1xuICAgICAgICAgICAgcmVzdWx0WzBdID0gKDAsIHV0aWxzXzEuYXJyYXkyb2JqKShyYXdbMF0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIHJldHVybiBbXTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNjcmlwdHMuanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiU2NyaXB0cyIsInJhdzJOZXh0Sm9iRGF0YSIsIm1zZ3BhY2tyXzEiLCJyZXF1aXJlIiwicGFja2VyIiwiUGFja3IiLCJ1c2VSZWNvcmRzIiwiZW5jb2RlVW5kZWZpbmVkQXNOaWwiLCJwYWNrIiwiZW51bXNfMSIsInV0aWxzXzEiLCJ2ZXJzaW9uXzEiLCJlcnJvcnNfMSIsImNvbnN0cnVjdG9yIiwicXVldWUiLCJ2ZXJzaW9uIiwicXVldWVLZXlzIiwia2V5cyIsIm1vdmVUb0ZpbmlzaGVkS2V5cyIsIndhaXQiLCJhY3RpdmUiLCJwcmlvcml0aXplZCIsImV2ZW50cyIsInN0YWxsZWQiLCJsaW1pdGVyIiwiZGVsYXllZCIsInBhdXNlZCIsIm1ldGEiLCJwYyIsInVuZGVmaW5lZCIsImV4ZWNDb21tYW5kIiwiY2xpZW50IiwiY29tbWFuZE5hbWUiLCJhcmdzIiwiY29tbWFuZE5hbWVXaXRoVmVyc2lvbiIsImlzSm9iSW5MaXN0IiwibGlzdEtleSIsImpvYklkIiwicmVzdWx0IiwiaXNSZWRpc1ZlcnNpb25Mb3dlclRoYW4iLCJyZWRpc1ZlcnNpb24iLCJscG9zIiwiTnVtYmVyIiwiaXNJbnRlZ2VyIiwiYWRkRGVsYXllZEpvYkFyZ3MiLCJqb2IiLCJlbmNvZGVkT3B0cyIsIm1hcmtlciIsImlkIiwiY29tcGxldGVkIiwicHVzaCIsImRhdGEiLCJhZGREZWxheWVkSm9iIiwiYXJnc0xpc3QiLCJhZGRQcmlvcml0aXplZEpvYkFyZ3MiLCJhZGRQcmlvcml0aXplZEpvYiIsImFkZFBhcmVudEpvYkFyZ3MiLCJhZGRQYXJlbnRKb2IiLCJhZGRTdGFuZGFyZEpvYkFyZ3MiLCJhZGRTdGFuZGFyZEpvYiIsImFkZEpvYiIsIm9wdHMiLCJwYXJlbnRLZXlPcHRzIiwicGFyZW50IiwibmFtZSIsInRpbWVzdGFtcCIsInBhcmVudEtleSIsInBhcmVudERlcGVuZGVuY2llc0tleSIsInJlcGVhdEpvYktleSIsImRlZHVwbGljYXRpb25JZCIsImRlIiwicmVwZWF0IiwiYXNzaWduIiwic3RhcnREYXRlIiwiRGF0ZSIsImVuZERhdGUiLCJhZGRUb1dhaXRpbmdDaGlsZHJlbiIsImRlbGF5IiwicHJpb3JpdHkiLCJmaW5pc2hlZEVycm9ycyIsImNvZGUiLCJjb21tYW5kIiwicGF1c2VBcmdzIiwicGF1c2UiLCJzcmMiLCJkc3QiLCJtYXAiLCJ0b0tleSIsImNvbmNhdCIsImFkZFJlcGVhdGFibGVKb2JBcmdzIiwiY3VzdG9tS2V5IiwibmV4dE1pbGxpcyIsImxlZ2FjeUN1c3RvbUtleSIsImFkZFJlcGVhdGFibGVKb2IiLCJhZGRKb2JTY2hlZHVsZXIiLCJqb2JTY2hlZHVsZXJJZCIsInRlbXBsYXRlRGF0YSIsInRlbXBsYXRlT3B0cyIsImRlbGF5ZWRKb2JPcHRzIiwicHJvZHVjZXJJZCIsIm5vdyIsInVwZGF0ZVJlcGVhdGFibGVKb2JNaWxsaXMiLCJ1cGRhdGVKb2JTY2hlZHVsZXJOZXh0TWlsbGlzIiwicmVtb3ZlUmVwZWF0YWJsZUFyZ3MiLCJsZWdhY3lSZXBlYXRKb2JJZCIsInJlcGVhdENvbmNhdE9wdGlvbnMiLCJnZXRSZXBlYXRDb25jYXRPcHRpb25zIiwic3BsaXQiLCJsZW5ndGgiLCJyZW1vdmVSZXBlYXRhYmxlIiwicmVtb3ZlSm9iU2NoZWR1bGVyIiwicmVtb3ZlQXJncyIsInJlbW92ZUNoaWxkcmVuIiwicmVtb3ZlIiwicmVtb3ZlVW5wcm9jZXNzZWRDaGlsZHJlbiIsImV4dGVuZExvY2siLCJ0b2tlbiIsImR1cmF0aW9uIiwiZXh0ZW5kTG9ja3MiLCJqb2JJZHMiLCJ0b2tlbnMiLCJ1cGRhdGVEYXRhIiwiZGF0YUpzb24iLCJKU09OIiwic3RyaW5naWZ5IiwidXBkYXRlUHJvZ3Jlc3MiLCJwcm9ncmVzcyIsInByb2dyZXNzSnNvbiIsImFkZExvZyIsImxvZ1JvdyIsImtlZXBMb2dzIiwibW92ZVRvRmluaXNoZWRBcmdzIiwidmFsIiwicHJvcFZhbCIsInNob3VsZFJlbW92ZSIsInRhcmdldCIsImZldGNoTmV4dCIsImZpZWxkc1RvVXBkYXRlIiwiX2EiLCJfYiIsIl9jIiwiX2QiLCJfZSIsIl9mIiwiX2ciLCJ3b3JrZXJLZWVwSm9icyIsInJlbW92ZU9uQ29tcGxldGUiLCJyZW1vdmVPbkZhaWwiLCJtZXRyaWNzS2V5Iiwia2VlcEpvYnMiLCJnZXRLZWVwSm9icyIsImNsb3NpbmciLCJsb2NrRHVyYXRpb24iLCJhdHRlbXB0cyIsIm1heE1ldHJpY3NTaXplIiwibWV0cmljcyIsIm1heERhdGFQb2ludHMiLCJmcG9mIiwiZmFpbFBhcmVudE9uRmFpbHVyZSIsImNwb2YiLCJjb250aW51ZVBhcmVudE9uRmFpbHVyZSIsImlkb2YiLCJpZ25vcmVEZXBlbmRlbmN5T25GYWlsdXJlIiwicmRvZiIsInJlbW92ZURlcGVuZGVuY3lPbkZhaWx1cmUiLCJvYmplY3RUb0ZsYXRBcnJheSIsImNvdW50IiwibW92ZVRvRmluaXNoZWQiLCJzdGF0ZSIsImRyYWluQXJncyIsImRyYWluIiwicmVtb3ZlQ2hpbGREZXBlbmRlbmN5QXJncyIsInJlbW92ZUNoaWxkRGVwZW5kZW5jeSIsImdldFJhbmdlc0FyZ3MiLCJ0eXBlcyIsInN0YXJ0IiwiZW5kIiwiYXNjIiwidHJhbnNmb3JtZWRUeXBlcyIsInR5cGUiLCJnZXRSYW5nZXMiLCJnZXRDb3VudHNBcmdzIiwiZ2V0Q291bnRzIiwiZ2V0Q291bnRzUGVyUHJpb3JpdHlBcmdzIiwicHJpb3JpdGllcyIsImdldENvdW50c1BlclByaW9yaXR5IiwiZ2V0RGVwZW5kZW5jeUNvdW50c0FyZ3MiLCJnZXREZXBlbmRlbmN5Q291bnRzIiwibW92ZVRvQ29tcGxldGVkQXJncyIsInJldHVybnZhbHVlIiwibW92ZVRvRmFpbGVkQXJncyIsImZhaWxlZFJlYXNvbiIsInJlbW92ZU9uRmFpbGVkIiwiaXNGaW5pc2hlZCIsInJldHVyblZhbHVlIiwia2V5IiwiZ2V0U3RhdGUiLCJjaGFuZ2VEZWxheSIsImNoYW5nZURlbGF5QXJncyIsImNoYW5nZVByaW9yaXR5IiwibGlmbyIsImNoYW5nZVByaW9yaXR5QXJncyIsIm1vdmVUb0RlbGF5ZWRBcmdzIiwic2tpcEF0dGVtcHQiLCJtb3ZlVG9XYWl0aW5nQ2hpbGRyZW5BcmdzIiwiY2hpbGRLZXkiLCJnZXRQYXJlbnRLZXkiLCJjaGlsZCIsImlzTWF4ZWRBcmdzIiwiaXNNYXhlZCIsIm1vdmVUb0RlbGF5ZWQiLCJtb3ZlVG9XYWl0aW5nQ2hpbGRyZW4iLCJnZXRSYXRlTGltaXRUdGxBcmdzIiwibWF4Sm9icyIsImdldFJhdGVMaW1pdFR0bCIsImNsZWFuSm9ic0luU2V0Iiwic2V0IiwibGltaXQiLCJnZXRKb2JTY2hlZHVsZXJBcmdzIiwiZ2V0Sm9iU2NoZWR1bGVyIiwicmV0cnlKb2JBcmdzIiwicHVzaENtZCIsInJldHJ5Sm9iIiwibW92ZUpvYnNUb1dhaXRBcmdzIiwicmV0cnlKb2JzIiwiZ2V0VGltZSIsInByb21vdGVKb2JzIiwiTUFYX1ZBTFVFIiwicmVwcm9jZXNzSm9iIiwiZ2V0TWV0cmljcyIsIm1vdmVUb0FjdGl2ZSIsInByb21vdGUiLCJtb3ZlU3RhbGxlZEpvYnNUb1dhaXRBcmdzIiwibWF4U3RhbGxlZENvdW50Iiwic3RhbGxlZEludGVydmFsIiwibW92ZVN0YWxsZWRKb2JzVG9XYWl0IiwibW92ZUpvYkZyb21BY3RpdmVUb1dhaXQiLCJvYmxpdGVyYXRlIiwiZm9yY2UiLCJFcnJvciIsInBhZ2luYXRlIiwibWF4SXRlcmF0aW9ucyIsInBhZ2VTaXplIiwiSW5maW5pdHkiLCJjdXJzb3IiLCJvZmZzZXQiLCJpdGVtcyIsInRvdGFsIiwicmF3Sm9icyIsInBhZ2UiLCJqb2JzIiwiZmV0Y2hKb2JzIiwiYXJyYXkyb2JqIiwiQXJyYXkiLCJpc0FycmF5IiwiaW5kZXgiLCJ2IiwicGFyc2UiLCJlcnIiLCJtZXNzYWdlIiwiaXRlbSIsImVycm9yIiwiRXJyb3JDb2RlIiwiSm9iTm90RXhpc3QiLCJKb2JMb2NrTm90RXhpc3QiLCJKb2JOb3RJblN0YXRlIiwiSm9iUGVuZGluZ0NoaWxkcmVuIiwiUGFyZW50Sm9iTm90RXhpc3QiLCJKb2JMb2NrTWlzbWF0Y2giLCJQYXJlbnRKb2JDYW5ub3RCZVJlcGxhY2VkIiwiSm9iQmVsb25nc1RvSm9iU2NoZWR1bGVyIiwiSm9iSGFzRmFpbGVkQ2hpbGRyZW4iLCJVbnJlY292ZXJhYmxlRXJyb3IiLCJTY2hlZHVsZXJKb2JJZENvbGxpc2lvbiIsIlNjaGVkdWxlckpvYlNsb3RzQnVzeSIsInJhdyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/classes/scripts.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/classes/worker.js":
/*!********************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/classes/worker.js ***!
  \********************************************************/
/***/ ((module, exports, __webpack_require__) => {

eval("/* module decorator */ module = __webpack_require__.nmd(module);\n\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.Worker = void 0;\nconst fs = __webpack_require__(/*! fs */ \"fs\");\nconst url_1 = __webpack_require__(/*! url */ \"url\");\nconst path = __webpack_require__(/*! path */ \"path\");\nconst uuid_1 = __webpack_require__(/*! uuid */ \"(rsc)/./node_modules/uuid/dist/cjs/index.js\");\n// Note: this Polyfill is only needed for Node versions < 15.4.0\nconst node_abort_controller_1 = __webpack_require__(/*! node-abort-controller */ \"(rsc)/./node_modules/node-abort-controller/index.js\");\nconst utils_1 = __webpack_require__(/*! ../utils */ \"(rsc)/./node_modules/bullmq/dist/cjs/utils/index.js\");\nconst queue_base_1 = __webpack_require__(/*! ./queue-base */ \"(rsc)/./node_modules/bullmq/dist/cjs/classes/queue-base.js\");\nconst repeat_1 = __webpack_require__(/*! ./repeat */ \"(rsc)/./node_modules/bullmq/dist/cjs/classes/repeat.js\");\nconst child_pool_1 = __webpack_require__(/*! ./child-pool */ \"(rsc)/./node_modules/bullmq/dist/cjs/classes/child-pool.js\");\nconst redis_connection_1 = __webpack_require__(/*! ./redis-connection */ \"(rsc)/./node_modules/bullmq/dist/cjs/classes/redis-connection.js\");\nconst sandbox_1 = __webpack_require__(/*! ./sandbox */ \"(rsc)/./node_modules/bullmq/dist/cjs/classes/sandbox.js\");\nconst async_fifo_queue_1 = __webpack_require__(/*! ./async-fifo-queue */ \"(rsc)/./node_modules/bullmq/dist/cjs/classes/async-fifo-queue.js\");\nconst errors_1 = __webpack_require__(/*! ./errors */ \"(rsc)/./node_modules/bullmq/dist/cjs/classes/errors/index.js\");\nconst enums_1 = __webpack_require__(/*! ../enums */ \"(rsc)/./node_modules/bullmq/dist/cjs/enums/index.js\");\nconst job_scheduler_1 = __webpack_require__(/*! ./job-scheduler */ \"(rsc)/./node_modules/bullmq/dist/cjs/classes/job-scheduler.js\");\nconst lock_manager_1 = __webpack_require__(/*! ./lock-manager */ \"(rsc)/./node_modules/bullmq/dist/cjs/classes/lock-manager.js\");\nconst ONE_SECOND = 1000;\n// 10 seconds is the maximum time a BZPOPMIN can block.\nconst maximumBlockTimeout = 10;\n// 30 seconds is the maximum limit until.\nconst maximumRateLimitDelay = 30000;\n/**\n *\n * This class represents a worker that is able to process jobs from the queue.\n * As soon as the class is instantiated and a connection to Redis is established\n * it will start processing jobs.\n *\n */ class Worker extends queue_base_1.QueueBase {\n    static RateLimitError() {\n        return new errors_1.RateLimitError();\n    }\n    constructor(name, processor, opts, Connection){\n        super(name, Object.assign(Object.assign({\n            drainDelay: 5,\n            concurrency: 1,\n            lockDuration: 30000,\n            maxStalledCount: 1,\n            stalledInterval: 30000,\n            autorun: true,\n            runRetryDelay: 15000\n        }, opts), {\n            blockingConnection: true\n        }), Connection);\n        this.abortDelayController = null;\n        this.blockUntil = 0;\n        this.drained = false;\n        this.limitUntil = 0;\n        this.waiting = null;\n        this.running = false;\n        this.mainLoopRunning = null;\n        if (!opts || !opts.connection) {\n            throw new Error(\"Worker requires a connection\");\n        }\n        if (typeof this.opts.maxStalledCount !== \"number\" || this.opts.maxStalledCount < 0) {\n            throw new Error(\"maxStalledCount must be greater or equal than 0\");\n        }\n        if (typeof this.opts.maxStartedAttempts === \"number\" && this.opts.maxStartedAttempts < 0) {\n            throw new Error(\"maxStartedAttempts must be greater or equal than 0\");\n        }\n        if (typeof this.opts.stalledInterval !== \"number\" || this.opts.stalledInterval <= 0) {\n            throw new Error(\"stalledInterval must be greater than 0\");\n        }\n        if (typeof this.opts.drainDelay !== \"number\" || this.opts.drainDelay <= 0) {\n            throw new Error(\"drainDelay must be greater than 0\");\n        }\n        this.concurrency = this.opts.concurrency;\n        this.opts.lockRenewTime = this.opts.lockRenewTime || this.opts.lockDuration / 2;\n        this.id = (0, uuid_1.v4)();\n        // Initialize lock manager with worker context\n        this.lockManager = new lock_manager_1.LockManager(this, {\n            lockRenewTime: this.opts.lockRenewTime,\n            lockDuration: this.opts.lockDuration,\n            workerId: this.id,\n            workerName: this.opts.name\n        });\n        if (processor) {\n            if (typeof processor === \"function\") {\n                this.processFn = processor;\n            } else {\n                // SANDBOXED\n                if (processor instanceof url_1.URL) {\n                    if (!fs.existsSync(processor)) {\n                        throw new Error(`URL ${processor} does not exist in the local file system`);\n                    }\n                    processor = processor.href;\n                } else {\n                    const supportedFileTypes = [\n                        \".js\",\n                        \".ts\",\n                        \".flow\",\n                        \".cjs\",\n                        \".mjs\"\n                    ];\n                    const processorFile = processor + (supportedFileTypes.includes(path.extname(processor)) ? \"\" : \".js\");\n                    if (!fs.existsSync(processorFile)) {\n                        throw new Error(`File ${processorFile} does not exist`);\n                    }\n                }\n                // Separate paths so that bundling tools can resolve dependencies easier\n                const dirname = path.dirname(module.filename || __filename);\n                const workerThreadsMainFile = path.join(dirname, \"main-worker.js\");\n                const spawnProcessMainFile = path.join(dirname, \"main.js\");\n                let mainFilePath = this.opts.useWorkerThreads ? workerThreadsMainFile : spawnProcessMainFile;\n                try {\n                    fs.statSync(mainFilePath); // would throw if file not exists\n                } catch (_) {\n                    const mainFile = this.opts.useWorkerThreads ? \"main-worker.js\" : \"main.js\";\n                    mainFilePath = path.join(process.cwd(), `dist/cjs/classes/${mainFile}`);\n                    fs.statSync(mainFilePath);\n                }\n                this.childPool = new child_pool_1.ChildPool({\n                    mainFile: mainFilePath,\n                    useWorkerThreads: this.opts.useWorkerThreads,\n                    workerForkOptions: this.opts.workerForkOptions,\n                    workerThreadsOptions: this.opts.workerThreadsOptions\n                });\n                this.processFn = (0, sandbox_1.default)(processor, this.childPool).bind(this);\n            }\n            if (this.opts.autorun) {\n                this.run().catch((error)=>this.emit(\"error\", error));\n            }\n        }\n        const connectionName = this.clientName() + (this.opts.name ? `:w:${this.opts.name}` : \"\");\n        this.blockingConnection = new redis_connection_1.RedisConnection((0, utils_1.isRedisInstance)(opts.connection) ? opts.connection.duplicate({\n            connectionName\n        }) : Object.assign(Object.assign({}, opts.connection), {\n            connectionName\n        }), {\n            shared: false,\n            blocking: true,\n            skipVersionCheck: opts.skipVersionCheck\n        });\n        this.blockingConnection.on(\"error\", (error)=>this.emit(\"error\", error));\n        this.blockingConnection.on(\"ready\", ()=>setTimeout(()=>this.emit(\"ready\"), 0));\n    }\n    /**\n     * Public accessor method for LockManager to extend locks.\n     * This delegates to the protected scripts object.\n     */ async extendJobLocks(jobIds, tokens, duration) {\n        return this.scripts.extendLocks(jobIds, tokens, duration);\n    }\n    emit(event, ...args) {\n        return super.emit(event, ...args);\n    }\n    off(eventName, listener) {\n        super.off(eventName, listener);\n        return this;\n    }\n    on(event, listener) {\n        super.on(event, listener);\n        return this;\n    }\n    once(event, listener) {\n        super.once(event, listener);\n        return this;\n    }\n    callProcessJob(job, token) {\n        return this.processFn(job, token);\n    }\n    createJob(data, jobId) {\n        return this.Job.fromJSON(this, data, jobId);\n    }\n    /**\n     *\n     * Waits until the worker is ready to start processing jobs.\n     * In general only useful when writing tests.\n     *\n     */ async waitUntilReady() {\n        await super.waitUntilReady();\n        return this.blockingConnection.client;\n    }\n    set concurrency(concurrency) {\n        if (typeof concurrency !== \"number\" || concurrency < 1 || !isFinite(concurrency)) {\n            throw new Error(\"concurrency must be a finite number greater than 0\");\n        }\n        this._concurrency = concurrency;\n    }\n    get concurrency() {\n        return this._concurrency;\n    }\n    get repeat() {\n        return new Promise(async (resolve)=>{\n            if (!this._repeat) {\n                const connection = await this.client;\n                this._repeat = new repeat_1.Repeat(this.name, Object.assign(Object.assign({}, this.opts), {\n                    connection\n                }));\n                this._repeat.on(\"error\", (e)=>this.emit.bind(this, e));\n            }\n            resolve(this._repeat);\n        });\n    }\n    get jobScheduler() {\n        return new Promise(async (resolve)=>{\n            if (!this._jobScheduler) {\n                const connection = await this.client;\n                this._jobScheduler = new job_scheduler_1.JobScheduler(this.name, Object.assign(Object.assign({}, this.opts), {\n                    connection\n                }));\n                this._jobScheduler.on(\"error\", (e)=>this.emit.bind(this, e));\n            }\n            resolve(this._jobScheduler);\n        });\n    }\n    async run() {\n        if (!this.processFn) {\n            throw new Error(\"No process function is defined.\");\n        }\n        if (this.running) {\n            throw new Error(\"Worker is already running.\");\n        }\n        try {\n            this.running = true;\n            if (this.closing || this.paused) {\n                return;\n            }\n            await this.startStalledCheckTimer();\n            if (!this.opts.skipLockRenewal) {\n                this.lockManager.start();\n            }\n            const client = await this.client;\n            const bclient = await this.blockingConnection.client;\n            this.mainLoopRunning = this.mainLoop(client, bclient);\n            // We must await here or finally will be called too early.\n            await this.mainLoopRunning;\n        } finally{\n            this.running = false;\n        }\n    }\n    async waitForRateLimit() {\n        var _a;\n        const limitUntil = this.limitUntil;\n        if (limitUntil > Date.now()) {\n            (_a = this.abortDelayController) === null || _a === void 0 ? void 0 : _a.abort();\n            this.abortDelayController = new node_abort_controller_1.AbortController();\n            const delay = this.getRateLimitDelay(limitUntil - Date.now());\n            await this.delay(delay, this.abortDelayController);\n        }\n    }\n    /**\n     * This is the main loop in BullMQ. Its goals are to fetch jobs from the queue\n     * as efficiently as possible, providing concurrency and minimal unnecessary calls\n     * to Redis.\n     */ async mainLoop(client, bclient) {\n        const asyncFifoQueue = new async_fifo_queue_1.AsyncFifoQueue();\n        let tokenPostfix = 0;\n        while(!this.closing && !this.paused || asyncFifoQueue.numTotal() > 0){\n            /**\n             * This inner loop tries to fetch jobs concurrently, but if we are waiting for a job\n             * to arrive at the queue we should not try to fetch more jobs (as it would be pointless)\n             */ while(!this.closing && !this.paused && !this.waiting && asyncFifoQueue.numTotal() < this._concurrency && !this.isRateLimited()){\n                const token = `${this.id}:${tokenPostfix++}`;\n                const fetchedJob = this.retryIfFailed(()=>this._getNextJob(client, bclient, token, {\n                        block: true\n                    }), {\n                    delayInMs: this.opts.runRetryDelay,\n                    onlyEmitError: true\n                });\n                asyncFifoQueue.add(fetchedJob);\n                if (this.waiting && asyncFifoQueue.numTotal() > 1) {\n                    break;\n                }\n                // We await here so that we fetch jobs in sequence, this is important to avoid unnecessary calls\n                // to Redis in high concurrency scenarios.\n                const job = await fetchedJob;\n                // No more jobs waiting but we have others that could start processing already\n                if (!job && asyncFifoQueue.numTotal() > 1) {\n                    break;\n                }\n                // If there are potential jobs to be processed and blockUntil is set, we should exit to avoid waiting\n                // for processing this job.\n                if (this.blockUntil) {\n                    break;\n                }\n            }\n            // Since there can be undefined jobs in the queue (when a job fails or queue is empty)\n            // we iterate until we find a job.\n            let job;\n            do {\n                job = await asyncFifoQueue.fetch();\n            }while (!job && asyncFifoQueue.numQueued() > 0);\n            if (job) {\n                const token = job.token;\n                asyncFifoQueue.add(this.processJob(job, token, ()=>asyncFifoQueue.numTotal() <= this._concurrency));\n            } else if (asyncFifoQueue.numQueued() === 0) {\n                await this.waitForRateLimit();\n            }\n        }\n    }\n    /**\n     * Returns a promise that resolves to the next job in queue.\n     * @param token - worker token to be assigned to retrieved job\n     * @returns a Job or undefined if no job was available in the queue.\n     */ async getNextJob(token, { block = true } = {}) {\n        var _a, _b;\n        const nextJob = await this._getNextJob(await this.client, await this.blockingConnection.client, token, {\n            block\n        });\n        return this.trace(enums_1.SpanKind.INTERNAL, \"getNextJob\", this.name, async (span)=>{\n            span === null || span === void 0 ? void 0 : span.setAttributes({\n                [enums_1.TelemetryAttributes.WorkerId]: this.id,\n                [enums_1.TelemetryAttributes.QueueName]: this.name,\n                [enums_1.TelemetryAttributes.WorkerName]: this.opts.name,\n                [enums_1.TelemetryAttributes.WorkerOptions]: JSON.stringify({\n                    block\n                }),\n                [enums_1.TelemetryAttributes.JobId]: nextJob === null || nextJob === void 0 ? void 0 : nextJob.id\n            });\n            return nextJob;\n        }, (_b = (_a = nextJob === null || nextJob === void 0 ? void 0 : nextJob.opts) === null || _a === void 0 ? void 0 : _a.telemetry) === null || _b === void 0 ? void 0 : _b.metadata);\n    }\n    async _getNextJob(client, bclient, token, { block = true } = {}) {\n        if (this.paused) {\n            return;\n        }\n        if (this.closing) {\n            return;\n        }\n        if (this.drained && block && !this.limitUntil && !this.waiting) {\n            this.waiting = this.waitForJob(bclient, this.blockUntil);\n            try {\n                this.blockUntil = await this.waiting;\n                if (this.blockUntil <= 0 || this.blockUntil - Date.now() < 1) {\n                    return await this.moveToActive(client, token, this.opts.name);\n                }\n            } finally{\n                this.waiting = null;\n            }\n        } else {\n            if (!this.isRateLimited()) {\n                return this.moveToActive(client, token, this.opts.name);\n            }\n        }\n    }\n    /**\n     * Overrides the rate limit to be active for the next jobs.\n     * @deprecated This method is deprecated and will be removed in v6. Use queue.rateLimit method instead.\n     * @param expireTimeMs - expire time in ms of this rate limit.\n     */ async rateLimit(expireTimeMs) {\n        await this.trace(enums_1.SpanKind.INTERNAL, \"rateLimit\", this.name, async (span)=>{\n            span === null || span === void 0 ? void 0 : span.setAttributes({\n                [enums_1.TelemetryAttributes.WorkerId]: this.id,\n                [enums_1.TelemetryAttributes.WorkerRateLimit]: expireTimeMs\n            });\n            await this.client.then((client)=>client.set(this.keys.limiter, Number.MAX_SAFE_INTEGER, \"PX\", expireTimeMs));\n        });\n    }\n    get minimumBlockTimeout() {\n        return this.blockingConnection.capabilities.canBlockFor1Ms ? /* 1 millisecond is chosen because the granularity of our timestamps are milliseconds.\n      Obviously we can still process much faster than 1 job per millisecond but delays and rate limits\n      will never work with more accuracy than 1ms. */ 0.001 : 0.002;\n    }\n    isRateLimited() {\n        return this.limitUntil > Date.now();\n    }\n    async moveToActive(client, token, name) {\n        const [jobData, id, rateLimitDelay, delayUntil] = await this.scripts.moveToActive(client, token, name);\n        this.updateDelays(rateLimitDelay, delayUntil);\n        return this.nextJobFromJobData(jobData, id, token);\n    }\n    async waitForJob(bclient, blockUntil) {\n        if (this.paused) {\n            return Infinity;\n        }\n        let timeout;\n        try {\n            if (!this.closing && !this.isRateLimited()) {\n                let blockTimeout = this.getBlockTimeout(blockUntil);\n                if (blockTimeout > 0) {\n                    blockTimeout = this.blockingConnection.capabilities.canDoubleTimeout ? blockTimeout : Math.ceil(blockTimeout);\n                    // We cannot trust that the blocking connection stays blocking forever\n                    // due to issues in Redis and IORedis, so we will reconnect if we\n                    // don't get a response in the expected time.\n                    timeout = setTimeout(async ()=>{\n                        bclient.disconnect(!this.closing);\n                    }, blockTimeout * 1000 + 1000);\n                    this.updateDelays(); // reset delays to avoid reusing same values in next iteration\n                    // Markers should only be used for un-blocking, so we will handle them in this\n                    // function only.\n                    const result = await bclient.bzpopmin(this.keys.marker, blockTimeout);\n                    if (result) {\n                        const [_key, member, score] = result;\n                        if (member) {\n                            const newBlockUntil = parseInt(score);\n                            // Use by pro version as rate limited groups could generate lower blockUntil values\n                            // markers only return delays for delayed jobs\n                            if (blockUntil && newBlockUntil > blockUntil) {\n                                return blockUntil;\n                            }\n                            return newBlockUntil;\n                        }\n                    }\n                }\n                return 0;\n            }\n        } catch (error) {\n            if ((0, utils_1.isNotConnectionError)(error)) {\n                this.emit(\"error\", error);\n            }\n            if (!this.closing) {\n                await this.delay();\n            }\n        } finally{\n            clearTimeout(timeout);\n        }\n        return Infinity;\n    }\n    getBlockTimeout(blockUntil) {\n        const opts = this.opts;\n        // when there are delayed jobs\n        if (blockUntil) {\n            const blockDelay = blockUntil - Date.now();\n            // when we reach the time to get new jobs\n            if (blockDelay <= 0) {\n                return blockDelay;\n            } else if (blockDelay < this.minimumBlockTimeout * 1000) {\n                return this.minimumBlockTimeout;\n            } else {\n                // We restrict the maximum block timeout to 10 second to avoid\n                // blocking the connection for too long in the case of reconnections\n                // reference: https://github.com/taskforcesh/bullmq/issues/1658\n                return Math.min(blockDelay / 1000, maximumBlockTimeout);\n            }\n        } else {\n            return Math.max(opts.drainDelay, this.minimumBlockTimeout);\n        }\n    }\n    getRateLimitDelay(delay) {\n        // We restrict the maximum limit until to 30 second to\n        // be able to promote delayed jobs while queue is rate limited\n        return Math.min(delay, maximumRateLimitDelay);\n    }\n    /**\n     *\n     * This function is exposed only for testing purposes.\n     */ async delay(milliseconds, abortController) {\n        await (0, utils_1.delay)(milliseconds || utils_1.DELAY_TIME_1, abortController);\n    }\n    updateDelays(limitDelay = 0, delayUntil = 0) {\n        const clampedLimit = Math.max(limitDelay, 0);\n        if (clampedLimit > 0) {\n            this.limitUntil = Date.now() + clampedLimit;\n        } else {\n            this.limitUntil = 0;\n        }\n        this.blockUntil = Math.max(delayUntil, 0) || 0;\n    }\n    async nextJobFromJobData(jobData, jobId, token) {\n        if (!jobData) {\n            if (!this.drained) {\n                this.emit(\"drained\");\n                this.drained = true;\n            }\n        } else {\n            this.drained = false;\n            const job = this.createJob(jobData, jobId);\n            job.token = token;\n            try {\n                await this.retryIfFailed(async ()=>{\n                    if (job.repeatJobKey && job.repeatJobKey.split(\":\").length < 5) {\n                        const jobScheduler = await this.jobScheduler;\n                        await jobScheduler.upsertJobScheduler(// Most of these arguments are not really needed\n                        // anymore as we read them from the job scheduler itself\n                        job.repeatJobKey, job.opts.repeat, job.name, job.data, job.opts, {\n                            override: false,\n                            producerId: job.id\n                        });\n                    } else if (job.opts.repeat) {\n                        const repeat = await this.repeat;\n                        await repeat.updateRepeatableJob(job.name, job.data, job.opts, {\n                            override: false\n                        });\n                    }\n                }, {\n                    delayInMs: this.opts.runRetryDelay\n                });\n            } catch (err) {\n                // Emit error but don't throw to avoid breaking current job completion\n                // Note: This means the next repeatable job will not be scheduled\n                const errorMessage = err instanceof Error ? err.message : String(err);\n                const schedulingError = new Error(`Failed to add repeatable job for next iteration: ${errorMessage}`);\n                this.emit(\"error\", schedulingError);\n                // Return undefined to indicate no next job is available\n                return undefined;\n            }\n            return job;\n        }\n    }\n    async processJob(job, token, fetchNextCallback = ()=>true) {\n        var _a, _b;\n        const srcPropagationMedatada = (_b = (_a = job.opts) === null || _a === void 0 ? void 0 : _a.telemetry) === null || _b === void 0 ? void 0 : _b.metadata;\n        return this.trace(enums_1.SpanKind.CONSUMER, \"process\", this.name, async (span)=>{\n            span === null || span === void 0 ? void 0 : span.setAttributes({\n                [enums_1.TelemetryAttributes.WorkerId]: this.id,\n                [enums_1.TelemetryAttributes.WorkerName]: this.opts.name,\n                [enums_1.TelemetryAttributes.JobId]: job.id,\n                [enums_1.TelemetryAttributes.JobName]: job.name,\n                [enums_1.TelemetryAttributes.JobAttemptsMade]: job.attemptsMade\n            });\n            this.emit(\"active\", job, \"waiting\");\n            const processedOn = Date.now();\n            this.lockManager.trackJob(job.id, token, processedOn);\n            try {\n                const unrecoverableErrorMessage = this.getUnrecoverableErrorMessage(job);\n                if (unrecoverableErrorMessage) {\n                    const failed = await this.retryIfFailed(()=>this.handleFailed(new errors_1.UnrecoverableError(unrecoverableErrorMessage), job, token, fetchNextCallback, span), {\n                        delayInMs: this.opts.runRetryDelay,\n                        span\n                    });\n                    return failed;\n                }\n                const result = await this.callProcessJob(job, token);\n                return await this.retryIfFailed(()=>this.handleCompleted(result, job, token, fetchNextCallback, span), {\n                    delayInMs: this.opts.runRetryDelay,\n                    span\n                });\n            } catch (err) {\n                const failed = await this.retryIfFailed(()=>this.handleFailed(err, job, token, fetchNextCallback, span), {\n                    delayInMs: this.opts.runRetryDelay,\n                    span,\n                    onlyEmitError: true\n                });\n                return failed;\n            } finally{\n                this.lockManager.untrackJob(job.id);\n                span === null || span === void 0 ? void 0 : span.setAttributes({\n                    [enums_1.TelemetryAttributes.JobFinishedTimestamp]: Date.now(),\n                    [enums_1.TelemetryAttributes.JobProcessedTimestamp]: processedOn\n                });\n            }\n        }, srcPropagationMedatada);\n    }\n    getUnrecoverableErrorMessage(job) {\n        if (job.deferredFailure) {\n            return job.deferredFailure;\n        }\n        if (this.opts.maxStartedAttempts && this.opts.maxStartedAttempts < job.attemptsStarted) {\n            return \"job started more than allowable limit\";\n        }\n    }\n    async handleCompleted(result, job, token, fetchNextCallback = ()=>true, span) {\n        if (!this.connection.closing) {\n            const completed = await job.moveToCompleted(result, token, fetchNextCallback() && !(this.closing || this.paused));\n            this.emit(\"completed\", job, result, \"active\");\n            span === null || span === void 0 ? void 0 : span.addEvent(\"job completed\", {\n                [enums_1.TelemetryAttributes.JobResult]: JSON.stringify(result)\n            });\n            const [jobData, jobId, rateLimitDelay, delayUntil] = completed || [];\n            this.updateDelays(rateLimitDelay, delayUntil);\n            return this.nextJobFromJobData(jobData, jobId, token);\n        }\n    }\n    async handleFailed(err, job, token, fetchNextCallback = ()=>true, span) {\n        if (!this.connection.closing) {\n            // Check if the job was manually rate-limited\n            if (err.message === errors_1.RATE_LIMIT_ERROR) {\n                const rateLimitTtl = await this.moveLimitedBackToWait(job, token);\n                this.limitUntil = rateLimitTtl > 0 ? Date.now() + rateLimitTtl : 0;\n                return;\n            }\n            if (err instanceof errors_1.DelayedError || err.name == \"DelayedError\" || err instanceof errors_1.WaitingError || err.name == \"WaitingError\" || err instanceof errors_1.WaitingChildrenError || err.name == \"WaitingChildrenError\") {\n                const client = await this.client;\n                return this.moveToActive(client, token, this.opts.name);\n            }\n            const result = await job.moveToFailed(err, token, fetchNextCallback() && !(this.closing || this.paused));\n            this.emit(\"failed\", job, err, \"active\");\n            span === null || span === void 0 ? void 0 : span.addEvent(\"job failed\", {\n                [enums_1.TelemetryAttributes.JobFailedReason]: err.message\n            });\n            if (result) {\n                const [jobData, jobId, rateLimitDelay, delayUntil] = result;\n                this.updateDelays(rateLimitDelay, delayUntil);\n                return this.nextJobFromJobData(jobData, jobId, token);\n            }\n        }\n    }\n    /**\n     *\n     * Pauses the processing of this queue only for this worker.\n     */ async pause(doNotWaitActive) {\n        await this.trace(enums_1.SpanKind.INTERNAL, \"pause\", this.name, async (span)=>{\n            var _a;\n            span === null || span === void 0 ? void 0 : span.setAttributes({\n                [enums_1.TelemetryAttributes.WorkerId]: this.id,\n                [enums_1.TelemetryAttributes.WorkerName]: this.opts.name,\n                [enums_1.TelemetryAttributes.WorkerDoNotWaitActive]: doNotWaitActive\n            });\n            if (!this.paused) {\n                this.paused = true;\n                if (!doNotWaitActive) {\n                    await this.whenCurrentJobsFinished();\n                }\n                (_a = this.stalledCheckStopper) === null || _a === void 0 ? void 0 : _a.call(this);\n                this.emit(\"paused\");\n            }\n        });\n    }\n    /**\n     *\n     * Resumes processing of this worker (if paused).\n     */ resume() {\n        if (!this.running) {\n            this.trace(enums_1.SpanKind.INTERNAL, \"resume\", this.name, (span)=>{\n                span === null || span === void 0 ? void 0 : span.setAttributes({\n                    [enums_1.TelemetryAttributes.WorkerId]: this.id,\n                    [enums_1.TelemetryAttributes.WorkerName]: this.opts.name\n                });\n                this.paused = false;\n                if (this.processFn) {\n                    this.run();\n                }\n                this.emit(\"resumed\");\n            });\n        }\n    }\n    /**\n     *\n     * Checks if worker is paused.\n     *\n     * @returns true if worker is paused, false otherwise.\n     */ isPaused() {\n        return !!this.paused;\n    }\n    /**\n     *\n     * Checks if worker is currently running.\n     *\n     * @returns true if worker is running, false otherwise.\n     */ isRunning() {\n        return this.running;\n    }\n    /**\n     *\n     * Closes the worker and related redis connections.\n     *\n     * This method waits for current jobs to finalize before returning.\n     *\n     * @param force - Use force boolean parameter if you do not want to wait for\n     * current jobs to be processed. When using telemetry, be mindful that it can\n     * interfere with the proper closure of spans, potentially preventing them from being exported.\n     *\n     * @returns Promise that resolves when the worker has been closed.\n     */ async close(force = false) {\n        if (this.closing) {\n            return this.closing;\n        }\n        this.closing = (async ()=>{\n            await this.trace(enums_1.SpanKind.INTERNAL, \"close\", this.name, async (span)=>{\n                var _a, _b;\n                span === null || span === void 0 ? void 0 : span.setAttributes({\n                    [enums_1.TelemetryAttributes.WorkerId]: this.id,\n                    [enums_1.TelemetryAttributes.WorkerName]: this.opts.name,\n                    [enums_1.TelemetryAttributes.WorkerForceClose]: force\n                });\n                this.emit(\"closing\", \"closing queue\");\n                (_a = this.abortDelayController) === null || _a === void 0 ? void 0 : _a.abort();\n                // Define the async cleanup functions\n                const asyncCleanups = [\n                    ()=>{\n                        return force || this.whenCurrentJobsFinished(false);\n                    },\n                    ()=>this.lockManager.close(),\n                    ()=>{\n                        var _a;\n                        return (_a = this.childPool) === null || _a === void 0 ? void 0 : _a.clean();\n                    },\n                    ()=>this.blockingConnection.close(force),\n                    ()=>this.connection.close(force)\n                ];\n                // Run cleanup functions sequentially and make sure all are run despite any errors\n                for (const cleanup of asyncCleanups){\n                    try {\n                        await cleanup();\n                    } catch (err) {\n                        this.emit(\"error\", err);\n                    }\n                }\n                (_b = this.stalledCheckStopper) === null || _b === void 0 ? void 0 : _b.call(this);\n                this.closed = true;\n                this.emit(\"closed\");\n            });\n        })();\n        return await this.closing;\n    }\n    /**\n     *\n     * Manually starts the stalled checker.\n     * The check will run once as soon as this method is called, and\n     * then every opts.stalledInterval milliseconds until the worker is closed.\n     * Note: Normally you do not need to call this method, since the stalled checker\n     * is automatically started when the worker starts processing jobs after\n     * calling run. However if you want to process the jobs manually you need\n     * to call this method to start the stalled checker.\n     *\n     * @see {@link https://docs.bullmq.io/patterns/manually-fetching-jobs}\n     */ async startStalledCheckTimer() {\n        if (!this.opts.skipStalledCheck) {\n            if (!this.closing) {\n                await this.trace(enums_1.SpanKind.INTERNAL, \"startStalledCheckTimer\", this.name, async (span)=>{\n                    span === null || span === void 0 ? void 0 : span.setAttributes({\n                        [enums_1.TelemetryAttributes.WorkerId]: this.id,\n                        [enums_1.TelemetryAttributes.WorkerName]: this.opts.name\n                    });\n                    this.stalledChecker().catch((err)=>{\n                        this.emit(\"error\", err);\n                    });\n                });\n            }\n        }\n    }\n    async stalledChecker() {\n        while(!(this.closing || this.paused)){\n            await this.checkConnectionError(()=>this.moveStalledJobsToWait());\n            await new Promise((resolve)=>{\n                const timeout = setTimeout(resolve, this.opts.stalledInterval);\n                this.stalledCheckStopper = ()=>{\n                    clearTimeout(timeout);\n                    resolve();\n                };\n            });\n        }\n    }\n    /**\n     * Returns a promise that resolves when active jobs are cleared\n     *\n     * @returns\n     */ async whenCurrentJobsFinished(reconnect = true) {\n        //\n        // Force reconnection of blocking connection to abort blocking redis call immediately.\n        //\n        if (this.waiting) {\n            // If we are not going to reconnect, we will not wait for the disconnection.\n            await this.blockingConnection.disconnect(reconnect);\n        } else {\n            reconnect = false;\n        }\n        if (this.mainLoopRunning) {\n            await this.mainLoopRunning;\n        }\n        reconnect && await this.blockingConnection.reconnect();\n    }\n    async retryIfFailed(fn, opts) {\n        var _a;\n        let retry = 0;\n        const maxRetries = opts.maxRetries || Infinity;\n        do {\n            try {\n                return await fn();\n            } catch (err) {\n                (_a = opts.span) === null || _a === void 0 ? void 0 : _a.recordException(err.message);\n                if ((0, utils_1.isNotConnectionError)(err)) {\n                    // Emit error when not paused or closing; optionally swallow (no throw) when opts.onlyEmitError is set.\n                    if (!this.paused && !this.closing) {\n                        this.emit(\"error\", err);\n                    }\n                    if (opts.onlyEmitError) {\n                        return;\n                    } else {\n                        throw err;\n                    }\n                } else {\n                    if (opts.delayInMs && !this.closing && !this.closed) {\n                        await this.delay(opts.delayInMs, this.abortDelayController);\n                    }\n                    if (retry + 1 >= maxRetries) {\n                        // If we've reached max retries, throw the last error\n                        throw err;\n                    }\n                }\n            }\n        }while (++retry < maxRetries);\n    }\n    async moveStalledJobsToWait() {\n        await this.trace(enums_1.SpanKind.INTERNAL, \"moveStalledJobsToWait\", this.name, async (span)=>{\n            const stalled = await this.scripts.moveStalledJobsToWait();\n            span === null || span === void 0 ? void 0 : span.setAttributes({\n                [enums_1.TelemetryAttributes.WorkerId]: this.id,\n                [enums_1.TelemetryAttributes.WorkerName]: this.opts.name,\n                [enums_1.TelemetryAttributes.WorkerStalledJobs]: stalled\n            });\n            stalled.forEach((jobId)=>{\n                span === null || span === void 0 ? void 0 : span.addEvent(\"job stalled\", {\n                    [enums_1.TelemetryAttributes.JobId]: jobId\n                });\n                this.emit(\"stalled\", jobId, \"active\");\n            });\n        });\n    }\n    moveLimitedBackToWait(job, token) {\n        return job.moveToWait(token);\n    }\n}\nexports.Worker = Worker; //# sourceMappingURL=worker.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL2NsYXNzZXMvd29ya2VyLmpzIiwibWFwcGluZ3MiOiI7QUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsY0FBYyxHQUFHLEtBQUs7QUFDdEIsTUFBTUcsS0FBS0MsbUJBQU9BLENBQUMsY0FBSTtBQUN2QixNQUFNQyxRQUFRRCxtQkFBT0EsQ0FBQyxnQkFBSztBQUMzQixNQUFNRSxPQUFPRixtQkFBT0EsQ0FBQyxrQkFBTTtBQUMzQixNQUFNRyxTQUFTSCxtQkFBT0EsQ0FBQyx5REFBTTtBQUM3QixnRUFBZ0U7QUFDaEUsTUFBTUksMEJBQTBCSixtQkFBT0EsQ0FBQyxrRkFBdUI7QUFDL0QsTUFBTUssVUFBVUwsbUJBQU9BLENBQUMscUVBQVU7QUFDbEMsTUFBTU0sZUFBZU4sbUJBQU9BLENBQUMsZ0ZBQWM7QUFDM0MsTUFBTU8sV0FBV1AsbUJBQU9BLENBQUMsd0VBQVU7QUFDbkMsTUFBTVEsZUFBZVIsbUJBQU9BLENBQUMsZ0ZBQWM7QUFDM0MsTUFBTVMscUJBQXFCVCxtQkFBT0EsQ0FBQyw0RkFBb0I7QUFDdkQsTUFBTVUsWUFBWVYsbUJBQU9BLENBQUMsMEVBQVc7QUFDckMsTUFBTVcscUJBQXFCWCxtQkFBT0EsQ0FBQyw0RkFBb0I7QUFDdkQsTUFBTVksV0FBV1osbUJBQU9BLENBQUMsOEVBQVU7QUFDbkMsTUFBTWEsVUFBVWIsbUJBQU9BLENBQUMscUVBQVU7QUFDbEMsTUFBTWMsa0JBQWtCZCxtQkFBT0EsQ0FBQyxzRkFBaUI7QUFDakQsTUFBTWUsaUJBQWlCZixtQkFBT0EsQ0FBQyxvRkFBZ0I7QUFDL0MsTUFBTWdCLGFBQWE7QUFDbkIsdURBQXVEO0FBQ3ZELE1BQU1DLHNCQUFzQjtBQUM1Qix5Q0FBeUM7QUFDekMsTUFBTUMsd0JBQXdCO0FBQzlCOzs7Ozs7Q0FNQyxHQUNELE1BQU1wQixlQUFlUSxhQUFhYSxTQUFTO0lBQ3ZDLE9BQU9DLGlCQUFpQjtRQUNwQixPQUFPLElBQUlSLFNBQVNRLGNBQWM7SUFDdEM7SUFDQUMsWUFBWUMsSUFBSSxFQUFFQyxTQUFTLEVBQUVDLElBQUksRUFBRUMsVUFBVSxDQUFFO1FBQzNDLEtBQUssQ0FBQ0gsTUFBTTVCLE9BQU9nQyxNQUFNLENBQUNoQyxPQUFPZ0MsTUFBTSxDQUFDO1lBQUVDLFlBQVk7WUFBR0MsYUFBYTtZQUFHQyxjQUFjO1lBQU9DLGlCQUFpQjtZQUFHQyxpQkFBaUI7WUFBT0MsU0FBUztZQUFNQyxlQUFlO1FBQU0sR0FBR1QsT0FBTztZQUFFVSxvQkFBb0I7UUFBSyxJQUFJVDtRQUN2TixJQUFJLENBQUNVLG9CQUFvQixHQUFHO1FBQzVCLElBQUksQ0FBQ0MsVUFBVSxHQUFHO1FBQ2xCLElBQUksQ0FBQ0MsT0FBTyxHQUFHO1FBQ2YsSUFBSSxDQUFDQyxVQUFVLEdBQUc7UUFDbEIsSUFBSSxDQUFDQyxPQUFPLEdBQUc7UUFDZixJQUFJLENBQUNDLE9BQU8sR0FBRztRQUNmLElBQUksQ0FBQ0MsZUFBZSxHQUFHO1FBQ3ZCLElBQUksQ0FBQ2pCLFFBQVEsQ0FBQ0EsS0FBS2tCLFVBQVUsRUFBRTtZQUMzQixNQUFNLElBQUlDLE1BQU07UUFDcEI7UUFDQSxJQUFJLE9BQU8sSUFBSSxDQUFDbkIsSUFBSSxDQUFDTSxlQUFlLEtBQUssWUFDckMsSUFBSSxDQUFDTixJQUFJLENBQUNNLGVBQWUsR0FBRyxHQUFHO1lBQy9CLE1BQU0sSUFBSWEsTUFBTTtRQUNwQjtRQUNBLElBQUksT0FBTyxJQUFJLENBQUNuQixJQUFJLENBQUNvQixrQkFBa0IsS0FBSyxZQUN4QyxJQUFJLENBQUNwQixJQUFJLENBQUNvQixrQkFBa0IsR0FBRyxHQUFHO1lBQ2xDLE1BQU0sSUFBSUQsTUFBTTtRQUNwQjtRQUNBLElBQUksT0FBTyxJQUFJLENBQUNuQixJQUFJLENBQUNPLGVBQWUsS0FBSyxZQUNyQyxJQUFJLENBQUNQLElBQUksQ0FBQ08sZUFBZSxJQUFJLEdBQUc7WUFDaEMsTUFBTSxJQUFJWSxNQUFNO1FBQ3BCO1FBQ0EsSUFBSSxPQUFPLElBQUksQ0FBQ25CLElBQUksQ0FBQ0csVUFBVSxLQUFLLFlBQVksSUFBSSxDQUFDSCxJQUFJLENBQUNHLFVBQVUsSUFBSSxHQUFHO1lBQ3ZFLE1BQU0sSUFBSWdCLE1BQU07UUFDcEI7UUFDQSxJQUFJLENBQUNmLFdBQVcsR0FBRyxJQUFJLENBQUNKLElBQUksQ0FBQ0ksV0FBVztRQUN4QyxJQUFJLENBQUNKLElBQUksQ0FBQ3FCLGFBQWEsR0FDbkIsSUFBSSxDQUFDckIsSUFBSSxDQUFDcUIsYUFBYSxJQUFJLElBQUksQ0FBQ3JCLElBQUksQ0FBQ0ssWUFBWSxHQUFHO1FBQ3hELElBQUksQ0FBQ2lCLEVBQUUsR0FBRyxDQUFDLEdBQUczQyxPQUFPNEMsRUFBRTtRQUN2Qiw4Q0FBOEM7UUFDOUMsSUFBSSxDQUFDQyxXQUFXLEdBQUcsSUFBSWpDLGVBQWVrQyxXQUFXLENBQUMsSUFBSSxFQUFFO1lBQ3BESixlQUFlLElBQUksQ0FBQ3JCLElBQUksQ0FBQ3FCLGFBQWE7WUFDdENoQixjQUFjLElBQUksQ0FBQ0wsSUFBSSxDQUFDSyxZQUFZO1lBQ3BDcUIsVUFBVSxJQUFJLENBQUNKLEVBQUU7WUFDakJLLFlBQVksSUFBSSxDQUFDM0IsSUFBSSxDQUFDRixJQUFJO1FBQzlCO1FBQ0EsSUFBSUMsV0FBVztZQUNYLElBQUksT0FBT0EsY0FBYyxZQUFZO2dCQUNqQyxJQUFJLENBQUM2QixTQUFTLEdBQUc3QjtZQUNyQixPQUNLO2dCQUNELFlBQVk7Z0JBQ1osSUFBSUEscUJBQXFCdEIsTUFBTW9ELEdBQUcsRUFBRTtvQkFDaEMsSUFBSSxDQUFDdEQsR0FBR3VELFVBQVUsQ0FBQy9CLFlBQVk7d0JBQzNCLE1BQU0sSUFBSW9CLE1BQU0sQ0FBQyxJQUFJLEVBQUVwQixVQUFVLHdDQUF3QyxDQUFDO29CQUM5RTtvQkFDQUEsWUFBWUEsVUFBVWdDLElBQUk7Z0JBQzlCLE9BQ0s7b0JBQ0QsTUFBTUMscUJBQXFCO3dCQUFDO3dCQUFPO3dCQUFPO3dCQUFTO3dCQUFRO3FCQUFPO29CQUNsRSxNQUFNQyxnQkFBZ0JsQyxZQUNqQmlDLENBQUFBLG1CQUFtQkUsUUFBUSxDQUFDeEQsS0FBS3lELE9BQU8sQ0FBQ3BDLGNBQWMsS0FBSyxLQUFJO29CQUNyRSxJQUFJLENBQUN4QixHQUFHdUQsVUFBVSxDQUFDRyxnQkFBZ0I7d0JBQy9CLE1BQU0sSUFBSWQsTUFBTSxDQUFDLEtBQUssRUFBRWMsY0FBYyxlQUFlLENBQUM7b0JBQzFEO2dCQUNKO2dCQUNBLHdFQUF3RTtnQkFDeEUsTUFBTUcsVUFBVTFELEtBQUswRCxPQUFPLENBQUNDLE9BQU9DLFFBQVEsSUFBSUM7Z0JBQ2hELE1BQU1DLHdCQUF3QjlELEtBQUsrRCxJQUFJLENBQUNMLFNBQVM7Z0JBQ2pELE1BQU1NLHVCQUF1QmhFLEtBQUsrRCxJQUFJLENBQUNMLFNBQVM7Z0JBQ2hELElBQUlPLGVBQWUsSUFBSSxDQUFDM0MsSUFBSSxDQUFDNEMsZ0JBQWdCLEdBQ3ZDSix3QkFDQUU7Z0JBQ04sSUFBSTtvQkFDQW5FLEdBQUdzRSxRQUFRLENBQUNGLGVBQWUsaUNBQWlDO2dCQUNoRSxFQUNBLE9BQU9HLEdBQUc7b0JBQ04sTUFBTUMsV0FBVyxJQUFJLENBQUMvQyxJQUFJLENBQUM0QyxnQkFBZ0IsR0FDckMsbUJBQ0E7b0JBQ05ELGVBQWVqRSxLQUFLK0QsSUFBSSxDQUFDTyxRQUFRQyxHQUFHLElBQUksQ0FBQyxpQkFBaUIsRUFBRUYsU0FBUyxDQUFDO29CQUN0RXhFLEdBQUdzRSxRQUFRLENBQUNGO2dCQUNoQjtnQkFDQSxJQUFJLENBQUNPLFNBQVMsR0FBRyxJQUFJbEUsYUFBYW1FLFNBQVMsQ0FBQztvQkFDeENKLFVBQVVKO29CQUNWQyxrQkFBa0IsSUFBSSxDQUFDNUMsSUFBSSxDQUFDNEMsZ0JBQWdCO29CQUM1Q1EsbUJBQW1CLElBQUksQ0FBQ3BELElBQUksQ0FBQ29ELGlCQUFpQjtvQkFDOUNDLHNCQUFzQixJQUFJLENBQUNyRCxJQUFJLENBQUNxRCxvQkFBb0I7Z0JBQ3hEO2dCQUNBLElBQUksQ0FBQ3pCLFNBQVMsR0FBRyxDQUFDLEdBQUcxQyxVQUFVb0UsT0FBTyxFQUFFdkQsV0FBVyxJQUFJLENBQUNtRCxTQUFTLEVBQUVLLElBQUksQ0FBQyxJQUFJO1lBQ2hGO1lBQ0EsSUFBSSxJQUFJLENBQUN2RCxJQUFJLENBQUNRLE9BQU8sRUFBRTtnQkFDbkIsSUFBSSxDQUFDZ0QsR0FBRyxHQUFHQyxLQUFLLENBQUNDLENBQUFBLFFBQVMsSUFBSSxDQUFDQyxJQUFJLENBQUMsU0FBU0Q7WUFDakQ7UUFDSjtRQUNBLE1BQU1FLGlCQUFpQixJQUFJLENBQUNDLFVBQVUsS0FBTSxLQUFJLENBQUM3RCxJQUFJLENBQUNGLElBQUksR0FBRyxDQUFDLEdBQUcsRUFBRSxJQUFJLENBQUNFLElBQUksQ0FBQ0YsSUFBSSxDQUFDLENBQUMsR0FBRyxFQUFDO1FBQ3ZGLElBQUksQ0FBQ1ksa0JBQWtCLEdBQUcsSUFBSXpCLG1CQUFtQjZFLGVBQWUsQ0FBQyxDQUFDLEdBQUdqRixRQUFRa0YsZUFBZSxFQUFFL0QsS0FBS2tCLFVBQVUsSUFDdkdsQixLQUFLa0IsVUFBVSxDQUFDOEMsU0FBUyxDQUFDO1lBQUVKO1FBQWUsS0FDM0MxRixPQUFPZ0MsTUFBTSxDQUFDaEMsT0FBT2dDLE1BQU0sQ0FBQyxDQUFDLEdBQUdGLEtBQUtrQixVQUFVLEdBQUc7WUFBRTBDO1FBQWUsSUFBSTtZQUN6RUssUUFBUTtZQUNSQyxVQUFVO1lBQ1ZDLGtCQUFrQm5FLEtBQUttRSxnQkFBZ0I7UUFDM0M7UUFDQSxJQUFJLENBQUN6RCxrQkFBa0IsQ0FBQzBELEVBQUUsQ0FBQyxTQUFTVixDQUFBQSxRQUFTLElBQUksQ0FBQ0MsSUFBSSxDQUFDLFNBQVNEO1FBQ2hFLElBQUksQ0FBQ2hELGtCQUFrQixDQUFDMEQsRUFBRSxDQUFDLFNBQVMsSUFBTUMsV0FBVyxJQUFNLElBQUksQ0FBQ1YsSUFBSSxDQUFDLFVBQVU7SUFDbkY7SUFDQTs7O0tBR0MsR0FDRCxNQUFNVyxlQUFlQyxNQUFNLEVBQUVDLE1BQU0sRUFBRUMsUUFBUSxFQUFFO1FBQzNDLE9BQU8sSUFBSSxDQUFDQyxPQUFPLENBQUNDLFdBQVcsQ0FBQ0osUUFBUUMsUUFBUUM7SUFDcEQ7SUFDQWQsS0FBS2lCLEtBQUssRUFBRSxHQUFHQyxJQUFJLEVBQUU7UUFDakIsT0FBTyxLQUFLLENBQUNsQixLQUFLaUIsVUFBVUM7SUFDaEM7SUFDQUMsSUFBSUMsU0FBUyxFQUFFQyxRQUFRLEVBQUU7UUFDckIsS0FBSyxDQUFDRixJQUFJQyxXQUFXQztRQUNyQixPQUFPLElBQUk7SUFDZjtJQUNBWixHQUFHUSxLQUFLLEVBQUVJLFFBQVEsRUFBRTtRQUNoQixLQUFLLENBQUNaLEdBQUdRLE9BQU9JO1FBQ2hCLE9BQU8sSUFBSTtJQUNmO0lBQ0FDLEtBQUtMLEtBQUssRUFBRUksUUFBUSxFQUFFO1FBQ2xCLEtBQUssQ0FBQ0MsS0FBS0wsT0FBT0k7UUFDbEIsT0FBTyxJQUFJO0lBQ2Y7SUFDQUUsZUFBZUMsR0FBRyxFQUFFQyxLQUFLLEVBQUU7UUFDdkIsT0FBTyxJQUFJLENBQUN4RCxTQUFTLENBQUN1RCxLQUFLQztJQUMvQjtJQUNBQyxVQUFVQyxJQUFJLEVBQUVDLEtBQUssRUFBRTtRQUNuQixPQUFPLElBQUksQ0FBQ0MsR0FBRyxDQUFDQyxRQUFRLENBQUMsSUFBSSxFQUFFSCxNQUFNQztJQUN6QztJQUNBOzs7OztLQUtDLEdBQ0QsTUFBTUcsaUJBQWlCO1FBQ25CLE1BQU0sS0FBSyxDQUFDQTtRQUNaLE9BQU8sSUFBSSxDQUFDaEYsa0JBQWtCLENBQUNpRixNQUFNO0lBQ3pDO0lBQ0EsSUFBSXZGLFlBQVlBLFdBQVcsRUFBRTtRQUN6QixJQUFJLE9BQU9BLGdCQUFnQixZQUN2QkEsY0FBYyxLQUNkLENBQUN3RixTQUFTeEYsY0FBYztZQUN4QixNQUFNLElBQUllLE1BQU07UUFDcEI7UUFDQSxJQUFJLENBQUMwRSxZQUFZLEdBQUd6RjtJQUN4QjtJQUNBLElBQUlBLGNBQWM7UUFDZCxPQUFPLElBQUksQ0FBQ3lGLFlBQVk7SUFDNUI7SUFDQSxJQUFJQyxTQUFTO1FBQ1QsT0FBTyxJQUFJQyxRQUFRLE9BQU9DO1lBQ3RCLElBQUksQ0FBQyxJQUFJLENBQUNDLE9BQU8sRUFBRTtnQkFDZixNQUFNL0UsYUFBYSxNQUFNLElBQUksQ0FBQ3lFLE1BQU07Z0JBQ3BDLElBQUksQ0FBQ00sT0FBTyxHQUFHLElBQUlsSCxTQUFTbUgsTUFBTSxDQUFDLElBQUksQ0FBQ3BHLElBQUksRUFBRTVCLE9BQU9nQyxNQUFNLENBQUNoQyxPQUFPZ0MsTUFBTSxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUNGLElBQUksR0FBRztvQkFBRWtCO2dCQUFXO2dCQUN2RyxJQUFJLENBQUMrRSxPQUFPLENBQUM3QixFQUFFLENBQUMsU0FBUytCLENBQUFBLElBQUssSUFBSSxDQUFDeEMsSUFBSSxDQUFDSixJQUFJLENBQUMsSUFBSSxFQUFFNEM7WUFDdkQ7WUFDQUgsUUFBUSxJQUFJLENBQUNDLE9BQU87UUFDeEI7SUFDSjtJQUNBLElBQUlHLGVBQWU7UUFDZixPQUFPLElBQUlMLFFBQVEsT0FBT0M7WUFDdEIsSUFBSSxDQUFDLElBQUksQ0FBQ0ssYUFBYSxFQUFFO2dCQUNyQixNQUFNbkYsYUFBYSxNQUFNLElBQUksQ0FBQ3lFLE1BQU07Z0JBQ3BDLElBQUksQ0FBQ1UsYUFBYSxHQUFHLElBQUkvRyxnQkFBZ0JnSCxZQUFZLENBQUMsSUFBSSxDQUFDeEcsSUFBSSxFQUFFNUIsT0FBT2dDLE1BQU0sQ0FBQ2hDLE9BQU9nQyxNQUFNLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQ0YsSUFBSSxHQUFHO29CQUFFa0I7Z0JBQVc7Z0JBQzFILElBQUksQ0FBQ21GLGFBQWEsQ0FBQ2pDLEVBQUUsQ0FBQyxTQUFTK0IsQ0FBQUEsSUFBSyxJQUFJLENBQUN4QyxJQUFJLENBQUNKLElBQUksQ0FBQyxJQUFJLEVBQUU0QztZQUM3RDtZQUNBSCxRQUFRLElBQUksQ0FBQ0ssYUFBYTtRQUM5QjtJQUNKO0lBQ0EsTUFBTTdDLE1BQU07UUFDUixJQUFJLENBQUMsSUFBSSxDQUFDNUIsU0FBUyxFQUFFO1lBQ2pCLE1BQU0sSUFBSVQsTUFBTTtRQUNwQjtRQUNBLElBQUksSUFBSSxDQUFDSCxPQUFPLEVBQUU7WUFDZCxNQUFNLElBQUlHLE1BQU07UUFDcEI7UUFDQSxJQUFJO1lBQ0EsSUFBSSxDQUFDSCxPQUFPLEdBQUc7WUFDZixJQUFJLElBQUksQ0FBQ3VGLE9BQU8sSUFBSSxJQUFJLENBQUNDLE1BQU0sRUFBRTtnQkFDN0I7WUFDSjtZQUNBLE1BQU0sSUFBSSxDQUFDQyxzQkFBc0I7WUFDakMsSUFBSSxDQUFDLElBQUksQ0FBQ3pHLElBQUksQ0FBQzBHLGVBQWUsRUFBRTtnQkFDNUIsSUFBSSxDQUFDbEYsV0FBVyxDQUFDbUYsS0FBSztZQUMxQjtZQUNBLE1BQU1oQixTQUFTLE1BQU0sSUFBSSxDQUFDQSxNQUFNO1lBQ2hDLE1BQU1pQixVQUFVLE1BQU0sSUFBSSxDQUFDbEcsa0JBQWtCLENBQUNpRixNQUFNO1lBQ3BELElBQUksQ0FBQzFFLGVBQWUsR0FBRyxJQUFJLENBQUM0RixRQUFRLENBQUNsQixRQUFRaUI7WUFDN0MsMERBQTBEO1lBQzFELE1BQU0sSUFBSSxDQUFDM0YsZUFBZTtRQUM5QixTQUNRO1lBQ0osSUFBSSxDQUFDRCxPQUFPLEdBQUc7UUFDbkI7SUFDSjtJQUNBLE1BQU04RixtQkFBbUI7UUFDckIsSUFBSUM7UUFDSixNQUFNakcsYUFBYSxJQUFJLENBQUNBLFVBQVU7UUFDbEMsSUFBSUEsYUFBYWtHLEtBQUtDLEdBQUcsSUFBSTtZQUN4QkYsQ0FBQUEsS0FBSyxJQUFJLENBQUNwRyxvQkFBb0IsTUFBTSxRQUFRb0csT0FBTyxLQUFLLElBQUksS0FBSyxJQUFJQSxHQUFHRyxLQUFLO1lBQzlFLElBQUksQ0FBQ3ZHLG9CQUFvQixHQUFHLElBQUkvQix3QkFBd0J1SSxlQUFlO1lBQ3ZFLE1BQU1DLFFBQVEsSUFBSSxDQUFDQyxpQkFBaUIsQ0FBQ3ZHLGFBQWFrRyxLQUFLQyxHQUFHO1lBQzFELE1BQU0sSUFBSSxDQUFDRyxLQUFLLENBQUNBLE9BQU8sSUFBSSxDQUFDekcsb0JBQW9CO1FBQ3JEO0lBQ0o7SUFDQTs7OztLQUlDLEdBQ0QsTUFBTWtHLFNBQVNsQixNQUFNLEVBQUVpQixPQUFPLEVBQUU7UUFDNUIsTUFBTVUsaUJBQWlCLElBQUluSSxtQkFBbUJvSSxjQUFjO1FBQzVELElBQUlDLGVBQWU7UUFDbkIsTUFBTyxDQUFFLElBQUksQ0FBQ2pCLE9BQU8sSUFBSSxDQUFDLElBQUksQ0FBQ0MsTUFBTSxJQUFLYyxlQUFlRyxRQUFRLEtBQUssRUFBRztZQUNyRTs7O2FBR0MsR0FDRCxNQUFPLENBQUMsSUFBSSxDQUFDbEIsT0FBTyxJQUNoQixDQUFDLElBQUksQ0FBQ0MsTUFBTSxJQUNaLENBQUMsSUFBSSxDQUFDekYsT0FBTyxJQUNidUcsZUFBZUcsUUFBUSxLQUFLLElBQUksQ0FBQzVCLFlBQVksSUFDN0MsQ0FBQyxJQUFJLENBQUM2QixhQUFhLEdBQUk7Z0JBQ3ZCLE1BQU10QyxRQUFRLENBQUMsRUFBRSxJQUFJLENBQUM5RCxFQUFFLENBQUMsQ0FBQyxFQUFFa0csZUFBZSxDQUFDO2dCQUM1QyxNQUFNRyxhQUFhLElBQUksQ0FBQ0MsYUFBYSxDQUFDLElBQU0sSUFBSSxDQUFDQyxXQUFXLENBQUNsQyxRQUFRaUIsU0FBU3hCLE9BQU87d0JBQUUwQyxPQUFPO29CQUFLLElBQUk7b0JBQ25HQyxXQUFXLElBQUksQ0FBQy9ILElBQUksQ0FBQ1MsYUFBYTtvQkFDbEN1SCxlQUFlO2dCQUNuQjtnQkFDQVYsZUFBZVcsR0FBRyxDQUFDTjtnQkFDbkIsSUFBSSxJQUFJLENBQUM1RyxPQUFPLElBQUl1RyxlQUFlRyxRQUFRLEtBQUssR0FBRztvQkFFL0M7Z0JBQ0o7Z0JBQ0EsZ0dBQWdHO2dCQUNoRywwQ0FBMEM7Z0JBQzFDLE1BQU10QyxNQUFNLE1BQU13QztnQkFDbEIsOEVBQThFO2dCQUM5RSxJQUFJLENBQUN4QyxPQUFPbUMsZUFBZUcsUUFBUSxLQUFLLEdBQUc7b0JBQ3ZDO2dCQUNKO2dCQUNBLHFHQUFxRztnQkFDckcsMkJBQTJCO2dCQUMzQixJQUFJLElBQUksQ0FBQzdHLFVBQVUsRUFBRTtvQkFDakI7Z0JBQ0o7WUFDSjtZQUNBLHNGQUFzRjtZQUN0RixrQ0FBa0M7WUFDbEMsSUFBSXVFO1lBQ0osR0FBRztnQkFDQ0EsTUFBTSxNQUFNbUMsZUFBZVksS0FBSztZQUNwQyxRQUFTLENBQUMvQyxPQUFPbUMsZUFBZWEsU0FBUyxLQUFLLEdBQUc7WUFDakQsSUFBSWhELEtBQUs7Z0JBQ0wsTUFBTUMsUUFBUUQsSUFBSUMsS0FBSztnQkFDdkJrQyxlQUFlVyxHQUFHLENBQUMsSUFBSSxDQUFDRyxVQUFVLENBQUNqRCxLQUFLQyxPQUFPLElBQU1rQyxlQUFlRyxRQUFRLE1BQU0sSUFBSSxDQUFDNUIsWUFBWTtZQUN2RyxPQUNLLElBQUl5QixlQUFlYSxTQUFTLE9BQU8sR0FBRztnQkFDdkMsTUFBTSxJQUFJLENBQUNyQixnQkFBZ0I7WUFDL0I7UUFDSjtJQUNKO0lBQ0E7Ozs7S0FJQyxHQUNELE1BQU11QixXQUFXakQsS0FBSyxFQUFFLEVBQUUwQyxRQUFRLElBQUksRUFBRSxHQUFHLENBQUMsQ0FBQyxFQUFFO1FBQzNDLElBQUlmLElBQUl1QjtRQUNSLE1BQU1DLFVBQVUsTUFBTSxJQUFJLENBQUNWLFdBQVcsQ0FBQyxNQUFNLElBQUksQ0FBQ2xDLE1BQU0sRUFBRSxNQUFNLElBQUksQ0FBQ2pGLGtCQUFrQixDQUFDaUYsTUFBTSxFQUFFUCxPQUFPO1lBQUUwQztRQUFNO1FBQy9HLE9BQU8sSUFBSSxDQUFDVSxLQUFLLENBQUNuSixRQUFRb0osUUFBUSxDQUFDQyxRQUFRLEVBQUUsY0FBYyxJQUFJLENBQUM1SSxJQUFJLEVBQUUsT0FBTzZJO1lBQ3pFQSxTQUFTLFFBQVFBLFNBQVMsS0FBSyxJQUFJLEtBQUssSUFBSUEsS0FBS0MsYUFBYSxDQUFDO2dCQUMzRCxDQUFDdkosUUFBUXdKLG1CQUFtQixDQUFDQyxRQUFRLENBQUMsRUFBRSxJQUFJLENBQUN4SCxFQUFFO2dCQUMvQyxDQUFDakMsUUFBUXdKLG1CQUFtQixDQUFDRSxTQUFTLENBQUMsRUFBRSxJQUFJLENBQUNqSixJQUFJO2dCQUNsRCxDQUFDVCxRQUFRd0osbUJBQW1CLENBQUNHLFVBQVUsQ0FBQyxFQUFFLElBQUksQ0FBQ2hKLElBQUksQ0FBQ0YsSUFBSTtnQkFDeEQsQ0FBQ1QsUUFBUXdKLG1CQUFtQixDQUFDSSxhQUFhLENBQUMsRUFBRUMsS0FBS0MsU0FBUyxDQUFDO29CQUFFckI7Z0JBQU07Z0JBQ3BFLENBQUN6SSxRQUFRd0osbUJBQW1CLENBQUNPLEtBQUssQ0FBQyxFQUFFYixZQUFZLFFBQVFBLFlBQVksS0FBSyxJQUFJLEtBQUssSUFBSUEsUUFBUWpILEVBQUU7WUFDckc7WUFDQSxPQUFPaUg7UUFDWCxHQUFHLENBQUNELEtBQUssQ0FBQ3ZCLEtBQUt3QixZQUFZLFFBQVFBLFlBQVksS0FBSyxJQUFJLEtBQUssSUFBSUEsUUFBUXZJLElBQUksTUFBTSxRQUFRK0csT0FBTyxLQUFLLElBQUksS0FBSyxJQUFJQSxHQUFHc0MsU0FBUyxNQUFNLFFBQVFmLE9BQU8sS0FBSyxJQUFJLEtBQUssSUFBSUEsR0FBR2dCLFFBQVE7SUFDdEw7SUFDQSxNQUFNekIsWUFBWWxDLE1BQU0sRUFBRWlCLE9BQU8sRUFBRXhCLEtBQUssRUFBRSxFQUFFMEMsUUFBUSxJQUFJLEVBQUUsR0FBRyxDQUFDLENBQUMsRUFBRTtRQUM3RCxJQUFJLElBQUksQ0FBQ3RCLE1BQU0sRUFBRTtZQUNiO1FBQ0o7UUFDQSxJQUFJLElBQUksQ0FBQ0QsT0FBTyxFQUFFO1lBQ2Q7UUFDSjtRQUNBLElBQUksSUFBSSxDQUFDMUYsT0FBTyxJQUFJaUgsU0FBUyxDQUFDLElBQUksQ0FBQ2hILFVBQVUsSUFBSSxDQUFDLElBQUksQ0FBQ0MsT0FBTyxFQUFFO1lBQzVELElBQUksQ0FBQ0EsT0FBTyxHQUFHLElBQUksQ0FBQ3dJLFVBQVUsQ0FBQzNDLFNBQVMsSUFBSSxDQUFDaEcsVUFBVTtZQUN2RCxJQUFJO2dCQUNBLElBQUksQ0FBQ0EsVUFBVSxHQUFHLE1BQU0sSUFBSSxDQUFDRyxPQUFPO2dCQUNwQyxJQUFJLElBQUksQ0FBQ0gsVUFBVSxJQUFJLEtBQUssSUFBSSxDQUFDQSxVQUFVLEdBQUdvRyxLQUFLQyxHQUFHLEtBQUssR0FBRztvQkFDMUQsT0FBTyxNQUFNLElBQUksQ0FBQ3VDLFlBQVksQ0FBQzdELFFBQVFQLE9BQU8sSUFBSSxDQUFDcEYsSUFBSSxDQUFDRixJQUFJO2dCQUNoRTtZQUNKLFNBQ1E7Z0JBQ0osSUFBSSxDQUFDaUIsT0FBTyxHQUFHO1lBQ25CO1FBQ0osT0FDSztZQUNELElBQUksQ0FBQyxJQUFJLENBQUMyRyxhQUFhLElBQUk7Z0JBQ3ZCLE9BQU8sSUFBSSxDQUFDOEIsWUFBWSxDQUFDN0QsUUFBUVAsT0FBTyxJQUFJLENBQUNwRixJQUFJLENBQUNGLElBQUk7WUFDMUQ7UUFDSjtJQUNKO0lBQ0E7Ozs7S0FJQyxHQUNELE1BQU0ySixVQUFVQyxZQUFZLEVBQUU7UUFDMUIsTUFBTSxJQUFJLENBQUNsQixLQUFLLENBQUNuSixRQUFRb0osUUFBUSxDQUFDQyxRQUFRLEVBQUUsYUFBYSxJQUFJLENBQUM1SSxJQUFJLEVBQUUsT0FBTzZJO1lBQ3ZFQSxTQUFTLFFBQVFBLFNBQVMsS0FBSyxJQUFJLEtBQUssSUFBSUEsS0FBS0MsYUFBYSxDQUFDO2dCQUMzRCxDQUFDdkosUUFBUXdKLG1CQUFtQixDQUFDQyxRQUFRLENBQUMsRUFBRSxJQUFJLENBQUN4SCxFQUFFO2dCQUMvQyxDQUFDakMsUUFBUXdKLG1CQUFtQixDQUFDYyxlQUFlLENBQUMsRUFBRUQ7WUFDbkQ7WUFDQSxNQUFNLElBQUksQ0FBQy9ELE1BQU0sQ0FBQ2lFLElBQUksQ0FBQ2pFLENBQUFBLFNBQVVBLE9BQU9rRSxHQUFHLENBQUMsSUFBSSxDQUFDQyxJQUFJLENBQUNDLE9BQU8sRUFBRUMsT0FBT0MsZ0JBQWdCLEVBQUUsTUFBTVA7UUFDbEc7SUFDSjtJQUNBLElBQUlRLHNCQUFzQjtRQUN0QixPQUFPLElBQUksQ0FBQ3hKLGtCQUFrQixDQUFDeUosWUFBWSxDQUFDQyxjQUFjLEdBQ3BEOzttREFFcUMsR0FDbkMsUUFDRjtJQUNWO0lBQ0ExQyxnQkFBZ0I7UUFDWixPQUFPLElBQUksQ0FBQzVHLFVBQVUsR0FBR2tHLEtBQUtDLEdBQUc7SUFDckM7SUFDQSxNQUFNdUMsYUFBYTdELE1BQU0sRUFBRVAsS0FBSyxFQUFFdEYsSUFBSSxFQUFFO1FBQ3BDLE1BQU0sQ0FBQ3VLLFNBQVMvSSxJQUFJZ0osZ0JBQWdCQyxXQUFXLEdBQUcsTUFBTSxJQUFJLENBQUM3RixPQUFPLENBQUM4RSxZQUFZLENBQUM3RCxRQUFRUCxPQUFPdEY7UUFDakcsSUFBSSxDQUFDMEssWUFBWSxDQUFDRixnQkFBZ0JDO1FBQ2xDLE9BQU8sSUFBSSxDQUFDRSxrQkFBa0IsQ0FBQ0osU0FBUy9JLElBQUk4RDtJQUNoRDtJQUNBLE1BQU1tRSxXQUFXM0MsT0FBTyxFQUFFaEcsVUFBVSxFQUFFO1FBQ2xDLElBQUksSUFBSSxDQUFDNEYsTUFBTSxFQUFFO1lBQ2IsT0FBT2tFO1FBQ1g7UUFDQSxJQUFJQztRQUNKLElBQUk7WUFDQSxJQUFJLENBQUMsSUFBSSxDQUFDcEUsT0FBTyxJQUFJLENBQUMsSUFBSSxDQUFDbUIsYUFBYSxJQUFJO2dCQUN4QyxJQUFJa0QsZUFBZSxJQUFJLENBQUNDLGVBQWUsQ0FBQ2pLO2dCQUN4QyxJQUFJZ0ssZUFBZSxHQUFHO29CQUNsQkEsZUFBZSxJQUFJLENBQUNsSyxrQkFBa0IsQ0FBQ3lKLFlBQVksQ0FBQ1csZ0JBQWdCLEdBQzlERixlQUNBRyxLQUFLQyxJQUFJLENBQUNKO29CQUNoQixzRUFBc0U7b0JBQ3RFLGlFQUFpRTtvQkFDakUsNkNBQTZDO29CQUM3Q0QsVUFBVXRHLFdBQVc7d0JBQ2pCdUMsUUFBUXFFLFVBQVUsQ0FBQyxDQUFDLElBQUksQ0FBQzFFLE9BQU87b0JBQ3BDLEdBQUdxRSxlQUFlLE9BQU87b0JBQ3pCLElBQUksQ0FBQ0osWUFBWSxJQUFJLDhEQUE4RDtvQkFDbkYsOEVBQThFO29CQUM5RSxpQkFBaUI7b0JBQ2pCLE1BQU1VLFNBQVMsTUFBTXRFLFFBQVF1RSxRQUFRLENBQUMsSUFBSSxDQUFDckIsSUFBSSxDQUFDc0IsTUFBTSxFQUFFUjtvQkFDeEQsSUFBSU0sUUFBUTt3QkFDUixNQUFNLENBQUNHLE1BQU1DLFFBQVFDLE1BQU0sR0FBR0w7d0JBQzlCLElBQUlJLFFBQVE7NEJBQ1IsTUFBTUUsZ0JBQWdCQyxTQUFTRjs0QkFDL0IsbUZBQW1GOzRCQUNuRiw4Q0FBOEM7NEJBQzlDLElBQUkzSyxjQUFjNEssZ0JBQWdCNUssWUFBWTtnQ0FDMUMsT0FBT0E7NEJBQ1g7NEJBQ0EsT0FBTzRLO3dCQUNYO29CQUNKO2dCQUNKO2dCQUNBLE9BQU87WUFDWDtRQUNKLEVBQ0EsT0FBTzlILE9BQU87WUFDVixJQUFJLENBQUMsR0FBRzdFLFFBQVE2TSxvQkFBb0IsRUFBRWhJLFFBQVE7Z0JBQzFDLElBQUksQ0FBQ0MsSUFBSSxDQUFDLFNBQVNEO1lBQ3ZCO1lBQ0EsSUFBSSxDQUFDLElBQUksQ0FBQzZDLE9BQU8sRUFBRTtnQkFDZixNQUFNLElBQUksQ0FBQ2EsS0FBSztZQUNwQjtRQUNKLFNBQ1E7WUFDSnVFLGFBQWFoQjtRQUNqQjtRQUNBLE9BQU9EO0lBQ1g7SUFDQUcsZ0JBQWdCakssVUFBVSxFQUFFO1FBQ3hCLE1BQU1aLE9BQU8sSUFBSSxDQUFDQSxJQUFJO1FBQ3RCLDhCQUE4QjtRQUM5QixJQUFJWSxZQUFZO1lBQ1osTUFBTWdMLGFBQWFoTCxhQUFhb0csS0FBS0MsR0FBRztZQUN4Qyx5Q0FBeUM7WUFDekMsSUFBSTJFLGNBQWMsR0FBRztnQkFDakIsT0FBT0E7WUFDWCxPQUNLLElBQUlBLGFBQWEsSUFBSSxDQUFDMUIsbUJBQW1CLEdBQUcsTUFBTTtnQkFDbkQsT0FBTyxJQUFJLENBQUNBLG1CQUFtQjtZQUNuQyxPQUNLO2dCQUNELDhEQUE4RDtnQkFDOUQsb0VBQW9FO2dCQUNwRSwrREFBK0Q7Z0JBQy9ELE9BQU9hLEtBQUtjLEdBQUcsQ0FBQ0QsYUFBYSxNQUFNbk07WUFDdkM7UUFDSixPQUNLO1lBQ0QsT0FBT3NMLEtBQUtlLEdBQUcsQ0FBQzlMLEtBQUtHLFVBQVUsRUFBRSxJQUFJLENBQUMrSixtQkFBbUI7UUFDN0Q7SUFDSjtJQUNBN0Msa0JBQWtCRCxLQUFLLEVBQUU7UUFDckIsc0RBQXNEO1FBQ3RELDhEQUE4RDtRQUM5RCxPQUFPMkQsS0FBS2MsR0FBRyxDQUFDekUsT0FBTzFIO0lBQzNCO0lBQ0E7OztLQUdDLEdBQ0QsTUFBTTBILE1BQU0yRSxZQUFZLEVBQUVDLGVBQWUsRUFBRTtRQUN2QyxNQUFNLENBQUMsR0FBR25OLFFBQVF1SSxLQUFLLEVBQUUyRSxnQkFBZ0JsTixRQUFRb04sWUFBWSxFQUFFRDtJQUNuRTtJQUNBeEIsYUFBYTBCLGFBQWEsQ0FBQyxFQUFFM0IsYUFBYSxDQUFDLEVBQUU7UUFDekMsTUFBTTRCLGVBQWVwQixLQUFLZSxHQUFHLENBQUNJLFlBQVk7UUFDMUMsSUFBSUMsZUFBZSxHQUFHO1lBQ2xCLElBQUksQ0FBQ3JMLFVBQVUsR0FBR2tHLEtBQUtDLEdBQUcsS0FBS2tGO1FBQ25DLE9BQ0s7WUFDRCxJQUFJLENBQUNyTCxVQUFVLEdBQUc7UUFDdEI7UUFDQSxJQUFJLENBQUNGLFVBQVUsR0FBR21LLEtBQUtlLEdBQUcsQ0FBQ3ZCLFlBQVksTUFBTTtJQUNqRDtJQUNBLE1BQU1FLG1CQUFtQkosT0FBTyxFQUFFOUUsS0FBSyxFQUFFSCxLQUFLLEVBQUU7UUFDNUMsSUFBSSxDQUFDaUYsU0FBUztZQUNWLElBQUksQ0FBQyxJQUFJLENBQUN4SixPQUFPLEVBQUU7Z0JBQ2YsSUFBSSxDQUFDOEMsSUFBSSxDQUFDO2dCQUNWLElBQUksQ0FBQzlDLE9BQU8sR0FBRztZQUNuQjtRQUNKLE9BQ0s7WUFDRCxJQUFJLENBQUNBLE9BQU8sR0FBRztZQUNmLE1BQU1zRSxNQUFNLElBQUksQ0FBQ0UsU0FBUyxDQUFDZ0YsU0FBUzlFO1lBQ3BDSixJQUFJQyxLQUFLLEdBQUdBO1lBQ1osSUFBSTtnQkFDQSxNQUFNLElBQUksQ0FBQ3dDLGFBQWEsQ0FBQztvQkFDckIsSUFBSXpDLElBQUlpSCxZQUFZLElBQUlqSCxJQUFJaUgsWUFBWSxDQUFDQyxLQUFLLENBQUMsS0FBS0MsTUFBTSxHQUFHLEdBQUc7d0JBQzVELE1BQU1sRyxlQUFlLE1BQU0sSUFBSSxDQUFDQSxZQUFZO3dCQUM1QyxNQUFNQSxhQUFhbUcsa0JBQWtCLENBQ3JDLGdEQUFnRDt3QkFDaEQsd0RBQXdEO3dCQUN4RHBILElBQUlpSCxZQUFZLEVBQUVqSCxJQUFJbkYsSUFBSSxDQUFDOEYsTUFBTSxFQUFFWCxJQUFJckYsSUFBSSxFQUFFcUYsSUFBSUcsSUFBSSxFQUFFSCxJQUFJbkYsSUFBSSxFQUFFOzRCQUFFd00sVUFBVTs0QkFBT0MsWUFBWXRILElBQUk3RCxFQUFFO3dCQUFDO29CQUMzRyxPQUNLLElBQUk2RCxJQUFJbkYsSUFBSSxDQUFDOEYsTUFBTSxFQUFFO3dCQUN0QixNQUFNQSxTQUFTLE1BQU0sSUFBSSxDQUFDQSxNQUFNO3dCQUNoQyxNQUFNQSxPQUFPNEcsbUJBQW1CLENBQUN2SCxJQUFJckYsSUFBSSxFQUFFcUYsSUFBSUcsSUFBSSxFQUFFSCxJQUFJbkYsSUFBSSxFQUFFOzRCQUMzRHdNLFVBQVU7d0JBQ2Q7b0JBQ0o7Z0JBQ0osR0FBRztvQkFBRXpFLFdBQVcsSUFBSSxDQUFDL0gsSUFBSSxDQUFDUyxhQUFhO2dCQUFDO1lBQzVDLEVBQ0EsT0FBT2tNLEtBQUs7Z0JBQ1Isc0VBQXNFO2dCQUN0RSxpRUFBaUU7Z0JBQ2pFLE1BQU1DLGVBQWVELGVBQWV4TCxRQUFRd0wsSUFBSUUsT0FBTyxHQUFHQyxPQUFPSDtnQkFDakUsTUFBTUksa0JBQWtCLElBQUk1TCxNQUFNLENBQUMsaURBQWlELEVBQUV5TCxhQUFhLENBQUM7Z0JBQ3BHLElBQUksQ0FBQ2pKLElBQUksQ0FBQyxTQUFTb0o7Z0JBQ25CLHdEQUF3RDtnQkFDeEQsT0FBT0M7WUFDWDtZQUNBLE9BQU83SDtRQUNYO0lBQ0o7SUFDQSxNQUFNaUQsV0FBV2pELEdBQUcsRUFBRUMsS0FBSyxFQUFFNkgsb0JBQW9CLElBQU0sSUFBSSxFQUFFO1FBQ3pELElBQUlsRyxJQUFJdUI7UUFDUixNQUFNNEUseUJBQXlCLENBQUM1RSxLQUFLLENBQUN2QixLQUFLNUIsSUFBSW5GLElBQUksTUFBTSxRQUFRK0csT0FBTyxLQUFLLElBQUksS0FBSyxJQUFJQSxHQUFHc0MsU0FBUyxNQUFNLFFBQVFmLE9BQU8sS0FBSyxJQUFJLEtBQUssSUFBSUEsR0FBR2dCLFFBQVE7UUFDeEosT0FBTyxJQUFJLENBQUNkLEtBQUssQ0FBQ25KLFFBQVFvSixRQUFRLENBQUMwRSxRQUFRLEVBQUUsV0FBVyxJQUFJLENBQUNyTixJQUFJLEVBQUUsT0FBTzZJO1lBQ3RFQSxTQUFTLFFBQVFBLFNBQVMsS0FBSyxJQUFJLEtBQUssSUFBSUEsS0FBS0MsYUFBYSxDQUFDO2dCQUMzRCxDQUFDdkosUUFBUXdKLG1CQUFtQixDQUFDQyxRQUFRLENBQUMsRUFBRSxJQUFJLENBQUN4SCxFQUFFO2dCQUMvQyxDQUFDakMsUUFBUXdKLG1CQUFtQixDQUFDRyxVQUFVLENBQUMsRUFBRSxJQUFJLENBQUNoSixJQUFJLENBQUNGLElBQUk7Z0JBQ3hELENBQUNULFFBQVF3SixtQkFBbUIsQ0FBQ08sS0FBSyxDQUFDLEVBQUVqRSxJQUFJN0QsRUFBRTtnQkFDM0MsQ0FBQ2pDLFFBQVF3SixtQkFBbUIsQ0FBQ3VFLE9BQU8sQ0FBQyxFQUFFakksSUFBSXJGLElBQUk7Z0JBQy9DLENBQUNULFFBQVF3SixtQkFBbUIsQ0FBQ3dFLGVBQWUsQ0FBQyxFQUFFbEksSUFBSW1JLFlBQVk7WUFDbkU7WUFDQSxJQUFJLENBQUMzSixJQUFJLENBQUMsVUFBVXdCLEtBQUs7WUFDekIsTUFBTW9JLGNBQWN2RyxLQUFLQyxHQUFHO1lBQzVCLElBQUksQ0FBQ3pGLFdBQVcsQ0FBQ2dNLFFBQVEsQ0FBQ3JJLElBQUk3RCxFQUFFLEVBQUU4RCxPQUFPbUk7WUFDekMsSUFBSTtnQkFDQSxNQUFNRSw0QkFBNEIsSUFBSSxDQUFDQyw0QkFBNEIsQ0FBQ3ZJO2dCQUNwRSxJQUFJc0ksMkJBQTJCO29CQUMzQixNQUFNRSxTQUFTLE1BQU0sSUFBSSxDQUFDL0YsYUFBYSxDQUFDLElBQU0sSUFBSSxDQUFDZ0csWUFBWSxDQUFDLElBQUl4TyxTQUFTeU8sa0JBQWtCLENBQUNKLDRCQUE0QnRJLEtBQUtDLE9BQU82SCxtQkFBbUJ0RSxPQUFPO3dCQUFFWixXQUFXLElBQUksQ0FBQy9ILElBQUksQ0FBQ1MsYUFBYTt3QkFBRWtJO29CQUFLO29CQUM3TSxPQUFPZ0Y7Z0JBQ1g7Z0JBQ0EsTUFBTXpDLFNBQVMsTUFBTSxJQUFJLENBQUNoRyxjQUFjLENBQUNDLEtBQUtDO2dCQUM5QyxPQUFPLE1BQU0sSUFBSSxDQUFDd0MsYUFBYSxDQUFDLElBQU0sSUFBSSxDQUFDa0csZUFBZSxDQUFDNUMsUUFBUS9GLEtBQUtDLE9BQU82SCxtQkFBbUJ0RSxPQUFPO29CQUFFWixXQUFXLElBQUksQ0FBQy9ILElBQUksQ0FBQ1MsYUFBYTtvQkFBRWtJO2dCQUFLO1lBQ3hKLEVBQ0EsT0FBT2dFLEtBQUs7Z0JBQ1IsTUFBTWdCLFNBQVMsTUFBTSxJQUFJLENBQUMvRixhQUFhLENBQUMsSUFBTSxJQUFJLENBQUNnRyxZQUFZLENBQUNqQixLQUFLeEgsS0FBS0MsT0FBTzZILG1CQUFtQnRFLE9BQU87b0JBQUVaLFdBQVcsSUFBSSxDQUFDL0gsSUFBSSxDQUFDUyxhQUFhO29CQUFFa0k7b0JBQU1YLGVBQWU7Z0JBQUs7Z0JBQzNLLE9BQU8yRjtZQUNYLFNBQ1E7Z0JBQ0osSUFBSSxDQUFDbk0sV0FBVyxDQUFDdU0sVUFBVSxDQUFDNUksSUFBSTdELEVBQUU7Z0JBQ2xDcUgsU0FBUyxRQUFRQSxTQUFTLEtBQUssSUFBSSxLQUFLLElBQUlBLEtBQUtDLGFBQWEsQ0FBQztvQkFDM0QsQ0FBQ3ZKLFFBQVF3SixtQkFBbUIsQ0FBQ21GLG9CQUFvQixDQUFDLEVBQUVoSCxLQUFLQyxHQUFHO29CQUM1RCxDQUFDNUgsUUFBUXdKLG1CQUFtQixDQUFDb0YscUJBQXFCLENBQUMsRUFBRVY7Z0JBQ3pEO1lBQ0o7UUFDSixHQUFHTDtJQUNQO0lBQ0FRLDZCQUE2QnZJLEdBQUcsRUFBRTtRQUM5QixJQUFJQSxJQUFJK0ksZUFBZSxFQUFFO1lBQ3JCLE9BQU8vSSxJQUFJK0ksZUFBZTtRQUM5QjtRQUNBLElBQUksSUFBSSxDQUFDbE8sSUFBSSxDQUFDb0Isa0JBQWtCLElBQzVCLElBQUksQ0FBQ3BCLElBQUksQ0FBQ29CLGtCQUFrQixHQUFHK0QsSUFBSWdKLGVBQWUsRUFBRTtZQUNwRCxPQUFPO1FBQ1g7SUFDSjtJQUNBLE1BQU1MLGdCQUFnQjVDLE1BQU0sRUFBRS9GLEdBQUcsRUFBRUMsS0FBSyxFQUFFNkgsb0JBQW9CLElBQU0sSUFBSSxFQUFFdEUsSUFBSSxFQUFFO1FBQzVFLElBQUksQ0FBQyxJQUFJLENBQUN6SCxVQUFVLENBQUNxRixPQUFPLEVBQUU7WUFDMUIsTUFBTTZILFlBQVksTUFBTWpKLElBQUlrSixlQUFlLENBQUNuRCxRQUFROUYsT0FBTzZILHVCQUF1QixDQUFFLEtBQUksQ0FBQzFHLE9BQU8sSUFBSSxJQUFJLENBQUNDLE1BQU07WUFDL0csSUFBSSxDQUFDN0MsSUFBSSxDQUFDLGFBQWF3QixLQUFLK0YsUUFBUTtZQUNwQ3ZDLFNBQVMsUUFBUUEsU0FBUyxLQUFLLElBQUksS0FBSyxJQUFJQSxLQUFLMkYsUUFBUSxDQUFDLGlCQUFpQjtnQkFDdkUsQ0FBQ2pQLFFBQVF3SixtQkFBbUIsQ0FBQzBGLFNBQVMsQ0FBQyxFQUFFckYsS0FBS0MsU0FBUyxDQUFDK0I7WUFDNUQ7WUFDQSxNQUFNLENBQUNiLFNBQVM5RSxPQUFPK0UsZ0JBQWdCQyxXQUFXLEdBQUc2RCxhQUFhLEVBQUU7WUFDcEUsSUFBSSxDQUFDNUQsWUFBWSxDQUFDRixnQkFBZ0JDO1lBQ2xDLE9BQU8sSUFBSSxDQUFDRSxrQkFBa0IsQ0FBQ0osU0FBUzlFLE9BQU9IO1FBQ25EO0lBQ0o7SUFDQSxNQUFNd0ksYUFBYWpCLEdBQUcsRUFBRXhILEdBQUcsRUFBRUMsS0FBSyxFQUFFNkgsb0JBQW9CLElBQU0sSUFBSSxFQUFFdEUsSUFBSSxFQUFFO1FBQ3RFLElBQUksQ0FBQyxJQUFJLENBQUN6SCxVQUFVLENBQUNxRixPQUFPLEVBQUU7WUFDMUIsNkNBQTZDO1lBQzdDLElBQUlvRyxJQUFJRSxPQUFPLEtBQUt6TixTQUFTb1AsZ0JBQWdCLEVBQUU7Z0JBQzNDLE1BQU1DLGVBQWUsTUFBTSxJQUFJLENBQUNDLHFCQUFxQixDQUFDdkosS0FBS0M7Z0JBQzNELElBQUksQ0FBQ3RFLFVBQVUsR0FBRzJOLGVBQWUsSUFBSXpILEtBQUtDLEdBQUcsS0FBS3dILGVBQWU7Z0JBQ2pFO1lBQ0o7WUFDQSxJQUFJOUIsZUFBZXZOLFNBQVN1UCxZQUFZLElBQ3BDaEMsSUFBSTdNLElBQUksSUFBSSxrQkFDWjZNLGVBQWV2TixTQUFTd1AsWUFBWSxJQUNwQ2pDLElBQUk3TSxJQUFJLElBQUksa0JBQ1o2TSxlQUFldk4sU0FBU3lQLG9CQUFvQixJQUM1Q2xDLElBQUk3TSxJQUFJLElBQUksd0JBQXdCO2dCQUNwQyxNQUFNNkYsU0FBUyxNQUFNLElBQUksQ0FBQ0EsTUFBTTtnQkFDaEMsT0FBTyxJQUFJLENBQUM2RCxZQUFZLENBQUM3RCxRQUFRUCxPQUFPLElBQUksQ0FBQ3BGLElBQUksQ0FBQ0YsSUFBSTtZQUMxRDtZQUNBLE1BQU1vTCxTQUFTLE1BQU0vRixJQUFJMkosWUFBWSxDQUFDbkMsS0FBS3ZILE9BQU82SCx1QkFBdUIsQ0FBRSxLQUFJLENBQUMxRyxPQUFPLElBQUksSUFBSSxDQUFDQyxNQUFNO1lBQ3RHLElBQUksQ0FBQzdDLElBQUksQ0FBQyxVQUFVd0IsS0FBS3dILEtBQUs7WUFDOUJoRSxTQUFTLFFBQVFBLFNBQVMsS0FBSyxJQUFJLEtBQUssSUFBSUEsS0FBSzJGLFFBQVEsQ0FBQyxjQUFjO2dCQUNwRSxDQUFDalAsUUFBUXdKLG1CQUFtQixDQUFDa0csZUFBZSxDQUFDLEVBQUVwQyxJQUFJRSxPQUFPO1lBQzlEO1lBQ0EsSUFBSTNCLFFBQVE7Z0JBQ1IsTUFBTSxDQUFDYixTQUFTOUUsT0FBTytFLGdCQUFnQkMsV0FBVyxHQUFHVztnQkFDckQsSUFBSSxDQUFDVixZQUFZLENBQUNGLGdCQUFnQkM7Z0JBQ2xDLE9BQU8sSUFBSSxDQUFDRSxrQkFBa0IsQ0FBQ0osU0FBUzlFLE9BQU9IO1lBQ25EO1FBQ0o7SUFDSjtJQUNBOzs7S0FHQyxHQUNELE1BQU00SixNQUFNQyxlQUFlLEVBQUU7UUFDekIsTUFBTSxJQUFJLENBQUN6RyxLQUFLLENBQUNuSixRQUFRb0osUUFBUSxDQUFDQyxRQUFRLEVBQUUsU0FBUyxJQUFJLENBQUM1SSxJQUFJLEVBQUUsT0FBTzZJO1lBQ25FLElBQUk1QjtZQUNKNEIsU0FBUyxRQUFRQSxTQUFTLEtBQUssSUFBSSxLQUFLLElBQUlBLEtBQUtDLGFBQWEsQ0FBQztnQkFDM0QsQ0FBQ3ZKLFFBQVF3SixtQkFBbUIsQ0FBQ0MsUUFBUSxDQUFDLEVBQUUsSUFBSSxDQUFDeEgsRUFBRTtnQkFDL0MsQ0FBQ2pDLFFBQVF3SixtQkFBbUIsQ0FBQ0csVUFBVSxDQUFDLEVBQUUsSUFBSSxDQUFDaEosSUFBSSxDQUFDRixJQUFJO2dCQUN4RCxDQUFDVCxRQUFRd0osbUJBQW1CLENBQUNxRyxxQkFBcUIsQ0FBQyxFQUFFRDtZQUN6RDtZQUNBLElBQUksQ0FBQyxJQUFJLENBQUN6SSxNQUFNLEVBQUU7Z0JBQ2QsSUFBSSxDQUFDQSxNQUFNLEdBQUc7Z0JBQ2QsSUFBSSxDQUFDeUksaUJBQWlCO29CQUNsQixNQUFNLElBQUksQ0FBQ0UsdUJBQXVCO2dCQUN0QztnQkFDQ3BJLENBQUFBLEtBQUssSUFBSSxDQUFDcUksbUJBQW1CLE1BQU0sUUFBUXJJLE9BQU8sS0FBSyxJQUFJLEtBQUssSUFBSUEsR0FBR3NJLElBQUksQ0FBQyxJQUFJO2dCQUNqRixJQUFJLENBQUMxTCxJQUFJLENBQUM7WUFDZDtRQUNKO0lBQ0o7SUFDQTs7O0tBR0MsR0FDRDJMLFNBQVM7UUFDTCxJQUFJLENBQUMsSUFBSSxDQUFDdE8sT0FBTyxFQUFFO1lBQ2YsSUFBSSxDQUFDd0gsS0FBSyxDQUFDbkosUUFBUW9KLFFBQVEsQ0FBQ0MsUUFBUSxFQUFFLFVBQVUsSUFBSSxDQUFDNUksSUFBSSxFQUFFNkksQ0FBQUE7Z0JBQ3ZEQSxTQUFTLFFBQVFBLFNBQVMsS0FBSyxJQUFJLEtBQUssSUFBSUEsS0FBS0MsYUFBYSxDQUFDO29CQUMzRCxDQUFDdkosUUFBUXdKLG1CQUFtQixDQUFDQyxRQUFRLENBQUMsRUFBRSxJQUFJLENBQUN4SCxFQUFFO29CQUMvQyxDQUFDakMsUUFBUXdKLG1CQUFtQixDQUFDRyxVQUFVLENBQUMsRUFBRSxJQUFJLENBQUNoSixJQUFJLENBQUNGLElBQUk7Z0JBQzVEO2dCQUNBLElBQUksQ0FBQzBHLE1BQU0sR0FBRztnQkFDZCxJQUFJLElBQUksQ0FBQzVFLFNBQVMsRUFBRTtvQkFDaEIsSUFBSSxDQUFDNEIsR0FBRztnQkFDWjtnQkFDQSxJQUFJLENBQUNHLElBQUksQ0FBQztZQUNkO1FBQ0o7SUFDSjtJQUNBOzs7OztLQUtDLEdBQ0Q0TCxXQUFXO1FBQ1AsT0FBTyxDQUFDLENBQUMsSUFBSSxDQUFDL0ksTUFBTTtJQUN4QjtJQUNBOzs7OztLQUtDLEdBQ0RnSixZQUFZO1FBQ1IsT0FBTyxJQUFJLENBQUN4TyxPQUFPO0lBQ3ZCO0lBQ0E7Ozs7Ozs7Ozs7O0tBV0MsR0FDRCxNQUFNeU8sTUFBTUMsUUFBUSxLQUFLLEVBQUU7UUFDdkIsSUFBSSxJQUFJLENBQUNuSixPQUFPLEVBQUU7WUFDZCxPQUFPLElBQUksQ0FBQ0EsT0FBTztRQUN2QjtRQUNBLElBQUksQ0FBQ0EsT0FBTyxHQUFHLENBQUM7WUFDWixNQUFNLElBQUksQ0FBQ2lDLEtBQUssQ0FBQ25KLFFBQVFvSixRQUFRLENBQUNDLFFBQVEsRUFBRSxTQUFTLElBQUksQ0FBQzVJLElBQUksRUFBRSxPQUFPNkk7Z0JBQ25FLElBQUk1QixJQUFJdUI7Z0JBQ1JLLFNBQVMsUUFBUUEsU0FBUyxLQUFLLElBQUksS0FBSyxJQUFJQSxLQUFLQyxhQUFhLENBQUM7b0JBQzNELENBQUN2SixRQUFRd0osbUJBQW1CLENBQUNDLFFBQVEsQ0FBQyxFQUFFLElBQUksQ0FBQ3hILEVBQUU7b0JBQy9DLENBQUNqQyxRQUFRd0osbUJBQW1CLENBQUNHLFVBQVUsQ0FBQyxFQUFFLElBQUksQ0FBQ2hKLElBQUksQ0FBQ0YsSUFBSTtvQkFDeEQsQ0FBQ1QsUUFBUXdKLG1CQUFtQixDQUFDOEcsZ0JBQWdCLENBQUMsRUFBRUQ7Z0JBQ3BEO2dCQUNBLElBQUksQ0FBQy9MLElBQUksQ0FBQyxXQUFXO2dCQUNwQm9ELENBQUFBLEtBQUssSUFBSSxDQUFDcEcsb0JBQW9CLE1BQU0sUUFBUW9HLE9BQU8sS0FBSyxJQUFJLEtBQUssSUFBSUEsR0FBR0csS0FBSztnQkFDOUUscUNBQXFDO2dCQUNyQyxNQUFNMEksZ0JBQWdCO29CQUNsQjt3QkFDSSxPQUFPRixTQUFTLElBQUksQ0FBQ1AsdUJBQXVCLENBQUM7b0JBQ2pEO29CQUNBLElBQU0sSUFBSSxDQUFDM04sV0FBVyxDQUFDaU8sS0FBSztvQkFDNUI7d0JBQVEsSUFBSTFJO3dCQUFJLE9BQU8sQ0FBQ0EsS0FBSyxJQUFJLENBQUM3RCxTQUFTLE1BQU0sUUFBUTZELE9BQU8sS0FBSyxJQUFJLEtBQUssSUFBSUEsR0FBRzhJLEtBQUs7b0JBQUk7b0JBQzlGLElBQU0sSUFBSSxDQUFDblAsa0JBQWtCLENBQUMrTyxLQUFLLENBQUNDO29CQUNwQyxJQUFNLElBQUksQ0FBQ3hPLFVBQVUsQ0FBQ3VPLEtBQUssQ0FBQ0M7aUJBQy9CO2dCQUNELGtGQUFrRjtnQkFDbEYsS0FBSyxNQUFNSSxXQUFXRixjQUFlO29CQUNqQyxJQUFJO3dCQUNBLE1BQU1FO29CQUNWLEVBQ0EsT0FBT25ELEtBQUs7d0JBQ1IsSUFBSSxDQUFDaEosSUFBSSxDQUFDLFNBQVNnSjtvQkFDdkI7Z0JBQ0o7Z0JBQ0NyRSxDQUFBQSxLQUFLLElBQUksQ0FBQzhHLG1CQUFtQixNQUFNLFFBQVE5RyxPQUFPLEtBQUssSUFBSSxLQUFLLElBQUlBLEdBQUcrRyxJQUFJLENBQUMsSUFBSTtnQkFDakYsSUFBSSxDQUFDVSxNQUFNLEdBQUc7Z0JBQ2QsSUFBSSxDQUFDcE0sSUFBSSxDQUFDO1lBQ2Q7UUFDSjtRQUNBLE9BQU8sTUFBTSxJQUFJLENBQUM0QyxPQUFPO0lBQzdCO0lBQ0E7Ozs7Ozs7Ozs7O0tBV0MsR0FDRCxNQUFNRSx5QkFBeUI7UUFDM0IsSUFBSSxDQUFDLElBQUksQ0FBQ3pHLElBQUksQ0FBQ2dRLGdCQUFnQixFQUFFO1lBQzdCLElBQUksQ0FBQyxJQUFJLENBQUN6SixPQUFPLEVBQUU7Z0JBQ2YsTUFBTSxJQUFJLENBQUNpQyxLQUFLLENBQUNuSixRQUFRb0osUUFBUSxDQUFDQyxRQUFRLEVBQUUsMEJBQTBCLElBQUksQ0FBQzVJLElBQUksRUFBRSxPQUFPNkk7b0JBQ3BGQSxTQUFTLFFBQVFBLFNBQVMsS0FBSyxJQUFJLEtBQUssSUFBSUEsS0FBS0MsYUFBYSxDQUFDO3dCQUMzRCxDQUFDdkosUUFBUXdKLG1CQUFtQixDQUFDQyxRQUFRLENBQUMsRUFBRSxJQUFJLENBQUN4SCxFQUFFO3dCQUMvQyxDQUFDakMsUUFBUXdKLG1CQUFtQixDQUFDRyxVQUFVLENBQUMsRUFBRSxJQUFJLENBQUNoSixJQUFJLENBQUNGLElBQUk7b0JBQzVEO29CQUNBLElBQUksQ0FBQ21RLGNBQWMsR0FBR3hNLEtBQUssQ0FBQ2tKLENBQUFBO3dCQUN4QixJQUFJLENBQUNoSixJQUFJLENBQUMsU0FBU2dKO29CQUN2QjtnQkFDSjtZQUNKO1FBQ0o7SUFDSjtJQUNBLE1BQU1zRCxpQkFBaUI7UUFDbkIsTUFBTyxDQUFFLEtBQUksQ0FBQzFKLE9BQU8sSUFBSSxJQUFJLENBQUNDLE1BQU0sRUFBRztZQUNuQyxNQUFNLElBQUksQ0FBQzBKLG9CQUFvQixDQUFDLElBQU0sSUFBSSxDQUFDQyxxQkFBcUI7WUFDaEUsTUFBTSxJQUFJcEssUUFBUUMsQ0FBQUE7Z0JBQ2QsTUFBTTJFLFVBQVV0RyxXQUFXMkIsU0FBUyxJQUFJLENBQUNoRyxJQUFJLENBQUNPLGVBQWU7Z0JBQzdELElBQUksQ0FBQzZPLG1CQUFtQixHQUFHO29CQUN2QnpELGFBQWFoQjtvQkFDYjNFO2dCQUNKO1lBQ0o7UUFDSjtJQUNKO0lBQ0E7Ozs7S0FJQyxHQUNELE1BQU1tSix3QkFBd0JpQixZQUFZLElBQUksRUFBRTtRQUM1QyxFQUFFO1FBQ0Ysc0ZBQXNGO1FBQ3RGLEVBQUU7UUFDRixJQUFJLElBQUksQ0FBQ3JQLE9BQU8sRUFBRTtZQUNkLDRFQUE0RTtZQUM1RSxNQUFNLElBQUksQ0FBQ0wsa0JBQWtCLENBQUN1SyxVQUFVLENBQUNtRjtRQUM3QyxPQUNLO1lBQ0RBLFlBQVk7UUFDaEI7UUFDQSxJQUFJLElBQUksQ0FBQ25QLGVBQWUsRUFBRTtZQUN0QixNQUFNLElBQUksQ0FBQ0EsZUFBZTtRQUM5QjtRQUNBbVAsYUFBYyxNQUFNLElBQUksQ0FBQzFQLGtCQUFrQixDQUFDMFAsU0FBUztJQUN6RDtJQUNBLE1BQU14SSxjQUFjeUksRUFBRSxFQUFFclEsSUFBSSxFQUFFO1FBQzFCLElBQUkrRztRQUNKLElBQUl1SixRQUFRO1FBQ1osTUFBTUMsYUFBYXZRLEtBQUt1USxVQUFVLElBQUk3RjtRQUN0QyxHQUFHO1lBQ0MsSUFBSTtnQkFDQSxPQUFPLE1BQU0yRjtZQUNqQixFQUNBLE9BQU8xRCxLQUFLO2dCQUNQNUYsQ0FBQUEsS0FBSy9HLEtBQUsySSxJQUFJLE1BQU0sUUFBUTVCLE9BQU8sS0FBSyxJQUFJLEtBQUssSUFBSUEsR0FBR3lKLGVBQWUsQ0FBQzdELElBQUlFLE9BQU87Z0JBQ3BGLElBQUksQ0FBQyxHQUFHaE8sUUFBUTZNLG9CQUFvQixFQUFFaUIsTUFBTTtvQkFDeEMsdUdBQXVHO29CQUN2RyxJQUFJLENBQUMsSUFBSSxDQUFDbkcsTUFBTSxJQUFJLENBQUMsSUFBSSxDQUFDRCxPQUFPLEVBQUU7d0JBQy9CLElBQUksQ0FBQzVDLElBQUksQ0FBQyxTQUFTZ0o7b0JBQ3ZCO29CQUNBLElBQUkzTSxLQUFLZ0ksYUFBYSxFQUFFO3dCQUNwQjtvQkFDSixPQUNLO3dCQUNELE1BQU0yRTtvQkFDVjtnQkFDSixPQUNLO29CQUNELElBQUkzTSxLQUFLK0gsU0FBUyxJQUFJLENBQUMsSUFBSSxDQUFDeEIsT0FBTyxJQUFJLENBQUMsSUFBSSxDQUFDd0osTUFBTSxFQUFFO3dCQUNqRCxNQUFNLElBQUksQ0FBQzNJLEtBQUssQ0FBQ3BILEtBQUsrSCxTQUFTLEVBQUUsSUFBSSxDQUFDcEgsb0JBQW9CO29CQUM5RDtvQkFDQSxJQUFJMlAsUUFBUSxLQUFLQyxZQUFZO3dCQUN6QixxREFBcUQ7d0JBQ3JELE1BQU01RDtvQkFDVjtnQkFDSjtZQUNKO1FBQ0osUUFBUyxFQUFFMkQsUUFBUUMsWUFBWTtJQUNuQztJQUNBLE1BQU1KLHdCQUF3QjtRQUMxQixNQUFNLElBQUksQ0FBQzNILEtBQUssQ0FBQ25KLFFBQVFvSixRQUFRLENBQUNDLFFBQVEsRUFBRSx5QkFBeUIsSUFBSSxDQUFDNUksSUFBSSxFQUFFLE9BQU82STtZQUNuRixNQUFNOEgsVUFBVSxNQUFNLElBQUksQ0FBQy9MLE9BQU8sQ0FBQ3lMLHFCQUFxQjtZQUN4RHhILFNBQVMsUUFBUUEsU0FBUyxLQUFLLElBQUksS0FBSyxJQUFJQSxLQUFLQyxhQUFhLENBQUM7Z0JBQzNELENBQUN2SixRQUFRd0osbUJBQW1CLENBQUNDLFFBQVEsQ0FBQyxFQUFFLElBQUksQ0FBQ3hILEVBQUU7Z0JBQy9DLENBQUNqQyxRQUFRd0osbUJBQW1CLENBQUNHLFVBQVUsQ0FBQyxFQUFFLElBQUksQ0FBQ2hKLElBQUksQ0FBQ0YsSUFBSTtnQkFDeEQsQ0FBQ1QsUUFBUXdKLG1CQUFtQixDQUFDNkgsaUJBQWlCLENBQUMsRUFBRUQ7WUFDckQ7WUFDQUEsUUFBUUUsT0FBTyxDQUFDLENBQUNwTDtnQkFDYm9ELFNBQVMsUUFBUUEsU0FBUyxLQUFLLElBQUksS0FBSyxJQUFJQSxLQUFLMkYsUUFBUSxDQUFDLGVBQWU7b0JBQ3JFLENBQUNqUCxRQUFRd0osbUJBQW1CLENBQUNPLEtBQUssQ0FBQyxFQUFFN0Q7Z0JBQ3pDO2dCQUNBLElBQUksQ0FBQzVCLElBQUksQ0FBQyxXQUFXNEIsT0FBTztZQUNoQztRQUNKO0lBQ0o7SUFDQW1KLHNCQUFzQnZKLEdBQUcsRUFBRUMsS0FBSyxFQUFFO1FBQzlCLE9BQU9ELElBQUl5TCxVQUFVLENBQUN4TDtJQUMxQjtBQUNKO0FBQ0FoSCxjQUFjLEdBQUdFLFFBQ2pCLGtDQUFrQyIsInNvdXJjZXMiOlsid2VicGFjazovL29ubHlmYW5zLXBsYXRmb3JtLy4vbm9kZV9tb2R1bGVzL2J1bGxtcS9kaXN0L2Nqcy9jbGFzc2VzL3dvcmtlci5qcz82NDM1Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5Xb3JrZXIgPSB2b2lkIDA7XG5jb25zdCBmcyA9IHJlcXVpcmUoXCJmc1wiKTtcbmNvbnN0IHVybF8xID0gcmVxdWlyZShcInVybFwiKTtcbmNvbnN0IHBhdGggPSByZXF1aXJlKFwicGF0aFwiKTtcbmNvbnN0IHV1aWRfMSA9IHJlcXVpcmUoXCJ1dWlkXCIpO1xuLy8gTm90ZTogdGhpcyBQb2x5ZmlsbCBpcyBvbmx5IG5lZWRlZCBmb3IgTm9kZSB2ZXJzaW9ucyA8IDE1LjQuMFxuY29uc3Qgbm9kZV9hYm9ydF9jb250cm9sbGVyXzEgPSByZXF1aXJlKFwibm9kZS1hYm9ydC1jb250cm9sbGVyXCIpO1xuY29uc3QgdXRpbHNfMSA9IHJlcXVpcmUoXCIuLi91dGlsc1wiKTtcbmNvbnN0IHF1ZXVlX2Jhc2VfMSA9IHJlcXVpcmUoXCIuL3F1ZXVlLWJhc2VcIik7XG5jb25zdCByZXBlYXRfMSA9IHJlcXVpcmUoXCIuL3JlcGVhdFwiKTtcbmNvbnN0IGNoaWxkX3Bvb2xfMSA9IHJlcXVpcmUoXCIuL2NoaWxkLXBvb2xcIik7XG5jb25zdCByZWRpc19jb25uZWN0aW9uXzEgPSByZXF1aXJlKFwiLi9yZWRpcy1jb25uZWN0aW9uXCIpO1xuY29uc3Qgc2FuZGJveF8xID0gcmVxdWlyZShcIi4vc2FuZGJveFwiKTtcbmNvbnN0IGFzeW5jX2ZpZm9fcXVldWVfMSA9IHJlcXVpcmUoXCIuL2FzeW5jLWZpZm8tcXVldWVcIik7XG5jb25zdCBlcnJvcnNfMSA9IHJlcXVpcmUoXCIuL2Vycm9yc1wiKTtcbmNvbnN0IGVudW1zXzEgPSByZXF1aXJlKFwiLi4vZW51bXNcIik7XG5jb25zdCBqb2Jfc2NoZWR1bGVyXzEgPSByZXF1aXJlKFwiLi9qb2Itc2NoZWR1bGVyXCIpO1xuY29uc3QgbG9ja19tYW5hZ2VyXzEgPSByZXF1aXJlKFwiLi9sb2NrLW1hbmFnZXJcIik7XG5jb25zdCBPTkVfU0VDT05EID0gMTAwMDtcbi8vIDEwIHNlY29uZHMgaXMgdGhlIG1heGltdW0gdGltZSBhIEJaUE9QTUlOIGNhbiBibG9jay5cbmNvbnN0IG1heGltdW1CbG9ja1RpbWVvdXQgPSAxMDtcbi8vIDMwIHNlY29uZHMgaXMgdGhlIG1heGltdW0gbGltaXQgdW50aWwuXG5jb25zdCBtYXhpbXVtUmF0ZUxpbWl0RGVsYXkgPSAzMDAwMDtcbi8qKlxuICpcbiAqIFRoaXMgY2xhc3MgcmVwcmVzZW50cyBhIHdvcmtlciB0aGF0IGlzIGFibGUgdG8gcHJvY2VzcyBqb2JzIGZyb20gdGhlIHF1ZXVlLlxuICogQXMgc29vbiBhcyB0aGUgY2xhc3MgaXMgaW5zdGFudGlhdGVkIGFuZCBhIGNvbm5lY3Rpb24gdG8gUmVkaXMgaXMgZXN0YWJsaXNoZWRcbiAqIGl0IHdpbGwgc3RhcnQgcHJvY2Vzc2luZyBqb2JzLlxuICpcbiAqL1xuY2xhc3MgV29ya2VyIGV4dGVuZHMgcXVldWVfYmFzZV8xLlF1ZXVlQmFzZSB7XG4gICAgc3RhdGljIFJhdGVMaW1pdEVycm9yKCkge1xuICAgICAgICByZXR1cm4gbmV3IGVycm9yc18xLlJhdGVMaW1pdEVycm9yKCk7XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKG5hbWUsIHByb2Nlc3Nvciwgb3B0cywgQ29ubmVjdGlvbikge1xuICAgICAgICBzdXBlcihuYW1lLCBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oeyBkcmFpbkRlbGF5OiA1LCBjb25jdXJyZW5jeTogMSwgbG9ja0R1cmF0aW9uOiAzMDAwMCwgbWF4U3RhbGxlZENvdW50OiAxLCBzdGFsbGVkSW50ZXJ2YWw6IDMwMDAwLCBhdXRvcnVuOiB0cnVlLCBydW5SZXRyeURlbGF5OiAxNTAwMCB9LCBvcHRzKSwgeyBibG9ja2luZ0Nvbm5lY3Rpb246IHRydWUgfSksIENvbm5lY3Rpb24pO1xuICAgICAgICB0aGlzLmFib3J0RGVsYXlDb250cm9sbGVyID0gbnVsbDtcbiAgICAgICAgdGhpcy5ibG9ja1VudGlsID0gMDtcbiAgICAgICAgdGhpcy5kcmFpbmVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMubGltaXRVbnRpbCA9IDA7XG4gICAgICAgIHRoaXMud2FpdGluZyA9IG51bGw7XG4gICAgICAgIHRoaXMucnVubmluZyA9IGZhbHNlO1xuICAgICAgICB0aGlzLm1haW5Mb29wUnVubmluZyA9IG51bGw7XG4gICAgICAgIGlmICghb3B0cyB8fCAhb3B0cy5jb25uZWN0aW9uKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1dvcmtlciByZXF1aXJlcyBhIGNvbm5lY3Rpb24nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIHRoaXMub3B0cy5tYXhTdGFsbGVkQ291bnQgIT09ICdudW1iZXInIHx8XG4gICAgICAgICAgICB0aGlzLm9wdHMubWF4U3RhbGxlZENvdW50IDwgMCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdtYXhTdGFsbGVkQ291bnQgbXVzdCBiZSBncmVhdGVyIG9yIGVxdWFsIHRoYW4gMCcpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5vcHRzLm1heFN0YXJ0ZWRBdHRlbXB0cyA9PT0gJ251bWJlcicgJiZcbiAgICAgICAgICAgIHRoaXMub3B0cy5tYXhTdGFydGVkQXR0ZW1wdHMgPCAwKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ21heFN0YXJ0ZWRBdHRlbXB0cyBtdXN0IGJlIGdyZWF0ZXIgb3IgZXF1YWwgdGhhbiAwJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLm9wdHMuc3RhbGxlZEludGVydmFsICE9PSAnbnVtYmVyJyB8fFxuICAgICAgICAgICAgdGhpcy5vcHRzLnN0YWxsZWRJbnRlcnZhbCA8PSAwKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3N0YWxsZWRJbnRlcnZhbCBtdXN0IGJlIGdyZWF0ZXIgdGhhbiAwJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLm9wdHMuZHJhaW5EZWxheSAhPT0gJ251bWJlcicgfHwgdGhpcy5vcHRzLmRyYWluRGVsYXkgPD0gMCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdkcmFpbkRlbGF5IG11c3QgYmUgZ3JlYXRlciB0aGFuIDAnKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNvbmN1cnJlbmN5ID0gdGhpcy5vcHRzLmNvbmN1cnJlbmN5O1xuICAgICAgICB0aGlzLm9wdHMubG9ja1JlbmV3VGltZSA9XG4gICAgICAgICAgICB0aGlzLm9wdHMubG9ja1JlbmV3VGltZSB8fCB0aGlzLm9wdHMubG9ja0R1cmF0aW9uIC8gMjtcbiAgICAgICAgdGhpcy5pZCA9ICgwLCB1dWlkXzEudjQpKCk7XG4gICAgICAgIC8vIEluaXRpYWxpemUgbG9jayBtYW5hZ2VyIHdpdGggd29ya2VyIGNvbnRleHRcbiAgICAgICAgdGhpcy5sb2NrTWFuYWdlciA9IG5ldyBsb2NrX21hbmFnZXJfMS5Mb2NrTWFuYWdlcih0aGlzLCB7XG4gICAgICAgICAgICBsb2NrUmVuZXdUaW1lOiB0aGlzLm9wdHMubG9ja1JlbmV3VGltZSxcbiAgICAgICAgICAgIGxvY2tEdXJhdGlvbjogdGhpcy5vcHRzLmxvY2tEdXJhdGlvbixcbiAgICAgICAgICAgIHdvcmtlcklkOiB0aGlzLmlkLFxuICAgICAgICAgICAgd29ya2VyTmFtZTogdGhpcy5vcHRzLm5hbWUsXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAocHJvY2Vzc29yKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHByb2Nlc3NvciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgIHRoaXMucHJvY2Vzc0ZuID0gcHJvY2Vzc29yO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gU0FOREJPWEVEXG4gICAgICAgICAgICAgICAgaWYgKHByb2Nlc3NvciBpbnN0YW5jZW9mIHVybF8xLlVSTCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWZzLmV4aXN0c1N5bmMocHJvY2Vzc29yKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBVUkwgJHtwcm9jZXNzb3J9IGRvZXMgbm90IGV4aXN0IGluIHRoZSBsb2NhbCBmaWxlIHN5c3RlbWApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHByb2Nlc3NvciA9IHByb2Nlc3Nvci5ocmVmO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3VwcG9ydGVkRmlsZVR5cGVzID0gWycuanMnLCAnLnRzJywgJy5mbG93JywgJy5janMnLCAnLm1qcyddO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBwcm9jZXNzb3JGaWxlID0gcHJvY2Vzc29yICtcbiAgICAgICAgICAgICAgICAgICAgICAgIChzdXBwb3J0ZWRGaWxlVHlwZXMuaW5jbHVkZXMocGF0aC5leHRuYW1lKHByb2Nlc3NvcikpID8gJycgOiAnLmpzJyk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghZnMuZXhpc3RzU3luYyhwcm9jZXNzb3JGaWxlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBGaWxlICR7cHJvY2Vzc29yRmlsZX0gZG9lcyBub3QgZXhpc3RgKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBTZXBhcmF0ZSBwYXRocyBzbyB0aGF0IGJ1bmRsaW5nIHRvb2xzIGNhbiByZXNvbHZlIGRlcGVuZGVuY2llcyBlYXNpZXJcbiAgICAgICAgICAgICAgICBjb25zdCBkaXJuYW1lID0gcGF0aC5kaXJuYW1lKG1vZHVsZS5maWxlbmFtZSB8fCBfX2ZpbGVuYW1lKTtcbiAgICAgICAgICAgICAgICBjb25zdCB3b3JrZXJUaHJlYWRzTWFpbkZpbGUgPSBwYXRoLmpvaW4oZGlybmFtZSwgJ21haW4td29ya2VyLmpzJyk7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3Bhd25Qcm9jZXNzTWFpbkZpbGUgPSBwYXRoLmpvaW4oZGlybmFtZSwgJ21haW4uanMnKTtcbiAgICAgICAgICAgICAgICBsZXQgbWFpbkZpbGVQYXRoID0gdGhpcy5vcHRzLnVzZVdvcmtlclRocmVhZHNcbiAgICAgICAgICAgICAgICAgICAgPyB3b3JrZXJUaHJlYWRzTWFpbkZpbGVcbiAgICAgICAgICAgICAgICAgICAgOiBzcGF3blByb2Nlc3NNYWluRmlsZTtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBmcy5zdGF0U3luYyhtYWluRmlsZVBhdGgpOyAvLyB3b3VsZCB0aHJvdyBpZiBmaWxlIG5vdCBleGlzdHNcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKF8pIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbWFpbkZpbGUgPSB0aGlzLm9wdHMudXNlV29ya2VyVGhyZWFkc1xuICAgICAgICAgICAgICAgICAgICAgICAgPyAnbWFpbi13b3JrZXIuanMnXG4gICAgICAgICAgICAgICAgICAgICAgICA6ICdtYWluLmpzJztcbiAgICAgICAgICAgICAgICAgICAgbWFpbkZpbGVQYXRoID0gcGF0aC5qb2luKHByb2Nlc3MuY3dkKCksIGBkaXN0L2Nqcy9jbGFzc2VzLyR7bWFpbkZpbGV9YCk7XG4gICAgICAgICAgICAgICAgICAgIGZzLnN0YXRTeW5jKG1haW5GaWxlUGF0aCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuY2hpbGRQb29sID0gbmV3IGNoaWxkX3Bvb2xfMS5DaGlsZFBvb2woe1xuICAgICAgICAgICAgICAgICAgICBtYWluRmlsZTogbWFpbkZpbGVQYXRoLFxuICAgICAgICAgICAgICAgICAgICB1c2VXb3JrZXJUaHJlYWRzOiB0aGlzLm9wdHMudXNlV29ya2VyVGhyZWFkcyxcbiAgICAgICAgICAgICAgICAgICAgd29ya2VyRm9ya09wdGlvbnM6IHRoaXMub3B0cy53b3JrZXJGb3JrT3B0aW9ucyxcbiAgICAgICAgICAgICAgICAgICAgd29ya2VyVGhyZWFkc09wdGlvbnM6IHRoaXMub3B0cy53b3JrZXJUaHJlYWRzT3B0aW9ucyxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLnByb2Nlc3NGbiA9ICgwLCBzYW5kYm94XzEuZGVmYXVsdCkocHJvY2Vzc29yLCB0aGlzLmNoaWxkUG9vbCkuYmluZCh0aGlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLm9wdHMuYXV0b3J1bikge1xuICAgICAgICAgICAgICAgIHRoaXMucnVuKCkuY2F0Y2goZXJyb3IgPT4gdGhpcy5lbWl0KCdlcnJvcicsIGVycm9yKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY29ubmVjdGlvbk5hbWUgPSB0aGlzLmNsaWVudE5hbWUoKSArICh0aGlzLm9wdHMubmFtZSA/IGA6dzoke3RoaXMub3B0cy5uYW1lfWAgOiAnJyk7XG4gICAgICAgIHRoaXMuYmxvY2tpbmdDb25uZWN0aW9uID0gbmV3IHJlZGlzX2Nvbm5lY3Rpb25fMS5SZWRpc0Nvbm5lY3Rpb24oKDAsIHV0aWxzXzEuaXNSZWRpc0luc3RhbmNlKShvcHRzLmNvbm5lY3Rpb24pXG4gICAgICAgICAgICA/IG9wdHMuY29ubmVjdGlvbi5kdXBsaWNhdGUoeyBjb25uZWN0aW9uTmFtZSB9KVxuICAgICAgICAgICAgOiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIG9wdHMuY29ubmVjdGlvbiksIHsgY29ubmVjdGlvbk5hbWUgfSksIHtcbiAgICAgICAgICAgIHNoYXJlZDogZmFsc2UsXG4gICAgICAgICAgICBibG9ja2luZzogdHJ1ZSxcbiAgICAgICAgICAgIHNraXBWZXJzaW9uQ2hlY2s6IG9wdHMuc2tpcFZlcnNpb25DaGVjayxcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuYmxvY2tpbmdDb25uZWN0aW9uLm9uKCdlcnJvcicsIGVycm9yID0+IHRoaXMuZW1pdCgnZXJyb3InLCBlcnJvcikpO1xuICAgICAgICB0aGlzLmJsb2NraW5nQ29ubmVjdGlvbi5vbigncmVhZHknLCAoKSA9PiBzZXRUaW1lb3V0KCgpID0+IHRoaXMuZW1pdCgncmVhZHknKSwgMCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQdWJsaWMgYWNjZXNzb3IgbWV0aG9kIGZvciBMb2NrTWFuYWdlciB0byBleHRlbmQgbG9ja3MuXG4gICAgICogVGhpcyBkZWxlZ2F0ZXMgdG8gdGhlIHByb3RlY3RlZCBzY3JpcHRzIG9iamVjdC5cbiAgICAgKi9cbiAgICBhc3luYyBleHRlbmRKb2JMb2Nrcyhqb2JJZHMsIHRva2VucywgZHVyYXRpb24pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2NyaXB0cy5leHRlbmRMb2Nrcyhqb2JJZHMsIHRva2VucywgZHVyYXRpb24pO1xuICAgIH1cbiAgICBlbWl0KGV2ZW50LCAuLi5hcmdzKSB7XG4gICAgICAgIHJldHVybiBzdXBlci5lbWl0KGV2ZW50LCAuLi5hcmdzKTtcbiAgICB9XG4gICAgb2ZmKGV2ZW50TmFtZSwgbGlzdGVuZXIpIHtcbiAgICAgICAgc3VwZXIub2ZmKGV2ZW50TmFtZSwgbGlzdGVuZXIpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgb24oZXZlbnQsIGxpc3RlbmVyKSB7XG4gICAgICAgIHN1cGVyLm9uKGV2ZW50LCBsaXN0ZW5lcik7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBvbmNlKGV2ZW50LCBsaXN0ZW5lcikge1xuICAgICAgICBzdXBlci5vbmNlKGV2ZW50LCBsaXN0ZW5lcik7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBjYWxsUHJvY2Vzc0pvYihqb2IsIHRva2VuKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByb2Nlc3NGbihqb2IsIHRva2VuKTtcbiAgICB9XG4gICAgY3JlYXRlSm9iKGRhdGEsIGpvYklkKSB7XG4gICAgICAgIHJldHVybiB0aGlzLkpvYi5mcm9tSlNPTih0aGlzLCBkYXRhLCBqb2JJZCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqXG4gICAgICogV2FpdHMgdW50aWwgdGhlIHdvcmtlciBpcyByZWFkeSB0byBzdGFydCBwcm9jZXNzaW5nIGpvYnMuXG4gICAgICogSW4gZ2VuZXJhbCBvbmx5IHVzZWZ1bCB3aGVuIHdyaXRpbmcgdGVzdHMuXG4gICAgICpcbiAgICAgKi9cbiAgICBhc3luYyB3YWl0VW50aWxSZWFkeSgpIHtcbiAgICAgICAgYXdhaXQgc3VwZXIud2FpdFVudGlsUmVhZHkoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuYmxvY2tpbmdDb25uZWN0aW9uLmNsaWVudDtcbiAgICB9XG4gICAgc2V0IGNvbmN1cnJlbmN5KGNvbmN1cnJlbmN5KSB7XG4gICAgICAgIGlmICh0eXBlb2YgY29uY3VycmVuY3kgIT09ICdudW1iZXInIHx8XG4gICAgICAgICAgICBjb25jdXJyZW5jeSA8IDEgfHxcbiAgICAgICAgICAgICFpc0Zpbml0ZShjb25jdXJyZW5jeSkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignY29uY3VycmVuY3kgbXVzdCBiZSBhIGZpbml0ZSBudW1iZXIgZ3JlYXRlciB0aGFuIDAnKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9jb25jdXJyZW5jeSA9IGNvbmN1cnJlbmN5O1xuICAgIH1cbiAgICBnZXQgY29uY3VycmVuY3koKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jb25jdXJyZW5jeTtcbiAgICB9XG4gICAgZ2V0IHJlcGVhdCgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGFzeW5jIChyZXNvbHZlKSA9PiB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuX3JlcGVhdCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvbm5lY3Rpb24gPSBhd2FpdCB0aGlzLmNsaWVudDtcbiAgICAgICAgICAgICAgICB0aGlzLl9yZXBlYXQgPSBuZXcgcmVwZWF0XzEuUmVwZWF0KHRoaXMubmFtZSwgT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCB0aGlzLm9wdHMpLCB7IGNvbm5lY3Rpb24gfSkpO1xuICAgICAgICAgICAgICAgIHRoaXMuX3JlcGVhdC5vbignZXJyb3InLCBlID0+IHRoaXMuZW1pdC5iaW5kKHRoaXMsIGUpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlc29sdmUodGhpcy5fcmVwZWF0KTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGdldCBqb2JTY2hlZHVsZXIoKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShhc3luYyAocmVzb2x2ZSkgPT4ge1xuICAgICAgICAgICAgaWYgKCF0aGlzLl9qb2JTY2hlZHVsZXIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjb25uZWN0aW9uID0gYXdhaXQgdGhpcy5jbGllbnQ7XG4gICAgICAgICAgICAgICAgdGhpcy5fam9iU2NoZWR1bGVyID0gbmV3IGpvYl9zY2hlZHVsZXJfMS5Kb2JTY2hlZHVsZXIodGhpcy5uYW1lLCBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHRoaXMub3B0cyksIHsgY29ubmVjdGlvbiB9KSk7XG4gICAgICAgICAgICAgICAgdGhpcy5fam9iU2NoZWR1bGVyLm9uKCdlcnJvcicsIGUgPT4gdGhpcy5lbWl0LmJpbmQodGhpcywgZSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmVzb2x2ZSh0aGlzLl9qb2JTY2hlZHVsZXIpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgYXN5bmMgcnVuKCkge1xuICAgICAgICBpZiAoIXRoaXMucHJvY2Vzc0ZuKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIHByb2Nlc3MgZnVuY3Rpb24gaXMgZGVmaW5lZC4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5ydW5uaW5nKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1dvcmtlciBpcyBhbHJlYWR5IHJ1bm5pbmcuJyk7XG4gICAgICAgIH1cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMucnVubmluZyA9IHRydWU7XG4gICAgICAgICAgICBpZiAodGhpcy5jbG9zaW5nIHx8IHRoaXMucGF1c2VkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXdhaXQgdGhpcy5zdGFydFN0YWxsZWRDaGVja1RpbWVyKCk7XG4gICAgICAgICAgICBpZiAoIXRoaXMub3B0cy5za2lwTG9ja1JlbmV3YWwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmxvY2tNYW5hZ2VyLnN0YXJ0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBjbGllbnQgPSBhd2FpdCB0aGlzLmNsaWVudDtcbiAgICAgICAgICAgIGNvbnN0IGJjbGllbnQgPSBhd2FpdCB0aGlzLmJsb2NraW5nQ29ubmVjdGlvbi5jbGllbnQ7XG4gICAgICAgICAgICB0aGlzLm1haW5Mb29wUnVubmluZyA9IHRoaXMubWFpbkxvb3AoY2xpZW50LCBiY2xpZW50KTtcbiAgICAgICAgICAgIC8vIFdlIG11c3QgYXdhaXQgaGVyZSBvciBmaW5hbGx5IHdpbGwgYmUgY2FsbGVkIHRvbyBlYXJseS5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMubWFpbkxvb3BSdW5uaW5nO1xuICAgICAgICB9XG4gICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgdGhpcy5ydW5uaW5nID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgd2FpdEZvclJhdGVMaW1pdCgpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICBjb25zdCBsaW1pdFVudGlsID0gdGhpcy5saW1pdFVudGlsO1xuICAgICAgICBpZiAobGltaXRVbnRpbCA+IERhdGUubm93KCkpIHtcbiAgICAgICAgICAgIChfYSA9IHRoaXMuYWJvcnREZWxheUNvbnRyb2xsZXIpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5hYm9ydCgpO1xuICAgICAgICAgICAgdGhpcy5hYm9ydERlbGF5Q29udHJvbGxlciA9IG5ldyBub2RlX2Fib3J0X2NvbnRyb2xsZXJfMS5BYm9ydENvbnRyb2xsZXIoKTtcbiAgICAgICAgICAgIGNvbnN0IGRlbGF5ID0gdGhpcy5nZXRSYXRlTGltaXREZWxheShsaW1pdFVudGlsIC0gRGF0ZS5ub3coKSk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmRlbGF5KGRlbGF5LCB0aGlzLmFib3J0RGVsYXlDb250cm9sbGVyKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGlzIGlzIHRoZSBtYWluIGxvb3AgaW4gQnVsbE1RLiBJdHMgZ29hbHMgYXJlIHRvIGZldGNoIGpvYnMgZnJvbSB0aGUgcXVldWVcbiAgICAgKiBhcyBlZmZpY2llbnRseSBhcyBwb3NzaWJsZSwgcHJvdmlkaW5nIGNvbmN1cnJlbmN5IGFuZCBtaW5pbWFsIHVubmVjZXNzYXJ5IGNhbGxzXG4gICAgICogdG8gUmVkaXMuXG4gICAgICovXG4gICAgYXN5bmMgbWFpbkxvb3AoY2xpZW50LCBiY2xpZW50KSB7XG4gICAgICAgIGNvbnN0IGFzeW5jRmlmb1F1ZXVlID0gbmV3IGFzeW5jX2ZpZm9fcXVldWVfMS5Bc3luY0ZpZm9RdWV1ZSgpO1xuICAgICAgICBsZXQgdG9rZW5Qb3N0Zml4ID0gMDtcbiAgICAgICAgd2hpbGUgKCghdGhpcy5jbG9zaW5nICYmICF0aGlzLnBhdXNlZCkgfHwgYXN5bmNGaWZvUXVldWUubnVtVG90YWwoKSA+IDApIHtcbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogVGhpcyBpbm5lciBsb29wIHRyaWVzIHRvIGZldGNoIGpvYnMgY29uY3VycmVudGx5LCBidXQgaWYgd2UgYXJlIHdhaXRpbmcgZm9yIGEgam9iXG4gICAgICAgICAgICAgKiB0byBhcnJpdmUgYXQgdGhlIHF1ZXVlIHdlIHNob3VsZCBub3QgdHJ5IHRvIGZldGNoIG1vcmUgam9icyAoYXMgaXQgd291bGQgYmUgcG9pbnRsZXNzKVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICB3aGlsZSAoIXRoaXMuY2xvc2luZyAmJlxuICAgICAgICAgICAgICAgICF0aGlzLnBhdXNlZCAmJlxuICAgICAgICAgICAgICAgICF0aGlzLndhaXRpbmcgJiZcbiAgICAgICAgICAgICAgICBhc3luY0ZpZm9RdWV1ZS5udW1Ub3RhbCgpIDwgdGhpcy5fY29uY3VycmVuY3kgJiZcbiAgICAgICAgICAgICAgICAhdGhpcy5pc1JhdGVMaW1pdGVkKCkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0b2tlbiA9IGAke3RoaXMuaWR9OiR7dG9rZW5Qb3N0Zml4Kyt9YDtcbiAgICAgICAgICAgICAgICBjb25zdCBmZXRjaGVkSm9iID0gdGhpcy5yZXRyeUlmRmFpbGVkKCgpID0+IHRoaXMuX2dldE5leHRKb2IoY2xpZW50LCBiY2xpZW50LCB0b2tlbiwgeyBibG9jazogdHJ1ZSB9KSwge1xuICAgICAgICAgICAgICAgICAgICBkZWxheUluTXM6IHRoaXMub3B0cy5ydW5SZXRyeURlbGF5LFxuICAgICAgICAgICAgICAgICAgICBvbmx5RW1pdEVycm9yOiB0cnVlLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGFzeW5jRmlmb1F1ZXVlLmFkZChmZXRjaGVkSm9iKTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy53YWl0aW5nICYmIGFzeW5jRmlmb1F1ZXVlLm51bVRvdGFsKCkgPiAxKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFdlIGFyZSB3YWl0aW5nIGZvciBqb2JzIGJ1dCB3ZSBoYXZlIG90aGVycyB0aGF0IHdlIGNvdWxkIHN0YXJ0IHByb2Nlc3NpbmcgYWxyZWFkeVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gV2UgYXdhaXQgaGVyZSBzbyB0aGF0IHdlIGZldGNoIGpvYnMgaW4gc2VxdWVuY2UsIHRoaXMgaXMgaW1wb3J0YW50IHRvIGF2b2lkIHVubmVjZXNzYXJ5IGNhbGxzXG4gICAgICAgICAgICAgICAgLy8gdG8gUmVkaXMgaW4gaGlnaCBjb25jdXJyZW5jeSBzY2VuYXJpb3MuXG4gICAgICAgICAgICAgICAgY29uc3Qgam9iID0gYXdhaXQgZmV0Y2hlZEpvYjtcbiAgICAgICAgICAgICAgICAvLyBObyBtb3JlIGpvYnMgd2FpdGluZyBidXQgd2UgaGF2ZSBvdGhlcnMgdGhhdCBjb3VsZCBzdGFydCBwcm9jZXNzaW5nIGFscmVhZHlcbiAgICAgICAgICAgICAgICBpZiAoIWpvYiAmJiBhc3luY0ZpZm9RdWV1ZS5udW1Ub3RhbCgpID4gMSkge1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gSWYgdGhlcmUgYXJlIHBvdGVudGlhbCBqb2JzIHRvIGJlIHByb2Nlc3NlZCBhbmQgYmxvY2tVbnRpbCBpcyBzZXQsIHdlIHNob3VsZCBleGl0IHRvIGF2b2lkIHdhaXRpbmdcbiAgICAgICAgICAgICAgICAvLyBmb3IgcHJvY2Vzc2luZyB0aGlzIGpvYi5cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5ibG9ja1VudGlsKSB7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFNpbmNlIHRoZXJlIGNhbiBiZSB1bmRlZmluZWQgam9icyBpbiB0aGUgcXVldWUgKHdoZW4gYSBqb2IgZmFpbHMgb3IgcXVldWUgaXMgZW1wdHkpXG4gICAgICAgICAgICAvLyB3ZSBpdGVyYXRlIHVudGlsIHdlIGZpbmQgYSBqb2IuXG4gICAgICAgICAgICBsZXQgam9iO1xuICAgICAgICAgICAgZG8ge1xuICAgICAgICAgICAgICAgIGpvYiA9IGF3YWl0IGFzeW5jRmlmb1F1ZXVlLmZldGNoKCk7XG4gICAgICAgICAgICB9IHdoaWxlICgham9iICYmIGFzeW5jRmlmb1F1ZXVlLm51bVF1ZXVlZCgpID4gMCk7XG4gICAgICAgICAgICBpZiAoam9iKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdG9rZW4gPSBqb2IudG9rZW47XG4gICAgICAgICAgICAgICAgYXN5bmNGaWZvUXVldWUuYWRkKHRoaXMucHJvY2Vzc0pvYihqb2IsIHRva2VuLCAoKSA9PiBhc3luY0ZpZm9RdWV1ZS5udW1Ub3RhbCgpIDw9IHRoaXMuX2NvbmN1cnJlbmN5KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChhc3luY0ZpZm9RdWV1ZS5udW1RdWV1ZWQoKSA9PT0gMCkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMud2FpdEZvclJhdGVMaW1pdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gdGhlIG5leHQgam9iIGluIHF1ZXVlLlxuICAgICAqIEBwYXJhbSB0b2tlbiAtIHdvcmtlciB0b2tlbiB0byBiZSBhc3NpZ25lZCB0byByZXRyaWV2ZWQgam9iXG4gICAgICogQHJldHVybnMgYSBKb2Igb3IgdW5kZWZpbmVkIGlmIG5vIGpvYiB3YXMgYXZhaWxhYmxlIGluIHRoZSBxdWV1ZS5cbiAgICAgKi9cbiAgICBhc3luYyBnZXROZXh0Sm9iKHRva2VuLCB7IGJsb2NrID0gdHJ1ZSB9ID0ge30pIHtcbiAgICAgICAgdmFyIF9hLCBfYjtcbiAgICAgICAgY29uc3QgbmV4dEpvYiA9IGF3YWl0IHRoaXMuX2dldE5leHRKb2IoYXdhaXQgdGhpcy5jbGllbnQsIGF3YWl0IHRoaXMuYmxvY2tpbmdDb25uZWN0aW9uLmNsaWVudCwgdG9rZW4sIHsgYmxvY2sgfSk7XG4gICAgICAgIHJldHVybiB0aGlzLnRyYWNlKGVudW1zXzEuU3BhbktpbmQuSU5URVJOQUwsICdnZXROZXh0Sm9iJywgdGhpcy5uYW1lLCBhc3luYyAoc3BhbikgPT4ge1xuICAgICAgICAgICAgc3BhbiA9PT0gbnVsbCB8fCBzcGFuID09PSB2b2lkIDAgPyB2b2lkIDAgOiBzcGFuLnNldEF0dHJpYnV0ZXMoe1xuICAgICAgICAgICAgICAgIFtlbnVtc18xLlRlbGVtZXRyeUF0dHJpYnV0ZXMuV29ya2VySWRdOiB0aGlzLmlkLFxuICAgICAgICAgICAgICAgIFtlbnVtc18xLlRlbGVtZXRyeUF0dHJpYnV0ZXMuUXVldWVOYW1lXTogdGhpcy5uYW1lLFxuICAgICAgICAgICAgICAgIFtlbnVtc18xLlRlbGVtZXRyeUF0dHJpYnV0ZXMuV29ya2VyTmFtZV06IHRoaXMub3B0cy5uYW1lLFxuICAgICAgICAgICAgICAgIFtlbnVtc18xLlRlbGVtZXRyeUF0dHJpYnV0ZXMuV29ya2VyT3B0aW9uc106IEpTT04uc3RyaW5naWZ5KHsgYmxvY2sgfSksXG4gICAgICAgICAgICAgICAgW2VudW1zXzEuVGVsZW1ldHJ5QXR0cmlidXRlcy5Kb2JJZF06IG5leHRKb2IgPT09IG51bGwgfHwgbmV4dEpvYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogbmV4dEpvYi5pZCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIG5leHRKb2I7XG4gICAgICAgIH0sIChfYiA9IChfYSA9IG5leHRKb2IgPT09IG51bGwgfHwgbmV4dEpvYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogbmV4dEpvYi5vcHRzKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EudGVsZW1ldHJ5KSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IubWV0YWRhdGEpO1xuICAgIH1cbiAgICBhc3luYyBfZ2V0TmV4dEpvYihjbGllbnQsIGJjbGllbnQsIHRva2VuLCB7IGJsb2NrID0gdHJ1ZSB9ID0ge30pIHtcbiAgICAgICAgaWYgKHRoaXMucGF1c2VkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuY2xvc2luZykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmRyYWluZWQgJiYgYmxvY2sgJiYgIXRoaXMubGltaXRVbnRpbCAmJiAhdGhpcy53YWl0aW5nKSB7XG4gICAgICAgICAgICB0aGlzLndhaXRpbmcgPSB0aGlzLndhaXRGb3JKb2IoYmNsaWVudCwgdGhpcy5ibG9ja1VudGlsKTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdGhpcy5ibG9ja1VudGlsID0gYXdhaXQgdGhpcy53YWl0aW5nO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmJsb2NrVW50aWwgPD0gMCB8fCB0aGlzLmJsb2NrVW50aWwgLSBEYXRlLm5vdygpIDwgMSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5tb3ZlVG9BY3RpdmUoY2xpZW50LCB0b2tlbiwgdGhpcy5vcHRzLm5hbWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgICAgIHRoaXMud2FpdGluZyA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuaXNSYXRlTGltaXRlZCgpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMubW92ZVRvQWN0aXZlKGNsaWVudCwgdG9rZW4sIHRoaXMub3B0cy5uYW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBPdmVycmlkZXMgdGhlIHJhdGUgbGltaXQgdG8gYmUgYWN0aXZlIGZvciB0aGUgbmV4dCBqb2JzLlxuICAgICAqIEBkZXByZWNhdGVkIFRoaXMgbWV0aG9kIGlzIGRlcHJlY2F0ZWQgYW5kIHdpbGwgYmUgcmVtb3ZlZCBpbiB2Ni4gVXNlIHF1ZXVlLnJhdGVMaW1pdCBtZXRob2QgaW5zdGVhZC5cbiAgICAgKiBAcGFyYW0gZXhwaXJlVGltZU1zIC0gZXhwaXJlIHRpbWUgaW4gbXMgb2YgdGhpcyByYXRlIGxpbWl0LlxuICAgICAqL1xuICAgIGFzeW5jIHJhdGVMaW1pdChleHBpcmVUaW1lTXMpIHtcbiAgICAgICAgYXdhaXQgdGhpcy50cmFjZShlbnVtc18xLlNwYW5LaW5kLklOVEVSTkFMLCAncmF0ZUxpbWl0JywgdGhpcy5uYW1lLCBhc3luYyAoc3BhbikgPT4ge1xuICAgICAgICAgICAgc3BhbiA9PT0gbnVsbCB8fCBzcGFuID09PSB2b2lkIDAgPyB2b2lkIDAgOiBzcGFuLnNldEF0dHJpYnV0ZXMoe1xuICAgICAgICAgICAgICAgIFtlbnVtc18xLlRlbGVtZXRyeUF0dHJpYnV0ZXMuV29ya2VySWRdOiB0aGlzLmlkLFxuICAgICAgICAgICAgICAgIFtlbnVtc18xLlRlbGVtZXRyeUF0dHJpYnV0ZXMuV29ya2VyUmF0ZUxpbWl0XTogZXhwaXJlVGltZU1zLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmNsaWVudC50aGVuKGNsaWVudCA9PiBjbGllbnQuc2V0KHRoaXMua2V5cy5saW1pdGVyLCBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUiwgJ1BYJywgZXhwaXJlVGltZU1zKSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBnZXQgbWluaW11bUJsb2NrVGltZW91dCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYmxvY2tpbmdDb25uZWN0aW9uLmNhcGFiaWxpdGllcy5jYW5CbG9ja0ZvcjFNc1xuICAgICAgICAgICAgPyAvKiAxIG1pbGxpc2Vjb25kIGlzIGNob3NlbiBiZWNhdXNlIHRoZSBncmFudWxhcml0eSBvZiBvdXIgdGltZXN0YW1wcyBhcmUgbWlsbGlzZWNvbmRzLlxuICAgICAgT2J2aW91c2x5IHdlIGNhbiBzdGlsbCBwcm9jZXNzIG11Y2ggZmFzdGVyIHRoYW4gMSBqb2IgcGVyIG1pbGxpc2Vjb25kIGJ1dCBkZWxheXMgYW5kIHJhdGUgbGltaXRzXG4gICAgICB3aWxsIG5ldmVyIHdvcmsgd2l0aCBtb3JlIGFjY3VyYWN5IHRoYW4gMW1zLiAqL1xuICAgICAgICAgICAgICAgIDAuMDAxXG4gICAgICAgICAgICA6IDAuMDAyO1xuICAgIH1cbiAgICBpc1JhdGVMaW1pdGVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5saW1pdFVudGlsID4gRGF0ZS5ub3coKTtcbiAgICB9XG4gICAgYXN5bmMgbW92ZVRvQWN0aXZlKGNsaWVudCwgdG9rZW4sIG5hbWUpIHtcbiAgICAgICAgY29uc3QgW2pvYkRhdGEsIGlkLCByYXRlTGltaXREZWxheSwgZGVsYXlVbnRpbF0gPSBhd2FpdCB0aGlzLnNjcmlwdHMubW92ZVRvQWN0aXZlKGNsaWVudCwgdG9rZW4sIG5hbWUpO1xuICAgICAgICB0aGlzLnVwZGF0ZURlbGF5cyhyYXRlTGltaXREZWxheSwgZGVsYXlVbnRpbCk7XG4gICAgICAgIHJldHVybiB0aGlzLm5leHRKb2JGcm9tSm9iRGF0YShqb2JEYXRhLCBpZCwgdG9rZW4pO1xuICAgIH1cbiAgICBhc3luYyB3YWl0Rm9ySm9iKGJjbGllbnQsIGJsb2NrVW50aWwpIHtcbiAgICAgICAgaWYgKHRoaXMucGF1c2VkKSB7XG4gICAgICAgICAgICByZXR1cm4gSW5maW5pdHk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHRpbWVvdXQ7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuY2xvc2luZyAmJiAhdGhpcy5pc1JhdGVMaW1pdGVkKCkpIHtcbiAgICAgICAgICAgICAgICBsZXQgYmxvY2tUaW1lb3V0ID0gdGhpcy5nZXRCbG9ja1RpbWVvdXQoYmxvY2tVbnRpbCk7XG4gICAgICAgICAgICAgICAgaWYgKGJsb2NrVGltZW91dCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgYmxvY2tUaW1lb3V0ID0gdGhpcy5ibG9ja2luZ0Nvbm5lY3Rpb24uY2FwYWJpbGl0aWVzLmNhbkRvdWJsZVRpbWVvdXRcbiAgICAgICAgICAgICAgICAgICAgICAgID8gYmxvY2tUaW1lb3V0XG4gICAgICAgICAgICAgICAgICAgICAgICA6IE1hdGguY2VpbChibG9ja1RpbWVvdXQpO1xuICAgICAgICAgICAgICAgICAgICAvLyBXZSBjYW5ub3QgdHJ1c3QgdGhhdCB0aGUgYmxvY2tpbmcgY29ubmVjdGlvbiBzdGF5cyBibG9ja2luZyBmb3JldmVyXG4gICAgICAgICAgICAgICAgICAgIC8vIGR1ZSB0byBpc3N1ZXMgaW4gUmVkaXMgYW5kIElPUmVkaXMsIHNvIHdlIHdpbGwgcmVjb25uZWN0IGlmIHdlXG4gICAgICAgICAgICAgICAgICAgIC8vIGRvbid0IGdldCBhIHJlc3BvbnNlIGluIHRoZSBleHBlY3RlZCB0aW1lLlxuICAgICAgICAgICAgICAgICAgICB0aW1lb3V0ID0gc2V0VGltZW91dChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBiY2xpZW50LmRpc2Nvbm5lY3QoIXRoaXMuY2xvc2luZyk7XG4gICAgICAgICAgICAgICAgICAgIH0sIGJsb2NrVGltZW91dCAqIDEwMDAgKyAxMDAwKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVEZWxheXMoKTsgLy8gcmVzZXQgZGVsYXlzIHRvIGF2b2lkIHJldXNpbmcgc2FtZSB2YWx1ZXMgaW4gbmV4dCBpdGVyYXRpb25cbiAgICAgICAgICAgICAgICAgICAgLy8gTWFya2VycyBzaG91bGQgb25seSBiZSB1c2VkIGZvciB1bi1ibG9ja2luZywgc28gd2Ugd2lsbCBoYW5kbGUgdGhlbSBpbiB0aGlzXG4gICAgICAgICAgICAgICAgICAgIC8vIGZ1bmN0aW9uIG9ubHkuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGJjbGllbnQuYnpwb3BtaW4odGhpcy5rZXlzLm1hcmtlciwgYmxvY2tUaW1lb3V0KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgW19rZXksIG1lbWJlciwgc2NvcmVdID0gcmVzdWx0O1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1lbWJlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld0Jsb2NrVW50aWwgPSBwYXJzZUludChzY29yZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVXNlIGJ5IHBybyB2ZXJzaW9uIGFzIHJhdGUgbGltaXRlZCBncm91cHMgY291bGQgZ2VuZXJhdGUgbG93ZXIgYmxvY2tVbnRpbCB2YWx1ZXNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBtYXJrZXJzIG9ubHkgcmV0dXJuIGRlbGF5cyBmb3IgZGVsYXllZCBqb2JzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJsb2NrVW50aWwgJiYgbmV3QmxvY2tVbnRpbCA+IGJsb2NrVW50aWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGJsb2NrVW50aWw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXdCbG9ja1VudGlsO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgaWYgKCgwLCB1dGlsc18xLmlzTm90Q29ubmVjdGlvbkVycm9yKShlcnJvcikpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2Vycm9yJywgZXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCF0aGlzLmNsb3NpbmcpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmRlbGF5KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIEluZmluaXR5O1xuICAgIH1cbiAgICBnZXRCbG9ja1RpbWVvdXQoYmxvY2tVbnRpbCkge1xuICAgICAgICBjb25zdCBvcHRzID0gdGhpcy5vcHRzO1xuICAgICAgICAvLyB3aGVuIHRoZXJlIGFyZSBkZWxheWVkIGpvYnNcbiAgICAgICAgaWYgKGJsb2NrVW50aWwpIHtcbiAgICAgICAgICAgIGNvbnN0IGJsb2NrRGVsYXkgPSBibG9ja1VudGlsIC0gRGF0ZS5ub3coKTtcbiAgICAgICAgICAgIC8vIHdoZW4gd2UgcmVhY2ggdGhlIHRpbWUgdG8gZ2V0IG5ldyBqb2JzXG4gICAgICAgICAgICBpZiAoYmxvY2tEZWxheSA8PSAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGJsb2NrRGVsYXk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChibG9ja0RlbGF5IDwgdGhpcy5taW5pbXVtQmxvY2tUaW1lb3V0ICogMTAwMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLm1pbmltdW1CbG9ja1RpbWVvdXQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBXZSByZXN0cmljdCB0aGUgbWF4aW11bSBibG9jayB0aW1lb3V0IHRvIDEwIHNlY29uZCB0byBhdm9pZFxuICAgICAgICAgICAgICAgIC8vIGJsb2NraW5nIHRoZSBjb25uZWN0aW9uIGZvciB0b28gbG9uZyBpbiB0aGUgY2FzZSBvZiByZWNvbm5lY3Rpb25zXG4gICAgICAgICAgICAgICAgLy8gcmVmZXJlbmNlOiBodHRwczovL2dpdGh1Yi5jb20vdGFza2ZvcmNlc2gvYnVsbG1xL2lzc3Vlcy8xNjU4XG4gICAgICAgICAgICAgICAgcmV0dXJuIE1hdGgubWluKGJsb2NrRGVsYXkgLyAxMDAwLCBtYXhpbXVtQmxvY2tUaW1lb3V0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBNYXRoLm1heChvcHRzLmRyYWluRGVsYXksIHRoaXMubWluaW11bUJsb2NrVGltZW91dCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0UmF0ZUxpbWl0RGVsYXkoZGVsYXkpIHtcbiAgICAgICAgLy8gV2UgcmVzdHJpY3QgdGhlIG1heGltdW0gbGltaXQgdW50aWwgdG8gMzAgc2Vjb25kIHRvXG4gICAgICAgIC8vIGJlIGFibGUgdG8gcHJvbW90ZSBkZWxheWVkIGpvYnMgd2hpbGUgcXVldWUgaXMgcmF0ZSBsaW1pdGVkXG4gICAgICAgIHJldHVybiBNYXRoLm1pbihkZWxheSwgbWF4aW11bVJhdGVMaW1pdERlbGF5KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBUaGlzIGZ1bmN0aW9uIGlzIGV4cG9zZWQgb25seSBmb3IgdGVzdGluZyBwdXJwb3Nlcy5cbiAgICAgKi9cbiAgICBhc3luYyBkZWxheShtaWxsaXNlY29uZHMsIGFib3J0Q29udHJvbGxlcikge1xuICAgICAgICBhd2FpdCAoMCwgdXRpbHNfMS5kZWxheSkobWlsbGlzZWNvbmRzIHx8IHV0aWxzXzEuREVMQVlfVElNRV8xLCBhYm9ydENvbnRyb2xsZXIpO1xuICAgIH1cbiAgICB1cGRhdGVEZWxheXMobGltaXREZWxheSA9IDAsIGRlbGF5VW50aWwgPSAwKSB7XG4gICAgICAgIGNvbnN0IGNsYW1wZWRMaW1pdCA9IE1hdGgubWF4KGxpbWl0RGVsYXksIDApO1xuICAgICAgICBpZiAoY2xhbXBlZExpbWl0ID4gMCkge1xuICAgICAgICAgICAgdGhpcy5saW1pdFVudGlsID0gRGF0ZS5ub3coKSArIGNsYW1wZWRMaW1pdDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMubGltaXRVbnRpbCA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5ibG9ja1VudGlsID0gTWF0aC5tYXgoZGVsYXlVbnRpbCwgMCkgfHwgMDtcbiAgICB9XG4gICAgYXN5bmMgbmV4dEpvYkZyb21Kb2JEYXRhKGpvYkRhdGEsIGpvYklkLCB0b2tlbikge1xuICAgICAgICBpZiAoIWpvYkRhdGEpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5kcmFpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdkcmFpbmVkJyk7XG4gICAgICAgICAgICAgICAgdGhpcy5kcmFpbmVkID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuZHJhaW5lZCA9IGZhbHNlO1xuICAgICAgICAgICAgY29uc3Qgam9iID0gdGhpcy5jcmVhdGVKb2Ioam9iRGF0YSwgam9iSWQpO1xuICAgICAgICAgICAgam9iLnRva2VuID0gdG9rZW47XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucmV0cnlJZkZhaWxlZChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChqb2IucmVwZWF0Sm9iS2V5ICYmIGpvYi5yZXBlYXRKb2JLZXkuc3BsaXQoJzonKS5sZW5ndGggPCA1KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBqb2JTY2hlZHVsZXIgPSBhd2FpdCB0aGlzLmpvYlNjaGVkdWxlcjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGpvYlNjaGVkdWxlci51cHNlcnRKb2JTY2hlZHVsZXIoXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBNb3N0IG9mIHRoZXNlIGFyZ3VtZW50cyBhcmUgbm90IHJlYWxseSBuZWVkZWRcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFueW1vcmUgYXMgd2UgcmVhZCB0aGVtIGZyb20gdGhlIGpvYiBzY2hlZHVsZXIgaXRzZWxmXG4gICAgICAgICAgICAgICAgICAgICAgICBqb2IucmVwZWF0Sm9iS2V5LCBqb2Iub3B0cy5yZXBlYXQsIGpvYi5uYW1lLCBqb2IuZGF0YSwgam9iLm9wdHMsIHsgb3ZlcnJpZGU6IGZhbHNlLCBwcm9kdWNlcklkOiBqb2IuaWQgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoam9iLm9wdHMucmVwZWF0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZXBlYXQgPSBhd2FpdCB0aGlzLnJlcGVhdDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHJlcGVhdC51cGRhdGVSZXBlYXRhYmxlSm9iKGpvYi5uYW1lLCBqb2IuZGF0YSwgam9iLm9wdHMsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdmVycmlkZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sIHsgZGVsYXlJbk1zOiB0aGlzLm9wdHMucnVuUmV0cnlEZWxheSB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAvLyBFbWl0IGVycm9yIGJ1dCBkb24ndCB0aHJvdyB0byBhdm9pZCBicmVha2luZyBjdXJyZW50IGpvYiBjb21wbGV0aW9uXG4gICAgICAgICAgICAgICAgLy8gTm90ZTogVGhpcyBtZWFucyB0aGUgbmV4dCByZXBlYXRhYmxlIGpvYiB3aWxsIG5vdCBiZSBzY2hlZHVsZWRcbiAgICAgICAgICAgICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci5tZXNzYWdlIDogU3RyaW5nKGVycik7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2NoZWR1bGluZ0Vycm9yID0gbmV3IEVycm9yKGBGYWlsZWQgdG8gYWRkIHJlcGVhdGFibGUgam9iIGZvciBuZXh0IGl0ZXJhdGlvbjogJHtlcnJvck1lc3NhZ2V9YCk7XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdlcnJvcicsIHNjaGVkdWxpbmdFcnJvcik7XG4gICAgICAgICAgICAgICAgLy8gUmV0dXJuIHVuZGVmaW5lZCB0byBpbmRpY2F0ZSBubyBuZXh0IGpvYiBpcyBhdmFpbGFibGVcbiAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGpvYjtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBwcm9jZXNzSm9iKGpvYiwgdG9rZW4sIGZldGNoTmV4dENhbGxiYWNrID0gKCkgPT4gdHJ1ZSkge1xuICAgICAgICB2YXIgX2EsIF9iO1xuICAgICAgICBjb25zdCBzcmNQcm9wYWdhdGlvbk1lZGF0YWRhID0gKF9iID0gKF9hID0gam9iLm9wdHMpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS50ZWxlbWV0cnkpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5tZXRhZGF0YTtcbiAgICAgICAgcmV0dXJuIHRoaXMudHJhY2UoZW51bXNfMS5TcGFuS2luZC5DT05TVU1FUiwgJ3Byb2Nlc3MnLCB0aGlzLm5hbWUsIGFzeW5jIChzcGFuKSA9PiB7XG4gICAgICAgICAgICBzcGFuID09PSBudWxsIHx8IHNwYW4gPT09IHZvaWQgMCA/IHZvaWQgMCA6IHNwYW4uc2V0QXR0cmlidXRlcyh7XG4gICAgICAgICAgICAgICAgW2VudW1zXzEuVGVsZW1ldHJ5QXR0cmlidXRlcy5Xb3JrZXJJZF06IHRoaXMuaWQsXG4gICAgICAgICAgICAgICAgW2VudW1zXzEuVGVsZW1ldHJ5QXR0cmlidXRlcy5Xb3JrZXJOYW1lXTogdGhpcy5vcHRzLm5hbWUsXG4gICAgICAgICAgICAgICAgW2VudW1zXzEuVGVsZW1ldHJ5QXR0cmlidXRlcy5Kb2JJZF06IGpvYi5pZCxcbiAgICAgICAgICAgICAgICBbZW51bXNfMS5UZWxlbWV0cnlBdHRyaWJ1dGVzLkpvYk5hbWVdOiBqb2IubmFtZSxcbiAgICAgICAgICAgICAgICBbZW51bXNfMS5UZWxlbWV0cnlBdHRyaWJ1dGVzLkpvYkF0dGVtcHRzTWFkZV06IGpvYi5hdHRlbXB0c01hZGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuZW1pdCgnYWN0aXZlJywgam9iLCAnd2FpdGluZycpO1xuICAgICAgICAgICAgY29uc3QgcHJvY2Vzc2VkT24gPSBEYXRlLm5vdygpO1xuICAgICAgICAgICAgdGhpcy5sb2NrTWFuYWdlci50cmFja0pvYihqb2IuaWQsIHRva2VuLCBwcm9jZXNzZWRPbik7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHVucmVjb3ZlcmFibGVFcnJvck1lc3NhZ2UgPSB0aGlzLmdldFVucmVjb3ZlcmFibGVFcnJvck1lc3NhZ2Uoam9iKTtcbiAgICAgICAgICAgICAgICBpZiAodW5yZWNvdmVyYWJsZUVycm9yTWVzc2FnZSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBmYWlsZWQgPSBhd2FpdCB0aGlzLnJldHJ5SWZGYWlsZWQoKCkgPT4gdGhpcy5oYW5kbGVGYWlsZWQobmV3IGVycm9yc18xLlVucmVjb3ZlcmFibGVFcnJvcih1bnJlY292ZXJhYmxlRXJyb3JNZXNzYWdlKSwgam9iLCB0b2tlbiwgZmV0Y2hOZXh0Q2FsbGJhY2ssIHNwYW4pLCB7IGRlbGF5SW5NczogdGhpcy5vcHRzLnJ1blJldHJ5RGVsYXksIHNwYW4gfSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWlsZWQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuY2FsbFByb2Nlc3NKb2Ioam9iLCB0b2tlbik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMucmV0cnlJZkZhaWxlZCgoKSA9PiB0aGlzLmhhbmRsZUNvbXBsZXRlZChyZXN1bHQsIGpvYiwgdG9rZW4sIGZldGNoTmV4dENhbGxiYWNrLCBzcGFuKSwgeyBkZWxheUluTXM6IHRoaXMub3B0cy5ydW5SZXRyeURlbGF5LCBzcGFuIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIGNvbnN0IGZhaWxlZCA9IGF3YWl0IHRoaXMucmV0cnlJZkZhaWxlZCgoKSA9PiB0aGlzLmhhbmRsZUZhaWxlZChlcnIsIGpvYiwgdG9rZW4sIGZldGNoTmV4dENhbGxiYWNrLCBzcGFuKSwgeyBkZWxheUluTXM6IHRoaXMub3B0cy5ydW5SZXRyeURlbGF5LCBzcGFuLCBvbmx5RW1pdEVycm9yOiB0cnVlIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWlsZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICB0aGlzLmxvY2tNYW5hZ2VyLnVudHJhY2tKb2Ioam9iLmlkKTtcbiAgICAgICAgICAgICAgICBzcGFuID09PSBudWxsIHx8IHNwYW4gPT09IHZvaWQgMCA/IHZvaWQgMCA6IHNwYW4uc2V0QXR0cmlidXRlcyh7XG4gICAgICAgICAgICAgICAgICAgIFtlbnVtc18xLlRlbGVtZXRyeUF0dHJpYnV0ZXMuSm9iRmluaXNoZWRUaW1lc3RhbXBdOiBEYXRlLm5vdygpLFxuICAgICAgICAgICAgICAgICAgICBbZW51bXNfMS5UZWxlbWV0cnlBdHRyaWJ1dGVzLkpvYlByb2Nlc3NlZFRpbWVzdGFtcF06IHByb2Nlc3NlZE9uLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCBzcmNQcm9wYWdhdGlvbk1lZGF0YWRhKTtcbiAgICB9XG4gICAgZ2V0VW5yZWNvdmVyYWJsZUVycm9yTWVzc2FnZShqb2IpIHtcbiAgICAgICAgaWYgKGpvYi5kZWZlcnJlZEZhaWx1cmUpIHtcbiAgICAgICAgICAgIHJldHVybiBqb2IuZGVmZXJyZWRGYWlsdXJlO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLm9wdHMubWF4U3RhcnRlZEF0dGVtcHRzICYmXG4gICAgICAgICAgICB0aGlzLm9wdHMubWF4U3RhcnRlZEF0dGVtcHRzIDwgam9iLmF0dGVtcHRzU3RhcnRlZCkge1xuICAgICAgICAgICAgcmV0dXJuICdqb2Igc3RhcnRlZCBtb3JlIHRoYW4gYWxsb3dhYmxlIGxpbWl0JztcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBoYW5kbGVDb21wbGV0ZWQocmVzdWx0LCBqb2IsIHRva2VuLCBmZXRjaE5leHRDYWxsYmFjayA9ICgpID0+IHRydWUsIHNwYW4pIHtcbiAgICAgICAgaWYgKCF0aGlzLmNvbm5lY3Rpb24uY2xvc2luZykge1xuICAgICAgICAgICAgY29uc3QgY29tcGxldGVkID0gYXdhaXQgam9iLm1vdmVUb0NvbXBsZXRlZChyZXN1bHQsIHRva2VuLCBmZXRjaE5leHRDYWxsYmFjaygpICYmICEodGhpcy5jbG9zaW5nIHx8IHRoaXMucGF1c2VkKSk7XG4gICAgICAgICAgICB0aGlzLmVtaXQoJ2NvbXBsZXRlZCcsIGpvYiwgcmVzdWx0LCAnYWN0aXZlJyk7XG4gICAgICAgICAgICBzcGFuID09PSBudWxsIHx8IHNwYW4gPT09IHZvaWQgMCA/IHZvaWQgMCA6IHNwYW4uYWRkRXZlbnQoJ2pvYiBjb21wbGV0ZWQnLCB7XG4gICAgICAgICAgICAgICAgW2VudW1zXzEuVGVsZW1ldHJ5QXR0cmlidXRlcy5Kb2JSZXN1bHRdOiBKU09OLnN0cmluZ2lmeShyZXN1bHQpLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb25zdCBbam9iRGF0YSwgam9iSWQsIHJhdGVMaW1pdERlbGF5LCBkZWxheVVudGlsXSA9IGNvbXBsZXRlZCB8fCBbXTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlRGVsYXlzKHJhdGVMaW1pdERlbGF5LCBkZWxheVVudGlsKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm5leHRKb2JGcm9tSm9iRGF0YShqb2JEYXRhLCBqb2JJZCwgdG9rZW4pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIGhhbmRsZUZhaWxlZChlcnIsIGpvYiwgdG9rZW4sIGZldGNoTmV4dENhbGxiYWNrID0gKCkgPT4gdHJ1ZSwgc3Bhbikge1xuICAgICAgICBpZiAoIXRoaXMuY29ubmVjdGlvbi5jbG9zaW5nKSB7XG4gICAgICAgICAgICAvLyBDaGVjayBpZiB0aGUgam9iIHdhcyBtYW51YWxseSByYXRlLWxpbWl0ZWRcbiAgICAgICAgICAgIGlmIChlcnIubWVzc2FnZSA9PT0gZXJyb3JzXzEuUkFURV9MSU1JVF9FUlJPUikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJhdGVMaW1pdFR0bCA9IGF3YWl0IHRoaXMubW92ZUxpbWl0ZWRCYWNrVG9XYWl0KGpvYiwgdG9rZW4pO1xuICAgICAgICAgICAgICAgIHRoaXMubGltaXRVbnRpbCA9IHJhdGVMaW1pdFR0bCA+IDAgPyBEYXRlLm5vdygpICsgcmF0ZUxpbWl0VHRsIDogMDtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZXJyIGluc3RhbmNlb2YgZXJyb3JzXzEuRGVsYXllZEVycm9yIHx8XG4gICAgICAgICAgICAgICAgZXJyLm5hbWUgPT0gJ0RlbGF5ZWRFcnJvcicgfHxcbiAgICAgICAgICAgICAgICBlcnIgaW5zdGFuY2VvZiBlcnJvcnNfMS5XYWl0aW5nRXJyb3IgfHxcbiAgICAgICAgICAgICAgICBlcnIubmFtZSA9PSAnV2FpdGluZ0Vycm9yJyB8fFxuICAgICAgICAgICAgICAgIGVyciBpbnN0YW5jZW9mIGVycm9yc18xLldhaXRpbmdDaGlsZHJlbkVycm9yIHx8XG4gICAgICAgICAgICAgICAgZXJyLm5hbWUgPT0gJ1dhaXRpbmdDaGlsZHJlbkVycm9yJykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNsaWVudCA9IGF3YWl0IHRoaXMuY2xpZW50O1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLm1vdmVUb0FjdGl2ZShjbGllbnQsIHRva2VuLCB0aGlzLm9wdHMubmFtZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBqb2IubW92ZVRvRmFpbGVkKGVyciwgdG9rZW4sIGZldGNoTmV4dENhbGxiYWNrKCkgJiYgISh0aGlzLmNsb3NpbmcgfHwgdGhpcy5wYXVzZWQpKTtcbiAgICAgICAgICAgIHRoaXMuZW1pdCgnZmFpbGVkJywgam9iLCBlcnIsICdhY3RpdmUnKTtcbiAgICAgICAgICAgIHNwYW4gPT09IG51bGwgfHwgc3BhbiA9PT0gdm9pZCAwID8gdm9pZCAwIDogc3Bhbi5hZGRFdmVudCgnam9iIGZhaWxlZCcsIHtcbiAgICAgICAgICAgICAgICBbZW51bXNfMS5UZWxlbWV0cnlBdHRyaWJ1dGVzLkpvYkZhaWxlZFJlYXNvbl06IGVyci5tZXNzYWdlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgW2pvYkRhdGEsIGpvYklkLCByYXRlTGltaXREZWxheSwgZGVsYXlVbnRpbF0gPSByZXN1bHQ7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVEZWxheXMocmF0ZUxpbWl0RGVsYXksIGRlbGF5VW50aWwpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLm5leHRKb2JGcm9tSm9iRGF0YShqb2JEYXRhLCBqb2JJZCwgdG9rZW4pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqXG4gICAgICogUGF1c2VzIHRoZSBwcm9jZXNzaW5nIG9mIHRoaXMgcXVldWUgb25seSBmb3IgdGhpcyB3b3JrZXIuXG4gICAgICovXG4gICAgYXN5bmMgcGF1c2UoZG9Ob3RXYWl0QWN0aXZlKSB7XG4gICAgICAgIGF3YWl0IHRoaXMudHJhY2UoZW51bXNfMS5TcGFuS2luZC5JTlRFUk5BTCwgJ3BhdXNlJywgdGhpcy5uYW1lLCBhc3luYyAoc3BhbikgPT4ge1xuICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgICAgc3BhbiA9PT0gbnVsbCB8fCBzcGFuID09PSB2b2lkIDAgPyB2b2lkIDAgOiBzcGFuLnNldEF0dHJpYnV0ZXMoe1xuICAgICAgICAgICAgICAgIFtlbnVtc18xLlRlbGVtZXRyeUF0dHJpYnV0ZXMuV29ya2VySWRdOiB0aGlzLmlkLFxuICAgICAgICAgICAgICAgIFtlbnVtc18xLlRlbGVtZXRyeUF0dHJpYnV0ZXMuV29ya2VyTmFtZV06IHRoaXMub3B0cy5uYW1lLFxuICAgICAgICAgICAgICAgIFtlbnVtc18xLlRlbGVtZXRyeUF0dHJpYnV0ZXMuV29ya2VyRG9Ob3RXYWl0QWN0aXZlXTogZG9Ob3RXYWl0QWN0aXZlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoIXRoaXMucGF1c2VkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXVzZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGlmICghZG9Ob3RXYWl0QWN0aXZlKSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMud2hlbkN1cnJlbnRKb2JzRmluaXNoZWQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgKF9hID0gdGhpcy5zdGFsbGVkQ2hlY2tTdG9wcGVyKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuY2FsbCh0aGlzKTtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ3BhdXNlZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBSZXN1bWVzIHByb2Nlc3Npbmcgb2YgdGhpcyB3b3JrZXIgKGlmIHBhdXNlZCkuXG4gICAgICovXG4gICAgcmVzdW1lKCkge1xuICAgICAgICBpZiAoIXRoaXMucnVubmluZykge1xuICAgICAgICAgICAgdGhpcy50cmFjZShlbnVtc18xLlNwYW5LaW5kLklOVEVSTkFMLCAncmVzdW1lJywgdGhpcy5uYW1lLCBzcGFuID0+IHtcbiAgICAgICAgICAgICAgICBzcGFuID09PSBudWxsIHx8IHNwYW4gPT09IHZvaWQgMCA/IHZvaWQgMCA6IHNwYW4uc2V0QXR0cmlidXRlcyh7XG4gICAgICAgICAgICAgICAgICAgIFtlbnVtc18xLlRlbGVtZXRyeUF0dHJpYnV0ZXMuV29ya2VySWRdOiB0aGlzLmlkLFxuICAgICAgICAgICAgICAgICAgICBbZW51bXNfMS5UZWxlbWV0cnlBdHRyaWJ1dGVzLldvcmtlck5hbWVdOiB0aGlzLm9wdHMubmFtZSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLnBhdXNlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnByb2Nlc3NGbikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJ1bigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ3Jlc3VtZWQnKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqXG4gICAgICogQ2hlY2tzIGlmIHdvcmtlciBpcyBwYXVzZWQuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB0cnVlIGlmIHdvcmtlciBpcyBwYXVzZWQsIGZhbHNlIG90aGVyd2lzZS5cbiAgICAgKi9cbiAgICBpc1BhdXNlZCgpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5wYXVzZWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqXG4gICAgICogQ2hlY2tzIGlmIHdvcmtlciBpcyBjdXJyZW50bHkgcnVubmluZy5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHRydWUgaWYgd29ya2VyIGlzIHJ1bm5pbmcsIGZhbHNlIG90aGVyd2lzZS5cbiAgICAgKi9cbiAgICBpc1J1bm5pbmcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJ1bm5pbmc7XG4gICAgfVxuICAgIC8qKlxuICAgICAqXG4gICAgICogQ2xvc2VzIHRoZSB3b3JrZXIgYW5kIHJlbGF0ZWQgcmVkaXMgY29ubmVjdGlvbnMuXG4gICAgICpcbiAgICAgKiBUaGlzIG1ldGhvZCB3YWl0cyBmb3IgY3VycmVudCBqb2JzIHRvIGZpbmFsaXplIGJlZm9yZSByZXR1cm5pbmcuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZm9yY2UgLSBVc2UgZm9yY2UgYm9vbGVhbiBwYXJhbWV0ZXIgaWYgeW91IGRvIG5vdCB3YW50IHRvIHdhaXQgZm9yXG4gICAgICogY3VycmVudCBqb2JzIHRvIGJlIHByb2Nlc3NlZC4gV2hlbiB1c2luZyB0ZWxlbWV0cnksIGJlIG1pbmRmdWwgdGhhdCBpdCBjYW5cbiAgICAgKiBpbnRlcmZlcmUgd2l0aCB0aGUgcHJvcGVyIGNsb3N1cmUgb2Ygc3BhbnMsIHBvdGVudGlhbGx5IHByZXZlbnRpbmcgdGhlbSBmcm9tIGJlaW5nIGV4cG9ydGVkLlxuICAgICAqXG4gICAgICogQHJldHVybnMgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHdoZW4gdGhlIHdvcmtlciBoYXMgYmVlbiBjbG9zZWQuXG4gICAgICovXG4gICAgYXN5bmMgY2xvc2UoZm9yY2UgPSBmYWxzZSkge1xuICAgICAgICBpZiAodGhpcy5jbG9zaW5nKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jbG9zaW5nO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY2xvc2luZyA9IChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnRyYWNlKGVudW1zXzEuU3BhbktpbmQuSU5URVJOQUwsICdjbG9zZScsIHRoaXMubmFtZSwgYXN5bmMgKHNwYW4pID0+IHtcbiAgICAgICAgICAgICAgICB2YXIgX2EsIF9iO1xuICAgICAgICAgICAgICAgIHNwYW4gPT09IG51bGwgfHwgc3BhbiA9PT0gdm9pZCAwID8gdm9pZCAwIDogc3Bhbi5zZXRBdHRyaWJ1dGVzKHtcbiAgICAgICAgICAgICAgICAgICAgW2VudW1zXzEuVGVsZW1ldHJ5QXR0cmlidXRlcy5Xb3JrZXJJZF06IHRoaXMuaWQsXG4gICAgICAgICAgICAgICAgICAgIFtlbnVtc18xLlRlbGVtZXRyeUF0dHJpYnV0ZXMuV29ya2VyTmFtZV06IHRoaXMub3B0cy5uYW1lLFxuICAgICAgICAgICAgICAgICAgICBbZW51bXNfMS5UZWxlbWV0cnlBdHRyaWJ1dGVzLldvcmtlckZvcmNlQ2xvc2VdOiBmb3JjZSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2Nsb3NpbmcnLCAnY2xvc2luZyBxdWV1ZScpO1xuICAgICAgICAgICAgICAgIChfYSA9IHRoaXMuYWJvcnREZWxheUNvbnRyb2xsZXIpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5hYm9ydCgpO1xuICAgICAgICAgICAgICAgIC8vIERlZmluZSB0aGUgYXN5bmMgY2xlYW51cCBmdW5jdGlvbnNcbiAgICAgICAgICAgICAgICBjb25zdCBhc3luY0NsZWFudXBzID0gW1xuICAgICAgICAgICAgICAgICAgICAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZm9yY2UgfHwgdGhpcy53aGVuQ3VycmVudEpvYnNGaW5pc2hlZChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICgpID0+IHRoaXMubG9ja01hbmFnZXIuY2xvc2UoKSxcbiAgICAgICAgICAgICAgICAgICAgKCkgPT4geyB2YXIgX2E7IHJldHVybiAoX2EgPSB0aGlzLmNoaWxkUG9vbCkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmNsZWFuKCk7IH0sXG4gICAgICAgICAgICAgICAgICAgICgpID0+IHRoaXMuYmxvY2tpbmdDb25uZWN0aW9uLmNsb3NlKGZvcmNlKSxcbiAgICAgICAgICAgICAgICAgICAgKCkgPT4gdGhpcy5jb25uZWN0aW9uLmNsb3NlKGZvcmNlKSxcbiAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgICAgIC8vIFJ1biBjbGVhbnVwIGZ1bmN0aW9ucyBzZXF1ZW50aWFsbHkgYW5kIG1ha2Ugc3VyZSBhbGwgYXJlIHJ1biBkZXNwaXRlIGFueSBlcnJvcnNcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGNsZWFudXAgb2YgYXN5bmNDbGVhbnVwcykge1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgY2xlYW51cCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnZXJyb3InLCBlcnIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIChfYiA9IHRoaXMuc3RhbGxlZENoZWNrU3RvcHBlcikgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLmNhbGwodGhpcyk7XG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnY2xvc2VkJyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSkoKTtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuY2xvc2luZztcbiAgICB9XG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBNYW51YWxseSBzdGFydHMgdGhlIHN0YWxsZWQgY2hlY2tlci5cbiAgICAgKiBUaGUgY2hlY2sgd2lsbCBydW4gb25jZSBhcyBzb29uIGFzIHRoaXMgbWV0aG9kIGlzIGNhbGxlZCwgYW5kXG4gICAgICogdGhlbiBldmVyeSBvcHRzLnN0YWxsZWRJbnRlcnZhbCBtaWxsaXNlY29uZHMgdW50aWwgdGhlIHdvcmtlciBpcyBjbG9zZWQuXG4gICAgICogTm90ZTogTm9ybWFsbHkgeW91IGRvIG5vdCBuZWVkIHRvIGNhbGwgdGhpcyBtZXRob2QsIHNpbmNlIHRoZSBzdGFsbGVkIGNoZWNrZXJcbiAgICAgKiBpcyBhdXRvbWF0aWNhbGx5IHN0YXJ0ZWQgd2hlbiB0aGUgd29ya2VyIHN0YXJ0cyBwcm9jZXNzaW5nIGpvYnMgYWZ0ZXJcbiAgICAgKiBjYWxsaW5nIHJ1bi4gSG93ZXZlciBpZiB5b3Ugd2FudCB0byBwcm9jZXNzIHRoZSBqb2JzIG1hbnVhbGx5IHlvdSBuZWVkXG4gICAgICogdG8gY2FsbCB0aGlzIG1ldGhvZCB0byBzdGFydCB0aGUgc3RhbGxlZCBjaGVja2VyLlxuICAgICAqXG4gICAgICogQHNlZSB7QGxpbmsgaHR0cHM6Ly9kb2NzLmJ1bGxtcS5pby9wYXR0ZXJucy9tYW51YWxseS1mZXRjaGluZy1qb2JzfVxuICAgICAqL1xuICAgIGFzeW5jIHN0YXJ0U3RhbGxlZENoZWNrVGltZXIoKSB7XG4gICAgICAgIGlmICghdGhpcy5vcHRzLnNraXBTdGFsbGVkQ2hlY2spIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5jbG9zaW5nKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy50cmFjZShlbnVtc18xLlNwYW5LaW5kLklOVEVSTkFMLCAnc3RhcnRTdGFsbGVkQ2hlY2tUaW1lcicsIHRoaXMubmFtZSwgYXN5bmMgKHNwYW4pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgc3BhbiA9PT0gbnVsbCB8fCBzcGFuID09PSB2b2lkIDAgPyB2b2lkIDAgOiBzcGFuLnNldEF0dHJpYnV0ZXMoe1xuICAgICAgICAgICAgICAgICAgICAgICAgW2VudW1zXzEuVGVsZW1ldHJ5QXR0cmlidXRlcy5Xb3JrZXJJZF06IHRoaXMuaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBbZW51bXNfMS5UZWxlbWV0cnlBdHRyaWJ1dGVzLldvcmtlck5hbWVdOiB0aGlzLm9wdHMubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhbGxlZENoZWNrZXIoKS5jYXRjaChlcnIgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdlcnJvcicsIGVycik7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIHN0YWxsZWRDaGVja2VyKCkge1xuICAgICAgICB3aGlsZSAoISh0aGlzLmNsb3NpbmcgfHwgdGhpcy5wYXVzZWQpKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmNoZWNrQ29ubmVjdGlvbkVycm9yKCgpID0+IHRoaXMubW92ZVN0YWxsZWRKb2JzVG9XYWl0KCkpO1xuICAgICAgICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgdGltZW91dCA9IHNldFRpbWVvdXQocmVzb2x2ZSwgdGhpcy5vcHRzLnN0YWxsZWRJbnRlcnZhbCk7XG4gICAgICAgICAgICAgICAgdGhpcy5zdGFsbGVkQ2hlY2tTdG9wcGVyID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIHByb21pc2UgdGhhdCByZXNvbHZlcyB3aGVuIGFjdGl2ZSBqb2JzIGFyZSBjbGVhcmVkXG4gICAgICpcbiAgICAgKiBAcmV0dXJuc1xuICAgICAqL1xuICAgIGFzeW5jIHdoZW5DdXJyZW50Sm9ic0ZpbmlzaGVkKHJlY29ubmVjdCA9IHRydWUpIHtcbiAgICAgICAgLy9cbiAgICAgICAgLy8gRm9yY2UgcmVjb25uZWN0aW9uIG9mIGJsb2NraW5nIGNvbm5lY3Rpb24gdG8gYWJvcnQgYmxvY2tpbmcgcmVkaXMgY2FsbCBpbW1lZGlhdGVseS5cbiAgICAgICAgLy9cbiAgICAgICAgaWYgKHRoaXMud2FpdGluZykge1xuICAgICAgICAgICAgLy8gSWYgd2UgYXJlIG5vdCBnb2luZyB0byByZWNvbm5lY3QsIHdlIHdpbGwgbm90IHdhaXQgZm9yIHRoZSBkaXNjb25uZWN0aW9uLlxuICAgICAgICAgICAgYXdhaXQgdGhpcy5ibG9ja2luZ0Nvbm5lY3Rpb24uZGlzY29ubmVjdChyZWNvbm5lY3QpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmVjb25uZWN0ID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMubWFpbkxvb3BSdW5uaW5nKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLm1haW5Mb29wUnVubmluZztcbiAgICAgICAgfVxuICAgICAgICByZWNvbm5lY3QgJiYgKGF3YWl0IHRoaXMuYmxvY2tpbmdDb25uZWN0aW9uLnJlY29ubmVjdCgpKTtcbiAgICB9XG4gICAgYXN5bmMgcmV0cnlJZkZhaWxlZChmbiwgb3B0cykge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIGxldCByZXRyeSA9IDA7XG4gICAgICAgIGNvbnN0IG1heFJldHJpZXMgPSBvcHRzLm1heFJldHJpZXMgfHwgSW5maW5pdHk7XG4gICAgICAgIGRvIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGF3YWl0IGZuKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgKF9hID0gb3B0cy5zcGFuKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EucmVjb3JkRXhjZXB0aW9uKGVyci5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgICBpZiAoKDAsIHV0aWxzXzEuaXNOb3RDb25uZWN0aW9uRXJyb3IpKGVycikpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gRW1pdCBlcnJvciB3aGVuIG5vdCBwYXVzZWQgb3IgY2xvc2luZzsgb3B0aW9uYWxseSBzd2FsbG93IChubyB0aHJvdykgd2hlbiBvcHRzLm9ubHlFbWl0RXJyb3IgaXMgc2V0LlxuICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMucGF1c2VkICYmICF0aGlzLmNsb3NpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnZXJyb3InLCBlcnIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChvcHRzLm9ubHlFbWl0RXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IGVycjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdHMuZGVsYXlJbk1zICYmICF0aGlzLmNsb3NpbmcgJiYgIXRoaXMuY2xvc2VkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmRlbGF5KG9wdHMuZGVsYXlJbk1zLCB0aGlzLmFib3J0RGVsYXlDb250cm9sbGVyKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAocmV0cnkgKyAxID49IG1heFJldHJpZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIHdlJ3ZlIHJlYWNoZWQgbWF4IHJldHJpZXMsIHRocm93IHRoZSBsYXN0IGVycm9yXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gd2hpbGUgKCsrcmV0cnkgPCBtYXhSZXRyaWVzKTtcbiAgICB9XG4gICAgYXN5bmMgbW92ZVN0YWxsZWRKb2JzVG9XYWl0KCkge1xuICAgICAgICBhd2FpdCB0aGlzLnRyYWNlKGVudW1zXzEuU3BhbktpbmQuSU5URVJOQUwsICdtb3ZlU3RhbGxlZEpvYnNUb1dhaXQnLCB0aGlzLm5hbWUsIGFzeW5jIChzcGFuKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzdGFsbGVkID0gYXdhaXQgdGhpcy5zY3JpcHRzLm1vdmVTdGFsbGVkSm9ic1RvV2FpdCgpO1xuICAgICAgICAgICAgc3BhbiA9PT0gbnVsbCB8fCBzcGFuID09PSB2b2lkIDAgPyB2b2lkIDAgOiBzcGFuLnNldEF0dHJpYnV0ZXMoe1xuICAgICAgICAgICAgICAgIFtlbnVtc18xLlRlbGVtZXRyeUF0dHJpYnV0ZXMuV29ya2VySWRdOiB0aGlzLmlkLFxuICAgICAgICAgICAgICAgIFtlbnVtc18xLlRlbGVtZXRyeUF0dHJpYnV0ZXMuV29ya2VyTmFtZV06IHRoaXMub3B0cy5uYW1lLFxuICAgICAgICAgICAgICAgIFtlbnVtc18xLlRlbGVtZXRyeUF0dHJpYnV0ZXMuV29ya2VyU3RhbGxlZEpvYnNdOiBzdGFsbGVkLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBzdGFsbGVkLmZvckVhY2goKGpvYklkKSA9PiB7XG4gICAgICAgICAgICAgICAgc3BhbiA9PT0gbnVsbCB8fCBzcGFuID09PSB2b2lkIDAgPyB2b2lkIDAgOiBzcGFuLmFkZEV2ZW50KCdqb2Igc3RhbGxlZCcsIHtcbiAgICAgICAgICAgICAgICAgICAgW2VudW1zXzEuVGVsZW1ldHJ5QXR0cmlidXRlcy5Kb2JJZF06IGpvYklkLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnc3RhbGxlZCcsIGpvYklkLCAnYWN0aXZlJyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG1vdmVMaW1pdGVkQmFja1RvV2FpdChqb2IsIHRva2VuKSB7XG4gICAgICAgIHJldHVybiBqb2IubW92ZVRvV2FpdCh0b2tlbik7XG4gICAgfVxufVxuZXhwb3J0cy5Xb3JrZXIgPSBXb3JrZXI7XG4vLyMgc291cmNlTWFwcGluZ1VSTD13b3JrZXIuanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiV29ya2VyIiwiZnMiLCJyZXF1aXJlIiwidXJsXzEiLCJwYXRoIiwidXVpZF8xIiwibm9kZV9hYm9ydF9jb250cm9sbGVyXzEiLCJ1dGlsc18xIiwicXVldWVfYmFzZV8xIiwicmVwZWF0XzEiLCJjaGlsZF9wb29sXzEiLCJyZWRpc19jb25uZWN0aW9uXzEiLCJzYW5kYm94XzEiLCJhc3luY19maWZvX3F1ZXVlXzEiLCJlcnJvcnNfMSIsImVudW1zXzEiLCJqb2Jfc2NoZWR1bGVyXzEiLCJsb2NrX21hbmFnZXJfMSIsIk9ORV9TRUNPTkQiLCJtYXhpbXVtQmxvY2tUaW1lb3V0IiwibWF4aW11bVJhdGVMaW1pdERlbGF5IiwiUXVldWVCYXNlIiwiUmF0ZUxpbWl0RXJyb3IiLCJjb25zdHJ1Y3RvciIsIm5hbWUiLCJwcm9jZXNzb3IiLCJvcHRzIiwiQ29ubmVjdGlvbiIsImFzc2lnbiIsImRyYWluRGVsYXkiLCJjb25jdXJyZW5jeSIsImxvY2tEdXJhdGlvbiIsIm1heFN0YWxsZWRDb3VudCIsInN0YWxsZWRJbnRlcnZhbCIsImF1dG9ydW4iLCJydW5SZXRyeURlbGF5IiwiYmxvY2tpbmdDb25uZWN0aW9uIiwiYWJvcnREZWxheUNvbnRyb2xsZXIiLCJibG9ja1VudGlsIiwiZHJhaW5lZCIsImxpbWl0VW50aWwiLCJ3YWl0aW5nIiwicnVubmluZyIsIm1haW5Mb29wUnVubmluZyIsImNvbm5lY3Rpb24iLCJFcnJvciIsIm1heFN0YXJ0ZWRBdHRlbXB0cyIsImxvY2tSZW5ld1RpbWUiLCJpZCIsInY0IiwibG9ja01hbmFnZXIiLCJMb2NrTWFuYWdlciIsIndvcmtlcklkIiwid29ya2VyTmFtZSIsInByb2Nlc3NGbiIsIlVSTCIsImV4aXN0c1N5bmMiLCJocmVmIiwic3VwcG9ydGVkRmlsZVR5cGVzIiwicHJvY2Vzc29yRmlsZSIsImluY2x1ZGVzIiwiZXh0bmFtZSIsImRpcm5hbWUiLCJtb2R1bGUiLCJmaWxlbmFtZSIsIl9fZmlsZW5hbWUiLCJ3b3JrZXJUaHJlYWRzTWFpbkZpbGUiLCJqb2luIiwic3Bhd25Qcm9jZXNzTWFpbkZpbGUiLCJtYWluRmlsZVBhdGgiLCJ1c2VXb3JrZXJUaHJlYWRzIiwic3RhdFN5bmMiLCJfIiwibWFpbkZpbGUiLCJwcm9jZXNzIiwiY3dkIiwiY2hpbGRQb29sIiwiQ2hpbGRQb29sIiwid29ya2VyRm9ya09wdGlvbnMiLCJ3b3JrZXJUaHJlYWRzT3B0aW9ucyIsImRlZmF1bHQiLCJiaW5kIiwicnVuIiwiY2F0Y2giLCJlcnJvciIsImVtaXQiLCJjb25uZWN0aW9uTmFtZSIsImNsaWVudE5hbWUiLCJSZWRpc0Nvbm5lY3Rpb24iLCJpc1JlZGlzSW5zdGFuY2UiLCJkdXBsaWNhdGUiLCJzaGFyZWQiLCJibG9ja2luZyIsInNraXBWZXJzaW9uQ2hlY2siLCJvbiIsInNldFRpbWVvdXQiLCJleHRlbmRKb2JMb2NrcyIsImpvYklkcyIsInRva2VucyIsImR1cmF0aW9uIiwic2NyaXB0cyIsImV4dGVuZExvY2tzIiwiZXZlbnQiLCJhcmdzIiwib2ZmIiwiZXZlbnROYW1lIiwibGlzdGVuZXIiLCJvbmNlIiwiY2FsbFByb2Nlc3NKb2IiLCJqb2IiLCJ0b2tlbiIsImNyZWF0ZUpvYiIsImRhdGEiLCJqb2JJZCIsIkpvYiIsImZyb21KU09OIiwid2FpdFVudGlsUmVhZHkiLCJjbGllbnQiLCJpc0Zpbml0ZSIsIl9jb25jdXJyZW5jeSIsInJlcGVhdCIsIlByb21pc2UiLCJyZXNvbHZlIiwiX3JlcGVhdCIsIlJlcGVhdCIsImUiLCJqb2JTY2hlZHVsZXIiLCJfam9iU2NoZWR1bGVyIiwiSm9iU2NoZWR1bGVyIiwiY2xvc2luZyIsInBhdXNlZCIsInN0YXJ0U3RhbGxlZENoZWNrVGltZXIiLCJza2lwTG9ja1JlbmV3YWwiLCJzdGFydCIsImJjbGllbnQiLCJtYWluTG9vcCIsIndhaXRGb3JSYXRlTGltaXQiLCJfYSIsIkRhdGUiLCJub3ciLCJhYm9ydCIsIkFib3J0Q29udHJvbGxlciIsImRlbGF5IiwiZ2V0UmF0ZUxpbWl0RGVsYXkiLCJhc3luY0ZpZm9RdWV1ZSIsIkFzeW5jRmlmb1F1ZXVlIiwidG9rZW5Qb3N0Zml4IiwibnVtVG90YWwiLCJpc1JhdGVMaW1pdGVkIiwiZmV0Y2hlZEpvYiIsInJldHJ5SWZGYWlsZWQiLCJfZ2V0TmV4dEpvYiIsImJsb2NrIiwiZGVsYXlJbk1zIiwib25seUVtaXRFcnJvciIsImFkZCIsImZldGNoIiwibnVtUXVldWVkIiwicHJvY2Vzc0pvYiIsImdldE5leHRKb2IiLCJfYiIsIm5leHRKb2IiLCJ0cmFjZSIsIlNwYW5LaW5kIiwiSU5URVJOQUwiLCJzcGFuIiwic2V0QXR0cmlidXRlcyIsIlRlbGVtZXRyeUF0dHJpYnV0ZXMiLCJXb3JrZXJJZCIsIlF1ZXVlTmFtZSIsIldvcmtlck5hbWUiLCJXb3JrZXJPcHRpb25zIiwiSlNPTiIsInN0cmluZ2lmeSIsIkpvYklkIiwidGVsZW1ldHJ5IiwibWV0YWRhdGEiLCJ3YWl0Rm9ySm9iIiwibW92ZVRvQWN0aXZlIiwicmF0ZUxpbWl0IiwiZXhwaXJlVGltZU1zIiwiV29ya2VyUmF0ZUxpbWl0IiwidGhlbiIsInNldCIsImtleXMiLCJsaW1pdGVyIiwiTnVtYmVyIiwiTUFYX1NBRkVfSU5URUdFUiIsIm1pbmltdW1CbG9ja1RpbWVvdXQiLCJjYXBhYmlsaXRpZXMiLCJjYW5CbG9ja0ZvcjFNcyIsImpvYkRhdGEiLCJyYXRlTGltaXREZWxheSIsImRlbGF5VW50aWwiLCJ1cGRhdGVEZWxheXMiLCJuZXh0Sm9iRnJvbUpvYkRhdGEiLCJJbmZpbml0eSIsInRpbWVvdXQiLCJibG9ja1RpbWVvdXQiLCJnZXRCbG9ja1RpbWVvdXQiLCJjYW5Eb3VibGVUaW1lb3V0IiwiTWF0aCIsImNlaWwiLCJkaXNjb25uZWN0IiwicmVzdWx0IiwiYnpwb3BtaW4iLCJtYXJrZXIiLCJfa2V5IiwibWVtYmVyIiwic2NvcmUiLCJuZXdCbG9ja1VudGlsIiwicGFyc2VJbnQiLCJpc05vdENvbm5lY3Rpb25FcnJvciIsImNsZWFyVGltZW91dCIsImJsb2NrRGVsYXkiLCJtaW4iLCJtYXgiLCJtaWxsaXNlY29uZHMiLCJhYm9ydENvbnRyb2xsZXIiLCJERUxBWV9USU1FXzEiLCJsaW1pdERlbGF5IiwiY2xhbXBlZExpbWl0IiwicmVwZWF0Sm9iS2V5Iiwic3BsaXQiLCJsZW5ndGgiLCJ1cHNlcnRKb2JTY2hlZHVsZXIiLCJvdmVycmlkZSIsInByb2R1Y2VySWQiLCJ1cGRhdGVSZXBlYXRhYmxlSm9iIiwiZXJyIiwiZXJyb3JNZXNzYWdlIiwibWVzc2FnZSIsIlN0cmluZyIsInNjaGVkdWxpbmdFcnJvciIsInVuZGVmaW5lZCIsImZldGNoTmV4dENhbGxiYWNrIiwic3JjUHJvcGFnYXRpb25NZWRhdGFkYSIsIkNPTlNVTUVSIiwiSm9iTmFtZSIsIkpvYkF0dGVtcHRzTWFkZSIsImF0dGVtcHRzTWFkZSIsInByb2Nlc3NlZE9uIiwidHJhY2tKb2IiLCJ1bnJlY292ZXJhYmxlRXJyb3JNZXNzYWdlIiwiZ2V0VW5yZWNvdmVyYWJsZUVycm9yTWVzc2FnZSIsImZhaWxlZCIsImhhbmRsZUZhaWxlZCIsIlVucmVjb3ZlcmFibGVFcnJvciIsImhhbmRsZUNvbXBsZXRlZCIsInVudHJhY2tKb2IiLCJKb2JGaW5pc2hlZFRpbWVzdGFtcCIsIkpvYlByb2Nlc3NlZFRpbWVzdGFtcCIsImRlZmVycmVkRmFpbHVyZSIsImF0dGVtcHRzU3RhcnRlZCIsImNvbXBsZXRlZCIsIm1vdmVUb0NvbXBsZXRlZCIsImFkZEV2ZW50IiwiSm9iUmVzdWx0IiwiUkFURV9MSU1JVF9FUlJPUiIsInJhdGVMaW1pdFR0bCIsIm1vdmVMaW1pdGVkQmFja1RvV2FpdCIsIkRlbGF5ZWRFcnJvciIsIldhaXRpbmdFcnJvciIsIldhaXRpbmdDaGlsZHJlbkVycm9yIiwibW92ZVRvRmFpbGVkIiwiSm9iRmFpbGVkUmVhc29uIiwicGF1c2UiLCJkb05vdFdhaXRBY3RpdmUiLCJXb3JrZXJEb05vdFdhaXRBY3RpdmUiLCJ3aGVuQ3VycmVudEpvYnNGaW5pc2hlZCIsInN0YWxsZWRDaGVja1N0b3BwZXIiLCJjYWxsIiwicmVzdW1lIiwiaXNQYXVzZWQiLCJpc1J1bm5pbmciLCJjbG9zZSIsImZvcmNlIiwiV29ya2VyRm9yY2VDbG9zZSIsImFzeW5jQ2xlYW51cHMiLCJjbGVhbiIsImNsZWFudXAiLCJjbG9zZWQiLCJza2lwU3RhbGxlZENoZWNrIiwic3RhbGxlZENoZWNrZXIiLCJjaGVja0Nvbm5lY3Rpb25FcnJvciIsIm1vdmVTdGFsbGVkSm9ic1RvV2FpdCIsInJlY29ubmVjdCIsImZuIiwicmV0cnkiLCJtYXhSZXRyaWVzIiwicmVjb3JkRXhjZXB0aW9uIiwic3RhbGxlZCIsIldvcmtlclN0YWxsZWRKb2JzIiwiZm9yRWFjaCIsIm1vdmVUb1dhaXQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/classes/worker.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/enums/child-command.js":
/*!*************************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/enums/child-command.js ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.ChildCommand = void 0;\nvar ChildCommand;\n(function(ChildCommand) {\n    ChildCommand[ChildCommand[\"Init\"] = 0] = \"Init\";\n    ChildCommand[ChildCommand[\"Start\"] = 1] = \"Start\";\n    ChildCommand[ChildCommand[\"Stop\"] = 2] = \"Stop\";\n    ChildCommand[ChildCommand[\"GetChildrenValuesResponse\"] = 3] = \"GetChildrenValuesResponse\";\n    ChildCommand[ChildCommand[\"GetIgnoredChildrenFailuresResponse\"] = 4] = \"GetIgnoredChildrenFailuresResponse\";\n    ChildCommand[ChildCommand[\"MoveToWaitingChildrenResponse\"] = 5] = \"MoveToWaitingChildrenResponse\";\n})(ChildCommand || (exports.ChildCommand = ChildCommand = {})); //# sourceMappingURL=child-command.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL2VudW1zL2NoaWxkLWNvbW1hbmQuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELG9CQUFvQixHQUFHLEtBQUs7QUFDNUIsSUFBSUU7QUFDSCxVQUFVQSxZQUFZO0lBQ25CQSxZQUFZLENBQUNBLFlBQVksQ0FBQyxPQUFPLEdBQUcsRUFBRSxHQUFHO0lBQ3pDQSxZQUFZLENBQUNBLFlBQVksQ0FBQyxRQUFRLEdBQUcsRUFBRSxHQUFHO0lBQzFDQSxZQUFZLENBQUNBLFlBQVksQ0FBQyxPQUFPLEdBQUcsRUFBRSxHQUFHO0lBQ3pDQSxZQUFZLENBQUNBLFlBQVksQ0FBQyw0QkFBNEIsR0FBRyxFQUFFLEdBQUc7SUFDOURBLFlBQVksQ0FBQ0EsWUFBWSxDQUFDLHFDQUFxQyxHQUFHLEVBQUUsR0FBRztJQUN2RUEsWUFBWSxDQUFDQSxZQUFZLENBQUMsZ0NBQWdDLEdBQUcsRUFBRSxHQUFHO0FBQ3RFLEdBQUdBLGdCQUFpQkYsQ0FBQUEsb0JBQW9CLEdBQUdFLGVBQWUsQ0FBQyxLQUMzRCx5Q0FBeUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vbmx5ZmFucy1wbGF0Zm9ybS8uL25vZGVfbW9kdWxlcy9idWxsbXEvZGlzdC9janMvZW51bXMvY2hpbGQtY29tbWFuZC5qcz8xOTQ2Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5DaGlsZENvbW1hbmQgPSB2b2lkIDA7XG52YXIgQ2hpbGRDb21tYW5kO1xuKGZ1bmN0aW9uIChDaGlsZENvbW1hbmQpIHtcbiAgICBDaGlsZENvbW1hbmRbQ2hpbGRDb21tYW5kW1wiSW5pdFwiXSA9IDBdID0gXCJJbml0XCI7XG4gICAgQ2hpbGRDb21tYW5kW0NoaWxkQ29tbWFuZFtcIlN0YXJ0XCJdID0gMV0gPSBcIlN0YXJ0XCI7XG4gICAgQ2hpbGRDb21tYW5kW0NoaWxkQ29tbWFuZFtcIlN0b3BcIl0gPSAyXSA9IFwiU3RvcFwiO1xuICAgIENoaWxkQ29tbWFuZFtDaGlsZENvbW1hbmRbXCJHZXRDaGlsZHJlblZhbHVlc1Jlc3BvbnNlXCJdID0gM10gPSBcIkdldENoaWxkcmVuVmFsdWVzUmVzcG9uc2VcIjtcbiAgICBDaGlsZENvbW1hbmRbQ2hpbGRDb21tYW5kW1wiR2V0SWdub3JlZENoaWxkcmVuRmFpbHVyZXNSZXNwb25zZVwiXSA9IDRdID0gXCJHZXRJZ25vcmVkQ2hpbGRyZW5GYWlsdXJlc1Jlc3BvbnNlXCI7XG4gICAgQ2hpbGRDb21tYW5kW0NoaWxkQ29tbWFuZFtcIk1vdmVUb1dhaXRpbmdDaGlsZHJlblJlc3BvbnNlXCJdID0gNV0gPSBcIk1vdmVUb1dhaXRpbmdDaGlsZHJlblJlc3BvbnNlXCI7XG59KShDaGlsZENvbW1hbmQgfHwgKGV4cG9ydHMuQ2hpbGRDb21tYW5kID0gQ2hpbGRDb21tYW5kID0ge30pKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNoaWxkLWNvbW1hbmQuanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiQ2hpbGRDb21tYW5kIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/enums/child-command.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/enums/error-code.js":
/*!**********************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/enums/error-code.js ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.ErrorCode = void 0;\nvar ErrorCode;\n(function(ErrorCode) {\n    ErrorCode[ErrorCode[\"JobNotExist\"] = -1] = \"JobNotExist\";\n    ErrorCode[ErrorCode[\"JobLockNotExist\"] = -2] = \"JobLockNotExist\";\n    ErrorCode[ErrorCode[\"JobNotInState\"] = -3] = \"JobNotInState\";\n    ErrorCode[ErrorCode[\"JobPendingChildren\"] = -4] = \"JobPendingChildren\";\n    ErrorCode[ErrorCode[\"ParentJobNotExist\"] = -5] = \"ParentJobNotExist\";\n    ErrorCode[ErrorCode[\"JobLockMismatch\"] = -6] = \"JobLockMismatch\";\n    ErrorCode[ErrorCode[\"ParentJobCannotBeReplaced\"] = -7] = \"ParentJobCannotBeReplaced\";\n    ErrorCode[ErrorCode[\"JobBelongsToJobScheduler\"] = -8] = \"JobBelongsToJobScheduler\";\n    ErrorCode[ErrorCode[\"JobHasFailedChildren\"] = -9] = \"JobHasFailedChildren\";\n    ErrorCode[ErrorCode[\"SchedulerJobIdCollision\"] = -10] = \"SchedulerJobIdCollision\";\n    ErrorCode[ErrorCode[\"SchedulerJobSlotsBusy\"] = -11] = \"SchedulerJobSlotsBusy\";\n})(ErrorCode || (exports.ErrorCode = ErrorCode = {})); //# sourceMappingURL=error-code.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL2VudW1zL2Vycm9yLWNvZGUuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELGlCQUFpQixHQUFHLEtBQUs7QUFDekIsSUFBSUU7QUFDSCxVQUFVQSxTQUFTO0lBQ2hCQSxTQUFTLENBQUNBLFNBQVMsQ0FBQyxjQUFjLEdBQUcsQ0FBQyxFQUFFLEdBQUc7SUFDM0NBLFNBQVMsQ0FBQ0EsU0FBUyxDQUFDLGtCQUFrQixHQUFHLENBQUMsRUFBRSxHQUFHO0lBQy9DQSxTQUFTLENBQUNBLFNBQVMsQ0FBQyxnQkFBZ0IsR0FBRyxDQUFDLEVBQUUsR0FBRztJQUM3Q0EsU0FBUyxDQUFDQSxTQUFTLENBQUMscUJBQXFCLEdBQUcsQ0FBQyxFQUFFLEdBQUc7SUFDbERBLFNBQVMsQ0FBQ0EsU0FBUyxDQUFDLG9CQUFvQixHQUFHLENBQUMsRUFBRSxHQUFHO0lBQ2pEQSxTQUFTLENBQUNBLFNBQVMsQ0FBQyxrQkFBa0IsR0FBRyxDQUFDLEVBQUUsR0FBRztJQUMvQ0EsU0FBUyxDQUFDQSxTQUFTLENBQUMsNEJBQTRCLEdBQUcsQ0FBQyxFQUFFLEdBQUc7SUFDekRBLFNBQVMsQ0FBQ0EsU0FBUyxDQUFDLDJCQUEyQixHQUFHLENBQUMsRUFBRSxHQUFHO0lBQ3hEQSxTQUFTLENBQUNBLFNBQVMsQ0FBQyx1QkFBdUIsR0FBRyxDQUFDLEVBQUUsR0FBRztJQUNwREEsU0FBUyxDQUFDQSxTQUFTLENBQUMsMEJBQTBCLEdBQUcsQ0FBQyxHQUFHLEdBQUc7SUFDeERBLFNBQVMsQ0FBQ0EsU0FBUyxDQUFDLHdCQUF3QixHQUFHLENBQUMsR0FBRyxHQUFHO0FBQzFELEdBQUdBLGFBQWNGLENBQUFBLGlCQUFpQixHQUFHRSxZQUFZLENBQUMsS0FDbEQsc0NBQXNDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb25seWZhbnMtcGxhdGZvcm0vLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL2VudW1zL2Vycm9yLWNvZGUuanM/OTQwYiJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuRXJyb3JDb2RlID0gdm9pZCAwO1xudmFyIEVycm9yQ29kZTtcbihmdW5jdGlvbiAoRXJyb3JDb2RlKSB7XG4gICAgRXJyb3JDb2RlW0Vycm9yQ29kZVtcIkpvYk5vdEV4aXN0XCJdID0gLTFdID0gXCJKb2JOb3RFeGlzdFwiO1xuICAgIEVycm9yQ29kZVtFcnJvckNvZGVbXCJKb2JMb2NrTm90RXhpc3RcIl0gPSAtMl0gPSBcIkpvYkxvY2tOb3RFeGlzdFwiO1xuICAgIEVycm9yQ29kZVtFcnJvckNvZGVbXCJKb2JOb3RJblN0YXRlXCJdID0gLTNdID0gXCJKb2JOb3RJblN0YXRlXCI7XG4gICAgRXJyb3JDb2RlW0Vycm9yQ29kZVtcIkpvYlBlbmRpbmdDaGlsZHJlblwiXSA9IC00XSA9IFwiSm9iUGVuZGluZ0NoaWxkcmVuXCI7XG4gICAgRXJyb3JDb2RlW0Vycm9yQ29kZVtcIlBhcmVudEpvYk5vdEV4aXN0XCJdID0gLTVdID0gXCJQYXJlbnRKb2JOb3RFeGlzdFwiO1xuICAgIEVycm9yQ29kZVtFcnJvckNvZGVbXCJKb2JMb2NrTWlzbWF0Y2hcIl0gPSAtNl0gPSBcIkpvYkxvY2tNaXNtYXRjaFwiO1xuICAgIEVycm9yQ29kZVtFcnJvckNvZGVbXCJQYXJlbnRKb2JDYW5ub3RCZVJlcGxhY2VkXCJdID0gLTddID0gXCJQYXJlbnRKb2JDYW5ub3RCZVJlcGxhY2VkXCI7XG4gICAgRXJyb3JDb2RlW0Vycm9yQ29kZVtcIkpvYkJlbG9uZ3NUb0pvYlNjaGVkdWxlclwiXSA9IC04XSA9IFwiSm9iQmVsb25nc1RvSm9iU2NoZWR1bGVyXCI7XG4gICAgRXJyb3JDb2RlW0Vycm9yQ29kZVtcIkpvYkhhc0ZhaWxlZENoaWxkcmVuXCJdID0gLTldID0gXCJKb2JIYXNGYWlsZWRDaGlsZHJlblwiO1xuICAgIEVycm9yQ29kZVtFcnJvckNvZGVbXCJTY2hlZHVsZXJKb2JJZENvbGxpc2lvblwiXSA9IC0xMF0gPSBcIlNjaGVkdWxlckpvYklkQ29sbGlzaW9uXCI7XG4gICAgRXJyb3JDb2RlW0Vycm9yQ29kZVtcIlNjaGVkdWxlckpvYlNsb3RzQnVzeVwiXSA9IC0xMV0gPSBcIlNjaGVkdWxlckpvYlNsb3RzQnVzeVwiO1xufSkoRXJyb3JDb2RlIHx8IChleHBvcnRzLkVycm9yQ29kZSA9IEVycm9yQ29kZSA9IHt9KSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1lcnJvci1jb2RlLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsIkVycm9yQ29kZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/enums/error-code.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/enums/index.js":
/*!*****************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/enums/index.js ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nconst tslib_1 = __webpack_require__(/*! tslib */ \"(rsc)/./node_modules/tslib/tslib.es6.mjs\");\ntslib_1.__exportStar(__webpack_require__(/*! ./child-command */ \"(rsc)/./node_modules/bullmq/dist/cjs/enums/child-command.js\"), exports);\ntslib_1.__exportStar(__webpack_require__(/*! ./error-code */ \"(rsc)/./node_modules/bullmq/dist/cjs/enums/error-code.js\"), exports);\ntslib_1.__exportStar(__webpack_require__(/*! ./parent-command */ \"(rsc)/./node_modules/bullmq/dist/cjs/enums/parent-command.js\"), exports);\ntslib_1.__exportStar(__webpack_require__(/*! ./metrics-time */ \"(rsc)/./node_modules/bullmq/dist/cjs/enums/metrics-time.js\"), exports);\ntslib_1.__exportStar(__webpack_require__(/*! ./telemetry-attributes */ \"(rsc)/./node_modules/bullmq/dist/cjs/enums/telemetry-attributes.js\"), exports); //# sourceMappingURL=index.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL2VudW1zL2luZGV4LmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdELE1BQU1DLFVBQVVDLG1CQUFPQSxDQUFDLHVEQUFPO0FBQy9CRCxRQUFRRSxZQUFZLENBQUNELG1CQUFPQSxDQUFDLG9GQUFpQixHQUFHSDtBQUNqREUsUUFBUUUsWUFBWSxDQUFDRCxtQkFBT0EsQ0FBQyw4RUFBYyxHQUFHSDtBQUM5Q0UsUUFBUUUsWUFBWSxDQUFDRCxtQkFBT0EsQ0FBQyxzRkFBa0IsR0FBR0g7QUFDbERFLFFBQVFFLFlBQVksQ0FBQ0QsbUJBQU9BLENBQUMsa0ZBQWdCLEdBQUdIO0FBQ2hERSxRQUFRRSxZQUFZLENBQUNELG1CQUFPQSxDQUFDLGtHQUF3QixHQUFHSCxVQUN4RCxpQ0FBaUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vbmx5ZmFucy1wbGF0Zm9ybS8uL25vZGVfbW9kdWxlcy9idWxsbXEvZGlzdC9janMvZW51bXMvaW5kZXguanM/ZmFiMCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmNvbnN0IHRzbGliXzEgPSByZXF1aXJlKFwidHNsaWJcIik7XG50c2xpYl8xLl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi9jaGlsZC1jb21tYW5kXCIpLCBleHBvcnRzKTtcbnRzbGliXzEuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL2Vycm9yLWNvZGVcIiksIGV4cG9ydHMpO1xudHNsaWJfMS5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vcGFyZW50LWNvbW1hbmRcIiksIGV4cG9ydHMpO1xudHNsaWJfMS5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vbWV0cmljcy10aW1lXCIpLCBleHBvcnRzKTtcbnRzbGliXzEuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL3RlbGVtZXRyeS1hdHRyaWJ1dGVzXCIpLCBleHBvcnRzKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsInRzbGliXzEiLCJyZXF1aXJlIiwiX19leHBvcnRTdGFyIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/enums/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/enums/metrics-time.js":
/*!************************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/enums/metrics-time.js ***!
  \************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.MetricsTime = void 0;\nvar MetricsTime;\n(function(MetricsTime) {\n    MetricsTime[MetricsTime[\"ONE_MINUTE\"] = 1] = \"ONE_MINUTE\";\n    MetricsTime[MetricsTime[\"FIVE_MINUTES\"] = 5] = \"FIVE_MINUTES\";\n    MetricsTime[MetricsTime[\"FIFTEEN_MINUTES\"] = 15] = \"FIFTEEN_MINUTES\";\n    MetricsTime[MetricsTime[\"THIRTY_MINUTES\"] = 30] = \"THIRTY_MINUTES\";\n    MetricsTime[MetricsTime[\"ONE_HOUR\"] = 60] = \"ONE_HOUR\";\n    MetricsTime[MetricsTime[\"ONE_WEEK\"] = 10080] = \"ONE_WEEK\";\n    MetricsTime[MetricsTime[\"TWO_WEEKS\"] = 20160] = \"TWO_WEEKS\";\n    MetricsTime[MetricsTime[\"ONE_MONTH\"] = 80640] = \"ONE_MONTH\";\n})(MetricsTime || (exports.MetricsTime = MetricsTime = {})); //# sourceMappingURL=metrics-time.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL2VudW1zL21ldHJpY3MtdGltZS5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsbUJBQW1CLEdBQUcsS0FBSztBQUMzQixJQUFJRTtBQUNILFVBQVVBLFdBQVc7SUFDbEJBLFdBQVcsQ0FBQ0EsV0FBVyxDQUFDLGFBQWEsR0FBRyxFQUFFLEdBQUc7SUFDN0NBLFdBQVcsQ0FBQ0EsV0FBVyxDQUFDLGVBQWUsR0FBRyxFQUFFLEdBQUc7SUFDL0NBLFdBQVcsQ0FBQ0EsV0FBVyxDQUFDLGtCQUFrQixHQUFHLEdBQUcsR0FBRztJQUNuREEsV0FBVyxDQUFDQSxXQUFXLENBQUMsaUJBQWlCLEdBQUcsR0FBRyxHQUFHO0lBQ2xEQSxXQUFXLENBQUNBLFdBQVcsQ0FBQyxXQUFXLEdBQUcsR0FBRyxHQUFHO0lBQzVDQSxXQUFXLENBQUNBLFdBQVcsQ0FBQyxXQUFXLEdBQUcsTUFBTSxHQUFHO0lBQy9DQSxXQUFXLENBQUNBLFdBQVcsQ0FBQyxZQUFZLEdBQUcsTUFBTSxHQUFHO0lBQ2hEQSxXQUFXLENBQUNBLFdBQVcsQ0FBQyxZQUFZLEdBQUcsTUFBTSxHQUFHO0FBQ3BELEdBQUdBLGVBQWdCRixDQUFBQSxtQkFBbUIsR0FBR0UsY0FBYyxDQUFDLEtBQ3hELHdDQUF3QyIsInNvdXJjZXMiOlsid2VicGFjazovL29ubHlmYW5zLXBsYXRmb3JtLy4vbm9kZV9tb2R1bGVzL2J1bGxtcS9kaXN0L2Nqcy9lbnVtcy9tZXRyaWNzLXRpbWUuanM/ZTIyZCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuTWV0cmljc1RpbWUgPSB2b2lkIDA7XG52YXIgTWV0cmljc1RpbWU7XG4oZnVuY3Rpb24gKE1ldHJpY3NUaW1lKSB7XG4gICAgTWV0cmljc1RpbWVbTWV0cmljc1RpbWVbXCJPTkVfTUlOVVRFXCJdID0gMV0gPSBcIk9ORV9NSU5VVEVcIjtcbiAgICBNZXRyaWNzVGltZVtNZXRyaWNzVGltZVtcIkZJVkVfTUlOVVRFU1wiXSA9IDVdID0gXCJGSVZFX01JTlVURVNcIjtcbiAgICBNZXRyaWNzVGltZVtNZXRyaWNzVGltZVtcIkZJRlRFRU5fTUlOVVRFU1wiXSA9IDE1XSA9IFwiRklGVEVFTl9NSU5VVEVTXCI7XG4gICAgTWV0cmljc1RpbWVbTWV0cmljc1RpbWVbXCJUSElSVFlfTUlOVVRFU1wiXSA9IDMwXSA9IFwiVEhJUlRZX01JTlVURVNcIjtcbiAgICBNZXRyaWNzVGltZVtNZXRyaWNzVGltZVtcIk9ORV9IT1VSXCJdID0gNjBdID0gXCJPTkVfSE9VUlwiO1xuICAgIE1ldHJpY3NUaW1lW01ldHJpY3NUaW1lW1wiT05FX1dFRUtcIl0gPSAxMDA4MF0gPSBcIk9ORV9XRUVLXCI7XG4gICAgTWV0cmljc1RpbWVbTWV0cmljc1RpbWVbXCJUV09fV0VFS1NcIl0gPSAyMDE2MF0gPSBcIlRXT19XRUVLU1wiO1xuICAgIE1ldHJpY3NUaW1lW01ldHJpY3NUaW1lW1wiT05FX01PTlRIXCJdID0gODA2NDBdID0gXCJPTkVfTU9OVEhcIjtcbn0pKE1ldHJpY3NUaW1lIHx8IChleHBvcnRzLk1ldHJpY3NUaW1lID0gTWV0cmljc1RpbWUgPSB7fSkpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bWV0cmljcy10aW1lLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsIk1ldHJpY3NUaW1lIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/enums/metrics-time.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/enums/parent-command.js":
/*!**************************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/enums/parent-command.js ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.ParentCommand = void 0;\nvar ParentCommand;\n(function(ParentCommand) {\n    ParentCommand[ParentCommand[\"Completed\"] = 0] = \"Completed\";\n    ParentCommand[ParentCommand[\"Error\"] = 1] = \"Error\";\n    ParentCommand[ParentCommand[\"Failed\"] = 2] = \"Failed\";\n    ParentCommand[ParentCommand[\"InitFailed\"] = 3] = \"InitFailed\";\n    ParentCommand[ParentCommand[\"InitCompleted\"] = 4] = \"InitCompleted\";\n    ParentCommand[ParentCommand[\"Log\"] = 5] = \"Log\";\n    ParentCommand[ParentCommand[\"MoveToDelayed\"] = 6] = \"MoveToDelayed\";\n    ParentCommand[ParentCommand[\"MoveToWait\"] = 7] = \"MoveToWait\";\n    ParentCommand[ParentCommand[\"Progress\"] = 8] = \"Progress\";\n    ParentCommand[ParentCommand[\"Update\"] = 9] = \"Update\";\n    ParentCommand[ParentCommand[\"GetChildrenValues\"] = 10] = \"GetChildrenValues\";\n    ParentCommand[ParentCommand[\"GetIgnoredChildrenFailures\"] = 11] = \"GetIgnoredChildrenFailures\";\n    ParentCommand[ParentCommand[\"MoveToWaitingChildren\"] = 12] = \"MoveToWaitingChildren\";\n})(ParentCommand || (exports.ParentCommand = ParentCommand = {})); //# sourceMappingURL=parent-command.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL2VudW1zL3BhcmVudC1jb21tYW5kLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCxxQkFBcUIsR0FBRyxLQUFLO0FBQzdCLElBQUlFO0FBQ0gsVUFBVUEsYUFBYTtJQUNwQkEsYUFBYSxDQUFDQSxhQUFhLENBQUMsWUFBWSxHQUFHLEVBQUUsR0FBRztJQUNoREEsYUFBYSxDQUFDQSxhQUFhLENBQUMsUUFBUSxHQUFHLEVBQUUsR0FBRztJQUM1Q0EsYUFBYSxDQUFDQSxhQUFhLENBQUMsU0FBUyxHQUFHLEVBQUUsR0FBRztJQUM3Q0EsYUFBYSxDQUFDQSxhQUFhLENBQUMsYUFBYSxHQUFHLEVBQUUsR0FBRztJQUNqREEsYUFBYSxDQUFDQSxhQUFhLENBQUMsZ0JBQWdCLEdBQUcsRUFBRSxHQUFHO0lBQ3BEQSxhQUFhLENBQUNBLGFBQWEsQ0FBQyxNQUFNLEdBQUcsRUFBRSxHQUFHO0lBQzFDQSxhQUFhLENBQUNBLGFBQWEsQ0FBQyxnQkFBZ0IsR0FBRyxFQUFFLEdBQUc7SUFDcERBLGFBQWEsQ0FBQ0EsYUFBYSxDQUFDLGFBQWEsR0FBRyxFQUFFLEdBQUc7SUFDakRBLGFBQWEsQ0FBQ0EsYUFBYSxDQUFDLFdBQVcsR0FBRyxFQUFFLEdBQUc7SUFDL0NBLGFBQWEsQ0FBQ0EsYUFBYSxDQUFDLFNBQVMsR0FBRyxFQUFFLEdBQUc7SUFDN0NBLGFBQWEsQ0FBQ0EsYUFBYSxDQUFDLG9CQUFvQixHQUFHLEdBQUcsR0FBRztJQUN6REEsYUFBYSxDQUFDQSxhQUFhLENBQUMsNkJBQTZCLEdBQUcsR0FBRyxHQUFHO0lBQ2xFQSxhQUFhLENBQUNBLGFBQWEsQ0FBQyx3QkFBd0IsR0FBRyxHQUFHLEdBQUc7QUFDakUsR0FBR0EsaUJBQWtCRixDQUFBQSxxQkFBcUIsR0FBR0UsZ0JBQWdCLENBQUMsS0FDOUQsMENBQTBDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb25seWZhbnMtcGxhdGZvcm0vLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL2VudW1zL3BhcmVudC1jb21tYW5kLmpzPzU0OTgiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLlBhcmVudENvbW1hbmQgPSB2b2lkIDA7XG52YXIgUGFyZW50Q29tbWFuZDtcbihmdW5jdGlvbiAoUGFyZW50Q29tbWFuZCkge1xuICAgIFBhcmVudENvbW1hbmRbUGFyZW50Q29tbWFuZFtcIkNvbXBsZXRlZFwiXSA9IDBdID0gXCJDb21wbGV0ZWRcIjtcbiAgICBQYXJlbnRDb21tYW5kW1BhcmVudENvbW1hbmRbXCJFcnJvclwiXSA9IDFdID0gXCJFcnJvclwiO1xuICAgIFBhcmVudENvbW1hbmRbUGFyZW50Q29tbWFuZFtcIkZhaWxlZFwiXSA9IDJdID0gXCJGYWlsZWRcIjtcbiAgICBQYXJlbnRDb21tYW5kW1BhcmVudENvbW1hbmRbXCJJbml0RmFpbGVkXCJdID0gM10gPSBcIkluaXRGYWlsZWRcIjtcbiAgICBQYXJlbnRDb21tYW5kW1BhcmVudENvbW1hbmRbXCJJbml0Q29tcGxldGVkXCJdID0gNF0gPSBcIkluaXRDb21wbGV0ZWRcIjtcbiAgICBQYXJlbnRDb21tYW5kW1BhcmVudENvbW1hbmRbXCJMb2dcIl0gPSA1XSA9IFwiTG9nXCI7XG4gICAgUGFyZW50Q29tbWFuZFtQYXJlbnRDb21tYW5kW1wiTW92ZVRvRGVsYXllZFwiXSA9IDZdID0gXCJNb3ZlVG9EZWxheWVkXCI7XG4gICAgUGFyZW50Q29tbWFuZFtQYXJlbnRDb21tYW5kW1wiTW92ZVRvV2FpdFwiXSA9IDddID0gXCJNb3ZlVG9XYWl0XCI7XG4gICAgUGFyZW50Q29tbWFuZFtQYXJlbnRDb21tYW5kW1wiUHJvZ3Jlc3NcIl0gPSA4XSA9IFwiUHJvZ3Jlc3NcIjtcbiAgICBQYXJlbnRDb21tYW5kW1BhcmVudENvbW1hbmRbXCJVcGRhdGVcIl0gPSA5XSA9IFwiVXBkYXRlXCI7XG4gICAgUGFyZW50Q29tbWFuZFtQYXJlbnRDb21tYW5kW1wiR2V0Q2hpbGRyZW5WYWx1ZXNcIl0gPSAxMF0gPSBcIkdldENoaWxkcmVuVmFsdWVzXCI7XG4gICAgUGFyZW50Q29tbWFuZFtQYXJlbnRDb21tYW5kW1wiR2V0SWdub3JlZENoaWxkcmVuRmFpbHVyZXNcIl0gPSAxMV0gPSBcIkdldElnbm9yZWRDaGlsZHJlbkZhaWx1cmVzXCI7XG4gICAgUGFyZW50Q29tbWFuZFtQYXJlbnRDb21tYW5kW1wiTW92ZVRvV2FpdGluZ0NoaWxkcmVuXCJdID0gMTJdID0gXCJNb3ZlVG9XYWl0aW5nQ2hpbGRyZW5cIjtcbn0pKFBhcmVudENvbW1hbmQgfHwgKGV4cG9ydHMuUGFyZW50Q29tbWFuZCA9IFBhcmVudENvbW1hbmQgPSB7fSkpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGFyZW50LWNvbW1hbmQuanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiUGFyZW50Q29tbWFuZCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/enums/parent-command.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/enums/telemetry-attributes.js":
/*!********************************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/enums/telemetry-attributes.js ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.SpanKind = exports.TelemetryAttributes = void 0;\nvar TelemetryAttributes;\n(function(TelemetryAttributes) {\n    TelemetryAttributes[\"QueueName\"] = \"bullmq.queue.name\";\n    TelemetryAttributes[\"QueueOperation\"] = \"bullmq.queue.operation\";\n    TelemetryAttributes[\"BulkCount\"] = \"bullmq.job.bulk.count\";\n    TelemetryAttributes[\"BulkNames\"] = \"bullmq.job.bulk.names\";\n    TelemetryAttributes[\"JobName\"] = \"bullmq.job.name\";\n    TelemetryAttributes[\"JobId\"] = \"bullmq.job.id\";\n    TelemetryAttributes[\"JobKey\"] = \"bullmq.job.key\";\n    TelemetryAttributes[\"JobIds\"] = \"bullmq.job.ids\";\n    TelemetryAttributes[\"JobAttemptsMade\"] = \"bullmq.job.attempts.made\";\n    TelemetryAttributes[\"DeduplicationKey\"] = \"bullmq.job.deduplication.key\";\n    TelemetryAttributes[\"JobOptions\"] = \"bullmq.job.options\";\n    TelemetryAttributes[\"JobProgress\"] = \"bullmq.job.progress\";\n    TelemetryAttributes[\"QueueDrainDelay\"] = \"bullmq.queue.drain.delay\";\n    TelemetryAttributes[\"QueueGrace\"] = \"bullmq.queue.grace\";\n    TelemetryAttributes[\"QueueCleanLimit\"] = \"bullmq.queue.clean.limit\";\n    TelemetryAttributes[\"QueueRateLimit\"] = \"bullmq.queue.rate.limit\";\n    TelemetryAttributes[\"JobType\"] = \"bullmq.job.type\";\n    TelemetryAttributes[\"QueueOptions\"] = \"bullmq.queue.options\";\n    TelemetryAttributes[\"QueueEventMaxLength\"] = \"bullmq.queue.event.max.length\";\n    TelemetryAttributes[\"WorkerOptions\"] = \"bullmq.worker.options\";\n    TelemetryAttributes[\"WorkerName\"] = \"bullmq.worker.name\";\n    TelemetryAttributes[\"WorkerId\"] = \"bullmq.worker.id\";\n    TelemetryAttributes[\"WorkerRateLimit\"] = \"bullmq.worker.rate.limit\";\n    TelemetryAttributes[\"WorkerDoNotWaitActive\"] = \"bullmq.worker.do.not.wait.active\";\n    TelemetryAttributes[\"WorkerForceClose\"] = \"bullmq.worker.force.close\";\n    TelemetryAttributes[\"WorkerStalledJobs\"] = \"bullmq.worker.stalled.jobs\";\n    TelemetryAttributes[\"WorkerFailedJobs\"] = \"bullmq.worker.failed.jobs\";\n    TelemetryAttributes[\"WorkerJobsToExtendLocks\"] = \"bullmq.worker.jobs.to.extend.locks\";\n    TelemetryAttributes[\"JobFinishedTimestamp\"] = \"bullmq.job.finished.timestamp\";\n    TelemetryAttributes[\"JobProcessedTimestamp\"] = \"bullmq.job.processed.timestamp\";\n    TelemetryAttributes[\"JobResult\"] = \"bullmq.job.result\";\n    TelemetryAttributes[\"JobFailedReason\"] = \"bullmq.job.failed.reason\";\n    TelemetryAttributes[\"FlowName\"] = \"bullmq.flow.name\";\n    TelemetryAttributes[\"JobSchedulerId\"] = \"bullmq.job.scheduler.id\";\n})(TelemetryAttributes || (exports.TelemetryAttributes = TelemetryAttributes = {}));\nvar SpanKind;\n(function(SpanKind) {\n    SpanKind[SpanKind[\"INTERNAL\"] = 0] = \"INTERNAL\";\n    SpanKind[SpanKind[\"SERVER\"] = 1] = \"SERVER\";\n    SpanKind[SpanKind[\"CLIENT\"] = 2] = \"CLIENT\";\n    SpanKind[SpanKind[\"PRODUCER\"] = 3] = \"PRODUCER\";\n    SpanKind[SpanKind[\"CONSUMER\"] = 4] = \"CONSUMER\";\n})(SpanKind || (exports.SpanKind = SpanKind = {})); //# sourceMappingURL=telemetry-attributes.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL2VudW1zL3RlbGVtZXRyeS1hdHRyaWJ1dGVzLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCxnQkFBZ0IsR0FBR0EsMkJBQTJCLEdBQUcsS0FBSztBQUN0RCxJQUFJRztBQUNILFVBQVVBLG1CQUFtQjtJQUMxQkEsbUJBQW1CLENBQUMsWUFBWSxHQUFHO0lBQ25DQSxtQkFBbUIsQ0FBQyxpQkFBaUIsR0FBRztJQUN4Q0EsbUJBQW1CLENBQUMsWUFBWSxHQUFHO0lBQ25DQSxtQkFBbUIsQ0FBQyxZQUFZLEdBQUc7SUFDbkNBLG1CQUFtQixDQUFDLFVBQVUsR0FBRztJQUNqQ0EsbUJBQW1CLENBQUMsUUFBUSxHQUFHO0lBQy9CQSxtQkFBbUIsQ0FBQyxTQUFTLEdBQUc7SUFDaENBLG1CQUFtQixDQUFDLFNBQVMsR0FBRztJQUNoQ0EsbUJBQW1CLENBQUMsa0JBQWtCLEdBQUc7SUFDekNBLG1CQUFtQixDQUFDLG1CQUFtQixHQUFHO0lBQzFDQSxtQkFBbUIsQ0FBQyxhQUFhLEdBQUc7SUFDcENBLG1CQUFtQixDQUFDLGNBQWMsR0FBRztJQUNyQ0EsbUJBQW1CLENBQUMsa0JBQWtCLEdBQUc7SUFDekNBLG1CQUFtQixDQUFDLGFBQWEsR0FBRztJQUNwQ0EsbUJBQW1CLENBQUMsa0JBQWtCLEdBQUc7SUFDekNBLG1CQUFtQixDQUFDLGlCQUFpQixHQUFHO0lBQ3hDQSxtQkFBbUIsQ0FBQyxVQUFVLEdBQUc7SUFDakNBLG1CQUFtQixDQUFDLGVBQWUsR0FBRztJQUN0Q0EsbUJBQW1CLENBQUMsc0JBQXNCLEdBQUc7SUFDN0NBLG1CQUFtQixDQUFDLGdCQUFnQixHQUFHO0lBQ3ZDQSxtQkFBbUIsQ0FBQyxhQUFhLEdBQUc7SUFDcENBLG1CQUFtQixDQUFDLFdBQVcsR0FBRztJQUNsQ0EsbUJBQW1CLENBQUMsa0JBQWtCLEdBQUc7SUFDekNBLG1CQUFtQixDQUFDLHdCQUF3QixHQUFHO0lBQy9DQSxtQkFBbUIsQ0FBQyxtQkFBbUIsR0FBRztJQUMxQ0EsbUJBQW1CLENBQUMsb0JBQW9CLEdBQUc7SUFDM0NBLG1CQUFtQixDQUFDLG1CQUFtQixHQUFHO0lBQzFDQSxtQkFBbUIsQ0FBQywwQkFBMEIsR0FBRztJQUNqREEsbUJBQW1CLENBQUMsdUJBQXVCLEdBQUc7SUFDOUNBLG1CQUFtQixDQUFDLHdCQUF3QixHQUFHO0lBQy9DQSxtQkFBbUIsQ0FBQyxZQUFZLEdBQUc7SUFDbkNBLG1CQUFtQixDQUFDLGtCQUFrQixHQUFHO0lBQ3pDQSxtQkFBbUIsQ0FBQyxXQUFXLEdBQUc7SUFDbENBLG1CQUFtQixDQUFDLGlCQUFpQixHQUFHO0FBQzVDLEdBQUdBLHVCQUF3QkgsQ0FBQUEsMkJBQTJCLEdBQUdHLHNCQUFzQixDQUFDO0FBQ2hGLElBQUlEO0FBQ0gsVUFBVUEsUUFBUTtJQUNmQSxRQUFRLENBQUNBLFFBQVEsQ0FBQyxXQUFXLEdBQUcsRUFBRSxHQUFHO0lBQ3JDQSxRQUFRLENBQUNBLFFBQVEsQ0FBQyxTQUFTLEdBQUcsRUFBRSxHQUFHO0lBQ25DQSxRQUFRLENBQUNBLFFBQVEsQ0FBQyxTQUFTLEdBQUcsRUFBRSxHQUFHO0lBQ25DQSxRQUFRLENBQUNBLFFBQVEsQ0FBQyxXQUFXLEdBQUcsRUFBRSxHQUFHO0lBQ3JDQSxRQUFRLENBQUNBLFFBQVEsQ0FBQyxXQUFXLEdBQUcsRUFBRSxHQUFHO0FBQ3pDLEdBQUdBLFlBQWFGLENBQUFBLGdCQUFnQixHQUFHRSxXQUFXLENBQUMsS0FDL0MsZ0RBQWdEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb25seWZhbnMtcGxhdGZvcm0vLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL2VudW1zL3RlbGVtZXRyeS1hdHRyaWJ1dGVzLmpzP2E4ZWEiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLlNwYW5LaW5kID0gZXhwb3J0cy5UZWxlbWV0cnlBdHRyaWJ1dGVzID0gdm9pZCAwO1xudmFyIFRlbGVtZXRyeUF0dHJpYnV0ZXM7XG4oZnVuY3Rpb24gKFRlbGVtZXRyeUF0dHJpYnV0ZXMpIHtcbiAgICBUZWxlbWV0cnlBdHRyaWJ1dGVzW1wiUXVldWVOYW1lXCJdID0gXCJidWxsbXEucXVldWUubmFtZVwiO1xuICAgIFRlbGVtZXRyeUF0dHJpYnV0ZXNbXCJRdWV1ZU9wZXJhdGlvblwiXSA9IFwiYnVsbG1xLnF1ZXVlLm9wZXJhdGlvblwiO1xuICAgIFRlbGVtZXRyeUF0dHJpYnV0ZXNbXCJCdWxrQ291bnRcIl0gPSBcImJ1bGxtcS5qb2IuYnVsay5jb3VudFwiO1xuICAgIFRlbGVtZXRyeUF0dHJpYnV0ZXNbXCJCdWxrTmFtZXNcIl0gPSBcImJ1bGxtcS5qb2IuYnVsay5uYW1lc1wiO1xuICAgIFRlbGVtZXRyeUF0dHJpYnV0ZXNbXCJKb2JOYW1lXCJdID0gXCJidWxsbXEuam9iLm5hbWVcIjtcbiAgICBUZWxlbWV0cnlBdHRyaWJ1dGVzW1wiSm9iSWRcIl0gPSBcImJ1bGxtcS5qb2IuaWRcIjtcbiAgICBUZWxlbWV0cnlBdHRyaWJ1dGVzW1wiSm9iS2V5XCJdID0gXCJidWxsbXEuam9iLmtleVwiO1xuICAgIFRlbGVtZXRyeUF0dHJpYnV0ZXNbXCJKb2JJZHNcIl0gPSBcImJ1bGxtcS5qb2IuaWRzXCI7XG4gICAgVGVsZW1ldHJ5QXR0cmlidXRlc1tcIkpvYkF0dGVtcHRzTWFkZVwiXSA9IFwiYnVsbG1xLmpvYi5hdHRlbXB0cy5tYWRlXCI7XG4gICAgVGVsZW1ldHJ5QXR0cmlidXRlc1tcIkRlZHVwbGljYXRpb25LZXlcIl0gPSBcImJ1bGxtcS5qb2IuZGVkdXBsaWNhdGlvbi5rZXlcIjtcbiAgICBUZWxlbWV0cnlBdHRyaWJ1dGVzW1wiSm9iT3B0aW9uc1wiXSA9IFwiYnVsbG1xLmpvYi5vcHRpb25zXCI7XG4gICAgVGVsZW1ldHJ5QXR0cmlidXRlc1tcIkpvYlByb2dyZXNzXCJdID0gXCJidWxsbXEuam9iLnByb2dyZXNzXCI7XG4gICAgVGVsZW1ldHJ5QXR0cmlidXRlc1tcIlF1ZXVlRHJhaW5EZWxheVwiXSA9IFwiYnVsbG1xLnF1ZXVlLmRyYWluLmRlbGF5XCI7XG4gICAgVGVsZW1ldHJ5QXR0cmlidXRlc1tcIlF1ZXVlR3JhY2VcIl0gPSBcImJ1bGxtcS5xdWV1ZS5ncmFjZVwiO1xuICAgIFRlbGVtZXRyeUF0dHJpYnV0ZXNbXCJRdWV1ZUNsZWFuTGltaXRcIl0gPSBcImJ1bGxtcS5xdWV1ZS5jbGVhbi5saW1pdFwiO1xuICAgIFRlbGVtZXRyeUF0dHJpYnV0ZXNbXCJRdWV1ZVJhdGVMaW1pdFwiXSA9IFwiYnVsbG1xLnF1ZXVlLnJhdGUubGltaXRcIjtcbiAgICBUZWxlbWV0cnlBdHRyaWJ1dGVzW1wiSm9iVHlwZVwiXSA9IFwiYnVsbG1xLmpvYi50eXBlXCI7XG4gICAgVGVsZW1ldHJ5QXR0cmlidXRlc1tcIlF1ZXVlT3B0aW9uc1wiXSA9IFwiYnVsbG1xLnF1ZXVlLm9wdGlvbnNcIjtcbiAgICBUZWxlbWV0cnlBdHRyaWJ1dGVzW1wiUXVldWVFdmVudE1heExlbmd0aFwiXSA9IFwiYnVsbG1xLnF1ZXVlLmV2ZW50Lm1heC5sZW5ndGhcIjtcbiAgICBUZWxlbWV0cnlBdHRyaWJ1dGVzW1wiV29ya2VyT3B0aW9uc1wiXSA9IFwiYnVsbG1xLndvcmtlci5vcHRpb25zXCI7XG4gICAgVGVsZW1ldHJ5QXR0cmlidXRlc1tcIldvcmtlck5hbWVcIl0gPSBcImJ1bGxtcS53b3JrZXIubmFtZVwiO1xuICAgIFRlbGVtZXRyeUF0dHJpYnV0ZXNbXCJXb3JrZXJJZFwiXSA9IFwiYnVsbG1xLndvcmtlci5pZFwiO1xuICAgIFRlbGVtZXRyeUF0dHJpYnV0ZXNbXCJXb3JrZXJSYXRlTGltaXRcIl0gPSBcImJ1bGxtcS53b3JrZXIucmF0ZS5saW1pdFwiO1xuICAgIFRlbGVtZXRyeUF0dHJpYnV0ZXNbXCJXb3JrZXJEb05vdFdhaXRBY3RpdmVcIl0gPSBcImJ1bGxtcS53b3JrZXIuZG8ubm90LndhaXQuYWN0aXZlXCI7XG4gICAgVGVsZW1ldHJ5QXR0cmlidXRlc1tcIldvcmtlckZvcmNlQ2xvc2VcIl0gPSBcImJ1bGxtcS53b3JrZXIuZm9yY2UuY2xvc2VcIjtcbiAgICBUZWxlbWV0cnlBdHRyaWJ1dGVzW1wiV29ya2VyU3RhbGxlZEpvYnNcIl0gPSBcImJ1bGxtcS53b3JrZXIuc3RhbGxlZC5qb2JzXCI7XG4gICAgVGVsZW1ldHJ5QXR0cmlidXRlc1tcIldvcmtlckZhaWxlZEpvYnNcIl0gPSBcImJ1bGxtcS53b3JrZXIuZmFpbGVkLmpvYnNcIjtcbiAgICBUZWxlbWV0cnlBdHRyaWJ1dGVzW1wiV29ya2VySm9ic1RvRXh0ZW5kTG9ja3NcIl0gPSBcImJ1bGxtcS53b3JrZXIuam9icy50by5leHRlbmQubG9ja3NcIjtcbiAgICBUZWxlbWV0cnlBdHRyaWJ1dGVzW1wiSm9iRmluaXNoZWRUaW1lc3RhbXBcIl0gPSBcImJ1bGxtcS5qb2IuZmluaXNoZWQudGltZXN0YW1wXCI7XG4gICAgVGVsZW1ldHJ5QXR0cmlidXRlc1tcIkpvYlByb2Nlc3NlZFRpbWVzdGFtcFwiXSA9IFwiYnVsbG1xLmpvYi5wcm9jZXNzZWQudGltZXN0YW1wXCI7XG4gICAgVGVsZW1ldHJ5QXR0cmlidXRlc1tcIkpvYlJlc3VsdFwiXSA9IFwiYnVsbG1xLmpvYi5yZXN1bHRcIjtcbiAgICBUZWxlbWV0cnlBdHRyaWJ1dGVzW1wiSm9iRmFpbGVkUmVhc29uXCJdID0gXCJidWxsbXEuam9iLmZhaWxlZC5yZWFzb25cIjtcbiAgICBUZWxlbWV0cnlBdHRyaWJ1dGVzW1wiRmxvd05hbWVcIl0gPSBcImJ1bGxtcS5mbG93Lm5hbWVcIjtcbiAgICBUZWxlbWV0cnlBdHRyaWJ1dGVzW1wiSm9iU2NoZWR1bGVySWRcIl0gPSBcImJ1bGxtcS5qb2Iuc2NoZWR1bGVyLmlkXCI7XG59KShUZWxlbWV0cnlBdHRyaWJ1dGVzIHx8IChleHBvcnRzLlRlbGVtZXRyeUF0dHJpYnV0ZXMgPSBUZWxlbWV0cnlBdHRyaWJ1dGVzID0ge30pKTtcbnZhciBTcGFuS2luZDtcbihmdW5jdGlvbiAoU3BhbktpbmQpIHtcbiAgICBTcGFuS2luZFtTcGFuS2luZFtcIklOVEVSTkFMXCJdID0gMF0gPSBcIklOVEVSTkFMXCI7XG4gICAgU3BhbktpbmRbU3BhbktpbmRbXCJTRVJWRVJcIl0gPSAxXSA9IFwiU0VSVkVSXCI7XG4gICAgU3BhbktpbmRbU3BhbktpbmRbXCJDTElFTlRcIl0gPSAyXSA9IFwiQ0xJRU5UXCI7XG4gICAgU3BhbktpbmRbU3BhbktpbmRbXCJQUk9EVUNFUlwiXSA9IDNdID0gXCJQUk9EVUNFUlwiO1xuICAgIFNwYW5LaW5kW1NwYW5LaW5kW1wiQ09OU1VNRVJcIl0gPSA0XSA9IFwiQ09OU1VNRVJcIjtcbn0pKFNwYW5LaW5kIHx8IChleHBvcnRzLlNwYW5LaW5kID0gU3BhbktpbmQgPSB7fSkpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dGVsZW1ldHJ5LWF0dHJpYnV0ZXMuanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiU3BhbktpbmQiLCJUZWxlbWV0cnlBdHRyaWJ1dGVzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/enums/telemetry-attributes.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/index.js":
/*!***********************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/index.js ***!
  \***********************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nconst tslib_1 = __webpack_require__(/*! tslib */ \"(rsc)/./node_modules/tslib/tslib.es6.mjs\");\ntslib_1.__exportStar(__webpack_require__(/*! ./classes */ \"(rsc)/./node_modules/bullmq/dist/cjs/classes/index.js\"), exports);\ntslib_1.__exportStar(__webpack_require__(/*! ./enums */ \"(rsc)/./node_modules/bullmq/dist/cjs/enums/index.js\"), exports);\ntslib_1.__exportStar(__webpack_require__(/*! ./interfaces */ \"(rsc)/./node_modules/bullmq/dist/cjs/interfaces/index.js\"), exports);\ntslib_1.__exportStar(__webpack_require__(/*! ./types */ \"(rsc)/./node_modules/bullmq/dist/cjs/types/index.js\"), exports);\ntslib_1.__exportStar(__webpack_require__(/*! ./utils */ \"(rsc)/./node_modules/bullmq/dist/cjs/utils/index.js\"), exports);\n// to prevent circular references\ntslib_1.__exportStar(__webpack_require__(/*! ./types/processor */ \"(rsc)/./node_modules/bullmq/dist/cjs/types/processor.js\"), exports);\ntslib_1.__exportStar(__webpack_require__(/*! ./utils/create-scripts */ \"(rsc)/./node_modules/bullmq/dist/cjs/utils/create-scripts.js\"), exports); //# sourceMappingURL=index.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL2luZGV4LmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdELE1BQU1DLFVBQVVDLG1CQUFPQSxDQUFDLHVEQUFPO0FBQy9CRCxRQUFRRSxZQUFZLENBQUNELG1CQUFPQSxDQUFDLHdFQUFXLEdBQUdIO0FBQzNDRSxRQUFRRSxZQUFZLENBQUNELG1CQUFPQSxDQUFDLG9FQUFTLEdBQUdIO0FBQ3pDRSxRQUFRRSxZQUFZLENBQUNELG1CQUFPQSxDQUFDLDhFQUFjLEdBQUdIO0FBQzlDRSxRQUFRRSxZQUFZLENBQUNELG1CQUFPQSxDQUFDLG9FQUFTLEdBQUdIO0FBQ3pDRSxRQUFRRSxZQUFZLENBQUNELG1CQUFPQSxDQUFDLG9FQUFTLEdBQUdIO0FBQ3pDLGlDQUFpQztBQUNqQ0UsUUFBUUUsWUFBWSxDQUFDRCxtQkFBT0EsQ0FBQyxrRkFBbUIsR0FBR0g7QUFDbkRFLFFBQVFFLFlBQVksQ0FBQ0QsbUJBQU9BLENBQUMsNEZBQXdCLEdBQUdILFVBQ3hELGlDQUFpQyIsInNvdXJjZXMiOlsid2VicGFjazovL29ubHlmYW5zLXBsYXRmb3JtLy4vbm9kZV9tb2R1bGVzL2J1bGxtcS9kaXN0L2Nqcy9pbmRleC5qcz84NjMyIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuY29uc3QgdHNsaWJfMSA9IHJlcXVpcmUoXCJ0c2xpYlwiKTtcbnRzbGliXzEuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL2NsYXNzZXNcIiksIGV4cG9ydHMpO1xudHNsaWJfMS5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vZW51bXNcIiksIGV4cG9ydHMpO1xudHNsaWJfMS5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vaW50ZXJmYWNlc1wiKSwgZXhwb3J0cyk7XG50c2xpYl8xLl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi90eXBlc1wiKSwgZXhwb3J0cyk7XG50c2xpYl8xLl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi91dGlsc1wiKSwgZXhwb3J0cyk7XG4vLyB0byBwcmV2ZW50IGNpcmN1bGFyIHJlZmVyZW5jZXNcbnRzbGliXzEuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL3R5cGVzL3Byb2Nlc3NvclwiKSwgZXhwb3J0cyk7XG50c2xpYl8xLl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi91dGlscy9jcmVhdGUtc2NyaXB0c1wiKSwgZXhwb3J0cyk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJ0c2xpYl8xIiwicmVxdWlyZSIsIl9fZXhwb3J0U3RhciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/interfaces/advanced-options.js":
/*!*********************************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/interfaces/advanced-options.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n})); //# sourceMappingURL=advanced-options.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL2ludGVyZmFjZXMvYWR2YW5jZWQtb3B0aW9ucy5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQyxFQUM3RCw0Q0FBNEMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vbmx5ZmFucy1wbGF0Zm9ybS8uL25vZGVfbW9kdWxlcy9idWxsbXEvZGlzdC9janMvaW50ZXJmYWNlcy9hZHZhbmNlZC1vcHRpb25zLmpzPzU0ZjkiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1hZHZhbmNlZC1vcHRpb25zLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/interfaces/advanced-options.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/interfaces/backoff-options.js":
/*!********************************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/interfaces/backoff-options.js ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n})); //# sourceMappingURL=backoff-options.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL2ludGVyZmFjZXMvYmFja29mZi1vcHRpb25zLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDLEVBQzdELDJDQUEyQyIsInNvdXJjZXMiOlsid2VicGFjazovL29ubHlmYW5zLXBsYXRmb3JtLy4vbm9kZV9tb2R1bGVzL2J1bGxtcS9kaXN0L2Nqcy9pbnRlcmZhY2VzL2JhY2tvZmYtb3B0aW9ucy5qcz8wNDUzIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YmFja29mZi1vcHRpb25zLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/interfaces/backoff-options.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/interfaces/base-job-options.js":
/*!*********************************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/interfaces/base-job-options.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n})); //# sourceMappingURL=base-job-options.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL2ludGVyZmFjZXMvYmFzZS1qb2Itb3B0aW9ucy5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQyxFQUM3RCw0Q0FBNEMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vbmx5ZmFucy1wbGF0Zm9ybS8uL25vZGVfbW9kdWxlcy9idWxsbXEvZGlzdC9janMvaW50ZXJmYWNlcy9iYXNlLWpvYi1vcHRpb25zLmpzPzMwODQiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1iYXNlLWpvYi1vcHRpb25zLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/interfaces/base-job-options.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/interfaces/child-message.js":
/*!******************************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/interfaces/child-message.js ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n})); //# sourceMappingURL=child-message.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL2ludGVyZmFjZXMvY2hpbGQtbWVzc2FnZS5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQyxFQUM3RCx5Q0FBeUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vbmx5ZmFucy1wbGF0Zm9ybS8uL25vZGVfbW9kdWxlcy9idWxsbXEvZGlzdC9janMvaW50ZXJmYWNlcy9jaGlsZC1tZXNzYWdlLmpzPzc5OGMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jaGlsZC1tZXNzYWdlLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/interfaces/child-message.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/interfaces/connection.js":
/*!***************************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/interfaces/connection.js ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n})); //# sourceMappingURL=connection.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL2ludGVyZmFjZXMvY29ubmVjdGlvbi5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQyxFQUM3RCxzQ0FBc0MiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vbmx5ZmFucy1wbGF0Zm9ybS8uL25vZGVfbW9kdWxlcy9idWxsbXEvZGlzdC9janMvaW50ZXJmYWNlcy9jb25uZWN0aW9uLmpzPzBlNzMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb25uZWN0aW9uLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/interfaces/connection.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/interfaces/flow-job.js":
/*!*************************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/interfaces/flow-job.js ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n})); //# sourceMappingURL=flow-job.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL2ludGVyZmFjZXMvZmxvdy1qb2IuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUMsRUFDN0Qsb0NBQW9DIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb25seWZhbnMtcGxhdGZvcm0vLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL2ludGVyZmFjZXMvZmxvdy1qb2IuanM/ODZkZCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWZsb3ctam9iLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/interfaces/flow-job.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/interfaces/index.js":
/*!**********************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/interfaces/index.js ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nconst tslib_1 = __webpack_require__(/*! tslib */ \"(rsc)/./node_modules/tslib/tslib.es6.mjs\");\ntslib_1.__exportStar(__webpack_require__(/*! ./advanced-options */ \"(rsc)/./node_modules/bullmq/dist/cjs/interfaces/advanced-options.js\"), exports);\ntslib_1.__exportStar(__webpack_require__(/*! ./backoff-options */ \"(rsc)/./node_modules/bullmq/dist/cjs/interfaces/backoff-options.js\"), exports);\ntslib_1.__exportStar(__webpack_require__(/*! ./base-job-options */ \"(rsc)/./node_modules/bullmq/dist/cjs/interfaces/base-job-options.js\"), exports);\ntslib_1.__exportStar(__webpack_require__(/*! ./child-message */ \"(rsc)/./node_modules/bullmq/dist/cjs/interfaces/child-message.js\"), exports);\ntslib_1.__exportStar(__webpack_require__(/*! ./connection */ \"(rsc)/./node_modules/bullmq/dist/cjs/interfaces/connection.js\"), exports);\ntslib_1.__exportStar(__webpack_require__(/*! ./flow-job */ \"(rsc)/./node_modules/bullmq/dist/cjs/interfaces/flow-job.js\"), exports);\ntslib_1.__exportStar(__webpack_require__(/*! ./ioredis-events */ \"(rsc)/./node_modules/bullmq/dist/cjs/interfaces/ioredis-events.js\"), exports);\ntslib_1.__exportStar(__webpack_require__(/*! ./job-json */ \"(rsc)/./node_modules/bullmq/dist/cjs/interfaces/job-json.js\"), exports);\ntslib_1.__exportStar(__webpack_require__(/*! ./job-scheduler-json */ \"(rsc)/./node_modules/bullmq/dist/cjs/interfaces/job-scheduler-json.js\"), exports);\ntslib_1.__exportStar(__webpack_require__(/*! ./keep-jobs */ \"(rsc)/./node_modules/bullmq/dist/cjs/interfaces/keep-jobs.js\"), exports);\ntslib_1.__exportStar(__webpack_require__(/*! ./metrics-options */ \"(rsc)/./node_modules/bullmq/dist/cjs/interfaces/metrics-options.js\"), exports);\ntslib_1.__exportStar(__webpack_require__(/*! ./metrics */ \"(rsc)/./node_modules/bullmq/dist/cjs/interfaces/metrics.js\"), exports);\ntslib_1.__exportStar(__webpack_require__(/*! ./minimal-job */ \"(rsc)/./node_modules/bullmq/dist/cjs/interfaces/minimal-job.js\"), exports);\ntslib_1.__exportStar(__webpack_require__(/*! ./minimal-queue */ \"(rsc)/./node_modules/bullmq/dist/cjs/interfaces/minimal-queue.js\"), exports);\ntslib_1.__exportStar(__webpack_require__(/*! ./parent-message */ \"(rsc)/./node_modules/bullmq/dist/cjs/interfaces/parent-message.js\"), exports);\ntslib_1.__exportStar(__webpack_require__(/*! ./parent */ \"(rsc)/./node_modules/bullmq/dist/cjs/interfaces/parent.js\"), exports);\ntslib_1.__exportStar(__webpack_require__(/*! ./parent-options */ \"(rsc)/./node_modules/bullmq/dist/cjs/interfaces/parent-options.js\"), exports);\ntslib_1.__exportStar(__webpack_require__(/*! ./queue-meta */ \"(rsc)/./node_modules/bullmq/dist/cjs/interfaces/queue-meta.js\"), exports);\ntslib_1.__exportStar(__webpack_require__(/*! ./queue-options */ \"(rsc)/./node_modules/bullmq/dist/cjs/interfaces/queue-options.js\"), exports);\ntslib_1.__exportStar(__webpack_require__(/*! ./rate-limiter-options */ \"(rsc)/./node_modules/bullmq/dist/cjs/interfaces/rate-limiter-options.js\"), exports);\ntslib_1.__exportStar(__webpack_require__(/*! ./redis-options */ \"(rsc)/./node_modules/bullmq/dist/cjs/interfaces/redis-options.js\"), exports);\ntslib_1.__exportStar(__webpack_require__(/*! ./redis-streams */ \"(rsc)/./node_modules/bullmq/dist/cjs/interfaces/redis-streams.js\"), exports);\ntslib_1.__exportStar(__webpack_require__(/*! ./repeatable-job */ \"(rsc)/./node_modules/bullmq/dist/cjs/interfaces/repeatable-job.js\"), exports);\ntslib_1.__exportStar(__webpack_require__(/*! ./repeatable-options */ \"(rsc)/./node_modules/bullmq/dist/cjs/interfaces/repeatable-options.js\"), exports);\ntslib_1.__exportStar(__webpack_require__(/*! ./repeat-options */ \"(rsc)/./node_modules/bullmq/dist/cjs/interfaces/repeat-options.js\"), exports);\ntslib_1.__exportStar(__webpack_require__(/*! ./script-queue-context */ \"(rsc)/./node_modules/bullmq/dist/cjs/interfaces/script-queue-context.js\"), exports);\ntslib_1.__exportStar(__webpack_require__(/*! ./sandboxed-job-processor */ \"(rsc)/./node_modules/bullmq/dist/cjs/interfaces/sandboxed-job-processor.js\"), exports);\ntslib_1.__exportStar(__webpack_require__(/*! ./sandboxed-job */ \"(rsc)/./node_modules/bullmq/dist/cjs/interfaces/sandboxed-job.js\"), exports);\ntslib_1.__exportStar(__webpack_require__(/*! ./sandboxed-options */ \"(rsc)/./node_modules/bullmq/dist/cjs/interfaces/sandboxed-options.js\"), exports);\ntslib_1.__exportStar(__webpack_require__(/*! ./worker-options */ \"(rsc)/./node_modules/bullmq/dist/cjs/interfaces/worker-options.js\"), exports);\ntslib_1.__exportStar(__webpack_require__(/*! ./telemetry */ \"(rsc)/./node_modules/bullmq/dist/cjs/interfaces/telemetry.js\"), exports);\ntslib_1.__exportStar(__webpack_require__(/*! ./receiver */ \"(rsc)/./node_modules/bullmq/dist/cjs/interfaces/receiver.js\"), exports); //# sourceMappingURL=index.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL2ludGVyZmFjZXMvaW5kZXguanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0QsTUFBTUMsVUFBVUMsbUJBQU9BLENBQUMsdURBQU87QUFDL0JELFFBQVFFLFlBQVksQ0FBQ0QsbUJBQU9BLENBQUMsK0ZBQW9CLEdBQUdIO0FBQ3BERSxRQUFRRSxZQUFZLENBQUNELG1CQUFPQSxDQUFDLDZGQUFtQixHQUFHSDtBQUNuREUsUUFBUUUsWUFBWSxDQUFDRCxtQkFBT0EsQ0FBQywrRkFBb0IsR0FBR0g7QUFDcERFLFFBQVFFLFlBQVksQ0FBQ0QsbUJBQU9BLENBQUMseUZBQWlCLEdBQUdIO0FBQ2pERSxRQUFRRSxZQUFZLENBQUNELG1CQUFPQSxDQUFDLG1GQUFjLEdBQUdIO0FBQzlDRSxRQUFRRSxZQUFZLENBQUNELG1CQUFPQSxDQUFDLCtFQUFZLEdBQUdIO0FBQzVDRSxRQUFRRSxZQUFZLENBQUNELG1CQUFPQSxDQUFDLDJGQUFrQixHQUFHSDtBQUNsREUsUUFBUUUsWUFBWSxDQUFDRCxtQkFBT0EsQ0FBQywrRUFBWSxHQUFHSDtBQUM1Q0UsUUFBUUUsWUFBWSxDQUFDRCxtQkFBT0EsQ0FBQyxtR0FBc0IsR0FBR0g7QUFDdERFLFFBQVFFLFlBQVksQ0FBQ0QsbUJBQU9BLENBQUMsaUZBQWEsR0FBR0g7QUFDN0NFLFFBQVFFLFlBQVksQ0FBQ0QsbUJBQU9BLENBQUMsNkZBQW1CLEdBQUdIO0FBQ25ERSxRQUFRRSxZQUFZLENBQUNELG1CQUFPQSxDQUFDLDZFQUFXLEdBQUdIO0FBQzNDRSxRQUFRRSxZQUFZLENBQUNELG1CQUFPQSxDQUFDLHFGQUFlLEdBQUdIO0FBQy9DRSxRQUFRRSxZQUFZLENBQUNELG1CQUFPQSxDQUFDLHlGQUFpQixHQUFHSDtBQUNqREUsUUFBUUUsWUFBWSxDQUFDRCxtQkFBT0EsQ0FBQywyRkFBa0IsR0FBR0g7QUFDbERFLFFBQVFFLFlBQVksQ0FBQ0QsbUJBQU9BLENBQUMsMkVBQVUsR0FBR0g7QUFDMUNFLFFBQVFFLFlBQVksQ0FBQ0QsbUJBQU9BLENBQUMsMkZBQWtCLEdBQUdIO0FBQ2xERSxRQUFRRSxZQUFZLENBQUNELG1CQUFPQSxDQUFDLG1GQUFjLEdBQUdIO0FBQzlDRSxRQUFRRSxZQUFZLENBQUNELG1CQUFPQSxDQUFDLHlGQUFpQixHQUFHSDtBQUNqREUsUUFBUUUsWUFBWSxDQUFDRCxtQkFBT0EsQ0FBQyx1R0FBd0IsR0FBR0g7QUFDeERFLFFBQVFFLFlBQVksQ0FBQ0QsbUJBQU9BLENBQUMseUZBQWlCLEdBQUdIO0FBQ2pERSxRQUFRRSxZQUFZLENBQUNELG1CQUFPQSxDQUFDLHlGQUFpQixHQUFHSDtBQUNqREUsUUFBUUUsWUFBWSxDQUFDRCxtQkFBT0EsQ0FBQywyRkFBa0IsR0FBR0g7QUFDbERFLFFBQVFFLFlBQVksQ0FBQ0QsbUJBQU9BLENBQUMsbUdBQXNCLEdBQUdIO0FBQ3RERSxRQUFRRSxZQUFZLENBQUNELG1CQUFPQSxDQUFDLDJGQUFrQixHQUFHSDtBQUNsREUsUUFBUUUsWUFBWSxDQUFDRCxtQkFBT0EsQ0FBQyx1R0FBd0IsR0FBR0g7QUFDeERFLFFBQVFFLFlBQVksQ0FBQ0QsbUJBQU9BLENBQUMsNkdBQTJCLEdBQUdIO0FBQzNERSxRQUFRRSxZQUFZLENBQUNELG1CQUFPQSxDQUFDLHlGQUFpQixHQUFHSDtBQUNqREUsUUFBUUUsWUFBWSxDQUFDRCxtQkFBT0EsQ0FBQyxpR0FBcUIsR0FBR0g7QUFDckRFLFFBQVFFLFlBQVksQ0FBQ0QsbUJBQU9BLENBQUMsMkZBQWtCLEdBQUdIO0FBQ2xERSxRQUFRRSxZQUFZLENBQUNELG1CQUFPQSxDQUFDLGlGQUFhLEdBQUdIO0FBQzdDRSxRQUFRRSxZQUFZLENBQUNELG1CQUFPQSxDQUFDLCtFQUFZLEdBQUdILFVBQzVDLGlDQUFpQyIsInNvdXJjZXMiOlsid2VicGFjazovL29ubHlmYW5zLXBsYXRmb3JtLy4vbm9kZV9tb2R1bGVzL2J1bGxtcS9kaXN0L2Nqcy9pbnRlcmZhY2VzL2luZGV4LmpzPzNmOWUiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5jb25zdCB0c2xpYl8xID0gcmVxdWlyZShcInRzbGliXCIpO1xudHNsaWJfMS5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vYWR2YW5jZWQtb3B0aW9uc1wiKSwgZXhwb3J0cyk7XG50c2xpYl8xLl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi9iYWNrb2ZmLW9wdGlvbnNcIiksIGV4cG9ydHMpO1xudHNsaWJfMS5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vYmFzZS1qb2Itb3B0aW9uc1wiKSwgZXhwb3J0cyk7XG50c2xpYl8xLl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi9jaGlsZC1tZXNzYWdlXCIpLCBleHBvcnRzKTtcbnRzbGliXzEuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL2Nvbm5lY3Rpb25cIiksIGV4cG9ydHMpO1xudHNsaWJfMS5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vZmxvdy1qb2JcIiksIGV4cG9ydHMpO1xudHNsaWJfMS5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vaW9yZWRpcy1ldmVudHNcIiksIGV4cG9ydHMpO1xudHNsaWJfMS5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vam9iLWpzb25cIiksIGV4cG9ydHMpO1xudHNsaWJfMS5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vam9iLXNjaGVkdWxlci1qc29uXCIpLCBleHBvcnRzKTtcbnRzbGliXzEuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL2tlZXAtam9ic1wiKSwgZXhwb3J0cyk7XG50c2xpYl8xLl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi9tZXRyaWNzLW9wdGlvbnNcIiksIGV4cG9ydHMpO1xudHNsaWJfMS5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vbWV0cmljc1wiKSwgZXhwb3J0cyk7XG50c2xpYl8xLl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi9taW5pbWFsLWpvYlwiKSwgZXhwb3J0cyk7XG50c2xpYl8xLl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi9taW5pbWFsLXF1ZXVlXCIpLCBleHBvcnRzKTtcbnRzbGliXzEuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL3BhcmVudC1tZXNzYWdlXCIpLCBleHBvcnRzKTtcbnRzbGliXzEuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL3BhcmVudFwiKSwgZXhwb3J0cyk7XG50c2xpYl8xLl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi9wYXJlbnQtb3B0aW9uc1wiKSwgZXhwb3J0cyk7XG50c2xpYl8xLl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi9xdWV1ZS1tZXRhXCIpLCBleHBvcnRzKTtcbnRzbGliXzEuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL3F1ZXVlLW9wdGlvbnNcIiksIGV4cG9ydHMpO1xudHNsaWJfMS5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vcmF0ZS1saW1pdGVyLW9wdGlvbnNcIiksIGV4cG9ydHMpO1xudHNsaWJfMS5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vcmVkaXMtb3B0aW9uc1wiKSwgZXhwb3J0cyk7XG50c2xpYl8xLl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi9yZWRpcy1zdHJlYW1zXCIpLCBleHBvcnRzKTtcbnRzbGliXzEuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL3JlcGVhdGFibGUtam9iXCIpLCBleHBvcnRzKTtcbnRzbGliXzEuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL3JlcGVhdGFibGUtb3B0aW9uc1wiKSwgZXhwb3J0cyk7XG50c2xpYl8xLl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi9yZXBlYXQtb3B0aW9uc1wiKSwgZXhwb3J0cyk7XG50c2xpYl8xLl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi9zY3JpcHQtcXVldWUtY29udGV4dFwiKSwgZXhwb3J0cyk7XG50c2xpYl8xLl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi9zYW5kYm94ZWQtam9iLXByb2Nlc3NvclwiKSwgZXhwb3J0cyk7XG50c2xpYl8xLl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi9zYW5kYm94ZWQtam9iXCIpLCBleHBvcnRzKTtcbnRzbGliXzEuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL3NhbmRib3hlZC1vcHRpb25zXCIpLCBleHBvcnRzKTtcbnRzbGliXzEuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL3dvcmtlci1vcHRpb25zXCIpLCBleHBvcnRzKTtcbnRzbGliXzEuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL3RlbGVtZXRyeVwiKSwgZXhwb3J0cyk7XG50c2xpYl8xLl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi9yZWNlaXZlclwiKSwgZXhwb3J0cyk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJ0c2xpYl8xIiwicmVxdWlyZSIsIl9fZXhwb3J0U3RhciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/interfaces/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/interfaces/ioredis-events.js":
/*!*******************************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/interfaces/ioredis-events.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n})); //# sourceMappingURL=ioredis-events.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL2ludGVyZmFjZXMvaW9yZWRpcy1ldmVudHMuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUMsRUFDN0QsMENBQTBDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb25seWZhbnMtcGxhdGZvcm0vLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL2ludGVyZmFjZXMvaW9yZWRpcy1ldmVudHMuanM/NzE3MSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWlvcmVkaXMtZXZlbnRzLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/interfaces/ioredis-events.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/interfaces/job-json.js":
/*!*************************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/interfaces/job-json.js ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n})); //# sourceMappingURL=job-json.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL2ludGVyZmFjZXMvam9iLWpzb24uanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUMsRUFDN0Qsb0NBQW9DIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb25seWZhbnMtcGxhdGZvcm0vLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL2ludGVyZmFjZXMvam9iLWpzb24uanM/OTQ0OCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWpvYi1qc29uLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/interfaces/job-json.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/interfaces/job-scheduler-json.js":
/*!***********************************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/interfaces/job-scheduler-json.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n})); //# sourceMappingURL=job-scheduler-json.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL2ludGVyZmFjZXMvam9iLXNjaGVkdWxlci1qc29uLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDLEVBQzdELDhDQUE4QyIsInNvdXJjZXMiOlsid2VicGFjazovL29ubHlmYW5zLXBsYXRmb3JtLy4vbm9kZV9tb2R1bGVzL2J1bGxtcS9kaXN0L2Nqcy9pbnRlcmZhY2VzL2pvYi1zY2hlZHVsZXItanNvbi5qcz9lNWU2Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9am9iLXNjaGVkdWxlci1qc29uLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/interfaces/job-scheduler-json.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/interfaces/keep-jobs.js":
/*!**************************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/interfaces/keep-jobs.js ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n})); //# sourceMappingURL=keep-jobs.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL2ludGVyZmFjZXMva2VlcC1qb2JzLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDLEVBQzdELHFDQUFxQyIsInNvdXJjZXMiOlsid2VicGFjazovL29ubHlmYW5zLXBsYXRmb3JtLy4vbm9kZV9tb2R1bGVzL2J1bGxtcS9kaXN0L2Nqcy9pbnRlcmZhY2VzL2tlZXAtam9icy5qcz9kNjllIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9a2VlcC1qb2JzLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/interfaces/keep-jobs.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/interfaces/metrics-options.js":
/*!********************************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/interfaces/metrics-options.js ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n})); //# sourceMappingURL=metrics-options.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL2ludGVyZmFjZXMvbWV0cmljcy1vcHRpb25zLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDLEVBQzdELDJDQUEyQyIsInNvdXJjZXMiOlsid2VicGFjazovL29ubHlmYW5zLXBsYXRmb3JtLy4vbm9kZV9tb2R1bGVzL2J1bGxtcS9kaXN0L2Nqcy9pbnRlcmZhY2VzL21ldHJpY3Mtb3B0aW9ucy5qcz84MDBlIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bWV0cmljcy1vcHRpb25zLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/interfaces/metrics-options.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/interfaces/metrics.js":
/*!************************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/interfaces/metrics.js ***!
  \************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n})); //# sourceMappingURL=metrics.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL2ludGVyZmFjZXMvbWV0cmljcy5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQyxFQUM3RCxtQ0FBbUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vbmx5ZmFucy1wbGF0Zm9ybS8uL25vZGVfbW9kdWxlcy9idWxsbXEvZGlzdC9janMvaW50ZXJmYWNlcy9tZXRyaWNzLmpzP2IxNWEiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1tZXRyaWNzLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/interfaces/metrics.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/interfaces/minimal-job.js":
/*!****************************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/interfaces/minimal-job.js ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n})); //# sourceMappingURL=minimal-job.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL2ludGVyZmFjZXMvbWluaW1hbC1qb2IuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUMsRUFDN0QsdUNBQXVDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb25seWZhbnMtcGxhdGZvcm0vLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL2ludGVyZmFjZXMvbWluaW1hbC1qb2IuanM/MTUwZSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1pbmltYWwtam9iLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/interfaces/minimal-job.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/interfaces/minimal-queue.js":
/*!******************************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/interfaces/minimal-queue.js ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n})); //# sourceMappingURL=minimal-queue.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL2ludGVyZmFjZXMvbWluaW1hbC1xdWV1ZS5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQyxFQUM3RCx5Q0FBeUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vbmx5ZmFucy1wbGF0Zm9ybS8uL25vZGVfbW9kdWxlcy9idWxsbXEvZGlzdC9janMvaW50ZXJmYWNlcy9taW5pbWFsLXF1ZXVlLmpzP2I3MGYiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1taW5pbWFsLXF1ZXVlLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/interfaces/minimal-queue.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/interfaces/parent-message.js":
/*!*******************************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/interfaces/parent-message.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n})); //# sourceMappingURL=parent-message.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL2ludGVyZmFjZXMvcGFyZW50LW1lc3NhZ2UuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUMsRUFDN0QsMENBQTBDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb25seWZhbnMtcGxhdGZvcm0vLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL2ludGVyZmFjZXMvcGFyZW50LW1lc3NhZ2UuanM/NzU3NCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhcmVudC1tZXNzYWdlLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/interfaces/parent-message.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/interfaces/parent-options.js":
/*!*******************************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/interfaces/parent-options.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n})); //# sourceMappingURL=parent-options.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL2ludGVyZmFjZXMvcGFyZW50LW9wdGlvbnMuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUMsRUFDN0QsMENBQTBDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb25seWZhbnMtcGxhdGZvcm0vLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL2ludGVyZmFjZXMvcGFyZW50LW9wdGlvbnMuanM/NDYwNiJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhcmVudC1vcHRpb25zLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/interfaces/parent-options.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/interfaces/parent.js":
/*!***********************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/interfaces/parent.js ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n})); //# sourceMappingURL=parent.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL2ludGVyZmFjZXMvcGFyZW50LmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDLEVBQzdELGtDQUFrQyIsInNvdXJjZXMiOlsid2VicGFjazovL29ubHlmYW5zLXBsYXRmb3JtLy4vbm9kZV9tb2R1bGVzL2J1bGxtcS9kaXN0L2Nqcy9pbnRlcmZhY2VzL3BhcmVudC5qcz8wZThmIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGFyZW50LmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/interfaces/parent.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/interfaces/queue-meta.js":
/*!***************************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/interfaces/queue-meta.js ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n})); //# sourceMappingURL=queue-meta.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL2ludGVyZmFjZXMvcXVldWUtbWV0YS5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQyxFQUM3RCxzQ0FBc0MiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vbmx5ZmFucy1wbGF0Zm9ybS8uL25vZGVfbW9kdWxlcy9idWxsbXEvZGlzdC9janMvaW50ZXJmYWNlcy9xdWV1ZS1tZXRhLmpzPzM0ZDAiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1xdWV1ZS1tZXRhLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/interfaces/queue-meta.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/interfaces/queue-options.js":
/*!******************************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/interfaces/queue-options.js ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.ClientType = void 0;\nvar ClientType;\n(function(ClientType) {\n    ClientType[\"blocking\"] = \"blocking\";\n    ClientType[\"normal\"] = \"normal\";\n})(ClientType || (exports.ClientType = ClientType = {})); //# sourceMappingURL=queue-options.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL2ludGVyZmFjZXMvcXVldWUtb3B0aW9ucy5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsa0JBQWtCLEdBQUcsS0FBSztBQUMxQixJQUFJRTtBQUNILFVBQVVBLFVBQVU7SUFDakJBLFVBQVUsQ0FBQyxXQUFXLEdBQUc7SUFDekJBLFVBQVUsQ0FBQyxTQUFTLEdBQUc7QUFDM0IsR0FBR0EsY0FBZUYsQ0FBQUEsa0JBQWtCLEdBQUdFLGFBQWEsQ0FBQyxLQUNyRCx5Q0FBeUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vbmx5ZmFucy1wbGF0Zm9ybS8uL25vZGVfbW9kdWxlcy9idWxsbXEvZGlzdC9janMvaW50ZXJmYWNlcy9xdWV1ZS1vcHRpb25zLmpzP2QwN2EiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkNsaWVudFR5cGUgPSB2b2lkIDA7XG52YXIgQ2xpZW50VHlwZTtcbihmdW5jdGlvbiAoQ2xpZW50VHlwZSkge1xuICAgIENsaWVudFR5cGVbXCJibG9ja2luZ1wiXSA9IFwiYmxvY2tpbmdcIjtcbiAgICBDbGllbnRUeXBlW1wibm9ybWFsXCJdID0gXCJub3JtYWxcIjtcbn0pKENsaWVudFR5cGUgfHwgKGV4cG9ydHMuQ2xpZW50VHlwZSA9IENsaWVudFR5cGUgPSB7fSkpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cXVldWUtb3B0aW9ucy5qcy5tYXAiXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJDbGllbnRUeXBlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/interfaces/queue-options.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/interfaces/rate-limiter-options.js":
/*!*************************************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/interfaces/rate-limiter-options.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n})); //# sourceMappingURL=rate-limiter-options.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL2ludGVyZmFjZXMvcmF0ZS1saW1pdGVyLW9wdGlvbnMuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUMsRUFDN0QsZ0RBQWdEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb25seWZhbnMtcGxhdGZvcm0vLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL2ludGVyZmFjZXMvcmF0ZS1saW1pdGVyLW9wdGlvbnMuanM/MmUxMiJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJhdGUtbGltaXRlci1vcHRpb25zLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/interfaces/rate-limiter-options.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/interfaces/receiver.js":
/*!*************************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/interfaces/receiver.js ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n})); //# sourceMappingURL=receiver.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL2ludGVyZmFjZXMvcmVjZWl2ZXIuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUMsRUFDN0Qsb0NBQW9DIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb25seWZhbnMtcGxhdGZvcm0vLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL2ludGVyZmFjZXMvcmVjZWl2ZXIuanM/MjUyNCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJlY2VpdmVyLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/interfaces/receiver.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/interfaces/redis-options.js":
/*!******************************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/interfaces/redis-options.js ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n})); //# sourceMappingURL=redis-options.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL2ludGVyZmFjZXMvcmVkaXMtb3B0aW9ucy5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQyxFQUM3RCx5Q0FBeUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vbmx5ZmFucy1wbGF0Zm9ybS8uL25vZGVfbW9kdWxlcy9idWxsbXEvZGlzdC9janMvaW50ZXJmYWNlcy9yZWRpcy1vcHRpb25zLmpzPzY3ZTciXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1yZWRpcy1vcHRpb25zLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/interfaces/redis-options.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/interfaces/redis-streams.js":
/*!******************************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/interfaces/redis-streams.js ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n})); //# sourceMappingURL=redis-streams.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL2ludGVyZmFjZXMvcmVkaXMtc3RyZWFtcy5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQyxFQUM3RCx5Q0FBeUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vbmx5ZmFucy1wbGF0Zm9ybS8uL25vZGVfbW9kdWxlcy9idWxsbXEvZGlzdC9janMvaW50ZXJmYWNlcy9yZWRpcy1zdHJlYW1zLmpzPzVmMzMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1yZWRpcy1zdHJlYW1zLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/interfaces/redis-streams.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/interfaces/repeat-options.js":
/*!*******************************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/interfaces/repeat-options.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n})); //# sourceMappingURL=repeat-options.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL2ludGVyZmFjZXMvcmVwZWF0LW9wdGlvbnMuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUMsRUFDN0QsMENBQTBDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb25seWZhbnMtcGxhdGZvcm0vLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL2ludGVyZmFjZXMvcmVwZWF0LW9wdGlvbnMuanM/MTEwMCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJlcGVhdC1vcHRpb25zLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/interfaces/repeat-options.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/interfaces/repeatable-job.js":
/*!*******************************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/interfaces/repeatable-job.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n})); //# sourceMappingURL=repeatable-job.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL2ludGVyZmFjZXMvcmVwZWF0YWJsZS1qb2IuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUMsRUFDN0QsMENBQTBDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb25seWZhbnMtcGxhdGZvcm0vLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL2ludGVyZmFjZXMvcmVwZWF0YWJsZS1qb2IuanM/ODc0YyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJlcGVhdGFibGUtam9iLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/interfaces/repeatable-job.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/interfaces/repeatable-options.js":
/*!***********************************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/interfaces/repeatable-options.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n})); //# sourceMappingURL=repeatable-options.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL2ludGVyZmFjZXMvcmVwZWF0YWJsZS1vcHRpb25zLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDLEVBQzdELDhDQUE4QyIsInNvdXJjZXMiOlsid2VicGFjazovL29ubHlmYW5zLXBsYXRmb3JtLy4vbm9kZV9tb2R1bGVzL2J1bGxtcS9kaXN0L2Nqcy9pbnRlcmZhY2VzL3JlcGVhdGFibGUtb3B0aW9ucy5qcz8yZTAxIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmVwZWF0YWJsZS1vcHRpb25zLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/interfaces/repeatable-options.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/interfaces/sandboxed-job-processor.js":
/*!****************************************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/interfaces/sandboxed-job-processor.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n})); //# sourceMappingURL=sandboxed-job-processor.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL2ludGVyZmFjZXMvc2FuZGJveGVkLWpvYi1wcm9jZXNzb3IuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUMsRUFDN0QsbURBQW1EIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb25seWZhbnMtcGxhdGZvcm0vLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL2ludGVyZmFjZXMvc2FuZGJveGVkLWpvYi1wcm9jZXNzb3IuanM/ZGRhMSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNhbmRib3hlZC1qb2ItcHJvY2Vzc29yLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/interfaces/sandboxed-job-processor.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/interfaces/sandboxed-job.js":
/*!******************************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/interfaces/sandboxed-job.js ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n})); //# sourceMappingURL=sandboxed-job.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL2ludGVyZmFjZXMvc2FuZGJveGVkLWpvYi5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQyxFQUM3RCx5Q0FBeUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vbmx5ZmFucy1wbGF0Zm9ybS8uL25vZGVfbW9kdWxlcy9idWxsbXEvZGlzdC9janMvaW50ZXJmYWNlcy9zYW5kYm94ZWQtam9iLmpzPzA0NTgiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zYW5kYm94ZWQtam9iLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/interfaces/sandboxed-job.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/interfaces/sandboxed-options.js":
/*!**********************************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/interfaces/sandboxed-options.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n})); //# sourceMappingURL=sandboxed-options.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL2ludGVyZmFjZXMvc2FuZGJveGVkLW9wdGlvbnMuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUMsRUFDN0QsNkNBQTZDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb25seWZhbnMtcGxhdGZvcm0vLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL2ludGVyZmFjZXMvc2FuZGJveGVkLW9wdGlvbnMuanM/OTIyOCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNhbmRib3hlZC1vcHRpb25zLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/interfaces/sandboxed-options.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/interfaces/script-queue-context.js":
/*!*************************************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/interfaces/script-queue-context.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n})); //# sourceMappingURL=script-queue-context.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL2ludGVyZmFjZXMvc2NyaXB0LXF1ZXVlLWNvbnRleHQuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUMsRUFDN0QsZ0RBQWdEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb25seWZhbnMtcGxhdGZvcm0vLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL2ludGVyZmFjZXMvc2NyaXB0LXF1ZXVlLWNvbnRleHQuanM/NDE3ZSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNjcmlwdC1xdWV1ZS1jb250ZXh0LmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/interfaces/script-queue-context.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/interfaces/telemetry.js":
/*!**************************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/interfaces/telemetry.js ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n})); //# sourceMappingURL=telemetry.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL2ludGVyZmFjZXMvdGVsZW1ldHJ5LmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDLEVBQzdELHFDQUFxQyIsInNvdXJjZXMiOlsid2VicGFjazovL29ubHlmYW5zLXBsYXRmb3JtLy4vbm9kZV9tb2R1bGVzL2J1bGxtcS9kaXN0L2Nqcy9pbnRlcmZhY2VzL3RlbGVtZXRyeS5qcz8zNjFmIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dGVsZW1ldHJ5LmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/interfaces/telemetry.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/interfaces/worker-options.js":
/*!*******************************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/interfaces/worker-options.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n})); //# sourceMappingURL=worker-options.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL2ludGVyZmFjZXMvd29ya2VyLW9wdGlvbnMuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUMsRUFDN0QsMENBQTBDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb25seWZhbnMtcGxhdGZvcm0vLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL2ludGVyZmFjZXMvd29ya2VyLW9wdGlvbnMuanM/NThlNiJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXdvcmtlci1vcHRpb25zLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/interfaces/worker-options.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/scripts/addDelayedJob-6.js":
/*!*****************************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/scripts/addDelayedJob-6.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.addDelayedJob = void 0;\nconst content = `--[[\n  Adds a delayed job to the queue by doing the following:\n    - Increases the job counter if needed.\n    - Creates a new job key with the job data.\n    - computes timestamp.\n    - adds to delayed zset.\n    - Emits a global event 'delayed' if the job is delayed.\n    Input:\n      KEYS[1] 'marker',\n      KEYS[2] 'meta'\n      KEYS[3] 'id'\n      KEYS[4] 'delayed'\n      KEYS[5] 'completed'\n      KEYS[6] events stream key\n      ARGV[1] msgpacked arguments array\n            [1]  key prefix,\n            [2]  custom id (use custom instead of one generated automatically)\n            [3]  name\n            [4]  timestamp\n            [5]  parentKey?\n            [6]  parent dependencies key.\n            [7]  parent? {id, queueKey}\n            [8]  repeat job key\n            [9] deduplication key\n      ARGV[2] Json stringified job data\n      ARGV[3] msgpacked options\n      Output:\n        jobId  - OK\n        -5     - Missing parent key\n]]\nlocal metaKey = KEYS[2]\nlocal idKey = KEYS[3]\nlocal delayedKey = KEYS[4]\nlocal completedKey = KEYS[5]\nlocal eventsKey = KEYS[6]\nlocal jobId\nlocal jobIdKey\nlocal rcall = redis.call\nlocal args = cmsgpack.unpack(ARGV[1])\nlocal data = ARGV[2]\nlocal parentKey = args[5]\nlocal parent = args[7]\nlocal repeatJobKey = args[8]\nlocal deduplicationKey = args[9]\nlocal parentData\n-- Includes\n--[[\n  Adds a delayed job to the queue by doing the following:\n    - Creates a new job key with the job data.\n    - adds to delayed zset.\n    - Emits a global event 'delayed' if the job is delayed.\n]]\n-- Includes\n--[[\n  Add delay marker if needed.\n]]\n-- Includes\n--[[\n  Function to return the next delayed job timestamp.\n]]\nlocal function getNextDelayedTimestamp(delayedKey)\n  local result = rcall(\"ZRANGE\", delayedKey, 0, 0, \"WITHSCORES\")\n  if #result then\n    local nextTimestamp = tonumber(result[2])\n    if nextTimestamp ~= nil then\n      return nextTimestamp / 0x1000\n    end\n  end\nend\nlocal function addDelayMarkerIfNeeded(markerKey, delayedKey)\n  local nextTimestamp = getNextDelayedTimestamp(delayedKey)\n  if nextTimestamp ~= nil then\n    -- Replace the score of the marker with the newest known\n    -- next timestamp.\n    rcall(\"ZADD\", markerKey, nextTimestamp, \"1\")\n  end\nend\n--[[\n  Bake in the job id first 12 bits into the timestamp\n  to guarantee correct execution order of delayed jobs\n  (up to 4096 jobs per given timestamp or 4096 jobs apart per timestamp)\n  WARNING: Jobs that are so far apart that they wrap around will cause FIFO to fail\n]]\nlocal function getDelayedScore(delayedKey, timestamp, delay)\n  local delayedTimestamp = (delay > 0 and (tonumber(timestamp) + delay)) or tonumber(timestamp)\n  local minScore = delayedTimestamp * 0x1000\n  local maxScore = (delayedTimestamp + 1 ) * 0x1000 - 1\n  local result = rcall(\"ZREVRANGEBYSCORE\", delayedKey, maxScore,\n    minScore, \"WITHSCORES\",\"LIMIT\", 0, 1)\n  if #result then\n    local currentMaxScore = tonumber(result[2])\n    if currentMaxScore ~= nil then\n      if currentMaxScore >= maxScore then\n        return maxScore, delayedTimestamp\n      else\n        return currentMaxScore + 1, delayedTimestamp\n      end\n    end\n  end\n  return minScore, delayedTimestamp\nend\nlocal function addDelayedJob(jobId, delayedKey, eventsKey, timestamp,\n  maxEvents, markerKey, delay)\n  local score, delayedTimestamp = getDelayedScore(delayedKey, timestamp, tonumber(delay))\n  rcall(\"ZADD\", delayedKey, score, jobId)\n  rcall(\"XADD\", eventsKey, \"MAXLEN\", \"~\", maxEvents, \"*\", \"event\", \"delayed\",\n    \"jobId\", jobId, \"delay\", delayedTimestamp)\n  -- mark that a delayed job is available\n  addDelayMarkerIfNeeded(markerKey, delayedKey)\nend\n--[[\n  Function to debounce a job.\n]]\n-- Includes\n--[[\n  Function to remove job keys.\n]]\nlocal function removeJobKeys(jobKey)\n  return rcall(\"DEL\", jobKey, jobKey .. ':logs', jobKey .. ':dependencies',\n    jobKey .. ':processed', jobKey .. ':failed', jobKey .. ':unsuccessful')\nend\nlocal function removeDelayedJob(delayedKey, deduplicationKey, eventsKey, maxEvents, currentDeduplicatedJobId,\n    jobId, deduplicationId, prefix)\n    if rcall(\"ZREM\", delayedKey, currentDeduplicatedJobId) > 0 then\n        removeJobKeys(prefix .. currentDeduplicatedJobId)\n        rcall(\"XADD\", eventsKey, \"*\", \"event\", \"removed\", \"jobId\", currentDeduplicatedJobId,\n            \"prev\", \"delayed\")\n        -- TODO remove debounced event in next breaking change\n        rcall(\"XADD\", eventsKey, \"MAXLEN\", \"~\", maxEvents, \"*\", \"event\", \"debounced\", \"jobId\",\n            jobId, \"debounceId\", deduplicationId)\n        rcall(\"XADD\", eventsKey, \"MAXLEN\", \"~\", maxEvents, \"*\", \"event\", \"deduplicated\", \"jobId\",\n            jobId, \"deduplicationId\", deduplicationId, \"deduplicatedJobId\", currentDeduplicatedJobId)\n        return true\n    end\n    return false\nend\nlocal function deduplicateJob(deduplicationOpts, jobId, delayedKey, deduplicationKey, eventsKey, maxEvents,\n    prefix)\n    local deduplicationId = deduplicationOpts and deduplicationOpts['id']\n    if deduplicationId then\n        local ttl = deduplicationOpts['ttl']\n        if deduplicationOpts['replace'] then\n            if ttl and ttl > 0 then\n                local currentDebounceJobId = rcall('GET', deduplicationKey)\n                if currentDebounceJobId then\n                    local isRemoved = removeDelayedJob(delayedKey, deduplicationKey, eventsKey, maxEvents,\n                        currentDebounceJobId, jobId, deduplicationId, prefix)\n                    if isRemoved then\n                        if deduplicationOpts['extend'] then\n                            rcall('SET', deduplicationKey, jobId, 'PX', ttl)\n                        else\n                            rcall('SET', deduplicationKey, jobId, 'KEEPTTL')\n                        end\n                        return\n                    else\n                        return currentDebounceJobId\n                    end\n                else\n                    rcall('SET', deduplicationKey, jobId, 'PX', ttl)\n                    return\n                end\n            else\n                local currentDebounceJobId = rcall('GET', deduplicationKey)\n                if currentDebounceJobId then\n                    local isRemoved = removeDelayedJob(delayedKey, deduplicationKey, eventsKey, maxEvents,\n                        currentDebounceJobId, jobId, deduplicationId, prefix)\n                    if isRemoved then\n                        rcall('SET', deduplicationKey, jobId)\n                        return\n                    else\n                        return currentDebounceJobId\n                    end\n                else\n                    rcall('SET', deduplicationKey, jobId)\n                    return\n                end\n            end\n        else\n            local deduplicationKeyExists\n            if ttl and ttl > 0 then\n                if deduplicationOpts['extend'] then\n                    local currentDebounceJobId = rcall('GET', deduplicationKey)\n                    if currentDebounceJobId then\n                        rcall('SET', deduplicationKey, currentDebounceJobId, 'PX', ttl)\n                        rcall(\"XADD\", eventsKey, \"MAXLEN\", \"~\", maxEvents, \"*\", \"event\", \"debounced\",\n                            \"jobId\", currentDebounceJobId, \"debounceId\", deduplicationId)\n                        rcall(\"XADD\", eventsKey, \"MAXLEN\", \"~\", maxEvents, \"*\", \"event\", \"deduplicated\", \"jobId\",\n                            currentDebounceJobId, \"deduplicationId\", deduplicationId, \"deduplicatedJobId\", jobId)\n                        return currentDebounceJobId\n                    else\n                        rcall('SET', deduplicationKey, jobId, 'PX', ttl)\n                        return\n                    end\n                else\n                    deduplicationKeyExists = not rcall('SET', deduplicationKey, jobId, 'PX', ttl, 'NX')\n                end\n            else\n                deduplicationKeyExists = not rcall('SET', deduplicationKey, jobId, 'NX')\n            end\n            if deduplicationKeyExists then\n                local currentDebounceJobId = rcall('GET', deduplicationKey)\n                -- TODO remove debounced event in next breaking change\n                rcall(\"XADD\", eventsKey, \"MAXLEN\", \"~\", maxEvents, \"*\", \"event\", \"debounced\", \"jobId\",\n                    currentDebounceJobId, \"debounceId\", deduplicationId)\n                rcall(\"XADD\", eventsKey, \"MAXLEN\", \"~\", maxEvents, \"*\", \"event\", \"deduplicated\", \"jobId\",\n                    currentDebounceJobId, \"deduplicationId\", deduplicationId, \"deduplicatedJobId\", jobId)\n                return currentDebounceJobId\n            end\n        end\n    end\nend\n--[[\n  Function to get max events value or set by default 10000.\n]]\nlocal function getOrSetMaxEvents(metaKey)\n  local maxEvents = rcall(\"HGET\", metaKey, \"opts.maxLenEvents\")\n  if not maxEvents then\n    maxEvents = 10000\n    rcall(\"HSET\", metaKey, \"opts.maxLenEvents\", maxEvents)\n  end\n  return maxEvents\nend\n--[[\n  Function to handle the case when job is duplicated.\n]]\n-- Includes\n--[[\n    This function is used to update the parent's dependencies if the job\n    is already completed and about to be ignored. The parent must get its\n    dependencies updated to avoid the parent job being stuck forever in \n    the waiting-children state.\n]]\n-- Includes\n--[[\n  Validate and move or add dependencies to parent.\n]]\n-- Includes\n--[[\n  Validate and move parent to a wait status (waiting, delayed or prioritized)\n  if no pending dependencies.\n]]\n-- Includes\n--[[\n  Validate and move parent to a wait status (waiting, delayed or prioritized) if needed.\n]]\n-- Includes\n--[[\n  Move parent to a wait status (wait, prioritized or delayed)\n]]\n-- Includes\n--[[\n  Function to add job in target list and add marker if needed.\n]]\n-- Includes\n--[[\n  Add marker if needed when a job is available.\n]]\nlocal function addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)\n  if not isPausedOrMaxed then\n    rcall(\"ZADD\", markerKey, 0, \"0\")\n  end  \nend\nlocal function addJobInTargetList(targetKey, markerKey, pushCmd, isPausedOrMaxed, jobId)\n  rcall(pushCmd, targetKey, jobId)\n  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)\nend\n--[[\n  Function to add job considering priority.\n]]\n-- Includes\n--[[\n  Function to get priority score.\n]]\nlocal function getPriorityScore(priority, priorityCounterKey)\n  local prioCounter = rcall(\"INCR\", priorityCounterKey)\n  return priority * 0x100000000 + prioCounter % 0x100000000\nend\nlocal function addJobWithPriority(markerKey, prioritizedKey, priority, jobId, priorityCounterKey,\n  isPausedOrMaxed)\n  local score = getPriorityScore(priority, priorityCounterKey)\n  rcall(\"ZADD\", prioritizedKey, score, jobId)\n  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)\nend\n--[[\n  Function to check if queue is paused or maxed\n  (since an empty list and !EXISTS are not really the same).\n]]\nlocal function isQueuePausedOrMaxed(queueMetaKey, activeKey)\n  local queueAttributes = rcall(\"HMGET\", queueMetaKey, \"paused\", \"concurrency\")\n  if queueAttributes[1] then\n    return true\n  else\n    if queueAttributes[2] then\n      local activeCount = rcall(\"LLEN\", activeKey)\n      return activeCount >= tonumber(queueAttributes[2])\n    end\n  end\n  return false\nend\n--[[\n  Function to check for the meta.paused key to decide if we are paused or not\n  (since an empty list and !EXISTS are not really the same).\n]]\nlocal function getTargetQueueList(queueMetaKey, activeKey, waitKey, pausedKey)\n  local queueAttributes = rcall(\"HMGET\", queueMetaKey, \"paused\", \"concurrency\", \"max\", \"duration\")\n  if queueAttributes[1] then\n    return pausedKey, true, queueAttributes[3], queueAttributes[4]\n  else\n    if queueAttributes[2] then\n      local activeCount = rcall(\"LLEN\", activeKey)\n      if activeCount >= tonumber(queueAttributes[2]) then\n        return waitKey, true, queueAttributes[3], queueAttributes[4]\n      else\n        return waitKey, false, queueAttributes[3], queueAttributes[4]\n      end\n    end\n  end\n  return waitKey, false, queueAttributes[3], queueAttributes[4]\nend\nlocal function moveParentToWait(parentQueueKey, parentKey, parentId, timestamp)\n    local parentWaitKey = parentQueueKey .. \":wait\"\n    local parentPausedKey = parentQueueKey .. \":paused\"\n    local parentActiveKey = parentQueueKey .. \":active\"\n    local parentMetaKey = parentQueueKey .. \":meta\"\n    local parentMarkerKey = parentQueueKey .. \":marker\"\n    local jobAttributes = rcall(\"HMGET\", parentKey, \"priority\", \"delay\")\n    local priority = tonumber(jobAttributes[1]) or 0\n    local delay = tonumber(jobAttributes[2]) or 0\n    if delay > 0 then\n        local delayedTimestamp = tonumber(timestamp) + delay\n        local score = delayedTimestamp * 0x1000\n        local parentDelayedKey = parentQueueKey .. \":delayed\"\n        rcall(\"ZADD\", parentDelayedKey, score, parentId)\n        rcall(\"XADD\", parentQueueKey .. \":events\", \"*\", \"event\", \"delayed\", \"jobId\", parentId, \"delay\",\n            delayedTimestamp)\n        addDelayMarkerIfNeeded(parentMarkerKey, parentDelayedKey)\n    else\n        if priority == 0 then\n            local parentTarget, isParentPausedOrMaxed = getTargetQueueList(parentMetaKey, parentActiveKey,\n                parentWaitKey, parentPausedKey)\n            addJobInTargetList(parentTarget, parentMarkerKey, \"RPUSH\", isParentPausedOrMaxed, parentId)\n        else\n            local isPausedOrMaxed = isQueuePausedOrMaxed(parentMetaKey, parentActiveKey)\n            addJobWithPriority(parentMarkerKey, parentQueueKey .. \":prioritized\", priority, parentId,\n                parentQueueKey .. \":pc\", isPausedOrMaxed)\n        end\n        rcall(\"XADD\", parentQueueKey .. \":events\", \"*\", \"event\", \"waiting\", \"jobId\", parentId, \"prev\",\n            \"waiting-children\")\n    end\nend\nlocal function moveParentToWaitIfNeeded(parentQueueKey, parentKey, parentId, timestamp)\n  if rcall(\"EXISTS\", parentKey) == 1 then\n    local parentWaitingChildrenKey = parentQueueKey .. \":waiting-children\"\n    if rcall(\"ZSCORE\", parentWaitingChildrenKey, parentId) then    \n      rcall(\"ZREM\", parentWaitingChildrenKey, parentId)\n      moveParentToWait(parentQueueKey, parentKey, parentId, timestamp)\n    end\n  end\nend\nlocal function moveParentToWaitIfNoPendingDependencies(parentQueueKey, parentDependenciesKey, parentKey,\n  parentId, timestamp)\n  local doNotHavePendingDependencies = rcall(\"SCARD\", parentDependenciesKey) == 0\n  if doNotHavePendingDependencies then\n    moveParentToWaitIfNeeded(parentQueueKey, parentKey, parentId, timestamp)\n  end\nend\nlocal function updateParentDepsIfNeeded(parentKey, parentQueueKey, parentDependenciesKey,\n  parentId, jobIdKey, returnvalue, timestamp )\n  local processedSet = parentKey .. \":processed\"\n  rcall(\"HSET\", processedSet, jobIdKey, returnvalue)\n  moveParentToWaitIfNoPendingDependencies(parentQueueKey, parentDependenciesKey, parentKey, parentId, timestamp)\nend\nlocal function updateExistingJobsParent(parentKey, parent, parentData,\n                                        parentDependenciesKey, completedKey,\n                                        jobIdKey, jobId, timestamp)\n    if parentKey ~= nil then\n        if rcall(\"ZSCORE\", completedKey, jobId) then\n            local returnvalue = rcall(\"HGET\", jobIdKey, \"returnvalue\")\n            updateParentDepsIfNeeded(parentKey, parent['queueKey'],\n                                     parentDependenciesKey, parent['id'],\n                                     jobIdKey, returnvalue, timestamp)\n        else\n            if parentDependenciesKey ~= nil then\n                rcall(\"SADD\", parentDependenciesKey, jobIdKey)\n            end\n        end\n        rcall(\"HMSET\", jobIdKey, \"parentKey\", parentKey, \"parent\", parentData)\n    end\nend\nlocal function handleDuplicatedJob(jobKey, jobId, currentParentKey, currentParent,\n  parentData, parentDependenciesKey, completedKey, eventsKey, maxEvents, timestamp)\n  local existedParentKey = rcall(\"HGET\", jobKey, \"parentKey\")\n  if not existedParentKey or existedParentKey == currentParentKey then\n    updateExistingJobsParent(currentParentKey, currentParent, parentData,\n      parentDependenciesKey, completedKey, jobKey,\n      jobId, timestamp)\n  else\n    if currentParentKey ~= nil and currentParentKey ~= existedParentKey\n      and (rcall(\"EXISTS\", existedParentKey) == 1) then\n      return -7\n    end\n  end\n  rcall(\"XADD\", eventsKey, \"MAXLEN\", \"~\", maxEvents, \"*\", \"event\",\n    \"duplicated\", \"jobId\", jobId)\n  return jobId .. \"\" -- convert to string\nend\n--[[\n  Function to store a job\n]]\nlocal function storeJob(eventsKey, jobIdKey, jobId, name, data, opts, timestamp,\n                        parentKey, parentData, repeatJobKey)\n    local jsonOpts = cjson.encode(opts)\n    local delay = opts['delay'] or 0\n    local priority = opts['priority'] or 0\n    local debounceId = opts['de'] and opts['de']['id']\n    local optionalValues = {}\n    if parentKey ~= nil then\n        table.insert(optionalValues, \"parentKey\")\n        table.insert(optionalValues, parentKey)\n        table.insert(optionalValues, \"parent\")\n        table.insert(optionalValues, parentData)\n    end\n    if repeatJobKey then\n        table.insert(optionalValues, \"rjk\")\n        table.insert(optionalValues, repeatJobKey)\n    end\n    if debounceId then\n        table.insert(optionalValues, \"deid\")\n        table.insert(optionalValues, debounceId)\n    end\n    rcall(\"HMSET\", jobIdKey, \"name\", name, \"data\", data, \"opts\", jsonOpts,\n          \"timestamp\", timestamp, \"delay\", delay, \"priority\", priority,\n          unpack(optionalValues))\n    rcall(\"XADD\", eventsKey, \"*\", \"event\", \"added\", \"jobId\", jobId, \"name\", name)\n    return delay, priority\nend\nif parentKey ~= nil then\n    if rcall(\"EXISTS\", parentKey) ~= 1 then return -5 end\n    parentData = cjson.encode(parent)\nend\nlocal jobCounter = rcall(\"INCR\", idKey)\nlocal maxEvents = getOrSetMaxEvents(metaKey)\nlocal opts = cmsgpack.unpack(ARGV[3])\nlocal parentDependenciesKey = args[6]\nlocal timestamp = args[4]\nif args[2] == \"\" then\n    jobId = jobCounter\n    jobIdKey = args[1] .. jobId\nelse\n    jobId = args[2]\n    jobIdKey = args[1] .. jobId\n    if rcall(\"EXISTS\", jobIdKey) == 1 then\n        return handleDuplicatedJob(jobIdKey, jobId, parentKey, parent,\n            parentData, parentDependenciesKey, completedKey, eventsKey,\n            maxEvents, timestamp)\n    end\nend\nlocal deduplicationJobId = deduplicateJob(opts['de'], jobId, delayedKey, deduplicationKey,\n  eventsKey, maxEvents, args[1])\nif deduplicationJobId then\n  return deduplicationJobId\nend\nlocal delay, priority = storeJob(eventsKey, jobIdKey, jobId, args[3], ARGV[2],\n    opts, timestamp, parentKey, parentData, repeatJobKey)\naddDelayedJob(jobId, delayedKey, eventsKey, timestamp, maxEvents, KEYS[1], delay)\n-- Check if this job is a child of another job, if so add it to the parents dependencies\nif parentDependenciesKey ~= nil then\n    rcall(\"SADD\", parentDependenciesKey, jobIdKey)\nend\nreturn jobId .. \"\" -- convert to string\n`;\nexports.addDelayedJob = {\n    name: \"addDelayedJob\",\n    content,\n    keys: 6\n}; //# sourceMappingURL=addDelayedJob-6.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL3NjcmlwdHMvYWRkRGVsYXllZEpvYi02LmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCxxQkFBcUIsR0FBRyxLQUFLO0FBQzdCLE1BQU1HLFVBQVUsQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFzZGpCLENBQUM7QUFDREgscUJBQXFCLEdBQUc7SUFDcEJJLE1BQU07SUFDTkQ7SUFDQUUsTUFBTTtBQUNWLEdBQ0EsMkNBQTJDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb25seWZhbnMtcGxhdGZvcm0vLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL3NjcmlwdHMvYWRkRGVsYXllZEpvYi02LmpzPzEzYTUiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLmFkZERlbGF5ZWRKb2IgPSB2b2lkIDA7XG5jb25zdCBjb250ZW50ID0gYC0tW1tcbiAgQWRkcyBhIGRlbGF5ZWQgam9iIHRvIHRoZSBxdWV1ZSBieSBkb2luZyB0aGUgZm9sbG93aW5nOlxuICAgIC0gSW5jcmVhc2VzIHRoZSBqb2IgY291bnRlciBpZiBuZWVkZWQuXG4gICAgLSBDcmVhdGVzIGEgbmV3IGpvYiBrZXkgd2l0aCB0aGUgam9iIGRhdGEuXG4gICAgLSBjb21wdXRlcyB0aW1lc3RhbXAuXG4gICAgLSBhZGRzIHRvIGRlbGF5ZWQgenNldC5cbiAgICAtIEVtaXRzIGEgZ2xvYmFsIGV2ZW50ICdkZWxheWVkJyBpZiB0aGUgam9iIGlzIGRlbGF5ZWQuXG4gICAgSW5wdXQ6XG4gICAgICBLRVlTWzFdICdtYXJrZXInLFxuICAgICAgS0VZU1syXSAnbWV0YSdcbiAgICAgIEtFWVNbM10gJ2lkJ1xuICAgICAgS0VZU1s0XSAnZGVsYXllZCdcbiAgICAgIEtFWVNbNV0gJ2NvbXBsZXRlZCdcbiAgICAgIEtFWVNbNl0gZXZlbnRzIHN0cmVhbSBrZXlcbiAgICAgIEFSR1ZbMV0gbXNncGFja2VkIGFyZ3VtZW50cyBhcnJheVxuICAgICAgICAgICAgWzFdICBrZXkgcHJlZml4LFxuICAgICAgICAgICAgWzJdICBjdXN0b20gaWQgKHVzZSBjdXN0b20gaW5zdGVhZCBvZiBvbmUgZ2VuZXJhdGVkIGF1dG9tYXRpY2FsbHkpXG4gICAgICAgICAgICBbM10gIG5hbWVcbiAgICAgICAgICAgIFs0XSAgdGltZXN0YW1wXG4gICAgICAgICAgICBbNV0gIHBhcmVudEtleT9cbiAgICAgICAgICAgIFs2XSAgcGFyZW50IGRlcGVuZGVuY2llcyBrZXkuXG4gICAgICAgICAgICBbN10gIHBhcmVudD8ge2lkLCBxdWV1ZUtleX1cbiAgICAgICAgICAgIFs4XSAgcmVwZWF0IGpvYiBrZXlcbiAgICAgICAgICAgIFs5XSBkZWR1cGxpY2F0aW9uIGtleVxuICAgICAgQVJHVlsyXSBKc29uIHN0cmluZ2lmaWVkIGpvYiBkYXRhXG4gICAgICBBUkdWWzNdIG1zZ3BhY2tlZCBvcHRpb25zXG4gICAgICBPdXRwdXQ6XG4gICAgICAgIGpvYklkICAtIE9LXG4gICAgICAgIC01ICAgICAtIE1pc3NpbmcgcGFyZW50IGtleVxuXV1cbmxvY2FsIG1ldGFLZXkgPSBLRVlTWzJdXG5sb2NhbCBpZEtleSA9IEtFWVNbM11cbmxvY2FsIGRlbGF5ZWRLZXkgPSBLRVlTWzRdXG5sb2NhbCBjb21wbGV0ZWRLZXkgPSBLRVlTWzVdXG5sb2NhbCBldmVudHNLZXkgPSBLRVlTWzZdXG5sb2NhbCBqb2JJZFxubG9jYWwgam9iSWRLZXlcbmxvY2FsIHJjYWxsID0gcmVkaXMuY2FsbFxubG9jYWwgYXJncyA9IGNtc2dwYWNrLnVucGFjayhBUkdWWzFdKVxubG9jYWwgZGF0YSA9IEFSR1ZbMl1cbmxvY2FsIHBhcmVudEtleSA9IGFyZ3NbNV1cbmxvY2FsIHBhcmVudCA9IGFyZ3NbN11cbmxvY2FsIHJlcGVhdEpvYktleSA9IGFyZ3NbOF1cbmxvY2FsIGRlZHVwbGljYXRpb25LZXkgPSBhcmdzWzldXG5sb2NhbCBwYXJlbnREYXRhXG4tLSBJbmNsdWRlc1xuLS1bW1xuICBBZGRzIGEgZGVsYXllZCBqb2IgdG8gdGhlIHF1ZXVlIGJ5IGRvaW5nIHRoZSBmb2xsb3dpbmc6XG4gICAgLSBDcmVhdGVzIGEgbmV3IGpvYiBrZXkgd2l0aCB0aGUgam9iIGRhdGEuXG4gICAgLSBhZGRzIHRvIGRlbGF5ZWQgenNldC5cbiAgICAtIEVtaXRzIGEgZ2xvYmFsIGV2ZW50ICdkZWxheWVkJyBpZiB0aGUgam9iIGlzIGRlbGF5ZWQuXG5dXVxuLS0gSW5jbHVkZXNcbi0tW1tcbiAgQWRkIGRlbGF5IG1hcmtlciBpZiBuZWVkZWQuXG5dXVxuLS0gSW5jbHVkZXNcbi0tW1tcbiAgRnVuY3Rpb24gdG8gcmV0dXJuIHRoZSBuZXh0IGRlbGF5ZWQgam9iIHRpbWVzdGFtcC5cbl1dXG5sb2NhbCBmdW5jdGlvbiBnZXROZXh0RGVsYXllZFRpbWVzdGFtcChkZWxheWVkS2V5KVxuICBsb2NhbCByZXN1bHQgPSByY2FsbChcIlpSQU5HRVwiLCBkZWxheWVkS2V5LCAwLCAwLCBcIldJVEhTQ09SRVNcIilcbiAgaWYgI3Jlc3VsdCB0aGVuXG4gICAgbG9jYWwgbmV4dFRpbWVzdGFtcCA9IHRvbnVtYmVyKHJlc3VsdFsyXSlcbiAgICBpZiBuZXh0VGltZXN0YW1wIH49IG5pbCB0aGVuXG4gICAgICByZXR1cm4gbmV4dFRpbWVzdGFtcCAvIDB4MTAwMFxuICAgIGVuZFxuICBlbmRcbmVuZFxubG9jYWwgZnVuY3Rpb24gYWRkRGVsYXlNYXJrZXJJZk5lZWRlZChtYXJrZXJLZXksIGRlbGF5ZWRLZXkpXG4gIGxvY2FsIG5leHRUaW1lc3RhbXAgPSBnZXROZXh0RGVsYXllZFRpbWVzdGFtcChkZWxheWVkS2V5KVxuICBpZiBuZXh0VGltZXN0YW1wIH49IG5pbCB0aGVuXG4gICAgLS0gUmVwbGFjZSB0aGUgc2NvcmUgb2YgdGhlIG1hcmtlciB3aXRoIHRoZSBuZXdlc3Qga25vd25cbiAgICAtLSBuZXh0IHRpbWVzdGFtcC5cbiAgICByY2FsbChcIlpBRERcIiwgbWFya2VyS2V5LCBuZXh0VGltZXN0YW1wLCBcIjFcIilcbiAgZW5kXG5lbmRcbi0tW1tcbiAgQmFrZSBpbiB0aGUgam9iIGlkIGZpcnN0IDEyIGJpdHMgaW50byB0aGUgdGltZXN0YW1wXG4gIHRvIGd1YXJhbnRlZSBjb3JyZWN0IGV4ZWN1dGlvbiBvcmRlciBvZiBkZWxheWVkIGpvYnNcbiAgKHVwIHRvIDQwOTYgam9icyBwZXIgZ2l2ZW4gdGltZXN0YW1wIG9yIDQwOTYgam9icyBhcGFydCBwZXIgdGltZXN0YW1wKVxuICBXQVJOSU5HOiBKb2JzIHRoYXQgYXJlIHNvIGZhciBhcGFydCB0aGF0IHRoZXkgd3JhcCBhcm91bmQgd2lsbCBjYXVzZSBGSUZPIHRvIGZhaWxcbl1dXG5sb2NhbCBmdW5jdGlvbiBnZXREZWxheWVkU2NvcmUoZGVsYXllZEtleSwgdGltZXN0YW1wLCBkZWxheSlcbiAgbG9jYWwgZGVsYXllZFRpbWVzdGFtcCA9IChkZWxheSA+IDAgYW5kICh0b251bWJlcih0aW1lc3RhbXApICsgZGVsYXkpKSBvciB0b251bWJlcih0aW1lc3RhbXApXG4gIGxvY2FsIG1pblNjb3JlID0gZGVsYXllZFRpbWVzdGFtcCAqIDB4MTAwMFxuICBsb2NhbCBtYXhTY29yZSA9IChkZWxheWVkVGltZXN0YW1wICsgMSApICogMHgxMDAwIC0gMVxuICBsb2NhbCByZXN1bHQgPSByY2FsbChcIlpSRVZSQU5HRUJZU0NPUkVcIiwgZGVsYXllZEtleSwgbWF4U2NvcmUsXG4gICAgbWluU2NvcmUsIFwiV0lUSFNDT1JFU1wiLFwiTElNSVRcIiwgMCwgMSlcbiAgaWYgI3Jlc3VsdCB0aGVuXG4gICAgbG9jYWwgY3VycmVudE1heFNjb3JlID0gdG9udW1iZXIocmVzdWx0WzJdKVxuICAgIGlmIGN1cnJlbnRNYXhTY29yZSB+PSBuaWwgdGhlblxuICAgICAgaWYgY3VycmVudE1heFNjb3JlID49IG1heFNjb3JlIHRoZW5cbiAgICAgICAgcmV0dXJuIG1heFNjb3JlLCBkZWxheWVkVGltZXN0YW1wXG4gICAgICBlbHNlXG4gICAgICAgIHJldHVybiBjdXJyZW50TWF4U2NvcmUgKyAxLCBkZWxheWVkVGltZXN0YW1wXG4gICAgICBlbmRcbiAgICBlbmRcbiAgZW5kXG4gIHJldHVybiBtaW5TY29yZSwgZGVsYXllZFRpbWVzdGFtcFxuZW5kXG5sb2NhbCBmdW5jdGlvbiBhZGREZWxheWVkSm9iKGpvYklkLCBkZWxheWVkS2V5LCBldmVudHNLZXksIHRpbWVzdGFtcCxcbiAgbWF4RXZlbnRzLCBtYXJrZXJLZXksIGRlbGF5KVxuICBsb2NhbCBzY29yZSwgZGVsYXllZFRpbWVzdGFtcCA9IGdldERlbGF5ZWRTY29yZShkZWxheWVkS2V5LCB0aW1lc3RhbXAsIHRvbnVtYmVyKGRlbGF5KSlcbiAgcmNhbGwoXCJaQUREXCIsIGRlbGF5ZWRLZXksIHNjb3JlLCBqb2JJZClcbiAgcmNhbGwoXCJYQUREXCIsIGV2ZW50c0tleSwgXCJNQVhMRU5cIiwgXCJ+XCIsIG1heEV2ZW50cywgXCIqXCIsIFwiZXZlbnRcIiwgXCJkZWxheWVkXCIsXG4gICAgXCJqb2JJZFwiLCBqb2JJZCwgXCJkZWxheVwiLCBkZWxheWVkVGltZXN0YW1wKVxuICAtLSBtYXJrIHRoYXQgYSBkZWxheWVkIGpvYiBpcyBhdmFpbGFibGVcbiAgYWRkRGVsYXlNYXJrZXJJZk5lZWRlZChtYXJrZXJLZXksIGRlbGF5ZWRLZXkpXG5lbmRcbi0tW1tcbiAgRnVuY3Rpb24gdG8gZGVib3VuY2UgYSBqb2IuXG5dXVxuLS0gSW5jbHVkZXNcbi0tW1tcbiAgRnVuY3Rpb24gdG8gcmVtb3ZlIGpvYiBrZXlzLlxuXV1cbmxvY2FsIGZ1bmN0aW9uIHJlbW92ZUpvYktleXMoam9iS2V5KVxuICByZXR1cm4gcmNhbGwoXCJERUxcIiwgam9iS2V5LCBqb2JLZXkgLi4gJzpsb2dzJywgam9iS2V5IC4uICc6ZGVwZW5kZW5jaWVzJyxcbiAgICBqb2JLZXkgLi4gJzpwcm9jZXNzZWQnLCBqb2JLZXkgLi4gJzpmYWlsZWQnLCBqb2JLZXkgLi4gJzp1bnN1Y2Nlc3NmdWwnKVxuZW5kXG5sb2NhbCBmdW5jdGlvbiByZW1vdmVEZWxheWVkSm9iKGRlbGF5ZWRLZXksIGRlZHVwbGljYXRpb25LZXksIGV2ZW50c0tleSwgbWF4RXZlbnRzLCBjdXJyZW50RGVkdXBsaWNhdGVkSm9iSWQsXG4gICAgam9iSWQsIGRlZHVwbGljYXRpb25JZCwgcHJlZml4KVxuICAgIGlmIHJjYWxsKFwiWlJFTVwiLCBkZWxheWVkS2V5LCBjdXJyZW50RGVkdXBsaWNhdGVkSm9iSWQpID4gMCB0aGVuXG4gICAgICAgIHJlbW92ZUpvYktleXMocHJlZml4IC4uIGN1cnJlbnREZWR1cGxpY2F0ZWRKb2JJZClcbiAgICAgICAgcmNhbGwoXCJYQUREXCIsIGV2ZW50c0tleSwgXCIqXCIsIFwiZXZlbnRcIiwgXCJyZW1vdmVkXCIsIFwiam9iSWRcIiwgY3VycmVudERlZHVwbGljYXRlZEpvYklkLFxuICAgICAgICAgICAgXCJwcmV2XCIsIFwiZGVsYXllZFwiKVxuICAgICAgICAtLSBUT0RPIHJlbW92ZSBkZWJvdW5jZWQgZXZlbnQgaW4gbmV4dCBicmVha2luZyBjaGFuZ2VcbiAgICAgICAgcmNhbGwoXCJYQUREXCIsIGV2ZW50c0tleSwgXCJNQVhMRU5cIiwgXCJ+XCIsIG1heEV2ZW50cywgXCIqXCIsIFwiZXZlbnRcIiwgXCJkZWJvdW5jZWRcIiwgXCJqb2JJZFwiLFxuICAgICAgICAgICAgam9iSWQsIFwiZGVib3VuY2VJZFwiLCBkZWR1cGxpY2F0aW9uSWQpXG4gICAgICAgIHJjYWxsKFwiWEFERFwiLCBldmVudHNLZXksIFwiTUFYTEVOXCIsIFwiflwiLCBtYXhFdmVudHMsIFwiKlwiLCBcImV2ZW50XCIsIFwiZGVkdXBsaWNhdGVkXCIsIFwiam9iSWRcIixcbiAgICAgICAgICAgIGpvYklkLCBcImRlZHVwbGljYXRpb25JZFwiLCBkZWR1cGxpY2F0aW9uSWQsIFwiZGVkdXBsaWNhdGVkSm9iSWRcIiwgY3VycmVudERlZHVwbGljYXRlZEpvYklkKVxuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgIGVuZFxuICAgIHJldHVybiBmYWxzZVxuZW5kXG5sb2NhbCBmdW5jdGlvbiBkZWR1cGxpY2F0ZUpvYihkZWR1cGxpY2F0aW9uT3B0cywgam9iSWQsIGRlbGF5ZWRLZXksIGRlZHVwbGljYXRpb25LZXksIGV2ZW50c0tleSwgbWF4RXZlbnRzLFxuICAgIHByZWZpeClcbiAgICBsb2NhbCBkZWR1cGxpY2F0aW9uSWQgPSBkZWR1cGxpY2F0aW9uT3B0cyBhbmQgZGVkdXBsaWNhdGlvbk9wdHNbJ2lkJ11cbiAgICBpZiBkZWR1cGxpY2F0aW9uSWQgdGhlblxuICAgICAgICBsb2NhbCB0dGwgPSBkZWR1cGxpY2F0aW9uT3B0c1sndHRsJ11cbiAgICAgICAgaWYgZGVkdXBsaWNhdGlvbk9wdHNbJ3JlcGxhY2UnXSB0aGVuXG4gICAgICAgICAgICBpZiB0dGwgYW5kIHR0bCA+IDAgdGhlblxuICAgICAgICAgICAgICAgIGxvY2FsIGN1cnJlbnREZWJvdW5jZUpvYklkID0gcmNhbGwoJ0dFVCcsIGRlZHVwbGljYXRpb25LZXkpXG4gICAgICAgICAgICAgICAgaWYgY3VycmVudERlYm91bmNlSm9iSWQgdGhlblxuICAgICAgICAgICAgICAgICAgICBsb2NhbCBpc1JlbW92ZWQgPSByZW1vdmVEZWxheWVkSm9iKGRlbGF5ZWRLZXksIGRlZHVwbGljYXRpb25LZXksIGV2ZW50c0tleSwgbWF4RXZlbnRzLFxuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudERlYm91bmNlSm9iSWQsIGpvYklkLCBkZWR1cGxpY2F0aW9uSWQsIHByZWZpeClcbiAgICAgICAgICAgICAgICAgICAgaWYgaXNSZW1vdmVkIHRoZW5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGRlZHVwbGljYXRpb25PcHRzWydleHRlbmQnXSB0aGVuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmNhbGwoJ1NFVCcsIGRlZHVwbGljYXRpb25LZXksIGpvYklkLCAnUFgnLCB0dGwpXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmNhbGwoJ1NFVCcsIGRlZHVwbGljYXRpb25LZXksIGpvYklkLCAnS0VFUFRUTCcpXG4gICAgICAgICAgICAgICAgICAgICAgICBlbmRcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY3VycmVudERlYm91bmNlSm9iSWRcbiAgICAgICAgICAgICAgICAgICAgZW5kXG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICByY2FsbCgnU0VUJywgZGVkdXBsaWNhdGlvbktleSwgam9iSWQsICdQWCcsIHR0bClcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICAgICAgZW5kXG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgbG9jYWwgY3VycmVudERlYm91bmNlSm9iSWQgPSByY2FsbCgnR0VUJywgZGVkdXBsaWNhdGlvbktleSlcbiAgICAgICAgICAgICAgICBpZiBjdXJyZW50RGVib3VuY2VKb2JJZCB0aGVuXG4gICAgICAgICAgICAgICAgICAgIGxvY2FsIGlzUmVtb3ZlZCA9IHJlbW92ZURlbGF5ZWRKb2IoZGVsYXllZEtleSwgZGVkdXBsaWNhdGlvbktleSwgZXZlbnRzS2V5LCBtYXhFdmVudHMsXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50RGVib3VuY2VKb2JJZCwgam9iSWQsIGRlZHVwbGljYXRpb25JZCwgcHJlZml4KVxuICAgICAgICAgICAgICAgICAgICBpZiBpc1JlbW92ZWQgdGhlblxuICAgICAgICAgICAgICAgICAgICAgICAgcmNhbGwoJ1NFVCcsIGRlZHVwbGljYXRpb25LZXksIGpvYklkKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjdXJyZW50RGVib3VuY2VKb2JJZFxuICAgICAgICAgICAgICAgICAgICBlbmRcbiAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgIHJjYWxsKCdTRVQnLCBkZWR1cGxpY2F0aW9uS2V5LCBqb2JJZClcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICAgICAgZW5kXG4gICAgICAgICAgICBlbmRcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgbG9jYWwgZGVkdXBsaWNhdGlvbktleUV4aXN0c1xuICAgICAgICAgICAgaWYgdHRsIGFuZCB0dGwgPiAwIHRoZW5cbiAgICAgICAgICAgICAgICBpZiBkZWR1cGxpY2F0aW9uT3B0c1snZXh0ZW5kJ10gdGhlblxuICAgICAgICAgICAgICAgICAgICBsb2NhbCBjdXJyZW50RGVib3VuY2VKb2JJZCA9IHJjYWxsKCdHRVQnLCBkZWR1cGxpY2F0aW9uS2V5KVxuICAgICAgICAgICAgICAgICAgICBpZiBjdXJyZW50RGVib3VuY2VKb2JJZCB0aGVuXG4gICAgICAgICAgICAgICAgICAgICAgICByY2FsbCgnU0VUJywgZGVkdXBsaWNhdGlvbktleSwgY3VycmVudERlYm91bmNlSm9iSWQsICdQWCcsIHR0bClcbiAgICAgICAgICAgICAgICAgICAgICAgIHJjYWxsKFwiWEFERFwiLCBldmVudHNLZXksIFwiTUFYTEVOXCIsIFwiflwiLCBtYXhFdmVudHMsIFwiKlwiLCBcImV2ZW50XCIsIFwiZGVib3VuY2VkXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJqb2JJZFwiLCBjdXJyZW50RGVib3VuY2VKb2JJZCwgXCJkZWJvdW5jZUlkXCIsIGRlZHVwbGljYXRpb25JZClcbiAgICAgICAgICAgICAgICAgICAgICAgIHJjYWxsKFwiWEFERFwiLCBldmVudHNLZXksIFwiTUFYTEVOXCIsIFwiflwiLCBtYXhFdmVudHMsIFwiKlwiLCBcImV2ZW50XCIsIFwiZGVkdXBsaWNhdGVkXCIsIFwiam9iSWRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50RGVib3VuY2VKb2JJZCwgXCJkZWR1cGxpY2F0aW9uSWRcIiwgZGVkdXBsaWNhdGlvbklkLCBcImRlZHVwbGljYXRlZEpvYklkXCIsIGpvYklkKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnREZWJvdW5jZUpvYklkXG4gICAgICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgIHJjYWxsKCdTRVQnLCBkZWR1cGxpY2F0aW9uS2V5LCBqb2JJZCwgJ1BYJywgdHRsKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICAgICAgICAgIGVuZFxuICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgZGVkdXBsaWNhdGlvbktleUV4aXN0cyA9IG5vdCByY2FsbCgnU0VUJywgZGVkdXBsaWNhdGlvbktleSwgam9iSWQsICdQWCcsIHR0bCwgJ05YJylcbiAgICAgICAgICAgICAgICBlbmRcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBkZWR1cGxpY2F0aW9uS2V5RXhpc3RzID0gbm90IHJjYWxsKCdTRVQnLCBkZWR1cGxpY2F0aW9uS2V5LCBqb2JJZCwgJ05YJylcbiAgICAgICAgICAgIGVuZFxuICAgICAgICAgICAgaWYgZGVkdXBsaWNhdGlvbktleUV4aXN0cyB0aGVuXG4gICAgICAgICAgICAgICAgbG9jYWwgY3VycmVudERlYm91bmNlSm9iSWQgPSByY2FsbCgnR0VUJywgZGVkdXBsaWNhdGlvbktleSlcbiAgICAgICAgICAgICAgICAtLSBUT0RPIHJlbW92ZSBkZWJvdW5jZWQgZXZlbnQgaW4gbmV4dCBicmVha2luZyBjaGFuZ2VcbiAgICAgICAgICAgICAgICByY2FsbChcIlhBRERcIiwgZXZlbnRzS2V5LCBcIk1BWExFTlwiLCBcIn5cIiwgbWF4RXZlbnRzLCBcIipcIiwgXCJldmVudFwiLCBcImRlYm91bmNlZFwiLCBcImpvYklkXCIsXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnREZWJvdW5jZUpvYklkLCBcImRlYm91bmNlSWRcIiwgZGVkdXBsaWNhdGlvbklkKVxuICAgICAgICAgICAgICAgIHJjYWxsKFwiWEFERFwiLCBldmVudHNLZXksIFwiTUFYTEVOXCIsIFwiflwiLCBtYXhFdmVudHMsIFwiKlwiLCBcImV2ZW50XCIsIFwiZGVkdXBsaWNhdGVkXCIsIFwiam9iSWRcIixcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudERlYm91bmNlSm9iSWQsIFwiZGVkdXBsaWNhdGlvbklkXCIsIGRlZHVwbGljYXRpb25JZCwgXCJkZWR1cGxpY2F0ZWRKb2JJZFwiLCBqb2JJZClcbiAgICAgICAgICAgICAgICByZXR1cm4gY3VycmVudERlYm91bmNlSm9iSWRcbiAgICAgICAgICAgIGVuZFxuICAgICAgICBlbmRcbiAgICBlbmRcbmVuZFxuLS1bW1xuICBGdW5jdGlvbiB0byBnZXQgbWF4IGV2ZW50cyB2YWx1ZSBvciBzZXQgYnkgZGVmYXVsdCAxMDAwMC5cbl1dXG5sb2NhbCBmdW5jdGlvbiBnZXRPclNldE1heEV2ZW50cyhtZXRhS2V5KVxuICBsb2NhbCBtYXhFdmVudHMgPSByY2FsbChcIkhHRVRcIiwgbWV0YUtleSwgXCJvcHRzLm1heExlbkV2ZW50c1wiKVxuICBpZiBub3QgbWF4RXZlbnRzIHRoZW5cbiAgICBtYXhFdmVudHMgPSAxMDAwMFxuICAgIHJjYWxsKFwiSFNFVFwiLCBtZXRhS2V5LCBcIm9wdHMubWF4TGVuRXZlbnRzXCIsIG1heEV2ZW50cylcbiAgZW5kXG4gIHJldHVybiBtYXhFdmVudHNcbmVuZFxuLS1bW1xuICBGdW5jdGlvbiB0byBoYW5kbGUgdGhlIGNhc2Ugd2hlbiBqb2IgaXMgZHVwbGljYXRlZC5cbl1dXG4tLSBJbmNsdWRlc1xuLS1bW1xuICAgIFRoaXMgZnVuY3Rpb24gaXMgdXNlZCB0byB1cGRhdGUgdGhlIHBhcmVudCdzIGRlcGVuZGVuY2llcyBpZiB0aGUgam9iXG4gICAgaXMgYWxyZWFkeSBjb21wbGV0ZWQgYW5kIGFib3V0IHRvIGJlIGlnbm9yZWQuIFRoZSBwYXJlbnQgbXVzdCBnZXQgaXRzXG4gICAgZGVwZW5kZW5jaWVzIHVwZGF0ZWQgdG8gYXZvaWQgdGhlIHBhcmVudCBqb2IgYmVpbmcgc3R1Y2sgZm9yZXZlciBpbiBcbiAgICB0aGUgd2FpdGluZy1jaGlsZHJlbiBzdGF0ZS5cbl1dXG4tLSBJbmNsdWRlc1xuLS1bW1xuICBWYWxpZGF0ZSBhbmQgbW92ZSBvciBhZGQgZGVwZW5kZW5jaWVzIHRvIHBhcmVudC5cbl1dXG4tLSBJbmNsdWRlc1xuLS1bW1xuICBWYWxpZGF0ZSBhbmQgbW92ZSBwYXJlbnQgdG8gYSB3YWl0IHN0YXR1cyAod2FpdGluZywgZGVsYXllZCBvciBwcmlvcml0aXplZClcbiAgaWYgbm8gcGVuZGluZyBkZXBlbmRlbmNpZXMuXG5dXVxuLS0gSW5jbHVkZXNcbi0tW1tcbiAgVmFsaWRhdGUgYW5kIG1vdmUgcGFyZW50IHRvIGEgd2FpdCBzdGF0dXMgKHdhaXRpbmcsIGRlbGF5ZWQgb3IgcHJpb3JpdGl6ZWQpIGlmIG5lZWRlZC5cbl1dXG4tLSBJbmNsdWRlc1xuLS1bW1xuICBNb3ZlIHBhcmVudCB0byBhIHdhaXQgc3RhdHVzICh3YWl0LCBwcmlvcml0aXplZCBvciBkZWxheWVkKVxuXV1cbi0tIEluY2x1ZGVzXG4tLVtbXG4gIEZ1bmN0aW9uIHRvIGFkZCBqb2IgaW4gdGFyZ2V0IGxpc3QgYW5kIGFkZCBtYXJrZXIgaWYgbmVlZGVkLlxuXV1cbi0tIEluY2x1ZGVzXG4tLVtbXG4gIEFkZCBtYXJrZXIgaWYgbmVlZGVkIHdoZW4gYSBqb2IgaXMgYXZhaWxhYmxlLlxuXV1cbmxvY2FsIGZ1bmN0aW9uIGFkZEJhc2VNYXJrZXJJZk5lZWRlZChtYXJrZXJLZXksIGlzUGF1c2VkT3JNYXhlZClcbiAgaWYgbm90IGlzUGF1c2VkT3JNYXhlZCB0aGVuXG4gICAgcmNhbGwoXCJaQUREXCIsIG1hcmtlcktleSwgMCwgXCIwXCIpXG4gIGVuZCAgXG5lbmRcbmxvY2FsIGZ1bmN0aW9uIGFkZEpvYkluVGFyZ2V0TGlzdCh0YXJnZXRLZXksIG1hcmtlcktleSwgcHVzaENtZCwgaXNQYXVzZWRPck1heGVkLCBqb2JJZClcbiAgcmNhbGwocHVzaENtZCwgdGFyZ2V0S2V5LCBqb2JJZClcbiAgYWRkQmFzZU1hcmtlcklmTmVlZGVkKG1hcmtlcktleSwgaXNQYXVzZWRPck1heGVkKVxuZW5kXG4tLVtbXG4gIEZ1bmN0aW9uIHRvIGFkZCBqb2IgY29uc2lkZXJpbmcgcHJpb3JpdHkuXG5dXVxuLS0gSW5jbHVkZXNcbi0tW1tcbiAgRnVuY3Rpb24gdG8gZ2V0IHByaW9yaXR5IHNjb3JlLlxuXV1cbmxvY2FsIGZ1bmN0aW9uIGdldFByaW9yaXR5U2NvcmUocHJpb3JpdHksIHByaW9yaXR5Q291bnRlcktleSlcbiAgbG9jYWwgcHJpb0NvdW50ZXIgPSByY2FsbChcIklOQ1JcIiwgcHJpb3JpdHlDb3VudGVyS2V5KVxuICByZXR1cm4gcHJpb3JpdHkgKiAweDEwMDAwMDAwMCArIHByaW9Db3VudGVyICUgMHgxMDAwMDAwMDBcbmVuZFxubG9jYWwgZnVuY3Rpb24gYWRkSm9iV2l0aFByaW9yaXR5KG1hcmtlcktleSwgcHJpb3JpdGl6ZWRLZXksIHByaW9yaXR5LCBqb2JJZCwgcHJpb3JpdHlDb3VudGVyS2V5LFxuICBpc1BhdXNlZE9yTWF4ZWQpXG4gIGxvY2FsIHNjb3JlID0gZ2V0UHJpb3JpdHlTY29yZShwcmlvcml0eSwgcHJpb3JpdHlDb3VudGVyS2V5KVxuICByY2FsbChcIlpBRERcIiwgcHJpb3JpdGl6ZWRLZXksIHNjb3JlLCBqb2JJZClcbiAgYWRkQmFzZU1hcmtlcklmTmVlZGVkKG1hcmtlcktleSwgaXNQYXVzZWRPck1heGVkKVxuZW5kXG4tLVtbXG4gIEZ1bmN0aW9uIHRvIGNoZWNrIGlmIHF1ZXVlIGlzIHBhdXNlZCBvciBtYXhlZFxuICAoc2luY2UgYW4gZW1wdHkgbGlzdCBhbmQgIUVYSVNUUyBhcmUgbm90IHJlYWxseSB0aGUgc2FtZSkuXG5dXVxubG9jYWwgZnVuY3Rpb24gaXNRdWV1ZVBhdXNlZE9yTWF4ZWQocXVldWVNZXRhS2V5LCBhY3RpdmVLZXkpXG4gIGxvY2FsIHF1ZXVlQXR0cmlidXRlcyA9IHJjYWxsKFwiSE1HRVRcIiwgcXVldWVNZXRhS2V5LCBcInBhdXNlZFwiLCBcImNvbmN1cnJlbmN5XCIpXG4gIGlmIHF1ZXVlQXR0cmlidXRlc1sxXSB0aGVuXG4gICAgcmV0dXJuIHRydWVcbiAgZWxzZVxuICAgIGlmIHF1ZXVlQXR0cmlidXRlc1syXSB0aGVuXG4gICAgICBsb2NhbCBhY3RpdmVDb3VudCA9IHJjYWxsKFwiTExFTlwiLCBhY3RpdmVLZXkpXG4gICAgICByZXR1cm4gYWN0aXZlQ291bnQgPj0gdG9udW1iZXIocXVldWVBdHRyaWJ1dGVzWzJdKVxuICAgIGVuZFxuICBlbmRcbiAgcmV0dXJuIGZhbHNlXG5lbmRcbi0tW1tcbiAgRnVuY3Rpb24gdG8gY2hlY2sgZm9yIHRoZSBtZXRhLnBhdXNlZCBrZXkgdG8gZGVjaWRlIGlmIHdlIGFyZSBwYXVzZWQgb3Igbm90XG4gIChzaW5jZSBhbiBlbXB0eSBsaXN0IGFuZCAhRVhJU1RTIGFyZSBub3QgcmVhbGx5IHRoZSBzYW1lKS5cbl1dXG5sb2NhbCBmdW5jdGlvbiBnZXRUYXJnZXRRdWV1ZUxpc3QocXVldWVNZXRhS2V5LCBhY3RpdmVLZXksIHdhaXRLZXksIHBhdXNlZEtleSlcbiAgbG9jYWwgcXVldWVBdHRyaWJ1dGVzID0gcmNhbGwoXCJITUdFVFwiLCBxdWV1ZU1ldGFLZXksIFwicGF1c2VkXCIsIFwiY29uY3VycmVuY3lcIiwgXCJtYXhcIiwgXCJkdXJhdGlvblwiKVxuICBpZiBxdWV1ZUF0dHJpYnV0ZXNbMV0gdGhlblxuICAgIHJldHVybiBwYXVzZWRLZXksIHRydWUsIHF1ZXVlQXR0cmlidXRlc1szXSwgcXVldWVBdHRyaWJ1dGVzWzRdXG4gIGVsc2VcbiAgICBpZiBxdWV1ZUF0dHJpYnV0ZXNbMl0gdGhlblxuICAgICAgbG9jYWwgYWN0aXZlQ291bnQgPSByY2FsbChcIkxMRU5cIiwgYWN0aXZlS2V5KVxuICAgICAgaWYgYWN0aXZlQ291bnQgPj0gdG9udW1iZXIocXVldWVBdHRyaWJ1dGVzWzJdKSB0aGVuXG4gICAgICAgIHJldHVybiB3YWl0S2V5LCB0cnVlLCBxdWV1ZUF0dHJpYnV0ZXNbM10sIHF1ZXVlQXR0cmlidXRlc1s0XVxuICAgICAgZWxzZVxuICAgICAgICByZXR1cm4gd2FpdEtleSwgZmFsc2UsIHF1ZXVlQXR0cmlidXRlc1szXSwgcXVldWVBdHRyaWJ1dGVzWzRdXG4gICAgICBlbmRcbiAgICBlbmRcbiAgZW5kXG4gIHJldHVybiB3YWl0S2V5LCBmYWxzZSwgcXVldWVBdHRyaWJ1dGVzWzNdLCBxdWV1ZUF0dHJpYnV0ZXNbNF1cbmVuZFxubG9jYWwgZnVuY3Rpb24gbW92ZVBhcmVudFRvV2FpdChwYXJlbnRRdWV1ZUtleSwgcGFyZW50S2V5LCBwYXJlbnRJZCwgdGltZXN0YW1wKVxuICAgIGxvY2FsIHBhcmVudFdhaXRLZXkgPSBwYXJlbnRRdWV1ZUtleSAuLiBcIjp3YWl0XCJcbiAgICBsb2NhbCBwYXJlbnRQYXVzZWRLZXkgPSBwYXJlbnRRdWV1ZUtleSAuLiBcIjpwYXVzZWRcIlxuICAgIGxvY2FsIHBhcmVudEFjdGl2ZUtleSA9IHBhcmVudFF1ZXVlS2V5IC4uIFwiOmFjdGl2ZVwiXG4gICAgbG9jYWwgcGFyZW50TWV0YUtleSA9IHBhcmVudFF1ZXVlS2V5IC4uIFwiOm1ldGFcIlxuICAgIGxvY2FsIHBhcmVudE1hcmtlcktleSA9IHBhcmVudFF1ZXVlS2V5IC4uIFwiOm1hcmtlclwiXG4gICAgbG9jYWwgam9iQXR0cmlidXRlcyA9IHJjYWxsKFwiSE1HRVRcIiwgcGFyZW50S2V5LCBcInByaW9yaXR5XCIsIFwiZGVsYXlcIilcbiAgICBsb2NhbCBwcmlvcml0eSA9IHRvbnVtYmVyKGpvYkF0dHJpYnV0ZXNbMV0pIG9yIDBcbiAgICBsb2NhbCBkZWxheSA9IHRvbnVtYmVyKGpvYkF0dHJpYnV0ZXNbMl0pIG9yIDBcbiAgICBpZiBkZWxheSA+IDAgdGhlblxuICAgICAgICBsb2NhbCBkZWxheWVkVGltZXN0YW1wID0gdG9udW1iZXIodGltZXN0YW1wKSArIGRlbGF5XG4gICAgICAgIGxvY2FsIHNjb3JlID0gZGVsYXllZFRpbWVzdGFtcCAqIDB4MTAwMFxuICAgICAgICBsb2NhbCBwYXJlbnREZWxheWVkS2V5ID0gcGFyZW50UXVldWVLZXkgLi4gXCI6ZGVsYXllZFwiXG4gICAgICAgIHJjYWxsKFwiWkFERFwiLCBwYXJlbnREZWxheWVkS2V5LCBzY29yZSwgcGFyZW50SWQpXG4gICAgICAgIHJjYWxsKFwiWEFERFwiLCBwYXJlbnRRdWV1ZUtleSAuLiBcIjpldmVudHNcIiwgXCIqXCIsIFwiZXZlbnRcIiwgXCJkZWxheWVkXCIsIFwiam9iSWRcIiwgcGFyZW50SWQsIFwiZGVsYXlcIixcbiAgICAgICAgICAgIGRlbGF5ZWRUaW1lc3RhbXApXG4gICAgICAgIGFkZERlbGF5TWFya2VySWZOZWVkZWQocGFyZW50TWFya2VyS2V5LCBwYXJlbnREZWxheWVkS2V5KVxuICAgIGVsc2VcbiAgICAgICAgaWYgcHJpb3JpdHkgPT0gMCB0aGVuXG4gICAgICAgICAgICBsb2NhbCBwYXJlbnRUYXJnZXQsIGlzUGFyZW50UGF1c2VkT3JNYXhlZCA9IGdldFRhcmdldFF1ZXVlTGlzdChwYXJlbnRNZXRhS2V5LCBwYXJlbnRBY3RpdmVLZXksXG4gICAgICAgICAgICAgICAgcGFyZW50V2FpdEtleSwgcGFyZW50UGF1c2VkS2V5KVxuICAgICAgICAgICAgYWRkSm9iSW5UYXJnZXRMaXN0KHBhcmVudFRhcmdldCwgcGFyZW50TWFya2VyS2V5LCBcIlJQVVNIXCIsIGlzUGFyZW50UGF1c2VkT3JNYXhlZCwgcGFyZW50SWQpXG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIGxvY2FsIGlzUGF1c2VkT3JNYXhlZCA9IGlzUXVldWVQYXVzZWRPck1heGVkKHBhcmVudE1ldGFLZXksIHBhcmVudEFjdGl2ZUtleSlcbiAgICAgICAgICAgIGFkZEpvYldpdGhQcmlvcml0eShwYXJlbnRNYXJrZXJLZXksIHBhcmVudFF1ZXVlS2V5IC4uIFwiOnByaW9yaXRpemVkXCIsIHByaW9yaXR5LCBwYXJlbnRJZCxcbiAgICAgICAgICAgICAgICBwYXJlbnRRdWV1ZUtleSAuLiBcIjpwY1wiLCBpc1BhdXNlZE9yTWF4ZWQpXG4gICAgICAgIGVuZFxuICAgICAgICByY2FsbChcIlhBRERcIiwgcGFyZW50UXVldWVLZXkgLi4gXCI6ZXZlbnRzXCIsIFwiKlwiLCBcImV2ZW50XCIsIFwid2FpdGluZ1wiLCBcImpvYklkXCIsIHBhcmVudElkLCBcInByZXZcIixcbiAgICAgICAgICAgIFwid2FpdGluZy1jaGlsZHJlblwiKVxuICAgIGVuZFxuZW5kXG5sb2NhbCBmdW5jdGlvbiBtb3ZlUGFyZW50VG9XYWl0SWZOZWVkZWQocGFyZW50UXVldWVLZXksIHBhcmVudEtleSwgcGFyZW50SWQsIHRpbWVzdGFtcClcbiAgaWYgcmNhbGwoXCJFWElTVFNcIiwgcGFyZW50S2V5KSA9PSAxIHRoZW5cbiAgICBsb2NhbCBwYXJlbnRXYWl0aW5nQ2hpbGRyZW5LZXkgPSBwYXJlbnRRdWV1ZUtleSAuLiBcIjp3YWl0aW5nLWNoaWxkcmVuXCJcbiAgICBpZiByY2FsbChcIlpTQ09SRVwiLCBwYXJlbnRXYWl0aW5nQ2hpbGRyZW5LZXksIHBhcmVudElkKSB0aGVuICAgIFxuICAgICAgcmNhbGwoXCJaUkVNXCIsIHBhcmVudFdhaXRpbmdDaGlsZHJlbktleSwgcGFyZW50SWQpXG4gICAgICBtb3ZlUGFyZW50VG9XYWl0KHBhcmVudFF1ZXVlS2V5LCBwYXJlbnRLZXksIHBhcmVudElkLCB0aW1lc3RhbXApXG4gICAgZW5kXG4gIGVuZFxuZW5kXG5sb2NhbCBmdW5jdGlvbiBtb3ZlUGFyZW50VG9XYWl0SWZOb1BlbmRpbmdEZXBlbmRlbmNpZXMocGFyZW50UXVldWVLZXksIHBhcmVudERlcGVuZGVuY2llc0tleSwgcGFyZW50S2V5LFxuICBwYXJlbnRJZCwgdGltZXN0YW1wKVxuICBsb2NhbCBkb05vdEhhdmVQZW5kaW5nRGVwZW5kZW5jaWVzID0gcmNhbGwoXCJTQ0FSRFwiLCBwYXJlbnREZXBlbmRlbmNpZXNLZXkpID09IDBcbiAgaWYgZG9Ob3RIYXZlUGVuZGluZ0RlcGVuZGVuY2llcyB0aGVuXG4gICAgbW92ZVBhcmVudFRvV2FpdElmTmVlZGVkKHBhcmVudFF1ZXVlS2V5LCBwYXJlbnRLZXksIHBhcmVudElkLCB0aW1lc3RhbXApXG4gIGVuZFxuZW5kXG5sb2NhbCBmdW5jdGlvbiB1cGRhdGVQYXJlbnREZXBzSWZOZWVkZWQocGFyZW50S2V5LCBwYXJlbnRRdWV1ZUtleSwgcGFyZW50RGVwZW5kZW5jaWVzS2V5LFxuICBwYXJlbnRJZCwgam9iSWRLZXksIHJldHVybnZhbHVlLCB0aW1lc3RhbXAgKVxuICBsb2NhbCBwcm9jZXNzZWRTZXQgPSBwYXJlbnRLZXkgLi4gXCI6cHJvY2Vzc2VkXCJcbiAgcmNhbGwoXCJIU0VUXCIsIHByb2Nlc3NlZFNldCwgam9iSWRLZXksIHJldHVybnZhbHVlKVxuICBtb3ZlUGFyZW50VG9XYWl0SWZOb1BlbmRpbmdEZXBlbmRlbmNpZXMocGFyZW50UXVldWVLZXksIHBhcmVudERlcGVuZGVuY2llc0tleSwgcGFyZW50S2V5LCBwYXJlbnRJZCwgdGltZXN0YW1wKVxuZW5kXG5sb2NhbCBmdW5jdGlvbiB1cGRhdGVFeGlzdGluZ0pvYnNQYXJlbnQocGFyZW50S2V5LCBwYXJlbnQsIHBhcmVudERhdGEsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50RGVwZW5kZW5jaWVzS2V5LCBjb21wbGV0ZWRLZXksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgam9iSWRLZXksIGpvYklkLCB0aW1lc3RhbXApXG4gICAgaWYgcGFyZW50S2V5IH49IG5pbCB0aGVuXG4gICAgICAgIGlmIHJjYWxsKFwiWlNDT1JFXCIsIGNvbXBsZXRlZEtleSwgam9iSWQpIHRoZW5cbiAgICAgICAgICAgIGxvY2FsIHJldHVybnZhbHVlID0gcmNhbGwoXCJIR0VUXCIsIGpvYklkS2V5LCBcInJldHVybnZhbHVlXCIpXG4gICAgICAgICAgICB1cGRhdGVQYXJlbnREZXBzSWZOZWVkZWQocGFyZW50S2V5LCBwYXJlbnRbJ3F1ZXVlS2V5J10sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50RGVwZW5kZW5jaWVzS2V5LCBwYXJlbnRbJ2lkJ10sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgam9iSWRLZXksIHJldHVybnZhbHVlLCB0aW1lc3RhbXApXG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIGlmIHBhcmVudERlcGVuZGVuY2llc0tleSB+PSBuaWwgdGhlblxuICAgICAgICAgICAgICAgIHJjYWxsKFwiU0FERFwiLCBwYXJlbnREZXBlbmRlbmNpZXNLZXksIGpvYklkS2V5KVxuICAgICAgICAgICAgZW5kXG4gICAgICAgIGVuZFxuICAgICAgICByY2FsbChcIkhNU0VUXCIsIGpvYklkS2V5LCBcInBhcmVudEtleVwiLCBwYXJlbnRLZXksIFwicGFyZW50XCIsIHBhcmVudERhdGEpXG4gICAgZW5kXG5lbmRcbmxvY2FsIGZ1bmN0aW9uIGhhbmRsZUR1cGxpY2F0ZWRKb2Ioam9iS2V5LCBqb2JJZCwgY3VycmVudFBhcmVudEtleSwgY3VycmVudFBhcmVudCxcbiAgcGFyZW50RGF0YSwgcGFyZW50RGVwZW5kZW5jaWVzS2V5LCBjb21wbGV0ZWRLZXksIGV2ZW50c0tleSwgbWF4RXZlbnRzLCB0aW1lc3RhbXApXG4gIGxvY2FsIGV4aXN0ZWRQYXJlbnRLZXkgPSByY2FsbChcIkhHRVRcIiwgam9iS2V5LCBcInBhcmVudEtleVwiKVxuICBpZiBub3QgZXhpc3RlZFBhcmVudEtleSBvciBleGlzdGVkUGFyZW50S2V5ID09IGN1cnJlbnRQYXJlbnRLZXkgdGhlblxuICAgIHVwZGF0ZUV4aXN0aW5nSm9ic1BhcmVudChjdXJyZW50UGFyZW50S2V5LCBjdXJyZW50UGFyZW50LCBwYXJlbnREYXRhLFxuICAgICAgcGFyZW50RGVwZW5kZW5jaWVzS2V5LCBjb21wbGV0ZWRLZXksIGpvYktleSxcbiAgICAgIGpvYklkLCB0aW1lc3RhbXApXG4gIGVsc2VcbiAgICBpZiBjdXJyZW50UGFyZW50S2V5IH49IG5pbCBhbmQgY3VycmVudFBhcmVudEtleSB+PSBleGlzdGVkUGFyZW50S2V5XG4gICAgICBhbmQgKHJjYWxsKFwiRVhJU1RTXCIsIGV4aXN0ZWRQYXJlbnRLZXkpID09IDEpIHRoZW5cbiAgICAgIHJldHVybiAtN1xuICAgIGVuZFxuICBlbmRcbiAgcmNhbGwoXCJYQUREXCIsIGV2ZW50c0tleSwgXCJNQVhMRU5cIiwgXCJ+XCIsIG1heEV2ZW50cywgXCIqXCIsIFwiZXZlbnRcIixcbiAgICBcImR1cGxpY2F0ZWRcIiwgXCJqb2JJZFwiLCBqb2JJZClcbiAgcmV0dXJuIGpvYklkIC4uIFwiXCIgLS0gY29udmVydCB0byBzdHJpbmdcbmVuZFxuLS1bW1xuICBGdW5jdGlvbiB0byBzdG9yZSBhIGpvYlxuXV1cbmxvY2FsIGZ1bmN0aW9uIHN0b3JlSm9iKGV2ZW50c0tleSwgam9iSWRLZXksIGpvYklkLCBuYW1lLCBkYXRhLCBvcHRzLCB0aW1lc3RhbXAsXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnRLZXksIHBhcmVudERhdGEsIHJlcGVhdEpvYktleSlcbiAgICBsb2NhbCBqc29uT3B0cyA9IGNqc29uLmVuY29kZShvcHRzKVxuICAgIGxvY2FsIGRlbGF5ID0gb3B0c1snZGVsYXknXSBvciAwXG4gICAgbG9jYWwgcHJpb3JpdHkgPSBvcHRzWydwcmlvcml0eSddIG9yIDBcbiAgICBsb2NhbCBkZWJvdW5jZUlkID0gb3B0c1snZGUnXSBhbmQgb3B0c1snZGUnXVsnaWQnXVxuICAgIGxvY2FsIG9wdGlvbmFsVmFsdWVzID0ge31cbiAgICBpZiBwYXJlbnRLZXkgfj0gbmlsIHRoZW5cbiAgICAgICAgdGFibGUuaW5zZXJ0KG9wdGlvbmFsVmFsdWVzLCBcInBhcmVudEtleVwiKVxuICAgICAgICB0YWJsZS5pbnNlcnQob3B0aW9uYWxWYWx1ZXMsIHBhcmVudEtleSlcbiAgICAgICAgdGFibGUuaW5zZXJ0KG9wdGlvbmFsVmFsdWVzLCBcInBhcmVudFwiKVxuICAgICAgICB0YWJsZS5pbnNlcnQob3B0aW9uYWxWYWx1ZXMsIHBhcmVudERhdGEpXG4gICAgZW5kXG4gICAgaWYgcmVwZWF0Sm9iS2V5IHRoZW5cbiAgICAgICAgdGFibGUuaW5zZXJ0KG9wdGlvbmFsVmFsdWVzLCBcInJqa1wiKVxuICAgICAgICB0YWJsZS5pbnNlcnQob3B0aW9uYWxWYWx1ZXMsIHJlcGVhdEpvYktleSlcbiAgICBlbmRcbiAgICBpZiBkZWJvdW5jZUlkIHRoZW5cbiAgICAgICAgdGFibGUuaW5zZXJ0KG9wdGlvbmFsVmFsdWVzLCBcImRlaWRcIilcbiAgICAgICAgdGFibGUuaW5zZXJ0KG9wdGlvbmFsVmFsdWVzLCBkZWJvdW5jZUlkKVxuICAgIGVuZFxuICAgIHJjYWxsKFwiSE1TRVRcIiwgam9iSWRLZXksIFwibmFtZVwiLCBuYW1lLCBcImRhdGFcIiwgZGF0YSwgXCJvcHRzXCIsIGpzb25PcHRzLFxuICAgICAgICAgIFwidGltZXN0YW1wXCIsIHRpbWVzdGFtcCwgXCJkZWxheVwiLCBkZWxheSwgXCJwcmlvcml0eVwiLCBwcmlvcml0eSxcbiAgICAgICAgICB1bnBhY2sob3B0aW9uYWxWYWx1ZXMpKVxuICAgIHJjYWxsKFwiWEFERFwiLCBldmVudHNLZXksIFwiKlwiLCBcImV2ZW50XCIsIFwiYWRkZWRcIiwgXCJqb2JJZFwiLCBqb2JJZCwgXCJuYW1lXCIsIG5hbWUpXG4gICAgcmV0dXJuIGRlbGF5LCBwcmlvcml0eVxuZW5kXG5pZiBwYXJlbnRLZXkgfj0gbmlsIHRoZW5cbiAgICBpZiByY2FsbChcIkVYSVNUU1wiLCBwYXJlbnRLZXkpIH49IDEgdGhlbiByZXR1cm4gLTUgZW5kXG4gICAgcGFyZW50RGF0YSA9IGNqc29uLmVuY29kZShwYXJlbnQpXG5lbmRcbmxvY2FsIGpvYkNvdW50ZXIgPSByY2FsbChcIklOQ1JcIiwgaWRLZXkpXG5sb2NhbCBtYXhFdmVudHMgPSBnZXRPclNldE1heEV2ZW50cyhtZXRhS2V5KVxubG9jYWwgb3B0cyA9IGNtc2dwYWNrLnVucGFjayhBUkdWWzNdKVxubG9jYWwgcGFyZW50RGVwZW5kZW5jaWVzS2V5ID0gYXJnc1s2XVxubG9jYWwgdGltZXN0YW1wID0gYXJnc1s0XVxuaWYgYXJnc1syXSA9PSBcIlwiIHRoZW5cbiAgICBqb2JJZCA9IGpvYkNvdW50ZXJcbiAgICBqb2JJZEtleSA9IGFyZ3NbMV0gLi4gam9iSWRcbmVsc2VcbiAgICBqb2JJZCA9IGFyZ3NbMl1cbiAgICBqb2JJZEtleSA9IGFyZ3NbMV0gLi4gam9iSWRcbiAgICBpZiByY2FsbChcIkVYSVNUU1wiLCBqb2JJZEtleSkgPT0gMSB0aGVuXG4gICAgICAgIHJldHVybiBoYW5kbGVEdXBsaWNhdGVkSm9iKGpvYklkS2V5LCBqb2JJZCwgcGFyZW50S2V5LCBwYXJlbnQsXG4gICAgICAgICAgICBwYXJlbnREYXRhLCBwYXJlbnREZXBlbmRlbmNpZXNLZXksIGNvbXBsZXRlZEtleSwgZXZlbnRzS2V5LFxuICAgICAgICAgICAgbWF4RXZlbnRzLCB0aW1lc3RhbXApXG4gICAgZW5kXG5lbmRcbmxvY2FsIGRlZHVwbGljYXRpb25Kb2JJZCA9IGRlZHVwbGljYXRlSm9iKG9wdHNbJ2RlJ10sIGpvYklkLCBkZWxheWVkS2V5LCBkZWR1cGxpY2F0aW9uS2V5LFxuICBldmVudHNLZXksIG1heEV2ZW50cywgYXJnc1sxXSlcbmlmIGRlZHVwbGljYXRpb25Kb2JJZCB0aGVuXG4gIHJldHVybiBkZWR1cGxpY2F0aW9uSm9iSWRcbmVuZFxubG9jYWwgZGVsYXksIHByaW9yaXR5ID0gc3RvcmVKb2IoZXZlbnRzS2V5LCBqb2JJZEtleSwgam9iSWQsIGFyZ3NbM10sIEFSR1ZbMl0sXG4gICAgb3B0cywgdGltZXN0YW1wLCBwYXJlbnRLZXksIHBhcmVudERhdGEsIHJlcGVhdEpvYktleSlcbmFkZERlbGF5ZWRKb2Ioam9iSWQsIGRlbGF5ZWRLZXksIGV2ZW50c0tleSwgdGltZXN0YW1wLCBtYXhFdmVudHMsIEtFWVNbMV0sIGRlbGF5KVxuLS0gQ2hlY2sgaWYgdGhpcyBqb2IgaXMgYSBjaGlsZCBvZiBhbm90aGVyIGpvYiwgaWYgc28gYWRkIGl0IHRvIHRoZSBwYXJlbnRzIGRlcGVuZGVuY2llc1xuaWYgcGFyZW50RGVwZW5kZW5jaWVzS2V5IH49IG5pbCB0aGVuXG4gICAgcmNhbGwoXCJTQUREXCIsIHBhcmVudERlcGVuZGVuY2llc0tleSwgam9iSWRLZXkpXG5lbmRcbnJldHVybiBqb2JJZCAuLiBcIlwiIC0tIGNvbnZlcnQgdG8gc3RyaW5nXG5gO1xuZXhwb3J0cy5hZGREZWxheWVkSm9iID0ge1xuICAgIG5hbWU6ICdhZGREZWxheWVkSm9iJyxcbiAgICBjb250ZW50LFxuICAgIGtleXM6IDYsXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YWRkRGVsYXllZEpvYi02LmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsImFkZERlbGF5ZWRKb2IiLCJjb250ZW50IiwibmFtZSIsImtleXMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/scripts/addDelayedJob-6.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/scripts/addJobScheduler-11.js":
/*!********************************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/scripts/addJobScheduler-11.js ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.addJobScheduler = void 0;\nconst content = `--[[\n  Adds a job scheduler, i.e. a job factory that creates jobs based on a given schedule (repeat options).\n    Input:\n      KEYS[1]  'repeat' key\n      KEYS[2]  'delayed' key\n      KEYS[3]  'wait' key\n      KEYS[4]  'paused' key\n      KEYS[5]  'meta' key\n      KEYS[6]  'prioritized' key\n      KEYS[7]  'marker' key\n      KEYS[8]  'id' key\n      KEYS[9]  'events' key\n      KEYS[10] 'pc' priority counter\n      KEYS[11] 'active' key\n      ARGV[1] next milliseconds\n      ARGV[2] msgpacked options\n            [1]  name\n            [2]  tz?\n            [3]  pattern?\n            [4]  endDate?\n            [5]  every?\n      ARGV[3] jobs scheduler id\n      ARGV[4] Json stringified template data\n      ARGV[5] mspacked template opts\n      ARGV[6] msgpacked delayed opts\n      ARGV[7] timestamp\n      ARGV[8] prefix key\n      ARGV[9] producer key\n      Output:\n        repeatableKey  - OK\n]] local rcall = redis.call\nlocal repeatKey = KEYS[1]\nlocal delayedKey = KEYS[2]\nlocal waitKey = KEYS[3]\nlocal pausedKey = KEYS[4]\nlocal metaKey = KEYS[5]\nlocal prioritizedKey = KEYS[6]\nlocal eventsKey = KEYS[9]\nlocal nextMillis = ARGV[1]\nlocal jobSchedulerId = ARGV[3]\nlocal templateOpts = cmsgpack.unpack(ARGV[5])\nlocal now = tonumber(ARGV[7])\nlocal prefixKey = ARGV[8]\nlocal jobOpts = cmsgpack.unpack(ARGV[6])\n-- Includes\n--[[\n  Add delay marker if needed.\n]]\n-- Includes\n--[[\n  Adds a delayed job to the queue by doing the following:\n    - Creates a new job key with the job data.\n    - adds to delayed zset.\n    - Emits a global event 'delayed' if the job is delayed.\n]]\n-- Includes\n--[[\n  Add delay marker if needed.\n]]\n-- Includes\n--[[\n  Function to return the next delayed job timestamp.\n]]\nlocal function getNextDelayedTimestamp(delayedKey)\n  local result = rcall(\"ZRANGE\", delayedKey, 0, 0, \"WITHSCORES\")\n  if #result then\n    local nextTimestamp = tonumber(result[2])\n    if nextTimestamp ~= nil then\n      return nextTimestamp / 0x1000\n    end\n  end\nend\nlocal function addDelayMarkerIfNeeded(markerKey, delayedKey)\n  local nextTimestamp = getNextDelayedTimestamp(delayedKey)\n  if nextTimestamp ~= nil then\n    -- Replace the score of the marker with the newest known\n    -- next timestamp.\n    rcall(\"ZADD\", markerKey, nextTimestamp, \"1\")\n  end\nend\n--[[\n  Bake in the job id first 12 bits into the timestamp\n  to guarantee correct execution order of delayed jobs\n  (up to 4096 jobs per given timestamp or 4096 jobs apart per timestamp)\n  WARNING: Jobs that are so far apart that they wrap around will cause FIFO to fail\n]]\nlocal function getDelayedScore(delayedKey, timestamp, delay)\n  local delayedTimestamp = (delay > 0 and (tonumber(timestamp) + delay)) or tonumber(timestamp)\n  local minScore = delayedTimestamp * 0x1000\n  local maxScore = (delayedTimestamp + 1 ) * 0x1000 - 1\n  local result = rcall(\"ZREVRANGEBYSCORE\", delayedKey, maxScore,\n    minScore, \"WITHSCORES\",\"LIMIT\", 0, 1)\n  if #result then\n    local currentMaxScore = tonumber(result[2])\n    if currentMaxScore ~= nil then\n      if currentMaxScore >= maxScore then\n        return maxScore, delayedTimestamp\n      else\n        return currentMaxScore + 1, delayedTimestamp\n      end\n    end\n  end\n  return minScore, delayedTimestamp\nend\nlocal function addDelayedJob(jobId, delayedKey, eventsKey, timestamp,\n  maxEvents, markerKey, delay)\n  local score, delayedTimestamp = getDelayedScore(delayedKey, timestamp, tonumber(delay))\n  rcall(\"ZADD\", delayedKey, score, jobId)\n  rcall(\"XADD\", eventsKey, \"MAXLEN\", \"~\", maxEvents, \"*\", \"event\", \"delayed\",\n    \"jobId\", jobId, \"delay\", delayedTimestamp)\n  -- mark that a delayed job is available\n  addDelayMarkerIfNeeded(markerKey, delayedKey)\nend\n--[[\n  Function to add job considering priority.\n]]\n-- Includes\n--[[\n  Add marker if needed when a job is available.\n]]\nlocal function addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)\n  if not isPausedOrMaxed then\n    rcall(\"ZADD\", markerKey, 0, \"0\")\n  end  \nend\n--[[\n  Function to get priority score.\n]]\nlocal function getPriorityScore(priority, priorityCounterKey)\n  local prioCounter = rcall(\"INCR\", priorityCounterKey)\n  return priority * 0x100000000 + prioCounter % 0x100000000\nend\nlocal function addJobWithPriority(markerKey, prioritizedKey, priority, jobId, priorityCounterKey,\n  isPausedOrMaxed)\n  local score = getPriorityScore(priority, priorityCounterKey)\n  rcall(\"ZADD\", prioritizedKey, score, jobId)\n  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)\nend\n--[[\n  Function to check for the meta.paused key to decide if we are paused or not\n  (since an empty list and !EXISTS are not really the same).\n]]\nlocal function isQueuePaused(queueMetaKey)\n  return rcall(\"HEXISTS\", queueMetaKey, \"paused\") == 1\nend\n--[[\n  Function to store a job\n]]\nlocal function storeJob(eventsKey, jobIdKey, jobId, name, data, opts, timestamp,\n                        parentKey, parentData, repeatJobKey)\n    local jsonOpts = cjson.encode(opts)\n    local delay = opts['delay'] or 0\n    local priority = opts['priority'] or 0\n    local debounceId = opts['de'] and opts['de']['id']\n    local optionalValues = {}\n    if parentKey ~= nil then\n        table.insert(optionalValues, \"parentKey\")\n        table.insert(optionalValues, parentKey)\n        table.insert(optionalValues, \"parent\")\n        table.insert(optionalValues, parentData)\n    end\n    if repeatJobKey then\n        table.insert(optionalValues, \"rjk\")\n        table.insert(optionalValues, repeatJobKey)\n    end\n    if debounceId then\n        table.insert(optionalValues, \"deid\")\n        table.insert(optionalValues, debounceId)\n    end\n    rcall(\"HMSET\", jobIdKey, \"name\", name, \"data\", data, \"opts\", jsonOpts,\n          \"timestamp\", timestamp, \"delay\", delay, \"priority\", priority,\n          unpack(optionalValues))\n    rcall(\"XADD\", eventsKey, \"*\", \"event\", \"added\", \"jobId\", jobId, \"name\", name)\n    return delay, priority\nend\n--[[\n  Function to check for the meta.paused key to decide if we are paused or not\n  (since an empty list and !EXISTS are not really the same).\n]]\nlocal function getTargetQueueList(queueMetaKey, activeKey, waitKey, pausedKey)\n  local queueAttributes = rcall(\"HMGET\", queueMetaKey, \"paused\", \"concurrency\", \"max\", \"duration\")\n  if queueAttributes[1] then\n    return pausedKey, true, queueAttributes[3], queueAttributes[4]\n  else\n    if queueAttributes[2] then\n      local activeCount = rcall(\"LLEN\", activeKey)\n      if activeCount >= tonumber(queueAttributes[2]) then\n        return waitKey, true, queueAttributes[3], queueAttributes[4]\n      else\n        return waitKey, false, queueAttributes[3], queueAttributes[4]\n      end\n    end\n  end\n  return waitKey, false, queueAttributes[3], queueAttributes[4]\nend\n--[[\n  Function to add job in target list and add marker if needed.\n]]\n-- Includes\nlocal function addJobInTargetList(targetKey, markerKey, pushCmd, isPausedOrMaxed, jobId)\n  rcall(pushCmd, targetKey, jobId)\n  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)\nend\nlocal function addJobFromScheduler(jobKey, jobId, opts, waitKey, pausedKey, activeKey, metaKey, \n  prioritizedKey, priorityCounter, delayedKey, markerKey, eventsKey, name, maxEvents, timestamp,\n  data, jobSchedulerId, repeatDelay)\n  opts['delay'] = repeatDelay\n  opts['jobId'] = jobId\n  local delay, priority = storeJob(eventsKey, jobKey, jobId, name, data,\n    opts, timestamp, nil, nil, jobSchedulerId)\n  if delay ~= 0 then\n    addDelayedJob(jobId, delayedKey, eventsKey, timestamp, maxEvents, markerKey, delay)\n  else\n    local target, isPausedOrMaxed = getTargetQueueList(metaKey, activeKey, waitKey, pausedKey)\n    -- Standard or priority add\n    if priority == 0 then\n      local pushCmd = opts['lifo'] and 'RPUSH' or 'LPUSH'\n      addJobInTargetList(target, markerKey, pushCmd, isPausedOrMaxed, jobId)\n    else\n      -- Priority add\n      addJobWithPriority(markerKey, prioritizedKey, priority, jobId, priorityCounter, isPausedOrMaxed)\n    end\n    -- Emit waiting event\n    rcall(\"XADD\", eventsKey, \"MAXLEN\", \"~\", maxEvents,  \"*\", \"event\", \"waiting\", \"jobId\", jobId)\n  end\nend\n--[[\n  Function to get max events value or set by default 10000.\n]]\nlocal function getOrSetMaxEvents(metaKey)\n  local maxEvents = rcall(\"HGET\", metaKey, \"opts.maxLenEvents\")\n  if not maxEvents then\n    maxEvents = 10000\n    rcall(\"HSET\", metaKey, \"opts.maxLenEvents\", maxEvents)\n  end\n  return maxEvents\nend\n--[[\n  Function to remove job.\n]]\n-- Includes\n--[[\n  Function to remove deduplication key if needed\n  when a job is being removed.\n]]\nlocal function removeDeduplicationKeyIfNeededOnRemoval(prefixKey,\n  jobKey, jobId)\n  local deduplicationId = rcall(\"HGET\", jobKey, \"deid\")\n  if deduplicationId then\n    local deduplicationKey = prefixKey .. \"de:\" .. deduplicationId\n    local currentJobId = rcall('GET', deduplicationKey)\n    if currentJobId and currentJobId == jobId then\n      return rcall(\"DEL\", deduplicationKey)\n    end\n  end\nend\n--[[\n  Function to remove job keys.\n]]\nlocal function removeJobKeys(jobKey)\n  return rcall(\"DEL\", jobKey, jobKey .. ':logs', jobKey .. ':dependencies',\n    jobKey .. ':processed', jobKey .. ':failed', jobKey .. ':unsuccessful')\nend\n--[[\n  Check if this job has a parent. If so we will just remove it from\n  the parent child list, but if it is the last child we should move the parent to \"wait/paused\"\n  which requires code from \"moveToFinished\"\n]]\n-- Includes\n--[[\n  Functions to destructure job key.\n  Just a bit of warning, these functions may be a bit slow and affect performance significantly.\n]]\nlocal getJobIdFromKey = function (jobKey)\n  return string.match(jobKey, \".*:(.*)\")\nend\nlocal getJobKeyPrefix = function (jobKey, jobId)\n  return string.sub(jobKey, 0, #jobKey - #jobId)\nend\nlocal function _moveParentToWait(parentPrefix, parentId, emitEvent)\n  local parentTarget, isPausedOrMaxed = getTargetQueueList(parentPrefix .. \"meta\", parentPrefix .. \"active\",\n    parentPrefix .. \"wait\", parentPrefix .. \"paused\")\n  addJobInTargetList(parentTarget, parentPrefix .. \"marker\", \"RPUSH\", isPausedOrMaxed, parentId)\n  if emitEvent then\n    local parentEventStream = parentPrefix .. \"events\"\n    rcall(\"XADD\", parentEventStream, \"*\", \"event\", \"waiting\", \"jobId\", parentId, \"prev\", \"waiting-children\")\n  end\nend\nlocal function removeParentDependencyKey(jobKey, hard, parentKey, baseKey, debounceId)\n  if parentKey then\n    local parentDependenciesKey = parentKey .. \":dependencies\"\n    local result = rcall(\"SREM\", parentDependenciesKey, jobKey)\n    if result > 0 then\n      local pendingDependencies = rcall(\"SCARD\", parentDependenciesKey)\n      if pendingDependencies == 0 then\n        local parentId = getJobIdFromKey(parentKey)\n        local parentPrefix = getJobKeyPrefix(parentKey, parentId)\n        local numRemovedElements = rcall(\"ZREM\", parentPrefix .. \"waiting-children\", parentId)\n        if numRemovedElements == 1 then\n          if hard then -- remove parent in same queue\n            if parentPrefix == baseKey then\n              removeParentDependencyKey(parentKey, hard, nil, baseKey, nil)\n              removeJobKeys(parentKey)\n              if debounceId then\n                rcall(\"DEL\", parentPrefix .. \"de:\" .. debounceId)\n              end\n            else\n              _moveParentToWait(parentPrefix, parentId)\n            end\n          else\n            _moveParentToWait(parentPrefix, parentId, true)\n          end\n        end\n      end\n      return true\n    end\n  else\n    local parentAttributes = rcall(\"HMGET\", jobKey, \"parentKey\", \"deid\")\n    local missedParentKey = parentAttributes[1]\n    if( (type(missedParentKey) == \"string\") and missedParentKey ~= \"\"\n      and (rcall(\"EXISTS\", missedParentKey) == 1)) then\n      local parentDependenciesKey = missedParentKey .. \":dependencies\"\n      local result = rcall(\"SREM\", parentDependenciesKey, jobKey)\n      if result > 0 then\n        local pendingDependencies = rcall(\"SCARD\", parentDependenciesKey)\n        if pendingDependencies == 0 then\n          local parentId = getJobIdFromKey(missedParentKey)\n          local parentPrefix = getJobKeyPrefix(missedParentKey, parentId)\n          local numRemovedElements = rcall(\"ZREM\", parentPrefix .. \"waiting-children\", parentId)\n          if numRemovedElements == 1 then\n            if hard then\n              if parentPrefix == baseKey then\n                removeParentDependencyKey(missedParentKey, hard, nil, baseKey, nil)\n                removeJobKeys(missedParentKey)\n                if parentAttributes[2] then\n                  rcall(\"DEL\", parentPrefix .. \"de:\" .. parentAttributes[2])\n                end\n              else\n                _moveParentToWait(parentPrefix, parentId)\n              end\n            else\n              _moveParentToWait(parentPrefix, parentId, true)\n            end\n          end\n        end\n        return true\n      end\n    end\n  end\n  return false\nend\nlocal function removeJob(jobId, hard, baseKey, shouldRemoveDeduplicationKey)\n  local jobKey = baseKey .. jobId\n  removeParentDependencyKey(jobKey, hard, nil, baseKey)\n  if shouldRemoveDeduplicationKey then\n    removeDeduplicationKeyIfNeededOnRemoval(baseKey, jobKey, jobId)\n  end\n  removeJobKeys(jobKey)\nend\n--[[\n  Function to store a job scheduler\n]]\nlocal function storeJobScheduler(schedulerId, schedulerKey, repeatKey, nextMillis, opts,\n  templateData, templateOpts)\n  rcall(\"ZADD\", repeatKey, nextMillis, schedulerId)\n  local optionalValues = {}\n  if opts['tz'] then\n    table.insert(optionalValues, \"tz\")\n    table.insert(optionalValues, opts['tz'])\n  end\n  if opts['limit'] then\n    table.insert(optionalValues, \"limit\")\n    table.insert(optionalValues, opts['limit'])\n  end\n  if opts['pattern'] then\n    table.insert(optionalValues, \"pattern\")\n    table.insert(optionalValues, opts['pattern'])\n  end\n  if opts['startDate'] then\n    table.insert(optionalValues, \"startDate\")\n    table.insert(optionalValues, opts['startDate'])\n  end\n  if opts['endDate'] then\n    table.insert(optionalValues, \"endDate\")\n    table.insert(optionalValues, opts['endDate'])\n  end\n  if opts['every'] then\n    table.insert(optionalValues, \"every\")\n    table.insert(optionalValues, opts['every'])\n  end\n  if opts['offset'] then\n    table.insert(optionalValues, \"offset\")\n    table.insert(optionalValues, opts['offset'])\n  else\n    local offset = rcall(\"HGET\", schedulerKey, \"offset\")\n    if offset then\n      table.insert(optionalValues, \"offset\")\n      table.insert(optionalValues, tonumber(offset))\n    end\n  end\n  local jsonTemplateOpts = cjson.encode(templateOpts)\n  if jsonTemplateOpts and jsonTemplateOpts ~= '{}' then\n    table.insert(optionalValues, \"opts\")\n    table.insert(optionalValues, jsonTemplateOpts)\n  end\n  if templateData and templateData ~= '{}' then\n    table.insert(optionalValues, \"data\")\n    table.insert(optionalValues, templateData)\n  end\n  table.insert(optionalValues, \"ic\")\n  table.insert(optionalValues, rcall(\"HGET\", schedulerKey, \"ic\") or 1)\n  rcall(\"DEL\", schedulerKey) -- remove all attributes and then re-insert new ones\n  rcall(\"HMSET\", schedulerKey, \"name\", opts['name'], unpack(optionalValues))\nend\nlocal function getJobSchedulerEveryNextMillis(prevMillis, every, now, offset, startDate)\n    local nextMillis\n    if not prevMillis then\n        if startDate then\n            -- Assuming startDate is passed as milliseconds from JavaScript\n            nextMillis = tonumber(startDate)\n            nextMillis = nextMillis > now and nextMillis or now\n        else\n            nextMillis = now\n        end\n    else\n        nextMillis = prevMillis + every\n        -- check if we may have missed some iterations\n        if nextMillis < now then\n            nextMillis = math.floor(now / every) * every + every + (offset or 0)\n        end\n    end\n    if not offset or offset == 0 then\n        local timeSlot = math.floor(nextMillis / every) * every;\n        offset = nextMillis - timeSlot;\n    end\n    -- Return a tuple nextMillis, offset\n    return math.floor(nextMillis), math.floor(offset)\nend\n-- If we are overriding a repeatable job we must delete the delayed job for\n-- the next iteration.\nlocal schedulerKey = repeatKey .. \":\" .. jobSchedulerId\nlocal maxEvents = getOrSetMaxEvents(metaKey)\nlocal templateData = ARGV[4]\nlocal prevMillis = rcall(\"ZSCORE\", repeatKey, jobSchedulerId)\nif prevMillis then\n    prevMillis = tonumber(prevMillis)\nend\nlocal schedulerOpts = cmsgpack.unpack(ARGV[2])\nlocal every = schedulerOpts['every']\n-- For backwards compatibility we also check the offset from the job itself.\n-- could be removed in future major versions.\nlocal jobOffset = jobOpts['repeat'] and jobOpts['repeat']['offset'] or 0\nlocal offset = schedulerOpts['offset'] or jobOffset or 0\nlocal newOffset = offset\nlocal updatedEvery = false\nif every then\n    -- if we changed the 'every' value we need to reset millis to nil\n    local millis = prevMillis\n    if prevMillis then\n        local prevEvery = tonumber(rcall(\"HGET\", schedulerKey, \"every\"))\n        if prevEvery ~= every then\n            millis = nil\n            updatedEvery = true\n        end\n    end\n    local startDate = schedulerOpts['startDate']\n    nextMillis, newOffset = getJobSchedulerEveryNextMillis(millis, every, now, offset, startDate)\nend\nlocal function removeJobFromScheduler(prefixKey, delayedKey, prioritizedKey, waitKey, pausedKey, jobId, metaKey,\n    eventsKey)\n    if rcall(\"ZSCORE\", delayedKey, jobId) then\n        removeJob(jobId, true, prefixKey, true --[[remove debounce key]] )\n        rcall(\"ZREM\", delayedKey, jobId)\n        return true\n    elseif rcall(\"ZSCORE\", prioritizedKey, jobId) then\n        removeJob(jobId, true, prefixKey, true --[[remove debounce key]] )\n        rcall(\"ZREM\", prioritizedKey, jobId)\n        return true\n    else\n        local pausedOrWaitKey = waitKey\n        if isQueuePaused(metaKey) then\n            pausedOrWaitKey = pausedKey\n        end\n        if rcall(\"LREM\", pausedOrWaitKey, 1, jobId) > 0 then\n            removeJob(jobId, true, prefixKey, true --[[remove debounce key]] )\n            return true\n        end\n    end\n    return false\nend\nlocal removedPrevJob = false\nif prevMillis then\n    local currentJobId = \"repeat:\" .. jobSchedulerId .. \":\" .. prevMillis\n    local currentJobKey = schedulerKey .. \":\" .. prevMillis\n    -- In theory it should always exist the currentJobKey if there is a prevMillis unless something has\n    -- gone really wrong.\n    if rcall(\"EXISTS\", currentJobKey) == 1 then\n        removedPrevJob = removeJobFromScheduler(prefixKey, delayedKey, prioritizedKey, waitKey, pausedKey, currentJobId,\n            metaKey, eventsKey)\n    end\nend\nif removedPrevJob then\n    -- The jobs has been removed and we want to replace it, so lets use the same millis.\n    if every and not updatedEvery then\n        nextMillis = prevMillis\n    end\nelse\n    -- Special case where no job was removed, and we need to add the next iteration.\n    schedulerOpts['offset'] = newOffset\nend\n-- Check for job ID collision with existing jobs (in any state)\nlocal jobId = \"repeat:\" .. jobSchedulerId .. \":\" .. nextMillis\nlocal jobKey = prefixKey .. jobId\n-- If there's already a job with this ID, in a state \n-- that is not updatable (active, completed, failed) we must \n-- handle the collision\nlocal hasCollision = false\nif rcall(\"EXISTS\", jobKey) == 1 then\n    if every then\n        -- For 'every' case: try next time slot to avoid collision\n        local nextSlotMillis = nextMillis + every\n        local nextSlotJobId = \"repeat:\" .. jobSchedulerId .. \":\" .. nextSlotMillis\n        local nextSlotJobKey = prefixKey .. nextSlotJobId\n        if rcall(\"EXISTS\", nextSlotJobKey) == 0 then\n            -- Next slot is free, use it\n            nextMillis = nextSlotMillis\n            jobId = nextSlotJobId\n        else\n            -- Next slot also has a job, return error code\n            return -11 -- SchedulerJobSlotsBusy\n        end\n    else\n        hasCollision = true\n    end\nend\nlocal delay = nextMillis - now\n-- Fast Clamp delay to minimum of 0\nif delay < 0 then\n    delay = 0\nend\nlocal nextJobKey = schedulerKey .. \":\" .. nextMillis\nif not hasCollision or removedPrevJob then\n    -- jobId already calculated above during collision check\n    storeJobScheduler(jobSchedulerId, schedulerKey, repeatKey, nextMillis, schedulerOpts, templateData, templateOpts)\n    rcall(\"INCR\", KEYS[8])\n    addJobFromScheduler(nextJobKey, jobId, jobOpts, waitKey, pausedKey, KEYS[11], metaKey, prioritizedKey, KEYS[10],\n        delayedKey, KEYS[7], eventsKey, schedulerOpts['name'], maxEvents, now, templateData, jobSchedulerId, delay)\nelseif hasCollision then\n    -- For 'pattern' case: return error code\n    return -10 -- SchedulerJobIdCollision\nend\nif ARGV[9] ~= \"\" then\n    rcall(\"HSET\", ARGV[9], \"nrjid\", jobId)\nend\nreturn {jobId .. \"\", delay}\n`;\nexports.addJobScheduler = {\n    name: \"addJobScheduler\",\n    content,\n    keys: 11\n}; //# sourceMappingURL=addJobScheduler-11.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL3NjcmlwdHMvYWRkSm9iU2NoZWR1bGVyLTExLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCx1QkFBdUIsR0FBRyxLQUFLO0FBQy9CLE1BQU1HLFVBQVUsQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBMmlCakIsQ0FBQztBQUNESCx1QkFBdUIsR0FBRztJQUN0QkksTUFBTTtJQUNORDtJQUNBRSxNQUFNO0FBQ1YsR0FDQSw4Q0FBOEMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vbmx5ZmFucy1wbGF0Zm9ybS8uL25vZGVfbW9kdWxlcy9idWxsbXEvZGlzdC9janMvc2NyaXB0cy9hZGRKb2JTY2hlZHVsZXItMTEuanM/Yjc3MCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuYWRkSm9iU2NoZWR1bGVyID0gdm9pZCAwO1xuY29uc3QgY29udGVudCA9IGAtLVtbXG4gIEFkZHMgYSBqb2Igc2NoZWR1bGVyLCBpLmUuIGEgam9iIGZhY3RvcnkgdGhhdCBjcmVhdGVzIGpvYnMgYmFzZWQgb24gYSBnaXZlbiBzY2hlZHVsZSAocmVwZWF0IG9wdGlvbnMpLlxuICAgIElucHV0OlxuICAgICAgS0VZU1sxXSAgJ3JlcGVhdCcga2V5XG4gICAgICBLRVlTWzJdICAnZGVsYXllZCcga2V5XG4gICAgICBLRVlTWzNdICAnd2FpdCcga2V5XG4gICAgICBLRVlTWzRdICAncGF1c2VkJyBrZXlcbiAgICAgIEtFWVNbNV0gICdtZXRhJyBrZXlcbiAgICAgIEtFWVNbNl0gICdwcmlvcml0aXplZCcga2V5XG4gICAgICBLRVlTWzddICAnbWFya2VyJyBrZXlcbiAgICAgIEtFWVNbOF0gICdpZCcga2V5XG4gICAgICBLRVlTWzldICAnZXZlbnRzJyBrZXlcbiAgICAgIEtFWVNbMTBdICdwYycgcHJpb3JpdHkgY291bnRlclxuICAgICAgS0VZU1sxMV0gJ2FjdGl2ZScga2V5XG4gICAgICBBUkdWWzFdIG5leHQgbWlsbGlzZWNvbmRzXG4gICAgICBBUkdWWzJdIG1zZ3BhY2tlZCBvcHRpb25zXG4gICAgICAgICAgICBbMV0gIG5hbWVcbiAgICAgICAgICAgIFsyXSAgdHo/XG4gICAgICAgICAgICBbM10gIHBhdHRlcm4/XG4gICAgICAgICAgICBbNF0gIGVuZERhdGU/XG4gICAgICAgICAgICBbNV0gIGV2ZXJ5P1xuICAgICAgQVJHVlszXSBqb2JzIHNjaGVkdWxlciBpZFxuICAgICAgQVJHVls0XSBKc29uIHN0cmluZ2lmaWVkIHRlbXBsYXRlIGRhdGFcbiAgICAgIEFSR1ZbNV0gbXNwYWNrZWQgdGVtcGxhdGUgb3B0c1xuICAgICAgQVJHVls2XSBtc2dwYWNrZWQgZGVsYXllZCBvcHRzXG4gICAgICBBUkdWWzddIHRpbWVzdGFtcFxuICAgICAgQVJHVls4XSBwcmVmaXgga2V5XG4gICAgICBBUkdWWzldIHByb2R1Y2VyIGtleVxuICAgICAgT3V0cHV0OlxuICAgICAgICByZXBlYXRhYmxlS2V5ICAtIE9LXG5dXSBsb2NhbCByY2FsbCA9IHJlZGlzLmNhbGxcbmxvY2FsIHJlcGVhdEtleSA9IEtFWVNbMV1cbmxvY2FsIGRlbGF5ZWRLZXkgPSBLRVlTWzJdXG5sb2NhbCB3YWl0S2V5ID0gS0VZU1szXVxubG9jYWwgcGF1c2VkS2V5ID0gS0VZU1s0XVxubG9jYWwgbWV0YUtleSA9IEtFWVNbNV1cbmxvY2FsIHByaW9yaXRpemVkS2V5ID0gS0VZU1s2XVxubG9jYWwgZXZlbnRzS2V5ID0gS0VZU1s5XVxubG9jYWwgbmV4dE1pbGxpcyA9IEFSR1ZbMV1cbmxvY2FsIGpvYlNjaGVkdWxlcklkID0gQVJHVlszXVxubG9jYWwgdGVtcGxhdGVPcHRzID0gY21zZ3BhY2sudW5wYWNrKEFSR1ZbNV0pXG5sb2NhbCBub3cgPSB0b251bWJlcihBUkdWWzddKVxubG9jYWwgcHJlZml4S2V5ID0gQVJHVls4XVxubG9jYWwgam9iT3B0cyA9IGNtc2dwYWNrLnVucGFjayhBUkdWWzZdKVxuLS0gSW5jbHVkZXNcbi0tW1tcbiAgQWRkIGRlbGF5IG1hcmtlciBpZiBuZWVkZWQuXG5dXVxuLS0gSW5jbHVkZXNcbi0tW1tcbiAgQWRkcyBhIGRlbGF5ZWQgam9iIHRvIHRoZSBxdWV1ZSBieSBkb2luZyB0aGUgZm9sbG93aW5nOlxuICAgIC0gQ3JlYXRlcyBhIG5ldyBqb2Iga2V5IHdpdGggdGhlIGpvYiBkYXRhLlxuICAgIC0gYWRkcyB0byBkZWxheWVkIHpzZXQuXG4gICAgLSBFbWl0cyBhIGdsb2JhbCBldmVudCAnZGVsYXllZCcgaWYgdGhlIGpvYiBpcyBkZWxheWVkLlxuXV1cbi0tIEluY2x1ZGVzXG4tLVtbXG4gIEFkZCBkZWxheSBtYXJrZXIgaWYgbmVlZGVkLlxuXV1cbi0tIEluY2x1ZGVzXG4tLVtbXG4gIEZ1bmN0aW9uIHRvIHJldHVybiB0aGUgbmV4dCBkZWxheWVkIGpvYiB0aW1lc3RhbXAuXG5dXVxubG9jYWwgZnVuY3Rpb24gZ2V0TmV4dERlbGF5ZWRUaW1lc3RhbXAoZGVsYXllZEtleSlcbiAgbG9jYWwgcmVzdWx0ID0gcmNhbGwoXCJaUkFOR0VcIiwgZGVsYXllZEtleSwgMCwgMCwgXCJXSVRIU0NPUkVTXCIpXG4gIGlmICNyZXN1bHQgdGhlblxuICAgIGxvY2FsIG5leHRUaW1lc3RhbXAgPSB0b251bWJlcihyZXN1bHRbMl0pXG4gICAgaWYgbmV4dFRpbWVzdGFtcCB+PSBuaWwgdGhlblxuICAgICAgcmV0dXJuIG5leHRUaW1lc3RhbXAgLyAweDEwMDBcbiAgICBlbmRcbiAgZW5kXG5lbmRcbmxvY2FsIGZ1bmN0aW9uIGFkZERlbGF5TWFya2VySWZOZWVkZWQobWFya2VyS2V5LCBkZWxheWVkS2V5KVxuICBsb2NhbCBuZXh0VGltZXN0YW1wID0gZ2V0TmV4dERlbGF5ZWRUaW1lc3RhbXAoZGVsYXllZEtleSlcbiAgaWYgbmV4dFRpbWVzdGFtcCB+PSBuaWwgdGhlblxuICAgIC0tIFJlcGxhY2UgdGhlIHNjb3JlIG9mIHRoZSBtYXJrZXIgd2l0aCB0aGUgbmV3ZXN0IGtub3duXG4gICAgLS0gbmV4dCB0aW1lc3RhbXAuXG4gICAgcmNhbGwoXCJaQUREXCIsIG1hcmtlcktleSwgbmV4dFRpbWVzdGFtcCwgXCIxXCIpXG4gIGVuZFxuZW5kXG4tLVtbXG4gIEJha2UgaW4gdGhlIGpvYiBpZCBmaXJzdCAxMiBiaXRzIGludG8gdGhlIHRpbWVzdGFtcFxuICB0byBndWFyYW50ZWUgY29ycmVjdCBleGVjdXRpb24gb3JkZXIgb2YgZGVsYXllZCBqb2JzXG4gICh1cCB0byA0MDk2IGpvYnMgcGVyIGdpdmVuIHRpbWVzdGFtcCBvciA0MDk2IGpvYnMgYXBhcnQgcGVyIHRpbWVzdGFtcClcbiAgV0FSTklORzogSm9icyB0aGF0IGFyZSBzbyBmYXIgYXBhcnQgdGhhdCB0aGV5IHdyYXAgYXJvdW5kIHdpbGwgY2F1c2UgRklGTyB0byBmYWlsXG5dXVxubG9jYWwgZnVuY3Rpb24gZ2V0RGVsYXllZFNjb3JlKGRlbGF5ZWRLZXksIHRpbWVzdGFtcCwgZGVsYXkpXG4gIGxvY2FsIGRlbGF5ZWRUaW1lc3RhbXAgPSAoZGVsYXkgPiAwIGFuZCAodG9udW1iZXIodGltZXN0YW1wKSArIGRlbGF5KSkgb3IgdG9udW1iZXIodGltZXN0YW1wKVxuICBsb2NhbCBtaW5TY29yZSA9IGRlbGF5ZWRUaW1lc3RhbXAgKiAweDEwMDBcbiAgbG9jYWwgbWF4U2NvcmUgPSAoZGVsYXllZFRpbWVzdGFtcCArIDEgKSAqIDB4MTAwMCAtIDFcbiAgbG9jYWwgcmVzdWx0ID0gcmNhbGwoXCJaUkVWUkFOR0VCWVNDT1JFXCIsIGRlbGF5ZWRLZXksIG1heFNjb3JlLFxuICAgIG1pblNjb3JlLCBcIldJVEhTQ09SRVNcIixcIkxJTUlUXCIsIDAsIDEpXG4gIGlmICNyZXN1bHQgdGhlblxuICAgIGxvY2FsIGN1cnJlbnRNYXhTY29yZSA9IHRvbnVtYmVyKHJlc3VsdFsyXSlcbiAgICBpZiBjdXJyZW50TWF4U2NvcmUgfj0gbmlsIHRoZW5cbiAgICAgIGlmIGN1cnJlbnRNYXhTY29yZSA+PSBtYXhTY29yZSB0aGVuXG4gICAgICAgIHJldHVybiBtYXhTY29yZSwgZGVsYXllZFRpbWVzdGFtcFxuICAgICAgZWxzZVxuICAgICAgICByZXR1cm4gY3VycmVudE1heFNjb3JlICsgMSwgZGVsYXllZFRpbWVzdGFtcFxuICAgICAgZW5kXG4gICAgZW5kXG4gIGVuZFxuICByZXR1cm4gbWluU2NvcmUsIGRlbGF5ZWRUaW1lc3RhbXBcbmVuZFxubG9jYWwgZnVuY3Rpb24gYWRkRGVsYXllZEpvYihqb2JJZCwgZGVsYXllZEtleSwgZXZlbnRzS2V5LCB0aW1lc3RhbXAsXG4gIG1heEV2ZW50cywgbWFya2VyS2V5LCBkZWxheSlcbiAgbG9jYWwgc2NvcmUsIGRlbGF5ZWRUaW1lc3RhbXAgPSBnZXREZWxheWVkU2NvcmUoZGVsYXllZEtleSwgdGltZXN0YW1wLCB0b251bWJlcihkZWxheSkpXG4gIHJjYWxsKFwiWkFERFwiLCBkZWxheWVkS2V5LCBzY29yZSwgam9iSWQpXG4gIHJjYWxsKFwiWEFERFwiLCBldmVudHNLZXksIFwiTUFYTEVOXCIsIFwiflwiLCBtYXhFdmVudHMsIFwiKlwiLCBcImV2ZW50XCIsIFwiZGVsYXllZFwiLFxuICAgIFwiam9iSWRcIiwgam9iSWQsIFwiZGVsYXlcIiwgZGVsYXllZFRpbWVzdGFtcClcbiAgLS0gbWFyayB0aGF0IGEgZGVsYXllZCBqb2IgaXMgYXZhaWxhYmxlXG4gIGFkZERlbGF5TWFya2VySWZOZWVkZWQobWFya2VyS2V5LCBkZWxheWVkS2V5KVxuZW5kXG4tLVtbXG4gIEZ1bmN0aW9uIHRvIGFkZCBqb2IgY29uc2lkZXJpbmcgcHJpb3JpdHkuXG5dXVxuLS0gSW5jbHVkZXNcbi0tW1tcbiAgQWRkIG1hcmtlciBpZiBuZWVkZWQgd2hlbiBhIGpvYiBpcyBhdmFpbGFibGUuXG5dXVxubG9jYWwgZnVuY3Rpb24gYWRkQmFzZU1hcmtlcklmTmVlZGVkKG1hcmtlcktleSwgaXNQYXVzZWRPck1heGVkKVxuICBpZiBub3QgaXNQYXVzZWRPck1heGVkIHRoZW5cbiAgICByY2FsbChcIlpBRERcIiwgbWFya2VyS2V5LCAwLCBcIjBcIilcbiAgZW5kICBcbmVuZFxuLS1bW1xuICBGdW5jdGlvbiB0byBnZXQgcHJpb3JpdHkgc2NvcmUuXG5dXVxubG9jYWwgZnVuY3Rpb24gZ2V0UHJpb3JpdHlTY29yZShwcmlvcml0eSwgcHJpb3JpdHlDb3VudGVyS2V5KVxuICBsb2NhbCBwcmlvQ291bnRlciA9IHJjYWxsKFwiSU5DUlwiLCBwcmlvcml0eUNvdW50ZXJLZXkpXG4gIHJldHVybiBwcmlvcml0eSAqIDB4MTAwMDAwMDAwICsgcHJpb0NvdW50ZXIgJSAweDEwMDAwMDAwMFxuZW5kXG5sb2NhbCBmdW5jdGlvbiBhZGRKb2JXaXRoUHJpb3JpdHkobWFya2VyS2V5LCBwcmlvcml0aXplZEtleSwgcHJpb3JpdHksIGpvYklkLCBwcmlvcml0eUNvdW50ZXJLZXksXG4gIGlzUGF1c2VkT3JNYXhlZClcbiAgbG9jYWwgc2NvcmUgPSBnZXRQcmlvcml0eVNjb3JlKHByaW9yaXR5LCBwcmlvcml0eUNvdW50ZXJLZXkpXG4gIHJjYWxsKFwiWkFERFwiLCBwcmlvcml0aXplZEtleSwgc2NvcmUsIGpvYklkKVxuICBhZGRCYXNlTWFya2VySWZOZWVkZWQobWFya2VyS2V5LCBpc1BhdXNlZE9yTWF4ZWQpXG5lbmRcbi0tW1tcbiAgRnVuY3Rpb24gdG8gY2hlY2sgZm9yIHRoZSBtZXRhLnBhdXNlZCBrZXkgdG8gZGVjaWRlIGlmIHdlIGFyZSBwYXVzZWQgb3Igbm90XG4gIChzaW5jZSBhbiBlbXB0eSBsaXN0IGFuZCAhRVhJU1RTIGFyZSBub3QgcmVhbGx5IHRoZSBzYW1lKS5cbl1dXG5sb2NhbCBmdW5jdGlvbiBpc1F1ZXVlUGF1c2VkKHF1ZXVlTWV0YUtleSlcbiAgcmV0dXJuIHJjYWxsKFwiSEVYSVNUU1wiLCBxdWV1ZU1ldGFLZXksIFwicGF1c2VkXCIpID09IDFcbmVuZFxuLS1bW1xuICBGdW5jdGlvbiB0byBzdG9yZSBhIGpvYlxuXV1cbmxvY2FsIGZ1bmN0aW9uIHN0b3JlSm9iKGV2ZW50c0tleSwgam9iSWRLZXksIGpvYklkLCBuYW1lLCBkYXRhLCBvcHRzLCB0aW1lc3RhbXAsXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnRLZXksIHBhcmVudERhdGEsIHJlcGVhdEpvYktleSlcbiAgICBsb2NhbCBqc29uT3B0cyA9IGNqc29uLmVuY29kZShvcHRzKVxuICAgIGxvY2FsIGRlbGF5ID0gb3B0c1snZGVsYXknXSBvciAwXG4gICAgbG9jYWwgcHJpb3JpdHkgPSBvcHRzWydwcmlvcml0eSddIG9yIDBcbiAgICBsb2NhbCBkZWJvdW5jZUlkID0gb3B0c1snZGUnXSBhbmQgb3B0c1snZGUnXVsnaWQnXVxuICAgIGxvY2FsIG9wdGlvbmFsVmFsdWVzID0ge31cbiAgICBpZiBwYXJlbnRLZXkgfj0gbmlsIHRoZW5cbiAgICAgICAgdGFibGUuaW5zZXJ0KG9wdGlvbmFsVmFsdWVzLCBcInBhcmVudEtleVwiKVxuICAgICAgICB0YWJsZS5pbnNlcnQob3B0aW9uYWxWYWx1ZXMsIHBhcmVudEtleSlcbiAgICAgICAgdGFibGUuaW5zZXJ0KG9wdGlvbmFsVmFsdWVzLCBcInBhcmVudFwiKVxuICAgICAgICB0YWJsZS5pbnNlcnQob3B0aW9uYWxWYWx1ZXMsIHBhcmVudERhdGEpXG4gICAgZW5kXG4gICAgaWYgcmVwZWF0Sm9iS2V5IHRoZW5cbiAgICAgICAgdGFibGUuaW5zZXJ0KG9wdGlvbmFsVmFsdWVzLCBcInJqa1wiKVxuICAgICAgICB0YWJsZS5pbnNlcnQob3B0aW9uYWxWYWx1ZXMsIHJlcGVhdEpvYktleSlcbiAgICBlbmRcbiAgICBpZiBkZWJvdW5jZUlkIHRoZW5cbiAgICAgICAgdGFibGUuaW5zZXJ0KG9wdGlvbmFsVmFsdWVzLCBcImRlaWRcIilcbiAgICAgICAgdGFibGUuaW5zZXJ0KG9wdGlvbmFsVmFsdWVzLCBkZWJvdW5jZUlkKVxuICAgIGVuZFxuICAgIHJjYWxsKFwiSE1TRVRcIiwgam9iSWRLZXksIFwibmFtZVwiLCBuYW1lLCBcImRhdGFcIiwgZGF0YSwgXCJvcHRzXCIsIGpzb25PcHRzLFxuICAgICAgICAgIFwidGltZXN0YW1wXCIsIHRpbWVzdGFtcCwgXCJkZWxheVwiLCBkZWxheSwgXCJwcmlvcml0eVwiLCBwcmlvcml0eSxcbiAgICAgICAgICB1bnBhY2sob3B0aW9uYWxWYWx1ZXMpKVxuICAgIHJjYWxsKFwiWEFERFwiLCBldmVudHNLZXksIFwiKlwiLCBcImV2ZW50XCIsIFwiYWRkZWRcIiwgXCJqb2JJZFwiLCBqb2JJZCwgXCJuYW1lXCIsIG5hbWUpXG4gICAgcmV0dXJuIGRlbGF5LCBwcmlvcml0eVxuZW5kXG4tLVtbXG4gIEZ1bmN0aW9uIHRvIGNoZWNrIGZvciB0aGUgbWV0YS5wYXVzZWQga2V5IHRvIGRlY2lkZSBpZiB3ZSBhcmUgcGF1c2VkIG9yIG5vdFxuICAoc2luY2UgYW4gZW1wdHkgbGlzdCBhbmQgIUVYSVNUUyBhcmUgbm90IHJlYWxseSB0aGUgc2FtZSkuXG5dXVxubG9jYWwgZnVuY3Rpb24gZ2V0VGFyZ2V0UXVldWVMaXN0KHF1ZXVlTWV0YUtleSwgYWN0aXZlS2V5LCB3YWl0S2V5LCBwYXVzZWRLZXkpXG4gIGxvY2FsIHF1ZXVlQXR0cmlidXRlcyA9IHJjYWxsKFwiSE1HRVRcIiwgcXVldWVNZXRhS2V5LCBcInBhdXNlZFwiLCBcImNvbmN1cnJlbmN5XCIsIFwibWF4XCIsIFwiZHVyYXRpb25cIilcbiAgaWYgcXVldWVBdHRyaWJ1dGVzWzFdIHRoZW5cbiAgICByZXR1cm4gcGF1c2VkS2V5LCB0cnVlLCBxdWV1ZUF0dHJpYnV0ZXNbM10sIHF1ZXVlQXR0cmlidXRlc1s0XVxuICBlbHNlXG4gICAgaWYgcXVldWVBdHRyaWJ1dGVzWzJdIHRoZW5cbiAgICAgIGxvY2FsIGFjdGl2ZUNvdW50ID0gcmNhbGwoXCJMTEVOXCIsIGFjdGl2ZUtleSlcbiAgICAgIGlmIGFjdGl2ZUNvdW50ID49IHRvbnVtYmVyKHF1ZXVlQXR0cmlidXRlc1syXSkgdGhlblxuICAgICAgICByZXR1cm4gd2FpdEtleSwgdHJ1ZSwgcXVldWVBdHRyaWJ1dGVzWzNdLCBxdWV1ZUF0dHJpYnV0ZXNbNF1cbiAgICAgIGVsc2VcbiAgICAgICAgcmV0dXJuIHdhaXRLZXksIGZhbHNlLCBxdWV1ZUF0dHJpYnV0ZXNbM10sIHF1ZXVlQXR0cmlidXRlc1s0XVxuICAgICAgZW5kXG4gICAgZW5kXG4gIGVuZFxuICByZXR1cm4gd2FpdEtleSwgZmFsc2UsIHF1ZXVlQXR0cmlidXRlc1szXSwgcXVldWVBdHRyaWJ1dGVzWzRdXG5lbmRcbi0tW1tcbiAgRnVuY3Rpb24gdG8gYWRkIGpvYiBpbiB0YXJnZXQgbGlzdCBhbmQgYWRkIG1hcmtlciBpZiBuZWVkZWQuXG5dXVxuLS0gSW5jbHVkZXNcbmxvY2FsIGZ1bmN0aW9uIGFkZEpvYkluVGFyZ2V0TGlzdCh0YXJnZXRLZXksIG1hcmtlcktleSwgcHVzaENtZCwgaXNQYXVzZWRPck1heGVkLCBqb2JJZClcbiAgcmNhbGwocHVzaENtZCwgdGFyZ2V0S2V5LCBqb2JJZClcbiAgYWRkQmFzZU1hcmtlcklmTmVlZGVkKG1hcmtlcktleSwgaXNQYXVzZWRPck1heGVkKVxuZW5kXG5sb2NhbCBmdW5jdGlvbiBhZGRKb2JGcm9tU2NoZWR1bGVyKGpvYktleSwgam9iSWQsIG9wdHMsIHdhaXRLZXksIHBhdXNlZEtleSwgYWN0aXZlS2V5LCBtZXRhS2V5LCBcbiAgcHJpb3JpdGl6ZWRLZXksIHByaW9yaXR5Q291bnRlciwgZGVsYXllZEtleSwgbWFya2VyS2V5LCBldmVudHNLZXksIG5hbWUsIG1heEV2ZW50cywgdGltZXN0YW1wLFxuICBkYXRhLCBqb2JTY2hlZHVsZXJJZCwgcmVwZWF0RGVsYXkpXG4gIG9wdHNbJ2RlbGF5J10gPSByZXBlYXREZWxheVxuICBvcHRzWydqb2JJZCddID0gam9iSWRcbiAgbG9jYWwgZGVsYXksIHByaW9yaXR5ID0gc3RvcmVKb2IoZXZlbnRzS2V5LCBqb2JLZXksIGpvYklkLCBuYW1lLCBkYXRhLFxuICAgIG9wdHMsIHRpbWVzdGFtcCwgbmlsLCBuaWwsIGpvYlNjaGVkdWxlcklkKVxuICBpZiBkZWxheSB+PSAwIHRoZW5cbiAgICBhZGREZWxheWVkSm9iKGpvYklkLCBkZWxheWVkS2V5LCBldmVudHNLZXksIHRpbWVzdGFtcCwgbWF4RXZlbnRzLCBtYXJrZXJLZXksIGRlbGF5KVxuICBlbHNlXG4gICAgbG9jYWwgdGFyZ2V0LCBpc1BhdXNlZE9yTWF4ZWQgPSBnZXRUYXJnZXRRdWV1ZUxpc3QobWV0YUtleSwgYWN0aXZlS2V5LCB3YWl0S2V5LCBwYXVzZWRLZXkpXG4gICAgLS0gU3RhbmRhcmQgb3IgcHJpb3JpdHkgYWRkXG4gICAgaWYgcHJpb3JpdHkgPT0gMCB0aGVuXG4gICAgICBsb2NhbCBwdXNoQ21kID0gb3B0c1snbGlmbyddIGFuZCAnUlBVU0gnIG9yICdMUFVTSCdcbiAgICAgIGFkZEpvYkluVGFyZ2V0TGlzdCh0YXJnZXQsIG1hcmtlcktleSwgcHVzaENtZCwgaXNQYXVzZWRPck1heGVkLCBqb2JJZClcbiAgICBlbHNlXG4gICAgICAtLSBQcmlvcml0eSBhZGRcbiAgICAgIGFkZEpvYldpdGhQcmlvcml0eShtYXJrZXJLZXksIHByaW9yaXRpemVkS2V5LCBwcmlvcml0eSwgam9iSWQsIHByaW9yaXR5Q291bnRlciwgaXNQYXVzZWRPck1heGVkKVxuICAgIGVuZFxuICAgIC0tIEVtaXQgd2FpdGluZyBldmVudFxuICAgIHJjYWxsKFwiWEFERFwiLCBldmVudHNLZXksIFwiTUFYTEVOXCIsIFwiflwiLCBtYXhFdmVudHMsICBcIipcIiwgXCJldmVudFwiLCBcIndhaXRpbmdcIiwgXCJqb2JJZFwiLCBqb2JJZClcbiAgZW5kXG5lbmRcbi0tW1tcbiAgRnVuY3Rpb24gdG8gZ2V0IG1heCBldmVudHMgdmFsdWUgb3Igc2V0IGJ5IGRlZmF1bHQgMTAwMDAuXG5dXVxubG9jYWwgZnVuY3Rpb24gZ2V0T3JTZXRNYXhFdmVudHMobWV0YUtleSlcbiAgbG9jYWwgbWF4RXZlbnRzID0gcmNhbGwoXCJIR0VUXCIsIG1ldGFLZXksIFwib3B0cy5tYXhMZW5FdmVudHNcIilcbiAgaWYgbm90IG1heEV2ZW50cyB0aGVuXG4gICAgbWF4RXZlbnRzID0gMTAwMDBcbiAgICByY2FsbChcIkhTRVRcIiwgbWV0YUtleSwgXCJvcHRzLm1heExlbkV2ZW50c1wiLCBtYXhFdmVudHMpXG4gIGVuZFxuICByZXR1cm4gbWF4RXZlbnRzXG5lbmRcbi0tW1tcbiAgRnVuY3Rpb24gdG8gcmVtb3ZlIGpvYi5cbl1dXG4tLSBJbmNsdWRlc1xuLS1bW1xuICBGdW5jdGlvbiB0byByZW1vdmUgZGVkdXBsaWNhdGlvbiBrZXkgaWYgbmVlZGVkXG4gIHdoZW4gYSBqb2IgaXMgYmVpbmcgcmVtb3ZlZC5cbl1dXG5sb2NhbCBmdW5jdGlvbiByZW1vdmVEZWR1cGxpY2F0aW9uS2V5SWZOZWVkZWRPblJlbW92YWwocHJlZml4S2V5LFxuICBqb2JLZXksIGpvYklkKVxuICBsb2NhbCBkZWR1cGxpY2F0aW9uSWQgPSByY2FsbChcIkhHRVRcIiwgam9iS2V5LCBcImRlaWRcIilcbiAgaWYgZGVkdXBsaWNhdGlvbklkIHRoZW5cbiAgICBsb2NhbCBkZWR1cGxpY2F0aW9uS2V5ID0gcHJlZml4S2V5IC4uIFwiZGU6XCIgLi4gZGVkdXBsaWNhdGlvbklkXG4gICAgbG9jYWwgY3VycmVudEpvYklkID0gcmNhbGwoJ0dFVCcsIGRlZHVwbGljYXRpb25LZXkpXG4gICAgaWYgY3VycmVudEpvYklkIGFuZCBjdXJyZW50Sm9iSWQgPT0gam9iSWQgdGhlblxuICAgICAgcmV0dXJuIHJjYWxsKFwiREVMXCIsIGRlZHVwbGljYXRpb25LZXkpXG4gICAgZW5kXG4gIGVuZFxuZW5kXG4tLVtbXG4gIEZ1bmN0aW9uIHRvIHJlbW92ZSBqb2Iga2V5cy5cbl1dXG5sb2NhbCBmdW5jdGlvbiByZW1vdmVKb2JLZXlzKGpvYktleSlcbiAgcmV0dXJuIHJjYWxsKFwiREVMXCIsIGpvYktleSwgam9iS2V5IC4uICc6bG9ncycsIGpvYktleSAuLiAnOmRlcGVuZGVuY2llcycsXG4gICAgam9iS2V5IC4uICc6cHJvY2Vzc2VkJywgam9iS2V5IC4uICc6ZmFpbGVkJywgam9iS2V5IC4uICc6dW5zdWNjZXNzZnVsJylcbmVuZFxuLS1bW1xuICBDaGVjayBpZiB0aGlzIGpvYiBoYXMgYSBwYXJlbnQuIElmIHNvIHdlIHdpbGwganVzdCByZW1vdmUgaXQgZnJvbVxuICB0aGUgcGFyZW50IGNoaWxkIGxpc3QsIGJ1dCBpZiBpdCBpcyB0aGUgbGFzdCBjaGlsZCB3ZSBzaG91bGQgbW92ZSB0aGUgcGFyZW50IHRvIFwid2FpdC9wYXVzZWRcIlxuICB3aGljaCByZXF1aXJlcyBjb2RlIGZyb20gXCJtb3ZlVG9GaW5pc2hlZFwiXG5dXVxuLS0gSW5jbHVkZXNcbi0tW1tcbiAgRnVuY3Rpb25zIHRvIGRlc3RydWN0dXJlIGpvYiBrZXkuXG4gIEp1c3QgYSBiaXQgb2Ygd2FybmluZywgdGhlc2UgZnVuY3Rpb25zIG1heSBiZSBhIGJpdCBzbG93IGFuZCBhZmZlY3QgcGVyZm9ybWFuY2Ugc2lnbmlmaWNhbnRseS5cbl1dXG5sb2NhbCBnZXRKb2JJZEZyb21LZXkgPSBmdW5jdGlvbiAoam9iS2V5KVxuICByZXR1cm4gc3RyaW5nLm1hdGNoKGpvYktleSwgXCIuKjooLiopXCIpXG5lbmRcbmxvY2FsIGdldEpvYktleVByZWZpeCA9IGZ1bmN0aW9uIChqb2JLZXksIGpvYklkKVxuICByZXR1cm4gc3RyaW5nLnN1Yihqb2JLZXksIDAsICNqb2JLZXkgLSAjam9iSWQpXG5lbmRcbmxvY2FsIGZ1bmN0aW9uIF9tb3ZlUGFyZW50VG9XYWl0KHBhcmVudFByZWZpeCwgcGFyZW50SWQsIGVtaXRFdmVudClcbiAgbG9jYWwgcGFyZW50VGFyZ2V0LCBpc1BhdXNlZE9yTWF4ZWQgPSBnZXRUYXJnZXRRdWV1ZUxpc3QocGFyZW50UHJlZml4IC4uIFwibWV0YVwiLCBwYXJlbnRQcmVmaXggLi4gXCJhY3RpdmVcIixcbiAgICBwYXJlbnRQcmVmaXggLi4gXCJ3YWl0XCIsIHBhcmVudFByZWZpeCAuLiBcInBhdXNlZFwiKVxuICBhZGRKb2JJblRhcmdldExpc3QocGFyZW50VGFyZ2V0LCBwYXJlbnRQcmVmaXggLi4gXCJtYXJrZXJcIiwgXCJSUFVTSFwiLCBpc1BhdXNlZE9yTWF4ZWQsIHBhcmVudElkKVxuICBpZiBlbWl0RXZlbnQgdGhlblxuICAgIGxvY2FsIHBhcmVudEV2ZW50U3RyZWFtID0gcGFyZW50UHJlZml4IC4uIFwiZXZlbnRzXCJcbiAgICByY2FsbChcIlhBRERcIiwgcGFyZW50RXZlbnRTdHJlYW0sIFwiKlwiLCBcImV2ZW50XCIsIFwid2FpdGluZ1wiLCBcImpvYklkXCIsIHBhcmVudElkLCBcInByZXZcIiwgXCJ3YWl0aW5nLWNoaWxkcmVuXCIpXG4gIGVuZFxuZW5kXG5sb2NhbCBmdW5jdGlvbiByZW1vdmVQYXJlbnREZXBlbmRlbmN5S2V5KGpvYktleSwgaGFyZCwgcGFyZW50S2V5LCBiYXNlS2V5LCBkZWJvdW5jZUlkKVxuICBpZiBwYXJlbnRLZXkgdGhlblxuICAgIGxvY2FsIHBhcmVudERlcGVuZGVuY2llc0tleSA9IHBhcmVudEtleSAuLiBcIjpkZXBlbmRlbmNpZXNcIlxuICAgIGxvY2FsIHJlc3VsdCA9IHJjYWxsKFwiU1JFTVwiLCBwYXJlbnREZXBlbmRlbmNpZXNLZXksIGpvYktleSlcbiAgICBpZiByZXN1bHQgPiAwIHRoZW5cbiAgICAgIGxvY2FsIHBlbmRpbmdEZXBlbmRlbmNpZXMgPSByY2FsbChcIlNDQVJEXCIsIHBhcmVudERlcGVuZGVuY2llc0tleSlcbiAgICAgIGlmIHBlbmRpbmdEZXBlbmRlbmNpZXMgPT0gMCB0aGVuXG4gICAgICAgIGxvY2FsIHBhcmVudElkID0gZ2V0Sm9iSWRGcm9tS2V5KHBhcmVudEtleSlcbiAgICAgICAgbG9jYWwgcGFyZW50UHJlZml4ID0gZ2V0Sm9iS2V5UHJlZml4KHBhcmVudEtleSwgcGFyZW50SWQpXG4gICAgICAgIGxvY2FsIG51bVJlbW92ZWRFbGVtZW50cyA9IHJjYWxsKFwiWlJFTVwiLCBwYXJlbnRQcmVmaXggLi4gXCJ3YWl0aW5nLWNoaWxkcmVuXCIsIHBhcmVudElkKVxuICAgICAgICBpZiBudW1SZW1vdmVkRWxlbWVudHMgPT0gMSB0aGVuXG4gICAgICAgICAgaWYgaGFyZCB0aGVuIC0tIHJlbW92ZSBwYXJlbnQgaW4gc2FtZSBxdWV1ZVxuICAgICAgICAgICAgaWYgcGFyZW50UHJlZml4ID09IGJhc2VLZXkgdGhlblxuICAgICAgICAgICAgICByZW1vdmVQYXJlbnREZXBlbmRlbmN5S2V5KHBhcmVudEtleSwgaGFyZCwgbmlsLCBiYXNlS2V5LCBuaWwpXG4gICAgICAgICAgICAgIHJlbW92ZUpvYktleXMocGFyZW50S2V5KVxuICAgICAgICAgICAgICBpZiBkZWJvdW5jZUlkIHRoZW5cbiAgICAgICAgICAgICAgICByY2FsbChcIkRFTFwiLCBwYXJlbnRQcmVmaXggLi4gXCJkZTpcIiAuLiBkZWJvdW5jZUlkKVxuICAgICAgICAgICAgICBlbmRcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgX21vdmVQYXJlbnRUb1dhaXQocGFyZW50UHJlZml4LCBwYXJlbnRJZClcbiAgICAgICAgICAgIGVuZFxuICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgIF9tb3ZlUGFyZW50VG9XYWl0KHBhcmVudFByZWZpeCwgcGFyZW50SWQsIHRydWUpXG4gICAgICAgICAgZW5kXG4gICAgICAgIGVuZFxuICAgICAgZW5kXG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIGVuZFxuICBlbHNlXG4gICAgbG9jYWwgcGFyZW50QXR0cmlidXRlcyA9IHJjYWxsKFwiSE1HRVRcIiwgam9iS2V5LCBcInBhcmVudEtleVwiLCBcImRlaWRcIilcbiAgICBsb2NhbCBtaXNzZWRQYXJlbnRLZXkgPSBwYXJlbnRBdHRyaWJ1dGVzWzFdXG4gICAgaWYoICh0eXBlKG1pc3NlZFBhcmVudEtleSkgPT0gXCJzdHJpbmdcIikgYW5kIG1pc3NlZFBhcmVudEtleSB+PSBcIlwiXG4gICAgICBhbmQgKHJjYWxsKFwiRVhJU1RTXCIsIG1pc3NlZFBhcmVudEtleSkgPT0gMSkpIHRoZW5cbiAgICAgIGxvY2FsIHBhcmVudERlcGVuZGVuY2llc0tleSA9IG1pc3NlZFBhcmVudEtleSAuLiBcIjpkZXBlbmRlbmNpZXNcIlxuICAgICAgbG9jYWwgcmVzdWx0ID0gcmNhbGwoXCJTUkVNXCIsIHBhcmVudERlcGVuZGVuY2llc0tleSwgam9iS2V5KVxuICAgICAgaWYgcmVzdWx0ID4gMCB0aGVuXG4gICAgICAgIGxvY2FsIHBlbmRpbmdEZXBlbmRlbmNpZXMgPSByY2FsbChcIlNDQVJEXCIsIHBhcmVudERlcGVuZGVuY2llc0tleSlcbiAgICAgICAgaWYgcGVuZGluZ0RlcGVuZGVuY2llcyA9PSAwIHRoZW5cbiAgICAgICAgICBsb2NhbCBwYXJlbnRJZCA9IGdldEpvYklkRnJvbUtleShtaXNzZWRQYXJlbnRLZXkpXG4gICAgICAgICAgbG9jYWwgcGFyZW50UHJlZml4ID0gZ2V0Sm9iS2V5UHJlZml4KG1pc3NlZFBhcmVudEtleSwgcGFyZW50SWQpXG4gICAgICAgICAgbG9jYWwgbnVtUmVtb3ZlZEVsZW1lbnRzID0gcmNhbGwoXCJaUkVNXCIsIHBhcmVudFByZWZpeCAuLiBcIndhaXRpbmctY2hpbGRyZW5cIiwgcGFyZW50SWQpXG4gICAgICAgICAgaWYgbnVtUmVtb3ZlZEVsZW1lbnRzID09IDEgdGhlblxuICAgICAgICAgICAgaWYgaGFyZCB0aGVuXG4gICAgICAgICAgICAgIGlmIHBhcmVudFByZWZpeCA9PSBiYXNlS2V5IHRoZW5cbiAgICAgICAgICAgICAgICByZW1vdmVQYXJlbnREZXBlbmRlbmN5S2V5KG1pc3NlZFBhcmVudEtleSwgaGFyZCwgbmlsLCBiYXNlS2V5LCBuaWwpXG4gICAgICAgICAgICAgICAgcmVtb3ZlSm9iS2V5cyhtaXNzZWRQYXJlbnRLZXkpXG4gICAgICAgICAgICAgICAgaWYgcGFyZW50QXR0cmlidXRlc1syXSB0aGVuXG4gICAgICAgICAgICAgICAgICByY2FsbChcIkRFTFwiLCBwYXJlbnRQcmVmaXggLi4gXCJkZTpcIiAuLiBwYXJlbnRBdHRyaWJ1dGVzWzJdKVxuICAgICAgICAgICAgICAgIGVuZFxuICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgX21vdmVQYXJlbnRUb1dhaXQocGFyZW50UHJlZml4LCBwYXJlbnRJZClcbiAgICAgICAgICAgICAgZW5kXG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgIF9tb3ZlUGFyZW50VG9XYWl0KHBhcmVudFByZWZpeCwgcGFyZW50SWQsIHRydWUpXG4gICAgICAgICAgICBlbmRcbiAgICAgICAgICBlbmRcbiAgICAgICAgZW5kXG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgICBlbmRcbiAgICBlbmRcbiAgZW5kXG4gIHJldHVybiBmYWxzZVxuZW5kXG5sb2NhbCBmdW5jdGlvbiByZW1vdmVKb2Ioam9iSWQsIGhhcmQsIGJhc2VLZXksIHNob3VsZFJlbW92ZURlZHVwbGljYXRpb25LZXkpXG4gIGxvY2FsIGpvYktleSA9IGJhc2VLZXkgLi4gam9iSWRcbiAgcmVtb3ZlUGFyZW50RGVwZW5kZW5jeUtleShqb2JLZXksIGhhcmQsIG5pbCwgYmFzZUtleSlcbiAgaWYgc2hvdWxkUmVtb3ZlRGVkdXBsaWNhdGlvbktleSB0aGVuXG4gICAgcmVtb3ZlRGVkdXBsaWNhdGlvbktleUlmTmVlZGVkT25SZW1vdmFsKGJhc2VLZXksIGpvYktleSwgam9iSWQpXG4gIGVuZFxuICByZW1vdmVKb2JLZXlzKGpvYktleSlcbmVuZFxuLS1bW1xuICBGdW5jdGlvbiB0byBzdG9yZSBhIGpvYiBzY2hlZHVsZXJcbl1dXG5sb2NhbCBmdW5jdGlvbiBzdG9yZUpvYlNjaGVkdWxlcihzY2hlZHVsZXJJZCwgc2NoZWR1bGVyS2V5LCByZXBlYXRLZXksIG5leHRNaWxsaXMsIG9wdHMsXG4gIHRlbXBsYXRlRGF0YSwgdGVtcGxhdGVPcHRzKVxuICByY2FsbChcIlpBRERcIiwgcmVwZWF0S2V5LCBuZXh0TWlsbGlzLCBzY2hlZHVsZXJJZClcbiAgbG9jYWwgb3B0aW9uYWxWYWx1ZXMgPSB7fVxuICBpZiBvcHRzWyd0eiddIHRoZW5cbiAgICB0YWJsZS5pbnNlcnQob3B0aW9uYWxWYWx1ZXMsIFwidHpcIilcbiAgICB0YWJsZS5pbnNlcnQob3B0aW9uYWxWYWx1ZXMsIG9wdHNbJ3R6J10pXG4gIGVuZFxuICBpZiBvcHRzWydsaW1pdCddIHRoZW5cbiAgICB0YWJsZS5pbnNlcnQob3B0aW9uYWxWYWx1ZXMsIFwibGltaXRcIilcbiAgICB0YWJsZS5pbnNlcnQob3B0aW9uYWxWYWx1ZXMsIG9wdHNbJ2xpbWl0J10pXG4gIGVuZFxuICBpZiBvcHRzWydwYXR0ZXJuJ10gdGhlblxuICAgIHRhYmxlLmluc2VydChvcHRpb25hbFZhbHVlcywgXCJwYXR0ZXJuXCIpXG4gICAgdGFibGUuaW5zZXJ0KG9wdGlvbmFsVmFsdWVzLCBvcHRzWydwYXR0ZXJuJ10pXG4gIGVuZFxuICBpZiBvcHRzWydzdGFydERhdGUnXSB0aGVuXG4gICAgdGFibGUuaW5zZXJ0KG9wdGlvbmFsVmFsdWVzLCBcInN0YXJ0RGF0ZVwiKVxuICAgIHRhYmxlLmluc2VydChvcHRpb25hbFZhbHVlcywgb3B0c1snc3RhcnREYXRlJ10pXG4gIGVuZFxuICBpZiBvcHRzWydlbmREYXRlJ10gdGhlblxuICAgIHRhYmxlLmluc2VydChvcHRpb25hbFZhbHVlcywgXCJlbmREYXRlXCIpXG4gICAgdGFibGUuaW5zZXJ0KG9wdGlvbmFsVmFsdWVzLCBvcHRzWydlbmREYXRlJ10pXG4gIGVuZFxuICBpZiBvcHRzWydldmVyeSddIHRoZW5cbiAgICB0YWJsZS5pbnNlcnQob3B0aW9uYWxWYWx1ZXMsIFwiZXZlcnlcIilcbiAgICB0YWJsZS5pbnNlcnQob3B0aW9uYWxWYWx1ZXMsIG9wdHNbJ2V2ZXJ5J10pXG4gIGVuZFxuICBpZiBvcHRzWydvZmZzZXQnXSB0aGVuXG4gICAgdGFibGUuaW5zZXJ0KG9wdGlvbmFsVmFsdWVzLCBcIm9mZnNldFwiKVxuICAgIHRhYmxlLmluc2VydChvcHRpb25hbFZhbHVlcywgb3B0c1snb2Zmc2V0J10pXG4gIGVsc2VcbiAgICBsb2NhbCBvZmZzZXQgPSByY2FsbChcIkhHRVRcIiwgc2NoZWR1bGVyS2V5LCBcIm9mZnNldFwiKVxuICAgIGlmIG9mZnNldCB0aGVuXG4gICAgICB0YWJsZS5pbnNlcnQob3B0aW9uYWxWYWx1ZXMsIFwib2Zmc2V0XCIpXG4gICAgICB0YWJsZS5pbnNlcnQob3B0aW9uYWxWYWx1ZXMsIHRvbnVtYmVyKG9mZnNldCkpXG4gICAgZW5kXG4gIGVuZFxuICBsb2NhbCBqc29uVGVtcGxhdGVPcHRzID0gY2pzb24uZW5jb2RlKHRlbXBsYXRlT3B0cylcbiAgaWYganNvblRlbXBsYXRlT3B0cyBhbmQganNvblRlbXBsYXRlT3B0cyB+PSAne30nIHRoZW5cbiAgICB0YWJsZS5pbnNlcnQob3B0aW9uYWxWYWx1ZXMsIFwib3B0c1wiKVxuICAgIHRhYmxlLmluc2VydChvcHRpb25hbFZhbHVlcywganNvblRlbXBsYXRlT3B0cylcbiAgZW5kXG4gIGlmIHRlbXBsYXRlRGF0YSBhbmQgdGVtcGxhdGVEYXRhIH49ICd7fScgdGhlblxuICAgIHRhYmxlLmluc2VydChvcHRpb25hbFZhbHVlcywgXCJkYXRhXCIpXG4gICAgdGFibGUuaW5zZXJ0KG9wdGlvbmFsVmFsdWVzLCB0ZW1wbGF0ZURhdGEpXG4gIGVuZFxuICB0YWJsZS5pbnNlcnQob3B0aW9uYWxWYWx1ZXMsIFwiaWNcIilcbiAgdGFibGUuaW5zZXJ0KG9wdGlvbmFsVmFsdWVzLCByY2FsbChcIkhHRVRcIiwgc2NoZWR1bGVyS2V5LCBcImljXCIpIG9yIDEpXG4gIHJjYWxsKFwiREVMXCIsIHNjaGVkdWxlcktleSkgLS0gcmVtb3ZlIGFsbCBhdHRyaWJ1dGVzIGFuZCB0aGVuIHJlLWluc2VydCBuZXcgb25lc1xuICByY2FsbChcIkhNU0VUXCIsIHNjaGVkdWxlcktleSwgXCJuYW1lXCIsIG9wdHNbJ25hbWUnXSwgdW5wYWNrKG9wdGlvbmFsVmFsdWVzKSlcbmVuZFxubG9jYWwgZnVuY3Rpb24gZ2V0Sm9iU2NoZWR1bGVyRXZlcnlOZXh0TWlsbGlzKHByZXZNaWxsaXMsIGV2ZXJ5LCBub3csIG9mZnNldCwgc3RhcnREYXRlKVxuICAgIGxvY2FsIG5leHRNaWxsaXNcbiAgICBpZiBub3QgcHJldk1pbGxpcyB0aGVuXG4gICAgICAgIGlmIHN0YXJ0RGF0ZSB0aGVuXG4gICAgICAgICAgICAtLSBBc3N1bWluZyBzdGFydERhdGUgaXMgcGFzc2VkIGFzIG1pbGxpc2Vjb25kcyBmcm9tIEphdmFTY3JpcHRcbiAgICAgICAgICAgIG5leHRNaWxsaXMgPSB0b251bWJlcihzdGFydERhdGUpXG4gICAgICAgICAgICBuZXh0TWlsbGlzID0gbmV4dE1pbGxpcyA+IG5vdyBhbmQgbmV4dE1pbGxpcyBvciBub3dcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgbmV4dE1pbGxpcyA9IG5vd1xuICAgICAgICBlbmRcbiAgICBlbHNlXG4gICAgICAgIG5leHRNaWxsaXMgPSBwcmV2TWlsbGlzICsgZXZlcnlcbiAgICAgICAgLS0gY2hlY2sgaWYgd2UgbWF5IGhhdmUgbWlzc2VkIHNvbWUgaXRlcmF0aW9uc1xuICAgICAgICBpZiBuZXh0TWlsbGlzIDwgbm93IHRoZW5cbiAgICAgICAgICAgIG5leHRNaWxsaXMgPSBtYXRoLmZsb29yKG5vdyAvIGV2ZXJ5KSAqIGV2ZXJ5ICsgZXZlcnkgKyAob2Zmc2V0IG9yIDApXG4gICAgICAgIGVuZFxuICAgIGVuZFxuICAgIGlmIG5vdCBvZmZzZXQgb3Igb2Zmc2V0ID09IDAgdGhlblxuICAgICAgICBsb2NhbCB0aW1lU2xvdCA9IG1hdGguZmxvb3IobmV4dE1pbGxpcyAvIGV2ZXJ5KSAqIGV2ZXJ5O1xuICAgICAgICBvZmZzZXQgPSBuZXh0TWlsbGlzIC0gdGltZVNsb3Q7XG4gICAgZW5kXG4gICAgLS0gUmV0dXJuIGEgdHVwbGUgbmV4dE1pbGxpcywgb2Zmc2V0XG4gICAgcmV0dXJuIG1hdGguZmxvb3IobmV4dE1pbGxpcyksIG1hdGguZmxvb3Iob2Zmc2V0KVxuZW5kXG4tLSBJZiB3ZSBhcmUgb3ZlcnJpZGluZyBhIHJlcGVhdGFibGUgam9iIHdlIG11c3QgZGVsZXRlIHRoZSBkZWxheWVkIGpvYiBmb3Jcbi0tIHRoZSBuZXh0IGl0ZXJhdGlvbi5cbmxvY2FsIHNjaGVkdWxlcktleSA9IHJlcGVhdEtleSAuLiBcIjpcIiAuLiBqb2JTY2hlZHVsZXJJZFxubG9jYWwgbWF4RXZlbnRzID0gZ2V0T3JTZXRNYXhFdmVudHMobWV0YUtleSlcbmxvY2FsIHRlbXBsYXRlRGF0YSA9IEFSR1ZbNF1cbmxvY2FsIHByZXZNaWxsaXMgPSByY2FsbChcIlpTQ09SRVwiLCByZXBlYXRLZXksIGpvYlNjaGVkdWxlcklkKVxuaWYgcHJldk1pbGxpcyB0aGVuXG4gICAgcHJldk1pbGxpcyA9IHRvbnVtYmVyKHByZXZNaWxsaXMpXG5lbmRcbmxvY2FsIHNjaGVkdWxlck9wdHMgPSBjbXNncGFjay51bnBhY2soQVJHVlsyXSlcbmxvY2FsIGV2ZXJ5ID0gc2NoZWR1bGVyT3B0c1snZXZlcnknXVxuLS0gRm9yIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5IHdlIGFsc28gY2hlY2sgdGhlIG9mZnNldCBmcm9tIHRoZSBqb2IgaXRzZWxmLlxuLS0gY291bGQgYmUgcmVtb3ZlZCBpbiBmdXR1cmUgbWFqb3IgdmVyc2lvbnMuXG5sb2NhbCBqb2JPZmZzZXQgPSBqb2JPcHRzWydyZXBlYXQnXSBhbmQgam9iT3B0c1sncmVwZWF0J11bJ29mZnNldCddIG9yIDBcbmxvY2FsIG9mZnNldCA9IHNjaGVkdWxlck9wdHNbJ29mZnNldCddIG9yIGpvYk9mZnNldCBvciAwXG5sb2NhbCBuZXdPZmZzZXQgPSBvZmZzZXRcbmxvY2FsIHVwZGF0ZWRFdmVyeSA9IGZhbHNlXG5pZiBldmVyeSB0aGVuXG4gICAgLS0gaWYgd2UgY2hhbmdlZCB0aGUgJ2V2ZXJ5JyB2YWx1ZSB3ZSBuZWVkIHRvIHJlc2V0IG1pbGxpcyB0byBuaWxcbiAgICBsb2NhbCBtaWxsaXMgPSBwcmV2TWlsbGlzXG4gICAgaWYgcHJldk1pbGxpcyB0aGVuXG4gICAgICAgIGxvY2FsIHByZXZFdmVyeSA9IHRvbnVtYmVyKHJjYWxsKFwiSEdFVFwiLCBzY2hlZHVsZXJLZXksIFwiZXZlcnlcIikpXG4gICAgICAgIGlmIHByZXZFdmVyeSB+PSBldmVyeSB0aGVuXG4gICAgICAgICAgICBtaWxsaXMgPSBuaWxcbiAgICAgICAgICAgIHVwZGF0ZWRFdmVyeSA9IHRydWVcbiAgICAgICAgZW5kXG4gICAgZW5kXG4gICAgbG9jYWwgc3RhcnREYXRlID0gc2NoZWR1bGVyT3B0c1snc3RhcnREYXRlJ11cbiAgICBuZXh0TWlsbGlzLCBuZXdPZmZzZXQgPSBnZXRKb2JTY2hlZHVsZXJFdmVyeU5leHRNaWxsaXMobWlsbGlzLCBldmVyeSwgbm93LCBvZmZzZXQsIHN0YXJ0RGF0ZSlcbmVuZFxubG9jYWwgZnVuY3Rpb24gcmVtb3ZlSm9iRnJvbVNjaGVkdWxlcihwcmVmaXhLZXksIGRlbGF5ZWRLZXksIHByaW9yaXRpemVkS2V5LCB3YWl0S2V5LCBwYXVzZWRLZXksIGpvYklkLCBtZXRhS2V5LFxuICAgIGV2ZW50c0tleSlcbiAgICBpZiByY2FsbChcIlpTQ09SRVwiLCBkZWxheWVkS2V5LCBqb2JJZCkgdGhlblxuICAgICAgICByZW1vdmVKb2Ioam9iSWQsIHRydWUsIHByZWZpeEtleSwgdHJ1ZSAtLVtbcmVtb3ZlIGRlYm91bmNlIGtleV1dIClcbiAgICAgICAgcmNhbGwoXCJaUkVNXCIsIGRlbGF5ZWRLZXksIGpvYklkKVxuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgIGVsc2VpZiByY2FsbChcIlpTQ09SRVwiLCBwcmlvcml0aXplZEtleSwgam9iSWQpIHRoZW5cbiAgICAgICAgcmVtb3ZlSm9iKGpvYklkLCB0cnVlLCBwcmVmaXhLZXksIHRydWUgLS1bW3JlbW92ZSBkZWJvdW5jZSBrZXldXSApXG4gICAgICAgIHJjYWxsKFwiWlJFTVwiLCBwcmlvcml0aXplZEtleSwgam9iSWQpXG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgZWxzZVxuICAgICAgICBsb2NhbCBwYXVzZWRPcldhaXRLZXkgPSB3YWl0S2V5XG4gICAgICAgIGlmIGlzUXVldWVQYXVzZWQobWV0YUtleSkgdGhlblxuICAgICAgICAgICAgcGF1c2VkT3JXYWl0S2V5ID0gcGF1c2VkS2V5XG4gICAgICAgIGVuZFxuICAgICAgICBpZiByY2FsbChcIkxSRU1cIiwgcGF1c2VkT3JXYWl0S2V5LCAxLCBqb2JJZCkgPiAwIHRoZW5cbiAgICAgICAgICAgIHJlbW92ZUpvYihqb2JJZCwgdHJ1ZSwgcHJlZml4S2V5LCB0cnVlIC0tW1tyZW1vdmUgZGVib3VuY2Uga2V5XV0gKVxuICAgICAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgICAgZW5kXG4gICAgZW5kXG4gICAgcmV0dXJuIGZhbHNlXG5lbmRcbmxvY2FsIHJlbW92ZWRQcmV2Sm9iID0gZmFsc2VcbmlmIHByZXZNaWxsaXMgdGhlblxuICAgIGxvY2FsIGN1cnJlbnRKb2JJZCA9IFwicmVwZWF0OlwiIC4uIGpvYlNjaGVkdWxlcklkIC4uIFwiOlwiIC4uIHByZXZNaWxsaXNcbiAgICBsb2NhbCBjdXJyZW50Sm9iS2V5ID0gc2NoZWR1bGVyS2V5IC4uIFwiOlwiIC4uIHByZXZNaWxsaXNcbiAgICAtLSBJbiB0aGVvcnkgaXQgc2hvdWxkIGFsd2F5cyBleGlzdCB0aGUgY3VycmVudEpvYktleSBpZiB0aGVyZSBpcyBhIHByZXZNaWxsaXMgdW5sZXNzIHNvbWV0aGluZyBoYXNcbiAgICAtLSBnb25lIHJlYWxseSB3cm9uZy5cbiAgICBpZiByY2FsbChcIkVYSVNUU1wiLCBjdXJyZW50Sm9iS2V5KSA9PSAxIHRoZW5cbiAgICAgICAgcmVtb3ZlZFByZXZKb2IgPSByZW1vdmVKb2JGcm9tU2NoZWR1bGVyKHByZWZpeEtleSwgZGVsYXllZEtleSwgcHJpb3JpdGl6ZWRLZXksIHdhaXRLZXksIHBhdXNlZEtleSwgY3VycmVudEpvYklkLFxuICAgICAgICAgICAgbWV0YUtleSwgZXZlbnRzS2V5KVxuICAgIGVuZFxuZW5kXG5pZiByZW1vdmVkUHJldkpvYiB0aGVuXG4gICAgLS0gVGhlIGpvYnMgaGFzIGJlZW4gcmVtb3ZlZCBhbmQgd2Ugd2FudCB0byByZXBsYWNlIGl0LCBzbyBsZXRzIHVzZSB0aGUgc2FtZSBtaWxsaXMuXG4gICAgaWYgZXZlcnkgYW5kIG5vdCB1cGRhdGVkRXZlcnkgdGhlblxuICAgICAgICBuZXh0TWlsbGlzID0gcHJldk1pbGxpc1xuICAgIGVuZFxuZWxzZVxuICAgIC0tIFNwZWNpYWwgY2FzZSB3aGVyZSBubyBqb2Igd2FzIHJlbW92ZWQsIGFuZCB3ZSBuZWVkIHRvIGFkZCB0aGUgbmV4dCBpdGVyYXRpb24uXG4gICAgc2NoZWR1bGVyT3B0c1snb2Zmc2V0J10gPSBuZXdPZmZzZXRcbmVuZFxuLS0gQ2hlY2sgZm9yIGpvYiBJRCBjb2xsaXNpb24gd2l0aCBleGlzdGluZyBqb2JzIChpbiBhbnkgc3RhdGUpXG5sb2NhbCBqb2JJZCA9IFwicmVwZWF0OlwiIC4uIGpvYlNjaGVkdWxlcklkIC4uIFwiOlwiIC4uIG5leHRNaWxsaXNcbmxvY2FsIGpvYktleSA9IHByZWZpeEtleSAuLiBqb2JJZFxuLS0gSWYgdGhlcmUncyBhbHJlYWR5IGEgam9iIHdpdGggdGhpcyBJRCwgaW4gYSBzdGF0ZSBcbi0tIHRoYXQgaXMgbm90IHVwZGF0YWJsZSAoYWN0aXZlLCBjb21wbGV0ZWQsIGZhaWxlZCkgd2UgbXVzdCBcbi0tIGhhbmRsZSB0aGUgY29sbGlzaW9uXG5sb2NhbCBoYXNDb2xsaXNpb24gPSBmYWxzZVxuaWYgcmNhbGwoXCJFWElTVFNcIiwgam9iS2V5KSA9PSAxIHRoZW5cbiAgICBpZiBldmVyeSB0aGVuXG4gICAgICAgIC0tIEZvciAnZXZlcnknIGNhc2U6IHRyeSBuZXh0IHRpbWUgc2xvdCB0byBhdm9pZCBjb2xsaXNpb25cbiAgICAgICAgbG9jYWwgbmV4dFNsb3RNaWxsaXMgPSBuZXh0TWlsbGlzICsgZXZlcnlcbiAgICAgICAgbG9jYWwgbmV4dFNsb3RKb2JJZCA9IFwicmVwZWF0OlwiIC4uIGpvYlNjaGVkdWxlcklkIC4uIFwiOlwiIC4uIG5leHRTbG90TWlsbGlzXG4gICAgICAgIGxvY2FsIG5leHRTbG90Sm9iS2V5ID0gcHJlZml4S2V5IC4uIG5leHRTbG90Sm9iSWRcbiAgICAgICAgaWYgcmNhbGwoXCJFWElTVFNcIiwgbmV4dFNsb3RKb2JLZXkpID09IDAgdGhlblxuICAgICAgICAgICAgLS0gTmV4dCBzbG90IGlzIGZyZWUsIHVzZSBpdFxuICAgICAgICAgICAgbmV4dE1pbGxpcyA9IG5leHRTbG90TWlsbGlzXG4gICAgICAgICAgICBqb2JJZCA9IG5leHRTbG90Sm9iSWRcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgLS0gTmV4dCBzbG90IGFsc28gaGFzIGEgam9iLCByZXR1cm4gZXJyb3IgY29kZVxuICAgICAgICAgICAgcmV0dXJuIC0xMSAtLSBTY2hlZHVsZXJKb2JTbG90c0J1c3lcbiAgICAgICAgZW5kXG4gICAgZWxzZVxuICAgICAgICBoYXNDb2xsaXNpb24gPSB0cnVlXG4gICAgZW5kXG5lbmRcbmxvY2FsIGRlbGF5ID0gbmV4dE1pbGxpcyAtIG5vd1xuLS0gRmFzdCBDbGFtcCBkZWxheSB0byBtaW5pbXVtIG9mIDBcbmlmIGRlbGF5IDwgMCB0aGVuXG4gICAgZGVsYXkgPSAwXG5lbmRcbmxvY2FsIG5leHRKb2JLZXkgPSBzY2hlZHVsZXJLZXkgLi4gXCI6XCIgLi4gbmV4dE1pbGxpc1xuaWYgbm90IGhhc0NvbGxpc2lvbiBvciByZW1vdmVkUHJldkpvYiB0aGVuXG4gICAgLS0gam9iSWQgYWxyZWFkeSBjYWxjdWxhdGVkIGFib3ZlIGR1cmluZyBjb2xsaXNpb24gY2hlY2tcbiAgICBzdG9yZUpvYlNjaGVkdWxlcihqb2JTY2hlZHVsZXJJZCwgc2NoZWR1bGVyS2V5LCByZXBlYXRLZXksIG5leHRNaWxsaXMsIHNjaGVkdWxlck9wdHMsIHRlbXBsYXRlRGF0YSwgdGVtcGxhdGVPcHRzKVxuICAgIHJjYWxsKFwiSU5DUlwiLCBLRVlTWzhdKVxuICAgIGFkZEpvYkZyb21TY2hlZHVsZXIobmV4dEpvYktleSwgam9iSWQsIGpvYk9wdHMsIHdhaXRLZXksIHBhdXNlZEtleSwgS0VZU1sxMV0sIG1ldGFLZXksIHByaW9yaXRpemVkS2V5LCBLRVlTWzEwXSxcbiAgICAgICAgZGVsYXllZEtleSwgS0VZU1s3XSwgZXZlbnRzS2V5LCBzY2hlZHVsZXJPcHRzWyduYW1lJ10sIG1heEV2ZW50cywgbm93LCB0ZW1wbGF0ZURhdGEsIGpvYlNjaGVkdWxlcklkLCBkZWxheSlcbmVsc2VpZiBoYXNDb2xsaXNpb24gdGhlblxuICAgIC0tIEZvciAncGF0dGVybicgY2FzZTogcmV0dXJuIGVycm9yIGNvZGVcbiAgICByZXR1cm4gLTEwIC0tIFNjaGVkdWxlckpvYklkQ29sbGlzaW9uXG5lbmRcbmlmIEFSR1ZbOV0gfj0gXCJcIiB0aGVuXG4gICAgcmNhbGwoXCJIU0VUXCIsIEFSR1ZbOV0sIFwibnJqaWRcIiwgam9iSWQpXG5lbmRcbnJldHVybiB7am9iSWQgLi4gXCJcIiwgZGVsYXl9XG5gO1xuZXhwb3J0cy5hZGRKb2JTY2hlZHVsZXIgPSB7XG4gICAgbmFtZTogJ2FkZEpvYlNjaGVkdWxlcicsXG4gICAgY29udGVudCxcbiAgICBrZXlzOiAxMSxcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1hZGRKb2JTY2hlZHVsZXItMTEuanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiYWRkSm9iU2NoZWR1bGVyIiwiY29udGVudCIsIm5hbWUiLCJrZXlzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/scripts/addJobScheduler-11.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/scripts/addLog-2.js":
/*!**********************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/scripts/addLog-2.js ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.addLog = void 0;\nconst content = `--[[\n  Add job log\n  Input:\n    KEYS[1] job id key\n    KEYS[2] job logs key\n    ARGV[1] id\n    ARGV[2] log\n    ARGV[3] keepLogs\n  Output:\n    -1 - Missing job.\n]]\nlocal rcall = redis.call\nif rcall(\"EXISTS\", KEYS[1]) == 1 then -- // Make sure job exists\n  local logCount = rcall(\"RPUSH\", KEYS[2], ARGV[2])\n  if ARGV[3] ~= '' then\n    local keepLogs = tonumber(ARGV[3])\n    rcall(\"LTRIM\", KEYS[2], -keepLogs, -1)\n    return math.min(keepLogs, logCount)\n  end\n  return logCount\nelse\n  return -1\nend\n`;\nexports.addLog = {\n    name: \"addLog\",\n    content,\n    keys: 2\n}; //# sourceMappingURL=addLog-2.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL3NjcmlwdHMvYWRkTG9nLTIuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELGNBQWMsR0FBRyxLQUFLO0FBQ3RCLE1BQU1HLFVBQVUsQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUF1QmpCLENBQUM7QUFDREgsY0FBYyxHQUFHO0lBQ2JJLE1BQU07SUFDTkQ7SUFDQUUsTUFBTTtBQUNWLEdBQ0Esb0NBQW9DIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb25seWZhbnMtcGxhdGZvcm0vLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL3NjcmlwdHMvYWRkTG9nLTIuanM/NDhhNiJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuYWRkTG9nID0gdm9pZCAwO1xuY29uc3QgY29udGVudCA9IGAtLVtbXG4gIEFkZCBqb2IgbG9nXG4gIElucHV0OlxuICAgIEtFWVNbMV0gam9iIGlkIGtleVxuICAgIEtFWVNbMl0gam9iIGxvZ3Mga2V5XG4gICAgQVJHVlsxXSBpZFxuICAgIEFSR1ZbMl0gbG9nXG4gICAgQVJHVlszXSBrZWVwTG9nc1xuICBPdXRwdXQ6XG4gICAgLTEgLSBNaXNzaW5nIGpvYi5cbl1dXG5sb2NhbCByY2FsbCA9IHJlZGlzLmNhbGxcbmlmIHJjYWxsKFwiRVhJU1RTXCIsIEtFWVNbMV0pID09IDEgdGhlbiAtLSAvLyBNYWtlIHN1cmUgam9iIGV4aXN0c1xuICBsb2NhbCBsb2dDb3VudCA9IHJjYWxsKFwiUlBVU0hcIiwgS0VZU1syXSwgQVJHVlsyXSlcbiAgaWYgQVJHVlszXSB+PSAnJyB0aGVuXG4gICAgbG9jYWwga2VlcExvZ3MgPSB0b251bWJlcihBUkdWWzNdKVxuICAgIHJjYWxsKFwiTFRSSU1cIiwgS0VZU1syXSwgLWtlZXBMb2dzLCAtMSlcbiAgICByZXR1cm4gbWF0aC5taW4oa2VlcExvZ3MsIGxvZ0NvdW50KVxuICBlbmRcbiAgcmV0dXJuIGxvZ0NvdW50XG5lbHNlXG4gIHJldHVybiAtMVxuZW5kXG5gO1xuZXhwb3J0cy5hZGRMb2cgPSB7XG4gICAgbmFtZTogJ2FkZExvZycsXG4gICAgY29udGVudCxcbiAgICBrZXlzOiAyLFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFkZExvZy0yLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsImFkZExvZyIsImNvbnRlbnQiLCJuYW1lIiwia2V5cyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/scripts/addLog-2.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/scripts/addParentJob-6.js":
/*!****************************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/scripts/addParentJob-6.js ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.addParentJob = void 0;\nconst content = `--[[\n  Adds a parent job to the queue by doing the following:\n    - Increases the job counter if needed.\n    - Creates a new job key with the job data.\n    - adds the job to the waiting-children zset\n    Input:\n      KEYS[1] 'meta'\n      KEYS[2] 'id'\n      KEYS[3] 'delayed'\n      KEYS[4] 'waiting-children'\n      KEYS[5] 'completed'\n      KEYS[6] events stream key\n      ARGV[1] msgpacked arguments array\n            [1]  key prefix,\n            [2]  custom id (will not generate one automatically)\n            [3]  name\n            [4]  timestamp\n            [5]  parentKey?\n            [6]  parent dependencies key.\n            [7]  parent? {id, queueKey}\n            [8]  repeat job key\n            [9] deduplication key\n      ARGV[2] Json stringified job data\n      ARGV[3] msgpacked options\n      Output:\n        jobId  - OK\n        -5     - Missing parent key\n]]\nlocal metaKey = KEYS[1]\nlocal idKey = KEYS[2]\nlocal completedKey = KEYS[5]\nlocal eventsKey = KEYS[6]\nlocal jobId\nlocal jobIdKey\nlocal rcall = redis.call\nlocal args = cmsgpack.unpack(ARGV[1])\nlocal data = ARGV[2]\nlocal opts = cmsgpack.unpack(ARGV[3])\nlocal parentKey = args[5]\nlocal parent = args[7]\nlocal repeatJobKey = args[8]\nlocal deduplicationKey = args[9]\nlocal parentData\n-- Includes\n--[[\n  Function to debounce a job.\n]]\n-- Includes\n--[[\n  Function to remove job keys.\n]]\nlocal function removeJobKeys(jobKey)\n  return rcall(\"DEL\", jobKey, jobKey .. ':logs', jobKey .. ':dependencies',\n    jobKey .. ':processed', jobKey .. ':failed', jobKey .. ':unsuccessful')\nend\nlocal function removeDelayedJob(delayedKey, deduplicationKey, eventsKey, maxEvents, currentDeduplicatedJobId,\n    jobId, deduplicationId, prefix)\n    if rcall(\"ZREM\", delayedKey, currentDeduplicatedJobId) > 0 then\n        removeJobKeys(prefix .. currentDeduplicatedJobId)\n        rcall(\"XADD\", eventsKey, \"*\", \"event\", \"removed\", \"jobId\", currentDeduplicatedJobId,\n            \"prev\", \"delayed\")\n        -- TODO remove debounced event in next breaking change\n        rcall(\"XADD\", eventsKey, \"MAXLEN\", \"~\", maxEvents, \"*\", \"event\", \"debounced\", \"jobId\",\n            jobId, \"debounceId\", deduplicationId)\n        rcall(\"XADD\", eventsKey, \"MAXLEN\", \"~\", maxEvents, \"*\", \"event\", \"deduplicated\", \"jobId\",\n            jobId, \"deduplicationId\", deduplicationId, \"deduplicatedJobId\", currentDeduplicatedJobId)\n        return true\n    end\n    return false\nend\nlocal function deduplicateJob(deduplicationOpts, jobId, delayedKey, deduplicationKey, eventsKey, maxEvents,\n    prefix)\n    local deduplicationId = deduplicationOpts and deduplicationOpts['id']\n    if deduplicationId then\n        local ttl = deduplicationOpts['ttl']\n        if deduplicationOpts['replace'] then\n            if ttl and ttl > 0 then\n                local currentDebounceJobId = rcall('GET', deduplicationKey)\n                if currentDebounceJobId then\n                    local isRemoved = removeDelayedJob(delayedKey, deduplicationKey, eventsKey, maxEvents,\n                        currentDebounceJobId, jobId, deduplicationId, prefix)\n                    if isRemoved then\n                        if deduplicationOpts['extend'] then\n                            rcall('SET', deduplicationKey, jobId, 'PX', ttl)\n                        else\n                            rcall('SET', deduplicationKey, jobId, 'KEEPTTL')\n                        end\n                        return\n                    else\n                        return currentDebounceJobId\n                    end\n                else\n                    rcall('SET', deduplicationKey, jobId, 'PX', ttl)\n                    return\n                end\n            else\n                local currentDebounceJobId = rcall('GET', deduplicationKey)\n                if currentDebounceJobId then\n                    local isRemoved = removeDelayedJob(delayedKey, deduplicationKey, eventsKey, maxEvents,\n                        currentDebounceJobId, jobId, deduplicationId, prefix)\n                    if isRemoved then\n                        rcall('SET', deduplicationKey, jobId)\n                        return\n                    else\n                        return currentDebounceJobId\n                    end\n                else\n                    rcall('SET', deduplicationKey, jobId)\n                    return\n                end\n            end\n        else\n            local deduplicationKeyExists\n            if ttl and ttl > 0 then\n                if deduplicationOpts['extend'] then\n                    local currentDebounceJobId = rcall('GET', deduplicationKey)\n                    if currentDebounceJobId then\n                        rcall('SET', deduplicationKey, currentDebounceJobId, 'PX', ttl)\n                        rcall(\"XADD\", eventsKey, \"MAXLEN\", \"~\", maxEvents, \"*\", \"event\", \"debounced\",\n                            \"jobId\", currentDebounceJobId, \"debounceId\", deduplicationId)\n                        rcall(\"XADD\", eventsKey, \"MAXLEN\", \"~\", maxEvents, \"*\", \"event\", \"deduplicated\", \"jobId\",\n                            currentDebounceJobId, \"deduplicationId\", deduplicationId, \"deduplicatedJobId\", jobId)\n                        return currentDebounceJobId\n                    else\n                        rcall('SET', deduplicationKey, jobId, 'PX', ttl)\n                        return\n                    end\n                else\n                    deduplicationKeyExists = not rcall('SET', deduplicationKey, jobId, 'PX', ttl, 'NX')\n                end\n            else\n                deduplicationKeyExists = not rcall('SET', deduplicationKey, jobId, 'NX')\n            end\n            if deduplicationKeyExists then\n                local currentDebounceJobId = rcall('GET', deduplicationKey)\n                -- TODO remove debounced event in next breaking change\n                rcall(\"XADD\", eventsKey, \"MAXLEN\", \"~\", maxEvents, \"*\", \"event\", \"debounced\", \"jobId\",\n                    currentDebounceJobId, \"debounceId\", deduplicationId)\n                rcall(\"XADD\", eventsKey, \"MAXLEN\", \"~\", maxEvents, \"*\", \"event\", \"deduplicated\", \"jobId\",\n                    currentDebounceJobId, \"deduplicationId\", deduplicationId, \"deduplicatedJobId\", jobId)\n                return currentDebounceJobId\n            end\n        end\n    end\nend\n--[[\n  Function to get max events value or set by default 10000.\n]]\nlocal function getOrSetMaxEvents(metaKey)\n  local maxEvents = rcall(\"HGET\", metaKey, \"opts.maxLenEvents\")\n  if not maxEvents then\n    maxEvents = 10000\n    rcall(\"HSET\", metaKey, \"opts.maxLenEvents\", maxEvents)\n  end\n  return maxEvents\nend\n--[[\n  Function to handle the case when job is duplicated.\n]]\n-- Includes\n--[[\n    This function is used to update the parent's dependencies if the job\n    is already completed and about to be ignored. The parent must get its\n    dependencies updated to avoid the parent job being stuck forever in \n    the waiting-children state.\n]]\n-- Includes\n--[[\n  Validate and move or add dependencies to parent.\n]]\n-- Includes\n--[[\n  Validate and move parent to a wait status (waiting, delayed or prioritized)\n  if no pending dependencies.\n]]\n-- Includes\n--[[\n  Validate and move parent to a wait status (waiting, delayed or prioritized) if needed.\n]]\n-- Includes\n--[[\n  Move parent to a wait status (wait, prioritized or delayed)\n]]\n-- Includes\n--[[\n  Add delay marker if needed.\n]]\n-- Includes\n--[[\n  Function to return the next delayed job timestamp.\n]]\nlocal function getNextDelayedTimestamp(delayedKey)\n  local result = rcall(\"ZRANGE\", delayedKey, 0, 0, \"WITHSCORES\")\n  if #result then\n    local nextTimestamp = tonumber(result[2])\n    if nextTimestamp ~= nil then\n      return nextTimestamp / 0x1000\n    end\n  end\nend\nlocal function addDelayMarkerIfNeeded(markerKey, delayedKey)\n  local nextTimestamp = getNextDelayedTimestamp(delayedKey)\n  if nextTimestamp ~= nil then\n    -- Replace the score of the marker with the newest known\n    -- next timestamp.\n    rcall(\"ZADD\", markerKey, nextTimestamp, \"1\")\n  end\nend\n--[[\n  Function to add job in target list and add marker if needed.\n]]\n-- Includes\n--[[\n  Add marker if needed when a job is available.\n]]\nlocal function addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)\n  if not isPausedOrMaxed then\n    rcall(\"ZADD\", markerKey, 0, \"0\")\n  end  \nend\nlocal function addJobInTargetList(targetKey, markerKey, pushCmd, isPausedOrMaxed, jobId)\n  rcall(pushCmd, targetKey, jobId)\n  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)\nend\n--[[\n  Function to add job considering priority.\n]]\n-- Includes\n--[[\n  Function to get priority score.\n]]\nlocal function getPriorityScore(priority, priorityCounterKey)\n  local prioCounter = rcall(\"INCR\", priorityCounterKey)\n  return priority * 0x100000000 + prioCounter % 0x100000000\nend\nlocal function addJobWithPriority(markerKey, prioritizedKey, priority, jobId, priorityCounterKey,\n  isPausedOrMaxed)\n  local score = getPriorityScore(priority, priorityCounterKey)\n  rcall(\"ZADD\", prioritizedKey, score, jobId)\n  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)\nend\n--[[\n  Function to check if queue is paused or maxed\n  (since an empty list and !EXISTS are not really the same).\n]]\nlocal function isQueuePausedOrMaxed(queueMetaKey, activeKey)\n  local queueAttributes = rcall(\"HMGET\", queueMetaKey, \"paused\", \"concurrency\")\n  if queueAttributes[1] then\n    return true\n  else\n    if queueAttributes[2] then\n      local activeCount = rcall(\"LLEN\", activeKey)\n      return activeCount >= tonumber(queueAttributes[2])\n    end\n  end\n  return false\nend\n--[[\n  Function to check for the meta.paused key to decide if we are paused or not\n  (since an empty list and !EXISTS are not really the same).\n]]\nlocal function getTargetQueueList(queueMetaKey, activeKey, waitKey, pausedKey)\n  local queueAttributes = rcall(\"HMGET\", queueMetaKey, \"paused\", \"concurrency\", \"max\", \"duration\")\n  if queueAttributes[1] then\n    return pausedKey, true, queueAttributes[3], queueAttributes[4]\n  else\n    if queueAttributes[2] then\n      local activeCount = rcall(\"LLEN\", activeKey)\n      if activeCount >= tonumber(queueAttributes[2]) then\n        return waitKey, true, queueAttributes[3], queueAttributes[4]\n      else\n        return waitKey, false, queueAttributes[3], queueAttributes[4]\n      end\n    end\n  end\n  return waitKey, false, queueAttributes[3], queueAttributes[4]\nend\nlocal function moveParentToWait(parentQueueKey, parentKey, parentId, timestamp)\n    local parentWaitKey = parentQueueKey .. \":wait\"\n    local parentPausedKey = parentQueueKey .. \":paused\"\n    local parentActiveKey = parentQueueKey .. \":active\"\n    local parentMetaKey = parentQueueKey .. \":meta\"\n    local parentMarkerKey = parentQueueKey .. \":marker\"\n    local jobAttributes = rcall(\"HMGET\", parentKey, \"priority\", \"delay\")\n    local priority = tonumber(jobAttributes[1]) or 0\n    local delay = tonumber(jobAttributes[2]) or 0\n    if delay > 0 then\n        local delayedTimestamp = tonumber(timestamp) + delay\n        local score = delayedTimestamp * 0x1000\n        local parentDelayedKey = parentQueueKey .. \":delayed\"\n        rcall(\"ZADD\", parentDelayedKey, score, parentId)\n        rcall(\"XADD\", parentQueueKey .. \":events\", \"*\", \"event\", \"delayed\", \"jobId\", parentId, \"delay\",\n            delayedTimestamp)\n        addDelayMarkerIfNeeded(parentMarkerKey, parentDelayedKey)\n    else\n        if priority == 0 then\n            local parentTarget, isParentPausedOrMaxed = getTargetQueueList(parentMetaKey, parentActiveKey,\n                parentWaitKey, parentPausedKey)\n            addJobInTargetList(parentTarget, parentMarkerKey, \"RPUSH\", isParentPausedOrMaxed, parentId)\n        else\n            local isPausedOrMaxed = isQueuePausedOrMaxed(parentMetaKey, parentActiveKey)\n            addJobWithPriority(parentMarkerKey, parentQueueKey .. \":prioritized\", priority, parentId,\n                parentQueueKey .. \":pc\", isPausedOrMaxed)\n        end\n        rcall(\"XADD\", parentQueueKey .. \":events\", \"*\", \"event\", \"waiting\", \"jobId\", parentId, \"prev\",\n            \"waiting-children\")\n    end\nend\nlocal function moveParentToWaitIfNeeded(parentQueueKey, parentKey, parentId, timestamp)\n  if rcall(\"EXISTS\", parentKey) == 1 then\n    local parentWaitingChildrenKey = parentQueueKey .. \":waiting-children\"\n    if rcall(\"ZSCORE\", parentWaitingChildrenKey, parentId) then    \n      rcall(\"ZREM\", parentWaitingChildrenKey, parentId)\n      moveParentToWait(parentQueueKey, parentKey, parentId, timestamp)\n    end\n  end\nend\nlocal function moveParentToWaitIfNoPendingDependencies(parentQueueKey, parentDependenciesKey, parentKey,\n  parentId, timestamp)\n  local doNotHavePendingDependencies = rcall(\"SCARD\", parentDependenciesKey) == 0\n  if doNotHavePendingDependencies then\n    moveParentToWaitIfNeeded(parentQueueKey, parentKey, parentId, timestamp)\n  end\nend\nlocal function updateParentDepsIfNeeded(parentKey, parentQueueKey, parentDependenciesKey,\n  parentId, jobIdKey, returnvalue, timestamp )\n  local processedSet = parentKey .. \":processed\"\n  rcall(\"HSET\", processedSet, jobIdKey, returnvalue)\n  moveParentToWaitIfNoPendingDependencies(parentQueueKey, parentDependenciesKey, parentKey, parentId, timestamp)\nend\nlocal function updateExistingJobsParent(parentKey, parent, parentData,\n                                        parentDependenciesKey, completedKey,\n                                        jobIdKey, jobId, timestamp)\n    if parentKey ~= nil then\n        if rcall(\"ZSCORE\", completedKey, jobId) then\n            local returnvalue = rcall(\"HGET\", jobIdKey, \"returnvalue\")\n            updateParentDepsIfNeeded(parentKey, parent['queueKey'],\n                                     parentDependenciesKey, parent['id'],\n                                     jobIdKey, returnvalue, timestamp)\n        else\n            if parentDependenciesKey ~= nil then\n                rcall(\"SADD\", parentDependenciesKey, jobIdKey)\n            end\n        end\n        rcall(\"HMSET\", jobIdKey, \"parentKey\", parentKey, \"parent\", parentData)\n    end\nend\nlocal function handleDuplicatedJob(jobKey, jobId, currentParentKey, currentParent,\n  parentData, parentDependenciesKey, completedKey, eventsKey, maxEvents, timestamp)\n  local existedParentKey = rcall(\"HGET\", jobKey, \"parentKey\")\n  if not existedParentKey or existedParentKey == currentParentKey then\n    updateExistingJobsParent(currentParentKey, currentParent, parentData,\n      parentDependenciesKey, completedKey, jobKey,\n      jobId, timestamp)\n  else\n    if currentParentKey ~= nil and currentParentKey ~= existedParentKey\n      and (rcall(\"EXISTS\", existedParentKey) == 1) then\n      return -7\n    end\n  end\n  rcall(\"XADD\", eventsKey, \"MAXLEN\", \"~\", maxEvents, \"*\", \"event\",\n    \"duplicated\", \"jobId\", jobId)\n  return jobId .. \"\" -- convert to string\nend\n--[[\n  Function to store a job\n]]\nlocal function storeJob(eventsKey, jobIdKey, jobId, name, data, opts, timestamp,\n                        parentKey, parentData, repeatJobKey)\n    local jsonOpts = cjson.encode(opts)\n    local delay = opts['delay'] or 0\n    local priority = opts['priority'] or 0\n    local debounceId = opts['de'] and opts['de']['id']\n    local optionalValues = {}\n    if parentKey ~= nil then\n        table.insert(optionalValues, \"parentKey\")\n        table.insert(optionalValues, parentKey)\n        table.insert(optionalValues, \"parent\")\n        table.insert(optionalValues, parentData)\n    end\n    if repeatJobKey then\n        table.insert(optionalValues, \"rjk\")\n        table.insert(optionalValues, repeatJobKey)\n    end\n    if debounceId then\n        table.insert(optionalValues, \"deid\")\n        table.insert(optionalValues, debounceId)\n    end\n    rcall(\"HMSET\", jobIdKey, \"name\", name, \"data\", data, \"opts\", jsonOpts,\n          \"timestamp\", timestamp, \"delay\", delay, \"priority\", priority,\n          unpack(optionalValues))\n    rcall(\"XADD\", eventsKey, \"*\", \"event\", \"added\", \"jobId\", jobId, \"name\", name)\n    return delay, priority\nend\nif parentKey ~= nil then\n    if rcall(\"EXISTS\", parentKey) ~= 1 then return -5 end\n    parentData = cjson.encode(parent)\nend\nlocal jobCounter = rcall(\"INCR\", idKey)\nlocal maxEvents = getOrSetMaxEvents(metaKey)\nlocal parentDependenciesKey = args[6]\nlocal timestamp = args[4]\nif args[2] == \"\" then\n    jobId = jobCounter\n    jobIdKey = args[1] .. jobId\nelse\n    jobId = args[2]\n    jobIdKey = args[1] .. jobId\n    if rcall(\"EXISTS\", jobIdKey) == 1 then\n        return handleDuplicatedJob(jobIdKey, jobId, parentKey, parent,\n            parentData, parentDependenciesKey, completedKey, eventsKey,\n            maxEvents, timestamp)\n    end\nend\nlocal deduplicationJobId = deduplicateJob(opts['de'], jobId, KEYS[3],\n  deduplicationKey, eventsKey, maxEvents, args[1])\nif deduplicationJobId then\n  return deduplicationJobId\nend\n-- Store the job.\nstoreJob(eventsKey, jobIdKey, jobId, args[3], ARGV[2], opts, timestamp,\n         parentKey, parentData, repeatJobKey)\nlocal waitChildrenKey = KEYS[4]\nrcall(\"ZADD\", waitChildrenKey, timestamp, jobId)\nrcall(\"XADD\", eventsKey, \"MAXLEN\", \"~\", maxEvents, \"*\", \"event\",\n      \"waiting-children\", \"jobId\", jobId)\n-- Check if this job is a child of another job, if so add it to the parents dependencies\nif parentDependenciesKey ~= nil then\n    rcall(\"SADD\", parentDependenciesKey, jobIdKey)\nend\nreturn jobId .. \"\" -- convert to string\n`;\nexports.addParentJob = {\n    name: \"addParentJob\",\n    content,\n    keys: 6\n}; //# sourceMappingURL=addParentJob-6.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL3NjcmlwdHMvYWRkUGFyZW50Sm9iLTYuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELG9CQUFvQixHQUFHLEtBQUs7QUFDNUIsTUFBTUcsVUFBVSxDQUFDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQSthakIsQ0FBQztBQUNESCxvQkFBb0IsR0FBRztJQUNuQkksTUFBTTtJQUNORDtJQUNBRSxNQUFNO0FBQ1YsR0FDQSwwQ0FBMEMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vbmx5ZmFucy1wbGF0Zm9ybS8uL25vZGVfbW9kdWxlcy9idWxsbXEvZGlzdC9janMvc2NyaXB0cy9hZGRQYXJlbnRKb2ItNi5qcz8yZjk2Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5hZGRQYXJlbnRKb2IgPSB2b2lkIDA7XG5jb25zdCBjb250ZW50ID0gYC0tW1tcbiAgQWRkcyBhIHBhcmVudCBqb2IgdG8gdGhlIHF1ZXVlIGJ5IGRvaW5nIHRoZSBmb2xsb3dpbmc6XG4gICAgLSBJbmNyZWFzZXMgdGhlIGpvYiBjb3VudGVyIGlmIG5lZWRlZC5cbiAgICAtIENyZWF0ZXMgYSBuZXcgam9iIGtleSB3aXRoIHRoZSBqb2IgZGF0YS5cbiAgICAtIGFkZHMgdGhlIGpvYiB0byB0aGUgd2FpdGluZy1jaGlsZHJlbiB6c2V0XG4gICAgSW5wdXQ6XG4gICAgICBLRVlTWzFdICdtZXRhJ1xuICAgICAgS0VZU1syXSAnaWQnXG4gICAgICBLRVlTWzNdICdkZWxheWVkJ1xuICAgICAgS0VZU1s0XSAnd2FpdGluZy1jaGlsZHJlbidcbiAgICAgIEtFWVNbNV0gJ2NvbXBsZXRlZCdcbiAgICAgIEtFWVNbNl0gZXZlbnRzIHN0cmVhbSBrZXlcbiAgICAgIEFSR1ZbMV0gbXNncGFja2VkIGFyZ3VtZW50cyBhcnJheVxuICAgICAgICAgICAgWzFdICBrZXkgcHJlZml4LFxuICAgICAgICAgICAgWzJdICBjdXN0b20gaWQgKHdpbGwgbm90IGdlbmVyYXRlIG9uZSBhdXRvbWF0aWNhbGx5KVxuICAgICAgICAgICAgWzNdICBuYW1lXG4gICAgICAgICAgICBbNF0gIHRpbWVzdGFtcFxuICAgICAgICAgICAgWzVdICBwYXJlbnRLZXk/XG4gICAgICAgICAgICBbNl0gIHBhcmVudCBkZXBlbmRlbmNpZXMga2V5LlxuICAgICAgICAgICAgWzddICBwYXJlbnQ/IHtpZCwgcXVldWVLZXl9XG4gICAgICAgICAgICBbOF0gIHJlcGVhdCBqb2Iga2V5XG4gICAgICAgICAgICBbOV0gZGVkdXBsaWNhdGlvbiBrZXlcbiAgICAgIEFSR1ZbMl0gSnNvbiBzdHJpbmdpZmllZCBqb2IgZGF0YVxuICAgICAgQVJHVlszXSBtc2dwYWNrZWQgb3B0aW9uc1xuICAgICAgT3V0cHV0OlxuICAgICAgICBqb2JJZCAgLSBPS1xuICAgICAgICAtNSAgICAgLSBNaXNzaW5nIHBhcmVudCBrZXlcbl1dXG5sb2NhbCBtZXRhS2V5ID0gS0VZU1sxXVxubG9jYWwgaWRLZXkgPSBLRVlTWzJdXG5sb2NhbCBjb21wbGV0ZWRLZXkgPSBLRVlTWzVdXG5sb2NhbCBldmVudHNLZXkgPSBLRVlTWzZdXG5sb2NhbCBqb2JJZFxubG9jYWwgam9iSWRLZXlcbmxvY2FsIHJjYWxsID0gcmVkaXMuY2FsbFxubG9jYWwgYXJncyA9IGNtc2dwYWNrLnVucGFjayhBUkdWWzFdKVxubG9jYWwgZGF0YSA9IEFSR1ZbMl1cbmxvY2FsIG9wdHMgPSBjbXNncGFjay51bnBhY2soQVJHVlszXSlcbmxvY2FsIHBhcmVudEtleSA9IGFyZ3NbNV1cbmxvY2FsIHBhcmVudCA9IGFyZ3NbN11cbmxvY2FsIHJlcGVhdEpvYktleSA9IGFyZ3NbOF1cbmxvY2FsIGRlZHVwbGljYXRpb25LZXkgPSBhcmdzWzldXG5sb2NhbCBwYXJlbnREYXRhXG4tLSBJbmNsdWRlc1xuLS1bW1xuICBGdW5jdGlvbiB0byBkZWJvdW5jZSBhIGpvYi5cbl1dXG4tLSBJbmNsdWRlc1xuLS1bW1xuICBGdW5jdGlvbiB0byByZW1vdmUgam9iIGtleXMuXG5dXVxubG9jYWwgZnVuY3Rpb24gcmVtb3ZlSm9iS2V5cyhqb2JLZXkpXG4gIHJldHVybiByY2FsbChcIkRFTFwiLCBqb2JLZXksIGpvYktleSAuLiAnOmxvZ3MnLCBqb2JLZXkgLi4gJzpkZXBlbmRlbmNpZXMnLFxuICAgIGpvYktleSAuLiAnOnByb2Nlc3NlZCcsIGpvYktleSAuLiAnOmZhaWxlZCcsIGpvYktleSAuLiAnOnVuc3VjY2Vzc2Z1bCcpXG5lbmRcbmxvY2FsIGZ1bmN0aW9uIHJlbW92ZURlbGF5ZWRKb2IoZGVsYXllZEtleSwgZGVkdXBsaWNhdGlvbktleSwgZXZlbnRzS2V5LCBtYXhFdmVudHMsIGN1cnJlbnREZWR1cGxpY2F0ZWRKb2JJZCxcbiAgICBqb2JJZCwgZGVkdXBsaWNhdGlvbklkLCBwcmVmaXgpXG4gICAgaWYgcmNhbGwoXCJaUkVNXCIsIGRlbGF5ZWRLZXksIGN1cnJlbnREZWR1cGxpY2F0ZWRKb2JJZCkgPiAwIHRoZW5cbiAgICAgICAgcmVtb3ZlSm9iS2V5cyhwcmVmaXggLi4gY3VycmVudERlZHVwbGljYXRlZEpvYklkKVxuICAgICAgICByY2FsbChcIlhBRERcIiwgZXZlbnRzS2V5LCBcIipcIiwgXCJldmVudFwiLCBcInJlbW92ZWRcIiwgXCJqb2JJZFwiLCBjdXJyZW50RGVkdXBsaWNhdGVkSm9iSWQsXG4gICAgICAgICAgICBcInByZXZcIiwgXCJkZWxheWVkXCIpXG4gICAgICAgIC0tIFRPRE8gcmVtb3ZlIGRlYm91bmNlZCBldmVudCBpbiBuZXh0IGJyZWFraW5nIGNoYW5nZVxuICAgICAgICByY2FsbChcIlhBRERcIiwgZXZlbnRzS2V5LCBcIk1BWExFTlwiLCBcIn5cIiwgbWF4RXZlbnRzLCBcIipcIiwgXCJldmVudFwiLCBcImRlYm91bmNlZFwiLCBcImpvYklkXCIsXG4gICAgICAgICAgICBqb2JJZCwgXCJkZWJvdW5jZUlkXCIsIGRlZHVwbGljYXRpb25JZClcbiAgICAgICAgcmNhbGwoXCJYQUREXCIsIGV2ZW50c0tleSwgXCJNQVhMRU5cIiwgXCJ+XCIsIG1heEV2ZW50cywgXCIqXCIsIFwiZXZlbnRcIiwgXCJkZWR1cGxpY2F0ZWRcIiwgXCJqb2JJZFwiLFxuICAgICAgICAgICAgam9iSWQsIFwiZGVkdXBsaWNhdGlvbklkXCIsIGRlZHVwbGljYXRpb25JZCwgXCJkZWR1cGxpY2F0ZWRKb2JJZFwiLCBjdXJyZW50RGVkdXBsaWNhdGVkSm9iSWQpXG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgZW5kXG4gICAgcmV0dXJuIGZhbHNlXG5lbmRcbmxvY2FsIGZ1bmN0aW9uIGRlZHVwbGljYXRlSm9iKGRlZHVwbGljYXRpb25PcHRzLCBqb2JJZCwgZGVsYXllZEtleSwgZGVkdXBsaWNhdGlvbktleSwgZXZlbnRzS2V5LCBtYXhFdmVudHMsXG4gICAgcHJlZml4KVxuICAgIGxvY2FsIGRlZHVwbGljYXRpb25JZCA9IGRlZHVwbGljYXRpb25PcHRzIGFuZCBkZWR1cGxpY2F0aW9uT3B0c1snaWQnXVxuICAgIGlmIGRlZHVwbGljYXRpb25JZCB0aGVuXG4gICAgICAgIGxvY2FsIHR0bCA9IGRlZHVwbGljYXRpb25PcHRzWyd0dGwnXVxuICAgICAgICBpZiBkZWR1cGxpY2F0aW9uT3B0c1sncmVwbGFjZSddIHRoZW5cbiAgICAgICAgICAgIGlmIHR0bCBhbmQgdHRsID4gMCB0aGVuXG4gICAgICAgICAgICAgICAgbG9jYWwgY3VycmVudERlYm91bmNlSm9iSWQgPSByY2FsbCgnR0VUJywgZGVkdXBsaWNhdGlvbktleSlcbiAgICAgICAgICAgICAgICBpZiBjdXJyZW50RGVib3VuY2VKb2JJZCB0aGVuXG4gICAgICAgICAgICAgICAgICAgIGxvY2FsIGlzUmVtb3ZlZCA9IHJlbW92ZURlbGF5ZWRKb2IoZGVsYXllZEtleSwgZGVkdXBsaWNhdGlvbktleSwgZXZlbnRzS2V5LCBtYXhFdmVudHMsXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50RGVib3VuY2VKb2JJZCwgam9iSWQsIGRlZHVwbGljYXRpb25JZCwgcHJlZml4KVxuICAgICAgICAgICAgICAgICAgICBpZiBpc1JlbW92ZWQgdGhlblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgZGVkdXBsaWNhdGlvbk9wdHNbJ2V4dGVuZCddIHRoZW5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByY2FsbCgnU0VUJywgZGVkdXBsaWNhdGlvbktleSwgam9iSWQsICdQWCcsIHR0bClcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByY2FsbCgnU0VUJywgZGVkdXBsaWNhdGlvbktleSwgam9iSWQsICdLRUVQVFRMJylcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuZFxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjdXJyZW50RGVib3VuY2VKb2JJZFxuICAgICAgICAgICAgICAgICAgICBlbmRcbiAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgIHJjYWxsKCdTRVQnLCBkZWR1cGxpY2F0aW9uS2V5LCBqb2JJZCwgJ1BYJywgdHRsKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgICAgICBlbmRcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBsb2NhbCBjdXJyZW50RGVib3VuY2VKb2JJZCA9IHJjYWxsKCdHRVQnLCBkZWR1cGxpY2F0aW9uS2V5KVxuICAgICAgICAgICAgICAgIGlmIGN1cnJlbnREZWJvdW5jZUpvYklkIHRoZW5cbiAgICAgICAgICAgICAgICAgICAgbG9jYWwgaXNSZW1vdmVkID0gcmVtb3ZlRGVsYXllZEpvYihkZWxheWVkS2V5LCBkZWR1cGxpY2F0aW9uS2V5LCBldmVudHNLZXksIG1heEV2ZW50cyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnREZWJvdW5jZUpvYklkLCBqb2JJZCwgZGVkdXBsaWNhdGlvbklkLCBwcmVmaXgpXG4gICAgICAgICAgICAgICAgICAgIGlmIGlzUmVtb3ZlZCB0aGVuXG4gICAgICAgICAgICAgICAgICAgICAgICByY2FsbCgnU0VUJywgZGVkdXBsaWNhdGlvbktleSwgam9iSWQpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnREZWJvdW5jZUpvYklkXG4gICAgICAgICAgICAgICAgICAgIGVuZFxuICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgcmNhbGwoJ1NFVCcsIGRlZHVwbGljYXRpb25LZXksIGpvYklkKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgICAgICBlbmRcbiAgICAgICAgICAgIGVuZFxuICAgICAgICBlbHNlXG4gICAgICAgICAgICBsb2NhbCBkZWR1cGxpY2F0aW9uS2V5RXhpc3RzXG4gICAgICAgICAgICBpZiB0dGwgYW5kIHR0bCA+IDAgdGhlblxuICAgICAgICAgICAgICAgIGlmIGRlZHVwbGljYXRpb25PcHRzWydleHRlbmQnXSB0aGVuXG4gICAgICAgICAgICAgICAgICAgIGxvY2FsIGN1cnJlbnREZWJvdW5jZUpvYklkID0gcmNhbGwoJ0dFVCcsIGRlZHVwbGljYXRpb25LZXkpXG4gICAgICAgICAgICAgICAgICAgIGlmIGN1cnJlbnREZWJvdW5jZUpvYklkIHRoZW5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJjYWxsKCdTRVQnLCBkZWR1cGxpY2F0aW9uS2V5LCBjdXJyZW50RGVib3VuY2VKb2JJZCwgJ1BYJywgdHRsKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmNhbGwoXCJYQUREXCIsIGV2ZW50c0tleSwgXCJNQVhMRU5cIiwgXCJ+XCIsIG1heEV2ZW50cywgXCIqXCIsIFwiZXZlbnRcIiwgXCJkZWJvdW5jZWRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImpvYklkXCIsIGN1cnJlbnREZWJvdW5jZUpvYklkLCBcImRlYm91bmNlSWRcIiwgZGVkdXBsaWNhdGlvbklkKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmNhbGwoXCJYQUREXCIsIGV2ZW50c0tleSwgXCJNQVhMRU5cIiwgXCJ+XCIsIG1heEV2ZW50cywgXCIqXCIsIFwiZXZlbnRcIiwgXCJkZWR1cGxpY2F0ZWRcIiwgXCJqb2JJZFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnREZWJvdW5jZUpvYklkLCBcImRlZHVwbGljYXRpb25JZFwiLCBkZWR1cGxpY2F0aW9uSWQsIFwiZGVkdXBsaWNhdGVkSm9iSWRcIiwgam9iSWQpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY3VycmVudERlYm91bmNlSm9iSWRcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgcmNhbGwoJ1NFVCcsIGRlZHVwbGljYXRpb25LZXksIGpvYklkLCAnUFgnLCB0dGwpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgICAgICAgICAgZW5kXG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICBkZWR1cGxpY2F0aW9uS2V5RXhpc3RzID0gbm90IHJjYWxsKCdTRVQnLCBkZWR1cGxpY2F0aW9uS2V5LCBqb2JJZCwgJ1BYJywgdHRsLCAnTlgnKVxuICAgICAgICAgICAgICAgIGVuZFxuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIGRlZHVwbGljYXRpb25LZXlFeGlzdHMgPSBub3QgcmNhbGwoJ1NFVCcsIGRlZHVwbGljYXRpb25LZXksIGpvYklkLCAnTlgnKVxuICAgICAgICAgICAgZW5kXG4gICAgICAgICAgICBpZiBkZWR1cGxpY2F0aW9uS2V5RXhpc3RzIHRoZW5cbiAgICAgICAgICAgICAgICBsb2NhbCBjdXJyZW50RGVib3VuY2VKb2JJZCA9IHJjYWxsKCdHRVQnLCBkZWR1cGxpY2F0aW9uS2V5KVxuICAgICAgICAgICAgICAgIC0tIFRPRE8gcmVtb3ZlIGRlYm91bmNlZCBldmVudCBpbiBuZXh0IGJyZWFraW5nIGNoYW5nZVxuICAgICAgICAgICAgICAgIHJjYWxsKFwiWEFERFwiLCBldmVudHNLZXksIFwiTUFYTEVOXCIsIFwiflwiLCBtYXhFdmVudHMsIFwiKlwiLCBcImV2ZW50XCIsIFwiZGVib3VuY2VkXCIsIFwiam9iSWRcIixcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudERlYm91bmNlSm9iSWQsIFwiZGVib3VuY2VJZFwiLCBkZWR1cGxpY2F0aW9uSWQpXG4gICAgICAgICAgICAgICAgcmNhbGwoXCJYQUREXCIsIGV2ZW50c0tleSwgXCJNQVhMRU5cIiwgXCJ+XCIsIG1heEV2ZW50cywgXCIqXCIsIFwiZXZlbnRcIiwgXCJkZWR1cGxpY2F0ZWRcIiwgXCJqb2JJZFwiLFxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50RGVib3VuY2VKb2JJZCwgXCJkZWR1cGxpY2F0aW9uSWRcIiwgZGVkdXBsaWNhdGlvbklkLCBcImRlZHVwbGljYXRlZEpvYklkXCIsIGpvYklkKVxuICAgICAgICAgICAgICAgIHJldHVybiBjdXJyZW50RGVib3VuY2VKb2JJZFxuICAgICAgICAgICAgZW5kXG4gICAgICAgIGVuZFxuICAgIGVuZFxuZW5kXG4tLVtbXG4gIEZ1bmN0aW9uIHRvIGdldCBtYXggZXZlbnRzIHZhbHVlIG9yIHNldCBieSBkZWZhdWx0IDEwMDAwLlxuXV1cbmxvY2FsIGZ1bmN0aW9uIGdldE9yU2V0TWF4RXZlbnRzKG1ldGFLZXkpXG4gIGxvY2FsIG1heEV2ZW50cyA9IHJjYWxsKFwiSEdFVFwiLCBtZXRhS2V5LCBcIm9wdHMubWF4TGVuRXZlbnRzXCIpXG4gIGlmIG5vdCBtYXhFdmVudHMgdGhlblxuICAgIG1heEV2ZW50cyA9IDEwMDAwXG4gICAgcmNhbGwoXCJIU0VUXCIsIG1ldGFLZXksIFwib3B0cy5tYXhMZW5FdmVudHNcIiwgbWF4RXZlbnRzKVxuICBlbmRcbiAgcmV0dXJuIG1heEV2ZW50c1xuZW5kXG4tLVtbXG4gIEZ1bmN0aW9uIHRvIGhhbmRsZSB0aGUgY2FzZSB3aGVuIGpvYiBpcyBkdXBsaWNhdGVkLlxuXV1cbi0tIEluY2x1ZGVzXG4tLVtbXG4gICAgVGhpcyBmdW5jdGlvbiBpcyB1c2VkIHRvIHVwZGF0ZSB0aGUgcGFyZW50J3MgZGVwZW5kZW5jaWVzIGlmIHRoZSBqb2JcbiAgICBpcyBhbHJlYWR5IGNvbXBsZXRlZCBhbmQgYWJvdXQgdG8gYmUgaWdub3JlZC4gVGhlIHBhcmVudCBtdXN0IGdldCBpdHNcbiAgICBkZXBlbmRlbmNpZXMgdXBkYXRlZCB0byBhdm9pZCB0aGUgcGFyZW50IGpvYiBiZWluZyBzdHVjayBmb3JldmVyIGluIFxuICAgIHRoZSB3YWl0aW5nLWNoaWxkcmVuIHN0YXRlLlxuXV1cbi0tIEluY2x1ZGVzXG4tLVtbXG4gIFZhbGlkYXRlIGFuZCBtb3ZlIG9yIGFkZCBkZXBlbmRlbmNpZXMgdG8gcGFyZW50LlxuXV1cbi0tIEluY2x1ZGVzXG4tLVtbXG4gIFZhbGlkYXRlIGFuZCBtb3ZlIHBhcmVudCB0byBhIHdhaXQgc3RhdHVzICh3YWl0aW5nLCBkZWxheWVkIG9yIHByaW9yaXRpemVkKVxuICBpZiBubyBwZW5kaW5nIGRlcGVuZGVuY2llcy5cbl1dXG4tLSBJbmNsdWRlc1xuLS1bW1xuICBWYWxpZGF0ZSBhbmQgbW92ZSBwYXJlbnQgdG8gYSB3YWl0IHN0YXR1cyAod2FpdGluZywgZGVsYXllZCBvciBwcmlvcml0aXplZCkgaWYgbmVlZGVkLlxuXV1cbi0tIEluY2x1ZGVzXG4tLVtbXG4gIE1vdmUgcGFyZW50IHRvIGEgd2FpdCBzdGF0dXMgKHdhaXQsIHByaW9yaXRpemVkIG9yIGRlbGF5ZWQpXG5dXVxuLS0gSW5jbHVkZXNcbi0tW1tcbiAgQWRkIGRlbGF5IG1hcmtlciBpZiBuZWVkZWQuXG5dXVxuLS0gSW5jbHVkZXNcbi0tW1tcbiAgRnVuY3Rpb24gdG8gcmV0dXJuIHRoZSBuZXh0IGRlbGF5ZWQgam9iIHRpbWVzdGFtcC5cbl1dXG5sb2NhbCBmdW5jdGlvbiBnZXROZXh0RGVsYXllZFRpbWVzdGFtcChkZWxheWVkS2V5KVxuICBsb2NhbCByZXN1bHQgPSByY2FsbChcIlpSQU5HRVwiLCBkZWxheWVkS2V5LCAwLCAwLCBcIldJVEhTQ09SRVNcIilcbiAgaWYgI3Jlc3VsdCB0aGVuXG4gICAgbG9jYWwgbmV4dFRpbWVzdGFtcCA9IHRvbnVtYmVyKHJlc3VsdFsyXSlcbiAgICBpZiBuZXh0VGltZXN0YW1wIH49IG5pbCB0aGVuXG4gICAgICByZXR1cm4gbmV4dFRpbWVzdGFtcCAvIDB4MTAwMFxuICAgIGVuZFxuICBlbmRcbmVuZFxubG9jYWwgZnVuY3Rpb24gYWRkRGVsYXlNYXJrZXJJZk5lZWRlZChtYXJrZXJLZXksIGRlbGF5ZWRLZXkpXG4gIGxvY2FsIG5leHRUaW1lc3RhbXAgPSBnZXROZXh0RGVsYXllZFRpbWVzdGFtcChkZWxheWVkS2V5KVxuICBpZiBuZXh0VGltZXN0YW1wIH49IG5pbCB0aGVuXG4gICAgLS0gUmVwbGFjZSB0aGUgc2NvcmUgb2YgdGhlIG1hcmtlciB3aXRoIHRoZSBuZXdlc3Qga25vd25cbiAgICAtLSBuZXh0IHRpbWVzdGFtcC5cbiAgICByY2FsbChcIlpBRERcIiwgbWFya2VyS2V5LCBuZXh0VGltZXN0YW1wLCBcIjFcIilcbiAgZW5kXG5lbmRcbi0tW1tcbiAgRnVuY3Rpb24gdG8gYWRkIGpvYiBpbiB0YXJnZXQgbGlzdCBhbmQgYWRkIG1hcmtlciBpZiBuZWVkZWQuXG5dXVxuLS0gSW5jbHVkZXNcbi0tW1tcbiAgQWRkIG1hcmtlciBpZiBuZWVkZWQgd2hlbiBhIGpvYiBpcyBhdmFpbGFibGUuXG5dXVxubG9jYWwgZnVuY3Rpb24gYWRkQmFzZU1hcmtlcklmTmVlZGVkKG1hcmtlcktleSwgaXNQYXVzZWRPck1heGVkKVxuICBpZiBub3QgaXNQYXVzZWRPck1heGVkIHRoZW5cbiAgICByY2FsbChcIlpBRERcIiwgbWFya2VyS2V5LCAwLCBcIjBcIilcbiAgZW5kICBcbmVuZFxubG9jYWwgZnVuY3Rpb24gYWRkSm9iSW5UYXJnZXRMaXN0KHRhcmdldEtleSwgbWFya2VyS2V5LCBwdXNoQ21kLCBpc1BhdXNlZE9yTWF4ZWQsIGpvYklkKVxuICByY2FsbChwdXNoQ21kLCB0YXJnZXRLZXksIGpvYklkKVxuICBhZGRCYXNlTWFya2VySWZOZWVkZWQobWFya2VyS2V5LCBpc1BhdXNlZE9yTWF4ZWQpXG5lbmRcbi0tW1tcbiAgRnVuY3Rpb24gdG8gYWRkIGpvYiBjb25zaWRlcmluZyBwcmlvcml0eS5cbl1dXG4tLSBJbmNsdWRlc1xuLS1bW1xuICBGdW5jdGlvbiB0byBnZXQgcHJpb3JpdHkgc2NvcmUuXG5dXVxubG9jYWwgZnVuY3Rpb24gZ2V0UHJpb3JpdHlTY29yZShwcmlvcml0eSwgcHJpb3JpdHlDb3VudGVyS2V5KVxuICBsb2NhbCBwcmlvQ291bnRlciA9IHJjYWxsKFwiSU5DUlwiLCBwcmlvcml0eUNvdW50ZXJLZXkpXG4gIHJldHVybiBwcmlvcml0eSAqIDB4MTAwMDAwMDAwICsgcHJpb0NvdW50ZXIgJSAweDEwMDAwMDAwMFxuZW5kXG5sb2NhbCBmdW5jdGlvbiBhZGRKb2JXaXRoUHJpb3JpdHkobWFya2VyS2V5LCBwcmlvcml0aXplZEtleSwgcHJpb3JpdHksIGpvYklkLCBwcmlvcml0eUNvdW50ZXJLZXksXG4gIGlzUGF1c2VkT3JNYXhlZClcbiAgbG9jYWwgc2NvcmUgPSBnZXRQcmlvcml0eVNjb3JlKHByaW9yaXR5LCBwcmlvcml0eUNvdW50ZXJLZXkpXG4gIHJjYWxsKFwiWkFERFwiLCBwcmlvcml0aXplZEtleSwgc2NvcmUsIGpvYklkKVxuICBhZGRCYXNlTWFya2VySWZOZWVkZWQobWFya2VyS2V5LCBpc1BhdXNlZE9yTWF4ZWQpXG5lbmRcbi0tW1tcbiAgRnVuY3Rpb24gdG8gY2hlY2sgaWYgcXVldWUgaXMgcGF1c2VkIG9yIG1heGVkXG4gIChzaW5jZSBhbiBlbXB0eSBsaXN0IGFuZCAhRVhJU1RTIGFyZSBub3QgcmVhbGx5IHRoZSBzYW1lKS5cbl1dXG5sb2NhbCBmdW5jdGlvbiBpc1F1ZXVlUGF1c2VkT3JNYXhlZChxdWV1ZU1ldGFLZXksIGFjdGl2ZUtleSlcbiAgbG9jYWwgcXVldWVBdHRyaWJ1dGVzID0gcmNhbGwoXCJITUdFVFwiLCBxdWV1ZU1ldGFLZXksIFwicGF1c2VkXCIsIFwiY29uY3VycmVuY3lcIilcbiAgaWYgcXVldWVBdHRyaWJ1dGVzWzFdIHRoZW5cbiAgICByZXR1cm4gdHJ1ZVxuICBlbHNlXG4gICAgaWYgcXVldWVBdHRyaWJ1dGVzWzJdIHRoZW5cbiAgICAgIGxvY2FsIGFjdGl2ZUNvdW50ID0gcmNhbGwoXCJMTEVOXCIsIGFjdGl2ZUtleSlcbiAgICAgIHJldHVybiBhY3RpdmVDb3VudCA+PSB0b251bWJlcihxdWV1ZUF0dHJpYnV0ZXNbMl0pXG4gICAgZW5kXG4gIGVuZFxuICByZXR1cm4gZmFsc2VcbmVuZFxuLS1bW1xuICBGdW5jdGlvbiB0byBjaGVjayBmb3IgdGhlIG1ldGEucGF1c2VkIGtleSB0byBkZWNpZGUgaWYgd2UgYXJlIHBhdXNlZCBvciBub3RcbiAgKHNpbmNlIGFuIGVtcHR5IGxpc3QgYW5kICFFWElTVFMgYXJlIG5vdCByZWFsbHkgdGhlIHNhbWUpLlxuXV1cbmxvY2FsIGZ1bmN0aW9uIGdldFRhcmdldFF1ZXVlTGlzdChxdWV1ZU1ldGFLZXksIGFjdGl2ZUtleSwgd2FpdEtleSwgcGF1c2VkS2V5KVxuICBsb2NhbCBxdWV1ZUF0dHJpYnV0ZXMgPSByY2FsbChcIkhNR0VUXCIsIHF1ZXVlTWV0YUtleSwgXCJwYXVzZWRcIiwgXCJjb25jdXJyZW5jeVwiLCBcIm1heFwiLCBcImR1cmF0aW9uXCIpXG4gIGlmIHF1ZXVlQXR0cmlidXRlc1sxXSB0aGVuXG4gICAgcmV0dXJuIHBhdXNlZEtleSwgdHJ1ZSwgcXVldWVBdHRyaWJ1dGVzWzNdLCBxdWV1ZUF0dHJpYnV0ZXNbNF1cbiAgZWxzZVxuICAgIGlmIHF1ZXVlQXR0cmlidXRlc1syXSB0aGVuXG4gICAgICBsb2NhbCBhY3RpdmVDb3VudCA9IHJjYWxsKFwiTExFTlwiLCBhY3RpdmVLZXkpXG4gICAgICBpZiBhY3RpdmVDb3VudCA+PSB0b251bWJlcihxdWV1ZUF0dHJpYnV0ZXNbMl0pIHRoZW5cbiAgICAgICAgcmV0dXJuIHdhaXRLZXksIHRydWUsIHF1ZXVlQXR0cmlidXRlc1szXSwgcXVldWVBdHRyaWJ1dGVzWzRdXG4gICAgICBlbHNlXG4gICAgICAgIHJldHVybiB3YWl0S2V5LCBmYWxzZSwgcXVldWVBdHRyaWJ1dGVzWzNdLCBxdWV1ZUF0dHJpYnV0ZXNbNF1cbiAgICAgIGVuZFxuICAgIGVuZFxuICBlbmRcbiAgcmV0dXJuIHdhaXRLZXksIGZhbHNlLCBxdWV1ZUF0dHJpYnV0ZXNbM10sIHF1ZXVlQXR0cmlidXRlc1s0XVxuZW5kXG5sb2NhbCBmdW5jdGlvbiBtb3ZlUGFyZW50VG9XYWl0KHBhcmVudFF1ZXVlS2V5LCBwYXJlbnRLZXksIHBhcmVudElkLCB0aW1lc3RhbXApXG4gICAgbG9jYWwgcGFyZW50V2FpdEtleSA9IHBhcmVudFF1ZXVlS2V5IC4uIFwiOndhaXRcIlxuICAgIGxvY2FsIHBhcmVudFBhdXNlZEtleSA9IHBhcmVudFF1ZXVlS2V5IC4uIFwiOnBhdXNlZFwiXG4gICAgbG9jYWwgcGFyZW50QWN0aXZlS2V5ID0gcGFyZW50UXVldWVLZXkgLi4gXCI6YWN0aXZlXCJcbiAgICBsb2NhbCBwYXJlbnRNZXRhS2V5ID0gcGFyZW50UXVldWVLZXkgLi4gXCI6bWV0YVwiXG4gICAgbG9jYWwgcGFyZW50TWFya2VyS2V5ID0gcGFyZW50UXVldWVLZXkgLi4gXCI6bWFya2VyXCJcbiAgICBsb2NhbCBqb2JBdHRyaWJ1dGVzID0gcmNhbGwoXCJITUdFVFwiLCBwYXJlbnRLZXksIFwicHJpb3JpdHlcIiwgXCJkZWxheVwiKVxuICAgIGxvY2FsIHByaW9yaXR5ID0gdG9udW1iZXIoam9iQXR0cmlidXRlc1sxXSkgb3IgMFxuICAgIGxvY2FsIGRlbGF5ID0gdG9udW1iZXIoam9iQXR0cmlidXRlc1syXSkgb3IgMFxuICAgIGlmIGRlbGF5ID4gMCB0aGVuXG4gICAgICAgIGxvY2FsIGRlbGF5ZWRUaW1lc3RhbXAgPSB0b251bWJlcih0aW1lc3RhbXApICsgZGVsYXlcbiAgICAgICAgbG9jYWwgc2NvcmUgPSBkZWxheWVkVGltZXN0YW1wICogMHgxMDAwXG4gICAgICAgIGxvY2FsIHBhcmVudERlbGF5ZWRLZXkgPSBwYXJlbnRRdWV1ZUtleSAuLiBcIjpkZWxheWVkXCJcbiAgICAgICAgcmNhbGwoXCJaQUREXCIsIHBhcmVudERlbGF5ZWRLZXksIHNjb3JlLCBwYXJlbnRJZClcbiAgICAgICAgcmNhbGwoXCJYQUREXCIsIHBhcmVudFF1ZXVlS2V5IC4uIFwiOmV2ZW50c1wiLCBcIipcIiwgXCJldmVudFwiLCBcImRlbGF5ZWRcIiwgXCJqb2JJZFwiLCBwYXJlbnRJZCwgXCJkZWxheVwiLFxuICAgICAgICAgICAgZGVsYXllZFRpbWVzdGFtcClcbiAgICAgICAgYWRkRGVsYXlNYXJrZXJJZk5lZWRlZChwYXJlbnRNYXJrZXJLZXksIHBhcmVudERlbGF5ZWRLZXkpXG4gICAgZWxzZVxuICAgICAgICBpZiBwcmlvcml0eSA9PSAwIHRoZW5cbiAgICAgICAgICAgIGxvY2FsIHBhcmVudFRhcmdldCwgaXNQYXJlbnRQYXVzZWRPck1heGVkID0gZ2V0VGFyZ2V0UXVldWVMaXN0KHBhcmVudE1ldGFLZXksIHBhcmVudEFjdGl2ZUtleSxcbiAgICAgICAgICAgICAgICBwYXJlbnRXYWl0S2V5LCBwYXJlbnRQYXVzZWRLZXkpXG4gICAgICAgICAgICBhZGRKb2JJblRhcmdldExpc3QocGFyZW50VGFyZ2V0LCBwYXJlbnRNYXJrZXJLZXksIFwiUlBVU0hcIiwgaXNQYXJlbnRQYXVzZWRPck1heGVkLCBwYXJlbnRJZClcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgbG9jYWwgaXNQYXVzZWRPck1heGVkID0gaXNRdWV1ZVBhdXNlZE9yTWF4ZWQocGFyZW50TWV0YUtleSwgcGFyZW50QWN0aXZlS2V5KVxuICAgICAgICAgICAgYWRkSm9iV2l0aFByaW9yaXR5KHBhcmVudE1hcmtlcktleSwgcGFyZW50UXVldWVLZXkgLi4gXCI6cHJpb3JpdGl6ZWRcIiwgcHJpb3JpdHksIHBhcmVudElkLFxuICAgICAgICAgICAgICAgIHBhcmVudFF1ZXVlS2V5IC4uIFwiOnBjXCIsIGlzUGF1c2VkT3JNYXhlZClcbiAgICAgICAgZW5kXG4gICAgICAgIHJjYWxsKFwiWEFERFwiLCBwYXJlbnRRdWV1ZUtleSAuLiBcIjpldmVudHNcIiwgXCIqXCIsIFwiZXZlbnRcIiwgXCJ3YWl0aW5nXCIsIFwiam9iSWRcIiwgcGFyZW50SWQsIFwicHJldlwiLFxuICAgICAgICAgICAgXCJ3YWl0aW5nLWNoaWxkcmVuXCIpXG4gICAgZW5kXG5lbmRcbmxvY2FsIGZ1bmN0aW9uIG1vdmVQYXJlbnRUb1dhaXRJZk5lZWRlZChwYXJlbnRRdWV1ZUtleSwgcGFyZW50S2V5LCBwYXJlbnRJZCwgdGltZXN0YW1wKVxuICBpZiByY2FsbChcIkVYSVNUU1wiLCBwYXJlbnRLZXkpID09IDEgdGhlblxuICAgIGxvY2FsIHBhcmVudFdhaXRpbmdDaGlsZHJlbktleSA9IHBhcmVudFF1ZXVlS2V5IC4uIFwiOndhaXRpbmctY2hpbGRyZW5cIlxuICAgIGlmIHJjYWxsKFwiWlNDT1JFXCIsIHBhcmVudFdhaXRpbmdDaGlsZHJlbktleSwgcGFyZW50SWQpIHRoZW4gICAgXG4gICAgICByY2FsbChcIlpSRU1cIiwgcGFyZW50V2FpdGluZ0NoaWxkcmVuS2V5LCBwYXJlbnRJZClcbiAgICAgIG1vdmVQYXJlbnRUb1dhaXQocGFyZW50UXVldWVLZXksIHBhcmVudEtleSwgcGFyZW50SWQsIHRpbWVzdGFtcClcbiAgICBlbmRcbiAgZW5kXG5lbmRcbmxvY2FsIGZ1bmN0aW9uIG1vdmVQYXJlbnRUb1dhaXRJZk5vUGVuZGluZ0RlcGVuZGVuY2llcyhwYXJlbnRRdWV1ZUtleSwgcGFyZW50RGVwZW5kZW5jaWVzS2V5LCBwYXJlbnRLZXksXG4gIHBhcmVudElkLCB0aW1lc3RhbXApXG4gIGxvY2FsIGRvTm90SGF2ZVBlbmRpbmdEZXBlbmRlbmNpZXMgPSByY2FsbChcIlNDQVJEXCIsIHBhcmVudERlcGVuZGVuY2llc0tleSkgPT0gMFxuICBpZiBkb05vdEhhdmVQZW5kaW5nRGVwZW5kZW5jaWVzIHRoZW5cbiAgICBtb3ZlUGFyZW50VG9XYWl0SWZOZWVkZWQocGFyZW50UXVldWVLZXksIHBhcmVudEtleSwgcGFyZW50SWQsIHRpbWVzdGFtcClcbiAgZW5kXG5lbmRcbmxvY2FsIGZ1bmN0aW9uIHVwZGF0ZVBhcmVudERlcHNJZk5lZWRlZChwYXJlbnRLZXksIHBhcmVudFF1ZXVlS2V5LCBwYXJlbnREZXBlbmRlbmNpZXNLZXksXG4gIHBhcmVudElkLCBqb2JJZEtleSwgcmV0dXJudmFsdWUsIHRpbWVzdGFtcCApXG4gIGxvY2FsIHByb2Nlc3NlZFNldCA9IHBhcmVudEtleSAuLiBcIjpwcm9jZXNzZWRcIlxuICByY2FsbChcIkhTRVRcIiwgcHJvY2Vzc2VkU2V0LCBqb2JJZEtleSwgcmV0dXJudmFsdWUpXG4gIG1vdmVQYXJlbnRUb1dhaXRJZk5vUGVuZGluZ0RlcGVuZGVuY2llcyhwYXJlbnRRdWV1ZUtleSwgcGFyZW50RGVwZW5kZW5jaWVzS2V5LCBwYXJlbnRLZXksIHBhcmVudElkLCB0aW1lc3RhbXApXG5lbmRcbmxvY2FsIGZ1bmN0aW9uIHVwZGF0ZUV4aXN0aW5nSm9ic1BhcmVudChwYXJlbnRLZXksIHBhcmVudCwgcGFyZW50RGF0YSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnREZXBlbmRlbmNpZXNLZXksIGNvbXBsZXRlZEtleSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqb2JJZEtleSwgam9iSWQsIHRpbWVzdGFtcClcbiAgICBpZiBwYXJlbnRLZXkgfj0gbmlsIHRoZW5cbiAgICAgICAgaWYgcmNhbGwoXCJaU0NPUkVcIiwgY29tcGxldGVkS2V5LCBqb2JJZCkgdGhlblxuICAgICAgICAgICAgbG9jYWwgcmV0dXJudmFsdWUgPSByY2FsbChcIkhHRVRcIiwgam9iSWRLZXksIFwicmV0dXJudmFsdWVcIilcbiAgICAgICAgICAgIHVwZGF0ZVBhcmVudERlcHNJZk5lZWRlZChwYXJlbnRLZXksIHBhcmVudFsncXVldWVLZXknXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnREZXBlbmRlbmNpZXNLZXksIHBhcmVudFsnaWQnXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqb2JJZEtleSwgcmV0dXJudmFsdWUsIHRpbWVzdGFtcClcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgaWYgcGFyZW50RGVwZW5kZW5jaWVzS2V5IH49IG5pbCB0aGVuXG4gICAgICAgICAgICAgICAgcmNhbGwoXCJTQUREXCIsIHBhcmVudERlcGVuZGVuY2llc0tleSwgam9iSWRLZXkpXG4gICAgICAgICAgICBlbmRcbiAgICAgICAgZW5kXG4gICAgICAgIHJjYWxsKFwiSE1TRVRcIiwgam9iSWRLZXksIFwicGFyZW50S2V5XCIsIHBhcmVudEtleSwgXCJwYXJlbnRcIiwgcGFyZW50RGF0YSlcbiAgICBlbmRcbmVuZFxubG9jYWwgZnVuY3Rpb24gaGFuZGxlRHVwbGljYXRlZEpvYihqb2JLZXksIGpvYklkLCBjdXJyZW50UGFyZW50S2V5LCBjdXJyZW50UGFyZW50LFxuICBwYXJlbnREYXRhLCBwYXJlbnREZXBlbmRlbmNpZXNLZXksIGNvbXBsZXRlZEtleSwgZXZlbnRzS2V5LCBtYXhFdmVudHMsIHRpbWVzdGFtcClcbiAgbG9jYWwgZXhpc3RlZFBhcmVudEtleSA9IHJjYWxsKFwiSEdFVFwiLCBqb2JLZXksIFwicGFyZW50S2V5XCIpXG4gIGlmIG5vdCBleGlzdGVkUGFyZW50S2V5IG9yIGV4aXN0ZWRQYXJlbnRLZXkgPT0gY3VycmVudFBhcmVudEtleSB0aGVuXG4gICAgdXBkYXRlRXhpc3RpbmdKb2JzUGFyZW50KGN1cnJlbnRQYXJlbnRLZXksIGN1cnJlbnRQYXJlbnQsIHBhcmVudERhdGEsXG4gICAgICBwYXJlbnREZXBlbmRlbmNpZXNLZXksIGNvbXBsZXRlZEtleSwgam9iS2V5LFxuICAgICAgam9iSWQsIHRpbWVzdGFtcClcbiAgZWxzZVxuICAgIGlmIGN1cnJlbnRQYXJlbnRLZXkgfj0gbmlsIGFuZCBjdXJyZW50UGFyZW50S2V5IH49IGV4aXN0ZWRQYXJlbnRLZXlcbiAgICAgIGFuZCAocmNhbGwoXCJFWElTVFNcIiwgZXhpc3RlZFBhcmVudEtleSkgPT0gMSkgdGhlblxuICAgICAgcmV0dXJuIC03XG4gICAgZW5kXG4gIGVuZFxuICByY2FsbChcIlhBRERcIiwgZXZlbnRzS2V5LCBcIk1BWExFTlwiLCBcIn5cIiwgbWF4RXZlbnRzLCBcIipcIiwgXCJldmVudFwiLFxuICAgIFwiZHVwbGljYXRlZFwiLCBcImpvYklkXCIsIGpvYklkKVxuICByZXR1cm4gam9iSWQgLi4gXCJcIiAtLSBjb252ZXJ0IHRvIHN0cmluZ1xuZW5kXG4tLVtbXG4gIEZ1bmN0aW9uIHRvIHN0b3JlIGEgam9iXG5dXVxubG9jYWwgZnVuY3Rpb24gc3RvcmVKb2IoZXZlbnRzS2V5LCBqb2JJZEtleSwgam9iSWQsIG5hbWUsIGRhdGEsIG9wdHMsIHRpbWVzdGFtcCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudEtleSwgcGFyZW50RGF0YSwgcmVwZWF0Sm9iS2V5KVxuICAgIGxvY2FsIGpzb25PcHRzID0gY2pzb24uZW5jb2RlKG9wdHMpXG4gICAgbG9jYWwgZGVsYXkgPSBvcHRzWydkZWxheSddIG9yIDBcbiAgICBsb2NhbCBwcmlvcml0eSA9IG9wdHNbJ3ByaW9yaXR5J10gb3IgMFxuICAgIGxvY2FsIGRlYm91bmNlSWQgPSBvcHRzWydkZSddIGFuZCBvcHRzWydkZSddWydpZCddXG4gICAgbG9jYWwgb3B0aW9uYWxWYWx1ZXMgPSB7fVxuICAgIGlmIHBhcmVudEtleSB+PSBuaWwgdGhlblxuICAgICAgICB0YWJsZS5pbnNlcnQob3B0aW9uYWxWYWx1ZXMsIFwicGFyZW50S2V5XCIpXG4gICAgICAgIHRhYmxlLmluc2VydChvcHRpb25hbFZhbHVlcywgcGFyZW50S2V5KVxuICAgICAgICB0YWJsZS5pbnNlcnQob3B0aW9uYWxWYWx1ZXMsIFwicGFyZW50XCIpXG4gICAgICAgIHRhYmxlLmluc2VydChvcHRpb25hbFZhbHVlcywgcGFyZW50RGF0YSlcbiAgICBlbmRcbiAgICBpZiByZXBlYXRKb2JLZXkgdGhlblxuICAgICAgICB0YWJsZS5pbnNlcnQob3B0aW9uYWxWYWx1ZXMsIFwicmprXCIpXG4gICAgICAgIHRhYmxlLmluc2VydChvcHRpb25hbFZhbHVlcywgcmVwZWF0Sm9iS2V5KVxuICAgIGVuZFxuICAgIGlmIGRlYm91bmNlSWQgdGhlblxuICAgICAgICB0YWJsZS5pbnNlcnQob3B0aW9uYWxWYWx1ZXMsIFwiZGVpZFwiKVxuICAgICAgICB0YWJsZS5pbnNlcnQob3B0aW9uYWxWYWx1ZXMsIGRlYm91bmNlSWQpXG4gICAgZW5kXG4gICAgcmNhbGwoXCJITVNFVFwiLCBqb2JJZEtleSwgXCJuYW1lXCIsIG5hbWUsIFwiZGF0YVwiLCBkYXRhLCBcIm9wdHNcIiwganNvbk9wdHMsXG4gICAgICAgICAgXCJ0aW1lc3RhbXBcIiwgdGltZXN0YW1wLCBcImRlbGF5XCIsIGRlbGF5LCBcInByaW9yaXR5XCIsIHByaW9yaXR5LFxuICAgICAgICAgIHVucGFjayhvcHRpb25hbFZhbHVlcykpXG4gICAgcmNhbGwoXCJYQUREXCIsIGV2ZW50c0tleSwgXCIqXCIsIFwiZXZlbnRcIiwgXCJhZGRlZFwiLCBcImpvYklkXCIsIGpvYklkLCBcIm5hbWVcIiwgbmFtZSlcbiAgICByZXR1cm4gZGVsYXksIHByaW9yaXR5XG5lbmRcbmlmIHBhcmVudEtleSB+PSBuaWwgdGhlblxuICAgIGlmIHJjYWxsKFwiRVhJU1RTXCIsIHBhcmVudEtleSkgfj0gMSB0aGVuIHJldHVybiAtNSBlbmRcbiAgICBwYXJlbnREYXRhID0gY2pzb24uZW5jb2RlKHBhcmVudClcbmVuZFxubG9jYWwgam9iQ291bnRlciA9IHJjYWxsKFwiSU5DUlwiLCBpZEtleSlcbmxvY2FsIG1heEV2ZW50cyA9IGdldE9yU2V0TWF4RXZlbnRzKG1ldGFLZXkpXG5sb2NhbCBwYXJlbnREZXBlbmRlbmNpZXNLZXkgPSBhcmdzWzZdXG5sb2NhbCB0aW1lc3RhbXAgPSBhcmdzWzRdXG5pZiBhcmdzWzJdID09IFwiXCIgdGhlblxuICAgIGpvYklkID0gam9iQ291bnRlclxuICAgIGpvYklkS2V5ID0gYXJnc1sxXSAuLiBqb2JJZFxuZWxzZVxuICAgIGpvYklkID0gYXJnc1syXVxuICAgIGpvYklkS2V5ID0gYXJnc1sxXSAuLiBqb2JJZFxuICAgIGlmIHJjYWxsKFwiRVhJU1RTXCIsIGpvYklkS2V5KSA9PSAxIHRoZW5cbiAgICAgICAgcmV0dXJuIGhhbmRsZUR1cGxpY2F0ZWRKb2Ioam9iSWRLZXksIGpvYklkLCBwYXJlbnRLZXksIHBhcmVudCxcbiAgICAgICAgICAgIHBhcmVudERhdGEsIHBhcmVudERlcGVuZGVuY2llc0tleSwgY29tcGxldGVkS2V5LCBldmVudHNLZXksXG4gICAgICAgICAgICBtYXhFdmVudHMsIHRpbWVzdGFtcClcbiAgICBlbmRcbmVuZFxubG9jYWwgZGVkdXBsaWNhdGlvbkpvYklkID0gZGVkdXBsaWNhdGVKb2Iob3B0c1snZGUnXSwgam9iSWQsIEtFWVNbM10sXG4gIGRlZHVwbGljYXRpb25LZXksIGV2ZW50c0tleSwgbWF4RXZlbnRzLCBhcmdzWzFdKVxuaWYgZGVkdXBsaWNhdGlvbkpvYklkIHRoZW5cbiAgcmV0dXJuIGRlZHVwbGljYXRpb25Kb2JJZFxuZW5kXG4tLSBTdG9yZSB0aGUgam9iLlxuc3RvcmVKb2IoZXZlbnRzS2V5LCBqb2JJZEtleSwgam9iSWQsIGFyZ3NbM10sIEFSR1ZbMl0sIG9wdHMsIHRpbWVzdGFtcCxcbiAgICAgICAgIHBhcmVudEtleSwgcGFyZW50RGF0YSwgcmVwZWF0Sm9iS2V5KVxubG9jYWwgd2FpdENoaWxkcmVuS2V5ID0gS0VZU1s0XVxucmNhbGwoXCJaQUREXCIsIHdhaXRDaGlsZHJlbktleSwgdGltZXN0YW1wLCBqb2JJZClcbnJjYWxsKFwiWEFERFwiLCBldmVudHNLZXksIFwiTUFYTEVOXCIsIFwiflwiLCBtYXhFdmVudHMsIFwiKlwiLCBcImV2ZW50XCIsXG4gICAgICBcIndhaXRpbmctY2hpbGRyZW5cIiwgXCJqb2JJZFwiLCBqb2JJZClcbi0tIENoZWNrIGlmIHRoaXMgam9iIGlzIGEgY2hpbGQgb2YgYW5vdGhlciBqb2IsIGlmIHNvIGFkZCBpdCB0byB0aGUgcGFyZW50cyBkZXBlbmRlbmNpZXNcbmlmIHBhcmVudERlcGVuZGVuY2llc0tleSB+PSBuaWwgdGhlblxuICAgIHJjYWxsKFwiU0FERFwiLCBwYXJlbnREZXBlbmRlbmNpZXNLZXksIGpvYklkS2V5KVxuZW5kXG5yZXR1cm4gam9iSWQgLi4gXCJcIiAtLSBjb252ZXJ0IHRvIHN0cmluZ1xuYDtcbmV4cG9ydHMuYWRkUGFyZW50Sm9iID0ge1xuICAgIG5hbWU6ICdhZGRQYXJlbnRKb2InLFxuICAgIGNvbnRlbnQsXG4gICAga2V5czogNixcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1hZGRQYXJlbnRKb2ItNi5qcy5tYXAiXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJhZGRQYXJlbnRKb2IiLCJjb250ZW50IiwibmFtZSIsImtleXMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/scripts/addParentJob-6.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/scripts/addPrioritizedJob-9.js":
/*!*********************************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/scripts/addPrioritizedJob-9.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.addPrioritizedJob = void 0;\nconst content = `--[[\n  Adds a priotitized job to the queue by doing the following:\n    - Increases the job counter if needed.\n    - Creates a new job key with the job data.\n    - Adds the job to the \"added\" list so that workers gets notified.\n    Input:\n      KEYS[1] 'marker',\n      KEYS[2] 'meta'\n      KEYS[3] 'id'\n      KEYS[4] 'prioritized'\n      KEYS[5] 'delayed'\n      KEYS[6] 'completed'\n      KEYS[7] 'active'\n      KEYS[8] events stream key\n      KEYS[9] 'pc' priority counter\n      ARGV[1] msgpacked arguments array\n            [1]  key prefix,\n            [2]  custom id (will not generate one automatically)\n            [3]  name\n            [4]  timestamp\n            [5]  parentKey?\n            [6]  parent dependencies key.\n            [7]  parent? {id, queueKey}\n            [8]  repeat job key\n            [9] deduplication key\n      ARGV[2] Json stringified job data\n      ARGV[3] msgpacked options\n      Output:\n        jobId  - OK\n        -5     - Missing parent key\n]] \nlocal metaKey = KEYS[2]\nlocal idKey = KEYS[3]\nlocal priorityKey = KEYS[4]\nlocal completedKey = KEYS[6]\nlocal activeKey = KEYS[7]\nlocal eventsKey = KEYS[8]\nlocal priorityCounterKey = KEYS[9]\nlocal jobId\nlocal jobIdKey\nlocal rcall = redis.call\nlocal args = cmsgpack.unpack(ARGV[1])\nlocal data = ARGV[2]\nlocal opts = cmsgpack.unpack(ARGV[3])\nlocal parentKey = args[5]\nlocal parent = args[7]\nlocal repeatJobKey = args[8]\nlocal deduplicationKey = args[9]\nlocal parentData\n-- Includes\n--[[\n  Function to add job considering priority.\n]]\n-- Includes\n--[[\n  Add marker if needed when a job is available.\n]]\nlocal function addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)\n  if not isPausedOrMaxed then\n    rcall(\"ZADD\", markerKey, 0, \"0\")\n  end  \nend\n--[[\n  Function to get priority score.\n]]\nlocal function getPriorityScore(priority, priorityCounterKey)\n  local prioCounter = rcall(\"INCR\", priorityCounterKey)\n  return priority * 0x100000000 + prioCounter % 0x100000000\nend\nlocal function addJobWithPriority(markerKey, prioritizedKey, priority, jobId, priorityCounterKey,\n  isPausedOrMaxed)\n  local score = getPriorityScore(priority, priorityCounterKey)\n  rcall(\"ZADD\", prioritizedKey, score, jobId)\n  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)\nend\n--[[\n  Function to debounce a job.\n]]\n-- Includes\n--[[\n  Function to remove job keys.\n]]\nlocal function removeJobKeys(jobKey)\n  return rcall(\"DEL\", jobKey, jobKey .. ':logs', jobKey .. ':dependencies',\n    jobKey .. ':processed', jobKey .. ':failed', jobKey .. ':unsuccessful')\nend\nlocal function removeDelayedJob(delayedKey, deduplicationKey, eventsKey, maxEvents, currentDeduplicatedJobId,\n    jobId, deduplicationId, prefix)\n    if rcall(\"ZREM\", delayedKey, currentDeduplicatedJobId) > 0 then\n        removeJobKeys(prefix .. currentDeduplicatedJobId)\n        rcall(\"XADD\", eventsKey, \"*\", \"event\", \"removed\", \"jobId\", currentDeduplicatedJobId,\n            \"prev\", \"delayed\")\n        -- TODO remove debounced event in next breaking change\n        rcall(\"XADD\", eventsKey, \"MAXLEN\", \"~\", maxEvents, \"*\", \"event\", \"debounced\", \"jobId\",\n            jobId, \"debounceId\", deduplicationId)\n        rcall(\"XADD\", eventsKey, \"MAXLEN\", \"~\", maxEvents, \"*\", \"event\", \"deduplicated\", \"jobId\",\n            jobId, \"deduplicationId\", deduplicationId, \"deduplicatedJobId\", currentDeduplicatedJobId)\n        return true\n    end\n    return false\nend\nlocal function deduplicateJob(deduplicationOpts, jobId, delayedKey, deduplicationKey, eventsKey, maxEvents,\n    prefix)\n    local deduplicationId = deduplicationOpts and deduplicationOpts['id']\n    if deduplicationId then\n        local ttl = deduplicationOpts['ttl']\n        if deduplicationOpts['replace'] then\n            if ttl and ttl > 0 then\n                local currentDebounceJobId = rcall('GET', deduplicationKey)\n                if currentDebounceJobId then\n                    local isRemoved = removeDelayedJob(delayedKey, deduplicationKey, eventsKey, maxEvents,\n                        currentDebounceJobId, jobId, deduplicationId, prefix)\n                    if isRemoved then\n                        if deduplicationOpts['extend'] then\n                            rcall('SET', deduplicationKey, jobId, 'PX', ttl)\n                        else\n                            rcall('SET', deduplicationKey, jobId, 'KEEPTTL')\n                        end\n                        return\n                    else\n                        return currentDebounceJobId\n                    end\n                else\n                    rcall('SET', deduplicationKey, jobId, 'PX', ttl)\n                    return\n                end\n            else\n                local currentDebounceJobId = rcall('GET', deduplicationKey)\n                if currentDebounceJobId then\n                    local isRemoved = removeDelayedJob(delayedKey, deduplicationKey, eventsKey, maxEvents,\n                        currentDebounceJobId, jobId, deduplicationId, prefix)\n                    if isRemoved then\n                        rcall('SET', deduplicationKey, jobId)\n                        return\n                    else\n                        return currentDebounceJobId\n                    end\n                else\n                    rcall('SET', deduplicationKey, jobId)\n                    return\n                end\n            end\n        else\n            local deduplicationKeyExists\n            if ttl and ttl > 0 then\n                if deduplicationOpts['extend'] then\n                    local currentDebounceJobId = rcall('GET', deduplicationKey)\n                    if currentDebounceJobId then\n                        rcall('SET', deduplicationKey, currentDebounceJobId, 'PX', ttl)\n                        rcall(\"XADD\", eventsKey, \"MAXLEN\", \"~\", maxEvents, \"*\", \"event\", \"debounced\",\n                            \"jobId\", currentDebounceJobId, \"debounceId\", deduplicationId)\n                        rcall(\"XADD\", eventsKey, \"MAXLEN\", \"~\", maxEvents, \"*\", \"event\", \"deduplicated\", \"jobId\",\n                            currentDebounceJobId, \"deduplicationId\", deduplicationId, \"deduplicatedJobId\", jobId)\n                        return currentDebounceJobId\n                    else\n                        rcall('SET', deduplicationKey, jobId, 'PX', ttl)\n                        return\n                    end\n                else\n                    deduplicationKeyExists = not rcall('SET', deduplicationKey, jobId, 'PX', ttl, 'NX')\n                end\n            else\n                deduplicationKeyExists = not rcall('SET', deduplicationKey, jobId, 'NX')\n            end\n            if deduplicationKeyExists then\n                local currentDebounceJobId = rcall('GET', deduplicationKey)\n                -- TODO remove debounced event in next breaking change\n                rcall(\"XADD\", eventsKey, \"MAXLEN\", \"~\", maxEvents, \"*\", \"event\", \"debounced\", \"jobId\",\n                    currentDebounceJobId, \"debounceId\", deduplicationId)\n                rcall(\"XADD\", eventsKey, \"MAXLEN\", \"~\", maxEvents, \"*\", \"event\", \"deduplicated\", \"jobId\",\n                    currentDebounceJobId, \"deduplicationId\", deduplicationId, \"deduplicatedJobId\", jobId)\n                return currentDebounceJobId\n            end\n        end\n    end\nend\n--[[\n  Function to store a job\n]]\nlocal function storeJob(eventsKey, jobIdKey, jobId, name, data, opts, timestamp,\n                        parentKey, parentData, repeatJobKey)\n    local jsonOpts = cjson.encode(opts)\n    local delay = opts['delay'] or 0\n    local priority = opts['priority'] or 0\n    local debounceId = opts['de'] and opts['de']['id']\n    local optionalValues = {}\n    if parentKey ~= nil then\n        table.insert(optionalValues, \"parentKey\")\n        table.insert(optionalValues, parentKey)\n        table.insert(optionalValues, \"parent\")\n        table.insert(optionalValues, parentData)\n    end\n    if repeatJobKey then\n        table.insert(optionalValues, \"rjk\")\n        table.insert(optionalValues, repeatJobKey)\n    end\n    if debounceId then\n        table.insert(optionalValues, \"deid\")\n        table.insert(optionalValues, debounceId)\n    end\n    rcall(\"HMSET\", jobIdKey, \"name\", name, \"data\", data, \"opts\", jsonOpts,\n          \"timestamp\", timestamp, \"delay\", delay, \"priority\", priority,\n          unpack(optionalValues))\n    rcall(\"XADD\", eventsKey, \"*\", \"event\", \"added\", \"jobId\", jobId, \"name\", name)\n    return delay, priority\nend\n--[[\n  Function to get max events value or set by default 10000.\n]]\nlocal function getOrSetMaxEvents(metaKey)\n  local maxEvents = rcall(\"HGET\", metaKey, \"opts.maxLenEvents\")\n  if not maxEvents then\n    maxEvents = 10000\n    rcall(\"HSET\", metaKey, \"opts.maxLenEvents\", maxEvents)\n  end\n  return maxEvents\nend\n--[[\n  Function to handle the case when job is duplicated.\n]]\n-- Includes\n--[[\n    This function is used to update the parent's dependencies if the job\n    is already completed and about to be ignored. The parent must get its\n    dependencies updated to avoid the parent job being stuck forever in \n    the waiting-children state.\n]]\n-- Includes\n--[[\n  Validate and move or add dependencies to parent.\n]]\n-- Includes\n--[[\n  Validate and move parent to a wait status (waiting, delayed or prioritized)\n  if no pending dependencies.\n]]\n-- Includes\n--[[\n  Validate and move parent to a wait status (waiting, delayed or prioritized) if needed.\n]]\n-- Includes\n--[[\n  Move parent to a wait status (wait, prioritized or delayed)\n]]\n-- Includes\n--[[\n  Add delay marker if needed.\n]]\n-- Includes\n--[[\n  Function to return the next delayed job timestamp.\n]]\nlocal function getNextDelayedTimestamp(delayedKey)\n  local result = rcall(\"ZRANGE\", delayedKey, 0, 0, \"WITHSCORES\")\n  if #result then\n    local nextTimestamp = tonumber(result[2])\n    if nextTimestamp ~= nil then\n      return nextTimestamp / 0x1000\n    end\n  end\nend\nlocal function addDelayMarkerIfNeeded(markerKey, delayedKey)\n  local nextTimestamp = getNextDelayedTimestamp(delayedKey)\n  if nextTimestamp ~= nil then\n    -- Replace the score of the marker with the newest known\n    -- next timestamp.\n    rcall(\"ZADD\", markerKey, nextTimestamp, \"1\")\n  end\nend\n--[[\n  Function to add job in target list and add marker if needed.\n]]\n-- Includes\nlocal function addJobInTargetList(targetKey, markerKey, pushCmd, isPausedOrMaxed, jobId)\n  rcall(pushCmd, targetKey, jobId)\n  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)\nend\n--[[\n  Function to check if queue is paused or maxed\n  (since an empty list and !EXISTS are not really the same).\n]]\nlocal function isQueuePausedOrMaxed(queueMetaKey, activeKey)\n  local queueAttributes = rcall(\"HMGET\", queueMetaKey, \"paused\", \"concurrency\")\n  if queueAttributes[1] then\n    return true\n  else\n    if queueAttributes[2] then\n      local activeCount = rcall(\"LLEN\", activeKey)\n      return activeCount >= tonumber(queueAttributes[2])\n    end\n  end\n  return false\nend\n--[[\n  Function to check for the meta.paused key to decide if we are paused or not\n  (since an empty list and !EXISTS are not really the same).\n]]\nlocal function getTargetQueueList(queueMetaKey, activeKey, waitKey, pausedKey)\n  local queueAttributes = rcall(\"HMGET\", queueMetaKey, \"paused\", \"concurrency\", \"max\", \"duration\")\n  if queueAttributes[1] then\n    return pausedKey, true, queueAttributes[3], queueAttributes[4]\n  else\n    if queueAttributes[2] then\n      local activeCount = rcall(\"LLEN\", activeKey)\n      if activeCount >= tonumber(queueAttributes[2]) then\n        return waitKey, true, queueAttributes[3], queueAttributes[4]\n      else\n        return waitKey, false, queueAttributes[3], queueAttributes[4]\n      end\n    end\n  end\n  return waitKey, false, queueAttributes[3], queueAttributes[4]\nend\nlocal function moveParentToWait(parentQueueKey, parentKey, parentId, timestamp)\n    local parentWaitKey = parentQueueKey .. \":wait\"\n    local parentPausedKey = parentQueueKey .. \":paused\"\n    local parentActiveKey = parentQueueKey .. \":active\"\n    local parentMetaKey = parentQueueKey .. \":meta\"\n    local parentMarkerKey = parentQueueKey .. \":marker\"\n    local jobAttributes = rcall(\"HMGET\", parentKey, \"priority\", \"delay\")\n    local priority = tonumber(jobAttributes[1]) or 0\n    local delay = tonumber(jobAttributes[2]) or 0\n    if delay > 0 then\n        local delayedTimestamp = tonumber(timestamp) + delay\n        local score = delayedTimestamp * 0x1000\n        local parentDelayedKey = parentQueueKey .. \":delayed\"\n        rcall(\"ZADD\", parentDelayedKey, score, parentId)\n        rcall(\"XADD\", parentQueueKey .. \":events\", \"*\", \"event\", \"delayed\", \"jobId\", parentId, \"delay\",\n            delayedTimestamp)\n        addDelayMarkerIfNeeded(parentMarkerKey, parentDelayedKey)\n    else\n        if priority == 0 then\n            local parentTarget, isParentPausedOrMaxed = getTargetQueueList(parentMetaKey, parentActiveKey,\n                parentWaitKey, parentPausedKey)\n            addJobInTargetList(parentTarget, parentMarkerKey, \"RPUSH\", isParentPausedOrMaxed, parentId)\n        else\n            local isPausedOrMaxed = isQueuePausedOrMaxed(parentMetaKey, parentActiveKey)\n            addJobWithPriority(parentMarkerKey, parentQueueKey .. \":prioritized\", priority, parentId,\n                parentQueueKey .. \":pc\", isPausedOrMaxed)\n        end\n        rcall(\"XADD\", parentQueueKey .. \":events\", \"*\", \"event\", \"waiting\", \"jobId\", parentId, \"prev\",\n            \"waiting-children\")\n    end\nend\nlocal function moveParentToWaitIfNeeded(parentQueueKey, parentKey, parentId, timestamp)\n  if rcall(\"EXISTS\", parentKey) == 1 then\n    local parentWaitingChildrenKey = parentQueueKey .. \":waiting-children\"\n    if rcall(\"ZSCORE\", parentWaitingChildrenKey, parentId) then    \n      rcall(\"ZREM\", parentWaitingChildrenKey, parentId)\n      moveParentToWait(parentQueueKey, parentKey, parentId, timestamp)\n    end\n  end\nend\nlocal function moveParentToWaitIfNoPendingDependencies(parentQueueKey, parentDependenciesKey, parentKey,\n  parentId, timestamp)\n  local doNotHavePendingDependencies = rcall(\"SCARD\", parentDependenciesKey) == 0\n  if doNotHavePendingDependencies then\n    moveParentToWaitIfNeeded(parentQueueKey, parentKey, parentId, timestamp)\n  end\nend\nlocal function updateParentDepsIfNeeded(parentKey, parentQueueKey, parentDependenciesKey,\n  parentId, jobIdKey, returnvalue, timestamp )\n  local processedSet = parentKey .. \":processed\"\n  rcall(\"HSET\", processedSet, jobIdKey, returnvalue)\n  moveParentToWaitIfNoPendingDependencies(parentQueueKey, parentDependenciesKey, parentKey, parentId, timestamp)\nend\nlocal function updateExistingJobsParent(parentKey, parent, parentData,\n                                        parentDependenciesKey, completedKey,\n                                        jobIdKey, jobId, timestamp)\n    if parentKey ~= nil then\n        if rcall(\"ZSCORE\", completedKey, jobId) then\n            local returnvalue = rcall(\"HGET\", jobIdKey, \"returnvalue\")\n            updateParentDepsIfNeeded(parentKey, parent['queueKey'],\n                                     parentDependenciesKey, parent['id'],\n                                     jobIdKey, returnvalue, timestamp)\n        else\n            if parentDependenciesKey ~= nil then\n                rcall(\"SADD\", parentDependenciesKey, jobIdKey)\n            end\n        end\n        rcall(\"HMSET\", jobIdKey, \"parentKey\", parentKey, \"parent\", parentData)\n    end\nend\nlocal function handleDuplicatedJob(jobKey, jobId, currentParentKey, currentParent,\n  parentData, parentDependenciesKey, completedKey, eventsKey, maxEvents, timestamp)\n  local existedParentKey = rcall(\"HGET\", jobKey, \"parentKey\")\n  if not existedParentKey or existedParentKey == currentParentKey then\n    updateExistingJobsParent(currentParentKey, currentParent, parentData,\n      parentDependenciesKey, completedKey, jobKey,\n      jobId, timestamp)\n  else\n    if currentParentKey ~= nil and currentParentKey ~= existedParentKey\n      and (rcall(\"EXISTS\", existedParentKey) == 1) then\n      return -7\n    end\n  end\n  rcall(\"XADD\", eventsKey, \"MAXLEN\", \"~\", maxEvents, \"*\", \"event\",\n    \"duplicated\", \"jobId\", jobId)\n  return jobId .. \"\" -- convert to string\nend\nif parentKey ~= nil then\n    if rcall(\"EXISTS\", parentKey) ~= 1 then return -5 end\n    parentData = cjson.encode(parent)\nend\nlocal jobCounter = rcall(\"INCR\", idKey)\nlocal maxEvents = getOrSetMaxEvents(metaKey)\nlocal parentDependenciesKey = args[6]\nlocal timestamp = args[4]\nif args[2] == \"\" then\n    jobId = jobCounter\n    jobIdKey = args[1] .. jobId\nelse\n    jobId = args[2]\n    jobIdKey = args[1] .. jobId\n    if rcall(\"EXISTS\", jobIdKey) == 1 then\n        return handleDuplicatedJob(jobIdKey, jobId, parentKey, parent,\n            parentData, parentDependenciesKey, completedKey, eventsKey,\n            maxEvents, timestamp)\n    end\nend\nlocal deduplicationJobId = deduplicateJob(opts['de'], jobId, KEYS[5],\n  deduplicationKey, eventsKey, maxEvents, args[1])\nif deduplicationJobId then\n  return deduplicationJobId\nend\n-- Store the job.\nlocal delay, priority = storeJob(eventsKey, jobIdKey, jobId, args[3], ARGV[2],\n                                 opts, timestamp, parentKey, parentData,\n                                 repeatJobKey)\n-- Add the job to the prioritized set\nlocal isPausedOrMaxed = isQueuePausedOrMaxed(metaKey, activeKey)\naddJobWithPriority( KEYS[1], priorityKey, priority, jobId, priorityCounterKey, isPausedOrMaxed)\n-- Emit waiting event\nrcall(\"XADD\", eventsKey, \"MAXLEN\", \"~\", maxEvents, \"*\", \"event\", \"waiting\",\n      \"jobId\", jobId)\n-- Check if this job is a child of another job, if so add it to the parents dependencies\nif parentDependenciesKey ~= nil then\n    rcall(\"SADD\", parentDependenciesKey, jobIdKey)\nend\nreturn jobId .. \"\" -- convert to string\n`;\nexports.addPrioritizedJob = {\n    name: \"addPrioritizedJob\",\n    content,\n    keys: 9\n}; //# sourceMappingURL=addPrioritizedJob-9.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL3NjcmlwdHMvYWRkUHJpb3JpdGl6ZWRKb2ItOS5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQseUJBQXlCLEdBQUcsS0FBSztBQUNqQyxNQUFNRyxVQUFVLENBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBd2JqQixDQUFDO0FBQ0RILHlCQUF5QixHQUFHO0lBQ3hCSSxNQUFNO0lBQ05EO0lBQ0FFLE1BQU07QUFDVixHQUNBLCtDQUErQyIsInNvdXJjZXMiOlsid2VicGFjazovL29ubHlmYW5zLXBsYXRmb3JtLy4vbm9kZV9tb2R1bGVzL2J1bGxtcS9kaXN0L2Nqcy9zY3JpcHRzL2FkZFByaW9yaXRpemVkSm9iLTkuanM/OTdiZCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuYWRkUHJpb3JpdGl6ZWRKb2IgPSB2b2lkIDA7XG5jb25zdCBjb250ZW50ID0gYC0tW1tcbiAgQWRkcyBhIHByaW90aXRpemVkIGpvYiB0byB0aGUgcXVldWUgYnkgZG9pbmcgdGhlIGZvbGxvd2luZzpcbiAgICAtIEluY3JlYXNlcyB0aGUgam9iIGNvdW50ZXIgaWYgbmVlZGVkLlxuICAgIC0gQ3JlYXRlcyBhIG5ldyBqb2Iga2V5IHdpdGggdGhlIGpvYiBkYXRhLlxuICAgIC0gQWRkcyB0aGUgam9iIHRvIHRoZSBcImFkZGVkXCIgbGlzdCBzbyB0aGF0IHdvcmtlcnMgZ2V0cyBub3RpZmllZC5cbiAgICBJbnB1dDpcbiAgICAgIEtFWVNbMV0gJ21hcmtlcicsXG4gICAgICBLRVlTWzJdICdtZXRhJ1xuICAgICAgS0VZU1szXSAnaWQnXG4gICAgICBLRVlTWzRdICdwcmlvcml0aXplZCdcbiAgICAgIEtFWVNbNV0gJ2RlbGF5ZWQnXG4gICAgICBLRVlTWzZdICdjb21wbGV0ZWQnXG4gICAgICBLRVlTWzddICdhY3RpdmUnXG4gICAgICBLRVlTWzhdIGV2ZW50cyBzdHJlYW0ga2V5XG4gICAgICBLRVlTWzldICdwYycgcHJpb3JpdHkgY291bnRlclxuICAgICAgQVJHVlsxXSBtc2dwYWNrZWQgYXJndW1lbnRzIGFycmF5XG4gICAgICAgICAgICBbMV0gIGtleSBwcmVmaXgsXG4gICAgICAgICAgICBbMl0gIGN1c3RvbSBpZCAod2lsbCBub3QgZ2VuZXJhdGUgb25lIGF1dG9tYXRpY2FsbHkpXG4gICAgICAgICAgICBbM10gIG5hbWVcbiAgICAgICAgICAgIFs0XSAgdGltZXN0YW1wXG4gICAgICAgICAgICBbNV0gIHBhcmVudEtleT9cbiAgICAgICAgICAgIFs2XSAgcGFyZW50IGRlcGVuZGVuY2llcyBrZXkuXG4gICAgICAgICAgICBbN10gIHBhcmVudD8ge2lkLCBxdWV1ZUtleX1cbiAgICAgICAgICAgIFs4XSAgcmVwZWF0IGpvYiBrZXlcbiAgICAgICAgICAgIFs5XSBkZWR1cGxpY2F0aW9uIGtleVxuICAgICAgQVJHVlsyXSBKc29uIHN0cmluZ2lmaWVkIGpvYiBkYXRhXG4gICAgICBBUkdWWzNdIG1zZ3BhY2tlZCBvcHRpb25zXG4gICAgICBPdXRwdXQ6XG4gICAgICAgIGpvYklkICAtIE9LXG4gICAgICAgIC01ICAgICAtIE1pc3NpbmcgcGFyZW50IGtleVxuXV0gXG5sb2NhbCBtZXRhS2V5ID0gS0VZU1syXVxubG9jYWwgaWRLZXkgPSBLRVlTWzNdXG5sb2NhbCBwcmlvcml0eUtleSA9IEtFWVNbNF1cbmxvY2FsIGNvbXBsZXRlZEtleSA9IEtFWVNbNl1cbmxvY2FsIGFjdGl2ZUtleSA9IEtFWVNbN11cbmxvY2FsIGV2ZW50c0tleSA9IEtFWVNbOF1cbmxvY2FsIHByaW9yaXR5Q291bnRlcktleSA9IEtFWVNbOV1cbmxvY2FsIGpvYklkXG5sb2NhbCBqb2JJZEtleVxubG9jYWwgcmNhbGwgPSByZWRpcy5jYWxsXG5sb2NhbCBhcmdzID0gY21zZ3BhY2sudW5wYWNrKEFSR1ZbMV0pXG5sb2NhbCBkYXRhID0gQVJHVlsyXVxubG9jYWwgb3B0cyA9IGNtc2dwYWNrLnVucGFjayhBUkdWWzNdKVxubG9jYWwgcGFyZW50S2V5ID0gYXJnc1s1XVxubG9jYWwgcGFyZW50ID0gYXJnc1s3XVxubG9jYWwgcmVwZWF0Sm9iS2V5ID0gYXJnc1s4XVxubG9jYWwgZGVkdXBsaWNhdGlvbktleSA9IGFyZ3NbOV1cbmxvY2FsIHBhcmVudERhdGFcbi0tIEluY2x1ZGVzXG4tLVtbXG4gIEZ1bmN0aW9uIHRvIGFkZCBqb2IgY29uc2lkZXJpbmcgcHJpb3JpdHkuXG5dXVxuLS0gSW5jbHVkZXNcbi0tW1tcbiAgQWRkIG1hcmtlciBpZiBuZWVkZWQgd2hlbiBhIGpvYiBpcyBhdmFpbGFibGUuXG5dXVxubG9jYWwgZnVuY3Rpb24gYWRkQmFzZU1hcmtlcklmTmVlZGVkKG1hcmtlcktleSwgaXNQYXVzZWRPck1heGVkKVxuICBpZiBub3QgaXNQYXVzZWRPck1heGVkIHRoZW5cbiAgICByY2FsbChcIlpBRERcIiwgbWFya2VyS2V5LCAwLCBcIjBcIilcbiAgZW5kICBcbmVuZFxuLS1bW1xuICBGdW5jdGlvbiB0byBnZXQgcHJpb3JpdHkgc2NvcmUuXG5dXVxubG9jYWwgZnVuY3Rpb24gZ2V0UHJpb3JpdHlTY29yZShwcmlvcml0eSwgcHJpb3JpdHlDb3VudGVyS2V5KVxuICBsb2NhbCBwcmlvQ291bnRlciA9IHJjYWxsKFwiSU5DUlwiLCBwcmlvcml0eUNvdW50ZXJLZXkpXG4gIHJldHVybiBwcmlvcml0eSAqIDB4MTAwMDAwMDAwICsgcHJpb0NvdW50ZXIgJSAweDEwMDAwMDAwMFxuZW5kXG5sb2NhbCBmdW5jdGlvbiBhZGRKb2JXaXRoUHJpb3JpdHkobWFya2VyS2V5LCBwcmlvcml0aXplZEtleSwgcHJpb3JpdHksIGpvYklkLCBwcmlvcml0eUNvdW50ZXJLZXksXG4gIGlzUGF1c2VkT3JNYXhlZClcbiAgbG9jYWwgc2NvcmUgPSBnZXRQcmlvcml0eVNjb3JlKHByaW9yaXR5LCBwcmlvcml0eUNvdW50ZXJLZXkpXG4gIHJjYWxsKFwiWkFERFwiLCBwcmlvcml0aXplZEtleSwgc2NvcmUsIGpvYklkKVxuICBhZGRCYXNlTWFya2VySWZOZWVkZWQobWFya2VyS2V5LCBpc1BhdXNlZE9yTWF4ZWQpXG5lbmRcbi0tW1tcbiAgRnVuY3Rpb24gdG8gZGVib3VuY2UgYSBqb2IuXG5dXVxuLS0gSW5jbHVkZXNcbi0tW1tcbiAgRnVuY3Rpb24gdG8gcmVtb3ZlIGpvYiBrZXlzLlxuXV1cbmxvY2FsIGZ1bmN0aW9uIHJlbW92ZUpvYktleXMoam9iS2V5KVxuICByZXR1cm4gcmNhbGwoXCJERUxcIiwgam9iS2V5LCBqb2JLZXkgLi4gJzpsb2dzJywgam9iS2V5IC4uICc6ZGVwZW5kZW5jaWVzJyxcbiAgICBqb2JLZXkgLi4gJzpwcm9jZXNzZWQnLCBqb2JLZXkgLi4gJzpmYWlsZWQnLCBqb2JLZXkgLi4gJzp1bnN1Y2Nlc3NmdWwnKVxuZW5kXG5sb2NhbCBmdW5jdGlvbiByZW1vdmVEZWxheWVkSm9iKGRlbGF5ZWRLZXksIGRlZHVwbGljYXRpb25LZXksIGV2ZW50c0tleSwgbWF4RXZlbnRzLCBjdXJyZW50RGVkdXBsaWNhdGVkSm9iSWQsXG4gICAgam9iSWQsIGRlZHVwbGljYXRpb25JZCwgcHJlZml4KVxuICAgIGlmIHJjYWxsKFwiWlJFTVwiLCBkZWxheWVkS2V5LCBjdXJyZW50RGVkdXBsaWNhdGVkSm9iSWQpID4gMCB0aGVuXG4gICAgICAgIHJlbW92ZUpvYktleXMocHJlZml4IC4uIGN1cnJlbnREZWR1cGxpY2F0ZWRKb2JJZClcbiAgICAgICAgcmNhbGwoXCJYQUREXCIsIGV2ZW50c0tleSwgXCIqXCIsIFwiZXZlbnRcIiwgXCJyZW1vdmVkXCIsIFwiam9iSWRcIiwgY3VycmVudERlZHVwbGljYXRlZEpvYklkLFxuICAgICAgICAgICAgXCJwcmV2XCIsIFwiZGVsYXllZFwiKVxuICAgICAgICAtLSBUT0RPIHJlbW92ZSBkZWJvdW5jZWQgZXZlbnQgaW4gbmV4dCBicmVha2luZyBjaGFuZ2VcbiAgICAgICAgcmNhbGwoXCJYQUREXCIsIGV2ZW50c0tleSwgXCJNQVhMRU5cIiwgXCJ+XCIsIG1heEV2ZW50cywgXCIqXCIsIFwiZXZlbnRcIiwgXCJkZWJvdW5jZWRcIiwgXCJqb2JJZFwiLFxuICAgICAgICAgICAgam9iSWQsIFwiZGVib3VuY2VJZFwiLCBkZWR1cGxpY2F0aW9uSWQpXG4gICAgICAgIHJjYWxsKFwiWEFERFwiLCBldmVudHNLZXksIFwiTUFYTEVOXCIsIFwiflwiLCBtYXhFdmVudHMsIFwiKlwiLCBcImV2ZW50XCIsIFwiZGVkdXBsaWNhdGVkXCIsIFwiam9iSWRcIixcbiAgICAgICAgICAgIGpvYklkLCBcImRlZHVwbGljYXRpb25JZFwiLCBkZWR1cGxpY2F0aW9uSWQsIFwiZGVkdXBsaWNhdGVkSm9iSWRcIiwgY3VycmVudERlZHVwbGljYXRlZEpvYklkKVxuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgIGVuZFxuICAgIHJldHVybiBmYWxzZVxuZW5kXG5sb2NhbCBmdW5jdGlvbiBkZWR1cGxpY2F0ZUpvYihkZWR1cGxpY2F0aW9uT3B0cywgam9iSWQsIGRlbGF5ZWRLZXksIGRlZHVwbGljYXRpb25LZXksIGV2ZW50c0tleSwgbWF4RXZlbnRzLFxuICAgIHByZWZpeClcbiAgICBsb2NhbCBkZWR1cGxpY2F0aW9uSWQgPSBkZWR1cGxpY2F0aW9uT3B0cyBhbmQgZGVkdXBsaWNhdGlvbk9wdHNbJ2lkJ11cbiAgICBpZiBkZWR1cGxpY2F0aW9uSWQgdGhlblxuICAgICAgICBsb2NhbCB0dGwgPSBkZWR1cGxpY2F0aW9uT3B0c1sndHRsJ11cbiAgICAgICAgaWYgZGVkdXBsaWNhdGlvbk9wdHNbJ3JlcGxhY2UnXSB0aGVuXG4gICAgICAgICAgICBpZiB0dGwgYW5kIHR0bCA+IDAgdGhlblxuICAgICAgICAgICAgICAgIGxvY2FsIGN1cnJlbnREZWJvdW5jZUpvYklkID0gcmNhbGwoJ0dFVCcsIGRlZHVwbGljYXRpb25LZXkpXG4gICAgICAgICAgICAgICAgaWYgY3VycmVudERlYm91bmNlSm9iSWQgdGhlblxuICAgICAgICAgICAgICAgICAgICBsb2NhbCBpc1JlbW92ZWQgPSByZW1vdmVEZWxheWVkSm9iKGRlbGF5ZWRLZXksIGRlZHVwbGljYXRpb25LZXksIGV2ZW50c0tleSwgbWF4RXZlbnRzLFxuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudERlYm91bmNlSm9iSWQsIGpvYklkLCBkZWR1cGxpY2F0aW9uSWQsIHByZWZpeClcbiAgICAgICAgICAgICAgICAgICAgaWYgaXNSZW1vdmVkIHRoZW5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGRlZHVwbGljYXRpb25PcHRzWydleHRlbmQnXSB0aGVuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmNhbGwoJ1NFVCcsIGRlZHVwbGljYXRpb25LZXksIGpvYklkLCAnUFgnLCB0dGwpXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmNhbGwoJ1NFVCcsIGRlZHVwbGljYXRpb25LZXksIGpvYklkLCAnS0VFUFRUTCcpXG4gICAgICAgICAgICAgICAgICAgICAgICBlbmRcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY3VycmVudERlYm91bmNlSm9iSWRcbiAgICAgICAgICAgICAgICAgICAgZW5kXG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICByY2FsbCgnU0VUJywgZGVkdXBsaWNhdGlvbktleSwgam9iSWQsICdQWCcsIHR0bClcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICAgICAgZW5kXG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgbG9jYWwgY3VycmVudERlYm91bmNlSm9iSWQgPSByY2FsbCgnR0VUJywgZGVkdXBsaWNhdGlvbktleSlcbiAgICAgICAgICAgICAgICBpZiBjdXJyZW50RGVib3VuY2VKb2JJZCB0aGVuXG4gICAgICAgICAgICAgICAgICAgIGxvY2FsIGlzUmVtb3ZlZCA9IHJlbW92ZURlbGF5ZWRKb2IoZGVsYXllZEtleSwgZGVkdXBsaWNhdGlvbktleSwgZXZlbnRzS2V5LCBtYXhFdmVudHMsXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50RGVib3VuY2VKb2JJZCwgam9iSWQsIGRlZHVwbGljYXRpb25JZCwgcHJlZml4KVxuICAgICAgICAgICAgICAgICAgICBpZiBpc1JlbW92ZWQgdGhlblxuICAgICAgICAgICAgICAgICAgICAgICAgcmNhbGwoJ1NFVCcsIGRlZHVwbGljYXRpb25LZXksIGpvYklkKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjdXJyZW50RGVib3VuY2VKb2JJZFxuICAgICAgICAgICAgICAgICAgICBlbmRcbiAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgIHJjYWxsKCdTRVQnLCBkZWR1cGxpY2F0aW9uS2V5LCBqb2JJZClcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICAgICAgZW5kXG4gICAgICAgICAgICBlbmRcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgbG9jYWwgZGVkdXBsaWNhdGlvbktleUV4aXN0c1xuICAgICAgICAgICAgaWYgdHRsIGFuZCB0dGwgPiAwIHRoZW5cbiAgICAgICAgICAgICAgICBpZiBkZWR1cGxpY2F0aW9uT3B0c1snZXh0ZW5kJ10gdGhlblxuICAgICAgICAgICAgICAgICAgICBsb2NhbCBjdXJyZW50RGVib3VuY2VKb2JJZCA9IHJjYWxsKCdHRVQnLCBkZWR1cGxpY2F0aW9uS2V5KVxuICAgICAgICAgICAgICAgICAgICBpZiBjdXJyZW50RGVib3VuY2VKb2JJZCB0aGVuXG4gICAgICAgICAgICAgICAgICAgICAgICByY2FsbCgnU0VUJywgZGVkdXBsaWNhdGlvbktleSwgY3VycmVudERlYm91bmNlSm9iSWQsICdQWCcsIHR0bClcbiAgICAgICAgICAgICAgICAgICAgICAgIHJjYWxsKFwiWEFERFwiLCBldmVudHNLZXksIFwiTUFYTEVOXCIsIFwiflwiLCBtYXhFdmVudHMsIFwiKlwiLCBcImV2ZW50XCIsIFwiZGVib3VuY2VkXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJqb2JJZFwiLCBjdXJyZW50RGVib3VuY2VKb2JJZCwgXCJkZWJvdW5jZUlkXCIsIGRlZHVwbGljYXRpb25JZClcbiAgICAgICAgICAgICAgICAgICAgICAgIHJjYWxsKFwiWEFERFwiLCBldmVudHNLZXksIFwiTUFYTEVOXCIsIFwiflwiLCBtYXhFdmVudHMsIFwiKlwiLCBcImV2ZW50XCIsIFwiZGVkdXBsaWNhdGVkXCIsIFwiam9iSWRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50RGVib3VuY2VKb2JJZCwgXCJkZWR1cGxpY2F0aW9uSWRcIiwgZGVkdXBsaWNhdGlvbklkLCBcImRlZHVwbGljYXRlZEpvYklkXCIsIGpvYklkKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnREZWJvdW5jZUpvYklkXG4gICAgICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgIHJjYWxsKCdTRVQnLCBkZWR1cGxpY2F0aW9uS2V5LCBqb2JJZCwgJ1BYJywgdHRsKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICAgICAgICAgIGVuZFxuICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgZGVkdXBsaWNhdGlvbktleUV4aXN0cyA9IG5vdCByY2FsbCgnU0VUJywgZGVkdXBsaWNhdGlvbktleSwgam9iSWQsICdQWCcsIHR0bCwgJ05YJylcbiAgICAgICAgICAgICAgICBlbmRcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBkZWR1cGxpY2F0aW9uS2V5RXhpc3RzID0gbm90IHJjYWxsKCdTRVQnLCBkZWR1cGxpY2F0aW9uS2V5LCBqb2JJZCwgJ05YJylcbiAgICAgICAgICAgIGVuZFxuICAgICAgICAgICAgaWYgZGVkdXBsaWNhdGlvbktleUV4aXN0cyB0aGVuXG4gICAgICAgICAgICAgICAgbG9jYWwgY3VycmVudERlYm91bmNlSm9iSWQgPSByY2FsbCgnR0VUJywgZGVkdXBsaWNhdGlvbktleSlcbiAgICAgICAgICAgICAgICAtLSBUT0RPIHJlbW92ZSBkZWJvdW5jZWQgZXZlbnQgaW4gbmV4dCBicmVha2luZyBjaGFuZ2VcbiAgICAgICAgICAgICAgICByY2FsbChcIlhBRERcIiwgZXZlbnRzS2V5LCBcIk1BWExFTlwiLCBcIn5cIiwgbWF4RXZlbnRzLCBcIipcIiwgXCJldmVudFwiLCBcImRlYm91bmNlZFwiLCBcImpvYklkXCIsXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnREZWJvdW5jZUpvYklkLCBcImRlYm91bmNlSWRcIiwgZGVkdXBsaWNhdGlvbklkKVxuICAgICAgICAgICAgICAgIHJjYWxsKFwiWEFERFwiLCBldmVudHNLZXksIFwiTUFYTEVOXCIsIFwiflwiLCBtYXhFdmVudHMsIFwiKlwiLCBcImV2ZW50XCIsIFwiZGVkdXBsaWNhdGVkXCIsIFwiam9iSWRcIixcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudERlYm91bmNlSm9iSWQsIFwiZGVkdXBsaWNhdGlvbklkXCIsIGRlZHVwbGljYXRpb25JZCwgXCJkZWR1cGxpY2F0ZWRKb2JJZFwiLCBqb2JJZClcbiAgICAgICAgICAgICAgICByZXR1cm4gY3VycmVudERlYm91bmNlSm9iSWRcbiAgICAgICAgICAgIGVuZFxuICAgICAgICBlbmRcbiAgICBlbmRcbmVuZFxuLS1bW1xuICBGdW5jdGlvbiB0byBzdG9yZSBhIGpvYlxuXV1cbmxvY2FsIGZ1bmN0aW9uIHN0b3JlSm9iKGV2ZW50c0tleSwgam9iSWRLZXksIGpvYklkLCBuYW1lLCBkYXRhLCBvcHRzLCB0aW1lc3RhbXAsXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnRLZXksIHBhcmVudERhdGEsIHJlcGVhdEpvYktleSlcbiAgICBsb2NhbCBqc29uT3B0cyA9IGNqc29uLmVuY29kZShvcHRzKVxuICAgIGxvY2FsIGRlbGF5ID0gb3B0c1snZGVsYXknXSBvciAwXG4gICAgbG9jYWwgcHJpb3JpdHkgPSBvcHRzWydwcmlvcml0eSddIG9yIDBcbiAgICBsb2NhbCBkZWJvdW5jZUlkID0gb3B0c1snZGUnXSBhbmQgb3B0c1snZGUnXVsnaWQnXVxuICAgIGxvY2FsIG9wdGlvbmFsVmFsdWVzID0ge31cbiAgICBpZiBwYXJlbnRLZXkgfj0gbmlsIHRoZW5cbiAgICAgICAgdGFibGUuaW5zZXJ0KG9wdGlvbmFsVmFsdWVzLCBcInBhcmVudEtleVwiKVxuICAgICAgICB0YWJsZS5pbnNlcnQob3B0aW9uYWxWYWx1ZXMsIHBhcmVudEtleSlcbiAgICAgICAgdGFibGUuaW5zZXJ0KG9wdGlvbmFsVmFsdWVzLCBcInBhcmVudFwiKVxuICAgICAgICB0YWJsZS5pbnNlcnQob3B0aW9uYWxWYWx1ZXMsIHBhcmVudERhdGEpXG4gICAgZW5kXG4gICAgaWYgcmVwZWF0Sm9iS2V5IHRoZW5cbiAgICAgICAgdGFibGUuaW5zZXJ0KG9wdGlvbmFsVmFsdWVzLCBcInJqa1wiKVxuICAgICAgICB0YWJsZS5pbnNlcnQob3B0aW9uYWxWYWx1ZXMsIHJlcGVhdEpvYktleSlcbiAgICBlbmRcbiAgICBpZiBkZWJvdW5jZUlkIHRoZW5cbiAgICAgICAgdGFibGUuaW5zZXJ0KG9wdGlvbmFsVmFsdWVzLCBcImRlaWRcIilcbiAgICAgICAgdGFibGUuaW5zZXJ0KG9wdGlvbmFsVmFsdWVzLCBkZWJvdW5jZUlkKVxuICAgIGVuZFxuICAgIHJjYWxsKFwiSE1TRVRcIiwgam9iSWRLZXksIFwibmFtZVwiLCBuYW1lLCBcImRhdGFcIiwgZGF0YSwgXCJvcHRzXCIsIGpzb25PcHRzLFxuICAgICAgICAgIFwidGltZXN0YW1wXCIsIHRpbWVzdGFtcCwgXCJkZWxheVwiLCBkZWxheSwgXCJwcmlvcml0eVwiLCBwcmlvcml0eSxcbiAgICAgICAgICB1bnBhY2sob3B0aW9uYWxWYWx1ZXMpKVxuICAgIHJjYWxsKFwiWEFERFwiLCBldmVudHNLZXksIFwiKlwiLCBcImV2ZW50XCIsIFwiYWRkZWRcIiwgXCJqb2JJZFwiLCBqb2JJZCwgXCJuYW1lXCIsIG5hbWUpXG4gICAgcmV0dXJuIGRlbGF5LCBwcmlvcml0eVxuZW5kXG4tLVtbXG4gIEZ1bmN0aW9uIHRvIGdldCBtYXggZXZlbnRzIHZhbHVlIG9yIHNldCBieSBkZWZhdWx0IDEwMDAwLlxuXV1cbmxvY2FsIGZ1bmN0aW9uIGdldE9yU2V0TWF4RXZlbnRzKG1ldGFLZXkpXG4gIGxvY2FsIG1heEV2ZW50cyA9IHJjYWxsKFwiSEdFVFwiLCBtZXRhS2V5LCBcIm9wdHMubWF4TGVuRXZlbnRzXCIpXG4gIGlmIG5vdCBtYXhFdmVudHMgdGhlblxuICAgIG1heEV2ZW50cyA9IDEwMDAwXG4gICAgcmNhbGwoXCJIU0VUXCIsIG1ldGFLZXksIFwib3B0cy5tYXhMZW5FdmVudHNcIiwgbWF4RXZlbnRzKVxuICBlbmRcbiAgcmV0dXJuIG1heEV2ZW50c1xuZW5kXG4tLVtbXG4gIEZ1bmN0aW9uIHRvIGhhbmRsZSB0aGUgY2FzZSB3aGVuIGpvYiBpcyBkdXBsaWNhdGVkLlxuXV1cbi0tIEluY2x1ZGVzXG4tLVtbXG4gICAgVGhpcyBmdW5jdGlvbiBpcyB1c2VkIHRvIHVwZGF0ZSB0aGUgcGFyZW50J3MgZGVwZW5kZW5jaWVzIGlmIHRoZSBqb2JcbiAgICBpcyBhbHJlYWR5IGNvbXBsZXRlZCBhbmQgYWJvdXQgdG8gYmUgaWdub3JlZC4gVGhlIHBhcmVudCBtdXN0IGdldCBpdHNcbiAgICBkZXBlbmRlbmNpZXMgdXBkYXRlZCB0byBhdm9pZCB0aGUgcGFyZW50IGpvYiBiZWluZyBzdHVjayBmb3JldmVyIGluIFxuICAgIHRoZSB3YWl0aW5nLWNoaWxkcmVuIHN0YXRlLlxuXV1cbi0tIEluY2x1ZGVzXG4tLVtbXG4gIFZhbGlkYXRlIGFuZCBtb3ZlIG9yIGFkZCBkZXBlbmRlbmNpZXMgdG8gcGFyZW50LlxuXV1cbi0tIEluY2x1ZGVzXG4tLVtbXG4gIFZhbGlkYXRlIGFuZCBtb3ZlIHBhcmVudCB0byBhIHdhaXQgc3RhdHVzICh3YWl0aW5nLCBkZWxheWVkIG9yIHByaW9yaXRpemVkKVxuICBpZiBubyBwZW5kaW5nIGRlcGVuZGVuY2llcy5cbl1dXG4tLSBJbmNsdWRlc1xuLS1bW1xuICBWYWxpZGF0ZSBhbmQgbW92ZSBwYXJlbnQgdG8gYSB3YWl0IHN0YXR1cyAod2FpdGluZywgZGVsYXllZCBvciBwcmlvcml0aXplZCkgaWYgbmVlZGVkLlxuXV1cbi0tIEluY2x1ZGVzXG4tLVtbXG4gIE1vdmUgcGFyZW50IHRvIGEgd2FpdCBzdGF0dXMgKHdhaXQsIHByaW9yaXRpemVkIG9yIGRlbGF5ZWQpXG5dXVxuLS0gSW5jbHVkZXNcbi0tW1tcbiAgQWRkIGRlbGF5IG1hcmtlciBpZiBuZWVkZWQuXG5dXVxuLS0gSW5jbHVkZXNcbi0tW1tcbiAgRnVuY3Rpb24gdG8gcmV0dXJuIHRoZSBuZXh0IGRlbGF5ZWQgam9iIHRpbWVzdGFtcC5cbl1dXG5sb2NhbCBmdW5jdGlvbiBnZXROZXh0RGVsYXllZFRpbWVzdGFtcChkZWxheWVkS2V5KVxuICBsb2NhbCByZXN1bHQgPSByY2FsbChcIlpSQU5HRVwiLCBkZWxheWVkS2V5LCAwLCAwLCBcIldJVEhTQ09SRVNcIilcbiAgaWYgI3Jlc3VsdCB0aGVuXG4gICAgbG9jYWwgbmV4dFRpbWVzdGFtcCA9IHRvbnVtYmVyKHJlc3VsdFsyXSlcbiAgICBpZiBuZXh0VGltZXN0YW1wIH49IG5pbCB0aGVuXG4gICAgICByZXR1cm4gbmV4dFRpbWVzdGFtcCAvIDB4MTAwMFxuICAgIGVuZFxuICBlbmRcbmVuZFxubG9jYWwgZnVuY3Rpb24gYWRkRGVsYXlNYXJrZXJJZk5lZWRlZChtYXJrZXJLZXksIGRlbGF5ZWRLZXkpXG4gIGxvY2FsIG5leHRUaW1lc3RhbXAgPSBnZXROZXh0RGVsYXllZFRpbWVzdGFtcChkZWxheWVkS2V5KVxuICBpZiBuZXh0VGltZXN0YW1wIH49IG5pbCB0aGVuXG4gICAgLS0gUmVwbGFjZSB0aGUgc2NvcmUgb2YgdGhlIG1hcmtlciB3aXRoIHRoZSBuZXdlc3Qga25vd25cbiAgICAtLSBuZXh0IHRpbWVzdGFtcC5cbiAgICByY2FsbChcIlpBRERcIiwgbWFya2VyS2V5LCBuZXh0VGltZXN0YW1wLCBcIjFcIilcbiAgZW5kXG5lbmRcbi0tW1tcbiAgRnVuY3Rpb24gdG8gYWRkIGpvYiBpbiB0YXJnZXQgbGlzdCBhbmQgYWRkIG1hcmtlciBpZiBuZWVkZWQuXG5dXVxuLS0gSW5jbHVkZXNcbmxvY2FsIGZ1bmN0aW9uIGFkZEpvYkluVGFyZ2V0TGlzdCh0YXJnZXRLZXksIG1hcmtlcktleSwgcHVzaENtZCwgaXNQYXVzZWRPck1heGVkLCBqb2JJZClcbiAgcmNhbGwocHVzaENtZCwgdGFyZ2V0S2V5LCBqb2JJZClcbiAgYWRkQmFzZU1hcmtlcklmTmVlZGVkKG1hcmtlcktleSwgaXNQYXVzZWRPck1heGVkKVxuZW5kXG4tLVtbXG4gIEZ1bmN0aW9uIHRvIGNoZWNrIGlmIHF1ZXVlIGlzIHBhdXNlZCBvciBtYXhlZFxuICAoc2luY2UgYW4gZW1wdHkgbGlzdCBhbmQgIUVYSVNUUyBhcmUgbm90IHJlYWxseSB0aGUgc2FtZSkuXG5dXVxubG9jYWwgZnVuY3Rpb24gaXNRdWV1ZVBhdXNlZE9yTWF4ZWQocXVldWVNZXRhS2V5LCBhY3RpdmVLZXkpXG4gIGxvY2FsIHF1ZXVlQXR0cmlidXRlcyA9IHJjYWxsKFwiSE1HRVRcIiwgcXVldWVNZXRhS2V5LCBcInBhdXNlZFwiLCBcImNvbmN1cnJlbmN5XCIpXG4gIGlmIHF1ZXVlQXR0cmlidXRlc1sxXSB0aGVuXG4gICAgcmV0dXJuIHRydWVcbiAgZWxzZVxuICAgIGlmIHF1ZXVlQXR0cmlidXRlc1syXSB0aGVuXG4gICAgICBsb2NhbCBhY3RpdmVDb3VudCA9IHJjYWxsKFwiTExFTlwiLCBhY3RpdmVLZXkpXG4gICAgICByZXR1cm4gYWN0aXZlQ291bnQgPj0gdG9udW1iZXIocXVldWVBdHRyaWJ1dGVzWzJdKVxuICAgIGVuZFxuICBlbmRcbiAgcmV0dXJuIGZhbHNlXG5lbmRcbi0tW1tcbiAgRnVuY3Rpb24gdG8gY2hlY2sgZm9yIHRoZSBtZXRhLnBhdXNlZCBrZXkgdG8gZGVjaWRlIGlmIHdlIGFyZSBwYXVzZWQgb3Igbm90XG4gIChzaW5jZSBhbiBlbXB0eSBsaXN0IGFuZCAhRVhJU1RTIGFyZSBub3QgcmVhbGx5IHRoZSBzYW1lKS5cbl1dXG5sb2NhbCBmdW5jdGlvbiBnZXRUYXJnZXRRdWV1ZUxpc3QocXVldWVNZXRhS2V5LCBhY3RpdmVLZXksIHdhaXRLZXksIHBhdXNlZEtleSlcbiAgbG9jYWwgcXVldWVBdHRyaWJ1dGVzID0gcmNhbGwoXCJITUdFVFwiLCBxdWV1ZU1ldGFLZXksIFwicGF1c2VkXCIsIFwiY29uY3VycmVuY3lcIiwgXCJtYXhcIiwgXCJkdXJhdGlvblwiKVxuICBpZiBxdWV1ZUF0dHJpYnV0ZXNbMV0gdGhlblxuICAgIHJldHVybiBwYXVzZWRLZXksIHRydWUsIHF1ZXVlQXR0cmlidXRlc1szXSwgcXVldWVBdHRyaWJ1dGVzWzRdXG4gIGVsc2VcbiAgICBpZiBxdWV1ZUF0dHJpYnV0ZXNbMl0gdGhlblxuICAgICAgbG9jYWwgYWN0aXZlQ291bnQgPSByY2FsbChcIkxMRU5cIiwgYWN0aXZlS2V5KVxuICAgICAgaWYgYWN0aXZlQ291bnQgPj0gdG9udW1iZXIocXVldWVBdHRyaWJ1dGVzWzJdKSB0aGVuXG4gICAgICAgIHJldHVybiB3YWl0S2V5LCB0cnVlLCBxdWV1ZUF0dHJpYnV0ZXNbM10sIHF1ZXVlQXR0cmlidXRlc1s0XVxuICAgICAgZWxzZVxuICAgICAgICByZXR1cm4gd2FpdEtleSwgZmFsc2UsIHF1ZXVlQXR0cmlidXRlc1szXSwgcXVldWVBdHRyaWJ1dGVzWzRdXG4gICAgICBlbmRcbiAgICBlbmRcbiAgZW5kXG4gIHJldHVybiB3YWl0S2V5LCBmYWxzZSwgcXVldWVBdHRyaWJ1dGVzWzNdLCBxdWV1ZUF0dHJpYnV0ZXNbNF1cbmVuZFxubG9jYWwgZnVuY3Rpb24gbW92ZVBhcmVudFRvV2FpdChwYXJlbnRRdWV1ZUtleSwgcGFyZW50S2V5LCBwYXJlbnRJZCwgdGltZXN0YW1wKVxuICAgIGxvY2FsIHBhcmVudFdhaXRLZXkgPSBwYXJlbnRRdWV1ZUtleSAuLiBcIjp3YWl0XCJcbiAgICBsb2NhbCBwYXJlbnRQYXVzZWRLZXkgPSBwYXJlbnRRdWV1ZUtleSAuLiBcIjpwYXVzZWRcIlxuICAgIGxvY2FsIHBhcmVudEFjdGl2ZUtleSA9IHBhcmVudFF1ZXVlS2V5IC4uIFwiOmFjdGl2ZVwiXG4gICAgbG9jYWwgcGFyZW50TWV0YUtleSA9IHBhcmVudFF1ZXVlS2V5IC4uIFwiOm1ldGFcIlxuICAgIGxvY2FsIHBhcmVudE1hcmtlcktleSA9IHBhcmVudFF1ZXVlS2V5IC4uIFwiOm1hcmtlclwiXG4gICAgbG9jYWwgam9iQXR0cmlidXRlcyA9IHJjYWxsKFwiSE1HRVRcIiwgcGFyZW50S2V5LCBcInByaW9yaXR5XCIsIFwiZGVsYXlcIilcbiAgICBsb2NhbCBwcmlvcml0eSA9IHRvbnVtYmVyKGpvYkF0dHJpYnV0ZXNbMV0pIG9yIDBcbiAgICBsb2NhbCBkZWxheSA9IHRvbnVtYmVyKGpvYkF0dHJpYnV0ZXNbMl0pIG9yIDBcbiAgICBpZiBkZWxheSA+IDAgdGhlblxuICAgICAgICBsb2NhbCBkZWxheWVkVGltZXN0YW1wID0gdG9udW1iZXIodGltZXN0YW1wKSArIGRlbGF5XG4gICAgICAgIGxvY2FsIHNjb3JlID0gZGVsYXllZFRpbWVzdGFtcCAqIDB4MTAwMFxuICAgICAgICBsb2NhbCBwYXJlbnREZWxheWVkS2V5ID0gcGFyZW50UXVldWVLZXkgLi4gXCI6ZGVsYXllZFwiXG4gICAgICAgIHJjYWxsKFwiWkFERFwiLCBwYXJlbnREZWxheWVkS2V5LCBzY29yZSwgcGFyZW50SWQpXG4gICAgICAgIHJjYWxsKFwiWEFERFwiLCBwYXJlbnRRdWV1ZUtleSAuLiBcIjpldmVudHNcIiwgXCIqXCIsIFwiZXZlbnRcIiwgXCJkZWxheWVkXCIsIFwiam9iSWRcIiwgcGFyZW50SWQsIFwiZGVsYXlcIixcbiAgICAgICAgICAgIGRlbGF5ZWRUaW1lc3RhbXApXG4gICAgICAgIGFkZERlbGF5TWFya2VySWZOZWVkZWQocGFyZW50TWFya2VyS2V5LCBwYXJlbnREZWxheWVkS2V5KVxuICAgIGVsc2VcbiAgICAgICAgaWYgcHJpb3JpdHkgPT0gMCB0aGVuXG4gICAgICAgICAgICBsb2NhbCBwYXJlbnRUYXJnZXQsIGlzUGFyZW50UGF1c2VkT3JNYXhlZCA9IGdldFRhcmdldFF1ZXVlTGlzdChwYXJlbnRNZXRhS2V5LCBwYXJlbnRBY3RpdmVLZXksXG4gICAgICAgICAgICAgICAgcGFyZW50V2FpdEtleSwgcGFyZW50UGF1c2VkS2V5KVxuICAgICAgICAgICAgYWRkSm9iSW5UYXJnZXRMaXN0KHBhcmVudFRhcmdldCwgcGFyZW50TWFya2VyS2V5LCBcIlJQVVNIXCIsIGlzUGFyZW50UGF1c2VkT3JNYXhlZCwgcGFyZW50SWQpXG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIGxvY2FsIGlzUGF1c2VkT3JNYXhlZCA9IGlzUXVldWVQYXVzZWRPck1heGVkKHBhcmVudE1ldGFLZXksIHBhcmVudEFjdGl2ZUtleSlcbiAgICAgICAgICAgIGFkZEpvYldpdGhQcmlvcml0eShwYXJlbnRNYXJrZXJLZXksIHBhcmVudFF1ZXVlS2V5IC4uIFwiOnByaW9yaXRpemVkXCIsIHByaW9yaXR5LCBwYXJlbnRJZCxcbiAgICAgICAgICAgICAgICBwYXJlbnRRdWV1ZUtleSAuLiBcIjpwY1wiLCBpc1BhdXNlZE9yTWF4ZWQpXG4gICAgICAgIGVuZFxuICAgICAgICByY2FsbChcIlhBRERcIiwgcGFyZW50UXVldWVLZXkgLi4gXCI6ZXZlbnRzXCIsIFwiKlwiLCBcImV2ZW50XCIsIFwid2FpdGluZ1wiLCBcImpvYklkXCIsIHBhcmVudElkLCBcInByZXZcIixcbiAgICAgICAgICAgIFwid2FpdGluZy1jaGlsZHJlblwiKVxuICAgIGVuZFxuZW5kXG5sb2NhbCBmdW5jdGlvbiBtb3ZlUGFyZW50VG9XYWl0SWZOZWVkZWQocGFyZW50UXVldWVLZXksIHBhcmVudEtleSwgcGFyZW50SWQsIHRpbWVzdGFtcClcbiAgaWYgcmNhbGwoXCJFWElTVFNcIiwgcGFyZW50S2V5KSA9PSAxIHRoZW5cbiAgICBsb2NhbCBwYXJlbnRXYWl0aW5nQ2hpbGRyZW5LZXkgPSBwYXJlbnRRdWV1ZUtleSAuLiBcIjp3YWl0aW5nLWNoaWxkcmVuXCJcbiAgICBpZiByY2FsbChcIlpTQ09SRVwiLCBwYXJlbnRXYWl0aW5nQ2hpbGRyZW5LZXksIHBhcmVudElkKSB0aGVuICAgIFxuICAgICAgcmNhbGwoXCJaUkVNXCIsIHBhcmVudFdhaXRpbmdDaGlsZHJlbktleSwgcGFyZW50SWQpXG4gICAgICBtb3ZlUGFyZW50VG9XYWl0KHBhcmVudFF1ZXVlS2V5LCBwYXJlbnRLZXksIHBhcmVudElkLCB0aW1lc3RhbXApXG4gICAgZW5kXG4gIGVuZFxuZW5kXG5sb2NhbCBmdW5jdGlvbiBtb3ZlUGFyZW50VG9XYWl0SWZOb1BlbmRpbmdEZXBlbmRlbmNpZXMocGFyZW50UXVldWVLZXksIHBhcmVudERlcGVuZGVuY2llc0tleSwgcGFyZW50S2V5LFxuICBwYXJlbnRJZCwgdGltZXN0YW1wKVxuICBsb2NhbCBkb05vdEhhdmVQZW5kaW5nRGVwZW5kZW5jaWVzID0gcmNhbGwoXCJTQ0FSRFwiLCBwYXJlbnREZXBlbmRlbmNpZXNLZXkpID09IDBcbiAgaWYgZG9Ob3RIYXZlUGVuZGluZ0RlcGVuZGVuY2llcyB0aGVuXG4gICAgbW92ZVBhcmVudFRvV2FpdElmTmVlZGVkKHBhcmVudFF1ZXVlS2V5LCBwYXJlbnRLZXksIHBhcmVudElkLCB0aW1lc3RhbXApXG4gIGVuZFxuZW5kXG5sb2NhbCBmdW5jdGlvbiB1cGRhdGVQYXJlbnREZXBzSWZOZWVkZWQocGFyZW50S2V5LCBwYXJlbnRRdWV1ZUtleSwgcGFyZW50RGVwZW5kZW5jaWVzS2V5LFxuICBwYXJlbnRJZCwgam9iSWRLZXksIHJldHVybnZhbHVlLCB0aW1lc3RhbXAgKVxuICBsb2NhbCBwcm9jZXNzZWRTZXQgPSBwYXJlbnRLZXkgLi4gXCI6cHJvY2Vzc2VkXCJcbiAgcmNhbGwoXCJIU0VUXCIsIHByb2Nlc3NlZFNldCwgam9iSWRLZXksIHJldHVybnZhbHVlKVxuICBtb3ZlUGFyZW50VG9XYWl0SWZOb1BlbmRpbmdEZXBlbmRlbmNpZXMocGFyZW50UXVldWVLZXksIHBhcmVudERlcGVuZGVuY2llc0tleSwgcGFyZW50S2V5LCBwYXJlbnRJZCwgdGltZXN0YW1wKVxuZW5kXG5sb2NhbCBmdW5jdGlvbiB1cGRhdGVFeGlzdGluZ0pvYnNQYXJlbnQocGFyZW50S2V5LCBwYXJlbnQsIHBhcmVudERhdGEsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50RGVwZW5kZW5jaWVzS2V5LCBjb21wbGV0ZWRLZXksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgam9iSWRLZXksIGpvYklkLCB0aW1lc3RhbXApXG4gICAgaWYgcGFyZW50S2V5IH49IG5pbCB0aGVuXG4gICAgICAgIGlmIHJjYWxsKFwiWlNDT1JFXCIsIGNvbXBsZXRlZEtleSwgam9iSWQpIHRoZW5cbiAgICAgICAgICAgIGxvY2FsIHJldHVybnZhbHVlID0gcmNhbGwoXCJIR0VUXCIsIGpvYklkS2V5LCBcInJldHVybnZhbHVlXCIpXG4gICAgICAgICAgICB1cGRhdGVQYXJlbnREZXBzSWZOZWVkZWQocGFyZW50S2V5LCBwYXJlbnRbJ3F1ZXVlS2V5J10sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50RGVwZW5kZW5jaWVzS2V5LCBwYXJlbnRbJ2lkJ10sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgam9iSWRLZXksIHJldHVybnZhbHVlLCB0aW1lc3RhbXApXG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIGlmIHBhcmVudERlcGVuZGVuY2llc0tleSB+PSBuaWwgdGhlblxuICAgICAgICAgICAgICAgIHJjYWxsKFwiU0FERFwiLCBwYXJlbnREZXBlbmRlbmNpZXNLZXksIGpvYklkS2V5KVxuICAgICAgICAgICAgZW5kXG4gICAgICAgIGVuZFxuICAgICAgICByY2FsbChcIkhNU0VUXCIsIGpvYklkS2V5LCBcInBhcmVudEtleVwiLCBwYXJlbnRLZXksIFwicGFyZW50XCIsIHBhcmVudERhdGEpXG4gICAgZW5kXG5lbmRcbmxvY2FsIGZ1bmN0aW9uIGhhbmRsZUR1cGxpY2F0ZWRKb2Ioam9iS2V5LCBqb2JJZCwgY3VycmVudFBhcmVudEtleSwgY3VycmVudFBhcmVudCxcbiAgcGFyZW50RGF0YSwgcGFyZW50RGVwZW5kZW5jaWVzS2V5LCBjb21wbGV0ZWRLZXksIGV2ZW50c0tleSwgbWF4RXZlbnRzLCB0aW1lc3RhbXApXG4gIGxvY2FsIGV4aXN0ZWRQYXJlbnRLZXkgPSByY2FsbChcIkhHRVRcIiwgam9iS2V5LCBcInBhcmVudEtleVwiKVxuICBpZiBub3QgZXhpc3RlZFBhcmVudEtleSBvciBleGlzdGVkUGFyZW50S2V5ID09IGN1cnJlbnRQYXJlbnRLZXkgdGhlblxuICAgIHVwZGF0ZUV4aXN0aW5nSm9ic1BhcmVudChjdXJyZW50UGFyZW50S2V5LCBjdXJyZW50UGFyZW50LCBwYXJlbnREYXRhLFxuICAgICAgcGFyZW50RGVwZW5kZW5jaWVzS2V5LCBjb21wbGV0ZWRLZXksIGpvYktleSxcbiAgICAgIGpvYklkLCB0aW1lc3RhbXApXG4gIGVsc2VcbiAgICBpZiBjdXJyZW50UGFyZW50S2V5IH49IG5pbCBhbmQgY3VycmVudFBhcmVudEtleSB+PSBleGlzdGVkUGFyZW50S2V5XG4gICAgICBhbmQgKHJjYWxsKFwiRVhJU1RTXCIsIGV4aXN0ZWRQYXJlbnRLZXkpID09IDEpIHRoZW5cbiAgICAgIHJldHVybiAtN1xuICAgIGVuZFxuICBlbmRcbiAgcmNhbGwoXCJYQUREXCIsIGV2ZW50c0tleSwgXCJNQVhMRU5cIiwgXCJ+XCIsIG1heEV2ZW50cywgXCIqXCIsIFwiZXZlbnRcIixcbiAgICBcImR1cGxpY2F0ZWRcIiwgXCJqb2JJZFwiLCBqb2JJZClcbiAgcmV0dXJuIGpvYklkIC4uIFwiXCIgLS0gY29udmVydCB0byBzdHJpbmdcbmVuZFxuaWYgcGFyZW50S2V5IH49IG5pbCB0aGVuXG4gICAgaWYgcmNhbGwoXCJFWElTVFNcIiwgcGFyZW50S2V5KSB+PSAxIHRoZW4gcmV0dXJuIC01IGVuZFxuICAgIHBhcmVudERhdGEgPSBjanNvbi5lbmNvZGUocGFyZW50KVxuZW5kXG5sb2NhbCBqb2JDb3VudGVyID0gcmNhbGwoXCJJTkNSXCIsIGlkS2V5KVxubG9jYWwgbWF4RXZlbnRzID0gZ2V0T3JTZXRNYXhFdmVudHMobWV0YUtleSlcbmxvY2FsIHBhcmVudERlcGVuZGVuY2llc0tleSA9IGFyZ3NbNl1cbmxvY2FsIHRpbWVzdGFtcCA9IGFyZ3NbNF1cbmlmIGFyZ3NbMl0gPT0gXCJcIiB0aGVuXG4gICAgam9iSWQgPSBqb2JDb3VudGVyXG4gICAgam9iSWRLZXkgPSBhcmdzWzFdIC4uIGpvYklkXG5lbHNlXG4gICAgam9iSWQgPSBhcmdzWzJdXG4gICAgam9iSWRLZXkgPSBhcmdzWzFdIC4uIGpvYklkXG4gICAgaWYgcmNhbGwoXCJFWElTVFNcIiwgam9iSWRLZXkpID09IDEgdGhlblxuICAgICAgICByZXR1cm4gaGFuZGxlRHVwbGljYXRlZEpvYihqb2JJZEtleSwgam9iSWQsIHBhcmVudEtleSwgcGFyZW50LFxuICAgICAgICAgICAgcGFyZW50RGF0YSwgcGFyZW50RGVwZW5kZW5jaWVzS2V5LCBjb21wbGV0ZWRLZXksIGV2ZW50c0tleSxcbiAgICAgICAgICAgIG1heEV2ZW50cywgdGltZXN0YW1wKVxuICAgIGVuZFxuZW5kXG5sb2NhbCBkZWR1cGxpY2F0aW9uSm9iSWQgPSBkZWR1cGxpY2F0ZUpvYihvcHRzWydkZSddLCBqb2JJZCwgS0VZU1s1XSxcbiAgZGVkdXBsaWNhdGlvbktleSwgZXZlbnRzS2V5LCBtYXhFdmVudHMsIGFyZ3NbMV0pXG5pZiBkZWR1cGxpY2F0aW9uSm9iSWQgdGhlblxuICByZXR1cm4gZGVkdXBsaWNhdGlvbkpvYklkXG5lbmRcbi0tIFN0b3JlIHRoZSBqb2IuXG5sb2NhbCBkZWxheSwgcHJpb3JpdHkgPSBzdG9yZUpvYihldmVudHNLZXksIGpvYklkS2V5LCBqb2JJZCwgYXJnc1szXSwgQVJHVlsyXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdHMsIHRpbWVzdGFtcCwgcGFyZW50S2V5LCBwYXJlbnREYXRhLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0Sm9iS2V5KVxuLS0gQWRkIHRoZSBqb2IgdG8gdGhlIHByaW9yaXRpemVkIHNldFxubG9jYWwgaXNQYXVzZWRPck1heGVkID0gaXNRdWV1ZVBhdXNlZE9yTWF4ZWQobWV0YUtleSwgYWN0aXZlS2V5KVxuYWRkSm9iV2l0aFByaW9yaXR5KCBLRVlTWzFdLCBwcmlvcml0eUtleSwgcHJpb3JpdHksIGpvYklkLCBwcmlvcml0eUNvdW50ZXJLZXksIGlzUGF1c2VkT3JNYXhlZClcbi0tIEVtaXQgd2FpdGluZyBldmVudFxucmNhbGwoXCJYQUREXCIsIGV2ZW50c0tleSwgXCJNQVhMRU5cIiwgXCJ+XCIsIG1heEV2ZW50cywgXCIqXCIsIFwiZXZlbnRcIiwgXCJ3YWl0aW5nXCIsXG4gICAgICBcImpvYklkXCIsIGpvYklkKVxuLS0gQ2hlY2sgaWYgdGhpcyBqb2IgaXMgYSBjaGlsZCBvZiBhbm90aGVyIGpvYiwgaWYgc28gYWRkIGl0IHRvIHRoZSBwYXJlbnRzIGRlcGVuZGVuY2llc1xuaWYgcGFyZW50RGVwZW5kZW5jaWVzS2V5IH49IG5pbCB0aGVuXG4gICAgcmNhbGwoXCJTQUREXCIsIHBhcmVudERlcGVuZGVuY2llc0tleSwgam9iSWRLZXkpXG5lbmRcbnJldHVybiBqb2JJZCAuLiBcIlwiIC0tIGNvbnZlcnQgdG8gc3RyaW5nXG5gO1xuZXhwb3J0cy5hZGRQcmlvcml0aXplZEpvYiA9IHtcbiAgICBuYW1lOiAnYWRkUHJpb3JpdGl6ZWRKb2InLFxuICAgIGNvbnRlbnQsXG4gICAga2V5czogOSxcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1hZGRQcmlvcml0aXplZEpvYi05LmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsImFkZFByaW9yaXRpemVkSm9iIiwiY29udGVudCIsIm5hbWUiLCJrZXlzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/scripts/addPrioritizedJob-9.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/scripts/addRepeatableJob-2.js":
/*!********************************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/scripts/addRepeatableJob-2.js ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.addRepeatableJob = void 0;\nconst content = `--[[\n  Adds a repeatable job\n    Input:\n      KEYS[1] 'repeat' key\n      KEYS[2] 'delayed' key\n      ARGV[1] next milliseconds\n      ARGV[2] msgpacked options\n            [1]  name\n            [2]  tz?\n            [3]  pattern?\n            [4]  endDate?\n            [5]  every?\n      ARGV[3] legacy custom key TODO: remove this logic in next breaking change\n      ARGV[4] custom key\n      ARGV[5] prefix key\n      Output:\n        repeatableKey  - OK\n]]\nlocal rcall = redis.call\nlocal repeatKey = KEYS[1]\nlocal delayedKey = KEYS[2]\nlocal nextMillis = ARGV[1]\nlocal legacyCustomKey = ARGV[3]\nlocal customKey = ARGV[4]\nlocal prefixKey = ARGV[5]\n-- Includes\n--[[\n  Function to remove job.\n]]\n-- Includes\n--[[\n  Function to remove deduplication key if needed\n  when a job is being removed.\n]]\nlocal function removeDeduplicationKeyIfNeededOnRemoval(prefixKey,\n  jobKey, jobId)\n  local deduplicationId = rcall(\"HGET\", jobKey, \"deid\")\n  if deduplicationId then\n    local deduplicationKey = prefixKey .. \"de:\" .. deduplicationId\n    local currentJobId = rcall('GET', deduplicationKey)\n    if currentJobId and currentJobId == jobId then\n      return rcall(\"DEL\", deduplicationKey)\n    end\n  end\nend\n--[[\n  Function to remove job keys.\n]]\nlocal function removeJobKeys(jobKey)\n  return rcall(\"DEL\", jobKey, jobKey .. ':logs', jobKey .. ':dependencies',\n    jobKey .. ':processed', jobKey .. ':failed', jobKey .. ':unsuccessful')\nend\n--[[\n  Check if this job has a parent. If so we will just remove it from\n  the parent child list, but if it is the last child we should move the parent to \"wait/paused\"\n  which requires code from \"moveToFinished\"\n]]\n-- Includes\n--[[\n  Function to add job in target list and add marker if needed.\n]]\n-- Includes\n--[[\n  Add marker if needed when a job is available.\n]]\nlocal function addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)\n  if not isPausedOrMaxed then\n    rcall(\"ZADD\", markerKey, 0, \"0\")\n  end  \nend\nlocal function addJobInTargetList(targetKey, markerKey, pushCmd, isPausedOrMaxed, jobId)\n  rcall(pushCmd, targetKey, jobId)\n  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)\nend\n--[[\n  Functions to destructure job key.\n  Just a bit of warning, these functions may be a bit slow and affect performance significantly.\n]]\nlocal getJobIdFromKey = function (jobKey)\n  return string.match(jobKey, \".*:(.*)\")\nend\nlocal getJobKeyPrefix = function (jobKey, jobId)\n  return string.sub(jobKey, 0, #jobKey - #jobId)\nend\n--[[\n  Function to check for the meta.paused key to decide if we are paused or not\n  (since an empty list and !EXISTS are not really the same).\n]]\nlocal function getTargetQueueList(queueMetaKey, activeKey, waitKey, pausedKey)\n  local queueAttributes = rcall(\"HMGET\", queueMetaKey, \"paused\", \"concurrency\", \"max\", \"duration\")\n  if queueAttributes[1] then\n    return pausedKey, true, queueAttributes[3], queueAttributes[4]\n  else\n    if queueAttributes[2] then\n      local activeCount = rcall(\"LLEN\", activeKey)\n      if activeCount >= tonumber(queueAttributes[2]) then\n        return waitKey, true, queueAttributes[3], queueAttributes[4]\n      else\n        return waitKey, false, queueAttributes[3], queueAttributes[4]\n      end\n    end\n  end\n  return waitKey, false, queueAttributes[3], queueAttributes[4]\nend\nlocal function _moveParentToWait(parentPrefix, parentId, emitEvent)\n  local parentTarget, isPausedOrMaxed = getTargetQueueList(parentPrefix .. \"meta\", parentPrefix .. \"active\",\n    parentPrefix .. \"wait\", parentPrefix .. \"paused\")\n  addJobInTargetList(parentTarget, parentPrefix .. \"marker\", \"RPUSH\", isPausedOrMaxed, parentId)\n  if emitEvent then\n    local parentEventStream = parentPrefix .. \"events\"\n    rcall(\"XADD\", parentEventStream, \"*\", \"event\", \"waiting\", \"jobId\", parentId, \"prev\", \"waiting-children\")\n  end\nend\nlocal function removeParentDependencyKey(jobKey, hard, parentKey, baseKey, debounceId)\n  if parentKey then\n    local parentDependenciesKey = parentKey .. \":dependencies\"\n    local result = rcall(\"SREM\", parentDependenciesKey, jobKey)\n    if result > 0 then\n      local pendingDependencies = rcall(\"SCARD\", parentDependenciesKey)\n      if pendingDependencies == 0 then\n        local parentId = getJobIdFromKey(parentKey)\n        local parentPrefix = getJobKeyPrefix(parentKey, parentId)\n        local numRemovedElements = rcall(\"ZREM\", parentPrefix .. \"waiting-children\", parentId)\n        if numRemovedElements == 1 then\n          if hard then -- remove parent in same queue\n            if parentPrefix == baseKey then\n              removeParentDependencyKey(parentKey, hard, nil, baseKey, nil)\n              removeJobKeys(parentKey)\n              if debounceId then\n                rcall(\"DEL\", parentPrefix .. \"de:\" .. debounceId)\n              end\n            else\n              _moveParentToWait(parentPrefix, parentId)\n            end\n          else\n            _moveParentToWait(parentPrefix, parentId, true)\n          end\n        end\n      end\n      return true\n    end\n  else\n    local parentAttributes = rcall(\"HMGET\", jobKey, \"parentKey\", \"deid\")\n    local missedParentKey = parentAttributes[1]\n    if( (type(missedParentKey) == \"string\") and missedParentKey ~= \"\"\n      and (rcall(\"EXISTS\", missedParentKey) == 1)) then\n      local parentDependenciesKey = missedParentKey .. \":dependencies\"\n      local result = rcall(\"SREM\", parentDependenciesKey, jobKey)\n      if result > 0 then\n        local pendingDependencies = rcall(\"SCARD\", parentDependenciesKey)\n        if pendingDependencies == 0 then\n          local parentId = getJobIdFromKey(missedParentKey)\n          local parentPrefix = getJobKeyPrefix(missedParentKey, parentId)\n          local numRemovedElements = rcall(\"ZREM\", parentPrefix .. \"waiting-children\", parentId)\n          if numRemovedElements == 1 then\n            if hard then\n              if parentPrefix == baseKey then\n                removeParentDependencyKey(missedParentKey, hard, nil, baseKey, nil)\n                removeJobKeys(missedParentKey)\n                if parentAttributes[2] then\n                  rcall(\"DEL\", parentPrefix .. \"de:\" .. parentAttributes[2])\n                end\n              else\n                _moveParentToWait(parentPrefix, parentId)\n              end\n            else\n              _moveParentToWait(parentPrefix, parentId, true)\n            end\n          end\n        end\n        return true\n      end\n    end\n  end\n  return false\nend\nlocal function removeJob(jobId, hard, baseKey, shouldRemoveDeduplicationKey)\n  local jobKey = baseKey .. jobId\n  removeParentDependencyKey(jobKey, hard, nil, baseKey)\n  if shouldRemoveDeduplicationKey then\n    removeDeduplicationKeyIfNeededOnRemoval(baseKey, jobKey, jobId)\n  end\n  removeJobKeys(jobKey)\nend\nlocal function storeRepeatableJob(repeatKey, customKey, nextMillis, rawOpts)\n  rcall(\"ZADD\", repeatKey, nextMillis, customKey)\n  local opts = cmsgpack.unpack(rawOpts)\n  local optionalValues = {}\n  if opts['tz'] then\n    table.insert(optionalValues, \"tz\")\n    table.insert(optionalValues, opts['tz'])\n  end\n  if opts['pattern'] then\n    table.insert(optionalValues, \"pattern\")\n    table.insert(optionalValues, opts['pattern'])\n  end\n  if opts['endDate'] then\n    table.insert(optionalValues, \"endDate\")\n    table.insert(optionalValues, opts['endDate'])\n  end\n  if opts['every'] then\n    table.insert(optionalValues, \"every\")\n    table.insert(optionalValues, opts['every'])\n  end\n  rcall(\"HMSET\", repeatKey .. \":\" .. customKey, \"name\", opts['name'],\n    unpack(optionalValues))\n  return customKey\nend\n-- If we are overriding a repeatable job we must delete the delayed job for\n-- the next iteration.\nlocal prevMillis = rcall(\"ZSCORE\", repeatKey, customKey)\nif prevMillis then\n  local delayedJobId =  \"repeat:\" .. customKey .. \":\" .. prevMillis\n  local nextDelayedJobId =  repeatKey .. \":\" .. customKey .. \":\" .. nextMillis\n  if rcall(\"ZSCORE\", delayedKey, delayedJobId)\n   and rcall(\"EXISTS\", nextDelayedJobId) ~= 1 then\n    removeJob(delayedJobId, true, prefixKey, true --[[remove debounce key]])\n    rcall(\"ZREM\", delayedKey, delayedJobId)\n  end\nend\n-- Keep backwards compatibility with old repeatable jobs (<= 3.0.0)\nif rcall(\"ZSCORE\", repeatKey, legacyCustomKey) ~= false then\n  return storeRepeatableJob(repeatKey, legacyCustomKey, nextMillis, ARGV[2])\nend\nreturn storeRepeatableJob(repeatKey, customKey, nextMillis, ARGV[2])\n`;\nexports.addRepeatableJob = {\n    name: \"addRepeatableJob\",\n    content,\n    keys: 2\n}; //# sourceMappingURL=addRepeatableJob-2.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL3NjcmlwdHMvYWRkUmVwZWF0YWJsZUpvYi0yLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCx3QkFBd0IsR0FBRyxLQUFLO0FBQ2hDLE1BQU1HLFVBQVUsQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBaU9qQixDQUFDO0FBQ0RILHdCQUF3QixHQUFHO0lBQ3ZCSSxNQUFNO0lBQ05EO0lBQ0FFLE1BQU07QUFDVixHQUNBLDhDQUE4QyIsInNvdXJjZXMiOlsid2VicGFjazovL29ubHlmYW5zLXBsYXRmb3JtLy4vbm9kZV9tb2R1bGVzL2J1bGxtcS9kaXN0L2Nqcy9zY3JpcHRzL2FkZFJlcGVhdGFibGVKb2ItMi5qcz82OGQ3Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5hZGRSZXBlYXRhYmxlSm9iID0gdm9pZCAwO1xuY29uc3QgY29udGVudCA9IGAtLVtbXG4gIEFkZHMgYSByZXBlYXRhYmxlIGpvYlxuICAgIElucHV0OlxuICAgICAgS0VZU1sxXSAncmVwZWF0JyBrZXlcbiAgICAgIEtFWVNbMl0gJ2RlbGF5ZWQnIGtleVxuICAgICAgQVJHVlsxXSBuZXh0IG1pbGxpc2Vjb25kc1xuICAgICAgQVJHVlsyXSBtc2dwYWNrZWQgb3B0aW9uc1xuICAgICAgICAgICAgWzFdICBuYW1lXG4gICAgICAgICAgICBbMl0gIHR6P1xuICAgICAgICAgICAgWzNdICBwYXR0ZXJuP1xuICAgICAgICAgICAgWzRdICBlbmREYXRlP1xuICAgICAgICAgICAgWzVdICBldmVyeT9cbiAgICAgIEFSR1ZbM10gbGVnYWN5IGN1c3RvbSBrZXkgVE9ETzogcmVtb3ZlIHRoaXMgbG9naWMgaW4gbmV4dCBicmVha2luZyBjaGFuZ2VcbiAgICAgIEFSR1ZbNF0gY3VzdG9tIGtleVxuICAgICAgQVJHVls1XSBwcmVmaXgga2V5XG4gICAgICBPdXRwdXQ6XG4gICAgICAgIHJlcGVhdGFibGVLZXkgIC0gT0tcbl1dXG5sb2NhbCByY2FsbCA9IHJlZGlzLmNhbGxcbmxvY2FsIHJlcGVhdEtleSA9IEtFWVNbMV1cbmxvY2FsIGRlbGF5ZWRLZXkgPSBLRVlTWzJdXG5sb2NhbCBuZXh0TWlsbGlzID0gQVJHVlsxXVxubG9jYWwgbGVnYWN5Q3VzdG9tS2V5ID0gQVJHVlszXVxubG9jYWwgY3VzdG9tS2V5ID0gQVJHVls0XVxubG9jYWwgcHJlZml4S2V5ID0gQVJHVls1XVxuLS0gSW5jbHVkZXNcbi0tW1tcbiAgRnVuY3Rpb24gdG8gcmVtb3ZlIGpvYi5cbl1dXG4tLSBJbmNsdWRlc1xuLS1bW1xuICBGdW5jdGlvbiB0byByZW1vdmUgZGVkdXBsaWNhdGlvbiBrZXkgaWYgbmVlZGVkXG4gIHdoZW4gYSBqb2IgaXMgYmVpbmcgcmVtb3ZlZC5cbl1dXG5sb2NhbCBmdW5jdGlvbiByZW1vdmVEZWR1cGxpY2F0aW9uS2V5SWZOZWVkZWRPblJlbW92YWwocHJlZml4S2V5LFxuICBqb2JLZXksIGpvYklkKVxuICBsb2NhbCBkZWR1cGxpY2F0aW9uSWQgPSByY2FsbChcIkhHRVRcIiwgam9iS2V5LCBcImRlaWRcIilcbiAgaWYgZGVkdXBsaWNhdGlvbklkIHRoZW5cbiAgICBsb2NhbCBkZWR1cGxpY2F0aW9uS2V5ID0gcHJlZml4S2V5IC4uIFwiZGU6XCIgLi4gZGVkdXBsaWNhdGlvbklkXG4gICAgbG9jYWwgY3VycmVudEpvYklkID0gcmNhbGwoJ0dFVCcsIGRlZHVwbGljYXRpb25LZXkpXG4gICAgaWYgY3VycmVudEpvYklkIGFuZCBjdXJyZW50Sm9iSWQgPT0gam9iSWQgdGhlblxuICAgICAgcmV0dXJuIHJjYWxsKFwiREVMXCIsIGRlZHVwbGljYXRpb25LZXkpXG4gICAgZW5kXG4gIGVuZFxuZW5kXG4tLVtbXG4gIEZ1bmN0aW9uIHRvIHJlbW92ZSBqb2Iga2V5cy5cbl1dXG5sb2NhbCBmdW5jdGlvbiByZW1vdmVKb2JLZXlzKGpvYktleSlcbiAgcmV0dXJuIHJjYWxsKFwiREVMXCIsIGpvYktleSwgam9iS2V5IC4uICc6bG9ncycsIGpvYktleSAuLiAnOmRlcGVuZGVuY2llcycsXG4gICAgam9iS2V5IC4uICc6cHJvY2Vzc2VkJywgam9iS2V5IC4uICc6ZmFpbGVkJywgam9iS2V5IC4uICc6dW5zdWNjZXNzZnVsJylcbmVuZFxuLS1bW1xuICBDaGVjayBpZiB0aGlzIGpvYiBoYXMgYSBwYXJlbnQuIElmIHNvIHdlIHdpbGwganVzdCByZW1vdmUgaXQgZnJvbVxuICB0aGUgcGFyZW50IGNoaWxkIGxpc3QsIGJ1dCBpZiBpdCBpcyB0aGUgbGFzdCBjaGlsZCB3ZSBzaG91bGQgbW92ZSB0aGUgcGFyZW50IHRvIFwid2FpdC9wYXVzZWRcIlxuICB3aGljaCByZXF1aXJlcyBjb2RlIGZyb20gXCJtb3ZlVG9GaW5pc2hlZFwiXG5dXVxuLS0gSW5jbHVkZXNcbi0tW1tcbiAgRnVuY3Rpb24gdG8gYWRkIGpvYiBpbiB0YXJnZXQgbGlzdCBhbmQgYWRkIG1hcmtlciBpZiBuZWVkZWQuXG5dXVxuLS0gSW5jbHVkZXNcbi0tW1tcbiAgQWRkIG1hcmtlciBpZiBuZWVkZWQgd2hlbiBhIGpvYiBpcyBhdmFpbGFibGUuXG5dXVxubG9jYWwgZnVuY3Rpb24gYWRkQmFzZU1hcmtlcklmTmVlZGVkKG1hcmtlcktleSwgaXNQYXVzZWRPck1heGVkKVxuICBpZiBub3QgaXNQYXVzZWRPck1heGVkIHRoZW5cbiAgICByY2FsbChcIlpBRERcIiwgbWFya2VyS2V5LCAwLCBcIjBcIilcbiAgZW5kICBcbmVuZFxubG9jYWwgZnVuY3Rpb24gYWRkSm9iSW5UYXJnZXRMaXN0KHRhcmdldEtleSwgbWFya2VyS2V5LCBwdXNoQ21kLCBpc1BhdXNlZE9yTWF4ZWQsIGpvYklkKVxuICByY2FsbChwdXNoQ21kLCB0YXJnZXRLZXksIGpvYklkKVxuICBhZGRCYXNlTWFya2VySWZOZWVkZWQobWFya2VyS2V5LCBpc1BhdXNlZE9yTWF4ZWQpXG5lbmRcbi0tW1tcbiAgRnVuY3Rpb25zIHRvIGRlc3RydWN0dXJlIGpvYiBrZXkuXG4gIEp1c3QgYSBiaXQgb2Ygd2FybmluZywgdGhlc2UgZnVuY3Rpb25zIG1heSBiZSBhIGJpdCBzbG93IGFuZCBhZmZlY3QgcGVyZm9ybWFuY2Ugc2lnbmlmaWNhbnRseS5cbl1dXG5sb2NhbCBnZXRKb2JJZEZyb21LZXkgPSBmdW5jdGlvbiAoam9iS2V5KVxuICByZXR1cm4gc3RyaW5nLm1hdGNoKGpvYktleSwgXCIuKjooLiopXCIpXG5lbmRcbmxvY2FsIGdldEpvYktleVByZWZpeCA9IGZ1bmN0aW9uIChqb2JLZXksIGpvYklkKVxuICByZXR1cm4gc3RyaW5nLnN1Yihqb2JLZXksIDAsICNqb2JLZXkgLSAjam9iSWQpXG5lbmRcbi0tW1tcbiAgRnVuY3Rpb24gdG8gY2hlY2sgZm9yIHRoZSBtZXRhLnBhdXNlZCBrZXkgdG8gZGVjaWRlIGlmIHdlIGFyZSBwYXVzZWQgb3Igbm90XG4gIChzaW5jZSBhbiBlbXB0eSBsaXN0IGFuZCAhRVhJU1RTIGFyZSBub3QgcmVhbGx5IHRoZSBzYW1lKS5cbl1dXG5sb2NhbCBmdW5jdGlvbiBnZXRUYXJnZXRRdWV1ZUxpc3QocXVldWVNZXRhS2V5LCBhY3RpdmVLZXksIHdhaXRLZXksIHBhdXNlZEtleSlcbiAgbG9jYWwgcXVldWVBdHRyaWJ1dGVzID0gcmNhbGwoXCJITUdFVFwiLCBxdWV1ZU1ldGFLZXksIFwicGF1c2VkXCIsIFwiY29uY3VycmVuY3lcIiwgXCJtYXhcIiwgXCJkdXJhdGlvblwiKVxuICBpZiBxdWV1ZUF0dHJpYnV0ZXNbMV0gdGhlblxuICAgIHJldHVybiBwYXVzZWRLZXksIHRydWUsIHF1ZXVlQXR0cmlidXRlc1szXSwgcXVldWVBdHRyaWJ1dGVzWzRdXG4gIGVsc2VcbiAgICBpZiBxdWV1ZUF0dHJpYnV0ZXNbMl0gdGhlblxuICAgICAgbG9jYWwgYWN0aXZlQ291bnQgPSByY2FsbChcIkxMRU5cIiwgYWN0aXZlS2V5KVxuICAgICAgaWYgYWN0aXZlQ291bnQgPj0gdG9udW1iZXIocXVldWVBdHRyaWJ1dGVzWzJdKSB0aGVuXG4gICAgICAgIHJldHVybiB3YWl0S2V5LCB0cnVlLCBxdWV1ZUF0dHJpYnV0ZXNbM10sIHF1ZXVlQXR0cmlidXRlc1s0XVxuICAgICAgZWxzZVxuICAgICAgICByZXR1cm4gd2FpdEtleSwgZmFsc2UsIHF1ZXVlQXR0cmlidXRlc1szXSwgcXVldWVBdHRyaWJ1dGVzWzRdXG4gICAgICBlbmRcbiAgICBlbmRcbiAgZW5kXG4gIHJldHVybiB3YWl0S2V5LCBmYWxzZSwgcXVldWVBdHRyaWJ1dGVzWzNdLCBxdWV1ZUF0dHJpYnV0ZXNbNF1cbmVuZFxubG9jYWwgZnVuY3Rpb24gX21vdmVQYXJlbnRUb1dhaXQocGFyZW50UHJlZml4LCBwYXJlbnRJZCwgZW1pdEV2ZW50KVxuICBsb2NhbCBwYXJlbnRUYXJnZXQsIGlzUGF1c2VkT3JNYXhlZCA9IGdldFRhcmdldFF1ZXVlTGlzdChwYXJlbnRQcmVmaXggLi4gXCJtZXRhXCIsIHBhcmVudFByZWZpeCAuLiBcImFjdGl2ZVwiLFxuICAgIHBhcmVudFByZWZpeCAuLiBcIndhaXRcIiwgcGFyZW50UHJlZml4IC4uIFwicGF1c2VkXCIpXG4gIGFkZEpvYkluVGFyZ2V0TGlzdChwYXJlbnRUYXJnZXQsIHBhcmVudFByZWZpeCAuLiBcIm1hcmtlclwiLCBcIlJQVVNIXCIsIGlzUGF1c2VkT3JNYXhlZCwgcGFyZW50SWQpXG4gIGlmIGVtaXRFdmVudCB0aGVuXG4gICAgbG9jYWwgcGFyZW50RXZlbnRTdHJlYW0gPSBwYXJlbnRQcmVmaXggLi4gXCJldmVudHNcIlxuICAgIHJjYWxsKFwiWEFERFwiLCBwYXJlbnRFdmVudFN0cmVhbSwgXCIqXCIsIFwiZXZlbnRcIiwgXCJ3YWl0aW5nXCIsIFwiam9iSWRcIiwgcGFyZW50SWQsIFwicHJldlwiLCBcIndhaXRpbmctY2hpbGRyZW5cIilcbiAgZW5kXG5lbmRcbmxvY2FsIGZ1bmN0aW9uIHJlbW92ZVBhcmVudERlcGVuZGVuY3lLZXkoam9iS2V5LCBoYXJkLCBwYXJlbnRLZXksIGJhc2VLZXksIGRlYm91bmNlSWQpXG4gIGlmIHBhcmVudEtleSB0aGVuXG4gICAgbG9jYWwgcGFyZW50RGVwZW5kZW5jaWVzS2V5ID0gcGFyZW50S2V5IC4uIFwiOmRlcGVuZGVuY2llc1wiXG4gICAgbG9jYWwgcmVzdWx0ID0gcmNhbGwoXCJTUkVNXCIsIHBhcmVudERlcGVuZGVuY2llc0tleSwgam9iS2V5KVxuICAgIGlmIHJlc3VsdCA+IDAgdGhlblxuICAgICAgbG9jYWwgcGVuZGluZ0RlcGVuZGVuY2llcyA9IHJjYWxsKFwiU0NBUkRcIiwgcGFyZW50RGVwZW5kZW5jaWVzS2V5KVxuICAgICAgaWYgcGVuZGluZ0RlcGVuZGVuY2llcyA9PSAwIHRoZW5cbiAgICAgICAgbG9jYWwgcGFyZW50SWQgPSBnZXRKb2JJZEZyb21LZXkocGFyZW50S2V5KVxuICAgICAgICBsb2NhbCBwYXJlbnRQcmVmaXggPSBnZXRKb2JLZXlQcmVmaXgocGFyZW50S2V5LCBwYXJlbnRJZClcbiAgICAgICAgbG9jYWwgbnVtUmVtb3ZlZEVsZW1lbnRzID0gcmNhbGwoXCJaUkVNXCIsIHBhcmVudFByZWZpeCAuLiBcIndhaXRpbmctY2hpbGRyZW5cIiwgcGFyZW50SWQpXG4gICAgICAgIGlmIG51bVJlbW92ZWRFbGVtZW50cyA9PSAxIHRoZW5cbiAgICAgICAgICBpZiBoYXJkIHRoZW4gLS0gcmVtb3ZlIHBhcmVudCBpbiBzYW1lIHF1ZXVlXG4gICAgICAgICAgICBpZiBwYXJlbnRQcmVmaXggPT0gYmFzZUtleSB0aGVuXG4gICAgICAgICAgICAgIHJlbW92ZVBhcmVudERlcGVuZGVuY3lLZXkocGFyZW50S2V5LCBoYXJkLCBuaWwsIGJhc2VLZXksIG5pbClcbiAgICAgICAgICAgICAgcmVtb3ZlSm9iS2V5cyhwYXJlbnRLZXkpXG4gICAgICAgICAgICAgIGlmIGRlYm91bmNlSWQgdGhlblxuICAgICAgICAgICAgICAgIHJjYWxsKFwiREVMXCIsIHBhcmVudFByZWZpeCAuLiBcImRlOlwiIC4uIGRlYm91bmNlSWQpXG4gICAgICAgICAgICAgIGVuZFxuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICBfbW92ZVBhcmVudFRvV2FpdChwYXJlbnRQcmVmaXgsIHBhcmVudElkKVxuICAgICAgICAgICAgZW5kXG4gICAgICAgICAgZWxzZVxuICAgICAgICAgICAgX21vdmVQYXJlbnRUb1dhaXQocGFyZW50UHJlZml4LCBwYXJlbnRJZCwgdHJ1ZSlcbiAgICAgICAgICBlbmRcbiAgICAgICAgZW5kXG4gICAgICBlbmRcbiAgICAgIHJldHVybiB0cnVlXG4gICAgZW5kXG4gIGVsc2VcbiAgICBsb2NhbCBwYXJlbnRBdHRyaWJ1dGVzID0gcmNhbGwoXCJITUdFVFwiLCBqb2JLZXksIFwicGFyZW50S2V5XCIsIFwiZGVpZFwiKVxuICAgIGxvY2FsIG1pc3NlZFBhcmVudEtleSA9IHBhcmVudEF0dHJpYnV0ZXNbMV1cbiAgICBpZiggKHR5cGUobWlzc2VkUGFyZW50S2V5KSA9PSBcInN0cmluZ1wiKSBhbmQgbWlzc2VkUGFyZW50S2V5IH49IFwiXCJcbiAgICAgIGFuZCAocmNhbGwoXCJFWElTVFNcIiwgbWlzc2VkUGFyZW50S2V5KSA9PSAxKSkgdGhlblxuICAgICAgbG9jYWwgcGFyZW50RGVwZW5kZW5jaWVzS2V5ID0gbWlzc2VkUGFyZW50S2V5IC4uIFwiOmRlcGVuZGVuY2llc1wiXG4gICAgICBsb2NhbCByZXN1bHQgPSByY2FsbChcIlNSRU1cIiwgcGFyZW50RGVwZW5kZW5jaWVzS2V5LCBqb2JLZXkpXG4gICAgICBpZiByZXN1bHQgPiAwIHRoZW5cbiAgICAgICAgbG9jYWwgcGVuZGluZ0RlcGVuZGVuY2llcyA9IHJjYWxsKFwiU0NBUkRcIiwgcGFyZW50RGVwZW5kZW5jaWVzS2V5KVxuICAgICAgICBpZiBwZW5kaW5nRGVwZW5kZW5jaWVzID09IDAgdGhlblxuICAgICAgICAgIGxvY2FsIHBhcmVudElkID0gZ2V0Sm9iSWRGcm9tS2V5KG1pc3NlZFBhcmVudEtleSlcbiAgICAgICAgICBsb2NhbCBwYXJlbnRQcmVmaXggPSBnZXRKb2JLZXlQcmVmaXgobWlzc2VkUGFyZW50S2V5LCBwYXJlbnRJZClcbiAgICAgICAgICBsb2NhbCBudW1SZW1vdmVkRWxlbWVudHMgPSByY2FsbChcIlpSRU1cIiwgcGFyZW50UHJlZml4IC4uIFwid2FpdGluZy1jaGlsZHJlblwiLCBwYXJlbnRJZClcbiAgICAgICAgICBpZiBudW1SZW1vdmVkRWxlbWVudHMgPT0gMSB0aGVuXG4gICAgICAgICAgICBpZiBoYXJkIHRoZW5cbiAgICAgICAgICAgICAgaWYgcGFyZW50UHJlZml4ID09IGJhc2VLZXkgdGhlblxuICAgICAgICAgICAgICAgIHJlbW92ZVBhcmVudERlcGVuZGVuY3lLZXkobWlzc2VkUGFyZW50S2V5LCBoYXJkLCBuaWwsIGJhc2VLZXksIG5pbClcbiAgICAgICAgICAgICAgICByZW1vdmVKb2JLZXlzKG1pc3NlZFBhcmVudEtleSlcbiAgICAgICAgICAgICAgICBpZiBwYXJlbnRBdHRyaWJ1dGVzWzJdIHRoZW5cbiAgICAgICAgICAgICAgICAgIHJjYWxsKFwiREVMXCIsIHBhcmVudFByZWZpeCAuLiBcImRlOlwiIC4uIHBhcmVudEF0dHJpYnV0ZXNbMl0pXG4gICAgICAgICAgICAgICAgZW5kXG4gICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBfbW92ZVBhcmVudFRvV2FpdChwYXJlbnRQcmVmaXgsIHBhcmVudElkKVxuICAgICAgICAgICAgICBlbmRcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgX21vdmVQYXJlbnRUb1dhaXQocGFyZW50UHJlZml4LCBwYXJlbnRJZCwgdHJ1ZSlcbiAgICAgICAgICAgIGVuZFxuICAgICAgICAgIGVuZFxuICAgICAgICBlbmRcbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgIGVuZFxuICAgIGVuZFxuICBlbmRcbiAgcmV0dXJuIGZhbHNlXG5lbmRcbmxvY2FsIGZ1bmN0aW9uIHJlbW92ZUpvYihqb2JJZCwgaGFyZCwgYmFzZUtleSwgc2hvdWxkUmVtb3ZlRGVkdXBsaWNhdGlvbktleSlcbiAgbG9jYWwgam9iS2V5ID0gYmFzZUtleSAuLiBqb2JJZFxuICByZW1vdmVQYXJlbnREZXBlbmRlbmN5S2V5KGpvYktleSwgaGFyZCwgbmlsLCBiYXNlS2V5KVxuICBpZiBzaG91bGRSZW1vdmVEZWR1cGxpY2F0aW9uS2V5IHRoZW5cbiAgICByZW1vdmVEZWR1cGxpY2F0aW9uS2V5SWZOZWVkZWRPblJlbW92YWwoYmFzZUtleSwgam9iS2V5LCBqb2JJZClcbiAgZW5kXG4gIHJlbW92ZUpvYktleXMoam9iS2V5KVxuZW5kXG5sb2NhbCBmdW5jdGlvbiBzdG9yZVJlcGVhdGFibGVKb2IocmVwZWF0S2V5LCBjdXN0b21LZXksIG5leHRNaWxsaXMsIHJhd09wdHMpXG4gIHJjYWxsKFwiWkFERFwiLCByZXBlYXRLZXksIG5leHRNaWxsaXMsIGN1c3RvbUtleSlcbiAgbG9jYWwgb3B0cyA9IGNtc2dwYWNrLnVucGFjayhyYXdPcHRzKVxuICBsb2NhbCBvcHRpb25hbFZhbHVlcyA9IHt9XG4gIGlmIG9wdHNbJ3R6J10gdGhlblxuICAgIHRhYmxlLmluc2VydChvcHRpb25hbFZhbHVlcywgXCJ0elwiKVxuICAgIHRhYmxlLmluc2VydChvcHRpb25hbFZhbHVlcywgb3B0c1sndHonXSlcbiAgZW5kXG4gIGlmIG9wdHNbJ3BhdHRlcm4nXSB0aGVuXG4gICAgdGFibGUuaW5zZXJ0KG9wdGlvbmFsVmFsdWVzLCBcInBhdHRlcm5cIilcbiAgICB0YWJsZS5pbnNlcnQob3B0aW9uYWxWYWx1ZXMsIG9wdHNbJ3BhdHRlcm4nXSlcbiAgZW5kXG4gIGlmIG9wdHNbJ2VuZERhdGUnXSB0aGVuXG4gICAgdGFibGUuaW5zZXJ0KG9wdGlvbmFsVmFsdWVzLCBcImVuZERhdGVcIilcbiAgICB0YWJsZS5pbnNlcnQob3B0aW9uYWxWYWx1ZXMsIG9wdHNbJ2VuZERhdGUnXSlcbiAgZW5kXG4gIGlmIG9wdHNbJ2V2ZXJ5J10gdGhlblxuICAgIHRhYmxlLmluc2VydChvcHRpb25hbFZhbHVlcywgXCJldmVyeVwiKVxuICAgIHRhYmxlLmluc2VydChvcHRpb25hbFZhbHVlcywgb3B0c1snZXZlcnknXSlcbiAgZW5kXG4gIHJjYWxsKFwiSE1TRVRcIiwgcmVwZWF0S2V5IC4uIFwiOlwiIC4uIGN1c3RvbUtleSwgXCJuYW1lXCIsIG9wdHNbJ25hbWUnXSxcbiAgICB1bnBhY2sob3B0aW9uYWxWYWx1ZXMpKVxuICByZXR1cm4gY3VzdG9tS2V5XG5lbmRcbi0tIElmIHdlIGFyZSBvdmVycmlkaW5nIGEgcmVwZWF0YWJsZSBqb2Igd2UgbXVzdCBkZWxldGUgdGhlIGRlbGF5ZWQgam9iIGZvclxuLS0gdGhlIG5leHQgaXRlcmF0aW9uLlxubG9jYWwgcHJldk1pbGxpcyA9IHJjYWxsKFwiWlNDT1JFXCIsIHJlcGVhdEtleSwgY3VzdG9tS2V5KVxuaWYgcHJldk1pbGxpcyB0aGVuXG4gIGxvY2FsIGRlbGF5ZWRKb2JJZCA9ICBcInJlcGVhdDpcIiAuLiBjdXN0b21LZXkgLi4gXCI6XCIgLi4gcHJldk1pbGxpc1xuICBsb2NhbCBuZXh0RGVsYXllZEpvYklkID0gIHJlcGVhdEtleSAuLiBcIjpcIiAuLiBjdXN0b21LZXkgLi4gXCI6XCIgLi4gbmV4dE1pbGxpc1xuICBpZiByY2FsbChcIlpTQ09SRVwiLCBkZWxheWVkS2V5LCBkZWxheWVkSm9iSWQpXG4gICBhbmQgcmNhbGwoXCJFWElTVFNcIiwgbmV4dERlbGF5ZWRKb2JJZCkgfj0gMSB0aGVuXG4gICAgcmVtb3ZlSm9iKGRlbGF5ZWRKb2JJZCwgdHJ1ZSwgcHJlZml4S2V5LCB0cnVlIC0tW1tyZW1vdmUgZGVib3VuY2Uga2V5XV0pXG4gICAgcmNhbGwoXCJaUkVNXCIsIGRlbGF5ZWRLZXksIGRlbGF5ZWRKb2JJZClcbiAgZW5kXG5lbmRcbi0tIEtlZXAgYmFja3dhcmRzIGNvbXBhdGliaWxpdHkgd2l0aCBvbGQgcmVwZWF0YWJsZSBqb2JzICg8PSAzLjAuMClcbmlmIHJjYWxsKFwiWlNDT1JFXCIsIHJlcGVhdEtleSwgbGVnYWN5Q3VzdG9tS2V5KSB+PSBmYWxzZSB0aGVuXG4gIHJldHVybiBzdG9yZVJlcGVhdGFibGVKb2IocmVwZWF0S2V5LCBsZWdhY3lDdXN0b21LZXksIG5leHRNaWxsaXMsIEFSR1ZbMl0pXG5lbmRcbnJldHVybiBzdG9yZVJlcGVhdGFibGVKb2IocmVwZWF0S2V5LCBjdXN0b21LZXksIG5leHRNaWxsaXMsIEFSR1ZbMl0pXG5gO1xuZXhwb3J0cy5hZGRSZXBlYXRhYmxlSm9iID0ge1xuICAgIG5hbWU6ICdhZGRSZXBlYXRhYmxlSm9iJyxcbiAgICBjb250ZW50LFxuICAgIGtleXM6IDIsXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YWRkUmVwZWF0YWJsZUpvYi0yLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsImFkZFJlcGVhdGFibGVKb2IiLCJjb250ZW50IiwibmFtZSIsImtleXMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/scripts/addRepeatableJob-2.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/scripts/addStandardJob-9.js":
/*!******************************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/scripts/addStandardJob-9.js ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.addStandardJob = void 0;\nconst content = `--[[\n  Adds a job to the queue by doing the following:\n    - Increases the job counter if needed.\n    - Creates a new job key with the job data.\n    - if delayed:\n      - computes timestamp.\n      - adds to delayed zset.\n      - Emits a global event 'delayed' if the job is delayed.\n    - if not delayed\n      - Adds the jobId to the wait/paused list in one of three ways:\n         - LIFO\n         - FIFO\n         - prioritized.\n      - Adds the job to the \"added\" list so that workers gets notified.\n    Input:\n      KEYS[1] 'wait',\n      KEYS[2] 'paused'\n      KEYS[3] 'meta'\n      KEYS[4] 'id'\n      KEYS[5] 'completed'\n      KEYS[6] 'delayed'\n      KEYS[7] 'active'\n      KEYS[8] events stream key\n      KEYS[9] marker key\n      ARGV[1] msgpacked arguments array\n            [1]  key prefix,\n            [2]  custom id (will not generate one automatically)\n            [3]  name\n            [4]  timestamp\n            [5]  parentKey?\n            [6]  parent dependencies key.\n            [7]  parent? {id, queueKey}\n            [8]  repeat job key\n            [9] deduplication key\n      ARGV[2] Json stringified job data\n      ARGV[3] msgpacked options\n      Output:\n        jobId  - OK\n        -5     - Missing parent key\n]]\nlocal eventsKey = KEYS[8]\nlocal jobId\nlocal jobIdKey\nlocal rcall = redis.call\nlocal args = cmsgpack.unpack(ARGV[1])\nlocal data = ARGV[2]\nlocal opts = cmsgpack.unpack(ARGV[3])\nlocal parentKey = args[5]\nlocal parent = args[7]\nlocal repeatJobKey = args[8]\nlocal deduplicationKey = args[9]\nlocal parentData\n-- Includes\n--[[\n  Function to add job in target list and add marker if needed.\n]]\n-- Includes\n--[[\n  Add marker if needed when a job is available.\n]]\nlocal function addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)\n  if not isPausedOrMaxed then\n    rcall(\"ZADD\", markerKey, 0, \"0\")\n  end  \nend\nlocal function addJobInTargetList(targetKey, markerKey, pushCmd, isPausedOrMaxed, jobId)\n  rcall(pushCmd, targetKey, jobId)\n  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)\nend\n--[[\n  Function to debounce a job.\n]]\n-- Includes\n--[[\n  Function to remove job keys.\n]]\nlocal function removeJobKeys(jobKey)\n  return rcall(\"DEL\", jobKey, jobKey .. ':logs', jobKey .. ':dependencies',\n    jobKey .. ':processed', jobKey .. ':failed', jobKey .. ':unsuccessful')\nend\nlocal function removeDelayedJob(delayedKey, deduplicationKey, eventsKey, maxEvents, currentDeduplicatedJobId,\n    jobId, deduplicationId, prefix)\n    if rcall(\"ZREM\", delayedKey, currentDeduplicatedJobId) > 0 then\n        removeJobKeys(prefix .. currentDeduplicatedJobId)\n        rcall(\"XADD\", eventsKey, \"*\", \"event\", \"removed\", \"jobId\", currentDeduplicatedJobId,\n            \"prev\", \"delayed\")\n        -- TODO remove debounced event in next breaking change\n        rcall(\"XADD\", eventsKey, \"MAXLEN\", \"~\", maxEvents, \"*\", \"event\", \"debounced\", \"jobId\",\n            jobId, \"debounceId\", deduplicationId)\n        rcall(\"XADD\", eventsKey, \"MAXLEN\", \"~\", maxEvents, \"*\", \"event\", \"deduplicated\", \"jobId\",\n            jobId, \"deduplicationId\", deduplicationId, \"deduplicatedJobId\", currentDeduplicatedJobId)\n        return true\n    end\n    return false\nend\nlocal function deduplicateJob(deduplicationOpts, jobId, delayedKey, deduplicationKey, eventsKey, maxEvents,\n    prefix)\n    local deduplicationId = deduplicationOpts and deduplicationOpts['id']\n    if deduplicationId then\n        local ttl = deduplicationOpts['ttl']\n        if deduplicationOpts['replace'] then\n            if ttl and ttl > 0 then\n                local currentDebounceJobId = rcall('GET', deduplicationKey)\n                if currentDebounceJobId then\n                    local isRemoved = removeDelayedJob(delayedKey, deduplicationKey, eventsKey, maxEvents,\n                        currentDebounceJobId, jobId, deduplicationId, prefix)\n                    if isRemoved then\n                        if deduplicationOpts['extend'] then\n                            rcall('SET', deduplicationKey, jobId, 'PX', ttl)\n                        else\n                            rcall('SET', deduplicationKey, jobId, 'KEEPTTL')\n                        end\n                        return\n                    else\n                        return currentDebounceJobId\n                    end\n                else\n                    rcall('SET', deduplicationKey, jobId, 'PX', ttl)\n                    return\n                end\n            else\n                local currentDebounceJobId = rcall('GET', deduplicationKey)\n                if currentDebounceJobId then\n                    local isRemoved = removeDelayedJob(delayedKey, deduplicationKey, eventsKey, maxEvents,\n                        currentDebounceJobId, jobId, deduplicationId, prefix)\n                    if isRemoved then\n                        rcall('SET', deduplicationKey, jobId)\n                        return\n                    else\n                        return currentDebounceJobId\n                    end\n                else\n                    rcall('SET', deduplicationKey, jobId)\n                    return\n                end\n            end\n        else\n            local deduplicationKeyExists\n            if ttl and ttl > 0 then\n                if deduplicationOpts['extend'] then\n                    local currentDebounceJobId = rcall('GET', deduplicationKey)\n                    if currentDebounceJobId then\n                        rcall('SET', deduplicationKey, currentDebounceJobId, 'PX', ttl)\n                        rcall(\"XADD\", eventsKey, \"MAXLEN\", \"~\", maxEvents, \"*\", \"event\", \"debounced\",\n                            \"jobId\", currentDebounceJobId, \"debounceId\", deduplicationId)\n                        rcall(\"XADD\", eventsKey, \"MAXLEN\", \"~\", maxEvents, \"*\", \"event\", \"deduplicated\", \"jobId\",\n                            currentDebounceJobId, \"deduplicationId\", deduplicationId, \"deduplicatedJobId\", jobId)\n                        return currentDebounceJobId\n                    else\n                        rcall('SET', deduplicationKey, jobId, 'PX', ttl)\n                        return\n                    end\n                else\n                    deduplicationKeyExists = not rcall('SET', deduplicationKey, jobId, 'PX', ttl, 'NX')\n                end\n            else\n                deduplicationKeyExists = not rcall('SET', deduplicationKey, jobId, 'NX')\n            end\n            if deduplicationKeyExists then\n                local currentDebounceJobId = rcall('GET', deduplicationKey)\n                -- TODO remove debounced event in next breaking change\n                rcall(\"XADD\", eventsKey, \"MAXLEN\", \"~\", maxEvents, \"*\", \"event\", \"debounced\", \"jobId\",\n                    currentDebounceJobId, \"debounceId\", deduplicationId)\n                rcall(\"XADD\", eventsKey, \"MAXLEN\", \"~\", maxEvents, \"*\", \"event\", \"deduplicated\", \"jobId\",\n                    currentDebounceJobId, \"deduplicationId\", deduplicationId, \"deduplicatedJobId\", jobId)\n                return currentDebounceJobId\n            end\n        end\n    end\nend\n--[[\n  Function to get max events value or set by default 10000.\n]]\nlocal function getOrSetMaxEvents(metaKey)\n  local maxEvents = rcall(\"HGET\", metaKey, \"opts.maxLenEvents\")\n  if not maxEvents then\n    maxEvents = 10000\n    rcall(\"HSET\", metaKey, \"opts.maxLenEvents\", maxEvents)\n  end\n  return maxEvents\nend\n--[[\n  Function to check for the meta.paused key to decide if we are paused or not\n  (since an empty list and !EXISTS are not really the same).\n]]\nlocal function getTargetQueueList(queueMetaKey, activeKey, waitKey, pausedKey)\n  local queueAttributes = rcall(\"HMGET\", queueMetaKey, \"paused\", \"concurrency\", \"max\", \"duration\")\n  if queueAttributes[1] then\n    return pausedKey, true, queueAttributes[3], queueAttributes[4]\n  else\n    if queueAttributes[2] then\n      local activeCount = rcall(\"LLEN\", activeKey)\n      if activeCount >= tonumber(queueAttributes[2]) then\n        return waitKey, true, queueAttributes[3], queueAttributes[4]\n      else\n        return waitKey, false, queueAttributes[3], queueAttributes[4]\n      end\n    end\n  end\n  return waitKey, false, queueAttributes[3], queueAttributes[4]\nend\n--[[\n  Function to handle the case when job is duplicated.\n]]\n-- Includes\n--[[\n    This function is used to update the parent's dependencies if the job\n    is already completed and about to be ignored. The parent must get its\n    dependencies updated to avoid the parent job being stuck forever in \n    the waiting-children state.\n]]\n-- Includes\n--[[\n  Validate and move or add dependencies to parent.\n]]\n-- Includes\n--[[\n  Validate and move parent to a wait status (waiting, delayed or prioritized)\n  if no pending dependencies.\n]]\n-- Includes\n--[[\n  Validate and move parent to a wait status (waiting, delayed or prioritized) if needed.\n]]\n-- Includes\n--[[\n  Move parent to a wait status (wait, prioritized or delayed)\n]]\n-- Includes\n--[[\n  Add delay marker if needed.\n]]\n-- Includes\n--[[\n  Function to return the next delayed job timestamp.\n]]\nlocal function getNextDelayedTimestamp(delayedKey)\n  local result = rcall(\"ZRANGE\", delayedKey, 0, 0, \"WITHSCORES\")\n  if #result then\n    local nextTimestamp = tonumber(result[2])\n    if nextTimestamp ~= nil then\n      return nextTimestamp / 0x1000\n    end\n  end\nend\nlocal function addDelayMarkerIfNeeded(markerKey, delayedKey)\n  local nextTimestamp = getNextDelayedTimestamp(delayedKey)\n  if nextTimestamp ~= nil then\n    -- Replace the score of the marker with the newest known\n    -- next timestamp.\n    rcall(\"ZADD\", markerKey, nextTimestamp, \"1\")\n  end\nend\n--[[\n  Function to add job considering priority.\n]]\n-- Includes\n--[[\n  Function to get priority score.\n]]\nlocal function getPriorityScore(priority, priorityCounterKey)\n  local prioCounter = rcall(\"INCR\", priorityCounterKey)\n  return priority * 0x100000000 + prioCounter % 0x100000000\nend\nlocal function addJobWithPriority(markerKey, prioritizedKey, priority, jobId, priorityCounterKey,\n  isPausedOrMaxed)\n  local score = getPriorityScore(priority, priorityCounterKey)\n  rcall(\"ZADD\", prioritizedKey, score, jobId)\n  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)\nend\n--[[\n  Function to check if queue is paused or maxed\n  (since an empty list and !EXISTS are not really the same).\n]]\nlocal function isQueuePausedOrMaxed(queueMetaKey, activeKey)\n  local queueAttributes = rcall(\"HMGET\", queueMetaKey, \"paused\", \"concurrency\")\n  if queueAttributes[1] then\n    return true\n  else\n    if queueAttributes[2] then\n      local activeCount = rcall(\"LLEN\", activeKey)\n      return activeCount >= tonumber(queueAttributes[2])\n    end\n  end\n  return false\nend\nlocal function moveParentToWait(parentQueueKey, parentKey, parentId, timestamp)\n    local parentWaitKey = parentQueueKey .. \":wait\"\n    local parentPausedKey = parentQueueKey .. \":paused\"\n    local parentActiveKey = parentQueueKey .. \":active\"\n    local parentMetaKey = parentQueueKey .. \":meta\"\n    local parentMarkerKey = parentQueueKey .. \":marker\"\n    local jobAttributes = rcall(\"HMGET\", parentKey, \"priority\", \"delay\")\n    local priority = tonumber(jobAttributes[1]) or 0\n    local delay = tonumber(jobAttributes[2]) or 0\n    if delay > 0 then\n        local delayedTimestamp = tonumber(timestamp) + delay\n        local score = delayedTimestamp * 0x1000\n        local parentDelayedKey = parentQueueKey .. \":delayed\"\n        rcall(\"ZADD\", parentDelayedKey, score, parentId)\n        rcall(\"XADD\", parentQueueKey .. \":events\", \"*\", \"event\", \"delayed\", \"jobId\", parentId, \"delay\",\n            delayedTimestamp)\n        addDelayMarkerIfNeeded(parentMarkerKey, parentDelayedKey)\n    else\n        if priority == 0 then\n            local parentTarget, isParentPausedOrMaxed = getTargetQueueList(parentMetaKey, parentActiveKey,\n                parentWaitKey, parentPausedKey)\n            addJobInTargetList(parentTarget, parentMarkerKey, \"RPUSH\", isParentPausedOrMaxed, parentId)\n        else\n            local isPausedOrMaxed = isQueuePausedOrMaxed(parentMetaKey, parentActiveKey)\n            addJobWithPriority(parentMarkerKey, parentQueueKey .. \":prioritized\", priority, parentId,\n                parentQueueKey .. \":pc\", isPausedOrMaxed)\n        end\n        rcall(\"XADD\", parentQueueKey .. \":events\", \"*\", \"event\", \"waiting\", \"jobId\", parentId, \"prev\",\n            \"waiting-children\")\n    end\nend\nlocal function moveParentToWaitIfNeeded(parentQueueKey, parentKey, parentId, timestamp)\n  if rcall(\"EXISTS\", parentKey) == 1 then\n    local parentWaitingChildrenKey = parentQueueKey .. \":waiting-children\"\n    if rcall(\"ZSCORE\", parentWaitingChildrenKey, parentId) then    \n      rcall(\"ZREM\", parentWaitingChildrenKey, parentId)\n      moveParentToWait(parentQueueKey, parentKey, parentId, timestamp)\n    end\n  end\nend\nlocal function moveParentToWaitIfNoPendingDependencies(parentQueueKey, parentDependenciesKey, parentKey,\n  parentId, timestamp)\n  local doNotHavePendingDependencies = rcall(\"SCARD\", parentDependenciesKey) == 0\n  if doNotHavePendingDependencies then\n    moveParentToWaitIfNeeded(parentQueueKey, parentKey, parentId, timestamp)\n  end\nend\nlocal function updateParentDepsIfNeeded(parentKey, parentQueueKey, parentDependenciesKey,\n  parentId, jobIdKey, returnvalue, timestamp )\n  local processedSet = parentKey .. \":processed\"\n  rcall(\"HSET\", processedSet, jobIdKey, returnvalue)\n  moveParentToWaitIfNoPendingDependencies(parentQueueKey, parentDependenciesKey, parentKey, parentId, timestamp)\nend\nlocal function updateExistingJobsParent(parentKey, parent, parentData,\n                                        parentDependenciesKey, completedKey,\n                                        jobIdKey, jobId, timestamp)\n    if parentKey ~= nil then\n        if rcall(\"ZSCORE\", completedKey, jobId) then\n            local returnvalue = rcall(\"HGET\", jobIdKey, \"returnvalue\")\n            updateParentDepsIfNeeded(parentKey, parent['queueKey'],\n                                     parentDependenciesKey, parent['id'],\n                                     jobIdKey, returnvalue, timestamp)\n        else\n            if parentDependenciesKey ~= nil then\n                rcall(\"SADD\", parentDependenciesKey, jobIdKey)\n            end\n        end\n        rcall(\"HMSET\", jobIdKey, \"parentKey\", parentKey, \"parent\", parentData)\n    end\nend\nlocal function handleDuplicatedJob(jobKey, jobId, currentParentKey, currentParent,\n  parentData, parentDependenciesKey, completedKey, eventsKey, maxEvents, timestamp)\n  local existedParentKey = rcall(\"HGET\", jobKey, \"parentKey\")\n  if not existedParentKey or existedParentKey == currentParentKey then\n    updateExistingJobsParent(currentParentKey, currentParent, parentData,\n      parentDependenciesKey, completedKey, jobKey,\n      jobId, timestamp)\n  else\n    if currentParentKey ~= nil and currentParentKey ~= existedParentKey\n      and (rcall(\"EXISTS\", existedParentKey) == 1) then\n      return -7\n    end\n  end\n  rcall(\"XADD\", eventsKey, \"MAXLEN\", \"~\", maxEvents, \"*\", \"event\",\n    \"duplicated\", \"jobId\", jobId)\n  return jobId .. \"\" -- convert to string\nend\n--[[\n  Function to store a job\n]]\nlocal function storeJob(eventsKey, jobIdKey, jobId, name, data, opts, timestamp,\n                        parentKey, parentData, repeatJobKey)\n    local jsonOpts = cjson.encode(opts)\n    local delay = opts['delay'] or 0\n    local priority = opts['priority'] or 0\n    local debounceId = opts['de'] and opts['de']['id']\n    local optionalValues = {}\n    if parentKey ~= nil then\n        table.insert(optionalValues, \"parentKey\")\n        table.insert(optionalValues, parentKey)\n        table.insert(optionalValues, \"parent\")\n        table.insert(optionalValues, parentData)\n    end\n    if repeatJobKey then\n        table.insert(optionalValues, \"rjk\")\n        table.insert(optionalValues, repeatJobKey)\n    end\n    if debounceId then\n        table.insert(optionalValues, \"deid\")\n        table.insert(optionalValues, debounceId)\n    end\n    rcall(\"HMSET\", jobIdKey, \"name\", name, \"data\", data, \"opts\", jsonOpts,\n          \"timestamp\", timestamp, \"delay\", delay, \"priority\", priority,\n          unpack(optionalValues))\n    rcall(\"XADD\", eventsKey, \"*\", \"event\", \"added\", \"jobId\", jobId, \"name\", name)\n    return delay, priority\nend\nif parentKey ~= nil then\n    if rcall(\"EXISTS\", parentKey) ~= 1 then return -5 end\n    parentData = cjson.encode(parent)\nend\nlocal jobCounter = rcall(\"INCR\", KEYS[4])\nlocal metaKey = KEYS[3]\nlocal maxEvents = getOrSetMaxEvents(metaKey)\nlocal parentDependenciesKey = args[6]\nlocal timestamp = args[4]\nif args[2] == \"\" then\n    jobId = jobCounter\n    jobIdKey = args[1] .. jobId\nelse\n    jobId = args[2]\n    jobIdKey = args[1] .. jobId\n    if rcall(\"EXISTS\", jobIdKey) == 1 then\n        return handleDuplicatedJob(jobIdKey, jobId, parentKey, parent,\n            parentData, parentDependenciesKey, KEYS[5], eventsKey,\n            maxEvents, timestamp)\n    end\nend\nlocal deduplicationJobId = deduplicateJob(opts['de'], jobId, KEYS[6],\n  deduplicationKey, eventsKey, maxEvents, args[1])\nif deduplicationJobId then\n  return deduplicationJobId\nend\n-- Store the job.\nstoreJob(eventsKey, jobIdKey, jobId, args[3], ARGV[2], opts, timestamp,\n         parentKey, parentData, repeatJobKey)\nlocal target, isPausedOrMaxed = getTargetQueueList(metaKey, KEYS[7], KEYS[1], KEYS[2])\n-- LIFO or FIFO\nlocal pushCmd = opts['lifo'] and 'RPUSH' or 'LPUSH'\naddJobInTargetList(target, KEYS[9], pushCmd, isPausedOrMaxed, jobId)\n-- Emit waiting event\nrcall(\"XADD\", eventsKey, \"MAXLEN\", \"~\", maxEvents, \"*\", \"event\", \"waiting\",\n      \"jobId\", jobId)\n-- Check if this job is a child of another job, if so add it to the parents dependencies\nif parentDependenciesKey ~= nil then\n    rcall(\"SADD\", parentDependenciesKey, jobIdKey)\nend\nreturn jobId .. \"\" -- convert to string\n`;\nexports.addStandardJob = {\n    name: \"addStandardJob\",\n    content,\n    keys: 9\n}; //# sourceMappingURL=addStandardJob-9.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL3NjcmlwdHMvYWRkU3RhbmRhcmRKb2ItOS5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsc0JBQXNCLEdBQUcsS0FBSztBQUM5QixNQUFNRyxVQUFVLENBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQTRiakIsQ0FBQztBQUNESCxzQkFBc0IsR0FBRztJQUNyQkksTUFBTTtJQUNORDtJQUNBRSxNQUFNO0FBQ1YsR0FDQSw0Q0FBNEMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vbmx5ZmFucy1wbGF0Zm9ybS8uL25vZGVfbW9kdWxlcy9idWxsbXEvZGlzdC9janMvc2NyaXB0cy9hZGRTdGFuZGFyZEpvYi05LmpzPzY0YWIiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLmFkZFN0YW5kYXJkSm9iID0gdm9pZCAwO1xuY29uc3QgY29udGVudCA9IGAtLVtbXG4gIEFkZHMgYSBqb2IgdG8gdGhlIHF1ZXVlIGJ5IGRvaW5nIHRoZSBmb2xsb3dpbmc6XG4gICAgLSBJbmNyZWFzZXMgdGhlIGpvYiBjb3VudGVyIGlmIG5lZWRlZC5cbiAgICAtIENyZWF0ZXMgYSBuZXcgam9iIGtleSB3aXRoIHRoZSBqb2IgZGF0YS5cbiAgICAtIGlmIGRlbGF5ZWQ6XG4gICAgICAtIGNvbXB1dGVzIHRpbWVzdGFtcC5cbiAgICAgIC0gYWRkcyB0byBkZWxheWVkIHpzZXQuXG4gICAgICAtIEVtaXRzIGEgZ2xvYmFsIGV2ZW50ICdkZWxheWVkJyBpZiB0aGUgam9iIGlzIGRlbGF5ZWQuXG4gICAgLSBpZiBub3QgZGVsYXllZFxuICAgICAgLSBBZGRzIHRoZSBqb2JJZCB0byB0aGUgd2FpdC9wYXVzZWQgbGlzdCBpbiBvbmUgb2YgdGhyZWUgd2F5czpcbiAgICAgICAgIC0gTElGT1xuICAgICAgICAgLSBGSUZPXG4gICAgICAgICAtIHByaW9yaXRpemVkLlxuICAgICAgLSBBZGRzIHRoZSBqb2IgdG8gdGhlIFwiYWRkZWRcIiBsaXN0IHNvIHRoYXQgd29ya2VycyBnZXRzIG5vdGlmaWVkLlxuICAgIElucHV0OlxuICAgICAgS0VZU1sxXSAnd2FpdCcsXG4gICAgICBLRVlTWzJdICdwYXVzZWQnXG4gICAgICBLRVlTWzNdICdtZXRhJ1xuICAgICAgS0VZU1s0XSAnaWQnXG4gICAgICBLRVlTWzVdICdjb21wbGV0ZWQnXG4gICAgICBLRVlTWzZdICdkZWxheWVkJ1xuICAgICAgS0VZU1s3XSAnYWN0aXZlJ1xuICAgICAgS0VZU1s4XSBldmVudHMgc3RyZWFtIGtleVxuICAgICAgS0VZU1s5XSBtYXJrZXIga2V5XG4gICAgICBBUkdWWzFdIG1zZ3BhY2tlZCBhcmd1bWVudHMgYXJyYXlcbiAgICAgICAgICAgIFsxXSAga2V5IHByZWZpeCxcbiAgICAgICAgICAgIFsyXSAgY3VzdG9tIGlkICh3aWxsIG5vdCBnZW5lcmF0ZSBvbmUgYXV0b21hdGljYWxseSlcbiAgICAgICAgICAgIFszXSAgbmFtZVxuICAgICAgICAgICAgWzRdICB0aW1lc3RhbXBcbiAgICAgICAgICAgIFs1XSAgcGFyZW50S2V5P1xuICAgICAgICAgICAgWzZdICBwYXJlbnQgZGVwZW5kZW5jaWVzIGtleS5cbiAgICAgICAgICAgIFs3XSAgcGFyZW50PyB7aWQsIHF1ZXVlS2V5fVxuICAgICAgICAgICAgWzhdICByZXBlYXQgam9iIGtleVxuICAgICAgICAgICAgWzldIGRlZHVwbGljYXRpb24ga2V5XG4gICAgICBBUkdWWzJdIEpzb24gc3RyaW5naWZpZWQgam9iIGRhdGFcbiAgICAgIEFSR1ZbM10gbXNncGFja2VkIG9wdGlvbnNcbiAgICAgIE91dHB1dDpcbiAgICAgICAgam9iSWQgIC0gT0tcbiAgICAgICAgLTUgICAgIC0gTWlzc2luZyBwYXJlbnQga2V5XG5dXVxubG9jYWwgZXZlbnRzS2V5ID0gS0VZU1s4XVxubG9jYWwgam9iSWRcbmxvY2FsIGpvYklkS2V5XG5sb2NhbCByY2FsbCA9IHJlZGlzLmNhbGxcbmxvY2FsIGFyZ3MgPSBjbXNncGFjay51bnBhY2soQVJHVlsxXSlcbmxvY2FsIGRhdGEgPSBBUkdWWzJdXG5sb2NhbCBvcHRzID0gY21zZ3BhY2sudW5wYWNrKEFSR1ZbM10pXG5sb2NhbCBwYXJlbnRLZXkgPSBhcmdzWzVdXG5sb2NhbCBwYXJlbnQgPSBhcmdzWzddXG5sb2NhbCByZXBlYXRKb2JLZXkgPSBhcmdzWzhdXG5sb2NhbCBkZWR1cGxpY2F0aW9uS2V5ID0gYXJnc1s5XVxubG9jYWwgcGFyZW50RGF0YVxuLS0gSW5jbHVkZXNcbi0tW1tcbiAgRnVuY3Rpb24gdG8gYWRkIGpvYiBpbiB0YXJnZXQgbGlzdCBhbmQgYWRkIG1hcmtlciBpZiBuZWVkZWQuXG5dXVxuLS0gSW5jbHVkZXNcbi0tW1tcbiAgQWRkIG1hcmtlciBpZiBuZWVkZWQgd2hlbiBhIGpvYiBpcyBhdmFpbGFibGUuXG5dXVxubG9jYWwgZnVuY3Rpb24gYWRkQmFzZU1hcmtlcklmTmVlZGVkKG1hcmtlcktleSwgaXNQYXVzZWRPck1heGVkKVxuICBpZiBub3QgaXNQYXVzZWRPck1heGVkIHRoZW5cbiAgICByY2FsbChcIlpBRERcIiwgbWFya2VyS2V5LCAwLCBcIjBcIilcbiAgZW5kICBcbmVuZFxubG9jYWwgZnVuY3Rpb24gYWRkSm9iSW5UYXJnZXRMaXN0KHRhcmdldEtleSwgbWFya2VyS2V5LCBwdXNoQ21kLCBpc1BhdXNlZE9yTWF4ZWQsIGpvYklkKVxuICByY2FsbChwdXNoQ21kLCB0YXJnZXRLZXksIGpvYklkKVxuICBhZGRCYXNlTWFya2VySWZOZWVkZWQobWFya2VyS2V5LCBpc1BhdXNlZE9yTWF4ZWQpXG5lbmRcbi0tW1tcbiAgRnVuY3Rpb24gdG8gZGVib3VuY2UgYSBqb2IuXG5dXVxuLS0gSW5jbHVkZXNcbi0tW1tcbiAgRnVuY3Rpb24gdG8gcmVtb3ZlIGpvYiBrZXlzLlxuXV1cbmxvY2FsIGZ1bmN0aW9uIHJlbW92ZUpvYktleXMoam9iS2V5KVxuICByZXR1cm4gcmNhbGwoXCJERUxcIiwgam9iS2V5LCBqb2JLZXkgLi4gJzpsb2dzJywgam9iS2V5IC4uICc6ZGVwZW5kZW5jaWVzJyxcbiAgICBqb2JLZXkgLi4gJzpwcm9jZXNzZWQnLCBqb2JLZXkgLi4gJzpmYWlsZWQnLCBqb2JLZXkgLi4gJzp1bnN1Y2Nlc3NmdWwnKVxuZW5kXG5sb2NhbCBmdW5jdGlvbiByZW1vdmVEZWxheWVkSm9iKGRlbGF5ZWRLZXksIGRlZHVwbGljYXRpb25LZXksIGV2ZW50c0tleSwgbWF4RXZlbnRzLCBjdXJyZW50RGVkdXBsaWNhdGVkSm9iSWQsXG4gICAgam9iSWQsIGRlZHVwbGljYXRpb25JZCwgcHJlZml4KVxuICAgIGlmIHJjYWxsKFwiWlJFTVwiLCBkZWxheWVkS2V5LCBjdXJyZW50RGVkdXBsaWNhdGVkSm9iSWQpID4gMCB0aGVuXG4gICAgICAgIHJlbW92ZUpvYktleXMocHJlZml4IC4uIGN1cnJlbnREZWR1cGxpY2F0ZWRKb2JJZClcbiAgICAgICAgcmNhbGwoXCJYQUREXCIsIGV2ZW50c0tleSwgXCIqXCIsIFwiZXZlbnRcIiwgXCJyZW1vdmVkXCIsIFwiam9iSWRcIiwgY3VycmVudERlZHVwbGljYXRlZEpvYklkLFxuICAgICAgICAgICAgXCJwcmV2XCIsIFwiZGVsYXllZFwiKVxuICAgICAgICAtLSBUT0RPIHJlbW92ZSBkZWJvdW5jZWQgZXZlbnQgaW4gbmV4dCBicmVha2luZyBjaGFuZ2VcbiAgICAgICAgcmNhbGwoXCJYQUREXCIsIGV2ZW50c0tleSwgXCJNQVhMRU5cIiwgXCJ+XCIsIG1heEV2ZW50cywgXCIqXCIsIFwiZXZlbnRcIiwgXCJkZWJvdW5jZWRcIiwgXCJqb2JJZFwiLFxuICAgICAgICAgICAgam9iSWQsIFwiZGVib3VuY2VJZFwiLCBkZWR1cGxpY2F0aW9uSWQpXG4gICAgICAgIHJjYWxsKFwiWEFERFwiLCBldmVudHNLZXksIFwiTUFYTEVOXCIsIFwiflwiLCBtYXhFdmVudHMsIFwiKlwiLCBcImV2ZW50XCIsIFwiZGVkdXBsaWNhdGVkXCIsIFwiam9iSWRcIixcbiAgICAgICAgICAgIGpvYklkLCBcImRlZHVwbGljYXRpb25JZFwiLCBkZWR1cGxpY2F0aW9uSWQsIFwiZGVkdXBsaWNhdGVkSm9iSWRcIiwgY3VycmVudERlZHVwbGljYXRlZEpvYklkKVxuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgIGVuZFxuICAgIHJldHVybiBmYWxzZVxuZW5kXG5sb2NhbCBmdW5jdGlvbiBkZWR1cGxpY2F0ZUpvYihkZWR1cGxpY2F0aW9uT3B0cywgam9iSWQsIGRlbGF5ZWRLZXksIGRlZHVwbGljYXRpb25LZXksIGV2ZW50c0tleSwgbWF4RXZlbnRzLFxuICAgIHByZWZpeClcbiAgICBsb2NhbCBkZWR1cGxpY2F0aW9uSWQgPSBkZWR1cGxpY2F0aW9uT3B0cyBhbmQgZGVkdXBsaWNhdGlvbk9wdHNbJ2lkJ11cbiAgICBpZiBkZWR1cGxpY2F0aW9uSWQgdGhlblxuICAgICAgICBsb2NhbCB0dGwgPSBkZWR1cGxpY2F0aW9uT3B0c1sndHRsJ11cbiAgICAgICAgaWYgZGVkdXBsaWNhdGlvbk9wdHNbJ3JlcGxhY2UnXSB0aGVuXG4gICAgICAgICAgICBpZiB0dGwgYW5kIHR0bCA+IDAgdGhlblxuICAgICAgICAgICAgICAgIGxvY2FsIGN1cnJlbnREZWJvdW5jZUpvYklkID0gcmNhbGwoJ0dFVCcsIGRlZHVwbGljYXRpb25LZXkpXG4gICAgICAgICAgICAgICAgaWYgY3VycmVudERlYm91bmNlSm9iSWQgdGhlblxuICAgICAgICAgICAgICAgICAgICBsb2NhbCBpc1JlbW92ZWQgPSByZW1vdmVEZWxheWVkSm9iKGRlbGF5ZWRLZXksIGRlZHVwbGljYXRpb25LZXksIGV2ZW50c0tleSwgbWF4RXZlbnRzLFxuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudERlYm91bmNlSm9iSWQsIGpvYklkLCBkZWR1cGxpY2F0aW9uSWQsIHByZWZpeClcbiAgICAgICAgICAgICAgICAgICAgaWYgaXNSZW1vdmVkIHRoZW5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGRlZHVwbGljYXRpb25PcHRzWydleHRlbmQnXSB0aGVuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmNhbGwoJ1NFVCcsIGRlZHVwbGljYXRpb25LZXksIGpvYklkLCAnUFgnLCB0dGwpXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmNhbGwoJ1NFVCcsIGRlZHVwbGljYXRpb25LZXksIGpvYklkLCAnS0VFUFRUTCcpXG4gICAgICAgICAgICAgICAgICAgICAgICBlbmRcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY3VycmVudERlYm91bmNlSm9iSWRcbiAgICAgICAgICAgICAgICAgICAgZW5kXG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICByY2FsbCgnU0VUJywgZGVkdXBsaWNhdGlvbktleSwgam9iSWQsICdQWCcsIHR0bClcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICAgICAgZW5kXG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgbG9jYWwgY3VycmVudERlYm91bmNlSm9iSWQgPSByY2FsbCgnR0VUJywgZGVkdXBsaWNhdGlvbktleSlcbiAgICAgICAgICAgICAgICBpZiBjdXJyZW50RGVib3VuY2VKb2JJZCB0aGVuXG4gICAgICAgICAgICAgICAgICAgIGxvY2FsIGlzUmVtb3ZlZCA9IHJlbW92ZURlbGF5ZWRKb2IoZGVsYXllZEtleSwgZGVkdXBsaWNhdGlvbktleSwgZXZlbnRzS2V5LCBtYXhFdmVudHMsXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50RGVib3VuY2VKb2JJZCwgam9iSWQsIGRlZHVwbGljYXRpb25JZCwgcHJlZml4KVxuICAgICAgICAgICAgICAgICAgICBpZiBpc1JlbW92ZWQgdGhlblxuICAgICAgICAgICAgICAgICAgICAgICAgcmNhbGwoJ1NFVCcsIGRlZHVwbGljYXRpb25LZXksIGpvYklkKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjdXJyZW50RGVib3VuY2VKb2JJZFxuICAgICAgICAgICAgICAgICAgICBlbmRcbiAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgIHJjYWxsKCdTRVQnLCBkZWR1cGxpY2F0aW9uS2V5LCBqb2JJZClcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICAgICAgZW5kXG4gICAgICAgICAgICBlbmRcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgbG9jYWwgZGVkdXBsaWNhdGlvbktleUV4aXN0c1xuICAgICAgICAgICAgaWYgdHRsIGFuZCB0dGwgPiAwIHRoZW5cbiAgICAgICAgICAgICAgICBpZiBkZWR1cGxpY2F0aW9uT3B0c1snZXh0ZW5kJ10gdGhlblxuICAgICAgICAgICAgICAgICAgICBsb2NhbCBjdXJyZW50RGVib3VuY2VKb2JJZCA9IHJjYWxsKCdHRVQnLCBkZWR1cGxpY2F0aW9uS2V5KVxuICAgICAgICAgICAgICAgICAgICBpZiBjdXJyZW50RGVib3VuY2VKb2JJZCB0aGVuXG4gICAgICAgICAgICAgICAgICAgICAgICByY2FsbCgnU0VUJywgZGVkdXBsaWNhdGlvbktleSwgY3VycmVudERlYm91bmNlSm9iSWQsICdQWCcsIHR0bClcbiAgICAgICAgICAgICAgICAgICAgICAgIHJjYWxsKFwiWEFERFwiLCBldmVudHNLZXksIFwiTUFYTEVOXCIsIFwiflwiLCBtYXhFdmVudHMsIFwiKlwiLCBcImV2ZW50XCIsIFwiZGVib3VuY2VkXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJqb2JJZFwiLCBjdXJyZW50RGVib3VuY2VKb2JJZCwgXCJkZWJvdW5jZUlkXCIsIGRlZHVwbGljYXRpb25JZClcbiAgICAgICAgICAgICAgICAgICAgICAgIHJjYWxsKFwiWEFERFwiLCBldmVudHNLZXksIFwiTUFYTEVOXCIsIFwiflwiLCBtYXhFdmVudHMsIFwiKlwiLCBcImV2ZW50XCIsIFwiZGVkdXBsaWNhdGVkXCIsIFwiam9iSWRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50RGVib3VuY2VKb2JJZCwgXCJkZWR1cGxpY2F0aW9uSWRcIiwgZGVkdXBsaWNhdGlvbklkLCBcImRlZHVwbGljYXRlZEpvYklkXCIsIGpvYklkKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnREZWJvdW5jZUpvYklkXG4gICAgICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgIHJjYWxsKCdTRVQnLCBkZWR1cGxpY2F0aW9uS2V5LCBqb2JJZCwgJ1BYJywgdHRsKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICAgICAgICAgIGVuZFxuICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgZGVkdXBsaWNhdGlvbktleUV4aXN0cyA9IG5vdCByY2FsbCgnU0VUJywgZGVkdXBsaWNhdGlvbktleSwgam9iSWQsICdQWCcsIHR0bCwgJ05YJylcbiAgICAgICAgICAgICAgICBlbmRcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBkZWR1cGxpY2F0aW9uS2V5RXhpc3RzID0gbm90IHJjYWxsKCdTRVQnLCBkZWR1cGxpY2F0aW9uS2V5LCBqb2JJZCwgJ05YJylcbiAgICAgICAgICAgIGVuZFxuICAgICAgICAgICAgaWYgZGVkdXBsaWNhdGlvbktleUV4aXN0cyB0aGVuXG4gICAgICAgICAgICAgICAgbG9jYWwgY3VycmVudERlYm91bmNlSm9iSWQgPSByY2FsbCgnR0VUJywgZGVkdXBsaWNhdGlvbktleSlcbiAgICAgICAgICAgICAgICAtLSBUT0RPIHJlbW92ZSBkZWJvdW5jZWQgZXZlbnQgaW4gbmV4dCBicmVha2luZyBjaGFuZ2VcbiAgICAgICAgICAgICAgICByY2FsbChcIlhBRERcIiwgZXZlbnRzS2V5LCBcIk1BWExFTlwiLCBcIn5cIiwgbWF4RXZlbnRzLCBcIipcIiwgXCJldmVudFwiLCBcImRlYm91bmNlZFwiLCBcImpvYklkXCIsXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnREZWJvdW5jZUpvYklkLCBcImRlYm91bmNlSWRcIiwgZGVkdXBsaWNhdGlvbklkKVxuICAgICAgICAgICAgICAgIHJjYWxsKFwiWEFERFwiLCBldmVudHNLZXksIFwiTUFYTEVOXCIsIFwiflwiLCBtYXhFdmVudHMsIFwiKlwiLCBcImV2ZW50XCIsIFwiZGVkdXBsaWNhdGVkXCIsIFwiam9iSWRcIixcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudERlYm91bmNlSm9iSWQsIFwiZGVkdXBsaWNhdGlvbklkXCIsIGRlZHVwbGljYXRpb25JZCwgXCJkZWR1cGxpY2F0ZWRKb2JJZFwiLCBqb2JJZClcbiAgICAgICAgICAgICAgICByZXR1cm4gY3VycmVudERlYm91bmNlSm9iSWRcbiAgICAgICAgICAgIGVuZFxuICAgICAgICBlbmRcbiAgICBlbmRcbmVuZFxuLS1bW1xuICBGdW5jdGlvbiB0byBnZXQgbWF4IGV2ZW50cyB2YWx1ZSBvciBzZXQgYnkgZGVmYXVsdCAxMDAwMC5cbl1dXG5sb2NhbCBmdW5jdGlvbiBnZXRPclNldE1heEV2ZW50cyhtZXRhS2V5KVxuICBsb2NhbCBtYXhFdmVudHMgPSByY2FsbChcIkhHRVRcIiwgbWV0YUtleSwgXCJvcHRzLm1heExlbkV2ZW50c1wiKVxuICBpZiBub3QgbWF4RXZlbnRzIHRoZW5cbiAgICBtYXhFdmVudHMgPSAxMDAwMFxuICAgIHJjYWxsKFwiSFNFVFwiLCBtZXRhS2V5LCBcIm9wdHMubWF4TGVuRXZlbnRzXCIsIG1heEV2ZW50cylcbiAgZW5kXG4gIHJldHVybiBtYXhFdmVudHNcbmVuZFxuLS1bW1xuICBGdW5jdGlvbiB0byBjaGVjayBmb3IgdGhlIG1ldGEucGF1c2VkIGtleSB0byBkZWNpZGUgaWYgd2UgYXJlIHBhdXNlZCBvciBub3RcbiAgKHNpbmNlIGFuIGVtcHR5IGxpc3QgYW5kICFFWElTVFMgYXJlIG5vdCByZWFsbHkgdGhlIHNhbWUpLlxuXV1cbmxvY2FsIGZ1bmN0aW9uIGdldFRhcmdldFF1ZXVlTGlzdChxdWV1ZU1ldGFLZXksIGFjdGl2ZUtleSwgd2FpdEtleSwgcGF1c2VkS2V5KVxuICBsb2NhbCBxdWV1ZUF0dHJpYnV0ZXMgPSByY2FsbChcIkhNR0VUXCIsIHF1ZXVlTWV0YUtleSwgXCJwYXVzZWRcIiwgXCJjb25jdXJyZW5jeVwiLCBcIm1heFwiLCBcImR1cmF0aW9uXCIpXG4gIGlmIHF1ZXVlQXR0cmlidXRlc1sxXSB0aGVuXG4gICAgcmV0dXJuIHBhdXNlZEtleSwgdHJ1ZSwgcXVldWVBdHRyaWJ1dGVzWzNdLCBxdWV1ZUF0dHJpYnV0ZXNbNF1cbiAgZWxzZVxuICAgIGlmIHF1ZXVlQXR0cmlidXRlc1syXSB0aGVuXG4gICAgICBsb2NhbCBhY3RpdmVDb3VudCA9IHJjYWxsKFwiTExFTlwiLCBhY3RpdmVLZXkpXG4gICAgICBpZiBhY3RpdmVDb3VudCA+PSB0b251bWJlcihxdWV1ZUF0dHJpYnV0ZXNbMl0pIHRoZW5cbiAgICAgICAgcmV0dXJuIHdhaXRLZXksIHRydWUsIHF1ZXVlQXR0cmlidXRlc1szXSwgcXVldWVBdHRyaWJ1dGVzWzRdXG4gICAgICBlbHNlXG4gICAgICAgIHJldHVybiB3YWl0S2V5LCBmYWxzZSwgcXVldWVBdHRyaWJ1dGVzWzNdLCBxdWV1ZUF0dHJpYnV0ZXNbNF1cbiAgICAgIGVuZFxuICAgIGVuZFxuICBlbmRcbiAgcmV0dXJuIHdhaXRLZXksIGZhbHNlLCBxdWV1ZUF0dHJpYnV0ZXNbM10sIHF1ZXVlQXR0cmlidXRlc1s0XVxuZW5kXG4tLVtbXG4gIEZ1bmN0aW9uIHRvIGhhbmRsZSB0aGUgY2FzZSB3aGVuIGpvYiBpcyBkdXBsaWNhdGVkLlxuXV1cbi0tIEluY2x1ZGVzXG4tLVtbXG4gICAgVGhpcyBmdW5jdGlvbiBpcyB1c2VkIHRvIHVwZGF0ZSB0aGUgcGFyZW50J3MgZGVwZW5kZW5jaWVzIGlmIHRoZSBqb2JcbiAgICBpcyBhbHJlYWR5IGNvbXBsZXRlZCBhbmQgYWJvdXQgdG8gYmUgaWdub3JlZC4gVGhlIHBhcmVudCBtdXN0IGdldCBpdHNcbiAgICBkZXBlbmRlbmNpZXMgdXBkYXRlZCB0byBhdm9pZCB0aGUgcGFyZW50IGpvYiBiZWluZyBzdHVjayBmb3JldmVyIGluIFxuICAgIHRoZSB3YWl0aW5nLWNoaWxkcmVuIHN0YXRlLlxuXV1cbi0tIEluY2x1ZGVzXG4tLVtbXG4gIFZhbGlkYXRlIGFuZCBtb3ZlIG9yIGFkZCBkZXBlbmRlbmNpZXMgdG8gcGFyZW50LlxuXV1cbi0tIEluY2x1ZGVzXG4tLVtbXG4gIFZhbGlkYXRlIGFuZCBtb3ZlIHBhcmVudCB0byBhIHdhaXQgc3RhdHVzICh3YWl0aW5nLCBkZWxheWVkIG9yIHByaW9yaXRpemVkKVxuICBpZiBubyBwZW5kaW5nIGRlcGVuZGVuY2llcy5cbl1dXG4tLSBJbmNsdWRlc1xuLS1bW1xuICBWYWxpZGF0ZSBhbmQgbW92ZSBwYXJlbnQgdG8gYSB3YWl0IHN0YXR1cyAod2FpdGluZywgZGVsYXllZCBvciBwcmlvcml0aXplZCkgaWYgbmVlZGVkLlxuXV1cbi0tIEluY2x1ZGVzXG4tLVtbXG4gIE1vdmUgcGFyZW50IHRvIGEgd2FpdCBzdGF0dXMgKHdhaXQsIHByaW9yaXRpemVkIG9yIGRlbGF5ZWQpXG5dXVxuLS0gSW5jbHVkZXNcbi0tW1tcbiAgQWRkIGRlbGF5IG1hcmtlciBpZiBuZWVkZWQuXG5dXVxuLS0gSW5jbHVkZXNcbi0tW1tcbiAgRnVuY3Rpb24gdG8gcmV0dXJuIHRoZSBuZXh0IGRlbGF5ZWQgam9iIHRpbWVzdGFtcC5cbl1dXG5sb2NhbCBmdW5jdGlvbiBnZXROZXh0RGVsYXllZFRpbWVzdGFtcChkZWxheWVkS2V5KVxuICBsb2NhbCByZXN1bHQgPSByY2FsbChcIlpSQU5HRVwiLCBkZWxheWVkS2V5LCAwLCAwLCBcIldJVEhTQ09SRVNcIilcbiAgaWYgI3Jlc3VsdCB0aGVuXG4gICAgbG9jYWwgbmV4dFRpbWVzdGFtcCA9IHRvbnVtYmVyKHJlc3VsdFsyXSlcbiAgICBpZiBuZXh0VGltZXN0YW1wIH49IG5pbCB0aGVuXG4gICAgICByZXR1cm4gbmV4dFRpbWVzdGFtcCAvIDB4MTAwMFxuICAgIGVuZFxuICBlbmRcbmVuZFxubG9jYWwgZnVuY3Rpb24gYWRkRGVsYXlNYXJrZXJJZk5lZWRlZChtYXJrZXJLZXksIGRlbGF5ZWRLZXkpXG4gIGxvY2FsIG5leHRUaW1lc3RhbXAgPSBnZXROZXh0RGVsYXllZFRpbWVzdGFtcChkZWxheWVkS2V5KVxuICBpZiBuZXh0VGltZXN0YW1wIH49IG5pbCB0aGVuXG4gICAgLS0gUmVwbGFjZSB0aGUgc2NvcmUgb2YgdGhlIG1hcmtlciB3aXRoIHRoZSBuZXdlc3Qga25vd25cbiAgICAtLSBuZXh0IHRpbWVzdGFtcC5cbiAgICByY2FsbChcIlpBRERcIiwgbWFya2VyS2V5LCBuZXh0VGltZXN0YW1wLCBcIjFcIilcbiAgZW5kXG5lbmRcbi0tW1tcbiAgRnVuY3Rpb24gdG8gYWRkIGpvYiBjb25zaWRlcmluZyBwcmlvcml0eS5cbl1dXG4tLSBJbmNsdWRlc1xuLS1bW1xuICBGdW5jdGlvbiB0byBnZXQgcHJpb3JpdHkgc2NvcmUuXG5dXVxubG9jYWwgZnVuY3Rpb24gZ2V0UHJpb3JpdHlTY29yZShwcmlvcml0eSwgcHJpb3JpdHlDb3VudGVyS2V5KVxuICBsb2NhbCBwcmlvQ291bnRlciA9IHJjYWxsKFwiSU5DUlwiLCBwcmlvcml0eUNvdW50ZXJLZXkpXG4gIHJldHVybiBwcmlvcml0eSAqIDB4MTAwMDAwMDAwICsgcHJpb0NvdW50ZXIgJSAweDEwMDAwMDAwMFxuZW5kXG5sb2NhbCBmdW5jdGlvbiBhZGRKb2JXaXRoUHJpb3JpdHkobWFya2VyS2V5LCBwcmlvcml0aXplZEtleSwgcHJpb3JpdHksIGpvYklkLCBwcmlvcml0eUNvdW50ZXJLZXksXG4gIGlzUGF1c2VkT3JNYXhlZClcbiAgbG9jYWwgc2NvcmUgPSBnZXRQcmlvcml0eVNjb3JlKHByaW9yaXR5LCBwcmlvcml0eUNvdW50ZXJLZXkpXG4gIHJjYWxsKFwiWkFERFwiLCBwcmlvcml0aXplZEtleSwgc2NvcmUsIGpvYklkKVxuICBhZGRCYXNlTWFya2VySWZOZWVkZWQobWFya2VyS2V5LCBpc1BhdXNlZE9yTWF4ZWQpXG5lbmRcbi0tW1tcbiAgRnVuY3Rpb24gdG8gY2hlY2sgaWYgcXVldWUgaXMgcGF1c2VkIG9yIG1heGVkXG4gIChzaW5jZSBhbiBlbXB0eSBsaXN0IGFuZCAhRVhJU1RTIGFyZSBub3QgcmVhbGx5IHRoZSBzYW1lKS5cbl1dXG5sb2NhbCBmdW5jdGlvbiBpc1F1ZXVlUGF1c2VkT3JNYXhlZChxdWV1ZU1ldGFLZXksIGFjdGl2ZUtleSlcbiAgbG9jYWwgcXVldWVBdHRyaWJ1dGVzID0gcmNhbGwoXCJITUdFVFwiLCBxdWV1ZU1ldGFLZXksIFwicGF1c2VkXCIsIFwiY29uY3VycmVuY3lcIilcbiAgaWYgcXVldWVBdHRyaWJ1dGVzWzFdIHRoZW5cbiAgICByZXR1cm4gdHJ1ZVxuICBlbHNlXG4gICAgaWYgcXVldWVBdHRyaWJ1dGVzWzJdIHRoZW5cbiAgICAgIGxvY2FsIGFjdGl2ZUNvdW50ID0gcmNhbGwoXCJMTEVOXCIsIGFjdGl2ZUtleSlcbiAgICAgIHJldHVybiBhY3RpdmVDb3VudCA+PSB0b251bWJlcihxdWV1ZUF0dHJpYnV0ZXNbMl0pXG4gICAgZW5kXG4gIGVuZFxuICByZXR1cm4gZmFsc2VcbmVuZFxubG9jYWwgZnVuY3Rpb24gbW92ZVBhcmVudFRvV2FpdChwYXJlbnRRdWV1ZUtleSwgcGFyZW50S2V5LCBwYXJlbnRJZCwgdGltZXN0YW1wKVxuICAgIGxvY2FsIHBhcmVudFdhaXRLZXkgPSBwYXJlbnRRdWV1ZUtleSAuLiBcIjp3YWl0XCJcbiAgICBsb2NhbCBwYXJlbnRQYXVzZWRLZXkgPSBwYXJlbnRRdWV1ZUtleSAuLiBcIjpwYXVzZWRcIlxuICAgIGxvY2FsIHBhcmVudEFjdGl2ZUtleSA9IHBhcmVudFF1ZXVlS2V5IC4uIFwiOmFjdGl2ZVwiXG4gICAgbG9jYWwgcGFyZW50TWV0YUtleSA9IHBhcmVudFF1ZXVlS2V5IC4uIFwiOm1ldGFcIlxuICAgIGxvY2FsIHBhcmVudE1hcmtlcktleSA9IHBhcmVudFF1ZXVlS2V5IC4uIFwiOm1hcmtlclwiXG4gICAgbG9jYWwgam9iQXR0cmlidXRlcyA9IHJjYWxsKFwiSE1HRVRcIiwgcGFyZW50S2V5LCBcInByaW9yaXR5XCIsIFwiZGVsYXlcIilcbiAgICBsb2NhbCBwcmlvcml0eSA9IHRvbnVtYmVyKGpvYkF0dHJpYnV0ZXNbMV0pIG9yIDBcbiAgICBsb2NhbCBkZWxheSA9IHRvbnVtYmVyKGpvYkF0dHJpYnV0ZXNbMl0pIG9yIDBcbiAgICBpZiBkZWxheSA+IDAgdGhlblxuICAgICAgICBsb2NhbCBkZWxheWVkVGltZXN0YW1wID0gdG9udW1iZXIodGltZXN0YW1wKSArIGRlbGF5XG4gICAgICAgIGxvY2FsIHNjb3JlID0gZGVsYXllZFRpbWVzdGFtcCAqIDB4MTAwMFxuICAgICAgICBsb2NhbCBwYXJlbnREZWxheWVkS2V5ID0gcGFyZW50UXVldWVLZXkgLi4gXCI6ZGVsYXllZFwiXG4gICAgICAgIHJjYWxsKFwiWkFERFwiLCBwYXJlbnREZWxheWVkS2V5LCBzY29yZSwgcGFyZW50SWQpXG4gICAgICAgIHJjYWxsKFwiWEFERFwiLCBwYXJlbnRRdWV1ZUtleSAuLiBcIjpldmVudHNcIiwgXCIqXCIsIFwiZXZlbnRcIiwgXCJkZWxheWVkXCIsIFwiam9iSWRcIiwgcGFyZW50SWQsIFwiZGVsYXlcIixcbiAgICAgICAgICAgIGRlbGF5ZWRUaW1lc3RhbXApXG4gICAgICAgIGFkZERlbGF5TWFya2VySWZOZWVkZWQocGFyZW50TWFya2VyS2V5LCBwYXJlbnREZWxheWVkS2V5KVxuICAgIGVsc2VcbiAgICAgICAgaWYgcHJpb3JpdHkgPT0gMCB0aGVuXG4gICAgICAgICAgICBsb2NhbCBwYXJlbnRUYXJnZXQsIGlzUGFyZW50UGF1c2VkT3JNYXhlZCA9IGdldFRhcmdldFF1ZXVlTGlzdChwYXJlbnRNZXRhS2V5LCBwYXJlbnRBY3RpdmVLZXksXG4gICAgICAgICAgICAgICAgcGFyZW50V2FpdEtleSwgcGFyZW50UGF1c2VkS2V5KVxuICAgICAgICAgICAgYWRkSm9iSW5UYXJnZXRMaXN0KHBhcmVudFRhcmdldCwgcGFyZW50TWFya2VyS2V5LCBcIlJQVVNIXCIsIGlzUGFyZW50UGF1c2VkT3JNYXhlZCwgcGFyZW50SWQpXG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIGxvY2FsIGlzUGF1c2VkT3JNYXhlZCA9IGlzUXVldWVQYXVzZWRPck1heGVkKHBhcmVudE1ldGFLZXksIHBhcmVudEFjdGl2ZUtleSlcbiAgICAgICAgICAgIGFkZEpvYldpdGhQcmlvcml0eShwYXJlbnRNYXJrZXJLZXksIHBhcmVudFF1ZXVlS2V5IC4uIFwiOnByaW9yaXRpemVkXCIsIHByaW9yaXR5LCBwYXJlbnRJZCxcbiAgICAgICAgICAgICAgICBwYXJlbnRRdWV1ZUtleSAuLiBcIjpwY1wiLCBpc1BhdXNlZE9yTWF4ZWQpXG4gICAgICAgIGVuZFxuICAgICAgICByY2FsbChcIlhBRERcIiwgcGFyZW50UXVldWVLZXkgLi4gXCI6ZXZlbnRzXCIsIFwiKlwiLCBcImV2ZW50XCIsIFwid2FpdGluZ1wiLCBcImpvYklkXCIsIHBhcmVudElkLCBcInByZXZcIixcbiAgICAgICAgICAgIFwid2FpdGluZy1jaGlsZHJlblwiKVxuICAgIGVuZFxuZW5kXG5sb2NhbCBmdW5jdGlvbiBtb3ZlUGFyZW50VG9XYWl0SWZOZWVkZWQocGFyZW50UXVldWVLZXksIHBhcmVudEtleSwgcGFyZW50SWQsIHRpbWVzdGFtcClcbiAgaWYgcmNhbGwoXCJFWElTVFNcIiwgcGFyZW50S2V5KSA9PSAxIHRoZW5cbiAgICBsb2NhbCBwYXJlbnRXYWl0aW5nQ2hpbGRyZW5LZXkgPSBwYXJlbnRRdWV1ZUtleSAuLiBcIjp3YWl0aW5nLWNoaWxkcmVuXCJcbiAgICBpZiByY2FsbChcIlpTQ09SRVwiLCBwYXJlbnRXYWl0aW5nQ2hpbGRyZW5LZXksIHBhcmVudElkKSB0aGVuICAgIFxuICAgICAgcmNhbGwoXCJaUkVNXCIsIHBhcmVudFdhaXRpbmdDaGlsZHJlbktleSwgcGFyZW50SWQpXG4gICAgICBtb3ZlUGFyZW50VG9XYWl0KHBhcmVudFF1ZXVlS2V5LCBwYXJlbnRLZXksIHBhcmVudElkLCB0aW1lc3RhbXApXG4gICAgZW5kXG4gIGVuZFxuZW5kXG5sb2NhbCBmdW5jdGlvbiBtb3ZlUGFyZW50VG9XYWl0SWZOb1BlbmRpbmdEZXBlbmRlbmNpZXMocGFyZW50UXVldWVLZXksIHBhcmVudERlcGVuZGVuY2llc0tleSwgcGFyZW50S2V5LFxuICBwYXJlbnRJZCwgdGltZXN0YW1wKVxuICBsb2NhbCBkb05vdEhhdmVQZW5kaW5nRGVwZW5kZW5jaWVzID0gcmNhbGwoXCJTQ0FSRFwiLCBwYXJlbnREZXBlbmRlbmNpZXNLZXkpID09IDBcbiAgaWYgZG9Ob3RIYXZlUGVuZGluZ0RlcGVuZGVuY2llcyB0aGVuXG4gICAgbW92ZVBhcmVudFRvV2FpdElmTmVlZGVkKHBhcmVudFF1ZXVlS2V5LCBwYXJlbnRLZXksIHBhcmVudElkLCB0aW1lc3RhbXApXG4gIGVuZFxuZW5kXG5sb2NhbCBmdW5jdGlvbiB1cGRhdGVQYXJlbnREZXBzSWZOZWVkZWQocGFyZW50S2V5LCBwYXJlbnRRdWV1ZUtleSwgcGFyZW50RGVwZW5kZW5jaWVzS2V5LFxuICBwYXJlbnRJZCwgam9iSWRLZXksIHJldHVybnZhbHVlLCB0aW1lc3RhbXAgKVxuICBsb2NhbCBwcm9jZXNzZWRTZXQgPSBwYXJlbnRLZXkgLi4gXCI6cHJvY2Vzc2VkXCJcbiAgcmNhbGwoXCJIU0VUXCIsIHByb2Nlc3NlZFNldCwgam9iSWRLZXksIHJldHVybnZhbHVlKVxuICBtb3ZlUGFyZW50VG9XYWl0SWZOb1BlbmRpbmdEZXBlbmRlbmNpZXMocGFyZW50UXVldWVLZXksIHBhcmVudERlcGVuZGVuY2llc0tleSwgcGFyZW50S2V5LCBwYXJlbnRJZCwgdGltZXN0YW1wKVxuZW5kXG5sb2NhbCBmdW5jdGlvbiB1cGRhdGVFeGlzdGluZ0pvYnNQYXJlbnQocGFyZW50S2V5LCBwYXJlbnQsIHBhcmVudERhdGEsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50RGVwZW5kZW5jaWVzS2V5LCBjb21wbGV0ZWRLZXksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgam9iSWRLZXksIGpvYklkLCB0aW1lc3RhbXApXG4gICAgaWYgcGFyZW50S2V5IH49IG5pbCB0aGVuXG4gICAgICAgIGlmIHJjYWxsKFwiWlNDT1JFXCIsIGNvbXBsZXRlZEtleSwgam9iSWQpIHRoZW5cbiAgICAgICAgICAgIGxvY2FsIHJldHVybnZhbHVlID0gcmNhbGwoXCJIR0VUXCIsIGpvYklkS2V5LCBcInJldHVybnZhbHVlXCIpXG4gICAgICAgICAgICB1cGRhdGVQYXJlbnREZXBzSWZOZWVkZWQocGFyZW50S2V5LCBwYXJlbnRbJ3F1ZXVlS2V5J10sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50RGVwZW5kZW5jaWVzS2V5LCBwYXJlbnRbJ2lkJ10sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgam9iSWRLZXksIHJldHVybnZhbHVlLCB0aW1lc3RhbXApXG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIGlmIHBhcmVudERlcGVuZGVuY2llc0tleSB+PSBuaWwgdGhlblxuICAgICAgICAgICAgICAgIHJjYWxsKFwiU0FERFwiLCBwYXJlbnREZXBlbmRlbmNpZXNLZXksIGpvYklkS2V5KVxuICAgICAgICAgICAgZW5kXG4gICAgICAgIGVuZFxuICAgICAgICByY2FsbChcIkhNU0VUXCIsIGpvYklkS2V5LCBcInBhcmVudEtleVwiLCBwYXJlbnRLZXksIFwicGFyZW50XCIsIHBhcmVudERhdGEpXG4gICAgZW5kXG5lbmRcbmxvY2FsIGZ1bmN0aW9uIGhhbmRsZUR1cGxpY2F0ZWRKb2Ioam9iS2V5LCBqb2JJZCwgY3VycmVudFBhcmVudEtleSwgY3VycmVudFBhcmVudCxcbiAgcGFyZW50RGF0YSwgcGFyZW50RGVwZW5kZW5jaWVzS2V5LCBjb21wbGV0ZWRLZXksIGV2ZW50c0tleSwgbWF4RXZlbnRzLCB0aW1lc3RhbXApXG4gIGxvY2FsIGV4aXN0ZWRQYXJlbnRLZXkgPSByY2FsbChcIkhHRVRcIiwgam9iS2V5LCBcInBhcmVudEtleVwiKVxuICBpZiBub3QgZXhpc3RlZFBhcmVudEtleSBvciBleGlzdGVkUGFyZW50S2V5ID09IGN1cnJlbnRQYXJlbnRLZXkgdGhlblxuICAgIHVwZGF0ZUV4aXN0aW5nSm9ic1BhcmVudChjdXJyZW50UGFyZW50S2V5LCBjdXJyZW50UGFyZW50LCBwYXJlbnREYXRhLFxuICAgICAgcGFyZW50RGVwZW5kZW5jaWVzS2V5LCBjb21wbGV0ZWRLZXksIGpvYktleSxcbiAgICAgIGpvYklkLCB0aW1lc3RhbXApXG4gIGVsc2VcbiAgICBpZiBjdXJyZW50UGFyZW50S2V5IH49IG5pbCBhbmQgY3VycmVudFBhcmVudEtleSB+PSBleGlzdGVkUGFyZW50S2V5XG4gICAgICBhbmQgKHJjYWxsKFwiRVhJU1RTXCIsIGV4aXN0ZWRQYXJlbnRLZXkpID09IDEpIHRoZW5cbiAgICAgIHJldHVybiAtN1xuICAgIGVuZFxuICBlbmRcbiAgcmNhbGwoXCJYQUREXCIsIGV2ZW50c0tleSwgXCJNQVhMRU5cIiwgXCJ+XCIsIG1heEV2ZW50cywgXCIqXCIsIFwiZXZlbnRcIixcbiAgICBcImR1cGxpY2F0ZWRcIiwgXCJqb2JJZFwiLCBqb2JJZClcbiAgcmV0dXJuIGpvYklkIC4uIFwiXCIgLS0gY29udmVydCB0byBzdHJpbmdcbmVuZFxuLS1bW1xuICBGdW5jdGlvbiB0byBzdG9yZSBhIGpvYlxuXV1cbmxvY2FsIGZ1bmN0aW9uIHN0b3JlSm9iKGV2ZW50c0tleSwgam9iSWRLZXksIGpvYklkLCBuYW1lLCBkYXRhLCBvcHRzLCB0aW1lc3RhbXAsXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnRLZXksIHBhcmVudERhdGEsIHJlcGVhdEpvYktleSlcbiAgICBsb2NhbCBqc29uT3B0cyA9IGNqc29uLmVuY29kZShvcHRzKVxuICAgIGxvY2FsIGRlbGF5ID0gb3B0c1snZGVsYXknXSBvciAwXG4gICAgbG9jYWwgcHJpb3JpdHkgPSBvcHRzWydwcmlvcml0eSddIG9yIDBcbiAgICBsb2NhbCBkZWJvdW5jZUlkID0gb3B0c1snZGUnXSBhbmQgb3B0c1snZGUnXVsnaWQnXVxuICAgIGxvY2FsIG9wdGlvbmFsVmFsdWVzID0ge31cbiAgICBpZiBwYXJlbnRLZXkgfj0gbmlsIHRoZW5cbiAgICAgICAgdGFibGUuaW5zZXJ0KG9wdGlvbmFsVmFsdWVzLCBcInBhcmVudEtleVwiKVxuICAgICAgICB0YWJsZS5pbnNlcnQob3B0aW9uYWxWYWx1ZXMsIHBhcmVudEtleSlcbiAgICAgICAgdGFibGUuaW5zZXJ0KG9wdGlvbmFsVmFsdWVzLCBcInBhcmVudFwiKVxuICAgICAgICB0YWJsZS5pbnNlcnQob3B0aW9uYWxWYWx1ZXMsIHBhcmVudERhdGEpXG4gICAgZW5kXG4gICAgaWYgcmVwZWF0Sm9iS2V5IHRoZW5cbiAgICAgICAgdGFibGUuaW5zZXJ0KG9wdGlvbmFsVmFsdWVzLCBcInJqa1wiKVxuICAgICAgICB0YWJsZS5pbnNlcnQob3B0aW9uYWxWYWx1ZXMsIHJlcGVhdEpvYktleSlcbiAgICBlbmRcbiAgICBpZiBkZWJvdW5jZUlkIHRoZW5cbiAgICAgICAgdGFibGUuaW5zZXJ0KG9wdGlvbmFsVmFsdWVzLCBcImRlaWRcIilcbiAgICAgICAgdGFibGUuaW5zZXJ0KG9wdGlvbmFsVmFsdWVzLCBkZWJvdW5jZUlkKVxuICAgIGVuZFxuICAgIHJjYWxsKFwiSE1TRVRcIiwgam9iSWRLZXksIFwibmFtZVwiLCBuYW1lLCBcImRhdGFcIiwgZGF0YSwgXCJvcHRzXCIsIGpzb25PcHRzLFxuICAgICAgICAgIFwidGltZXN0YW1wXCIsIHRpbWVzdGFtcCwgXCJkZWxheVwiLCBkZWxheSwgXCJwcmlvcml0eVwiLCBwcmlvcml0eSxcbiAgICAgICAgICB1bnBhY2sob3B0aW9uYWxWYWx1ZXMpKVxuICAgIHJjYWxsKFwiWEFERFwiLCBldmVudHNLZXksIFwiKlwiLCBcImV2ZW50XCIsIFwiYWRkZWRcIiwgXCJqb2JJZFwiLCBqb2JJZCwgXCJuYW1lXCIsIG5hbWUpXG4gICAgcmV0dXJuIGRlbGF5LCBwcmlvcml0eVxuZW5kXG5pZiBwYXJlbnRLZXkgfj0gbmlsIHRoZW5cbiAgICBpZiByY2FsbChcIkVYSVNUU1wiLCBwYXJlbnRLZXkpIH49IDEgdGhlbiByZXR1cm4gLTUgZW5kXG4gICAgcGFyZW50RGF0YSA9IGNqc29uLmVuY29kZShwYXJlbnQpXG5lbmRcbmxvY2FsIGpvYkNvdW50ZXIgPSByY2FsbChcIklOQ1JcIiwgS0VZU1s0XSlcbmxvY2FsIG1ldGFLZXkgPSBLRVlTWzNdXG5sb2NhbCBtYXhFdmVudHMgPSBnZXRPclNldE1heEV2ZW50cyhtZXRhS2V5KVxubG9jYWwgcGFyZW50RGVwZW5kZW5jaWVzS2V5ID0gYXJnc1s2XVxubG9jYWwgdGltZXN0YW1wID0gYXJnc1s0XVxuaWYgYXJnc1syXSA9PSBcIlwiIHRoZW5cbiAgICBqb2JJZCA9IGpvYkNvdW50ZXJcbiAgICBqb2JJZEtleSA9IGFyZ3NbMV0gLi4gam9iSWRcbmVsc2VcbiAgICBqb2JJZCA9IGFyZ3NbMl1cbiAgICBqb2JJZEtleSA9IGFyZ3NbMV0gLi4gam9iSWRcbiAgICBpZiByY2FsbChcIkVYSVNUU1wiLCBqb2JJZEtleSkgPT0gMSB0aGVuXG4gICAgICAgIHJldHVybiBoYW5kbGVEdXBsaWNhdGVkSm9iKGpvYklkS2V5LCBqb2JJZCwgcGFyZW50S2V5LCBwYXJlbnQsXG4gICAgICAgICAgICBwYXJlbnREYXRhLCBwYXJlbnREZXBlbmRlbmNpZXNLZXksIEtFWVNbNV0sIGV2ZW50c0tleSxcbiAgICAgICAgICAgIG1heEV2ZW50cywgdGltZXN0YW1wKVxuICAgIGVuZFxuZW5kXG5sb2NhbCBkZWR1cGxpY2F0aW9uSm9iSWQgPSBkZWR1cGxpY2F0ZUpvYihvcHRzWydkZSddLCBqb2JJZCwgS0VZU1s2XSxcbiAgZGVkdXBsaWNhdGlvbktleSwgZXZlbnRzS2V5LCBtYXhFdmVudHMsIGFyZ3NbMV0pXG5pZiBkZWR1cGxpY2F0aW9uSm9iSWQgdGhlblxuICByZXR1cm4gZGVkdXBsaWNhdGlvbkpvYklkXG5lbmRcbi0tIFN0b3JlIHRoZSBqb2IuXG5zdG9yZUpvYihldmVudHNLZXksIGpvYklkS2V5LCBqb2JJZCwgYXJnc1szXSwgQVJHVlsyXSwgb3B0cywgdGltZXN0YW1wLFxuICAgICAgICAgcGFyZW50S2V5LCBwYXJlbnREYXRhLCByZXBlYXRKb2JLZXkpXG5sb2NhbCB0YXJnZXQsIGlzUGF1c2VkT3JNYXhlZCA9IGdldFRhcmdldFF1ZXVlTGlzdChtZXRhS2V5LCBLRVlTWzddLCBLRVlTWzFdLCBLRVlTWzJdKVxuLS0gTElGTyBvciBGSUZPXG5sb2NhbCBwdXNoQ21kID0gb3B0c1snbGlmbyddIGFuZCAnUlBVU0gnIG9yICdMUFVTSCdcbmFkZEpvYkluVGFyZ2V0TGlzdCh0YXJnZXQsIEtFWVNbOV0sIHB1c2hDbWQsIGlzUGF1c2VkT3JNYXhlZCwgam9iSWQpXG4tLSBFbWl0IHdhaXRpbmcgZXZlbnRcbnJjYWxsKFwiWEFERFwiLCBldmVudHNLZXksIFwiTUFYTEVOXCIsIFwiflwiLCBtYXhFdmVudHMsIFwiKlwiLCBcImV2ZW50XCIsIFwid2FpdGluZ1wiLFxuICAgICAgXCJqb2JJZFwiLCBqb2JJZClcbi0tIENoZWNrIGlmIHRoaXMgam9iIGlzIGEgY2hpbGQgb2YgYW5vdGhlciBqb2IsIGlmIHNvIGFkZCBpdCB0byB0aGUgcGFyZW50cyBkZXBlbmRlbmNpZXNcbmlmIHBhcmVudERlcGVuZGVuY2llc0tleSB+PSBuaWwgdGhlblxuICAgIHJjYWxsKFwiU0FERFwiLCBwYXJlbnREZXBlbmRlbmNpZXNLZXksIGpvYklkS2V5KVxuZW5kXG5yZXR1cm4gam9iSWQgLi4gXCJcIiAtLSBjb252ZXJ0IHRvIHN0cmluZ1xuYDtcbmV4cG9ydHMuYWRkU3RhbmRhcmRKb2IgPSB7XG4gICAgbmFtZTogJ2FkZFN0YW5kYXJkSm9iJyxcbiAgICBjb250ZW50LFxuICAgIGtleXM6IDksXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YWRkU3RhbmRhcmRKb2ItOS5qcy5tYXAiXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJhZGRTdGFuZGFyZEpvYiIsImNvbnRlbnQiLCJuYW1lIiwia2V5cyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/scripts/addStandardJob-9.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/scripts/changeDelay-4.js":
/*!***************************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/scripts/changeDelay-4.js ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.changeDelay = void 0;\nconst content = `--[[\n  Change job delay when it is in delayed set.\n  Input:\n    KEYS[1] delayed key\n    KEYS[2] meta key\n    KEYS[3] marker key\n    KEYS[4] events stream\n    ARGV[1] delay\n    ARGV[2] timestamp\n    ARGV[3] the id of the job\n    ARGV[4] job key\n  Output:\n    0 - OK\n   -1 - Missing job.\n   -3 - Job not in delayed set.\n  Events:\n    - delayed key.\n]]\nlocal rcall = redis.call\n-- Includes\n--[[\n  Add delay marker if needed.\n]]\n-- Includes\n--[[\n  Function to return the next delayed job timestamp.\n]]\nlocal function getNextDelayedTimestamp(delayedKey)\n  local result = rcall(\"ZRANGE\", delayedKey, 0, 0, \"WITHSCORES\")\n  if #result then\n    local nextTimestamp = tonumber(result[2])\n    if nextTimestamp ~= nil then\n      return nextTimestamp / 0x1000\n    end\n  end\nend\nlocal function addDelayMarkerIfNeeded(markerKey, delayedKey)\n  local nextTimestamp = getNextDelayedTimestamp(delayedKey)\n  if nextTimestamp ~= nil then\n    -- Replace the score of the marker with the newest known\n    -- next timestamp.\n    rcall(\"ZADD\", markerKey, nextTimestamp, \"1\")\n  end\nend\n--[[\n  Bake in the job id first 12 bits into the timestamp\n  to guarantee correct execution order of delayed jobs\n  (up to 4096 jobs per given timestamp or 4096 jobs apart per timestamp)\n  WARNING: Jobs that are so far apart that they wrap around will cause FIFO to fail\n]]\nlocal function getDelayedScore(delayedKey, timestamp, delay)\n  local delayedTimestamp = (delay > 0 and (tonumber(timestamp) + delay)) or tonumber(timestamp)\n  local minScore = delayedTimestamp * 0x1000\n  local maxScore = (delayedTimestamp + 1 ) * 0x1000 - 1\n  local result = rcall(\"ZREVRANGEBYSCORE\", delayedKey, maxScore,\n    minScore, \"WITHSCORES\",\"LIMIT\", 0, 1)\n  if #result then\n    local currentMaxScore = tonumber(result[2])\n    if currentMaxScore ~= nil then\n      if currentMaxScore >= maxScore then\n        return maxScore, delayedTimestamp\n      else\n        return currentMaxScore + 1, delayedTimestamp\n      end\n    end\n  end\n  return minScore, delayedTimestamp\nend\n--[[\n  Function to get max events value or set by default 10000.\n]]\nlocal function getOrSetMaxEvents(metaKey)\n  local maxEvents = rcall(\"HGET\", metaKey, \"opts.maxLenEvents\")\n  if not maxEvents then\n    maxEvents = 10000\n    rcall(\"HSET\", metaKey, \"opts.maxLenEvents\", maxEvents)\n  end\n  return maxEvents\nend\nif rcall(\"EXISTS\", ARGV[4]) == 1 then\n  local jobId = ARGV[3]\n  local delay = tonumber(ARGV[1])\n  local score, delayedTimestamp = getDelayedScore(KEYS[1], ARGV[2], delay)\n  local numRemovedElements = rcall(\"ZREM\", KEYS[1], jobId)\n  if numRemovedElements < 1 then\n    return -3\n  end\n  rcall(\"HSET\", ARGV[4], \"delay\", delay)\n  rcall(\"ZADD\", KEYS[1], score, jobId)\n  local maxEvents = getOrSetMaxEvents(KEYS[2])\n  rcall(\"XADD\", KEYS[4], \"MAXLEN\", \"~\", maxEvents, \"*\", \"event\", \"delayed\",\n    \"jobId\", jobId, \"delay\", delayedTimestamp)\n  -- mark that a delayed job is available\n  addDelayMarkerIfNeeded(KEYS[3], KEYS[1])\n  return 0\nelse\n  return -1\nend`;\nexports.changeDelay = {\n    name: \"changeDelay\",\n    content,\n    keys: 4\n}; //# sourceMappingURL=changeDelay-4.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL3NjcmlwdHMvY2hhbmdlRGVsYXktNC5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsbUJBQW1CLEdBQUcsS0FBSztBQUMzQixNQUFNRyxVQUFVLENBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7R0FpR2QsQ0FBQztBQUNKSCxtQkFBbUIsR0FBRztJQUNsQkksTUFBTTtJQUNORDtJQUNBRSxNQUFNO0FBQ1YsR0FDQSx5Q0FBeUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vbmx5ZmFucy1wbGF0Zm9ybS8uL25vZGVfbW9kdWxlcy9idWxsbXEvZGlzdC9janMvc2NyaXB0cy9jaGFuZ2VEZWxheS00LmpzPzJlZDgiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLmNoYW5nZURlbGF5ID0gdm9pZCAwO1xuY29uc3QgY29udGVudCA9IGAtLVtbXG4gIENoYW5nZSBqb2IgZGVsYXkgd2hlbiBpdCBpcyBpbiBkZWxheWVkIHNldC5cbiAgSW5wdXQ6XG4gICAgS0VZU1sxXSBkZWxheWVkIGtleVxuICAgIEtFWVNbMl0gbWV0YSBrZXlcbiAgICBLRVlTWzNdIG1hcmtlciBrZXlcbiAgICBLRVlTWzRdIGV2ZW50cyBzdHJlYW1cbiAgICBBUkdWWzFdIGRlbGF5XG4gICAgQVJHVlsyXSB0aW1lc3RhbXBcbiAgICBBUkdWWzNdIHRoZSBpZCBvZiB0aGUgam9iXG4gICAgQVJHVls0XSBqb2Iga2V5XG4gIE91dHB1dDpcbiAgICAwIC0gT0tcbiAgIC0xIC0gTWlzc2luZyBqb2IuXG4gICAtMyAtIEpvYiBub3QgaW4gZGVsYXllZCBzZXQuXG4gIEV2ZW50czpcbiAgICAtIGRlbGF5ZWQga2V5LlxuXV1cbmxvY2FsIHJjYWxsID0gcmVkaXMuY2FsbFxuLS0gSW5jbHVkZXNcbi0tW1tcbiAgQWRkIGRlbGF5IG1hcmtlciBpZiBuZWVkZWQuXG5dXVxuLS0gSW5jbHVkZXNcbi0tW1tcbiAgRnVuY3Rpb24gdG8gcmV0dXJuIHRoZSBuZXh0IGRlbGF5ZWQgam9iIHRpbWVzdGFtcC5cbl1dXG5sb2NhbCBmdW5jdGlvbiBnZXROZXh0RGVsYXllZFRpbWVzdGFtcChkZWxheWVkS2V5KVxuICBsb2NhbCByZXN1bHQgPSByY2FsbChcIlpSQU5HRVwiLCBkZWxheWVkS2V5LCAwLCAwLCBcIldJVEhTQ09SRVNcIilcbiAgaWYgI3Jlc3VsdCB0aGVuXG4gICAgbG9jYWwgbmV4dFRpbWVzdGFtcCA9IHRvbnVtYmVyKHJlc3VsdFsyXSlcbiAgICBpZiBuZXh0VGltZXN0YW1wIH49IG5pbCB0aGVuXG4gICAgICByZXR1cm4gbmV4dFRpbWVzdGFtcCAvIDB4MTAwMFxuICAgIGVuZFxuICBlbmRcbmVuZFxubG9jYWwgZnVuY3Rpb24gYWRkRGVsYXlNYXJrZXJJZk5lZWRlZChtYXJrZXJLZXksIGRlbGF5ZWRLZXkpXG4gIGxvY2FsIG5leHRUaW1lc3RhbXAgPSBnZXROZXh0RGVsYXllZFRpbWVzdGFtcChkZWxheWVkS2V5KVxuICBpZiBuZXh0VGltZXN0YW1wIH49IG5pbCB0aGVuXG4gICAgLS0gUmVwbGFjZSB0aGUgc2NvcmUgb2YgdGhlIG1hcmtlciB3aXRoIHRoZSBuZXdlc3Qga25vd25cbiAgICAtLSBuZXh0IHRpbWVzdGFtcC5cbiAgICByY2FsbChcIlpBRERcIiwgbWFya2VyS2V5LCBuZXh0VGltZXN0YW1wLCBcIjFcIilcbiAgZW5kXG5lbmRcbi0tW1tcbiAgQmFrZSBpbiB0aGUgam9iIGlkIGZpcnN0IDEyIGJpdHMgaW50byB0aGUgdGltZXN0YW1wXG4gIHRvIGd1YXJhbnRlZSBjb3JyZWN0IGV4ZWN1dGlvbiBvcmRlciBvZiBkZWxheWVkIGpvYnNcbiAgKHVwIHRvIDQwOTYgam9icyBwZXIgZ2l2ZW4gdGltZXN0YW1wIG9yIDQwOTYgam9icyBhcGFydCBwZXIgdGltZXN0YW1wKVxuICBXQVJOSU5HOiBKb2JzIHRoYXQgYXJlIHNvIGZhciBhcGFydCB0aGF0IHRoZXkgd3JhcCBhcm91bmQgd2lsbCBjYXVzZSBGSUZPIHRvIGZhaWxcbl1dXG5sb2NhbCBmdW5jdGlvbiBnZXREZWxheWVkU2NvcmUoZGVsYXllZEtleSwgdGltZXN0YW1wLCBkZWxheSlcbiAgbG9jYWwgZGVsYXllZFRpbWVzdGFtcCA9IChkZWxheSA+IDAgYW5kICh0b251bWJlcih0aW1lc3RhbXApICsgZGVsYXkpKSBvciB0b251bWJlcih0aW1lc3RhbXApXG4gIGxvY2FsIG1pblNjb3JlID0gZGVsYXllZFRpbWVzdGFtcCAqIDB4MTAwMFxuICBsb2NhbCBtYXhTY29yZSA9IChkZWxheWVkVGltZXN0YW1wICsgMSApICogMHgxMDAwIC0gMVxuICBsb2NhbCByZXN1bHQgPSByY2FsbChcIlpSRVZSQU5HRUJZU0NPUkVcIiwgZGVsYXllZEtleSwgbWF4U2NvcmUsXG4gICAgbWluU2NvcmUsIFwiV0lUSFNDT1JFU1wiLFwiTElNSVRcIiwgMCwgMSlcbiAgaWYgI3Jlc3VsdCB0aGVuXG4gICAgbG9jYWwgY3VycmVudE1heFNjb3JlID0gdG9udW1iZXIocmVzdWx0WzJdKVxuICAgIGlmIGN1cnJlbnRNYXhTY29yZSB+PSBuaWwgdGhlblxuICAgICAgaWYgY3VycmVudE1heFNjb3JlID49IG1heFNjb3JlIHRoZW5cbiAgICAgICAgcmV0dXJuIG1heFNjb3JlLCBkZWxheWVkVGltZXN0YW1wXG4gICAgICBlbHNlXG4gICAgICAgIHJldHVybiBjdXJyZW50TWF4U2NvcmUgKyAxLCBkZWxheWVkVGltZXN0YW1wXG4gICAgICBlbmRcbiAgICBlbmRcbiAgZW5kXG4gIHJldHVybiBtaW5TY29yZSwgZGVsYXllZFRpbWVzdGFtcFxuZW5kXG4tLVtbXG4gIEZ1bmN0aW9uIHRvIGdldCBtYXggZXZlbnRzIHZhbHVlIG9yIHNldCBieSBkZWZhdWx0IDEwMDAwLlxuXV1cbmxvY2FsIGZ1bmN0aW9uIGdldE9yU2V0TWF4RXZlbnRzKG1ldGFLZXkpXG4gIGxvY2FsIG1heEV2ZW50cyA9IHJjYWxsKFwiSEdFVFwiLCBtZXRhS2V5LCBcIm9wdHMubWF4TGVuRXZlbnRzXCIpXG4gIGlmIG5vdCBtYXhFdmVudHMgdGhlblxuICAgIG1heEV2ZW50cyA9IDEwMDAwXG4gICAgcmNhbGwoXCJIU0VUXCIsIG1ldGFLZXksIFwib3B0cy5tYXhMZW5FdmVudHNcIiwgbWF4RXZlbnRzKVxuICBlbmRcbiAgcmV0dXJuIG1heEV2ZW50c1xuZW5kXG5pZiByY2FsbChcIkVYSVNUU1wiLCBBUkdWWzRdKSA9PSAxIHRoZW5cbiAgbG9jYWwgam9iSWQgPSBBUkdWWzNdXG4gIGxvY2FsIGRlbGF5ID0gdG9udW1iZXIoQVJHVlsxXSlcbiAgbG9jYWwgc2NvcmUsIGRlbGF5ZWRUaW1lc3RhbXAgPSBnZXREZWxheWVkU2NvcmUoS0VZU1sxXSwgQVJHVlsyXSwgZGVsYXkpXG4gIGxvY2FsIG51bVJlbW92ZWRFbGVtZW50cyA9IHJjYWxsKFwiWlJFTVwiLCBLRVlTWzFdLCBqb2JJZClcbiAgaWYgbnVtUmVtb3ZlZEVsZW1lbnRzIDwgMSB0aGVuXG4gICAgcmV0dXJuIC0zXG4gIGVuZFxuICByY2FsbChcIkhTRVRcIiwgQVJHVls0XSwgXCJkZWxheVwiLCBkZWxheSlcbiAgcmNhbGwoXCJaQUREXCIsIEtFWVNbMV0sIHNjb3JlLCBqb2JJZClcbiAgbG9jYWwgbWF4RXZlbnRzID0gZ2V0T3JTZXRNYXhFdmVudHMoS0VZU1syXSlcbiAgcmNhbGwoXCJYQUREXCIsIEtFWVNbNF0sIFwiTUFYTEVOXCIsIFwiflwiLCBtYXhFdmVudHMsIFwiKlwiLCBcImV2ZW50XCIsIFwiZGVsYXllZFwiLFxuICAgIFwiam9iSWRcIiwgam9iSWQsIFwiZGVsYXlcIiwgZGVsYXllZFRpbWVzdGFtcClcbiAgLS0gbWFyayB0aGF0IGEgZGVsYXllZCBqb2IgaXMgYXZhaWxhYmxlXG4gIGFkZERlbGF5TWFya2VySWZOZWVkZWQoS0VZU1szXSwgS0VZU1sxXSlcbiAgcmV0dXJuIDBcbmVsc2VcbiAgcmV0dXJuIC0xXG5lbmRgO1xuZXhwb3J0cy5jaGFuZ2VEZWxheSA9IHtcbiAgICBuYW1lOiAnY2hhbmdlRGVsYXknLFxuICAgIGNvbnRlbnQsXG4gICAga2V5czogNCxcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jaGFuZ2VEZWxheS00LmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsImNoYW5nZURlbGF5IiwiY29udGVudCIsIm5hbWUiLCJrZXlzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/scripts/changeDelay-4.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/scripts/changePriority-7.js":
/*!******************************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/scripts/changePriority-7.js ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.changePriority = void 0;\nconst content = `--[[\n  Change job priority\n  Input:\n    KEYS[1] 'wait',\n    KEYS[2] 'paused'\n    KEYS[3] 'meta'\n    KEYS[4] 'prioritized'\n    KEYS[5] 'active'\n    KEYS[6] 'pc' priority counter\n    KEYS[7] 'marker'\n    ARGV[1] priority value\n    ARGV[2] prefix key\n    ARGV[3] job id\n    ARGV[4] lifo\n    Output:\n       0  - OK\n      -1  - Missing job\n]]\nlocal jobId = ARGV[3]\nlocal jobKey = ARGV[2] .. jobId\nlocal priority = tonumber(ARGV[1])\nlocal rcall = redis.call\n-- Includes\n--[[\n  Function to add job in target list and add marker if needed.\n]]\n-- Includes\n--[[\n  Add marker if needed when a job is available.\n]]\nlocal function addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)\n  if not isPausedOrMaxed then\n    rcall(\"ZADD\", markerKey, 0, \"0\")\n  end  \nend\nlocal function addJobInTargetList(targetKey, markerKey, pushCmd, isPausedOrMaxed, jobId)\n  rcall(pushCmd, targetKey, jobId)\n  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)\nend\n--[[\n  Function to add job considering priority.\n]]\n-- Includes\n--[[\n  Function to get priority score.\n]]\nlocal function getPriorityScore(priority, priorityCounterKey)\n  local prioCounter = rcall(\"INCR\", priorityCounterKey)\n  return priority * 0x100000000 + prioCounter % 0x100000000\nend\nlocal function addJobWithPriority(markerKey, prioritizedKey, priority, jobId, priorityCounterKey,\n  isPausedOrMaxed)\n  local score = getPriorityScore(priority, priorityCounterKey)\n  rcall(\"ZADD\", prioritizedKey, score, jobId)\n  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)\nend\n--[[\n  Function to check for the meta.paused key to decide if we are paused or not\n  (since an empty list and !EXISTS are not really the same).\n]]\nlocal function getTargetQueueList(queueMetaKey, activeKey, waitKey, pausedKey)\n  local queueAttributes = rcall(\"HMGET\", queueMetaKey, \"paused\", \"concurrency\", \"max\", \"duration\")\n  if queueAttributes[1] then\n    return pausedKey, true, queueAttributes[3], queueAttributes[4]\n  else\n    if queueAttributes[2] then\n      local activeCount = rcall(\"LLEN\", activeKey)\n      if activeCount >= tonumber(queueAttributes[2]) then\n        return waitKey, true, queueAttributes[3], queueAttributes[4]\n      else\n        return waitKey, false, queueAttributes[3], queueAttributes[4]\n      end\n    end\n  end\n  return waitKey, false, queueAttributes[3], queueAttributes[4]\nend\n--[[\n  Function to push back job considering priority in front of same prioritized jobs.\n]]\nlocal function pushBackJobWithPriority(prioritizedKey, priority, jobId)\n  -- in order to put it at front of same prioritized jobs\n  -- we consider prioritized counter as 0\n  local score = priority * 0x100000000\n  rcall(\"ZADD\", prioritizedKey, score, jobId)\nend\nlocal function reAddJobWithNewPriority( prioritizedKey, markerKey, targetKey,\n    priorityCounter, lifo, priority, jobId, isPausedOrMaxed)\n    if priority == 0 then\n        local pushCmd = lifo and 'RPUSH' or 'LPUSH'\n        addJobInTargetList(targetKey, markerKey, pushCmd, isPausedOrMaxed, jobId)\n    else\n        if lifo then\n            pushBackJobWithPriority(prioritizedKey, priority, jobId)\n        else\n            addJobWithPriority(markerKey, prioritizedKey, priority, jobId,\n                priorityCounter, isPausedOrMaxed)\n        end\n    end\nend\nif rcall(\"EXISTS\", jobKey) == 1 then\n    local metaKey = KEYS[3]\n    local target, isPausedOrMaxed = getTargetQueueList(metaKey, KEYS[5], KEYS[1], KEYS[2])\n    local prioritizedKey = KEYS[4]\n    local priorityCounterKey = KEYS[6]\n    local markerKey = KEYS[7]\n    -- Re-add with the new priority\n    if rcall(\"ZREM\", prioritizedKey, jobId) > 0 then\n        reAddJobWithNewPriority( prioritizedKey, markerKey, target,\n            priorityCounterKey, ARGV[4] == '1', priority, jobId, isPausedOrMaxed)\n    elseif rcall(\"LREM\", target, -1, jobId) > 0 then\n        reAddJobWithNewPriority( prioritizedKey, markerKey, target,\n            priorityCounterKey, ARGV[4] == '1', priority, jobId, isPausedOrMaxed)\n    end\n    rcall(\"HSET\", jobKey, \"priority\", priority)\n    return 0\nelse\n    return -1\nend\n`;\nexports.changePriority = {\n    name: \"changePriority\",\n    content,\n    keys: 7\n}; //# sourceMappingURL=changePriority-7.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL3NjcmlwdHMvY2hhbmdlUHJpb3JpdHktNy5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsc0JBQXNCLEdBQUcsS0FBSztBQUM5QixNQUFNRyxVQUFVLENBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFzSGpCLENBQUM7QUFDREgsc0JBQXNCLEdBQUc7SUFDckJJLE1BQU07SUFDTkQ7SUFDQUUsTUFBTTtBQUNWLEdBQ0EsNENBQTRDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb25seWZhbnMtcGxhdGZvcm0vLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL3NjcmlwdHMvY2hhbmdlUHJpb3JpdHktNy5qcz9kZWY0Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5jaGFuZ2VQcmlvcml0eSA9IHZvaWQgMDtcbmNvbnN0IGNvbnRlbnQgPSBgLS1bW1xuICBDaGFuZ2Ugam9iIHByaW9yaXR5XG4gIElucHV0OlxuICAgIEtFWVNbMV0gJ3dhaXQnLFxuICAgIEtFWVNbMl0gJ3BhdXNlZCdcbiAgICBLRVlTWzNdICdtZXRhJ1xuICAgIEtFWVNbNF0gJ3ByaW9yaXRpemVkJ1xuICAgIEtFWVNbNV0gJ2FjdGl2ZSdcbiAgICBLRVlTWzZdICdwYycgcHJpb3JpdHkgY291bnRlclxuICAgIEtFWVNbN10gJ21hcmtlcidcbiAgICBBUkdWWzFdIHByaW9yaXR5IHZhbHVlXG4gICAgQVJHVlsyXSBwcmVmaXgga2V5XG4gICAgQVJHVlszXSBqb2IgaWRcbiAgICBBUkdWWzRdIGxpZm9cbiAgICBPdXRwdXQ6XG4gICAgICAgMCAgLSBPS1xuICAgICAgLTEgIC0gTWlzc2luZyBqb2Jcbl1dXG5sb2NhbCBqb2JJZCA9IEFSR1ZbM11cbmxvY2FsIGpvYktleSA9IEFSR1ZbMl0gLi4gam9iSWRcbmxvY2FsIHByaW9yaXR5ID0gdG9udW1iZXIoQVJHVlsxXSlcbmxvY2FsIHJjYWxsID0gcmVkaXMuY2FsbFxuLS0gSW5jbHVkZXNcbi0tW1tcbiAgRnVuY3Rpb24gdG8gYWRkIGpvYiBpbiB0YXJnZXQgbGlzdCBhbmQgYWRkIG1hcmtlciBpZiBuZWVkZWQuXG5dXVxuLS0gSW5jbHVkZXNcbi0tW1tcbiAgQWRkIG1hcmtlciBpZiBuZWVkZWQgd2hlbiBhIGpvYiBpcyBhdmFpbGFibGUuXG5dXVxubG9jYWwgZnVuY3Rpb24gYWRkQmFzZU1hcmtlcklmTmVlZGVkKG1hcmtlcktleSwgaXNQYXVzZWRPck1heGVkKVxuICBpZiBub3QgaXNQYXVzZWRPck1heGVkIHRoZW5cbiAgICByY2FsbChcIlpBRERcIiwgbWFya2VyS2V5LCAwLCBcIjBcIilcbiAgZW5kICBcbmVuZFxubG9jYWwgZnVuY3Rpb24gYWRkSm9iSW5UYXJnZXRMaXN0KHRhcmdldEtleSwgbWFya2VyS2V5LCBwdXNoQ21kLCBpc1BhdXNlZE9yTWF4ZWQsIGpvYklkKVxuICByY2FsbChwdXNoQ21kLCB0YXJnZXRLZXksIGpvYklkKVxuICBhZGRCYXNlTWFya2VySWZOZWVkZWQobWFya2VyS2V5LCBpc1BhdXNlZE9yTWF4ZWQpXG5lbmRcbi0tW1tcbiAgRnVuY3Rpb24gdG8gYWRkIGpvYiBjb25zaWRlcmluZyBwcmlvcml0eS5cbl1dXG4tLSBJbmNsdWRlc1xuLS1bW1xuICBGdW5jdGlvbiB0byBnZXQgcHJpb3JpdHkgc2NvcmUuXG5dXVxubG9jYWwgZnVuY3Rpb24gZ2V0UHJpb3JpdHlTY29yZShwcmlvcml0eSwgcHJpb3JpdHlDb3VudGVyS2V5KVxuICBsb2NhbCBwcmlvQ291bnRlciA9IHJjYWxsKFwiSU5DUlwiLCBwcmlvcml0eUNvdW50ZXJLZXkpXG4gIHJldHVybiBwcmlvcml0eSAqIDB4MTAwMDAwMDAwICsgcHJpb0NvdW50ZXIgJSAweDEwMDAwMDAwMFxuZW5kXG5sb2NhbCBmdW5jdGlvbiBhZGRKb2JXaXRoUHJpb3JpdHkobWFya2VyS2V5LCBwcmlvcml0aXplZEtleSwgcHJpb3JpdHksIGpvYklkLCBwcmlvcml0eUNvdW50ZXJLZXksXG4gIGlzUGF1c2VkT3JNYXhlZClcbiAgbG9jYWwgc2NvcmUgPSBnZXRQcmlvcml0eVNjb3JlKHByaW9yaXR5LCBwcmlvcml0eUNvdW50ZXJLZXkpXG4gIHJjYWxsKFwiWkFERFwiLCBwcmlvcml0aXplZEtleSwgc2NvcmUsIGpvYklkKVxuICBhZGRCYXNlTWFya2VySWZOZWVkZWQobWFya2VyS2V5LCBpc1BhdXNlZE9yTWF4ZWQpXG5lbmRcbi0tW1tcbiAgRnVuY3Rpb24gdG8gY2hlY2sgZm9yIHRoZSBtZXRhLnBhdXNlZCBrZXkgdG8gZGVjaWRlIGlmIHdlIGFyZSBwYXVzZWQgb3Igbm90XG4gIChzaW5jZSBhbiBlbXB0eSBsaXN0IGFuZCAhRVhJU1RTIGFyZSBub3QgcmVhbGx5IHRoZSBzYW1lKS5cbl1dXG5sb2NhbCBmdW5jdGlvbiBnZXRUYXJnZXRRdWV1ZUxpc3QocXVldWVNZXRhS2V5LCBhY3RpdmVLZXksIHdhaXRLZXksIHBhdXNlZEtleSlcbiAgbG9jYWwgcXVldWVBdHRyaWJ1dGVzID0gcmNhbGwoXCJITUdFVFwiLCBxdWV1ZU1ldGFLZXksIFwicGF1c2VkXCIsIFwiY29uY3VycmVuY3lcIiwgXCJtYXhcIiwgXCJkdXJhdGlvblwiKVxuICBpZiBxdWV1ZUF0dHJpYnV0ZXNbMV0gdGhlblxuICAgIHJldHVybiBwYXVzZWRLZXksIHRydWUsIHF1ZXVlQXR0cmlidXRlc1szXSwgcXVldWVBdHRyaWJ1dGVzWzRdXG4gIGVsc2VcbiAgICBpZiBxdWV1ZUF0dHJpYnV0ZXNbMl0gdGhlblxuICAgICAgbG9jYWwgYWN0aXZlQ291bnQgPSByY2FsbChcIkxMRU5cIiwgYWN0aXZlS2V5KVxuICAgICAgaWYgYWN0aXZlQ291bnQgPj0gdG9udW1iZXIocXVldWVBdHRyaWJ1dGVzWzJdKSB0aGVuXG4gICAgICAgIHJldHVybiB3YWl0S2V5LCB0cnVlLCBxdWV1ZUF0dHJpYnV0ZXNbM10sIHF1ZXVlQXR0cmlidXRlc1s0XVxuICAgICAgZWxzZVxuICAgICAgICByZXR1cm4gd2FpdEtleSwgZmFsc2UsIHF1ZXVlQXR0cmlidXRlc1szXSwgcXVldWVBdHRyaWJ1dGVzWzRdXG4gICAgICBlbmRcbiAgICBlbmRcbiAgZW5kXG4gIHJldHVybiB3YWl0S2V5LCBmYWxzZSwgcXVldWVBdHRyaWJ1dGVzWzNdLCBxdWV1ZUF0dHJpYnV0ZXNbNF1cbmVuZFxuLS1bW1xuICBGdW5jdGlvbiB0byBwdXNoIGJhY2sgam9iIGNvbnNpZGVyaW5nIHByaW9yaXR5IGluIGZyb250IG9mIHNhbWUgcHJpb3JpdGl6ZWQgam9icy5cbl1dXG5sb2NhbCBmdW5jdGlvbiBwdXNoQmFja0pvYldpdGhQcmlvcml0eShwcmlvcml0aXplZEtleSwgcHJpb3JpdHksIGpvYklkKVxuICAtLSBpbiBvcmRlciB0byBwdXQgaXQgYXQgZnJvbnQgb2Ygc2FtZSBwcmlvcml0aXplZCBqb2JzXG4gIC0tIHdlIGNvbnNpZGVyIHByaW9yaXRpemVkIGNvdW50ZXIgYXMgMFxuICBsb2NhbCBzY29yZSA9IHByaW9yaXR5ICogMHgxMDAwMDAwMDBcbiAgcmNhbGwoXCJaQUREXCIsIHByaW9yaXRpemVkS2V5LCBzY29yZSwgam9iSWQpXG5lbmRcbmxvY2FsIGZ1bmN0aW9uIHJlQWRkSm9iV2l0aE5ld1ByaW9yaXR5KCBwcmlvcml0aXplZEtleSwgbWFya2VyS2V5LCB0YXJnZXRLZXksXG4gICAgcHJpb3JpdHlDb3VudGVyLCBsaWZvLCBwcmlvcml0eSwgam9iSWQsIGlzUGF1c2VkT3JNYXhlZClcbiAgICBpZiBwcmlvcml0eSA9PSAwIHRoZW5cbiAgICAgICAgbG9jYWwgcHVzaENtZCA9IGxpZm8gYW5kICdSUFVTSCcgb3IgJ0xQVVNIJ1xuICAgICAgICBhZGRKb2JJblRhcmdldExpc3QodGFyZ2V0S2V5LCBtYXJrZXJLZXksIHB1c2hDbWQsIGlzUGF1c2VkT3JNYXhlZCwgam9iSWQpXG4gICAgZWxzZVxuICAgICAgICBpZiBsaWZvIHRoZW5cbiAgICAgICAgICAgIHB1c2hCYWNrSm9iV2l0aFByaW9yaXR5KHByaW9yaXRpemVkS2V5LCBwcmlvcml0eSwgam9iSWQpXG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIGFkZEpvYldpdGhQcmlvcml0eShtYXJrZXJLZXksIHByaW9yaXRpemVkS2V5LCBwcmlvcml0eSwgam9iSWQsXG4gICAgICAgICAgICAgICAgcHJpb3JpdHlDb3VudGVyLCBpc1BhdXNlZE9yTWF4ZWQpXG4gICAgICAgIGVuZFxuICAgIGVuZFxuZW5kXG5pZiByY2FsbChcIkVYSVNUU1wiLCBqb2JLZXkpID09IDEgdGhlblxuICAgIGxvY2FsIG1ldGFLZXkgPSBLRVlTWzNdXG4gICAgbG9jYWwgdGFyZ2V0LCBpc1BhdXNlZE9yTWF4ZWQgPSBnZXRUYXJnZXRRdWV1ZUxpc3QobWV0YUtleSwgS0VZU1s1XSwgS0VZU1sxXSwgS0VZU1syXSlcbiAgICBsb2NhbCBwcmlvcml0aXplZEtleSA9IEtFWVNbNF1cbiAgICBsb2NhbCBwcmlvcml0eUNvdW50ZXJLZXkgPSBLRVlTWzZdXG4gICAgbG9jYWwgbWFya2VyS2V5ID0gS0VZU1s3XVxuICAgIC0tIFJlLWFkZCB3aXRoIHRoZSBuZXcgcHJpb3JpdHlcbiAgICBpZiByY2FsbChcIlpSRU1cIiwgcHJpb3JpdGl6ZWRLZXksIGpvYklkKSA+IDAgdGhlblxuICAgICAgICByZUFkZEpvYldpdGhOZXdQcmlvcml0eSggcHJpb3JpdGl6ZWRLZXksIG1hcmtlcktleSwgdGFyZ2V0LFxuICAgICAgICAgICAgcHJpb3JpdHlDb3VudGVyS2V5LCBBUkdWWzRdID09ICcxJywgcHJpb3JpdHksIGpvYklkLCBpc1BhdXNlZE9yTWF4ZWQpXG4gICAgZWxzZWlmIHJjYWxsKFwiTFJFTVwiLCB0YXJnZXQsIC0xLCBqb2JJZCkgPiAwIHRoZW5cbiAgICAgICAgcmVBZGRKb2JXaXRoTmV3UHJpb3JpdHkoIHByaW9yaXRpemVkS2V5LCBtYXJrZXJLZXksIHRhcmdldCxcbiAgICAgICAgICAgIHByaW9yaXR5Q291bnRlcktleSwgQVJHVls0XSA9PSAnMScsIHByaW9yaXR5LCBqb2JJZCwgaXNQYXVzZWRPck1heGVkKVxuICAgIGVuZFxuICAgIHJjYWxsKFwiSFNFVFwiLCBqb2JLZXksIFwicHJpb3JpdHlcIiwgcHJpb3JpdHkpXG4gICAgcmV0dXJuIDBcbmVsc2VcbiAgICByZXR1cm4gLTFcbmVuZFxuYDtcbmV4cG9ydHMuY2hhbmdlUHJpb3JpdHkgPSB7XG4gICAgbmFtZTogJ2NoYW5nZVByaW9yaXR5JyxcbiAgICBjb250ZW50LFxuICAgIGtleXM6IDcsXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y2hhbmdlUHJpb3JpdHktNy5qcy5tYXAiXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJjaGFuZ2VQcmlvcml0eSIsImNvbnRlbnQiLCJuYW1lIiwia2V5cyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/scripts/changePriority-7.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/scripts/cleanJobsInSet-3.js":
/*!******************************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/scripts/cleanJobsInSet-3.js ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.cleanJobsInSet = void 0;\nconst content = `--[[\n  Remove jobs from the specific set.\n  Input:\n    KEYS[1]  set key,\n    KEYS[2]  events stream key\n    KEYS[3]  repeat key\n    ARGV[1]  jobKey prefix\n    ARGV[2]  timestamp\n    ARGV[3]  limit the number of jobs to be removed. 0 is unlimited\n    ARGV[4]  set name, can be any of 'wait', 'active', 'paused', 'delayed', 'completed', or 'failed'\n]]\nlocal rcall = redis.call\nlocal repeatKey = KEYS[3]\nlocal rangeStart = 0\nlocal rangeEnd = -1\nlocal limit = tonumber(ARGV[3])\n-- If we're only deleting _n_ items, avoid retrieving all items\n-- for faster performance\n--\n-- Start from the tail of the list, since that's where oldest elements\n-- are generally added for FIFO lists\nif limit > 0 then\n  rangeStart = -1 - limit + 1\n  rangeEnd = -1\nend\n-- Includes\n--[[\n  Function to clean job list.\n  Returns jobIds and deleted count number.\n]]\n-- Includes\n--[[\n  Function to get the latest saved timestamp.\n]]\nlocal function getTimestamp(jobKey, attributes)\n  if #attributes == 1 then\n    return rcall(\"HGET\", jobKey, attributes[1])\n  end\n  local jobTs\n  for _, ts in ipairs(rcall(\"HMGET\", jobKey, unpack(attributes))) do\n    if (ts) then\n      jobTs = ts\n      break\n    end\n  end\n  return jobTs\nend\n--[[\n  Function to check if the job belongs to a job scheduler and\n  current delayed job matches with jobId\n]]\nlocal function isJobSchedulerJob(jobId, jobKey, jobSchedulersKey)\n  local repeatJobKey = rcall(\"HGET\", jobKey, \"rjk\")\n  if repeatJobKey  then\n    local prevMillis = rcall(\"ZSCORE\", jobSchedulersKey, repeatJobKey)\n    if prevMillis then\n      local currentDelayedJobId = \"repeat:\" .. repeatJobKey .. \":\" .. prevMillis\n      return jobId == currentDelayedJobId\n    end\n  end\n  return false\nend\n--[[\n  Function to remove job.\n]]\n-- Includes\n--[[\n  Function to remove deduplication key if needed\n  when a job is being removed.\n]]\nlocal function removeDeduplicationKeyIfNeededOnRemoval(prefixKey,\n  jobKey, jobId)\n  local deduplicationId = rcall(\"HGET\", jobKey, \"deid\")\n  if deduplicationId then\n    local deduplicationKey = prefixKey .. \"de:\" .. deduplicationId\n    local currentJobId = rcall('GET', deduplicationKey)\n    if currentJobId and currentJobId == jobId then\n      return rcall(\"DEL\", deduplicationKey)\n    end\n  end\nend\n--[[\n  Function to remove job keys.\n]]\nlocal function removeJobKeys(jobKey)\n  return rcall(\"DEL\", jobKey, jobKey .. ':logs', jobKey .. ':dependencies',\n    jobKey .. ':processed', jobKey .. ':failed', jobKey .. ':unsuccessful')\nend\n--[[\n  Check if this job has a parent. If so we will just remove it from\n  the parent child list, but if it is the last child we should move the parent to \"wait/paused\"\n  which requires code from \"moveToFinished\"\n]]\n-- Includes\n--[[\n  Function to add job in target list and add marker if needed.\n]]\n-- Includes\n--[[\n  Add marker if needed when a job is available.\n]]\nlocal function addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)\n  if not isPausedOrMaxed then\n    rcall(\"ZADD\", markerKey, 0, \"0\")\n  end  \nend\nlocal function addJobInTargetList(targetKey, markerKey, pushCmd, isPausedOrMaxed, jobId)\n  rcall(pushCmd, targetKey, jobId)\n  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)\nend\n--[[\n  Functions to destructure job key.\n  Just a bit of warning, these functions may be a bit slow and affect performance significantly.\n]]\nlocal getJobIdFromKey = function (jobKey)\n  return string.match(jobKey, \".*:(.*)\")\nend\nlocal getJobKeyPrefix = function (jobKey, jobId)\n  return string.sub(jobKey, 0, #jobKey - #jobId)\nend\n--[[\n  Function to check for the meta.paused key to decide if we are paused or not\n  (since an empty list and !EXISTS are not really the same).\n]]\nlocal function getTargetQueueList(queueMetaKey, activeKey, waitKey, pausedKey)\n  local queueAttributes = rcall(\"HMGET\", queueMetaKey, \"paused\", \"concurrency\", \"max\", \"duration\")\n  if queueAttributes[1] then\n    return pausedKey, true, queueAttributes[3], queueAttributes[4]\n  else\n    if queueAttributes[2] then\n      local activeCount = rcall(\"LLEN\", activeKey)\n      if activeCount >= tonumber(queueAttributes[2]) then\n        return waitKey, true, queueAttributes[3], queueAttributes[4]\n      else\n        return waitKey, false, queueAttributes[3], queueAttributes[4]\n      end\n    end\n  end\n  return waitKey, false, queueAttributes[3], queueAttributes[4]\nend\nlocal function _moveParentToWait(parentPrefix, parentId, emitEvent)\n  local parentTarget, isPausedOrMaxed = getTargetQueueList(parentPrefix .. \"meta\", parentPrefix .. \"active\",\n    parentPrefix .. \"wait\", parentPrefix .. \"paused\")\n  addJobInTargetList(parentTarget, parentPrefix .. \"marker\", \"RPUSH\", isPausedOrMaxed, parentId)\n  if emitEvent then\n    local parentEventStream = parentPrefix .. \"events\"\n    rcall(\"XADD\", parentEventStream, \"*\", \"event\", \"waiting\", \"jobId\", parentId, \"prev\", \"waiting-children\")\n  end\nend\nlocal function removeParentDependencyKey(jobKey, hard, parentKey, baseKey, debounceId)\n  if parentKey then\n    local parentDependenciesKey = parentKey .. \":dependencies\"\n    local result = rcall(\"SREM\", parentDependenciesKey, jobKey)\n    if result > 0 then\n      local pendingDependencies = rcall(\"SCARD\", parentDependenciesKey)\n      if pendingDependencies == 0 then\n        local parentId = getJobIdFromKey(parentKey)\n        local parentPrefix = getJobKeyPrefix(parentKey, parentId)\n        local numRemovedElements = rcall(\"ZREM\", parentPrefix .. \"waiting-children\", parentId)\n        if numRemovedElements == 1 then\n          if hard then -- remove parent in same queue\n            if parentPrefix == baseKey then\n              removeParentDependencyKey(parentKey, hard, nil, baseKey, nil)\n              removeJobKeys(parentKey)\n              if debounceId then\n                rcall(\"DEL\", parentPrefix .. \"de:\" .. debounceId)\n              end\n            else\n              _moveParentToWait(parentPrefix, parentId)\n            end\n          else\n            _moveParentToWait(parentPrefix, parentId, true)\n          end\n        end\n      end\n      return true\n    end\n  else\n    local parentAttributes = rcall(\"HMGET\", jobKey, \"parentKey\", \"deid\")\n    local missedParentKey = parentAttributes[1]\n    if( (type(missedParentKey) == \"string\") and missedParentKey ~= \"\"\n      and (rcall(\"EXISTS\", missedParentKey) == 1)) then\n      local parentDependenciesKey = missedParentKey .. \":dependencies\"\n      local result = rcall(\"SREM\", parentDependenciesKey, jobKey)\n      if result > 0 then\n        local pendingDependencies = rcall(\"SCARD\", parentDependenciesKey)\n        if pendingDependencies == 0 then\n          local parentId = getJobIdFromKey(missedParentKey)\n          local parentPrefix = getJobKeyPrefix(missedParentKey, parentId)\n          local numRemovedElements = rcall(\"ZREM\", parentPrefix .. \"waiting-children\", parentId)\n          if numRemovedElements == 1 then\n            if hard then\n              if parentPrefix == baseKey then\n                removeParentDependencyKey(missedParentKey, hard, nil, baseKey, nil)\n                removeJobKeys(missedParentKey)\n                if parentAttributes[2] then\n                  rcall(\"DEL\", parentPrefix .. \"de:\" .. parentAttributes[2])\n                end\n              else\n                _moveParentToWait(parentPrefix, parentId)\n              end\n            else\n              _moveParentToWait(parentPrefix, parentId, true)\n            end\n          end\n        end\n        return true\n      end\n    end\n  end\n  return false\nend\nlocal function removeJob(jobId, hard, baseKey, shouldRemoveDeduplicationKey)\n  local jobKey = baseKey .. jobId\n  removeParentDependencyKey(jobKey, hard, nil, baseKey)\n  if shouldRemoveDeduplicationKey then\n    removeDeduplicationKeyIfNeededOnRemoval(baseKey, jobKey, jobId)\n  end\n  removeJobKeys(jobKey)\nend\nlocal function cleanList(listKey, jobKeyPrefix, rangeStart, rangeEnd,\n  timestamp, isWaiting, jobSchedulersKey)\n  local jobs = rcall(\"LRANGE\", listKey, rangeStart, rangeEnd)\n  local deleted = {}\n  local deletedCount = 0\n  local jobTS\n  local deletionMarker = ''\n  local jobIdsLen = #jobs\n  for i, job in ipairs(jobs) do\n    if limit > 0 and deletedCount >= limit then\n      break\n    end\n    local jobKey = jobKeyPrefix .. job\n    if (isWaiting or rcall(\"EXISTS\", jobKey .. \":lock\") == 0) and\n      not isJobSchedulerJob(job, jobKey, jobSchedulersKey) then\n      -- Find the right timestamp of the job to compare to maxTimestamp:\n      -- * finishedOn says when the job was completed, but it isn't set unless the job has actually completed\n      -- * processedOn represents when the job was last attempted, but it doesn't get populated until\n      --   the job is first tried\n      -- * timestamp is the original job submission time\n      -- Fetch all three of these (in that order) and use the first one that is set so that we'll leave jobs\n      -- that have been active within the grace period:\n      jobTS = getTimestamp(jobKey, {\"finishedOn\", \"processedOn\", \"timestamp\"})\n      if (not jobTS or jobTS <= timestamp) then\n        -- replace the entry with a deletion marker; the actual deletion will\n        -- occur at the end of the script\n        rcall(\"LSET\", listKey, rangeEnd - jobIdsLen + i, deletionMarker)\n        removeJob(job, true, jobKeyPrefix, true --[[remove debounce key]])\n        deletedCount = deletedCount + 1\n        table.insert(deleted, job)\n      end\n    end\n  end\n  rcall(\"LREM\", listKey, 0, deletionMarker)\n  return {deleted, deletedCount}\nend\n--[[\n  Function to clean job set.\n  Returns jobIds and deleted count number.\n]] \n-- Includes\n--[[\n  Function to loop in batches.\n  Just a bit of warning, some commands as ZREM\n  could receive a maximum of 7000 parameters per call.\n]]\nlocal function batches(n, batchSize)\n  local i = 0\n  return function()\n    local from = i * batchSize + 1\n    i = i + 1\n    if (from <= n) then\n      local to = math.min(from + batchSize - 1, n)\n      return from, to\n    end\n  end\nend\n--[[\n  We use ZRANGEBYSCORE to make the case where we're deleting a limited number\n  of items in a sorted set only run a single iteration. If we simply used\n  ZRANGE, we may take a long time traversing through jobs that are within the\n  grace period.\n]]\nlocal function getJobsInZset(zsetKey, rangeEnd, limit)\n  if limit > 0 then\n    return rcall(\"ZRANGEBYSCORE\", zsetKey, 0, rangeEnd, \"LIMIT\", 0, limit)\n  else\n    return rcall(\"ZRANGEBYSCORE\", zsetKey, 0, rangeEnd)\n  end\nend\nlocal function cleanSet(\n    setKey,\n    jobKeyPrefix,\n    rangeEnd,\n    timestamp,\n    limit,\n    attributes,\n    isFinished,\n    jobSchedulersKey)\n    local jobs = getJobsInZset(setKey, rangeEnd, limit)\n    local deleted = {}\n    local deletedCount = 0\n    local jobTS\n    for i, job in ipairs(jobs) do\n        if limit > 0 and deletedCount >= limit then\n            break\n        end\n        local jobKey = jobKeyPrefix .. job\n        -- Extract a Job Scheduler Id from jobId (\"repeat:job-scheduler-id:millis\") \n        -- and check if it is in the scheduled jobs\n        if not (jobSchedulersKey and isJobSchedulerJob(job, jobKey, jobSchedulersKey)) then\n            if isFinished then\n                removeJob(job, true, jobKeyPrefix, true --[[remove debounce key]] )\n                deletedCount = deletedCount + 1\n                table.insert(deleted, job)\n            else\n                -- * finishedOn says when the job was completed, but it isn't set unless the job has actually completed\n                jobTS = getTimestamp(jobKey, attributes)\n                if (not jobTS or jobTS <= timestamp) then\n                    removeJob(job, true, jobKeyPrefix, true --[[remove debounce key]] )\n                    deletedCount = deletedCount + 1\n                    table.insert(deleted, job)\n                end\n            end\n        end\n    end\n    if (#deleted > 0) then\n        for from, to in batches(#deleted, 7000) do\n            rcall(\"ZREM\", setKey, unpack(deleted, from, to))\n        end\n    end\n    return {deleted, deletedCount}\nend\nlocal result\nif ARGV[4] == \"active\" then\n  result = cleanList(KEYS[1], ARGV[1], rangeStart, rangeEnd, ARGV[2], false --[[ hasFinished ]],\n                      repeatKey)\nelseif ARGV[4] == \"delayed\" then\n  rangeEnd = \"+inf\"\n  result = cleanSet(KEYS[1], ARGV[1], rangeEnd, ARGV[2], limit,\n                    {\"processedOn\", \"timestamp\"}, false  --[[ hasFinished ]], repeatKey)\nelseif ARGV[4] == \"prioritized\" then\n  rangeEnd = \"+inf\"\n  result = cleanSet(KEYS[1], ARGV[1], rangeEnd, ARGV[2], limit,\n                    {\"timestamp\"}, false  --[[ hasFinished ]], repeatKey)\nelseif ARGV[4] == \"wait\" or ARGV[4] == \"paused\" then\n  result = cleanList(KEYS[1], ARGV[1], rangeStart, rangeEnd, ARGV[2], true --[[ hasFinished ]],\n                      repeatKey)\nelse\n  rangeEnd = ARGV[2]\n  -- No need to pass repeat key as in that moment job won't be related to a job scheduler\n  result = cleanSet(KEYS[1], ARGV[1], rangeEnd, ARGV[2], limit,\n                    {\"finishedOn\"}, true  --[[ hasFinished ]])\nend\nrcall(\"XADD\", KEYS[2], \"*\", \"event\", \"cleaned\", \"count\", result[2])\nreturn result[1]\n`;\nexports.cleanJobsInSet = {\n    name: \"cleanJobsInSet\",\n    content,\n    keys: 3\n}; //# sourceMappingURL=cleanJobsInSet-3.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL3NjcmlwdHMvY2xlYW5Kb2JzSW5TZXQtMy5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsc0JBQXNCLEdBQUcsS0FBSztBQUM5QixNQUFNRyxVQUFVLENBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBb1dqQixDQUFDO0FBQ0RILHNCQUFzQixHQUFHO0lBQ3JCSSxNQUFNO0lBQ05EO0lBQ0FFLE1BQU07QUFDVixHQUNBLDRDQUE0QyIsInNvdXJjZXMiOlsid2VicGFjazovL29ubHlmYW5zLXBsYXRmb3JtLy4vbm9kZV9tb2R1bGVzL2J1bGxtcS9kaXN0L2Nqcy9zY3JpcHRzL2NsZWFuSm9ic0luU2V0LTMuanM/YmI2MCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuY2xlYW5Kb2JzSW5TZXQgPSB2b2lkIDA7XG5jb25zdCBjb250ZW50ID0gYC0tW1tcbiAgUmVtb3ZlIGpvYnMgZnJvbSB0aGUgc3BlY2lmaWMgc2V0LlxuICBJbnB1dDpcbiAgICBLRVlTWzFdICBzZXQga2V5LFxuICAgIEtFWVNbMl0gIGV2ZW50cyBzdHJlYW0ga2V5XG4gICAgS0VZU1szXSAgcmVwZWF0IGtleVxuICAgIEFSR1ZbMV0gIGpvYktleSBwcmVmaXhcbiAgICBBUkdWWzJdICB0aW1lc3RhbXBcbiAgICBBUkdWWzNdICBsaW1pdCB0aGUgbnVtYmVyIG9mIGpvYnMgdG8gYmUgcmVtb3ZlZC4gMCBpcyB1bmxpbWl0ZWRcbiAgICBBUkdWWzRdICBzZXQgbmFtZSwgY2FuIGJlIGFueSBvZiAnd2FpdCcsICdhY3RpdmUnLCAncGF1c2VkJywgJ2RlbGF5ZWQnLCAnY29tcGxldGVkJywgb3IgJ2ZhaWxlZCdcbl1dXG5sb2NhbCByY2FsbCA9IHJlZGlzLmNhbGxcbmxvY2FsIHJlcGVhdEtleSA9IEtFWVNbM11cbmxvY2FsIHJhbmdlU3RhcnQgPSAwXG5sb2NhbCByYW5nZUVuZCA9IC0xXG5sb2NhbCBsaW1pdCA9IHRvbnVtYmVyKEFSR1ZbM10pXG4tLSBJZiB3ZSdyZSBvbmx5IGRlbGV0aW5nIF9uXyBpdGVtcywgYXZvaWQgcmV0cmlldmluZyBhbGwgaXRlbXNcbi0tIGZvciBmYXN0ZXIgcGVyZm9ybWFuY2Vcbi0tXG4tLSBTdGFydCBmcm9tIHRoZSB0YWlsIG9mIHRoZSBsaXN0LCBzaW5jZSB0aGF0J3Mgd2hlcmUgb2xkZXN0IGVsZW1lbnRzXG4tLSBhcmUgZ2VuZXJhbGx5IGFkZGVkIGZvciBGSUZPIGxpc3RzXG5pZiBsaW1pdCA+IDAgdGhlblxuICByYW5nZVN0YXJ0ID0gLTEgLSBsaW1pdCArIDFcbiAgcmFuZ2VFbmQgPSAtMVxuZW5kXG4tLSBJbmNsdWRlc1xuLS1bW1xuICBGdW5jdGlvbiB0byBjbGVhbiBqb2IgbGlzdC5cbiAgUmV0dXJucyBqb2JJZHMgYW5kIGRlbGV0ZWQgY291bnQgbnVtYmVyLlxuXV1cbi0tIEluY2x1ZGVzXG4tLVtbXG4gIEZ1bmN0aW9uIHRvIGdldCB0aGUgbGF0ZXN0IHNhdmVkIHRpbWVzdGFtcC5cbl1dXG5sb2NhbCBmdW5jdGlvbiBnZXRUaW1lc3RhbXAoam9iS2V5LCBhdHRyaWJ1dGVzKVxuICBpZiAjYXR0cmlidXRlcyA9PSAxIHRoZW5cbiAgICByZXR1cm4gcmNhbGwoXCJIR0VUXCIsIGpvYktleSwgYXR0cmlidXRlc1sxXSlcbiAgZW5kXG4gIGxvY2FsIGpvYlRzXG4gIGZvciBfLCB0cyBpbiBpcGFpcnMocmNhbGwoXCJITUdFVFwiLCBqb2JLZXksIHVucGFjayhhdHRyaWJ1dGVzKSkpIGRvXG4gICAgaWYgKHRzKSB0aGVuXG4gICAgICBqb2JUcyA9IHRzXG4gICAgICBicmVha1xuICAgIGVuZFxuICBlbmRcbiAgcmV0dXJuIGpvYlRzXG5lbmRcbi0tW1tcbiAgRnVuY3Rpb24gdG8gY2hlY2sgaWYgdGhlIGpvYiBiZWxvbmdzIHRvIGEgam9iIHNjaGVkdWxlciBhbmRcbiAgY3VycmVudCBkZWxheWVkIGpvYiBtYXRjaGVzIHdpdGggam9iSWRcbl1dXG5sb2NhbCBmdW5jdGlvbiBpc0pvYlNjaGVkdWxlckpvYihqb2JJZCwgam9iS2V5LCBqb2JTY2hlZHVsZXJzS2V5KVxuICBsb2NhbCByZXBlYXRKb2JLZXkgPSByY2FsbChcIkhHRVRcIiwgam9iS2V5LCBcInJqa1wiKVxuICBpZiByZXBlYXRKb2JLZXkgIHRoZW5cbiAgICBsb2NhbCBwcmV2TWlsbGlzID0gcmNhbGwoXCJaU0NPUkVcIiwgam9iU2NoZWR1bGVyc0tleSwgcmVwZWF0Sm9iS2V5KVxuICAgIGlmIHByZXZNaWxsaXMgdGhlblxuICAgICAgbG9jYWwgY3VycmVudERlbGF5ZWRKb2JJZCA9IFwicmVwZWF0OlwiIC4uIHJlcGVhdEpvYktleSAuLiBcIjpcIiAuLiBwcmV2TWlsbGlzXG4gICAgICByZXR1cm4gam9iSWQgPT0gY3VycmVudERlbGF5ZWRKb2JJZFxuICAgIGVuZFxuICBlbmRcbiAgcmV0dXJuIGZhbHNlXG5lbmRcbi0tW1tcbiAgRnVuY3Rpb24gdG8gcmVtb3ZlIGpvYi5cbl1dXG4tLSBJbmNsdWRlc1xuLS1bW1xuICBGdW5jdGlvbiB0byByZW1vdmUgZGVkdXBsaWNhdGlvbiBrZXkgaWYgbmVlZGVkXG4gIHdoZW4gYSBqb2IgaXMgYmVpbmcgcmVtb3ZlZC5cbl1dXG5sb2NhbCBmdW5jdGlvbiByZW1vdmVEZWR1cGxpY2F0aW9uS2V5SWZOZWVkZWRPblJlbW92YWwocHJlZml4S2V5LFxuICBqb2JLZXksIGpvYklkKVxuICBsb2NhbCBkZWR1cGxpY2F0aW9uSWQgPSByY2FsbChcIkhHRVRcIiwgam9iS2V5LCBcImRlaWRcIilcbiAgaWYgZGVkdXBsaWNhdGlvbklkIHRoZW5cbiAgICBsb2NhbCBkZWR1cGxpY2F0aW9uS2V5ID0gcHJlZml4S2V5IC4uIFwiZGU6XCIgLi4gZGVkdXBsaWNhdGlvbklkXG4gICAgbG9jYWwgY3VycmVudEpvYklkID0gcmNhbGwoJ0dFVCcsIGRlZHVwbGljYXRpb25LZXkpXG4gICAgaWYgY3VycmVudEpvYklkIGFuZCBjdXJyZW50Sm9iSWQgPT0gam9iSWQgdGhlblxuICAgICAgcmV0dXJuIHJjYWxsKFwiREVMXCIsIGRlZHVwbGljYXRpb25LZXkpXG4gICAgZW5kXG4gIGVuZFxuZW5kXG4tLVtbXG4gIEZ1bmN0aW9uIHRvIHJlbW92ZSBqb2Iga2V5cy5cbl1dXG5sb2NhbCBmdW5jdGlvbiByZW1vdmVKb2JLZXlzKGpvYktleSlcbiAgcmV0dXJuIHJjYWxsKFwiREVMXCIsIGpvYktleSwgam9iS2V5IC4uICc6bG9ncycsIGpvYktleSAuLiAnOmRlcGVuZGVuY2llcycsXG4gICAgam9iS2V5IC4uICc6cHJvY2Vzc2VkJywgam9iS2V5IC4uICc6ZmFpbGVkJywgam9iS2V5IC4uICc6dW5zdWNjZXNzZnVsJylcbmVuZFxuLS1bW1xuICBDaGVjayBpZiB0aGlzIGpvYiBoYXMgYSBwYXJlbnQuIElmIHNvIHdlIHdpbGwganVzdCByZW1vdmUgaXQgZnJvbVxuICB0aGUgcGFyZW50IGNoaWxkIGxpc3QsIGJ1dCBpZiBpdCBpcyB0aGUgbGFzdCBjaGlsZCB3ZSBzaG91bGQgbW92ZSB0aGUgcGFyZW50IHRvIFwid2FpdC9wYXVzZWRcIlxuICB3aGljaCByZXF1aXJlcyBjb2RlIGZyb20gXCJtb3ZlVG9GaW5pc2hlZFwiXG5dXVxuLS0gSW5jbHVkZXNcbi0tW1tcbiAgRnVuY3Rpb24gdG8gYWRkIGpvYiBpbiB0YXJnZXQgbGlzdCBhbmQgYWRkIG1hcmtlciBpZiBuZWVkZWQuXG5dXVxuLS0gSW5jbHVkZXNcbi0tW1tcbiAgQWRkIG1hcmtlciBpZiBuZWVkZWQgd2hlbiBhIGpvYiBpcyBhdmFpbGFibGUuXG5dXVxubG9jYWwgZnVuY3Rpb24gYWRkQmFzZU1hcmtlcklmTmVlZGVkKG1hcmtlcktleSwgaXNQYXVzZWRPck1heGVkKVxuICBpZiBub3QgaXNQYXVzZWRPck1heGVkIHRoZW5cbiAgICByY2FsbChcIlpBRERcIiwgbWFya2VyS2V5LCAwLCBcIjBcIilcbiAgZW5kICBcbmVuZFxubG9jYWwgZnVuY3Rpb24gYWRkSm9iSW5UYXJnZXRMaXN0KHRhcmdldEtleSwgbWFya2VyS2V5LCBwdXNoQ21kLCBpc1BhdXNlZE9yTWF4ZWQsIGpvYklkKVxuICByY2FsbChwdXNoQ21kLCB0YXJnZXRLZXksIGpvYklkKVxuICBhZGRCYXNlTWFya2VySWZOZWVkZWQobWFya2VyS2V5LCBpc1BhdXNlZE9yTWF4ZWQpXG5lbmRcbi0tW1tcbiAgRnVuY3Rpb25zIHRvIGRlc3RydWN0dXJlIGpvYiBrZXkuXG4gIEp1c3QgYSBiaXQgb2Ygd2FybmluZywgdGhlc2UgZnVuY3Rpb25zIG1heSBiZSBhIGJpdCBzbG93IGFuZCBhZmZlY3QgcGVyZm9ybWFuY2Ugc2lnbmlmaWNhbnRseS5cbl1dXG5sb2NhbCBnZXRKb2JJZEZyb21LZXkgPSBmdW5jdGlvbiAoam9iS2V5KVxuICByZXR1cm4gc3RyaW5nLm1hdGNoKGpvYktleSwgXCIuKjooLiopXCIpXG5lbmRcbmxvY2FsIGdldEpvYktleVByZWZpeCA9IGZ1bmN0aW9uIChqb2JLZXksIGpvYklkKVxuICByZXR1cm4gc3RyaW5nLnN1Yihqb2JLZXksIDAsICNqb2JLZXkgLSAjam9iSWQpXG5lbmRcbi0tW1tcbiAgRnVuY3Rpb24gdG8gY2hlY2sgZm9yIHRoZSBtZXRhLnBhdXNlZCBrZXkgdG8gZGVjaWRlIGlmIHdlIGFyZSBwYXVzZWQgb3Igbm90XG4gIChzaW5jZSBhbiBlbXB0eSBsaXN0IGFuZCAhRVhJU1RTIGFyZSBub3QgcmVhbGx5IHRoZSBzYW1lKS5cbl1dXG5sb2NhbCBmdW5jdGlvbiBnZXRUYXJnZXRRdWV1ZUxpc3QocXVldWVNZXRhS2V5LCBhY3RpdmVLZXksIHdhaXRLZXksIHBhdXNlZEtleSlcbiAgbG9jYWwgcXVldWVBdHRyaWJ1dGVzID0gcmNhbGwoXCJITUdFVFwiLCBxdWV1ZU1ldGFLZXksIFwicGF1c2VkXCIsIFwiY29uY3VycmVuY3lcIiwgXCJtYXhcIiwgXCJkdXJhdGlvblwiKVxuICBpZiBxdWV1ZUF0dHJpYnV0ZXNbMV0gdGhlblxuICAgIHJldHVybiBwYXVzZWRLZXksIHRydWUsIHF1ZXVlQXR0cmlidXRlc1szXSwgcXVldWVBdHRyaWJ1dGVzWzRdXG4gIGVsc2VcbiAgICBpZiBxdWV1ZUF0dHJpYnV0ZXNbMl0gdGhlblxuICAgICAgbG9jYWwgYWN0aXZlQ291bnQgPSByY2FsbChcIkxMRU5cIiwgYWN0aXZlS2V5KVxuICAgICAgaWYgYWN0aXZlQ291bnQgPj0gdG9udW1iZXIocXVldWVBdHRyaWJ1dGVzWzJdKSB0aGVuXG4gICAgICAgIHJldHVybiB3YWl0S2V5LCB0cnVlLCBxdWV1ZUF0dHJpYnV0ZXNbM10sIHF1ZXVlQXR0cmlidXRlc1s0XVxuICAgICAgZWxzZVxuICAgICAgICByZXR1cm4gd2FpdEtleSwgZmFsc2UsIHF1ZXVlQXR0cmlidXRlc1szXSwgcXVldWVBdHRyaWJ1dGVzWzRdXG4gICAgICBlbmRcbiAgICBlbmRcbiAgZW5kXG4gIHJldHVybiB3YWl0S2V5LCBmYWxzZSwgcXVldWVBdHRyaWJ1dGVzWzNdLCBxdWV1ZUF0dHJpYnV0ZXNbNF1cbmVuZFxubG9jYWwgZnVuY3Rpb24gX21vdmVQYXJlbnRUb1dhaXQocGFyZW50UHJlZml4LCBwYXJlbnRJZCwgZW1pdEV2ZW50KVxuICBsb2NhbCBwYXJlbnRUYXJnZXQsIGlzUGF1c2VkT3JNYXhlZCA9IGdldFRhcmdldFF1ZXVlTGlzdChwYXJlbnRQcmVmaXggLi4gXCJtZXRhXCIsIHBhcmVudFByZWZpeCAuLiBcImFjdGl2ZVwiLFxuICAgIHBhcmVudFByZWZpeCAuLiBcIndhaXRcIiwgcGFyZW50UHJlZml4IC4uIFwicGF1c2VkXCIpXG4gIGFkZEpvYkluVGFyZ2V0TGlzdChwYXJlbnRUYXJnZXQsIHBhcmVudFByZWZpeCAuLiBcIm1hcmtlclwiLCBcIlJQVVNIXCIsIGlzUGF1c2VkT3JNYXhlZCwgcGFyZW50SWQpXG4gIGlmIGVtaXRFdmVudCB0aGVuXG4gICAgbG9jYWwgcGFyZW50RXZlbnRTdHJlYW0gPSBwYXJlbnRQcmVmaXggLi4gXCJldmVudHNcIlxuICAgIHJjYWxsKFwiWEFERFwiLCBwYXJlbnRFdmVudFN0cmVhbSwgXCIqXCIsIFwiZXZlbnRcIiwgXCJ3YWl0aW5nXCIsIFwiam9iSWRcIiwgcGFyZW50SWQsIFwicHJldlwiLCBcIndhaXRpbmctY2hpbGRyZW5cIilcbiAgZW5kXG5lbmRcbmxvY2FsIGZ1bmN0aW9uIHJlbW92ZVBhcmVudERlcGVuZGVuY3lLZXkoam9iS2V5LCBoYXJkLCBwYXJlbnRLZXksIGJhc2VLZXksIGRlYm91bmNlSWQpXG4gIGlmIHBhcmVudEtleSB0aGVuXG4gICAgbG9jYWwgcGFyZW50RGVwZW5kZW5jaWVzS2V5ID0gcGFyZW50S2V5IC4uIFwiOmRlcGVuZGVuY2llc1wiXG4gICAgbG9jYWwgcmVzdWx0ID0gcmNhbGwoXCJTUkVNXCIsIHBhcmVudERlcGVuZGVuY2llc0tleSwgam9iS2V5KVxuICAgIGlmIHJlc3VsdCA+IDAgdGhlblxuICAgICAgbG9jYWwgcGVuZGluZ0RlcGVuZGVuY2llcyA9IHJjYWxsKFwiU0NBUkRcIiwgcGFyZW50RGVwZW5kZW5jaWVzS2V5KVxuICAgICAgaWYgcGVuZGluZ0RlcGVuZGVuY2llcyA9PSAwIHRoZW5cbiAgICAgICAgbG9jYWwgcGFyZW50SWQgPSBnZXRKb2JJZEZyb21LZXkocGFyZW50S2V5KVxuICAgICAgICBsb2NhbCBwYXJlbnRQcmVmaXggPSBnZXRKb2JLZXlQcmVmaXgocGFyZW50S2V5LCBwYXJlbnRJZClcbiAgICAgICAgbG9jYWwgbnVtUmVtb3ZlZEVsZW1lbnRzID0gcmNhbGwoXCJaUkVNXCIsIHBhcmVudFByZWZpeCAuLiBcIndhaXRpbmctY2hpbGRyZW5cIiwgcGFyZW50SWQpXG4gICAgICAgIGlmIG51bVJlbW92ZWRFbGVtZW50cyA9PSAxIHRoZW5cbiAgICAgICAgICBpZiBoYXJkIHRoZW4gLS0gcmVtb3ZlIHBhcmVudCBpbiBzYW1lIHF1ZXVlXG4gICAgICAgICAgICBpZiBwYXJlbnRQcmVmaXggPT0gYmFzZUtleSB0aGVuXG4gICAgICAgICAgICAgIHJlbW92ZVBhcmVudERlcGVuZGVuY3lLZXkocGFyZW50S2V5LCBoYXJkLCBuaWwsIGJhc2VLZXksIG5pbClcbiAgICAgICAgICAgICAgcmVtb3ZlSm9iS2V5cyhwYXJlbnRLZXkpXG4gICAgICAgICAgICAgIGlmIGRlYm91bmNlSWQgdGhlblxuICAgICAgICAgICAgICAgIHJjYWxsKFwiREVMXCIsIHBhcmVudFByZWZpeCAuLiBcImRlOlwiIC4uIGRlYm91bmNlSWQpXG4gICAgICAgICAgICAgIGVuZFxuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICBfbW92ZVBhcmVudFRvV2FpdChwYXJlbnRQcmVmaXgsIHBhcmVudElkKVxuICAgICAgICAgICAgZW5kXG4gICAgICAgICAgZWxzZVxuICAgICAgICAgICAgX21vdmVQYXJlbnRUb1dhaXQocGFyZW50UHJlZml4LCBwYXJlbnRJZCwgdHJ1ZSlcbiAgICAgICAgICBlbmRcbiAgICAgICAgZW5kXG4gICAgICBlbmRcbiAgICAgIHJldHVybiB0cnVlXG4gICAgZW5kXG4gIGVsc2VcbiAgICBsb2NhbCBwYXJlbnRBdHRyaWJ1dGVzID0gcmNhbGwoXCJITUdFVFwiLCBqb2JLZXksIFwicGFyZW50S2V5XCIsIFwiZGVpZFwiKVxuICAgIGxvY2FsIG1pc3NlZFBhcmVudEtleSA9IHBhcmVudEF0dHJpYnV0ZXNbMV1cbiAgICBpZiggKHR5cGUobWlzc2VkUGFyZW50S2V5KSA9PSBcInN0cmluZ1wiKSBhbmQgbWlzc2VkUGFyZW50S2V5IH49IFwiXCJcbiAgICAgIGFuZCAocmNhbGwoXCJFWElTVFNcIiwgbWlzc2VkUGFyZW50S2V5KSA9PSAxKSkgdGhlblxuICAgICAgbG9jYWwgcGFyZW50RGVwZW5kZW5jaWVzS2V5ID0gbWlzc2VkUGFyZW50S2V5IC4uIFwiOmRlcGVuZGVuY2llc1wiXG4gICAgICBsb2NhbCByZXN1bHQgPSByY2FsbChcIlNSRU1cIiwgcGFyZW50RGVwZW5kZW5jaWVzS2V5LCBqb2JLZXkpXG4gICAgICBpZiByZXN1bHQgPiAwIHRoZW5cbiAgICAgICAgbG9jYWwgcGVuZGluZ0RlcGVuZGVuY2llcyA9IHJjYWxsKFwiU0NBUkRcIiwgcGFyZW50RGVwZW5kZW5jaWVzS2V5KVxuICAgICAgICBpZiBwZW5kaW5nRGVwZW5kZW5jaWVzID09IDAgdGhlblxuICAgICAgICAgIGxvY2FsIHBhcmVudElkID0gZ2V0Sm9iSWRGcm9tS2V5KG1pc3NlZFBhcmVudEtleSlcbiAgICAgICAgICBsb2NhbCBwYXJlbnRQcmVmaXggPSBnZXRKb2JLZXlQcmVmaXgobWlzc2VkUGFyZW50S2V5LCBwYXJlbnRJZClcbiAgICAgICAgICBsb2NhbCBudW1SZW1vdmVkRWxlbWVudHMgPSByY2FsbChcIlpSRU1cIiwgcGFyZW50UHJlZml4IC4uIFwid2FpdGluZy1jaGlsZHJlblwiLCBwYXJlbnRJZClcbiAgICAgICAgICBpZiBudW1SZW1vdmVkRWxlbWVudHMgPT0gMSB0aGVuXG4gICAgICAgICAgICBpZiBoYXJkIHRoZW5cbiAgICAgICAgICAgICAgaWYgcGFyZW50UHJlZml4ID09IGJhc2VLZXkgdGhlblxuICAgICAgICAgICAgICAgIHJlbW92ZVBhcmVudERlcGVuZGVuY3lLZXkobWlzc2VkUGFyZW50S2V5LCBoYXJkLCBuaWwsIGJhc2VLZXksIG5pbClcbiAgICAgICAgICAgICAgICByZW1vdmVKb2JLZXlzKG1pc3NlZFBhcmVudEtleSlcbiAgICAgICAgICAgICAgICBpZiBwYXJlbnRBdHRyaWJ1dGVzWzJdIHRoZW5cbiAgICAgICAgICAgICAgICAgIHJjYWxsKFwiREVMXCIsIHBhcmVudFByZWZpeCAuLiBcImRlOlwiIC4uIHBhcmVudEF0dHJpYnV0ZXNbMl0pXG4gICAgICAgICAgICAgICAgZW5kXG4gICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBfbW92ZVBhcmVudFRvV2FpdChwYXJlbnRQcmVmaXgsIHBhcmVudElkKVxuICAgICAgICAgICAgICBlbmRcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgX21vdmVQYXJlbnRUb1dhaXQocGFyZW50UHJlZml4LCBwYXJlbnRJZCwgdHJ1ZSlcbiAgICAgICAgICAgIGVuZFxuICAgICAgICAgIGVuZFxuICAgICAgICBlbmRcbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgIGVuZFxuICAgIGVuZFxuICBlbmRcbiAgcmV0dXJuIGZhbHNlXG5lbmRcbmxvY2FsIGZ1bmN0aW9uIHJlbW92ZUpvYihqb2JJZCwgaGFyZCwgYmFzZUtleSwgc2hvdWxkUmVtb3ZlRGVkdXBsaWNhdGlvbktleSlcbiAgbG9jYWwgam9iS2V5ID0gYmFzZUtleSAuLiBqb2JJZFxuICByZW1vdmVQYXJlbnREZXBlbmRlbmN5S2V5KGpvYktleSwgaGFyZCwgbmlsLCBiYXNlS2V5KVxuICBpZiBzaG91bGRSZW1vdmVEZWR1cGxpY2F0aW9uS2V5IHRoZW5cbiAgICByZW1vdmVEZWR1cGxpY2F0aW9uS2V5SWZOZWVkZWRPblJlbW92YWwoYmFzZUtleSwgam9iS2V5LCBqb2JJZClcbiAgZW5kXG4gIHJlbW92ZUpvYktleXMoam9iS2V5KVxuZW5kXG5sb2NhbCBmdW5jdGlvbiBjbGVhbkxpc3QobGlzdEtleSwgam9iS2V5UHJlZml4LCByYW5nZVN0YXJ0LCByYW5nZUVuZCxcbiAgdGltZXN0YW1wLCBpc1dhaXRpbmcsIGpvYlNjaGVkdWxlcnNLZXkpXG4gIGxvY2FsIGpvYnMgPSByY2FsbChcIkxSQU5HRVwiLCBsaXN0S2V5LCByYW5nZVN0YXJ0LCByYW5nZUVuZClcbiAgbG9jYWwgZGVsZXRlZCA9IHt9XG4gIGxvY2FsIGRlbGV0ZWRDb3VudCA9IDBcbiAgbG9jYWwgam9iVFNcbiAgbG9jYWwgZGVsZXRpb25NYXJrZXIgPSAnJ1xuICBsb2NhbCBqb2JJZHNMZW4gPSAjam9ic1xuICBmb3IgaSwgam9iIGluIGlwYWlycyhqb2JzKSBkb1xuICAgIGlmIGxpbWl0ID4gMCBhbmQgZGVsZXRlZENvdW50ID49IGxpbWl0IHRoZW5cbiAgICAgIGJyZWFrXG4gICAgZW5kXG4gICAgbG9jYWwgam9iS2V5ID0gam9iS2V5UHJlZml4IC4uIGpvYlxuICAgIGlmIChpc1dhaXRpbmcgb3IgcmNhbGwoXCJFWElTVFNcIiwgam9iS2V5IC4uIFwiOmxvY2tcIikgPT0gMCkgYW5kXG4gICAgICBub3QgaXNKb2JTY2hlZHVsZXJKb2Ioam9iLCBqb2JLZXksIGpvYlNjaGVkdWxlcnNLZXkpIHRoZW5cbiAgICAgIC0tIEZpbmQgdGhlIHJpZ2h0IHRpbWVzdGFtcCBvZiB0aGUgam9iIHRvIGNvbXBhcmUgdG8gbWF4VGltZXN0YW1wOlxuICAgICAgLS0gKiBmaW5pc2hlZE9uIHNheXMgd2hlbiB0aGUgam9iIHdhcyBjb21wbGV0ZWQsIGJ1dCBpdCBpc24ndCBzZXQgdW5sZXNzIHRoZSBqb2IgaGFzIGFjdHVhbGx5IGNvbXBsZXRlZFxuICAgICAgLS0gKiBwcm9jZXNzZWRPbiByZXByZXNlbnRzIHdoZW4gdGhlIGpvYiB3YXMgbGFzdCBhdHRlbXB0ZWQsIGJ1dCBpdCBkb2Vzbid0IGdldCBwb3B1bGF0ZWQgdW50aWxcbiAgICAgIC0tICAgdGhlIGpvYiBpcyBmaXJzdCB0cmllZFxuICAgICAgLS0gKiB0aW1lc3RhbXAgaXMgdGhlIG9yaWdpbmFsIGpvYiBzdWJtaXNzaW9uIHRpbWVcbiAgICAgIC0tIEZldGNoIGFsbCB0aHJlZSBvZiB0aGVzZSAoaW4gdGhhdCBvcmRlcikgYW5kIHVzZSB0aGUgZmlyc3Qgb25lIHRoYXQgaXMgc2V0IHNvIHRoYXQgd2UnbGwgbGVhdmUgam9ic1xuICAgICAgLS0gdGhhdCBoYXZlIGJlZW4gYWN0aXZlIHdpdGhpbiB0aGUgZ3JhY2UgcGVyaW9kOlxuICAgICAgam9iVFMgPSBnZXRUaW1lc3RhbXAoam9iS2V5LCB7XCJmaW5pc2hlZE9uXCIsIFwicHJvY2Vzc2VkT25cIiwgXCJ0aW1lc3RhbXBcIn0pXG4gICAgICBpZiAobm90IGpvYlRTIG9yIGpvYlRTIDw9IHRpbWVzdGFtcCkgdGhlblxuICAgICAgICAtLSByZXBsYWNlIHRoZSBlbnRyeSB3aXRoIGEgZGVsZXRpb24gbWFya2VyOyB0aGUgYWN0dWFsIGRlbGV0aW9uIHdpbGxcbiAgICAgICAgLS0gb2NjdXIgYXQgdGhlIGVuZCBvZiB0aGUgc2NyaXB0XG4gICAgICAgIHJjYWxsKFwiTFNFVFwiLCBsaXN0S2V5LCByYW5nZUVuZCAtIGpvYklkc0xlbiArIGksIGRlbGV0aW9uTWFya2VyKVxuICAgICAgICByZW1vdmVKb2Ioam9iLCB0cnVlLCBqb2JLZXlQcmVmaXgsIHRydWUgLS1bW3JlbW92ZSBkZWJvdW5jZSBrZXldXSlcbiAgICAgICAgZGVsZXRlZENvdW50ID0gZGVsZXRlZENvdW50ICsgMVxuICAgICAgICB0YWJsZS5pbnNlcnQoZGVsZXRlZCwgam9iKVxuICAgICAgZW5kXG4gICAgZW5kXG4gIGVuZFxuICByY2FsbChcIkxSRU1cIiwgbGlzdEtleSwgMCwgZGVsZXRpb25NYXJrZXIpXG4gIHJldHVybiB7ZGVsZXRlZCwgZGVsZXRlZENvdW50fVxuZW5kXG4tLVtbXG4gIEZ1bmN0aW9uIHRvIGNsZWFuIGpvYiBzZXQuXG4gIFJldHVybnMgam9iSWRzIGFuZCBkZWxldGVkIGNvdW50IG51bWJlci5cbl1dIFxuLS0gSW5jbHVkZXNcbi0tW1tcbiAgRnVuY3Rpb24gdG8gbG9vcCBpbiBiYXRjaGVzLlxuICBKdXN0IGEgYml0IG9mIHdhcm5pbmcsIHNvbWUgY29tbWFuZHMgYXMgWlJFTVxuICBjb3VsZCByZWNlaXZlIGEgbWF4aW11bSBvZiA3MDAwIHBhcmFtZXRlcnMgcGVyIGNhbGwuXG5dXVxubG9jYWwgZnVuY3Rpb24gYmF0Y2hlcyhuLCBiYXRjaFNpemUpXG4gIGxvY2FsIGkgPSAwXG4gIHJldHVybiBmdW5jdGlvbigpXG4gICAgbG9jYWwgZnJvbSA9IGkgKiBiYXRjaFNpemUgKyAxXG4gICAgaSA9IGkgKyAxXG4gICAgaWYgKGZyb20gPD0gbikgdGhlblxuICAgICAgbG9jYWwgdG8gPSBtYXRoLm1pbihmcm9tICsgYmF0Y2hTaXplIC0gMSwgbilcbiAgICAgIHJldHVybiBmcm9tLCB0b1xuICAgIGVuZFxuICBlbmRcbmVuZFxuLS1bW1xuICBXZSB1c2UgWlJBTkdFQllTQ09SRSB0byBtYWtlIHRoZSBjYXNlIHdoZXJlIHdlJ3JlIGRlbGV0aW5nIGEgbGltaXRlZCBudW1iZXJcbiAgb2YgaXRlbXMgaW4gYSBzb3J0ZWQgc2V0IG9ubHkgcnVuIGEgc2luZ2xlIGl0ZXJhdGlvbi4gSWYgd2Ugc2ltcGx5IHVzZWRcbiAgWlJBTkdFLCB3ZSBtYXkgdGFrZSBhIGxvbmcgdGltZSB0cmF2ZXJzaW5nIHRocm91Z2ggam9icyB0aGF0IGFyZSB3aXRoaW4gdGhlXG4gIGdyYWNlIHBlcmlvZC5cbl1dXG5sb2NhbCBmdW5jdGlvbiBnZXRKb2JzSW5ac2V0KHpzZXRLZXksIHJhbmdlRW5kLCBsaW1pdClcbiAgaWYgbGltaXQgPiAwIHRoZW5cbiAgICByZXR1cm4gcmNhbGwoXCJaUkFOR0VCWVNDT1JFXCIsIHpzZXRLZXksIDAsIHJhbmdlRW5kLCBcIkxJTUlUXCIsIDAsIGxpbWl0KVxuICBlbHNlXG4gICAgcmV0dXJuIHJjYWxsKFwiWlJBTkdFQllTQ09SRVwiLCB6c2V0S2V5LCAwLCByYW5nZUVuZClcbiAgZW5kXG5lbmRcbmxvY2FsIGZ1bmN0aW9uIGNsZWFuU2V0KFxuICAgIHNldEtleSxcbiAgICBqb2JLZXlQcmVmaXgsXG4gICAgcmFuZ2VFbmQsXG4gICAgdGltZXN0YW1wLFxuICAgIGxpbWl0LFxuICAgIGF0dHJpYnV0ZXMsXG4gICAgaXNGaW5pc2hlZCxcbiAgICBqb2JTY2hlZHVsZXJzS2V5KVxuICAgIGxvY2FsIGpvYnMgPSBnZXRKb2JzSW5ac2V0KHNldEtleSwgcmFuZ2VFbmQsIGxpbWl0KVxuICAgIGxvY2FsIGRlbGV0ZWQgPSB7fVxuICAgIGxvY2FsIGRlbGV0ZWRDb3VudCA9IDBcbiAgICBsb2NhbCBqb2JUU1xuICAgIGZvciBpLCBqb2IgaW4gaXBhaXJzKGpvYnMpIGRvXG4gICAgICAgIGlmIGxpbWl0ID4gMCBhbmQgZGVsZXRlZENvdW50ID49IGxpbWl0IHRoZW5cbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgIGVuZFxuICAgICAgICBsb2NhbCBqb2JLZXkgPSBqb2JLZXlQcmVmaXggLi4gam9iXG4gICAgICAgIC0tIEV4dHJhY3QgYSBKb2IgU2NoZWR1bGVyIElkIGZyb20gam9iSWQgKFwicmVwZWF0OmpvYi1zY2hlZHVsZXItaWQ6bWlsbGlzXCIpIFxuICAgICAgICAtLSBhbmQgY2hlY2sgaWYgaXQgaXMgaW4gdGhlIHNjaGVkdWxlZCBqb2JzXG4gICAgICAgIGlmIG5vdCAoam9iU2NoZWR1bGVyc0tleSBhbmQgaXNKb2JTY2hlZHVsZXJKb2Ioam9iLCBqb2JLZXksIGpvYlNjaGVkdWxlcnNLZXkpKSB0aGVuXG4gICAgICAgICAgICBpZiBpc0ZpbmlzaGVkIHRoZW5cbiAgICAgICAgICAgICAgICByZW1vdmVKb2Ioam9iLCB0cnVlLCBqb2JLZXlQcmVmaXgsIHRydWUgLS1bW3JlbW92ZSBkZWJvdW5jZSBrZXldXSApXG4gICAgICAgICAgICAgICAgZGVsZXRlZENvdW50ID0gZGVsZXRlZENvdW50ICsgMVxuICAgICAgICAgICAgICAgIHRhYmxlLmluc2VydChkZWxldGVkLCBqb2IpXG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgLS0gKiBmaW5pc2hlZE9uIHNheXMgd2hlbiB0aGUgam9iIHdhcyBjb21wbGV0ZWQsIGJ1dCBpdCBpc24ndCBzZXQgdW5sZXNzIHRoZSBqb2IgaGFzIGFjdHVhbGx5IGNvbXBsZXRlZFxuICAgICAgICAgICAgICAgIGpvYlRTID0gZ2V0VGltZXN0YW1wKGpvYktleSwgYXR0cmlidXRlcylcbiAgICAgICAgICAgICAgICBpZiAobm90IGpvYlRTIG9yIGpvYlRTIDw9IHRpbWVzdGFtcCkgdGhlblxuICAgICAgICAgICAgICAgICAgICByZW1vdmVKb2Ioam9iLCB0cnVlLCBqb2JLZXlQcmVmaXgsIHRydWUgLS1bW3JlbW92ZSBkZWJvdW5jZSBrZXldXSApXG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZWRDb3VudCA9IGRlbGV0ZWRDb3VudCArIDFcbiAgICAgICAgICAgICAgICAgICAgdGFibGUuaW5zZXJ0KGRlbGV0ZWQsIGpvYilcbiAgICAgICAgICAgICAgICBlbmRcbiAgICAgICAgICAgIGVuZFxuICAgICAgICBlbmRcbiAgICBlbmRcbiAgICBpZiAoI2RlbGV0ZWQgPiAwKSB0aGVuXG4gICAgICAgIGZvciBmcm9tLCB0byBpbiBiYXRjaGVzKCNkZWxldGVkLCA3MDAwKSBkb1xuICAgICAgICAgICAgcmNhbGwoXCJaUkVNXCIsIHNldEtleSwgdW5wYWNrKGRlbGV0ZWQsIGZyb20sIHRvKSlcbiAgICAgICAgZW5kXG4gICAgZW5kXG4gICAgcmV0dXJuIHtkZWxldGVkLCBkZWxldGVkQ291bnR9XG5lbmRcbmxvY2FsIHJlc3VsdFxuaWYgQVJHVls0XSA9PSBcImFjdGl2ZVwiIHRoZW5cbiAgcmVzdWx0ID0gY2xlYW5MaXN0KEtFWVNbMV0sIEFSR1ZbMV0sIHJhbmdlU3RhcnQsIHJhbmdlRW5kLCBBUkdWWzJdLCBmYWxzZSAtLVtbIGhhc0ZpbmlzaGVkIF1dLFxuICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdEtleSlcbmVsc2VpZiBBUkdWWzRdID09IFwiZGVsYXllZFwiIHRoZW5cbiAgcmFuZ2VFbmQgPSBcIitpbmZcIlxuICByZXN1bHQgPSBjbGVhblNldChLRVlTWzFdLCBBUkdWWzFdLCByYW5nZUVuZCwgQVJHVlsyXSwgbGltaXQsXG4gICAgICAgICAgICAgICAgICAgIHtcInByb2Nlc3NlZE9uXCIsIFwidGltZXN0YW1wXCJ9LCBmYWxzZSAgLS1bWyBoYXNGaW5pc2hlZCBdXSwgcmVwZWF0S2V5KVxuZWxzZWlmIEFSR1ZbNF0gPT0gXCJwcmlvcml0aXplZFwiIHRoZW5cbiAgcmFuZ2VFbmQgPSBcIitpbmZcIlxuICByZXN1bHQgPSBjbGVhblNldChLRVlTWzFdLCBBUkdWWzFdLCByYW5nZUVuZCwgQVJHVlsyXSwgbGltaXQsXG4gICAgICAgICAgICAgICAgICAgIHtcInRpbWVzdGFtcFwifSwgZmFsc2UgIC0tW1sgaGFzRmluaXNoZWQgXV0sIHJlcGVhdEtleSlcbmVsc2VpZiBBUkdWWzRdID09IFwid2FpdFwiIG9yIEFSR1ZbNF0gPT0gXCJwYXVzZWRcIiB0aGVuXG4gIHJlc3VsdCA9IGNsZWFuTGlzdChLRVlTWzFdLCBBUkdWWzFdLCByYW5nZVN0YXJ0LCByYW5nZUVuZCwgQVJHVlsyXSwgdHJ1ZSAtLVtbIGhhc0ZpbmlzaGVkIF1dLFxuICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdEtleSlcbmVsc2VcbiAgcmFuZ2VFbmQgPSBBUkdWWzJdXG4gIC0tIE5vIG5lZWQgdG8gcGFzcyByZXBlYXQga2V5IGFzIGluIHRoYXQgbW9tZW50IGpvYiB3b24ndCBiZSByZWxhdGVkIHRvIGEgam9iIHNjaGVkdWxlclxuICByZXN1bHQgPSBjbGVhblNldChLRVlTWzFdLCBBUkdWWzFdLCByYW5nZUVuZCwgQVJHVlsyXSwgbGltaXQsXG4gICAgICAgICAgICAgICAgICAgIHtcImZpbmlzaGVkT25cIn0sIHRydWUgIC0tW1sgaGFzRmluaXNoZWQgXV0pXG5lbmRcbnJjYWxsKFwiWEFERFwiLCBLRVlTWzJdLCBcIipcIiwgXCJldmVudFwiLCBcImNsZWFuZWRcIiwgXCJjb3VudFwiLCByZXN1bHRbMl0pXG5yZXR1cm4gcmVzdWx0WzFdXG5gO1xuZXhwb3J0cy5jbGVhbkpvYnNJblNldCA9IHtcbiAgICBuYW1lOiAnY2xlYW5Kb2JzSW5TZXQnLFxuICAgIGNvbnRlbnQsXG4gICAga2V5czogMyxcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jbGVhbkpvYnNJblNldC0zLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsImNsZWFuSm9ic0luU2V0IiwiY29udGVudCIsIm5hbWUiLCJrZXlzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/scripts/cleanJobsInSet-3.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/scripts/drain-5.js":
/*!*********************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/scripts/drain-5.js ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.drain = void 0;\nconst content = `--[[\n  Drains the queue, removes all jobs that are waiting\n  or delayed, but not active, completed or failed\n  Input:\n    KEYS[1] 'wait',\n    KEYS[2] 'paused'\n    KEYS[3] 'delayed'\n    KEYS[4] 'prioritized'\n    KEYS[5] 'jobschedulers' (repeat)\n    ARGV[1]  queue key prefix\n    ARGV[2]  should clean delayed jobs\n]]\nlocal rcall = redis.call\nlocal queueBaseKey = ARGV[1]\n--[[\n  Functions to remove jobs.\n]]\n-- Includes\n--[[\n  Function to filter out jobs to ignore from a table.\n]]\nlocal function filterOutJobsToIgnore(jobs, jobsToIgnore)\n  local filteredJobs = {}\n  for i = 1, #jobs do\n    if not jobsToIgnore[jobs[i]] then\n      table.insert(filteredJobs, jobs[i])\n    end\n  end\n  return filteredJobs\nend\n--[[\n  Functions to remove jobs.\n]]\n-- Includes\n--[[\n  Function to remove job.\n]]\n-- Includes\n--[[\n  Function to remove deduplication key if needed\n  when a job is being removed.\n]]\nlocal function removeDeduplicationKeyIfNeededOnRemoval(prefixKey,\n  jobKey, jobId)\n  local deduplicationId = rcall(\"HGET\", jobKey, \"deid\")\n  if deduplicationId then\n    local deduplicationKey = prefixKey .. \"de:\" .. deduplicationId\n    local currentJobId = rcall('GET', deduplicationKey)\n    if currentJobId and currentJobId == jobId then\n      return rcall(\"DEL\", deduplicationKey)\n    end\n  end\nend\n--[[\n  Function to remove job keys.\n]]\nlocal function removeJobKeys(jobKey)\n  return rcall(\"DEL\", jobKey, jobKey .. ':logs', jobKey .. ':dependencies',\n    jobKey .. ':processed', jobKey .. ':failed', jobKey .. ':unsuccessful')\nend\n--[[\n  Check if this job has a parent. If so we will just remove it from\n  the parent child list, but if it is the last child we should move the parent to \"wait/paused\"\n  which requires code from \"moveToFinished\"\n]]\n-- Includes\n--[[\n  Function to add job in target list and add marker if needed.\n]]\n-- Includes\n--[[\n  Add marker if needed when a job is available.\n]]\nlocal function addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)\n  if not isPausedOrMaxed then\n    rcall(\"ZADD\", markerKey, 0, \"0\")\n  end  \nend\nlocal function addJobInTargetList(targetKey, markerKey, pushCmd, isPausedOrMaxed, jobId)\n  rcall(pushCmd, targetKey, jobId)\n  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)\nend\n--[[\n  Functions to destructure job key.\n  Just a bit of warning, these functions may be a bit slow and affect performance significantly.\n]]\nlocal getJobIdFromKey = function (jobKey)\n  return string.match(jobKey, \".*:(.*)\")\nend\nlocal getJobKeyPrefix = function (jobKey, jobId)\n  return string.sub(jobKey, 0, #jobKey - #jobId)\nend\n--[[\n  Function to check for the meta.paused key to decide if we are paused or not\n  (since an empty list and !EXISTS are not really the same).\n]]\nlocal function getTargetQueueList(queueMetaKey, activeKey, waitKey, pausedKey)\n  local queueAttributes = rcall(\"HMGET\", queueMetaKey, \"paused\", \"concurrency\", \"max\", \"duration\")\n  if queueAttributes[1] then\n    return pausedKey, true, queueAttributes[3], queueAttributes[4]\n  else\n    if queueAttributes[2] then\n      local activeCount = rcall(\"LLEN\", activeKey)\n      if activeCount >= tonumber(queueAttributes[2]) then\n        return waitKey, true, queueAttributes[3], queueAttributes[4]\n      else\n        return waitKey, false, queueAttributes[3], queueAttributes[4]\n      end\n    end\n  end\n  return waitKey, false, queueAttributes[3], queueAttributes[4]\nend\nlocal function _moveParentToWait(parentPrefix, parentId, emitEvent)\n  local parentTarget, isPausedOrMaxed = getTargetQueueList(parentPrefix .. \"meta\", parentPrefix .. \"active\",\n    parentPrefix .. \"wait\", parentPrefix .. \"paused\")\n  addJobInTargetList(parentTarget, parentPrefix .. \"marker\", \"RPUSH\", isPausedOrMaxed, parentId)\n  if emitEvent then\n    local parentEventStream = parentPrefix .. \"events\"\n    rcall(\"XADD\", parentEventStream, \"*\", \"event\", \"waiting\", \"jobId\", parentId, \"prev\", \"waiting-children\")\n  end\nend\nlocal function removeParentDependencyKey(jobKey, hard, parentKey, baseKey, debounceId)\n  if parentKey then\n    local parentDependenciesKey = parentKey .. \":dependencies\"\n    local result = rcall(\"SREM\", parentDependenciesKey, jobKey)\n    if result > 0 then\n      local pendingDependencies = rcall(\"SCARD\", parentDependenciesKey)\n      if pendingDependencies == 0 then\n        local parentId = getJobIdFromKey(parentKey)\n        local parentPrefix = getJobKeyPrefix(parentKey, parentId)\n        local numRemovedElements = rcall(\"ZREM\", parentPrefix .. \"waiting-children\", parentId)\n        if numRemovedElements == 1 then\n          if hard then -- remove parent in same queue\n            if parentPrefix == baseKey then\n              removeParentDependencyKey(parentKey, hard, nil, baseKey, nil)\n              removeJobKeys(parentKey)\n              if debounceId then\n                rcall(\"DEL\", parentPrefix .. \"de:\" .. debounceId)\n              end\n            else\n              _moveParentToWait(parentPrefix, parentId)\n            end\n          else\n            _moveParentToWait(parentPrefix, parentId, true)\n          end\n        end\n      end\n      return true\n    end\n  else\n    local parentAttributes = rcall(\"HMGET\", jobKey, \"parentKey\", \"deid\")\n    local missedParentKey = parentAttributes[1]\n    if( (type(missedParentKey) == \"string\") and missedParentKey ~= \"\"\n      and (rcall(\"EXISTS\", missedParentKey) == 1)) then\n      local parentDependenciesKey = missedParentKey .. \":dependencies\"\n      local result = rcall(\"SREM\", parentDependenciesKey, jobKey)\n      if result > 0 then\n        local pendingDependencies = rcall(\"SCARD\", parentDependenciesKey)\n        if pendingDependencies == 0 then\n          local parentId = getJobIdFromKey(missedParentKey)\n          local parentPrefix = getJobKeyPrefix(missedParentKey, parentId)\n          local numRemovedElements = rcall(\"ZREM\", parentPrefix .. \"waiting-children\", parentId)\n          if numRemovedElements == 1 then\n            if hard then\n              if parentPrefix == baseKey then\n                removeParentDependencyKey(missedParentKey, hard, nil, baseKey, nil)\n                removeJobKeys(missedParentKey)\n                if parentAttributes[2] then\n                  rcall(\"DEL\", parentPrefix .. \"de:\" .. parentAttributes[2])\n                end\n              else\n                _moveParentToWait(parentPrefix, parentId)\n              end\n            else\n              _moveParentToWait(parentPrefix, parentId, true)\n            end\n          end\n        end\n        return true\n      end\n    end\n  end\n  return false\nend\nlocal function removeJob(jobId, hard, baseKey, shouldRemoveDeduplicationKey)\n  local jobKey = baseKey .. jobId\n  removeParentDependencyKey(jobKey, hard, nil, baseKey)\n  if shouldRemoveDeduplicationKey then\n    removeDeduplicationKeyIfNeededOnRemoval(baseKey, jobKey, jobId)\n  end\n  removeJobKeys(jobKey)\nend\nlocal function removeJobs(keys, hard, baseKey, max)\n  for i, key in ipairs(keys) do\n    removeJob(key, hard, baseKey, true --[[remove debounce key]])\n  end\n  return max - #keys\nend\nlocal function getListItems(keyName, max)\n  return rcall('LRANGE', keyName, 0, max - 1)\nend\nlocal function removeListJobs(keyName, hard, baseKey, max, jobsToIgnore)\n  local jobs = getListItems(keyName, max)\n  if jobsToIgnore then\n    jobs = filterOutJobsToIgnore(jobs, jobsToIgnore)\n  end\n  local count = removeJobs(jobs, hard, baseKey, max)\n  rcall(\"LTRIM\", keyName, #jobs, -1)\n  return count\nend\n-- Includes\n--[[\n  Function to loop in batches.\n  Just a bit of warning, some commands as ZREM\n  could receive a maximum of 7000 parameters per call.\n]]\nlocal function batches(n, batchSize)\n  local i = 0\n  return function()\n    local from = i * batchSize + 1\n    i = i + 1\n    if (from <= n) then\n      local to = math.min(from + batchSize - 1, n)\n      return from, to\n    end\n  end\nend\n--[[\n  Function to get ZSet items.\n]]\nlocal function getZSetItems(keyName, max)\n  return rcall('ZRANGE', keyName, 0, max - 1)\nend\nlocal function removeZSetJobs(keyName, hard, baseKey, max, jobsToIgnore)\n  local jobs = getZSetItems(keyName, max)\n  if jobsToIgnore then\n    jobs = filterOutJobsToIgnore(jobs, jobsToIgnore)\n  end\n  local count = removeJobs(jobs, hard, baseKey, max)\n  if(#jobs > 0) then\n    for from, to in batches(#jobs, 7000) do\n      rcall(\"ZREM\", keyName, unpack(jobs, from, to))\n    end\n  end\n  return count\nend\n-- We must not remove delayed jobs if they are associated to a job scheduler.\nlocal scheduledJobs = {}\nlocal jobSchedulers = rcall(\"ZRANGE\", KEYS[5], 0, -1, \"WITHSCORES\")\n-- For every job scheduler, get the current delayed job id.\nfor i = 1, #jobSchedulers, 2 do\n    local jobSchedulerId = jobSchedulers[i]\n    local jobSchedulerMillis = jobSchedulers[i + 1]\n    local delayedJobId = \"repeat:\" .. jobSchedulerId .. \":\" .. jobSchedulerMillis\n    scheduledJobs[delayedJobId] = true\nend\nremoveListJobs(KEYS[1], true, queueBaseKey, 0, scheduledJobs) -- wait\nremoveListJobs(KEYS[2], true, queueBaseKey, 0, scheduledJobs) -- paused\nif ARGV[2] == \"1\" then\n  removeZSetJobs(KEYS[3], true, queueBaseKey, 0, scheduledJobs) -- delayed\nend\nremoveZSetJobs(KEYS[4], true, queueBaseKey, 0, scheduledJobs) -- prioritized\n`;\nexports.drain = {\n    name: \"drain\",\n    content,\n    keys: 5\n}; //# sourceMappingURL=drain-5.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL3NjcmlwdHMvZHJhaW4tNS5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsYUFBYSxHQUFHLEtBQUs7QUFDckIsTUFBTUcsVUFBVSxDQUFDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBc1FqQixDQUFDO0FBQ0RILGFBQWEsR0FBRztJQUNaSSxNQUFNO0lBQ05EO0lBQ0FFLE1BQU07QUFDVixHQUNBLG1DQUFtQyIsInNvdXJjZXMiOlsid2VicGFjazovL29ubHlmYW5zLXBsYXRmb3JtLy4vbm9kZV9tb2R1bGVzL2J1bGxtcS9kaXN0L2Nqcy9zY3JpcHRzL2RyYWluLTUuanM/YWFhNCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuZHJhaW4gPSB2b2lkIDA7XG5jb25zdCBjb250ZW50ID0gYC0tW1tcbiAgRHJhaW5zIHRoZSBxdWV1ZSwgcmVtb3ZlcyBhbGwgam9icyB0aGF0IGFyZSB3YWl0aW5nXG4gIG9yIGRlbGF5ZWQsIGJ1dCBub3QgYWN0aXZlLCBjb21wbGV0ZWQgb3IgZmFpbGVkXG4gIElucHV0OlxuICAgIEtFWVNbMV0gJ3dhaXQnLFxuICAgIEtFWVNbMl0gJ3BhdXNlZCdcbiAgICBLRVlTWzNdICdkZWxheWVkJ1xuICAgIEtFWVNbNF0gJ3ByaW9yaXRpemVkJ1xuICAgIEtFWVNbNV0gJ2pvYnNjaGVkdWxlcnMnIChyZXBlYXQpXG4gICAgQVJHVlsxXSAgcXVldWUga2V5IHByZWZpeFxuICAgIEFSR1ZbMl0gIHNob3VsZCBjbGVhbiBkZWxheWVkIGpvYnNcbl1dXG5sb2NhbCByY2FsbCA9IHJlZGlzLmNhbGxcbmxvY2FsIHF1ZXVlQmFzZUtleSA9IEFSR1ZbMV1cbi0tW1tcbiAgRnVuY3Rpb25zIHRvIHJlbW92ZSBqb2JzLlxuXV1cbi0tIEluY2x1ZGVzXG4tLVtbXG4gIEZ1bmN0aW9uIHRvIGZpbHRlciBvdXQgam9icyB0byBpZ25vcmUgZnJvbSBhIHRhYmxlLlxuXV1cbmxvY2FsIGZ1bmN0aW9uIGZpbHRlck91dEpvYnNUb0lnbm9yZShqb2JzLCBqb2JzVG9JZ25vcmUpXG4gIGxvY2FsIGZpbHRlcmVkSm9icyA9IHt9XG4gIGZvciBpID0gMSwgI2pvYnMgZG9cbiAgICBpZiBub3Qgam9ic1RvSWdub3JlW2pvYnNbaV1dIHRoZW5cbiAgICAgIHRhYmxlLmluc2VydChmaWx0ZXJlZEpvYnMsIGpvYnNbaV0pXG4gICAgZW5kXG4gIGVuZFxuICByZXR1cm4gZmlsdGVyZWRKb2JzXG5lbmRcbi0tW1tcbiAgRnVuY3Rpb25zIHRvIHJlbW92ZSBqb2JzLlxuXV1cbi0tIEluY2x1ZGVzXG4tLVtbXG4gIEZ1bmN0aW9uIHRvIHJlbW92ZSBqb2IuXG5dXVxuLS0gSW5jbHVkZXNcbi0tW1tcbiAgRnVuY3Rpb24gdG8gcmVtb3ZlIGRlZHVwbGljYXRpb24ga2V5IGlmIG5lZWRlZFxuICB3aGVuIGEgam9iIGlzIGJlaW5nIHJlbW92ZWQuXG5dXVxubG9jYWwgZnVuY3Rpb24gcmVtb3ZlRGVkdXBsaWNhdGlvbktleUlmTmVlZGVkT25SZW1vdmFsKHByZWZpeEtleSxcbiAgam9iS2V5LCBqb2JJZClcbiAgbG9jYWwgZGVkdXBsaWNhdGlvbklkID0gcmNhbGwoXCJIR0VUXCIsIGpvYktleSwgXCJkZWlkXCIpXG4gIGlmIGRlZHVwbGljYXRpb25JZCB0aGVuXG4gICAgbG9jYWwgZGVkdXBsaWNhdGlvbktleSA9IHByZWZpeEtleSAuLiBcImRlOlwiIC4uIGRlZHVwbGljYXRpb25JZFxuICAgIGxvY2FsIGN1cnJlbnRKb2JJZCA9IHJjYWxsKCdHRVQnLCBkZWR1cGxpY2F0aW9uS2V5KVxuICAgIGlmIGN1cnJlbnRKb2JJZCBhbmQgY3VycmVudEpvYklkID09IGpvYklkIHRoZW5cbiAgICAgIHJldHVybiByY2FsbChcIkRFTFwiLCBkZWR1cGxpY2F0aW9uS2V5KVxuICAgIGVuZFxuICBlbmRcbmVuZFxuLS1bW1xuICBGdW5jdGlvbiB0byByZW1vdmUgam9iIGtleXMuXG5dXVxubG9jYWwgZnVuY3Rpb24gcmVtb3ZlSm9iS2V5cyhqb2JLZXkpXG4gIHJldHVybiByY2FsbChcIkRFTFwiLCBqb2JLZXksIGpvYktleSAuLiAnOmxvZ3MnLCBqb2JLZXkgLi4gJzpkZXBlbmRlbmNpZXMnLFxuICAgIGpvYktleSAuLiAnOnByb2Nlc3NlZCcsIGpvYktleSAuLiAnOmZhaWxlZCcsIGpvYktleSAuLiAnOnVuc3VjY2Vzc2Z1bCcpXG5lbmRcbi0tW1tcbiAgQ2hlY2sgaWYgdGhpcyBqb2IgaGFzIGEgcGFyZW50LiBJZiBzbyB3ZSB3aWxsIGp1c3QgcmVtb3ZlIGl0IGZyb21cbiAgdGhlIHBhcmVudCBjaGlsZCBsaXN0LCBidXQgaWYgaXQgaXMgdGhlIGxhc3QgY2hpbGQgd2Ugc2hvdWxkIG1vdmUgdGhlIHBhcmVudCB0byBcIndhaXQvcGF1c2VkXCJcbiAgd2hpY2ggcmVxdWlyZXMgY29kZSBmcm9tIFwibW92ZVRvRmluaXNoZWRcIlxuXV1cbi0tIEluY2x1ZGVzXG4tLVtbXG4gIEZ1bmN0aW9uIHRvIGFkZCBqb2IgaW4gdGFyZ2V0IGxpc3QgYW5kIGFkZCBtYXJrZXIgaWYgbmVlZGVkLlxuXV1cbi0tIEluY2x1ZGVzXG4tLVtbXG4gIEFkZCBtYXJrZXIgaWYgbmVlZGVkIHdoZW4gYSBqb2IgaXMgYXZhaWxhYmxlLlxuXV1cbmxvY2FsIGZ1bmN0aW9uIGFkZEJhc2VNYXJrZXJJZk5lZWRlZChtYXJrZXJLZXksIGlzUGF1c2VkT3JNYXhlZClcbiAgaWYgbm90IGlzUGF1c2VkT3JNYXhlZCB0aGVuXG4gICAgcmNhbGwoXCJaQUREXCIsIG1hcmtlcktleSwgMCwgXCIwXCIpXG4gIGVuZCAgXG5lbmRcbmxvY2FsIGZ1bmN0aW9uIGFkZEpvYkluVGFyZ2V0TGlzdCh0YXJnZXRLZXksIG1hcmtlcktleSwgcHVzaENtZCwgaXNQYXVzZWRPck1heGVkLCBqb2JJZClcbiAgcmNhbGwocHVzaENtZCwgdGFyZ2V0S2V5LCBqb2JJZClcbiAgYWRkQmFzZU1hcmtlcklmTmVlZGVkKG1hcmtlcktleSwgaXNQYXVzZWRPck1heGVkKVxuZW5kXG4tLVtbXG4gIEZ1bmN0aW9ucyB0byBkZXN0cnVjdHVyZSBqb2Iga2V5LlxuICBKdXN0IGEgYml0IG9mIHdhcm5pbmcsIHRoZXNlIGZ1bmN0aW9ucyBtYXkgYmUgYSBiaXQgc2xvdyBhbmQgYWZmZWN0IHBlcmZvcm1hbmNlIHNpZ25pZmljYW50bHkuXG5dXVxubG9jYWwgZ2V0Sm9iSWRGcm9tS2V5ID0gZnVuY3Rpb24gKGpvYktleSlcbiAgcmV0dXJuIHN0cmluZy5tYXRjaChqb2JLZXksIFwiLio6KC4qKVwiKVxuZW5kXG5sb2NhbCBnZXRKb2JLZXlQcmVmaXggPSBmdW5jdGlvbiAoam9iS2V5LCBqb2JJZClcbiAgcmV0dXJuIHN0cmluZy5zdWIoam9iS2V5LCAwLCAjam9iS2V5IC0gI2pvYklkKVxuZW5kXG4tLVtbXG4gIEZ1bmN0aW9uIHRvIGNoZWNrIGZvciB0aGUgbWV0YS5wYXVzZWQga2V5IHRvIGRlY2lkZSBpZiB3ZSBhcmUgcGF1c2VkIG9yIG5vdFxuICAoc2luY2UgYW4gZW1wdHkgbGlzdCBhbmQgIUVYSVNUUyBhcmUgbm90IHJlYWxseSB0aGUgc2FtZSkuXG5dXVxubG9jYWwgZnVuY3Rpb24gZ2V0VGFyZ2V0UXVldWVMaXN0KHF1ZXVlTWV0YUtleSwgYWN0aXZlS2V5LCB3YWl0S2V5LCBwYXVzZWRLZXkpXG4gIGxvY2FsIHF1ZXVlQXR0cmlidXRlcyA9IHJjYWxsKFwiSE1HRVRcIiwgcXVldWVNZXRhS2V5LCBcInBhdXNlZFwiLCBcImNvbmN1cnJlbmN5XCIsIFwibWF4XCIsIFwiZHVyYXRpb25cIilcbiAgaWYgcXVldWVBdHRyaWJ1dGVzWzFdIHRoZW5cbiAgICByZXR1cm4gcGF1c2VkS2V5LCB0cnVlLCBxdWV1ZUF0dHJpYnV0ZXNbM10sIHF1ZXVlQXR0cmlidXRlc1s0XVxuICBlbHNlXG4gICAgaWYgcXVldWVBdHRyaWJ1dGVzWzJdIHRoZW5cbiAgICAgIGxvY2FsIGFjdGl2ZUNvdW50ID0gcmNhbGwoXCJMTEVOXCIsIGFjdGl2ZUtleSlcbiAgICAgIGlmIGFjdGl2ZUNvdW50ID49IHRvbnVtYmVyKHF1ZXVlQXR0cmlidXRlc1syXSkgdGhlblxuICAgICAgICByZXR1cm4gd2FpdEtleSwgdHJ1ZSwgcXVldWVBdHRyaWJ1dGVzWzNdLCBxdWV1ZUF0dHJpYnV0ZXNbNF1cbiAgICAgIGVsc2VcbiAgICAgICAgcmV0dXJuIHdhaXRLZXksIGZhbHNlLCBxdWV1ZUF0dHJpYnV0ZXNbM10sIHF1ZXVlQXR0cmlidXRlc1s0XVxuICAgICAgZW5kXG4gICAgZW5kXG4gIGVuZFxuICByZXR1cm4gd2FpdEtleSwgZmFsc2UsIHF1ZXVlQXR0cmlidXRlc1szXSwgcXVldWVBdHRyaWJ1dGVzWzRdXG5lbmRcbmxvY2FsIGZ1bmN0aW9uIF9tb3ZlUGFyZW50VG9XYWl0KHBhcmVudFByZWZpeCwgcGFyZW50SWQsIGVtaXRFdmVudClcbiAgbG9jYWwgcGFyZW50VGFyZ2V0LCBpc1BhdXNlZE9yTWF4ZWQgPSBnZXRUYXJnZXRRdWV1ZUxpc3QocGFyZW50UHJlZml4IC4uIFwibWV0YVwiLCBwYXJlbnRQcmVmaXggLi4gXCJhY3RpdmVcIixcbiAgICBwYXJlbnRQcmVmaXggLi4gXCJ3YWl0XCIsIHBhcmVudFByZWZpeCAuLiBcInBhdXNlZFwiKVxuICBhZGRKb2JJblRhcmdldExpc3QocGFyZW50VGFyZ2V0LCBwYXJlbnRQcmVmaXggLi4gXCJtYXJrZXJcIiwgXCJSUFVTSFwiLCBpc1BhdXNlZE9yTWF4ZWQsIHBhcmVudElkKVxuICBpZiBlbWl0RXZlbnQgdGhlblxuICAgIGxvY2FsIHBhcmVudEV2ZW50U3RyZWFtID0gcGFyZW50UHJlZml4IC4uIFwiZXZlbnRzXCJcbiAgICByY2FsbChcIlhBRERcIiwgcGFyZW50RXZlbnRTdHJlYW0sIFwiKlwiLCBcImV2ZW50XCIsIFwid2FpdGluZ1wiLCBcImpvYklkXCIsIHBhcmVudElkLCBcInByZXZcIiwgXCJ3YWl0aW5nLWNoaWxkcmVuXCIpXG4gIGVuZFxuZW5kXG5sb2NhbCBmdW5jdGlvbiByZW1vdmVQYXJlbnREZXBlbmRlbmN5S2V5KGpvYktleSwgaGFyZCwgcGFyZW50S2V5LCBiYXNlS2V5LCBkZWJvdW5jZUlkKVxuICBpZiBwYXJlbnRLZXkgdGhlblxuICAgIGxvY2FsIHBhcmVudERlcGVuZGVuY2llc0tleSA9IHBhcmVudEtleSAuLiBcIjpkZXBlbmRlbmNpZXNcIlxuICAgIGxvY2FsIHJlc3VsdCA9IHJjYWxsKFwiU1JFTVwiLCBwYXJlbnREZXBlbmRlbmNpZXNLZXksIGpvYktleSlcbiAgICBpZiByZXN1bHQgPiAwIHRoZW5cbiAgICAgIGxvY2FsIHBlbmRpbmdEZXBlbmRlbmNpZXMgPSByY2FsbChcIlNDQVJEXCIsIHBhcmVudERlcGVuZGVuY2llc0tleSlcbiAgICAgIGlmIHBlbmRpbmdEZXBlbmRlbmNpZXMgPT0gMCB0aGVuXG4gICAgICAgIGxvY2FsIHBhcmVudElkID0gZ2V0Sm9iSWRGcm9tS2V5KHBhcmVudEtleSlcbiAgICAgICAgbG9jYWwgcGFyZW50UHJlZml4ID0gZ2V0Sm9iS2V5UHJlZml4KHBhcmVudEtleSwgcGFyZW50SWQpXG4gICAgICAgIGxvY2FsIG51bVJlbW92ZWRFbGVtZW50cyA9IHJjYWxsKFwiWlJFTVwiLCBwYXJlbnRQcmVmaXggLi4gXCJ3YWl0aW5nLWNoaWxkcmVuXCIsIHBhcmVudElkKVxuICAgICAgICBpZiBudW1SZW1vdmVkRWxlbWVudHMgPT0gMSB0aGVuXG4gICAgICAgICAgaWYgaGFyZCB0aGVuIC0tIHJlbW92ZSBwYXJlbnQgaW4gc2FtZSBxdWV1ZVxuICAgICAgICAgICAgaWYgcGFyZW50UHJlZml4ID09IGJhc2VLZXkgdGhlblxuICAgICAgICAgICAgICByZW1vdmVQYXJlbnREZXBlbmRlbmN5S2V5KHBhcmVudEtleSwgaGFyZCwgbmlsLCBiYXNlS2V5LCBuaWwpXG4gICAgICAgICAgICAgIHJlbW92ZUpvYktleXMocGFyZW50S2V5KVxuICAgICAgICAgICAgICBpZiBkZWJvdW5jZUlkIHRoZW5cbiAgICAgICAgICAgICAgICByY2FsbChcIkRFTFwiLCBwYXJlbnRQcmVmaXggLi4gXCJkZTpcIiAuLiBkZWJvdW5jZUlkKVxuICAgICAgICAgICAgICBlbmRcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgX21vdmVQYXJlbnRUb1dhaXQocGFyZW50UHJlZml4LCBwYXJlbnRJZClcbiAgICAgICAgICAgIGVuZFxuICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgIF9tb3ZlUGFyZW50VG9XYWl0KHBhcmVudFByZWZpeCwgcGFyZW50SWQsIHRydWUpXG4gICAgICAgICAgZW5kXG4gICAgICAgIGVuZFxuICAgICAgZW5kXG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIGVuZFxuICBlbHNlXG4gICAgbG9jYWwgcGFyZW50QXR0cmlidXRlcyA9IHJjYWxsKFwiSE1HRVRcIiwgam9iS2V5LCBcInBhcmVudEtleVwiLCBcImRlaWRcIilcbiAgICBsb2NhbCBtaXNzZWRQYXJlbnRLZXkgPSBwYXJlbnRBdHRyaWJ1dGVzWzFdXG4gICAgaWYoICh0eXBlKG1pc3NlZFBhcmVudEtleSkgPT0gXCJzdHJpbmdcIikgYW5kIG1pc3NlZFBhcmVudEtleSB+PSBcIlwiXG4gICAgICBhbmQgKHJjYWxsKFwiRVhJU1RTXCIsIG1pc3NlZFBhcmVudEtleSkgPT0gMSkpIHRoZW5cbiAgICAgIGxvY2FsIHBhcmVudERlcGVuZGVuY2llc0tleSA9IG1pc3NlZFBhcmVudEtleSAuLiBcIjpkZXBlbmRlbmNpZXNcIlxuICAgICAgbG9jYWwgcmVzdWx0ID0gcmNhbGwoXCJTUkVNXCIsIHBhcmVudERlcGVuZGVuY2llc0tleSwgam9iS2V5KVxuICAgICAgaWYgcmVzdWx0ID4gMCB0aGVuXG4gICAgICAgIGxvY2FsIHBlbmRpbmdEZXBlbmRlbmNpZXMgPSByY2FsbChcIlNDQVJEXCIsIHBhcmVudERlcGVuZGVuY2llc0tleSlcbiAgICAgICAgaWYgcGVuZGluZ0RlcGVuZGVuY2llcyA9PSAwIHRoZW5cbiAgICAgICAgICBsb2NhbCBwYXJlbnRJZCA9IGdldEpvYklkRnJvbUtleShtaXNzZWRQYXJlbnRLZXkpXG4gICAgICAgICAgbG9jYWwgcGFyZW50UHJlZml4ID0gZ2V0Sm9iS2V5UHJlZml4KG1pc3NlZFBhcmVudEtleSwgcGFyZW50SWQpXG4gICAgICAgICAgbG9jYWwgbnVtUmVtb3ZlZEVsZW1lbnRzID0gcmNhbGwoXCJaUkVNXCIsIHBhcmVudFByZWZpeCAuLiBcIndhaXRpbmctY2hpbGRyZW5cIiwgcGFyZW50SWQpXG4gICAgICAgICAgaWYgbnVtUmVtb3ZlZEVsZW1lbnRzID09IDEgdGhlblxuICAgICAgICAgICAgaWYgaGFyZCB0aGVuXG4gICAgICAgICAgICAgIGlmIHBhcmVudFByZWZpeCA9PSBiYXNlS2V5IHRoZW5cbiAgICAgICAgICAgICAgICByZW1vdmVQYXJlbnREZXBlbmRlbmN5S2V5KG1pc3NlZFBhcmVudEtleSwgaGFyZCwgbmlsLCBiYXNlS2V5LCBuaWwpXG4gICAgICAgICAgICAgICAgcmVtb3ZlSm9iS2V5cyhtaXNzZWRQYXJlbnRLZXkpXG4gICAgICAgICAgICAgICAgaWYgcGFyZW50QXR0cmlidXRlc1syXSB0aGVuXG4gICAgICAgICAgICAgICAgICByY2FsbChcIkRFTFwiLCBwYXJlbnRQcmVmaXggLi4gXCJkZTpcIiAuLiBwYXJlbnRBdHRyaWJ1dGVzWzJdKVxuICAgICAgICAgICAgICAgIGVuZFxuICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgX21vdmVQYXJlbnRUb1dhaXQocGFyZW50UHJlZml4LCBwYXJlbnRJZClcbiAgICAgICAgICAgICAgZW5kXG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgIF9tb3ZlUGFyZW50VG9XYWl0KHBhcmVudFByZWZpeCwgcGFyZW50SWQsIHRydWUpXG4gICAgICAgICAgICBlbmRcbiAgICAgICAgICBlbmRcbiAgICAgICAgZW5kXG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgICBlbmRcbiAgICBlbmRcbiAgZW5kXG4gIHJldHVybiBmYWxzZVxuZW5kXG5sb2NhbCBmdW5jdGlvbiByZW1vdmVKb2Ioam9iSWQsIGhhcmQsIGJhc2VLZXksIHNob3VsZFJlbW92ZURlZHVwbGljYXRpb25LZXkpXG4gIGxvY2FsIGpvYktleSA9IGJhc2VLZXkgLi4gam9iSWRcbiAgcmVtb3ZlUGFyZW50RGVwZW5kZW5jeUtleShqb2JLZXksIGhhcmQsIG5pbCwgYmFzZUtleSlcbiAgaWYgc2hvdWxkUmVtb3ZlRGVkdXBsaWNhdGlvbktleSB0aGVuXG4gICAgcmVtb3ZlRGVkdXBsaWNhdGlvbktleUlmTmVlZGVkT25SZW1vdmFsKGJhc2VLZXksIGpvYktleSwgam9iSWQpXG4gIGVuZFxuICByZW1vdmVKb2JLZXlzKGpvYktleSlcbmVuZFxubG9jYWwgZnVuY3Rpb24gcmVtb3ZlSm9icyhrZXlzLCBoYXJkLCBiYXNlS2V5LCBtYXgpXG4gIGZvciBpLCBrZXkgaW4gaXBhaXJzKGtleXMpIGRvXG4gICAgcmVtb3ZlSm9iKGtleSwgaGFyZCwgYmFzZUtleSwgdHJ1ZSAtLVtbcmVtb3ZlIGRlYm91bmNlIGtleV1dKVxuICBlbmRcbiAgcmV0dXJuIG1heCAtICNrZXlzXG5lbmRcbmxvY2FsIGZ1bmN0aW9uIGdldExpc3RJdGVtcyhrZXlOYW1lLCBtYXgpXG4gIHJldHVybiByY2FsbCgnTFJBTkdFJywga2V5TmFtZSwgMCwgbWF4IC0gMSlcbmVuZFxubG9jYWwgZnVuY3Rpb24gcmVtb3ZlTGlzdEpvYnMoa2V5TmFtZSwgaGFyZCwgYmFzZUtleSwgbWF4LCBqb2JzVG9JZ25vcmUpXG4gIGxvY2FsIGpvYnMgPSBnZXRMaXN0SXRlbXMoa2V5TmFtZSwgbWF4KVxuICBpZiBqb2JzVG9JZ25vcmUgdGhlblxuICAgIGpvYnMgPSBmaWx0ZXJPdXRKb2JzVG9JZ25vcmUoam9icywgam9ic1RvSWdub3JlKVxuICBlbmRcbiAgbG9jYWwgY291bnQgPSByZW1vdmVKb2JzKGpvYnMsIGhhcmQsIGJhc2VLZXksIG1heClcbiAgcmNhbGwoXCJMVFJJTVwiLCBrZXlOYW1lLCAjam9icywgLTEpXG4gIHJldHVybiBjb3VudFxuZW5kXG4tLSBJbmNsdWRlc1xuLS1bW1xuICBGdW5jdGlvbiB0byBsb29wIGluIGJhdGNoZXMuXG4gIEp1c3QgYSBiaXQgb2Ygd2FybmluZywgc29tZSBjb21tYW5kcyBhcyBaUkVNXG4gIGNvdWxkIHJlY2VpdmUgYSBtYXhpbXVtIG9mIDcwMDAgcGFyYW1ldGVycyBwZXIgY2FsbC5cbl1dXG5sb2NhbCBmdW5jdGlvbiBiYXRjaGVzKG4sIGJhdGNoU2l6ZSlcbiAgbG9jYWwgaSA9IDBcbiAgcmV0dXJuIGZ1bmN0aW9uKClcbiAgICBsb2NhbCBmcm9tID0gaSAqIGJhdGNoU2l6ZSArIDFcbiAgICBpID0gaSArIDFcbiAgICBpZiAoZnJvbSA8PSBuKSB0aGVuXG4gICAgICBsb2NhbCB0byA9IG1hdGgubWluKGZyb20gKyBiYXRjaFNpemUgLSAxLCBuKVxuICAgICAgcmV0dXJuIGZyb20sIHRvXG4gICAgZW5kXG4gIGVuZFxuZW5kXG4tLVtbXG4gIEZ1bmN0aW9uIHRvIGdldCBaU2V0IGl0ZW1zLlxuXV1cbmxvY2FsIGZ1bmN0aW9uIGdldFpTZXRJdGVtcyhrZXlOYW1lLCBtYXgpXG4gIHJldHVybiByY2FsbCgnWlJBTkdFJywga2V5TmFtZSwgMCwgbWF4IC0gMSlcbmVuZFxubG9jYWwgZnVuY3Rpb24gcmVtb3ZlWlNldEpvYnMoa2V5TmFtZSwgaGFyZCwgYmFzZUtleSwgbWF4LCBqb2JzVG9JZ25vcmUpXG4gIGxvY2FsIGpvYnMgPSBnZXRaU2V0SXRlbXMoa2V5TmFtZSwgbWF4KVxuICBpZiBqb2JzVG9JZ25vcmUgdGhlblxuICAgIGpvYnMgPSBmaWx0ZXJPdXRKb2JzVG9JZ25vcmUoam9icywgam9ic1RvSWdub3JlKVxuICBlbmRcbiAgbG9jYWwgY291bnQgPSByZW1vdmVKb2JzKGpvYnMsIGhhcmQsIGJhc2VLZXksIG1heClcbiAgaWYoI2pvYnMgPiAwKSB0aGVuXG4gICAgZm9yIGZyb20sIHRvIGluIGJhdGNoZXMoI2pvYnMsIDcwMDApIGRvXG4gICAgICByY2FsbChcIlpSRU1cIiwga2V5TmFtZSwgdW5wYWNrKGpvYnMsIGZyb20sIHRvKSlcbiAgICBlbmRcbiAgZW5kXG4gIHJldHVybiBjb3VudFxuZW5kXG4tLSBXZSBtdXN0IG5vdCByZW1vdmUgZGVsYXllZCBqb2JzIGlmIHRoZXkgYXJlIGFzc29jaWF0ZWQgdG8gYSBqb2Igc2NoZWR1bGVyLlxubG9jYWwgc2NoZWR1bGVkSm9icyA9IHt9XG5sb2NhbCBqb2JTY2hlZHVsZXJzID0gcmNhbGwoXCJaUkFOR0VcIiwgS0VZU1s1XSwgMCwgLTEsIFwiV0lUSFNDT1JFU1wiKVxuLS0gRm9yIGV2ZXJ5IGpvYiBzY2hlZHVsZXIsIGdldCB0aGUgY3VycmVudCBkZWxheWVkIGpvYiBpZC5cbmZvciBpID0gMSwgI2pvYlNjaGVkdWxlcnMsIDIgZG9cbiAgICBsb2NhbCBqb2JTY2hlZHVsZXJJZCA9IGpvYlNjaGVkdWxlcnNbaV1cbiAgICBsb2NhbCBqb2JTY2hlZHVsZXJNaWxsaXMgPSBqb2JTY2hlZHVsZXJzW2kgKyAxXVxuICAgIGxvY2FsIGRlbGF5ZWRKb2JJZCA9IFwicmVwZWF0OlwiIC4uIGpvYlNjaGVkdWxlcklkIC4uIFwiOlwiIC4uIGpvYlNjaGVkdWxlck1pbGxpc1xuICAgIHNjaGVkdWxlZEpvYnNbZGVsYXllZEpvYklkXSA9IHRydWVcbmVuZFxucmVtb3ZlTGlzdEpvYnMoS0VZU1sxXSwgdHJ1ZSwgcXVldWVCYXNlS2V5LCAwLCBzY2hlZHVsZWRKb2JzKSAtLSB3YWl0XG5yZW1vdmVMaXN0Sm9icyhLRVlTWzJdLCB0cnVlLCBxdWV1ZUJhc2VLZXksIDAsIHNjaGVkdWxlZEpvYnMpIC0tIHBhdXNlZFxuaWYgQVJHVlsyXSA9PSBcIjFcIiB0aGVuXG4gIHJlbW92ZVpTZXRKb2JzKEtFWVNbM10sIHRydWUsIHF1ZXVlQmFzZUtleSwgMCwgc2NoZWR1bGVkSm9icykgLS0gZGVsYXllZFxuZW5kXG5yZW1vdmVaU2V0Sm9icyhLRVlTWzRdLCB0cnVlLCBxdWV1ZUJhc2VLZXksIDAsIHNjaGVkdWxlZEpvYnMpIC0tIHByaW9yaXRpemVkXG5gO1xuZXhwb3J0cy5kcmFpbiA9IHtcbiAgICBuYW1lOiAnZHJhaW4nLFxuICAgIGNvbnRlbnQsXG4gICAga2V5czogNSxcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1kcmFpbi01LmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsImRyYWluIiwiY29udGVudCIsIm5hbWUiLCJrZXlzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/scripts/drain-5.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/scripts/extendLock-2.js":
/*!**************************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/scripts/extendLock-2.js ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.extendLock = void 0;\nconst content = `--[[\n  Extend lock and removes the job from the stalled set.\n  Input:\n    KEYS[1] 'lock',\n    KEYS[2] 'stalled'\n    ARGV[1]  token\n    ARGV[2]  lock duration in milliseconds\n    ARGV[3]  jobid\n  Output:\n    \"1\" if lock extented succesfully.\n]]\nlocal rcall = redis.call\nif rcall(\"GET\", KEYS[1]) == ARGV[1] then\n  --   if rcall(\"SET\", KEYS[1], ARGV[1], \"PX\", ARGV[2], \"XX\") then\n  if rcall(\"SET\", KEYS[1], ARGV[1], \"PX\", ARGV[2]) then\n    rcall(\"SREM\", KEYS[2], ARGV[3])\n    return 1\n  end\nend\nreturn 0\n`;\nexports.extendLock = {\n    name: \"extendLock\",\n    content,\n    keys: 2\n}; //# sourceMappingURL=extendLock-2.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL3NjcmlwdHMvZXh0ZW5kTG9jay0yLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCxrQkFBa0IsR0FBRyxLQUFLO0FBQzFCLE1BQU1HLFVBQVUsQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFvQmpCLENBQUM7QUFDREgsa0JBQWtCLEdBQUc7SUFDakJJLE1BQU07SUFDTkQ7SUFDQUUsTUFBTTtBQUNWLEdBQ0Esd0NBQXdDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb25seWZhbnMtcGxhdGZvcm0vLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL3NjcmlwdHMvZXh0ZW5kTG9jay0yLmpzP2I0M2IiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLmV4dGVuZExvY2sgPSB2b2lkIDA7XG5jb25zdCBjb250ZW50ID0gYC0tW1tcbiAgRXh0ZW5kIGxvY2sgYW5kIHJlbW92ZXMgdGhlIGpvYiBmcm9tIHRoZSBzdGFsbGVkIHNldC5cbiAgSW5wdXQ6XG4gICAgS0VZU1sxXSAnbG9jaycsXG4gICAgS0VZU1syXSAnc3RhbGxlZCdcbiAgICBBUkdWWzFdICB0b2tlblxuICAgIEFSR1ZbMl0gIGxvY2sgZHVyYXRpb24gaW4gbWlsbGlzZWNvbmRzXG4gICAgQVJHVlszXSAgam9iaWRcbiAgT3V0cHV0OlxuICAgIFwiMVwiIGlmIGxvY2sgZXh0ZW50ZWQgc3VjY2VzZnVsbHkuXG5dXVxubG9jYWwgcmNhbGwgPSByZWRpcy5jYWxsXG5pZiByY2FsbChcIkdFVFwiLCBLRVlTWzFdKSA9PSBBUkdWWzFdIHRoZW5cbiAgLS0gICBpZiByY2FsbChcIlNFVFwiLCBLRVlTWzFdLCBBUkdWWzFdLCBcIlBYXCIsIEFSR1ZbMl0sIFwiWFhcIikgdGhlblxuICBpZiByY2FsbChcIlNFVFwiLCBLRVlTWzFdLCBBUkdWWzFdLCBcIlBYXCIsIEFSR1ZbMl0pIHRoZW5cbiAgICByY2FsbChcIlNSRU1cIiwgS0VZU1syXSwgQVJHVlszXSlcbiAgICByZXR1cm4gMVxuICBlbmRcbmVuZFxucmV0dXJuIDBcbmA7XG5leHBvcnRzLmV4dGVuZExvY2sgPSB7XG4gICAgbmFtZTogJ2V4dGVuZExvY2snLFxuICAgIGNvbnRlbnQsXG4gICAga2V5czogMixcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1leHRlbmRMb2NrLTIuanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiZXh0ZW5kTG9jayIsImNvbnRlbnQiLCJuYW1lIiwia2V5cyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/scripts/extendLock-2.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/scripts/extendLocks-1.js":
/*!***************************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/scripts/extendLocks-1.js ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.extendLocks = void 0;\nconst content = `--[[\n  Extend locks for multiple jobs and remove them from the stalled set if successful.\n  Return the list of job IDs for which the operation failed.\n  KEYS[1] = stalledKey\n  ARGV[1] = baseKey\n  ARGV[2] = tokens\n  ARGV[3] = jobIds\n  ARGV[4] = lockDuration (ms)\n  Output:\n    An array of failed job IDs. If empty, all succeeded.\n]]\nlocal rcall = redis.call\nlocal stalledKey = KEYS[1]\nlocal baseKey = ARGV[1]\nlocal tokens = cmsgpack.unpack(ARGV[2])\nlocal jobIds = cmsgpack.unpack(ARGV[3])\nlocal lockDuration = ARGV[4]\nlocal jobCount = #jobIds\nlocal failedJobs = {}\nfor i = 1, jobCount, 1 do\n    local lockKey = baseKey .. jobIds[i] .. ':lock'\n    local jobId = jobIds[i]\n    local token = tokens[i]\n    local currentToken = rcall(\"GET\", lockKey)\n    if currentToken == token then\n        local setResult = rcall(\"SET\", lockKey, token, \"PX\", lockDuration)\n        if setResult then\n            rcall(\"SREM\", stalledKey, jobId)\n        else\n            table.insert(failedJobs, jobId)\n        end\n    else\n        table.insert(failedJobs, jobId)\n    end\nend\nreturn failedJobs\n`;\nexports.extendLocks = {\n    name: \"extendLocks\",\n    content,\n    keys: 1\n}; //# sourceMappingURL=extendLocks-1.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL3NjcmlwdHMvZXh0ZW5kTG9ja3MtMS5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsbUJBQW1CLEdBQUcsS0FBSztBQUMzQixNQUFNRyxVQUFVLENBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQW9DakIsQ0FBQztBQUNESCxtQkFBbUIsR0FBRztJQUNsQkksTUFBTTtJQUNORDtJQUNBRSxNQUFNO0FBQ1YsR0FDQSx5Q0FBeUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vbmx5ZmFucy1wbGF0Zm9ybS8uL25vZGVfbW9kdWxlcy9idWxsbXEvZGlzdC9janMvc2NyaXB0cy9leHRlbmRMb2Nrcy0xLmpzPzlhNzMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLmV4dGVuZExvY2tzID0gdm9pZCAwO1xuY29uc3QgY29udGVudCA9IGAtLVtbXG4gIEV4dGVuZCBsb2NrcyBmb3IgbXVsdGlwbGUgam9icyBhbmQgcmVtb3ZlIHRoZW0gZnJvbSB0aGUgc3RhbGxlZCBzZXQgaWYgc3VjY2Vzc2Z1bC5cbiAgUmV0dXJuIHRoZSBsaXN0IG9mIGpvYiBJRHMgZm9yIHdoaWNoIHRoZSBvcGVyYXRpb24gZmFpbGVkLlxuICBLRVlTWzFdID0gc3RhbGxlZEtleVxuICBBUkdWWzFdID0gYmFzZUtleVxuICBBUkdWWzJdID0gdG9rZW5zXG4gIEFSR1ZbM10gPSBqb2JJZHNcbiAgQVJHVls0XSA9IGxvY2tEdXJhdGlvbiAobXMpXG4gIE91dHB1dDpcbiAgICBBbiBhcnJheSBvZiBmYWlsZWQgam9iIElEcy4gSWYgZW1wdHksIGFsbCBzdWNjZWVkZWQuXG5dXVxubG9jYWwgcmNhbGwgPSByZWRpcy5jYWxsXG5sb2NhbCBzdGFsbGVkS2V5ID0gS0VZU1sxXVxubG9jYWwgYmFzZUtleSA9IEFSR1ZbMV1cbmxvY2FsIHRva2VucyA9IGNtc2dwYWNrLnVucGFjayhBUkdWWzJdKVxubG9jYWwgam9iSWRzID0gY21zZ3BhY2sudW5wYWNrKEFSR1ZbM10pXG5sb2NhbCBsb2NrRHVyYXRpb24gPSBBUkdWWzRdXG5sb2NhbCBqb2JDb3VudCA9ICNqb2JJZHNcbmxvY2FsIGZhaWxlZEpvYnMgPSB7fVxuZm9yIGkgPSAxLCBqb2JDb3VudCwgMSBkb1xuICAgIGxvY2FsIGxvY2tLZXkgPSBiYXNlS2V5IC4uIGpvYklkc1tpXSAuLiAnOmxvY2snXG4gICAgbG9jYWwgam9iSWQgPSBqb2JJZHNbaV1cbiAgICBsb2NhbCB0b2tlbiA9IHRva2Vuc1tpXVxuICAgIGxvY2FsIGN1cnJlbnRUb2tlbiA9IHJjYWxsKFwiR0VUXCIsIGxvY2tLZXkpXG4gICAgaWYgY3VycmVudFRva2VuID09IHRva2VuIHRoZW5cbiAgICAgICAgbG9jYWwgc2V0UmVzdWx0ID0gcmNhbGwoXCJTRVRcIiwgbG9ja0tleSwgdG9rZW4sIFwiUFhcIiwgbG9ja0R1cmF0aW9uKVxuICAgICAgICBpZiBzZXRSZXN1bHQgdGhlblxuICAgICAgICAgICAgcmNhbGwoXCJTUkVNXCIsIHN0YWxsZWRLZXksIGpvYklkKVxuICAgICAgICBlbHNlXG4gICAgICAgICAgICB0YWJsZS5pbnNlcnQoZmFpbGVkSm9icywgam9iSWQpXG4gICAgICAgIGVuZFxuICAgIGVsc2VcbiAgICAgICAgdGFibGUuaW5zZXJ0KGZhaWxlZEpvYnMsIGpvYklkKVxuICAgIGVuZFxuZW5kXG5yZXR1cm4gZmFpbGVkSm9ic1xuYDtcbmV4cG9ydHMuZXh0ZW5kTG9ja3MgPSB7XG4gICAgbmFtZTogJ2V4dGVuZExvY2tzJyxcbiAgICBjb250ZW50LFxuICAgIGtleXM6IDEsXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZXh0ZW5kTG9ja3MtMS5qcy5tYXAiXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJleHRlbmRMb2NrcyIsImNvbnRlbnQiLCJuYW1lIiwia2V5cyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/scripts/extendLocks-1.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/scripts/getCounts-1.js":
/*!*************************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/scripts/getCounts-1.js ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.getCounts = void 0;\nconst content = `--[[\n  Get counts per provided states\n    Input:\n      KEYS[1]    'prefix'\n      ARGV[1...] types\n]]\nlocal rcall = redis.call;\nlocal prefix = KEYS[1]\nlocal results = {}\nfor i = 1, #ARGV do\n  local stateKey = prefix .. ARGV[i]\n  if ARGV[i] == \"wait\" or ARGV[i] == \"paused\" then\n    -- Markers in waitlist DEPRECATED in v5: Remove in v6.\n    local marker = rcall(\"LINDEX\", stateKey, -1)\n    if marker and string.sub(marker, 1, 2) == \"0:\" then\n      local count = rcall(\"LLEN\", stateKey)\n      if count > 1 then\n        rcall(\"RPOP\", stateKey)\n        results[#results+1] = count-1\n      else\n        results[#results+1] = 0\n      end\n    else\n      results[#results+1] = rcall(\"LLEN\", stateKey)\n    end\n  elseif ARGV[i] == \"active\" then\n    results[#results+1] = rcall(\"LLEN\", stateKey)\n  else\n    results[#results+1] = rcall(\"ZCARD\", stateKey)\n  end\nend\nreturn results\n`;\nexports.getCounts = {\n    name: \"getCounts\",\n    content,\n    keys: 1\n}; //# sourceMappingURL=getCounts-1.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL3NjcmlwdHMvZ2V0Q291bnRzLTEuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELGlCQUFpQixHQUFHLEtBQUs7QUFDekIsTUFBTUcsVUFBVSxDQUFDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQWdDakIsQ0FBQztBQUNESCxpQkFBaUIsR0FBRztJQUNoQkksTUFBTTtJQUNORDtJQUNBRSxNQUFNO0FBQ1YsR0FDQSx1Q0FBdUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vbmx5ZmFucy1wbGF0Zm9ybS8uL25vZGVfbW9kdWxlcy9idWxsbXEvZGlzdC9janMvc2NyaXB0cy9nZXRDb3VudHMtMS5qcz8yYWQ3Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5nZXRDb3VudHMgPSB2b2lkIDA7XG5jb25zdCBjb250ZW50ID0gYC0tW1tcbiAgR2V0IGNvdW50cyBwZXIgcHJvdmlkZWQgc3RhdGVzXG4gICAgSW5wdXQ6XG4gICAgICBLRVlTWzFdICAgICdwcmVmaXgnXG4gICAgICBBUkdWWzEuLi5dIHR5cGVzXG5dXVxubG9jYWwgcmNhbGwgPSByZWRpcy5jYWxsO1xubG9jYWwgcHJlZml4ID0gS0VZU1sxXVxubG9jYWwgcmVzdWx0cyA9IHt9XG5mb3IgaSA9IDEsICNBUkdWIGRvXG4gIGxvY2FsIHN0YXRlS2V5ID0gcHJlZml4IC4uIEFSR1ZbaV1cbiAgaWYgQVJHVltpXSA9PSBcIndhaXRcIiBvciBBUkdWW2ldID09IFwicGF1c2VkXCIgdGhlblxuICAgIC0tIE1hcmtlcnMgaW4gd2FpdGxpc3QgREVQUkVDQVRFRCBpbiB2NTogUmVtb3ZlIGluIHY2LlxuICAgIGxvY2FsIG1hcmtlciA9IHJjYWxsKFwiTElOREVYXCIsIHN0YXRlS2V5LCAtMSlcbiAgICBpZiBtYXJrZXIgYW5kIHN0cmluZy5zdWIobWFya2VyLCAxLCAyKSA9PSBcIjA6XCIgdGhlblxuICAgICAgbG9jYWwgY291bnQgPSByY2FsbChcIkxMRU5cIiwgc3RhdGVLZXkpXG4gICAgICBpZiBjb3VudCA+IDEgdGhlblxuICAgICAgICByY2FsbChcIlJQT1BcIiwgc3RhdGVLZXkpXG4gICAgICAgIHJlc3VsdHNbI3Jlc3VsdHMrMV0gPSBjb3VudC0xXG4gICAgICBlbHNlXG4gICAgICAgIHJlc3VsdHNbI3Jlc3VsdHMrMV0gPSAwXG4gICAgICBlbmRcbiAgICBlbHNlXG4gICAgICByZXN1bHRzWyNyZXN1bHRzKzFdID0gcmNhbGwoXCJMTEVOXCIsIHN0YXRlS2V5KVxuICAgIGVuZFxuICBlbHNlaWYgQVJHVltpXSA9PSBcImFjdGl2ZVwiIHRoZW5cbiAgICByZXN1bHRzWyNyZXN1bHRzKzFdID0gcmNhbGwoXCJMTEVOXCIsIHN0YXRlS2V5KVxuICBlbHNlXG4gICAgcmVzdWx0c1sjcmVzdWx0cysxXSA9IHJjYWxsKFwiWkNBUkRcIiwgc3RhdGVLZXkpXG4gIGVuZFxuZW5kXG5yZXR1cm4gcmVzdWx0c1xuYDtcbmV4cG9ydHMuZ2V0Q291bnRzID0ge1xuICAgIG5hbWU6ICdnZXRDb3VudHMnLFxuICAgIGNvbnRlbnQsXG4gICAga2V5czogMSxcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1nZXRDb3VudHMtMS5qcy5tYXAiXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJnZXRDb3VudHMiLCJjb250ZW50IiwibmFtZSIsImtleXMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/scripts/getCounts-1.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/scripts/getCountsPerPriority-4.js":
/*!************************************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/scripts/getCountsPerPriority-4.js ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.getCountsPerPriority = void 0;\nconst content = `--[[\n  Get counts per provided states\n    Input:\n      KEYS[1] wait key\n      KEYS[2] paused key\n      KEYS[3] meta key\n      KEYS[4] prioritized key\n      ARGV[1...] priorities\n]]\nlocal rcall = redis.call\nlocal results = {}\nlocal waitKey = KEYS[1]\nlocal pausedKey = KEYS[2]\nlocal prioritizedKey = KEYS[4]\n-- Includes\n--[[\n  Function to check for the meta.paused key to decide if we are paused or not\n  (since an empty list and !EXISTS are not really the same).\n]]\nlocal function isQueuePaused(queueMetaKey)\n  return rcall(\"HEXISTS\", queueMetaKey, \"paused\") == 1\nend\nfor i = 1, #ARGV do\n  local priority = tonumber(ARGV[i])\n  if priority == 0 then\n    if isQueuePaused(KEYS[3]) then\n      results[#results+1] = rcall(\"LLEN\", pausedKey)\n    else\n      results[#results+1] = rcall(\"LLEN\", waitKey)\n    end\n  else\n    results[#results+1] = rcall(\"ZCOUNT\", prioritizedKey,\n      priority * 0x100000000, (priority + 1)  * 0x100000000 - 1)\n  end\nend\nreturn results\n`;\nexports.getCountsPerPriority = {\n    name: \"getCountsPerPriority\",\n    content,\n    keys: 4\n}; //# sourceMappingURL=getCountsPerPriority-4.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL3NjcmlwdHMvZ2V0Q291bnRzUGVyUHJpb3JpdHktNC5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsNEJBQTRCLEdBQUcsS0FBSztBQUNwQyxNQUFNRyxVQUFVLENBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQW9DakIsQ0FBQztBQUNESCw0QkFBNEIsR0FBRztJQUMzQkksTUFBTTtJQUNORDtJQUNBRSxNQUFNO0FBQ1YsR0FDQSxrREFBa0QiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vbmx5ZmFucy1wbGF0Zm9ybS8uL25vZGVfbW9kdWxlcy9idWxsbXEvZGlzdC9janMvc2NyaXB0cy9nZXRDb3VudHNQZXJQcmlvcml0eS00LmpzP2RhNTEiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLmdldENvdW50c1BlclByaW9yaXR5ID0gdm9pZCAwO1xuY29uc3QgY29udGVudCA9IGAtLVtbXG4gIEdldCBjb3VudHMgcGVyIHByb3ZpZGVkIHN0YXRlc1xuICAgIElucHV0OlxuICAgICAgS0VZU1sxXSB3YWl0IGtleVxuICAgICAgS0VZU1syXSBwYXVzZWQga2V5XG4gICAgICBLRVlTWzNdIG1ldGEga2V5XG4gICAgICBLRVlTWzRdIHByaW9yaXRpemVkIGtleVxuICAgICAgQVJHVlsxLi4uXSBwcmlvcml0aWVzXG5dXVxubG9jYWwgcmNhbGwgPSByZWRpcy5jYWxsXG5sb2NhbCByZXN1bHRzID0ge31cbmxvY2FsIHdhaXRLZXkgPSBLRVlTWzFdXG5sb2NhbCBwYXVzZWRLZXkgPSBLRVlTWzJdXG5sb2NhbCBwcmlvcml0aXplZEtleSA9IEtFWVNbNF1cbi0tIEluY2x1ZGVzXG4tLVtbXG4gIEZ1bmN0aW9uIHRvIGNoZWNrIGZvciB0aGUgbWV0YS5wYXVzZWQga2V5IHRvIGRlY2lkZSBpZiB3ZSBhcmUgcGF1c2VkIG9yIG5vdFxuICAoc2luY2UgYW4gZW1wdHkgbGlzdCBhbmQgIUVYSVNUUyBhcmUgbm90IHJlYWxseSB0aGUgc2FtZSkuXG5dXVxubG9jYWwgZnVuY3Rpb24gaXNRdWV1ZVBhdXNlZChxdWV1ZU1ldGFLZXkpXG4gIHJldHVybiByY2FsbChcIkhFWElTVFNcIiwgcXVldWVNZXRhS2V5LCBcInBhdXNlZFwiKSA9PSAxXG5lbmRcbmZvciBpID0gMSwgI0FSR1YgZG9cbiAgbG9jYWwgcHJpb3JpdHkgPSB0b251bWJlcihBUkdWW2ldKVxuICBpZiBwcmlvcml0eSA9PSAwIHRoZW5cbiAgICBpZiBpc1F1ZXVlUGF1c2VkKEtFWVNbM10pIHRoZW5cbiAgICAgIHJlc3VsdHNbI3Jlc3VsdHMrMV0gPSByY2FsbChcIkxMRU5cIiwgcGF1c2VkS2V5KVxuICAgIGVsc2VcbiAgICAgIHJlc3VsdHNbI3Jlc3VsdHMrMV0gPSByY2FsbChcIkxMRU5cIiwgd2FpdEtleSlcbiAgICBlbmRcbiAgZWxzZVxuICAgIHJlc3VsdHNbI3Jlc3VsdHMrMV0gPSByY2FsbChcIlpDT1VOVFwiLCBwcmlvcml0aXplZEtleSxcbiAgICAgIHByaW9yaXR5ICogMHgxMDAwMDAwMDAsIChwcmlvcml0eSArIDEpICAqIDB4MTAwMDAwMDAwIC0gMSlcbiAgZW5kXG5lbmRcbnJldHVybiByZXN1bHRzXG5gO1xuZXhwb3J0cy5nZXRDb3VudHNQZXJQcmlvcml0eSA9IHtcbiAgICBuYW1lOiAnZ2V0Q291bnRzUGVyUHJpb3JpdHknLFxuICAgIGNvbnRlbnQsXG4gICAga2V5czogNCxcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1nZXRDb3VudHNQZXJQcmlvcml0eS00LmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsImdldENvdW50c1BlclByaW9yaXR5IiwiY29udGVudCIsIm5hbWUiLCJrZXlzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/scripts/getCountsPerPriority-4.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/scripts/getDependencyCounts-4.js":
/*!***********************************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/scripts/getDependencyCounts-4.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.getDependencyCounts = void 0;\nconst content = `--[[\n  Get counts per child states\n    Input:\n      KEYS[1]    processed key\n      KEYS[2]    unprocessed key\n      KEYS[3]    ignored key\n      KEYS[4]    failed key\n      ARGV[1...] types\n]]\nlocal rcall = redis.call;\nlocal processedKey = KEYS[1]\nlocal unprocessedKey = KEYS[2]\nlocal ignoredKey = KEYS[3]\nlocal failedKey = KEYS[4]\nlocal results = {}\nfor i = 1, #ARGV do\n  if ARGV[i] == \"processed\" then\n    results[#results+1] = rcall(\"HLEN\", processedKey)\n  elseif ARGV[i] == \"unprocessed\" then\n    results[#results+1] = rcall(\"SCARD\", unprocessedKey)\n  elseif ARGV[i] == \"ignored\" then\n    results[#results+1] = rcall(\"HLEN\", ignoredKey)\n  else\n    results[#results+1] = rcall(\"ZCARD\", failedKey)\n  end\nend\nreturn results\n`;\nexports.getDependencyCounts = {\n    name: \"getDependencyCounts\",\n    content,\n    keys: 4\n}; //# sourceMappingURL=getDependencyCounts-4.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL3NjcmlwdHMvZ2V0RGVwZW5kZW5jeUNvdW50cy00LmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCwyQkFBMkIsR0FBRyxLQUFLO0FBQ25DLE1BQU1HLFVBQVUsQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBMkJqQixDQUFDO0FBQ0RILDJCQUEyQixHQUFHO0lBQzFCSSxNQUFNO0lBQ05EO0lBQ0FFLE1BQU07QUFDVixHQUNBLGlEQUFpRCIsInNvdXJjZXMiOlsid2VicGFjazovL29ubHlmYW5zLXBsYXRmb3JtLy4vbm9kZV9tb2R1bGVzL2J1bGxtcS9kaXN0L2Nqcy9zY3JpcHRzL2dldERlcGVuZGVuY3lDb3VudHMtNC5qcz9mNjI0Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5nZXREZXBlbmRlbmN5Q291bnRzID0gdm9pZCAwO1xuY29uc3QgY29udGVudCA9IGAtLVtbXG4gIEdldCBjb3VudHMgcGVyIGNoaWxkIHN0YXRlc1xuICAgIElucHV0OlxuICAgICAgS0VZU1sxXSAgICBwcm9jZXNzZWQga2V5XG4gICAgICBLRVlTWzJdICAgIHVucHJvY2Vzc2VkIGtleVxuICAgICAgS0VZU1szXSAgICBpZ25vcmVkIGtleVxuICAgICAgS0VZU1s0XSAgICBmYWlsZWQga2V5XG4gICAgICBBUkdWWzEuLi5dIHR5cGVzXG5dXVxubG9jYWwgcmNhbGwgPSByZWRpcy5jYWxsO1xubG9jYWwgcHJvY2Vzc2VkS2V5ID0gS0VZU1sxXVxubG9jYWwgdW5wcm9jZXNzZWRLZXkgPSBLRVlTWzJdXG5sb2NhbCBpZ25vcmVkS2V5ID0gS0VZU1szXVxubG9jYWwgZmFpbGVkS2V5ID0gS0VZU1s0XVxubG9jYWwgcmVzdWx0cyA9IHt9XG5mb3IgaSA9IDEsICNBUkdWIGRvXG4gIGlmIEFSR1ZbaV0gPT0gXCJwcm9jZXNzZWRcIiB0aGVuXG4gICAgcmVzdWx0c1sjcmVzdWx0cysxXSA9IHJjYWxsKFwiSExFTlwiLCBwcm9jZXNzZWRLZXkpXG4gIGVsc2VpZiBBUkdWW2ldID09IFwidW5wcm9jZXNzZWRcIiB0aGVuXG4gICAgcmVzdWx0c1sjcmVzdWx0cysxXSA9IHJjYWxsKFwiU0NBUkRcIiwgdW5wcm9jZXNzZWRLZXkpXG4gIGVsc2VpZiBBUkdWW2ldID09IFwiaWdub3JlZFwiIHRoZW5cbiAgICByZXN1bHRzWyNyZXN1bHRzKzFdID0gcmNhbGwoXCJITEVOXCIsIGlnbm9yZWRLZXkpXG4gIGVsc2VcbiAgICByZXN1bHRzWyNyZXN1bHRzKzFdID0gcmNhbGwoXCJaQ0FSRFwiLCBmYWlsZWRLZXkpXG4gIGVuZFxuZW5kXG5yZXR1cm4gcmVzdWx0c1xuYDtcbmV4cG9ydHMuZ2V0RGVwZW5kZW5jeUNvdW50cyA9IHtcbiAgICBuYW1lOiAnZ2V0RGVwZW5kZW5jeUNvdW50cycsXG4gICAgY29udGVudCxcbiAgICBrZXlzOiA0LFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWdldERlcGVuZGVuY3lDb3VudHMtNC5qcy5tYXAiXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJnZXREZXBlbmRlbmN5Q291bnRzIiwiY29udGVudCIsIm5hbWUiLCJrZXlzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/scripts/getDependencyCounts-4.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/scripts/getJobScheduler-1.js":
/*!*******************************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/scripts/getJobScheduler-1.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.getJobScheduler = void 0;\nconst content = `--[[\n  Get job scheduler record.\n  Input:\n    KEYS[1] 'repeat' key\n    ARGV[1] id\n]]\nlocal rcall = redis.call\nlocal jobSchedulerKey = KEYS[1] .. \":\" .. ARGV[1]\nlocal score = rcall(\"ZSCORE\", KEYS[1], ARGV[1])\nif score then\n  return {rcall(\"HGETALL\", jobSchedulerKey), score} -- get job data\nend\nreturn {nil, nil}\n`;\nexports.getJobScheduler = {\n    name: \"getJobScheduler\",\n    content,\n    keys: 1\n}; //# sourceMappingURL=getJobScheduler-1.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL3NjcmlwdHMvZ2V0Sm9iU2NoZWR1bGVyLTEuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELHVCQUF1QixHQUFHLEtBQUs7QUFDL0IsTUFBTUcsVUFBVSxDQUFDOzs7Ozs7Ozs7Ozs7O0FBYWpCLENBQUM7QUFDREgsdUJBQXVCLEdBQUc7SUFDdEJJLE1BQU07SUFDTkQ7SUFDQUUsTUFBTTtBQUNWLEdBQ0EsNkNBQTZDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb25seWZhbnMtcGxhdGZvcm0vLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL3NjcmlwdHMvZ2V0Sm9iU2NoZWR1bGVyLTEuanM/OGY3NyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuZ2V0Sm9iU2NoZWR1bGVyID0gdm9pZCAwO1xuY29uc3QgY29udGVudCA9IGAtLVtbXG4gIEdldCBqb2Igc2NoZWR1bGVyIHJlY29yZC5cbiAgSW5wdXQ6XG4gICAgS0VZU1sxXSAncmVwZWF0JyBrZXlcbiAgICBBUkdWWzFdIGlkXG5dXVxubG9jYWwgcmNhbGwgPSByZWRpcy5jYWxsXG5sb2NhbCBqb2JTY2hlZHVsZXJLZXkgPSBLRVlTWzFdIC4uIFwiOlwiIC4uIEFSR1ZbMV1cbmxvY2FsIHNjb3JlID0gcmNhbGwoXCJaU0NPUkVcIiwgS0VZU1sxXSwgQVJHVlsxXSlcbmlmIHNjb3JlIHRoZW5cbiAgcmV0dXJuIHtyY2FsbChcIkhHRVRBTExcIiwgam9iU2NoZWR1bGVyS2V5KSwgc2NvcmV9IC0tIGdldCBqb2IgZGF0YVxuZW5kXG5yZXR1cm4ge25pbCwgbmlsfVxuYDtcbmV4cG9ydHMuZ2V0Sm9iU2NoZWR1bGVyID0ge1xuICAgIG5hbWU6ICdnZXRKb2JTY2hlZHVsZXInLFxuICAgIGNvbnRlbnQsXG4gICAga2V5czogMSxcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1nZXRKb2JTY2hlZHVsZXItMS5qcy5tYXAiXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJnZXRKb2JTY2hlZHVsZXIiLCJjb250ZW50IiwibmFtZSIsImtleXMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/scripts/getJobScheduler-1.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/scripts/getMetrics-2.js":
/*!**************************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/scripts/getMetrics-2.js ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.getMetrics = void 0;\nconst content = `--[[\n  Get metrics\n  Input:\n    KEYS[1] 'metrics' key\n    KEYS[2] 'metrics data' key\n    ARGV[1] start index\n    ARGV[2] end index\n]]\nlocal rcall = redis.call;\nlocal metricsKey = KEYS[1]\nlocal dataKey = KEYS[2]\nlocal metrics = rcall(\"HMGET\", metricsKey, \"count\", \"prevTS\", \"prevCount\")\nlocal data = rcall(\"LRANGE\", dataKey, tonumber(ARGV[1]), tonumber(ARGV[2]))\nlocal numPoints = rcall(\"LLEN\", dataKey)\nreturn {metrics, data, numPoints}\n`;\nexports.getMetrics = {\n    name: \"getMetrics\",\n    content,\n    keys: 2\n}; //# sourceMappingURL=getMetrics-2.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL3NjcmlwdHMvZ2V0TWV0cmljcy0yLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCxrQkFBa0IsR0FBRyxLQUFLO0FBQzFCLE1BQU1HLFVBQVUsQ0FBQzs7Ozs7Ozs7Ozs7Ozs7O0FBZWpCLENBQUM7QUFDREgsa0JBQWtCLEdBQUc7SUFDakJJLE1BQU07SUFDTkQ7SUFDQUUsTUFBTTtBQUNWLEdBQ0Esd0NBQXdDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb25seWZhbnMtcGxhdGZvcm0vLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL3NjcmlwdHMvZ2V0TWV0cmljcy0yLmpzPzkxODYiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLmdldE1ldHJpY3MgPSB2b2lkIDA7XG5jb25zdCBjb250ZW50ID0gYC0tW1tcbiAgR2V0IG1ldHJpY3NcbiAgSW5wdXQ6XG4gICAgS0VZU1sxXSAnbWV0cmljcycga2V5XG4gICAgS0VZU1syXSAnbWV0cmljcyBkYXRhJyBrZXlcbiAgICBBUkdWWzFdIHN0YXJ0IGluZGV4XG4gICAgQVJHVlsyXSBlbmQgaW5kZXhcbl1dXG5sb2NhbCByY2FsbCA9IHJlZGlzLmNhbGw7XG5sb2NhbCBtZXRyaWNzS2V5ID0gS0VZU1sxXVxubG9jYWwgZGF0YUtleSA9IEtFWVNbMl1cbmxvY2FsIG1ldHJpY3MgPSByY2FsbChcIkhNR0VUXCIsIG1ldHJpY3NLZXksIFwiY291bnRcIiwgXCJwcmV2VFNcIiwgXCJwcmV2Q291bnRcIilcbmxvY2FsIGRhdGEgPSByY2FsbChcIkxSQU5HRVwiLCBkYXRhS2V5LCB0b251bWJlcihBUkdWWzFdKSwgdG9udW1iZXIoQVJHVlsyXSkpXG5sb2NhbCBudW1Qb2ludHMgPSByY2FsbChcIkxMRU5cIiwgZGF0YUtleSlcbnJldHVybiB7bWV0cmljcywgZGF0YSwgbnVtUG9pbnRzfVxuYDtcbmV4cG9ydHMuZ2V0TWV0cmljcyA9IHtcbiAgICBuYW1lOiAnZ2V0TWV0cmljcycsXG4gICAgY29udGVudCxcbiAgICBrZXlzOiAyLFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWdldE1ldHJpY3MtMi5qcy5tYXAiXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJnZXRNZXRyaWNzIiwiY29udGVudCIsIm5hbWUiLCJrZXlzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/scripts/getMetrics-2.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/scripts/getRanges-1.js":
/*!*************************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/scripts/getRanges-1.js ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.getRanges = void 0;\nconst content = `--[[\n  Get job ids per provided states\n    Input:\n      KEYS[1]    'prefix'\n      ARGV[1]    start\n      ARGV[2]    end\n      ARGV[3]    asc\n      ARGV[4...] types\n]]\nlocal rcall = redis.call\nlocal prefix = KEYS[1]\nlocal rangeStart = tonumber(ARGV[1])\nlocal rangeEnd = tonumber(ARGV[2])\nlocal asc = ARGV[3]\nlocal results = {}\nlocal function getRangeInList(listKey, asc, rangeStart, rangeEnd, results)\n  if asc == \"1\" then\n    local modifiedRangeStart\n    local modifiedRangeEnd\n    if rangeStart == -1 then\n      modifiedRangeStart = 0\n    else\n      modifiedRangeStart = -(rangeStart + 1)\n    end\n    if rangeEnd == -1 then\n      modifiedRangeEnd = 0\n    else\n      modifiedRangeEnd = -(rangeEnd + 1)\n    end\n    results[#results+1] = rcall(\"LRANGE\", listKey,\n      modifiedRangeEnd,\n      modifiedRangeStart)\n  else\n    results[#results+1] = rcall(\"LRANGE\", listKey, rangeStart, rangeEnd)\n  end\nend\nfor i = 4, #ARGV do\n  local stateKey = prefix .. ARGV[i]\n  if ARGV[i] == \"wait\" or ARGV[i] == \"paused\" then\n    -- Markers in waitlist DEPRECATED in v5: Remove in v6.\n    local marker = rcall(\"LINDEX\", stateKey, -1)\n    if marker and string.sub(marker, 1, 2) == \"0:\" then\n      local count = rcall(\"LLEN\", stateKey)\n      if count > 1 then\n        rcall(\"RPOP\", stateKey)\n        getRangeInList(stateKey, asc, rangeStart, rangeEnd, results)\n      else\n        results[#results+1] = {}\n      end\n    else\n      getRangeInList(stateKey, asc, rangeStart, rangeEnd, results)\n    end\n  elseif ARGV[i] == \"active\" then\n    getRangeInList(stateKey, asc, rangeStart, rangeEnd, results)\n  else\n    if asc == \"1\" then\n      results[#results+1] = rcall(\"ZRANGE\", stateKey, rangeStart, rangeEnd)\n    else\n      results[#results+1] = rcall(\"ZREVRANGE\", stateKey, rangeStart, rangeEnd)\n    end\n  end\nend\nreturn results\n`;\nexports.getRanges = {\n    name: \"getRanges\",\n    content,\n    keys: 1\n}; //# sourceMappingURL=getRanges-1.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL3NjcmlwdHMvZ2V0UmFuZ2VzLTEuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELGlCQUFpQixHQUFHLEtBQUs7QUFDekIsTUFBTUcsVUFBVSxDQUFDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUErRGpCLENBQUM7QUFDREgsaUJBQWlCLEdBQUc7SUFDaEJJLE1BQU07SUFDTkQ7SUFDQUUsTUFBTTtBQUNWLEdBQ0EsdUNBQXVDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb25seWZhbnMtcGxhdGZvcm0vLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL3NjcmlwdHMvZ2V0UmFuZ2VzLTEuanM/YjJkNCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuZ2V0UmFuZ2VzID0gdm9pZCAwO1xuY29uc3QgY29udGVudCA9IGAtLVtbXG4gIEdldCBqb2IgaWRzIHBlciBwcm92aWRlZCBzdGF0ZXNcbiAgICBJbnB1dDpcbiAgICAgIEtFWVNbMV0gICAgJ3ByZWZpeCdcbiAgICAgIEFSR1ZbMV0gICAgc3RhcnRcbiAgICAgIEFSR1ZbMl0gICAgZW5kXG4gICAgICBBUkdWWzNdICAgIGFzY1xuICAgICAgQVJHVls0Li4uXSB0eXBlc1xuXV1cbmxvY2FsIHJjYWxsID0gcmVkaXMuY2FsbFxubG9jYWwgcHJlZml4ID0gS0VZU1sxXVxubG9jYWwgcmFuZ2VTdGFydCA9IHRvbnVtYmVyKEFSR1ZbMV0pXG5sb2NhbCByYW5nZUVuZCA9IHRvbnVtYmVyKEFSR1ZbMl0pXG5sb2NhbCBhc2MgPSBBUkdWWzNdXG5sb2NhbCByZXN1bHRzID0ge31cbmxvY2FsIGZ1bmN0aW9uIGdldFJhbmdlSW5MaXN0KGxpc3RLZXksIGFzYywgcmFuZ2VTdGFydCwgcmFuZ2VFbmQsIHJlc3VsdHMpXG4gIGlmIGFzYyA9PSBcIjFcIiB0aGVuXG4gICAgbG9jYWwgbW9kaWZpZWRSYW5nZVN0YXJ0XG4gICAgbG9jYWwgbW9kaWZpZWRSYW5nZUVuZFxuICAgIGlmIHJhbmdlU3RhcnQgPT0gLTEgdGhlblxuICAgICAgbW9kaWZpZWRSYW5nZVN0YXJ0ID0gMFxuICAgIGVsc2VcbiAgICAgIG1vZGlmaWVkUmFuZ2VTdGFydCA9IC0ocmFuZ2VTdGFydCArIDEpXG4gICAgZW5kXG4gICAgaWYgcmFuZ2VFbmQgPT0gLTEgdGhlblxuICAgICAgbW9kaWZpZWRSYW5nZUVuZCA9IDBcbiAgICBlbHNlXG4gICAgICBtb2RpZmllZFJhbmdlRW5kID0gLShyYW5nZUVuZCArIDEpXG4gICAgZW5kXG4gICAgcmVzdWx0c1sjcmVzdWx0cysxXSA9IHJjYWxsKFwiTFJBTkdFXCIsIGxpc3RLZXksXG4gICAgICBtb2RpZmllZFJhbmdlRW5kLFxuICAgICAgbW9kaWZpZWRSYW5nZVN0YXJ0KVxuICBlbHNlXG4gICAgcmVzdWx0c1sjcmVzdWx0cysxXSA9IHJjYWxsKFwiTFJBTkdFXCIsIGxpc3RLZXksIHJhbmdlU3RhcnQsIHJhbmdlRW5kKVxuICBlbmRcbmVuZFxuZm9yIGkgPSA0LCAjQVJHViBkb1xuICBsb2NhbCBzdGF0ZUtleSA9IHByZWZpeCAuLiBBUkdWW2ldXG4gIGlmIEFSR1ZbaV0gPT0gXCJ3YWl0XCIgb3IgQVJHVltpXSA9PSBcInBhdXNlZFwiIHRoZW5cbiAgICAtLSBNYXJrZXJzIGluIHdhaXRsaXN0IERFUFJFQ0FURUQgaW4gdjU6IFJlbW92ZSBpbiB2Ni5cbiAgICBsb2NhbCBtYXJrZXIgPSByY2FsbChcIkxJTkRFWFwiLCBzdGF0ZUtleSwgLTEpXG4gICAgaWYgbWFya2VyIGFuZCBzdHJpbmcuc3ViKG1hcmtlciwgMSwgMikgPT0gXCIwOlwiIHRoZW5cbiAgICAgIGxvY2FsIGNvdW50ID0gcmNhbGwoXCJMTEVOXCIsIHN0YXRlS2V5KVxuICAgICAgaWYgY291bnQgPiAxIHRoZW5cbiAgICAgICAgcmNhbGwoXCJSUE9QXCIsIHN0YXRlS2V5KVxuICAgICAgICBnZXRSYW5nZUluTGlzdChzdGF0ZUtleSwgYXNjLCByYW5nZVN0YXJ0LCByYW5nZUVuZCwgcmVzdWx0cylcbiAgICAgIGVsc2VcbiAgICAgICAgcmVzdWx0c1sjcmVzdWx0cysxXSA9IHt9XG4gICAgICBlbmRcbiAgICBlbHNlXG4gICAgICBnZXRSYW5nZUluTGlzdChzdGF0ZUtleSwgYXNjLCByYW5nZVN0YXJ0LCByYW5nZUVuZCwgcmVzdWx0cylcbiAgICBlbmRcbiAgZWxzZWlmIEFSR1ZbaV0gPT0gXCJhY3RpdmVcIiB0aGVuXG4gICAgZ2V0UmFuZ2VJbkxpc3Qoc3RhdGVLZXksIGFzYywgcmFuZ2VTdGFydCwgcmFuZ2VFbmQsIHJlc3VsdHMpXG4gIGVsc2VcbiAgICBpZiBhc2MgPT0gXCIxXCIgdGhlblxuICAgICAgcmVzdWx0c1sjcmVzdWx0cysxXSA9IHJjYWxsKFwiWlJBTkdFXCIsIHN0YXRlS2V5LCByYW5nZVN0YXJ0LCByYW5nZUVuZClcbiAgICBlbHNlXG4gICAgICByZXN1bHRzWyNyZXN1bHRzKzFdID0gcmNhbGwoXCJaUkVWUkFOR0VcIiwgc3RhdGVLZXksIHJhbmdlU3RhcnQsIHJhbmdlRW5kKVxuICAgIGVuZFxuICBlbmRcbmVuZFxucmV0dXJuIHJlc3VsdHNcbmA7XG5leHBvcnRzLmdldFJhbmdlcyA9IHtcbiAgICBuYW1lOiAnZ2V0UmFuZ2VzJyxcbiAgICBjb250ZW50LFxuICAgIGtleXM6IDEsXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Z2V0UmFuZ2VzLTEuanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiZ2V0UmFuZ2VzIiwiY29udGVudCIsIm5hbWUiLCJrZXlzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/scripts/getRanges-1.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/scripts/getRateLimitTtl-2.js":
/*!*******************************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/scripts/getRateLimitTtl-2.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.getRateLimitTtl = void 0;\nconst content = `--[[\n  Get rate limit ttl\n    Input:\n      KEYS[1] 'limiter'\n      KEYS[2] 'meta'\n      ARGV[1] maxJobs\n]]\nlocal rcall = redis.call\n-- Includes\n--[[\n  Function to get current rate limit ttl.\n]]\nlocal function getRateLimitTTL(maxJobs, rateLimiterKey)\n  if maxJobs and maxJobs <= tonumber(rcall(\"GET\", rateLimiterKey) or 0) then\n    local pttl = rcall(\"PTTL\", rateLimiterKey)\n    if pttl == 0 then\n      rcall(\"DEL\", rateLimiterKey)\n    end\n    if pttl > 0 then\n      return pttl\n    end\n  end\n  return 0\nend\nlocal rateLimiterKey = KEYS[1]\nif ARGV[1] ~= \"0\" then\n  return getRateLimitTTL(tonumber(ARGV[1]), rateLimiterKey)\nelse\n  local rateLimitMax = rcall(\"HGET\", KEYS[2], \"max\")\n  if rateLimitMax then\n    return getRateLimitTTL(tonumber(rateLimitMax), rateLimiterKey)\n  end\n  return rcall(\"PTTL\", rateLimiterKey)\nend\n`;\nexports.getRateLimitTtl = {\n    name: \"getRateLimitTtl\",\n    content,\n    keys: 2\n}; //# sourceMappingURL=getRateLimitTtl-2.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL3NjcmlwdHMvZ2V0UmF0ZUxpbWl0VHRsLTIuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELHVCQUF1QixHQUFHLEtBQUs7QUFDL0IsTUFBTUcsVUFBVSxDQUFDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBa0NqQixDQUFDO0FBQ0RILHVCQUF1QixHQUFHO0lBQ3RCSSxNQUFNO0lBQ05EO0lBQ0FFLE1BQU07QUFDVixHQUNBLDZDQUE2QyIsInNvdXJjZXMiOlsid2VicGFjazovL29ubHlmYW5zLXBsYXRmb3JtLy4vbm9kZV9tb2R1bGVzL2J1bGxtcS9kaXN0L2Nqcy9zY3JpcHRzL2dldFJhdGVMaW1pdFR0bC0yLmpzP2E3M2UiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLmdldFJhdGVMaW1pdFR0bCA9IHZvaWQgMDtcbmNvbnN0IGNvbnRlbnQgPSBgLS1bW1xuICBHZXQgcmF0ZSBsaW1pdCB0dGxcbiAgICBJbnB1dDpcbiAgICAgIEtFWVNbMV0gJ2xpbWl0ZXInXG4gICAgICBLRVlTWzJdICdtZXRhJ1xuICAgICAgQVJHVlsxXSBtYXhKb2JzXG5dXVxubG9jYWwgcmNhbGwgPSByZWRpcy5jYWxsXG4tLSBJbmNsdWRlc1xuLS1bW1xuICBGdW5jdGlvbiB0byBnZXQgY3VycmVudCByYXRlIGxpbWl0IHR0bC5cbl1dXG5sb2NhbCBmdW5jdGlvbiBnZXRSYXRlTGltaXRUVEwobWF4Sm9icywgcmF0ZUxpbWl0ZXJLZXkpXG4gIGlmIG1heEpvYnMgYW5kIG1heEpvYnMgPD0gdG9udW1iZXIocmNhbGwoXCJHRVRcIiwgcmF0ZUxpbWl0ZXJLZXkpIG9yIDApIHRoZW5cbiAgICBsb2NhbCBwdHRsID0gcmNhbGwoXCJQVFRMXCIsIHJhdGVMaW1pdGVyS2V5KVxuICAgIGlmIHB0dGwgPT0gMCB0aGVuXG4gICAgICByY2FsbChcIkRFTFwiLCByYXRlTGltaXRlcktleSlcbiAgICBlbmRcbiAgICBpZiBwdHRsID4gMCB0aGVuXG4gICAgICByZXR1cm4gcHR0bFxuICAgIGVuZFxuICBlbmRcbiAgcmV0dXJuIDBcbmVuZFxubG9jYWwgcmF0ZUxpbWl0ZXJLZXkgPSBLRVlTWzFdXG5pZiBBUkdWWzFdIH49IFwiMFwiIHRoZW5cbiAgcmV0dXJuIGdldFJhdGVMaW1pdFRUTCh0b251bWJlcihBUkdWWzFdKSwgcmF0ZUxpbWl0ZXJLZXkpXG5lbHNlXG4gIGxvY2FsIHJhdGVMaW1pdE1heCA9IHJjYWxsKFwiSEdFVFwiLCBLRVlTWzJdLCBcIm1heFwiKVxuICBpZiByYXRlTGltaXRNYXggdGhlblxuICAgIHJldHVybiBnZXRSYXRlTGltaXRUVEwodG9udW1iZXIocmF0ZUxpbWl0TWF4KSwgcmF0ZUxpbWl0ZXJLZXkpXG4gIGVuZFxuICByZXR1cm4gcmNhbGwoXCJQVFRMXCIsIHJhdGVMaW1pdGVyS2V5KVxuZW5kXG5gO1xuZXhwb3J0cy5nZXRSYXRlTGltaXRUdGwgPSB7XG4gICAgbmFtZTogJ2dldFJhdGVMaW1pdFR0bCcsXG4gICAgY29udGVudCxcbiAgICBrZXlzOiAyLFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWdldFJhdGVMaW1pdFR0bC0yLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsImdldFJhdGVMaW1pdFR0bCIsImNvbnRlbnQiLCJuYW1lIiwia2V5cyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/scripts/getRateLimitTtl-2.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/scripts/getState-8.js":
/*!************************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/scripts/getState-8.js ***!
  \************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.getState = void 0;\nconst content = `--[[\n  Get a job state\n  Input: \n    KEYS[1] 'completed' key,\n    KEYS[2] 'failed' key\n    KEYS[3] 'delayed' key\n    KEYS[4] 'active' key\n    KEYS[5] 'wait' key\n    KEYS[6] 'paused' key\n    KEYS[7] 'waiting-children' key\n    KEYS[8] 'prioritized' key\n    ARGV[1] job id\n  Output:\n    'completed'\n    'failed'\n    'delayed'\n    'active'\n    'prioritized'\n    'waiting'\n    'waiting-children'\n    'unknown'\n]]\nlocal rcall = redis.call\nif rcall(\"ZSCORE\", KEYS[1], ARGV[1]) then\n  return \"completed\"\nend\nif rcall(\"ZSCORE\", KEYS[2], ARGV[1]) then\n  return \"failed\"\nend\nif rcall(\"ZSCORE\", KEYS[3], ARGV[1]) then\n  return \"delayed\"\nend\nif rcall(\"ZSCORE\", KEYS[8], ARGV[1]) then\n  return \"prioritized\"\nend\n-- Includes\n--[[\n  Functions to check if a item belongs to a list.\n]]\nlocal function checkItemInList(list, item)\n  for _, v in pairs(list) do\n    if v == item then\n      return 1\n    end\n  end\n  return nil\nend\nlocal active_items = rcall(\"LRANGE\", KEYS[4] , 0, -1)\nif checkItemInList(active_items, ARGV[1]) ~= nil then\n  return \"active\"\nend\nlocal wait_items = rcall(\"LRANGE\", KEYS[5] , 0, -1)\nif checkItemInList(wait_items, ARGV[1]) ~= nil then\n  return \"waiting\"\nend\nlocal paused_items = rcall(\"LRANGE\", KEYS[6] , 0, -1)\nif checkItemInList(paused_items, ARGV[1]) ~= nil then\n  return \"waiting\"\nend\nif rcall(\"ZSCORE\", KEYS[7], ARGV[1]) then\n  return \"waiting-children\"\nend\nreturn \"unknown\"\n`;\nexports.getState = {\n    name: \"getState\",\n    content,\n    keys: 8\n}; //# sourceMappingURL=getState-8.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL3NjcmlwdHMvZ2V0U3RhdGUtOC5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsZ0JBQWdCLEdBQUcsS0FBSztBQUN4QixNQUFNRyxVQUFVLENBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQStEakIsQ0FBQztBQUNESCxnQkFBZ0IsR0FBRztJQUNmSSxNQUFNO0lBQ05EO0lBQ0FFLE1BQU07QUFDVixHQUNBLHNDQUFzQyIsInNvdXJjZXMiOlsid2VicGFjazovL29ubHlmYW5zLXBsYXRmb3JtLy4vbm9kZV9tb2R1bGVzL2J1bGxtcS9kaXN0L2Nqcy9zY3JpcHRzL2dldFN0YXRlLTguanM/MmFmYiJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuZ2V0U3RhdGUgPSB2b2lkIDA7XG5jb25zdCBjb250ZW50ID0gYC0tW1tcbiAgR2V0IGEgam9iIHN0YXRlXG4gIElucHV0OiBcbiAgICBLRVlTWzFdICdjb21wbGV0ZWQnIGtleSxcbiAgICBLRVlTWzJdICdmYWlsZWQnIGtleVxuICAgIEtFWVNbM10gJ2RlbGF5ZWQnIGtleVxuICAgIEtFWVNbNF0gJ2FjdGl2ZScga2V5XG4gICAgS0VZU1s1XSAnd2FpdCcga2V5XG4gICAgS0VZU1s2XSAncGF1c2VkJyBrZXlcbiAgICBLRVlTWzddICd3YWl0aW5nLWNoaWxkcmVuJyBrZXlcbiAgICBLRVlTWzhdICdwcmlvcml0aXplZCcga2V5XG4gICAgQVJHVlsxXSBqb2IgaWRcbiAgT3V0cHV0OlxuICAgICdjb21wbGV0ZWQnXG4gICAgJ2ZhaWxlZCdcbiAgICAnZGVsYXllZCdcbiAgICAnYWN0aXZlJ1xuICAgICdwcmlvcml0aXplZCdcbiAgICAnd2FpdGluZydcbiAgICAnd2FpdGluZy1jaGlsZHJlbidcbiAgICAndW5rbm93bidcbl1dXG5sb2NhbCByY2FsbCA9IHJlZGlzLmNhbGxcbmlmIHJjYWxsKFwiWlNDT1JFXCIsIEtFWVNbMV0sIEFSR1ZbMV0pIHRoZW5cbiAgcmV0dXJuIFwiY29tcGxldGVkXCJcbmVuZFxuaWYgcmNhbGwoXCJaU0NPUkVcIiwgS0VZU1syXSwgQVJHVlsxXSkgdGhlblxuICByZXR1cm4gXCJmYWlsZWRcIlxuZW5kXG5pZiByY2FsbChcIlpTQ09SRVwiLCBLRVlTWzNdLCBBUkdWWzFdKSB0aGVuXG4gIHJldHVybiBcImRlbGF5ZWRcIlxuZW5kXG5pZiByY2FsbChcIlpTQ09SRVwiLCBLRVlTWzhdLCBBUkdWWzFdKSB0aGVuXG4gIHJldHVybiBcInByaW9yaXRpemVkXCJcbmVuZFxuLS0gSW5jbHVkZXNcbi0tW1tcbiAgRnVuY3Rpb25zIHRvIGNoZWNrIGlmIGEgaXRlbSBiZWxvbmdzIHRvIGEgbGlzdC5cbl1dXG5sb2NhbCBmdW5jdGlvbiBjaGVja0l0ZW1Jbkxpc3QobGlzdCwgaXRlbSlcbiAgZm9yIF8sIHYgaW4gcGFpcnMobGlzdCkgZG9cbiAgICBpZiB2ID09IGl0ZW0gdGhlblxuICAgICAgcmV0dXJuIDFcbiAgICBlbmRcbiAgZW5kXG4gIHJldHVybiBuaWxcbmVuZFxubG9jYWwgYWN0aXZlX2l0ZW1zID0gcmNhbGwoXCJMUkFOR0VcIiwgS0VZU1s0XSAsIDAsIC0xKVxuaWYgY2hlY2tJdGVtSW5MaXN0KGFjdGl2ZV9pdGVtcywgQVJHVlsxXSkgfj0gbmlsIHRoZW5cbiAgcmV0dXJuIFwiYWN0aXZlXCJcbmVuZFxubG9jYWwgd2FpdF9pdGVtcyA9IHJjYWxsKFwiTFJBTkdFXCIsIEtFWVNbNV0gLCAwLCAtMSlcbmlmIGNoZWNrSXRlbUluTGlzdCh3YWl0X2l0ZW1zLCBBUkdWWzFdKSB+PSBuaWwgdGhlblxuICByZXR1cm4gXCJ3YWl0aW5nXCJcbmVuZFxubG9jYWwgcGF1c2VkX2l0ZW1zID0gcmNhbGwoXCJMUkFOR0VcIiwgS0VZU1s2XSAsIDAsIC0xKVxuaWYgY2hlY2tJdGVtSW5MaXN0KHBhdXNlZF9pdGVtcywgQVJHVlsxXSkgfj0gbmlsIHRoZW5cbiAgcmV0dXJuIFwid2FpdGluZ1wiXG5lbmRcbmlmIHJjYWxsKFwiWlNDT1JFXCIsIEtFWVNbN10sIEFSR1ZbMV0pIHRoZW5cbiAgcmV0dXJuIFwid2FpdGluZy1jaGlsZHJlblwiXG5lbmRcbnJldHVybiBcInVua25vd25cIlxuYDtcbmV4cG9ydHMuZ2V0U3RhdGUgPSB7XG4gICAgbmFtZTogJ2dldFN0YXRlJyxcbiAgICBjb250ZW50LFxuICAgIGtleXM6IDgsXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Z2V0U3RhdGUtOC5qcy5tYXAiXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJnZXRTdGF0ZSIsImNvbnRlbnQiLCJuYW1lIiwia2V5cyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/scripts/getState-8.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/scripts/getStateV2-8.js":
/*!**************************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/scripts/getStateV2-8.js ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.getStateV2 = void 0;\nconst content = `--[[\n  Get a job state\n  Input: \n    KEYS[1] 'completed' key,\n    KEYS[2] 'failed' key\n    KEYS[3] 'delayed' key\n    KEYS[4] 'active' key\n    KEYS[5] 'wait' key\n    KEYS[6] 'paused' key\n    KEYS[7] 'waiting-children' key\n    KEYS[8] 'prioritized' key\n    ARGV[1] job id\n  Output:\n    'completed'\n    'failed'\n    'delayed'\n    'active'\n    'waiting'\n    'waiting-children'\n    'unknown'\n]]\nlocal rcall = redis.call\nif rcall(\"ZSCORE\", KEYS[1], ARGV[1]) then\n  return \"completed\"\nend\nif rcall(\"ZSCORE\", KEYS[2], ARGV[1]) then\n  return \"failed\"\nend\nif rcall(\"ZSCORE\", KEYS[3], ARGV[1]) then\n  return \"delayed\"\nend\nif rcall(\"ZSCORE\", KEYS[8], ARGV[1]) then\n  return \"prioritized\"\nend\nif rcall(\"LPOS\", KEYS[4] , ARGV[1]) then\n  return \"active\"\nend\nif rcall(\"LPOS\", KEYS[5] , ARGV[1]) then\n  return \"waiting\"\nend\nif rcall(\"LPOS\", KEYS[6] , ARGV[1]) then\n  return \"waiting\"\nend\nif rcall(\"ZSCORE\", KEYS[7] , ARGV[1]) then\n  return \"waiting-children\"\nend\nreturn \"unknown\"\n`;\nexports.getStateV2 = {\n    name: \"getStateV2\",\n    content,\n    keys: 8\n}; //# sourceMappingURL=getStateV2-8.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL3NjcmlwdHMvZ2V0U3RhdGVWMi04LmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCxrQkFBa0IsR0FBRyxLQUFLO0FBQzFCLE1BQU1HLFVBQVUsQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUErQ2pCLENBQUM7QUFDREgsa0JBQWtCLEdBQUc7SUFDakJJLE1BQU07SUFDTkQ7SUFDQUUsTUFBTTtBQUNWLEdBQ0Esd0NBQXdDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb25seWZhbnMtcGxhdGZvcm0vLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL3NjcmlwdHMvZ2V0U3RhdGVWMi04LmpzP2E1MjgiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLmdldFN0YXRlVjIgPSB2b2lkIDA7XG5jb25zdCBjb250ZW50ID0gYC0tW1tcbiAgR2V0IGEgam9iIHN0YXRlXG4gIElucHV0OiBcbiAgICBLRVlTWzFdICdjb21wbGV0ZWQnIGtleSxcbiAgICBLRVlTWzJdICdmYWlsZWQnIGtleVxuICAgIEtFWVNbM10gJ2RlbGF5ZWQnIGtleVxuICAgIEtFWVNbNF0gJ2FjdGl2ZScga2V5XG4gICAgS0VZU1s1XSAnd2FpdCcga2V5XG4gICAgS0VZU1s2XSAncGF1c2VkJyBrZXlcbiAgICBLRVlTWzddICd3YWl0aW5nLWNoaWxkcmVuJyBrZXlcbiAgICBLRVlTWzhdICdwcmlvcml0aXplZCcga2V5XG4gICAgQVJHVlsxXSBqb2IgaWRcbiAgT3V0cHV0OlxuICAgICdjb21wbGV0ZWQnXG4gICAgJ2ZhaWxlZCdcbiAgICAnZGVsYXllZCdcbiAgICAnYWN0aXZlJ1xuICAgICd3YWl0aW5nJ1xuICAgICd3YWl0aW5nLWNoaWxkcmVuJ1xuICAgICd1bmtub3duJ1xuXV1cbmxvY2FsIHJjYWxsID0gcmVkaXMuY2FsbFxuaWYgcmNhbGwoXCJaU0NPUkVcIiwgS0VZU1sxXSwgQVJHVlsxXSkgdGhlblxuICByZXR1cm4gXCJjb21wbGV0ZWRcIlxuZW5kXG5pZiByY2FsbChcIlpTQ09SRVwiLCBLRVlTWzJdLCBBUkdWWzFdKSB0aGVuXG4gIHJldHVybiBcImZhaWxlZFwiXG5lbmRcbmlmIHJjYWxsKFwiWlNDT1JFXCIsIEtFWVNbM10sIEFSR1ZbMV0pIHRoZW5cbiAgcmV0dXJuIFwiZGVsYXllZFwiXG5lbmRcbmlmIHJjYWxsKFwiWlNDT1JFXCIsIEtFWVNbOF0sIEFSR1ZbMV0pIHRoZW5cbiAgcmV0dXJuIFwicHJpb3JpdGl6ZWRcIlxuZW5kXG5pZiByY2FsbChcIkxQT1NcIiwgS0VZU1s0XSAsIEFSR1ZbMV0pIHRoZW5cbiAgcmV0dXJuIFwiYWN0aXZlXCJcbmVuZFxuaWYgcmNhbGwoXCJMUE9TXCIsIEtFWVNbNV0gLCBBUkdWWzFdKSB0aGVuXG4gIHJldHVybiBcIndhaXRpbmdcIlxuZW5kXG5pZiByY2FsbChcIkxQT1NcIiwgS0VZU1s2XSAsIEFSR1ZbMV0pIHRoZW5cbiAgcmV0dXJuIFwid2FpdGluZ1wiXG5lbmRcbmlmIHJjYWxsKFwiWlNDT1JFXCIsIEtFWVNbN10gLCBBUkdWWzFdKSB0aGVuXG4gIHJldHVybiBcIndhaXRpbmctY2hpbGRyZW5cIlxuZW5kXG5yZXR1cm4gXCJ1bmtub3duXCJcbmA7XG5leHBvcnRzLmdldFN0YXRlVjIgPSB7XG4gICAgbmFtZTogJ2dldFN0YXRlVjInLFxuICAgIGNvbnRlbnQsXG4gICAga2V5czogOCxcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1nZXRTdGF0ZVYyLTguanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiZ2V0U3RhdGVWMiIsImNvbnRlbnQiLCJuYW1lIiwia2V5cyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/scripts/getStateV2-8.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/scripts/index.js":
/*!*******************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/scripts/index.js ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nconst tslib_1 = __webpack_require__(/*! tslib */ \"(rsc)/./node_modules/tslib/tslib.es6.mjs\");\ntslib_1.__exportStar(__webpack_require__(/*! ./addDelayedJob-6 */ \"(rsc)/./node_modules/bullmq/dist/cjs/scripts/addDelayedJob-6.js\"), exports);\ntslib_1.__exportStar(__webpack_require__(/*! ./addJobScheduler-11 */ \"(rsc)/./node_modules/bullmq/dist/cjs/scripts/addJobScheduler-11.js\"), exports);\ntslib_1.__exportStar(__webpack_require__(/*! ./addLog-2 */ \"(rsc)/./node_modules/bullmq/dist/cjs/scripts/addLog-2.js\"), exports);\ntslib_1.__exportStar(__webpack_require__(/*! ./addParentJob-6 */ \"(rsc)/./node_modules/bullmq/dist/cjs/scripts/addParentJob-6.js\"), exports);\ntslib_1.__exportStar(__webpack_require__(/*! ./addPrioritizedJob-9 */ \"(rsc)/./node_modules/bullmq/dist/cjs/scripts/addPrioritizedJob-9.js\"), exports);\ntslib_1.__exportStar(__webpack_require__(/*! ./addRepeatableJob-2 */ \"(rsc)/./node_modules/bullmq/dist/cjs/scripts/addRepeatableJob-2.js\"), exports);\ntslib_1.__exportStar(__webpack_require__(/*! ./addStandardJob-9 */ \"(rsc)/./node_modules/bullmq/dist/cjs/scripts/addStandardJob-9.js\"), exports);\ntslib_1.__exportStar(__webpack_require__(/*! ./changeDelay-4 */ \"(rsc)/./node_modules/bullmq/dist/cjs/scripts/changeDelay-4.js\"), exports);\ntslib_1.__exportStar(__webpack_require__(/*! ./changePriority-7 */ \"(rsc)/./node_modules/bullmq/dist/cjs/scripts/changePriority-7.js\"), exports);\ntslib_1.__exportStar(__webpack_require__(/*! ./cleanJobsInSet-3 */ \"(rsc)/./node_modules/bullmq/dist/cjs/scripts/cleanJobsInSet-3.js\"), exports);\ntslib_1.__exportStar(__webpack_require__(/*! ./drain-5 */ \"(rsc)/./node_modules/bullmq/dist/cjs/scripts/drain-5.js\"), exports);\ntslib_1.__exportStar(__webpack_require__(/*! ./extendLock-2 */ \"(rsc)/./node_modules/bullmq/dist/cjs/scripts/extendLock-2.js\"), exports);\ntslib_1.__exportStar(__webpack_require__(/*! ./extendLocks-1 */ \"(rsc)/./node_modules/bullmq/dist/cjs/scripts/extendLocks-1.js\"), exports);\ntslib_1.__exportStar(__webpack_require__(/*! ./getCounts-1 */ \"(rsc)/./node_modules/bullmq/dist/cjs/scripts/getCounts-1.js\"), exports);\ntslib_1.__exportStar(__webpack_require__(/*! ./getCountsPerPriority-4 */ \"(rsc)/./node_modules/bullmq/dist/cjs/scripts/getCountsPerPriority-4.js\"), exports);\ntslib_1.__exportStar(__webpack_require__(/*! ./getDependencyCounts-4 */ \"(rsc)/./node_modules/bullmq/dist/cjs/scripts/getDependencyCounts-4.js\"), exports);\ntslib_1.__exportStar(__webpack_require__(/*! ./getJobScheduler-1 */ \"(rsc)/./node_modules/bullmq/dist/cjs/scripts/getJobScheduler-1.js\"), exports);\ntslib_1.__exportStar(__webpack_require__(/*! ./getMetrics-2 */ \"(rsc)/./node_modules/bullmq/dist/cjs/scripts/getMetrics-2.js\"), exports);\ntslib_1.__exportStar(__webpack_require__(/*! ./getRanges-1 */ \"(rsc)/./node_modules/bullmq/dist/cjs/scripts/getRanges-1.js\"), exports);\ntslib_1.__exportStar(__webpack_require__(/*! ./getRateLimitTtl-2 */ \"(rsc)/./node_modules/bullmq/dist/cjs/scripts/getRateLimitTtl-2.js\"), exports);\ntslib_1.__exportStar(__webpack_require__(/*! ./getState-8 */ \"(rsc)/./node_modules/bullmq/dist/cjs/scripts/getState-8.js\"), exports);\ntslib_1.__exportStar(__webpack_require__(/*! ./getStateV2-8 */ \"(rsc)/./node_modules/bullmq/dist/cjs/scripts/getStateV2-8.js\"), exports);\ntslib_1.__exportStar(__webpack_require__(/*! ./isFinished-3 */ \"(rsc)/./node_modules/bullmq/dist/cjs/scripts/isFinished-3.js\"), exports);\ntslib_1.__exportStar(__webpack_require__(/*! ./isJobInList-1 */ \"(rsc)/./node_modules/bullmq/dist/cjs/scripts/isJobInList-1.js\"), exports);\ntslib_1.__exportStar(__webpack_require__(/*! ./isMaxed-2 */ \"(rsc)/./node_modules/bullmq/dist/cjs/scripts/isMaxed-2.js\"), exports);\ntslib_1.__exportStar(__webpack_require__(/*! ./moveJobFromActiveToWait-9 */ \"(rsc)/./node_modules/bullmq/dist/cjs/scripts/moveJobFromActiveToWait-9.js\"), exports);\ntslib_1.__exportStar(__webpack_require__(/*! ./moveJobsToWait-8 */ \"(rsc)/./node_modules/bullmq/dist/cjs/scripts/moveJobsToWait-8.js\"), exports);\ntslib_1.__exportStar(__webpack_require__(/*! ./moveStalledJobsToWait-8 */ \"(rsc)/./node_modules/bullmq/dist/cjs/scripts/moveStalledJobsToWait-8.js\"), exports);\ntslib_1.__exportStar(__webpack_require__(/*! ./moveToActive-11 */ \"(rsc)/./node_modules/bullmq/dist/cjs/scripts/moveToActive-11.js\"), exports);\ntslib_1.__exportStar(__webpack_require__(/*! ./moveToDelayed-8 */ \"(rsc)/./node_modules/bullmq/dist/cjs/scripts/moveToDelayed-8.js\"), exports);\ntslib_1.__exportStar(__webpack_require__(/*! ./moveToFinished-14 */ \"(rsc)/./node_modules/bullmq/dist/cjs/scripts/moveToFinished-14.js\"), exports);\ntslib_1.__exportStar(__webpack_require__(/*! ./moveToWaitingChildren-7 */ \"(rsc)/./node_modules/bullmq/dist/cjs/scripts/moveToWaitingChildren-7.js\"), exports);\ntslib_1.__exportStar(__webpack_require__(/*! ./obliterate-2 */ \"(rsc)/./node_modules/bullmq/dist/cjs/scripts/obliterate-2.js\"), exports);\ntslib_1.__exportStar(__webpack_require__(/*! ./paginate-1 */ \"(rsc)/./node_modules/bullmq/dist/cjs/scripts/paginate-1.js\"), exports);\ntslib_1.__exportStar(__webpack_require__(/*! ./pause-7 */ \"(rsc)/./node_modules/bullmq/dist/cjs/scripts/pause-7.js\"), exports);\ntslib_1.__exportStar(__webpack_require__(/*! ./promote-9 */ \"(rsc)/./node_modules/bullmq/dist/cjs/scripts/promote-9.js\"), exports);\ntslib_1.__exportStar(__webpack_require__(/*! ./releaseLock-1 */ \"(rsc)/./node_modules/bullmq/dist/cjs/scripts/releaseLock-1.js\"), exports);\ntslib_1.__exportStar(__webpack_require__(/*! ./removeChildDependency-1 */ \"(rsc)/./node_modules/bullmq/dist/cjs/scripts/removeChildDependency-1.js\"), exports);\ntslib_1.__exportStar(__webpack_require__(/*! ./removeJob-2 */ \"(rsc)/./node_modules/bullmq/dist/cjs/scripts/removeJob-2.js\"), exports);\ntslib_1.__exportStar(__webpack_require__(/*! ./removeJobScheduler-3 */ \"(rsc)/./node_modules/bullmq/dist/cjs/scripts/removeJobScheduler-3.js\"), exports);\ntslib_1.__exportStar(__webpack_require__(/*! ./removeRepeatable-3 */ \"(rsc)/./node_modules/bullmq/dist/cjs/scripts/removeRepeatable-3.js\"), exports);\ntslib_1.__exportStar(__webpack_require__(/*! ./removeUnprocessedChildren-2 */ \"(rsc)/./node_modules/bullmq/dist/cjs/scripts/removeUnprocessedChildren-2.js\"), exports);\ntslib_1.__exportStar(__webpack_require__(/*! ./reprocessJob-8 */ \"(rsc)/./node_modules/bullmq/dist/cjs/scripts/reprocessJob-8.js\"), exports);\ntslib_1.__exportStar(__webpack_require__(/*! ./retryJob-11 */ \"(rsc)/./node_modules/bullmq/dist/cjs/scripts/retryJob-11.js\"), exports);\ntslib_1.__exportStar(__webpack_require__(/*! ./saveStacktrace-1 */ \"(rsc)/./node_modules/bullmq/dist/cjs/scripts/saveStacktrace-1.js\"), exports);\ntslib_1.__exportStar(__webpack_require__(/*! ./updateData-1 */ \"(rsc)/./node_modules/bullmq/dist/cjs/scripts/updateData-1.js\"), exports);\ntslib_1.__exportStar(__webpack_require__(/*! ./updateJobScheduler-12 */ \"(rsc)/./node_modules/bullmq/dist/cjs/scripts/updateJobScheduler-12.js\"), exports);\ntslib_1.__exportStar(__webpack_require__(/*! ./updateProgress-3 */ \"(rsc)/./node_modules/bullmq/dist/cjs/scripts/updateProgress-3.js\"), exports);\ntslib_1.__exportStar(__webpack_require__(/*! ./updateRepeatableJobMillis-1 */ \"(rsc)/./node_modules/bullmq/dist/cjs/scripts/updateRepeatableJobMillis-1.js\"), exports); //# sourceMappingURL=index.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL3NjcmlwdHMvaW5kZXguanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0QsTUFBTUMsVUFBVUMsbUJBQU9BLENBQUMsdURBQU87QUFDL0JELFFBQVFFLFlBQVksQ0FBQ0QsbUJBQU9BLENBQUMsMEZBQW1CLEdBQUdIO0FBQ25ERSxRQUFRRSxZQUFZLENBQUNELG1CQUFPQSxDQUFDLGdHQUFzQixHQUFHSDtBQUN0REUsUUFBUUUsWUFBWSxDQUFDRCxtQkFBT0EsQ0FBQyw0RUFBWSxHQUFHSDtBQUM1Q0UsUUFBUUUsWUFBWSxDQUFDRCxtQkFBT0EsQ0FBQyx3RkFBa0IsR0FBR0g7QUFDbERFLFFBQVFFLFlBQVksQ0FBQ0QsbUJBQU9BLENBQUMsa0dBQXVCLEdBQUdIO0FBQ3ZERSxRQUFRRSxZQUFZLENBQUNELG1CQUFPQSxDQUFDLGdHQUFzQixHQUFHSDtBQUN0REUsUUFBUUUsWUFBWSxDQUFDRCxtQkFBT0EsQ0FBQyw0RkFBb0IsR0FBR0g7QUFDcERFLFFBQVFFLFlBQVksQ0FBQ0QsbUJBQU9BLENBQUMsc0ZBQWlCLEdBQUdIO0FBQ2pERSxRQUFRRSxZQUFZLENBQUNELG1CQUFPQSxDQUFDLDRGQUFvQixHQUFHSDtBQUNwREUsUUFBUUUsWUFBWSxDQUFDRCxtQkFBT0EsQ0FBQyw0RkFBb0IsR0FBR0g7QUFDcERFLFFBQVFFLFlBQVksQ0FBQ0QsbUJBQU9BLENBQUMsMEVBQVcsR0FBR0g7QUFDM0NFLFFBQVFFLFlBQVksQ0FBQ0QsbUJBQU9BLENBQUMsb0ZBQWdCLEdBQUdIO0FBQ2hERSxRQUFRRSxZQUFZLENBQUNELG1CQUFPQSxDQUFDLHNGQUFpQixHQUFHSDtBQUNqREUsUUFBUUUsWUFBWSxDQUFDRCxtQkFBT0EsQ0FBQyxrRkFBZSxHQUFHSDtBQUMvQ0UsUUFBUUUsWUFBWSxDQUFDRCxtQkFBT0EsQ0FBQyx3R0FBMEIsR0FBR0g7QUFDMURFLFFBQVFFLFlBQVksQ0FBQ0QsbUJBQU9BLENBQUMsc0dBQXlCLEdBQUdIO0FBQ3pERSxRQUFRRSxZQUFZLENBQUNELG1CQUFPQSxDQUFDLDhGQUFxQixHQUFHSDtBQUNyREUsUUFBUUUsWUFBWSxDQUFDRCxtQkFBT0EsQ0FBQyxvRkFBZ0IsR0FBR0g7QUFDaERFLFFBQVFFLFlBQVksQ0FBQ0QsbUJBQU9BLENBQUMsa0ZBQWUsR0FBR0g7QUFDL0NFLFFBQVFFLFlBQVksQ0FBQ0QsbUJBQU9BLENBQUMsOEZBQXFCLEdBQUdIO0FBQ3JERSxRQUFRRSxZQUFZLENBQUNELG1CQUFPQSxDQUFDLGdGQUFjLEdBQUdIO0FBQzlDRSxRQUFRRSxZQUFZLENBQUNELG1CQUFPQSxDQUFDLG9GQUFnQixHQUFHSDtBQUNoREUsUUFBUUUsWUFBWSxDQUFDRCxtQkFBT0EsQ0FBQyxvRkFBZ0IsR0FBR0g7QUFDaERFLFFBQVFFLFlBQVksQ0FBQ0QsbUJBQU9BLENBQUMsc0ZBQWlCLEdBQUdIO0FBQ2pERSxRQUFRRSxZQUFZLENBQUNELG1CQUFPQSxDQUFDLDhFQUFhLEdBQUdIO0FBQzdDRSxRQUFRRSxZQUFZLENBQUNELG1CQUFPQSxDQUFDLDhHQUE2QixHQUFHSDtBQUM3REUsUUFBUUUsWUFBWSxDQUFDRCxtQkFBT0EsQ0FBQyw0RkFBb0IsR0FBR0g7QUFDcERFLFFBQVFFLFlBQVksQ0FBQ0QsbUJBQU9BLENBQUMsMEdBQTJCLEdBQUdIO0FBQzNERSxRQUFRRSxZQUFZLENBQUNELG1CQUFPQSxDQUFDLDBGQUFtQixHQUFHSDtBQUNuREUsUUFBUUUsWUFBWSxDQUFDRCxtQkFBT0EsQ0FBQywwRkFBbUIsR0FBR0g7QUFDbkRFLFFBQVFFLFlBQVksQ0FBQ0QsbUJBQU9BLENBQUMsOEZBQXFCLEdBQUdIO0FBQ3JERSxRQUFRRSxZQUFZLENBQUNELG1CQUFPQSxDQUFDLDBHQUEyQixHQUFHSDtBQUMzREUsUUFBUUUsWUFBWSxDQUFDRCxtQkFBT0EsQ0FBQyxvRkFBZ0IsR0FBR0g7QUFDaERFLFFBQVFFLFlBQVksQ0FBQ0QsbUJBQU9BLENBQUMsZ0ZBQWMsR0FBR0g7QUFDOUNFLFFBQVFFLFlBQVksQ0FBQ0QsbUJBQU9BLENBQUMsMEVBQVcsR0FBR0g7QUFDM0NFLFFBQVFFLFlBQVksQ0FBQ0QsbUJBQU9BLENBQUMsOEVBQWEsR0FBR0g7QUFDN0NFLFFBQVFFLFlBQVksQ0FBQ0QsbUJBQU9BLENBQUMsc0ZBQWlCLEdBQUdIO0FBQ2pERSxRQUFRRSxZQUFZLENBQUNELG1CQUFPQSxDQUFDLDBHQUEyQixHQUFHSDtBQUMzREUsUUFBUUUsWUFBWSxDQUFDRCxtQkFBT0EsQ0FBQyxrRkFBZSxHQUFHSDtBQUMvQ0UsUUFBUUUsWUFBWSxDQUFDRCxtQkFBT0EsQ0FBQyxvR0FBd0IsR0FBR0g7QUFDeERFLFFBQVFFLFlBQVksQ0FBQ0QsbUJBQU9BLENBQUMsZ0dBQXNCLEdBQUdIO0FBQ3RERSxRQUFRRSxZQUFZLENBQUNELG1CQUFPQSxDQUFDLGtIQUErQixHQUFHSDtBQUMvREUsUUFBUUUsWUFBWSxDQUFDRCxtQkFBT0EsQ0FBQyx3RkFBa0IsR0FBR0g7QUFDbERFLFFBQVFFLFlBQVksQ0FBQ0QsbUJBQU9BLENBQUMsa0ZBQWUsR0FBR0g7QUFDL0NFLFFBQVFFLFlBQVksQ0FBQ0QsbUJBQU9BLENBQUMsNEZBQW9CLEdBQUdIO0FBQ3BERSxRQUFRRSxZQUFZLENBQUNELG1CQUFPQSxDQUFDLG9GQUFnQixHQUFHSDtBQUNoREUsUUFBUUUsWUFBWSxDQUFDRCxtQkFBT0EsQ0FBQyxzR0FBeUIsR0FBR0g7QUFDekRFLFFBQVFFLFlBQVksQ0FBQ0QsbUJBQU9BLENBQUMsNEZBQW9CLEdBQUdIO0FBQ3BERSxRQUFRRSxZQUFZLENBQUNELG1CQUFPQSxDQUFDLGtIQUErQixHQUFHSCxVQUMvRCxpQ0FBaUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vbmx5ZmFucy1wbGF0Zm9ybS8uL25vZGVfbW9kdWxlcy9idWxsbXEvZGlzdC9janMvc2NyaXB0cy9pbmRleC5qcz80YzA4Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuY29uc3QgdHNsaWJfMSA9IHJlcXVpcmUoXCJ0c2xpYlwiKTtcbnRzbGliXzEuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL2FkZERlbGF5ZWRKb2ItNlwiKSwgZXhwb3J0cyk7XG50c2xpYl8xLl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi9hZGRKb2JTY2hlZHVsZXItMTFcIiksIGV4cG9ydHMpO1xudHNsaWJfMS5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vYWRkTG9nLTJcIiksIGV4cG9ydHMpO1xudHNsaWJfMS5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vYWRkUGFyZW50Sm9iLTZcIiksIGV4cG9ydHMpO1xudHNsaWJfMS5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vYWRkUHJpb3JpdGl6ZWRKb2ItOVwiKSwgZXhwb3J0cyk7XG50c2xpYl8xLl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi9hZGRSZXBlYXRhYmxlSm9iLTJcIiksIGV4cG9ydHMpO1xudHNsaWJfMS5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vYWRkU3RhbmRhcmRKb2ItOVwiKSwgZXhwb3J0cyk7XG50c2xpYl8xLl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi9jaGFuZ2VEZWxheS00XCIpLCBleHBvcnRzKTtcbnRzbGliXzEuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL2NoYW5nZVByaW9yaXR5LTdcIiksIGV4cG9ydHMpO1xudHNsaWJfMS5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vY2xlYW5Kb2JzSW5TZXQtM1wiKSwgZXhwb3J0cyk7XG50c2xpYl8xLl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi9kcmFpbi01XCIpLCBleHBvcnRzKTtcbnRzbGliXzEuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL2V4dGVuZExvY2stMlwiKSwgZXhwb3J0cyk7XG50c2xpYl8xLl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi9leHRlbmRMb2Nrcy0xXCIpLCBleHBvcnRzKTtcbnRzbGliXzEuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL2dldENvdW50cy0xXCIpLCBleHBvcnRzKTtcbnRzbGliXzEuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL2dldENvdW50c1BlclByaW9yaXR5LTRcIiksIGV4cG9ydHMpO1xudHNsaWJfMS5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vZ2V0RGVwZW5kZW5jeUNvdW50cy00XCIpLCBleHBvcnRzKTtcbnRzbGliXzEuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL2dldEpvYlNjaGVkdWxlci0xXCIpLCBleHBvcnRzKTtcbnRzbGliXzEuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL2dldE1ldHJpY3MtMlwiKSwgZXhwb3J0cyk7XG50c2xpYl8xLl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi9nZXRSYW5nZXMtMVwiKSwgZXhwb3J0cyk7XG50c2xpYl8xLl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi9nZXRSYXRlTGltaXRUdGwtMlwiKSwgZXhwb3J0cyk7XG50c2xpYl8xLl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi9nZXRTdGF0ZS04XCIpLCBleHBvcnRzKTtcbnRzbGliXzEuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL2dldFN0YXRlVjItOFwiKSwgZXhwb3J0cyk7XG50c2xpYl8xLl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi9pc0ZpbmlzaGVkLTNcIiksIGV4cG9ydHMpO1xudHNsaWJfMS5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vaXNKb2JJbkxpc3QtMVwiKSwgZXhwb3J0cyk7XG50c2xpYl8xLl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi9pc01heGVkLTJcIiksIGV4cG9ydHMpO1xudHNsaWJfMS5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vbW92ZUpvYkZyb21BY3RpdmVUb1dhaXQtOVwiKSwgZXhwb3J0cyk7XG50c2xpYl8xLl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi9tb3ZlSm9ic1RvV2FpdC04XCIpLCBleHBvcnRzKTtcbnRzbGliXzEuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL21vdmVTdGFsbGVkSm9ic1RvV2FpdC04XCIpLCBleHBvcnRzKTtcbnRzbGliXzEuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL21vdmVUb0FjdGl2ZS0xMVwiKSwgZXhwb3J0cyk7XG50c2xpYl8xLl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi9tb3ZlVG9EZWxheWVkLThcIiksIGV4cG9ydHMpO1xudHNsaWJfMS5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vbW92ZVRvRmluaXNoZWQtMTRcIiksIGV4cG9ydHMpO1xudHNsaWJfMS5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vbW92ZVRvV2FpdGluZ0NoaWxkcmVuLTdcIiksIGV4cG9ydHMpO1xudHNsaWJfMS5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vb2JsaXRlcmF0ZS0yXCIpLCBleHBvcnRzKTtcbnRzbGliXzEuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL3BhZ2luYXRlLTFcIiksIGV4cG9ydHMpO1xudHNsaWJfMS5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vcGF1c2UtN1wiKSwgZXhwb3J0cyk7XG50c2xpYl8xLl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi9wcm9tb3RlLTlcIiksIGV4cG9ydHMpO1xudHNsaWJfMS5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vcmVsZWFzZUxvY2stMVwiKSwgZXhwb3J0cyk7XG50c2xpYl8xLl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi9yZW1vdmVDaGlsZERlcGVuZGVuY3ktMVwiKSwgZXhwb3J0cyk7XG50c2xpYl8xLl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi9yZW1vdmVKb2ItMlwiKSwgZXhwb3J0cyk7XG50c2xpYl8xLl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi9yZW1vdmVKb2JTY2hlZHVsZXItM1wiKSwgZXhwb3J0cyk7XG50c2xpYl8xLl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi9yZW1vdmVSZXBlYXRhYmxlLTNcIiksIGV4cG9ydHMpO1xudHNsaWJfMS5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vcmVtb3ZlVW5wcm9jZXNzZWRDaGlsZHJlbi0yXCIpLCBleHBvcnRzKTtcbnRzbGliXzEuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL3JlcHJvY2Vzc0pvYi04XCIpLCBleHBvcnRzKTtcbnRzbGliXzEuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL3JldHJ5Sm9iLTExXCIpLCBleHBvcnRzKTtcbnRzbGliXzEuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL3NhdmVTdGFja3RyYWNlLTFcIiksIGV4cG9ydHMpO1xudHNsaWJfMS5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vdXBkYXRlRGF0YS0xXCIpLCBleHBvcnRzKTtcbnRzbGliXzEuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL3VwZGF0ZUpvYlNjaGVkdWxlci0xMlwiKSwgZXhwb3J0cyk7XG50c2xpYl8xLl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi91cGRhdGVQcm9ncmVzcy0zXCIpLCBleHBvcnRzKTtcbnRzbGliXzEuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL3VwZGF0ZVJlcGVhdGFibGVKb2JNaWxsaXMtMVwiKSwgZXhwb3J0cyk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJ0c2xpYl8xIiwicmVxdWlyZSIsIl9fZXhwb3J0U3RhciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/scripts/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/scripts/isFinished-3.js":
/*!**************************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/scripts/isFinished-3.js ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.isFinished = void 0;\nconst content = `--[[\n  Checks if a job is finished (.i.e. is in the completed or failed set)\n  Input: \n    KEYS[1] completed key\n    KEYS[2] failed key\n    KEYS[3] job key\n    ARGV[1] job id\n    ARGV[2] return value?\n  Output:\n    0 - Not finished.\n    1 - Completed.\n    2 - Failed.\n   -1 - Missing job. \n]]\nlocal rcall = redis.call\nif rcall(\"EXISTS\", KEYS[3]) ~= 1 then\n  if ARGV[2] == \"1\" then\n    return {-1,\"Missing key for job \" .. KEYS[3] .. \". isFinished\"}\n  end  \n  return -1\nend\nif rcall(\"ZSCORE\", KEYS[1], ARGV[1]) then\n  if ARGV[2] == \"1\" then\n    local returnValue = rcall(\"HGET\", KEYS[3], \"returnvalue\")\n    return {1,returnValue}\n  end\n  return 1\nend\nif rcall(\"ZSCORE\", KEYS[2], ARGV[1]) then\n  if ARGV[2] == \"1\" then\n    local failedReason = rcall(\"HGET\", KEYS[3], \"failedReason\")\n    return {2,failedReason}\n  end\n  return 2\nend\nif ARGV[2] == \"1\" then\n  return {0}\nend\nreturn 0\n`;\nexports.isFinished = {\n    name: \"isFinished\",\n    content,\n    keys: 3\n}; //# sourceMappingURL=isFinished-3.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL3NjcmlwdHMvaXNGaW5pc2hlZC0zLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCxrQkFBa0IsR0FBRyxLQUFLO0FBQzFCLE1BQU1HLFVBQVUsQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBdUNqQixDQUFDO0FBQ0RILGtCQUFrQixHQUFHO0lBQ2pCSSxNQUFNO0lBQ05EO0lBQ0FFLE1BQU07QUFDVixHQUNBLHdDQUF3QyIsInNvdXJjZXMiOlsid2VicGFjazovL29ubHlmYW5zLXBsYXRmb3JtLy4vbm9kZV9tb2R1bGVzL2J1bGxtcS9kaXN0L2Nqcy9zY3JpcHRzL2lzRmluaXNoZWQtMy5qcz84OTQyIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5pc0ZpbmlzaGVkID0gdm9pZCAwO1xuY29uc3QgY29udGVudCA9IGAtLVtbXG4gIENoZWNrcyBpZiBhIGpvYiBpcyBmaW5pc2hlZCAoLmkuZS4gaXMgaW4gdGhlIGNvbXBsZXRlZCBvciBmYWlsZWQgc2V0KVxuICBJbnB1dDogXG4gICAgS0VZU1sxXSBjb21wbGV0ZWQga2V5XG4gICAgS0VZU1syXSBmYWlsZWQga2V5XG4gICAgS0VZU1szXSBqb2Iga2V5XG4gICAgQVJHVlsxXSBqb2IgaWRcbiAgICBBUkdWWzJdIHJldHVybiB2YWx1ZT9cbiAgT3V0cHV0OlxuICAgIDAgLSBOb3QgZmluaXNoZWQuXG4gICAgMSAtIENvbXBsZXRlZC5cbiAgICAyIC0gRmFpbGVkLlxuICAgLTEgLSBNaXNzaW5nIGpvYi4gXG5dXVxubG9jYWwgcmNhbGwgPSByZWRpcy5jYWxsXG5pZiByY2FsbChcIkVYSVNUU1wiLCBLRVlTWzNdKSB+PSAxIHRoZW5cbiAgaWYgQVJHVlsyXSA9PSBcIjFcIiB0aGVuXG4gICAgcmV0dXJuIHstMSxcIk1pc3Npbmcga2V5IGZvciBqb2IgXCIgLi4gS0VZU1szXSAuLiBcIi4gaXNGaW5pc2hlZFwifVxuICBlbmQgIFxuICByZXR1cm4gLTFcbmVuZFxuaWYgcmNhbGwoXCJaU0NPUkVcIiwgS0VZU1sxXSwgQVJHVlsxXSkgdGhlblxuICBpZiBBUkdWWzJdID09IFwiMVwiIHRoZW5cbiAgICBsb2NhbCByZXR1cm5WYWx1ZSA9IHJjYWxsKFwiSEdFVFwiLCBLRVlTWzNdLCBcInJldHVybnZhbHVlXCIpXG4gICAgcmV0dXJuIHsxLHJldHVyblZhbHVlfVxuICBlbmRcbiAgcmV0dXJuIDFcbmVuZFxuaWYgcmNhbGwoXCJaU0NPUkVcIiwgS0VZU1syXSwgQVJHVlsxXSkgdGhlblxuICBpZiBBUkdWWzJdID09IFwiMVwiIHRoZW5cbiAgICBsb2NhbCBmYWlsZWRSZWFzb24gPSByY2FsbChcIkhHRVRcIiwgS0VZU1szXSwgXCJmYWlsZWRSZWFzb25cIilcbiAgICByZXR1cm4gezIsZmFpbGVkUmVhc29ufVxuICBlbmRcbiAgcmV0dXJuIDJcbmVuZFxuaWYgQVJHVlsyXSA9PSBcIjFcIiB0aGVuXG4gIHJldHVybiB7MH1cbmVuZFxucmV0dXJuIDBcbmA7XG5leHBvcnRzLmlzRmluaXNoZWQgPSB7XG4gICAgbmFtZTogJ2lzRmluaXNoZWQnLFxuICAgIGNvbnRlbnQsXG4gICAga2V5czogMyxcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pc0ZpbmlzaGVkLTMuanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiaXNGaW5pc2hlZCIsImNvbnRlbnQiLCJuYW1lIiwia2V5cyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/scripts/isFinished-3.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/scripts/isJobInList-1.js":
/*!***************************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/scripts/isJobInList-1.js ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.isJobInList = void 0;\nconst content = `--[[\n  Checks if job is in a given list.\n  Input:\n    KEYS[1]\n    ARGV[1]\n  Output:\n    1 if element found in the list.\n]]\n-- Includes\n--[[\n  Functions to check if a item belongs to a list.\n]]\nlocal function checkItemInList(list, item)\n  for _, v in pairs(list) do\n    if v == item then\n      return 1\n    end\n  end\n  return nil\nend\nlocal items = redis.call(\"LRANGE\", KEYS[1] , 0, -1)\nreturn checkItemInList(items, ARGV[1])\n`;\nexports.isJobInList = {\n    name: \"isJobInList\",\n    content,\n    keys: 1\n}; //# sourceMappingURL=isJobInList-1.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL3NjcmlwdHMvaXNKb2JJbkxpc3QtMS5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsbUJBQW1CLEdBQUcsS0FBSztBQUMzQixNQUFNRyxVQUFVLENBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFzQmpCLENBQUM7QUFDREgsbUJBQW1CLEdBQUc7SUFDbEJJLE1BQU07SUFDTkQ7SUFDQUUsTUFBTTtBQUNWLEdBQ0EseUNBQXlDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb25seWZhbnMtcGxhdGZvcm0vLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL3NjcmlwdHMvaXNKb2JJbkxpc3QtMS5qcz9jZTFjIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5pc0pvYkluTGlzdCA9IHZvaWQgMDtcbmNvbnN0IGNvbnRlbnQgPSBgLS1bW1xuICBDaGVja3MgaWYgam9iIGlzIGluIGEgZ2l2ZW4gbGlzdC5cbiAgSW5wdXQ6XG4gICAgS0VZU1sxXVxuICAgIEFSR1ZbMV1cbiAgT3V0cHV0OlxuICAgIDEgaWYgZWxlbWVudCBmb3VuZCBpbiB0aGUgbGlzdC5cbl1dXG4tLSBJbmNsdWRlc1xuLS1bW1xuICBGdW5jdGlvbnMgdG8gY2hlY2sgaWYgYSBpdGVtIGJlbG9uZ3MgdG8gYSBsaXN0LlxuXV1cbmxvY2FsIGZ1bmN0aW9uIGNoZWNrSXRlbUluTGlzdChsaXN0LCBpdGVtKVxuICBmb3IgXywgdiBpbiBwYWlycyhsaXN0KSBkb1xuICAgIGlmIHYgPT0gaXRlbSB0aGVuXG4gICAgICByZXR1cm4gMVxuICAgIGVuZFxuICBlbmRcbiAgcmV0dXJuIG5pbFxuZW5kXG5sb2NhbCBpdGVtcyA9IHJlZGlzLmNhbGwoXCJMUkFOR0VcIiwgS0VZU1sxXSAsIDAsIC0xKVxucmV0dXJuIGNoZWNrSXRlbUluTGlzdChpdGVtcywgQVJHVlsxXSlcbmA7XG5leHBvcnRzLmlzSm9iSW5MaXN0ID0ge1xuICAgIG5hbWU6ICdpc0pvYkluTGlzdCcsXG4gICAgY29udGVudCxcbiAgICBrZXlzOiAxLFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWlzSm9iSW5MaXN0LTEuanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiaXNKb2JJbkxpc3QiLCJjb250ZW50IiwibmFtZSIsImtleXMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/scripts/isJobInList-1.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/scripts/isMaxed-2.js":
/*!***********************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/scripts/isMaxed-2.js ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.isMaxed = void 0;\nconst content = `--[[\n  Checks if queue is maxed.\n  Input:\n    KEYS[1] meta key\n    KEYS[2] active key\n  Output:\n    1 if element found in the list.\n]]\nlocal rcall = redis.call\n-- Includes\n--[[\n  Function to check if queue is maxed or not.\n]]\nlocal function isQueueMaxed(queueMetaKey, activeKey)\n  local maxConcurrency = rcall(\"HGET\", queueMetaKey, \"concurrency\")\n  if maxConcurrency then\n    local activeCount = rcall(\"LLEN\", activeKey)\n    if activeCount >= tonumber(maxConcurrency) then\n      return true\n    end\n  end\n  return false\nend\nreturn isQueueMaxed(KEYS[1], KEYS[2])\n`;\nexports.isMaxed = {\n    name: \"isMaxed\",\n    content,\n    keys: 2\n}; //# sourceMappingURL=isMaxed-2.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL3NjcmlwdHMvaXNNYXhlZC0yLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCxlQUFlLEdBQUcsS0FBSztBQUN2QixNQUFNRyxVQUFVLENBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQXdCakIsQ0FBQztBQUNESCxlQUFlLEdBQUc7SUFDZEksTUFBTTtJQUNORDtJQUNBRSxNQUFNO0FBQ1YsR0FDQSxxQ0FBcUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vbmx5ZmFucy1wbGF0Zm9ybS8uL25vZGVfbW9kdWxlcy9idWxsbXEvZGlzdC9janMvc2NyaXB0cy9pc01heGVkLTIuanM/MGE1ZCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuaXNNYXhlZCA9IHZvaWQgMDtcbmNvbnN0IGNvbnRlbnQgPSBgLS1bW1xuICBDaGVja3MgaWYgcXVldWUgaXMgbWF4ZWQuXG4gIElucHV0OlxuICAgIEtFWVNbMV0gbWV0YSBrZXlcbiAgICBLRVlTWzJdIGFjdGl2ZSBrZXlcbiAgT3V0cHV0OlxuICAgIDEgaWYgZWxlbWVudCBmb3VuZCBpbiB0aGUgbGlzdC5cbl1dXG5sb2NhbCByY2FsbCA9IHJlZGlzLmNhbGxcbi0tIEluY2x1ZGVzXG4tLVtbXG4gIEZ1bmN0aW9uIHRvIGNoZWNrIGlmIHF1ZXVlIGlzIG1heGVkIG9yIG5vdC5cbl1dXG5sb2NhbCBmdW5jdGlvbiBpc1F1ZXVlTWF4ZWQocXVldWVNZXRhS2V5LCBhY3RpdmVLZXkpXG4gIGxvY2FsIG1heENvbmN1cnJlbmN5ID0gcmNhbGwoXCJIR0VUXCIsIHF1ZXVlTWV0YUtleSwgXCJjb25jdXJyZW5jeVwiKVxuICBpZiBtYXhDb25jdXJyZW5jeSB0aGVuXG4gICAgbG9jYWwgYWN0aXZlQ291bnQgPSByY2FsbChcIkxMRU5cIiwgYWN0aXZlS2V5KVxuICAgIGlmIGFjdGl2ZUNvdW50ID49IHRvbnVtYmVyKG1heENvbmN1cnJlbmN5KSB0aGVuXG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIGVuZFxuICBlbmRcbiAgcmV0dXJuIGZhbHNlXG5lbmRcbnJldHVybiBpc1F1ZXVlTWF4ZWQoS0VZU1sxXSwgS0VZU1syXSlcbmA7XG5leHBvcnRzLmlzTWF4ZWQgPSB7XG4gICAgbmFtZTogJ2lzTWF4ZWQnLFxuICAgIGNvbnRlbnQsXG4gICAga2V5czogMixcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pc01heGVkLTIuanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiaXNNYXhlZCIsImNvbnRlbnQiLCJuYW1lIiwia2V5cyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/scripts/isMaxed-2.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/scripts/moveJobFromActiveToWait-9.js":
/*!***************************************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/scripts/moveJobFromActiveToWait-9.js ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.moveJobFromActiveToWait = void 0;\nconst content = `--[[\n  Function to move job from active state to wait.\n  Input:\n    KEYS[1]  active key\n    KEYS[2]  wait key\n    KEYS[3]  stalled key\n    KEYS[4]  paused key\n    KEYS[5]  meta key\n    KEYS[6]  limiter key\n    KEYS[7]  prioritized key\n    KEYS[8]  marker key\n    KEYS[9]  event key\n    ARGV[1] job id\n    ARGV[2] lock token\n    ARGV[3] job id key\n]]\nlocal rcall = redis.call\n-- Includes\n--[[\n  Function to add job in target list and add marker if needed.\n]]\n-- Includes\n--[[\n  Add marker if needed when a job is available.\n]]\nlocal function addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)\n  if not isPausedOrMaxed then\n    rcall(\"ZADD\", markerKey, 0, \"0\")\n  end  \nend\nlocal function addJobInTargetList(targetKey, markerKey, pushCmd, isPausedOrMaxed, jobId)\n  rcall(pushCmd, targetKey, jobId)\n  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)\nend\n--[[\n  Function to push back job considering priority in front of same prioritized jobs.\n]]\nlocal function pushBackJobWithPriority(prioritizedKey, priority, jobId)\n  -- in order to put it at front of same prioritized jobs\n  -- we consider prioritized counter as 0\n  local score = priority * 0x100000000\n  rcall(\"ZADD\", prioritizedKey, score, jobId)\nend\n--[[\n  Function to get max events value or set by default 10000.\n]]\nlocal function getOrSetMaxEvents(metaKey)\n  local maxEvents = rcall(\"HGET\", metaKey, \"opts.maxLenEvents\")\n  if not maxEvents then\n    maxEvents = 10000\n    rcall(\"HSET\", metaKey, \"opts.maxLenEvents\", maxEvents)\n  end\n  return maxEvents\nend\n--[[\n  Function to check for the meta.paused key to decide if we are paused or not\n  (since an empty list and !EXISTS are not really the same).\n]]\nlocal function getTargetQueueList(queueMetaKey, activeKey, waitKey, pausedKey)\n  local queueAttributes = rcall(\"HMGET\", queueMetaKey, \"paused\", \"concurrency\", \"max\", \"duration\")\n  if queueAttributes[1] then\n    return pausedKey, true, queueAttributes[3], queueAttributes[4]\n  else\n    if queueAttributes[2] then\n      local activeCount = rcall(\"LLEN\", activeKey)\n      if activeCount >= tonumber(queueAttributes[2]) then\n        return waitKey, true, queueAttributes[3], queueAttributes[4]\n      else\n        return waitKey, false, queueAttributes[3], queueAttributes[4]\n      end\n    end\n  end\n  return waitKey, false, queueAttributes[3], queueAttributes[4]\nend\nlocal function removeLock(jobKey, stalledKey, token, jobId)\n  if token ~= \"0\" then\n    local lockKey = jobKey .. ':lock'\n    local lockToken = rcall(\"GET\", lockKey)\n    if lockToken == token then\n      rcall(\"DEL\", lockKey)\n      rcall(\"SREM\", stalledKey, jobId)\n    else\n      if lockToken then\n        -- Lock exists but token does not match\n        return -6\n      else\n        -- Lock is missing completely\n        return -2\n      end\n    end\n  end\n  return 0\nend\nlocal jobId = ARGV[1]\nlocal token = ARGV[2]\nlocal jobKey = ARGV[3]\nif rcall(\"EXISTS\", jobKey) == 0 then\n  return -1\nend\nlocal errorCode = removeLock(jobKey, KEYS[3], token, jobId)\nif errorCode < 0 then\n  return errorCode\nend\nlocal metaKey = KEYS[5]\nlocal removed = rcall(\"LREM\", KEYS[1], 1, jobId)\nif removed > 0 then\n  local target, isPausedOrMaxed = getTargetQueueList(metaKey, KEYS[1], KEYS[2], KEYS[4])\n  local priority = tonumber(rcall(\"HGET\", ARGV[3], \"priority\")) or 0\n  if priority > 0 then\n    pushBackJobWithPriority(KEYS[7], priority, jobId)\n  else\n    addJobInTargetList(target, KEYS[8], \"RPUSH\", isPausedOrMaxed, jobId)\n  end\n  local maxEvents = getOrSetMaxEvents(metaKey)\n  -- Emit waiting event\n  rcall(\"XADD\", KEYS[9], \"MAXLEN\", \"~\", maxEvents, \"*\", \"event\", \"waiting\",\n    \"jobId\", jobId, \"prev\", \"active\")\nend\nlocal pttl = rcall(\"PTTL\", KEYS[6])\nif pttl > 0 then\n  return pttl\nelse\n  return 0\nend\n`;\nexports.moveJobFromActiveToWait = {\n    name: \"moveJobFromActiveToWait\",\n    content,\n    keys: 9\n}; //# sourceMappingURL=moveJobFromActiveToWait-9.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL3NjcmlwdHMvbW92ZUpvYkZyb21BY3RpdmVUb1dhaXQtOS5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsK0JBQStCLEdBQUcsS0FBSztBQUN2QyxNQUFNRyxVQUFVLENBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUE0SGpCLENBQUM7QUFDREgsK0JBQStCLEdBQUc7SUFDOUJJLE1BQU07SUFDTkQ7SUFDQUUsTUFBTTtBQUNWLEdBQ0EscURBQXFEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb25seWZhbnMtcGxhdGZvcm0vLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL3NjcmlwdHMvbW92ZUpvYkZyb21BY3RpdmVUb1dhaXQtOS5qcz8yZjE4Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5tb3ZlSm9iRnJvbUFjdGl2ZVRvV2FpdCA9IHZvaWQgMDtcbmNvbnN0IGNvbnRlbnQgPSBgLS1bW1xuICBGdW5jdGlvbiB0byBtb3ZlIGpvYiBmcm9tIGFjdGl2ZSBzdGF0ZSB0byB3YWl0LlxuICBJbnB1dDpcbiAgICBLRVlTWzFdICBhY3RpdmUga2V5XG4gICAgS0VZU1syXSAgd2FpdCBrZXlcbiAgICBLRVlTWzNdICBzdGFsbGVkIGtleVxuICAgIEtFWVNbNF0gIHBhdXNlZCBrZXlcbiAgICBLRVlTWzVdICBtZXRhIGtleVxuICAgIEtFWVNbNl0gIGxpbWl0ZXIga2V5XG4gICAgS0VZU1s3XSAgcHJpb3JpdGl6ZWQga2V5XG4gICAgS0VZU1s4XSAgbWFya2VyIGtleVxuICAgIEtFWVNbOV0gIGV2ZW50IGtleVxuICAgIEFSR1ZbMV0gam9iIGlkXG4gICAgQVJHVlsyXSBsb2NrIHRva2VuXG4gICAgQVJHVlszXSBqb2IgaWQga2V5XG5dXVxubG9jYWwgcmNhbGwgPSByZWRpcy5jYWxsXG4tLSBJbmNsdWRlc1xuLS1bW1xuICBGdW5jdGlvbiB0byBhZGQgam9iIGluIHRhcmdldCBsaXN0IGFuZCBhZGQgbWFya2VyIGlmIG5lZWRlZC5cbl1dXG4tLSBJbmNsdWRlc1xuLS1bW1xuICBBZGQgbWFya2VyIGlmIG5lZWRlZCB3aGVuIGEgam9iIGlzIGF2YWlsYWJsZS5cbl1dXG5sb2NhbCBmdW5jdGlvbiBhZGRCYXNlTWFya2VySWZOZWVkZWQobWFya2VyS2V5LCBpc1BhdXNlZE9yTWF4ZWQpXG4gIGlmIG5vdCBpc1BhdXNlZE9yTWF4ZWQgdGhlblxuICAgIHJjYWxsKFwiWkFERFwiLCBtYXJrZXJLZXksIDAsIFwiMFwiKVxuICBlbmQgIFxuZW5kXG5sb2NhbCBmdW5jdGlvbiBhZGRKb2JJblRhcmdldExpc3QodGFyZ2V0S2V5LCBtYXJrZXJLZXksIHB1c2hDbWQsIGlzUGF1c2VkT3JNYXhlZCwgam9iSWQpXG4gIHJjYWxsKHB1c2hDbWQsIHRhcmdldEtleSwgam9iSWQpXG4gIGFkZEJhc2VNYXJrZXJJZk5lZWRlZChtYXJrZXJLZXksIGlzUGF1c2VkT3JNYXhlZClcbmVuZFxuLS1bW1xuICBGdW5jdGlvbiB0byBwdXNoIGJhY2sgam9iIGNvbnNpZGVyaW5nIHByaW9yaXR5IGluIGZyb250IG9mIHNhbWUgcHJpb3JpdGl6ZWQgam9icy5cbl1dXG5sb2NhbCBmdW5jdGlvbiBwdXNoQmFja0pvYldpdGhQcmlvcml0eShwcmlvcml0aXplZEtleSwgcHJpb3JpdHksIGpvYklkKVxuICAtLSBpbiBvcmRlciB0byBwdXQgaXQgYXQgZnJvbnQgb2Ygc2FtZSBwcmlvcml0aXplZCBqb2JzXG4gIC0tIHdlIGNvbnNpZGVyIHByaW9yaXRpemVkIGNvdW50ZXIgYXMgMFxuICBsb2NhbCBzY29yZSA9IHByaW9yaXR5ICogMHgxMDAwMDAwMDBcbiAgcmNhbGwoXCJaQUREXCIsIHByaW9yaXRpemVkS2V5LCBzY29yZSwgam9iSWQpXG5lbmRcbi0tW1tcbiAgRnVuY3Rpb24gdG8gZ2V0IG1heCBldmVudHMgdmFsdWUgb3Igc2V0IGJ5IGRlZmF1bHQgMTAwMDAuXG5dXVxubG9jYWwgZnVuY3Rpb24gZ2V0T3JTZXRNYXhFdmVudHMobWV0YUtleSlcbiAgbG9jYWwgbWF4RXZlbnRzID0gcmNhbGwoXCJIR0VUXCIsIG1ldGFLZXksIFwib3B0cy5tYXhMZW5FdmVudHNcIilcbiAgaWYgbm90IG1heEV2ZW50cyB0aGVuXG4gICAgbWF4RXZlbnRzID0gMTAwMDBcbiAgICByY2FsbChcIkhTRVRcIiwgbWV0YUtleSwgXCJvcHRzLm1heExlbkV2ZW50c1wiLCBtYXhFdmVudHMpXG4gIGVuZFxuICByZXR1cm4gbWF4RXZlbnRzXG5lbmRcbi0tW1tcbiAgRnVuY3Rpb24gdG8gY2hlY2sgZm9yIHRoZSBtZXRhLnBhdXNlZCBrZXkgdG8gZGVjaWRlIGlmIHdlIGFyZSBwYXVzZWQgb3Igbm90XG4gIChzaW5jZSBhbiBlbXB0eSBsaXN0IGFuZCAhRVhJU1RTIGFyZSBub3QgcmVhbGx5IHRoZSBzYW1lKS5cbl1dXG5sb2NhbCBmdW5jdGlvbiBnZXRUYXJnZXRRdWV1ZUxpc3QocXVldWVNZXRhS2V5LCBhY3RpdmVLZXksIHdhaXRLZXksIHBhdXNlZEtleSlcbiAgbG9jYWwgcXVldWVBdHRyaWJ1dGVzID0gcmNhbGwoXCJITUdFVFwiLCBxdWV1ZU1ldGFLZXksIFwicGF1c2VkXCIsIFwiY29uY3VycmVuY3lcIiwgXCJtYXhcIiwgXCJkdXJhdGlvblwiKVxuICBpZiBxdWV1ZUF0dHJpYnV0ZXNbMV0gdGhlblxuICAgIHJldHVybiBwYXVzZWRLZXksIHRydWUsIHF1ZXVlQXR0cmlidXRlc1szXSwgcXVldWVBdHRyaWJ1dGVzWzRdXG4gIGVsc2VcbiAgICBpZiBxdWV1ZUF0dHJpYnV0ZXNbMl0gdGhlblxuICAgICAgbG9jYWwgYWN0aXZlQ291bnQgPSByY2FsbChcIkxMRU5cIiwgYWN0aXZlS2V5KVxuICAgICAgaWYgYWN0aXZlQ291bnQgPj0gdG9udW1iZXIocXVldWVBdHRyaWJ1dGVzWzJdKSB0aGVuXG4gICAgICAgIHJldHVybiB3YWl0S2V5LCB0cnVlLCBxdWV1ZUF0dHJpYnV0ZXNbM10sIHF1ZXVlQXR0cmlidXRlc1s0XVxuICAgICAgZWxzZVxuICAgICAgICByZXR1cm4gd2FpdEtleSwgZmFsc2UsIHF1ZXVlQXR0cmlidXRlc1szXSwgcXVldWVBdHRyaWJ1dGVzWzRdXG4gICAgICBlbmRcbiAgICBlbmRcbiAgZW5kXG4gIHJldHVybiB3YWl0S2V5LCBmYWxzZSwgcXVldWVBdHRyaWJ1dGVzWzNdLCBxdWV1ZUF0dHJpYnV0ZXNbNF1cbmVuZFxubG9jYWwgZnVuY3Rpb24gcmVtb3ZlTG9jayhqb2JLZXksIHN0YWxsZWRLZXksIHRva2VuLCBqb2JJZClcbiAgaWYgdG9rZW4gfj0gXCIwXCIgdGhlblxuICAgIGxvY2FsIGxvY2tLZXkgPSBqb2JLZXkgLi4gJzpsb2NrJ1xuICAgIGxvY2FsIGxvY2tUb2tlbiA9IHJjYWxsKFwiR0VUXCIsIGxvY2tLZXkpXG4gICAgaWYgbG9ja1Rva2VuID09IHRva2VuIHRoZW5cbiAgICAgIHJjYWxsKFwiREVMXCIsIGxvY2tLZXkpXG4gICAgICByY2FsbChcIlNSRU1cIiwgc3RhbGxlZEtleSwgam9iSWQpXG4gICAgZWxzZVxuICAgICAgaWYgbG9ja1Rva2VuIHRoZW5cbiAgICAgICAgLS0gTG9jayBleGlzdHMgYnV0IHRva2VuIGRvZXMgbm90IG1hdGNoXG4gICAgICAgIHJldHVybiAtNlxuICAgICAgZWxzZVxuICAgICAgICAtLSBMb2NrIGlzIG1pc3NpbmcgY29tcGxldGVseVxuICAgICAgICByZXR1cm4gLTJcbiAgICAgIGVuZFxuICAgIGVuZFxuICBlbmRcbiAgcmV0dXJuIDBcbmVuZFxubG9jYWwgam9iSWQgPSBBUkdWWzFdXG5sb2NhbCB0b2tlbiA9IEFSR1ZbMl1cbmxvY2FsIGpvYktleSA9IEFSR1ZbM11cbmlmIHJjYWxsKFwiRVhJU1RTXCIsIGpvYktleSkgPT0gMCB0aGVuXG4gIHJldHVybiAtMVxuZW5kXG5sb2NhbCBlcnJvckNvZGUgPSByZW1vdmVMb2NrKGpvYktleSwgS0VZU1szXSwgdG9rZW4sIGpvYklkKVxuaWYgZXJyb3JDb2RlIDwgMCB0aGVuXG4gIHJldHVybiBlcnJvckNvZGVcbmVuZFxubG9jYWwgbWV0YUtleSA9IEtFWVNbNV1cbmxvY2FsIHJlbW92ZWQgPSByY2FsbChcIkxSRU1cIiwgS0VZU1sxXSwgMSwgam9iSWQpXG5pZiByZW1vdmVkID4gMCB0aGVuXG4gIGxvY2FsIHRhcmdldCwgaXNQYXVzZWRPck1heGVkID0gZ2V0VGFyZ2V0UXVldWVMaXN0KG1ldGFLZXksIEtFWVNbMV0sIEtFWVNbMl0sIEtFWVNbNF0pXG4gIGxvY2FsIHByaW9yaXR5ID0gdG9udW1iZXIocmNhbGwoXCJIR0VUXCIsIEFSR1ZbM10sIFwicHJpb3JpdHlcIikpIG9yIDBcbiAgaWYgcHJpb3JpdHkgPiAwIHRoZW5cbiAgICBwdXNoQmFja0pvYldpdGhQcmlvcml0eShLRVlTWzddLCBwcmlvcml0eSwgam9iSWQpXG4gIGVsc2VcbiAgICBhZGRKb2JJblRhcmdldExpc3QodGFyZ2V0LCBLRVlTWzhdLCBcIlJQVVNIXCIsIGlzUGF1c2VkT3JNYXhlZCwgam9iSWQpXG4gIGVuZFxuICBsb2NhbCBtYXhFdmVudHMgPSBnZXRPclNldE1heEV2ZW50cyhtZXRhS2V5KVxuICAtLSBFbWl0IHdhaXRpbmcgZXZlbnRcbiAgcmNhbGwoXCJYQUREXCIsIEtFWVNbOV0sIFwiTUFYTEVOXCIsIFwiflwiLCBtYXhFdmVudHMsIFwiKlwiLCBcImV2ZW50XCIsIFwid2FpdGluZ1wiLFxuICAgIFwiam9iSWRcIiwgam9iSWQsIFwicHJldlwiLCBcImFjdGl2ZVwiKVxuZW5kXG5sb2NhbCBwdHRsID0gcmNhbGwoXCJQVFRMXCIsIEtFWVNbNl0pXG5pZiBwdHRsID4gMCB0aGVuXG4gIHJldHVybiBwdHRsXG5lbHNlXG4gIHJldHVybiAwXG5lbmRcbmA7XG5leHBvcnRzLm1vdmVKb2JGcm9tQWN0aXZlVG9XYWl0ID0ge1xuICAgIG5hbWU6ICdtb3ZlSm9iRnJvbUFjdGl2ZVRvV2FpdCcsXG4gICAgY29udGVudCxcbiAgICBrZXlzOiA5LFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1vdmVKb2JGcm9tQWN0aXZlVG9XYWl0LTkuanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwibW92ZUpvYkZyb21BY3RpdmVUb1dhaXQiLCJjb250ZW50IiwibmFtZSIsImtleXMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/scripts/moveJobFromActiveToWait-9.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/scripts/moveJobsToWait-8.js":
/*!******************************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/scripts/moveJobsToWait-8.js ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.moveJobsToWait = void 0;\nconst content = `--[[\n  Move completed, failed or delayed jobs to wait.\n  Note: Does not support jobs with priorities.\n  Input:\n    KEYS[1] base key\n    KEYS[2] events stream\n    KEYS[3] state key (failed, completed, delayed)\n    KEYS[4] 'wait'\n    KEYS[5] 'paused'\n    KEYS[6] 'meta'\n    KEYS[7] 'active'\n    KEYS[8] 'marker'\n    ARGV[1] count\n    ARGV[2] timestamp\n    ARGV[3] prev state\n  Output:\n    1  means the operation is not completed\n    0  means the operation is completed\n]]\nlocal maxCount = tonumber(ARGV[1])\nlocal timestamp = tonumber(ARGV[2])\nlocal rcall = redis.call;\n-- Includes\n--[[\n  Add marker if needed when a job is available.\n]]\nlocal function addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)\n  if not isPausedOrMaxed then\n    rcall(\"ZADD\", markerKey, 0, \"0\")\n  end  \nend\n--[[\n  Function to loop in batches.\n  Just a bit of warning, some commands as ZREM\n  could receive a maximum of 7000 parameters per call.\n]]\nlocal function batches(n, batchSize)\n  local i = 0\n  return function()\n    local from = i * batchSize + 1\n    i = i + 1\n    if (from <= n) then\n      local to = math.min(from + batchSize - 1, n)\n      return from, to\n    end\n  end\nend\n--[[\n  Function to get max events value or set by default 10000.\n]]\nlocal function getOrSetMaxEvents(metaKey)\n  local maxEvents = rcall(\"HGET\", metaKey, \"opts.maxLenEvents\")\n  if not maxEvents then\n    maxEvents = 10000\n    rcall(\"HSET\", metaKey, \"opts.maxLenEvents\", maxEvents)\n  end\n  return maxEvents\nend\n--[[\n  Function to check for the meta.paused key to decide if we are paused or not\n  (since an empty list and !EXISTS are not really the same).\n]]\nlocal function getTargetQueueList(queueMetaKey, activeKey, waitKey, pausedKey)\n  local queueAttributes = rcall(\"HMGET\", queueMetaKey, \"paused\", \"concurrency\", \"max\", \"duration\")\n  if queueAttributes[1] then\n    return pausedKey, true, queueAttributes[3], queueAttributes[4]\n  else\n    if queueAttributes[2] then\n      local activeCount = rcall(\"LLEN\", activeKey)\n      if activeCount >= tonumber(queueAttributes[2]) then\n        return waitKey, true, queueAttributes[3], queueAttributes[4]\n      else\n        return waitKey, false, queueAttributes[3], queueAttributes[4]\n      end\n    end\n  end\n  return waitKey, false, queueAttributes[3], queueAttributes[4]\nend\nlocal metaKey = KEYS[6]\nlocal target, isPausedOrMaxed = getTargetQueueList(metaKey, KEYS[7], KEYS[4], KEYS[5])\nlocal jobs = rcall('ZRANGEBYSCORE', KEYS[3], 0, timestamp, 'LIMIT', 0, maxCount)\nif (#jobs > 0) then\n    if ARGV[3] == \"failed\" then\n        for i, key in ipairs(jobs) do\n            local jobKey = KEYS[1] .. key\n            rcall(\"HDEL\", jobKey, \"finishedOn\", \"processedOn\", \"failedReason\")\n        end\n    elseif ARGV[3] == \"completed\" then\n        for i, key in ipairs(jobs) do\n            local jobKey = KEYS[1] .. key\n            rcall(\"HDEL\", jobKey, \"finishedOn\", \"processedOn\", \"returnvalue\")\n        end\n    end\n    local maxEvents = getOrSetMaxEvents(metaKey)\n    for i, key in ipairs(jobs) do\n        -- Emit waiting event\n        rcall(\"XADD\", KEYS[2], \"MAXLEN\", \"~\", maxEvents, \"*\", \"event\",\n              \"waiting\", \"jobId\", key, \"prev\", ARGV[3]);\n    end\n    for from, to in batches(#jobs, 7000) do\n        rcall(\"ZREM\", KEYS[3], unpack(jobs, from, to))\n        rcall(\"LPUSH\", target, unpack(jobs, from, to))\n    end\n    addBaseMarkerIfNeeded(KEYS[8], isPausedOrMaxed)\nend\nmaxCount = maxCount - #jobs\nif (maxCount <= 0) then return 1 end\nreturn 0\n`;\nexports.moveJobsToWait = {\n    name: \"moveJobsToWait\",\n    content,\n    keys: 8\n}; //# sourceMappingURL=moveJobsToWait-8.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL3NjcmlwdHMvbW92ZUpvYnNUb1dhaXQtOC5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsc0JBQXNCLEdBQUcsS0FBSztBQUM5QixNQUFNRyxVQUFVLENBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQTRHakIsQ0FBQztBQUNESCxzQkFBc0IsR0FBRztJQUNyQkksTUFBTTtJQUNORDtJQUNBRSxNQUFNO0FBQ1YsR0FDQSw0Q0FBNEMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vbmx5ZmFucy1wbGF0Zm9ybS8uL25vZGVfbW9kdWxlcy9idWxsbXEvZGlzdC9janMvc2NyaXB0cy9tb3ZlSm9ic1RvV2FpdC04LmpzP2U3MDQiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLm1vdmVKb2JzVG9XYWl0ID0gdm9pZCAwO1xuY29uc3QgY29udGVudCA9IGAtLVtbXG4gIE1vdmUgY29tcGxldGVkLCBmYWlsZWQgb3IgZGVsYXllZCBqb2JzIHRvIHdhaXQuXG4gIE5vdGU6IERvZXMgbm90IHN1cHBvcnQgam9icyB3aXRoIHByaW9yaXRpZXMuXG4gIElucHV0OlxuICAgIEtFWVNbMV0gYmFzZSBrZXlcbiAgICBLRVlTWzJdIGV2ZW50cyBzdHJlYW1cbiAgICBLRVlTWzNdIHN0YXRlIGtleSAoZmFpbGVkLCBjb21wbGV0ZWQsIGRlbGF5ZWQpXG4gICAgS0VZU1s0XSAnd2FpdCdcbiAgICBLRVlTWzVdICdwYXVzZWQnXG4gICAgS0VZU1s2XSAnbWV0YSdcbiAgICBLRVlTWzddICdhY3RpdmUnXG4gICAgS0VZU1s4XSAnbWFya2VyJ1xuICAgIEFSR1ZbMV0gY291bnRcbiAgICBBUkdWWzJdIHRpbWVzdGFtcFxuICAgIEFSR1ZbM10gcHJldiBzdGF0ZVxuICBPdXRwdXQ6XG4gICAgMSAgbWVhbnMgdGhlIG9wZXJhdGlvbiBpcyBub3QgY29tcGxldGVkXG4gICAgMCAgbWVhbnMgdGhlIG9wZXJhdGlvbiBpcyBjb21wbGV0ZWRcbl1dXG5sb2NhbCBtYXhDb3VudCA9IHRvbnVtYmVyKEFSR1ZbMV0pXG5sb2NhbCB0aW1lc3RhbXAgPSB0b251bWJlcihBUkdWWzJdKVxubG9jYWwgcmNhbGwgPSByZWRpcy5jYWxsO1xuLS0gSW5jbHVkZXNcbi0tW1tcbiAgQWRkIG1hcmtlciBpZiBuZWVkZWQgd2hlbiBhIGpvYiBpcyBhdmFpbGFibGUuXG5dXVxubG9jYWwgZnVuY3Rpb24gYWRkQmFzZU1hcmtlcklmTmVlZGVkKG1hcmtlcktleSwgaXNQYXVzZWRPck1heGVkKVxuICBpZiBub3QgaXNQYXVzZWRPck1heGVkIHRoZW5cbiAgICByY2FsbChcIlpBRERcIiwgbWFya2VyS2V5LCAwLCBcIjBcIilcbiAgZW5kICBcbmVuZFxuLS1bW1xuICBGdW5jdGlvbiB0byBsb29wIGluIGJhdGNoZXMuXG4gIEp1c3QgYSBiaXQgb2Ygd2FybmluZywgc29tZSBjb21tYW5kcyBhcyBaUkVNXG4gIGNvdWxkIHJlY2VpdmUgYSBtYXhpbXVtIG9mIDcwMDAgcGFyYW1ldGVycyBwZXIgY2FsbC5cbl1dXG5sb2NhbCBmdW5jdGlvbiBiYXRjaGVzKG4sIGJhdGNoU2l6ZSlcbiAgbG9jYWwgaSA9IDBcbiAgcmV0dXJuIGZ1bmN0aW9uKClcbiAgICBsb2NhbCBmcm9tID0gaSAqIGJhdGNoU2l6ZSArIDFcbiAgICBpID0gaSArIDFcbiAgICBpZiAoZnJvbSA8PSBuKSB0aGVuXG4gICAgICBsb2NhbCB0byA9IG1hdGgubWluKGZyb20gKyBiYXRjaFNpemUgLSAxLCBuKVxuICAgICAgcmV0dXJuIGZyb20sIHRvXG4gICAgZW5kXG4gIGVuZFxuZW5kXG4tLVtbXG4gIEZ1bmN0aW9uIHRvIGdldCBtYXggZXZlbnRzIHZhbHVlIG9yIHNldCBieSBkZWZhdWx0IDEwMDAwLlxuXV1cbmxvY2FsIGZ1bmN0aW9uIGdldE9yU2V0TWF4RXZlbnRzKG1ldGFLZXkpXG4gIGxvY2FsIG1heEV2ZW50cyA9IHJjYWxsKFwiSEdFVFwiLCBtZXRhS2V5LCBcIm9wdHMubWF4TGVuRXZlbnRzXCIpXG4gIGlmIG5vdCBtYXhFdmVudHMgdGhlblxuICAgIG1heEV2ZW50cyA9IDEwMDAwXG4gICAgcmNhbGwoXCJIU0VUXCIsIG1ldGFLZXksIFwib3B0cy5tYXhMZW5FdmVudHNcIiwgbWF4RXZlbnRzKVxuICBlbmRcbiAgcmV0dXJuIG1heEV2ZW50c1xuZW5kXG4tLVtbXG4gIEZ1bmN0aW9uIHRvIGNoZWNrIGZvciB0aGUgbWV0YS5wYXVzZWQga2V5IHRvIGRlY2lkZSBpZiB3ZSBhcmUgcGF1c2VkIG9yIG5vdFxuICAoc2luY2UgYW4gZW1wdHkgbGlzdCBhbmQgIUVYSVNUUyBhcmUgbm90IHJlYWxseSB0aGUgc2FtZSkuXG5dXVxubG9jYWwgZnVuY3Rpb24gZ2V0VGFyZ2V0UXVldWVMaXN0KHF1ZXVlTWV0YUtleSwgYWN0aXZlS2V5LCB3YWl0S2V5LCBwYXVzZWRLZXkpXG4gIGxvY2FsIHF1ZXVlQXR0cmlidXRlcyA9IHJjYWxsKFwiSE1HRVRcIiwgcXVldWVNZXRhS2V5LCBcInBhdXNlZFwiLCBcImNvbmN1cnJlbmN5XCIsIFwibWF4XCIsIFwiZHVyYXRpb25cIilcbiAgaWYgcXVldWVBdHRyaWJ1dGVzWzFdIHRoZW5cbiAgICByZXR1cm4gcGF1c2VkS2V5LCB0cnVlLCBxdWV1ZUF0dHJpYnV0ZXNbM10sIHF1ZXVlQXR0cmlidXRlc1s0XVxuICBlbHNlXG4gICAgaWYgcXVldWVBdHRyaWJ1dGVzWzJdIHRoZW5cbiAgICAgIGxvY2FsIGFjdGl2ZUNvdW50ID0gcmNhbGwoXCJMTEVOXCIsIGFjdGl2ZUtleSlcbiAgICAgIGlmIGFjdGl2ZUNvdW50ID49IHRvbnVtYmVyKHF1ZXVlQXR0cmlidXRlc1syXSkgdGhlblxuICAgICAgICByZXR1cm4gd2FpdEtleSwgdHJ1ZSwgcXVldWVBdHRyaWJ1dGVzWzNdLCBxdWV1ZUF0dHJpYnV0ZXNbNF1cbiAgICAgIGVsc2VcbiAgICAgICAgcmV0dXJuIHdhaXRLZXksIGZhbHNlLCBxdWV1ZUF0dHJpYnV0ZXNbM10sIHF1ZXVlQXR0cmlidXRlc1s0XVxuICAgICAgZW5kXG4gICAgZW5kXG4gIGVuZFxuICByZXR1cm4gd2FpdEtleSwgZmFsc2UsIHF1ZXVlQXR0cmlidXRlc1szXSwgcXVldWVBdHRyaWJ1dGVzWzRdXG5lbmRcbmxvY2FsIG1ldGFLZXkgPSBLRVlTWzZdXG5sb2NhbCB0YXJnZXQsIGlzUGF1c2VkT3JNYXhlZCA9IGdldFRhcmdldFF1ZXVlTGlzdChtZXRhS2V5LCBLRVlTWzddLCBLRVlTWzRdLCBLRVlTWzVdKVxubG9jYWwgam9icyA9IHJjYWxsKCdaUkFOR0VCWVNDT1JFJywgS0VZU1szXSwgMCwgdGltZXN0YW1wLCAnTElNSVQnLCAwLCBtYXhDb3VudClcbmlmICgjam9icyA+IDApIHRoZW5cbiAgICBpZiBBUkdWWzNdID09IFwiZmFpbGVkXCIgdGhlblxuICAgICAgICBmb3IgaSwga2V5IGluIGlwYWlycyhqb2JzKSBkb1xuICAgICAgICAgICAgbG9jYWwgam9iS2V5ID0gS0VZU1sxXSAuLiBrZXlcbiAgICAgICAgICAgIHJjYWxsKFwiSERFTFwiLCBqb2JLZXksIFwiZmluaXNoZWRPblwiLCBcInByb2Nlc3NlZE9uXCIsIFwiZmFpbGVkUmVhc29uXCIpXG4gICAgICAgIGVuZFxuICAgIGVsc2VpZiBBUkdWWzNdID09IFwiY29tcGxldGVkXCIgdGhlblxuICAgICAgICBmb3IgaSwga2V5IGluIGlwYWlycyhqb2JzKSBkb1xuICAgICAgICAgICAgbG9jYWwgam9iS2V5ID0gS0VZU1sxXSAuLiBrZXlcbiAgICAgICAgICAgIHJjYWxsKFwiSERFTFwiLCBqb2JLZXksIFwiZmluaXNoZWRPblwiLCBcInByb2Nlc3NlZE9uXCIsIFwicmV0dXJudmFsdWVcIilcbiAgICAgICAgZW5kXG4gICAgZW5kXG4gICAgbG9jYWwgbWF4RXZlbnRzID0gZ2V0T3JTZXRNYXhFdmVudHMobWV0YUtleSlcbiAgICBmb3IgaSwga2V5IGluIGlwYWlycyhqb2JzKSBkb1xuICAgICAgICAtLSBFbWl0IHdhaXRpbmcgZXZlbnRcbiAgICAgICAgcmNhbGwoXCJYQUREXCIsIEtFWVNbMl0sIFwiTUFYTEVOXCIsIFwiflwiLCBtYXhFdmVudHMsIFwiKlwiLCBcImV2ZW50XCIsXG4gICAgICAgICAgICAgIFwid2FpdGluZ1wiLCBcImpvYklkXCIsIGtleSwgXCJwcmV2XCIsIEFSR1ZbM10pO1xuICAgIGVuZFxuICAgIGZvciBmcm9tLCB0byBpbiBiYXRjaGVzKCNqb2JzLCA3MDAwKSBkb1xuICAgICAgICByY2FsbChcIlpSRU1cIiwgS0VZU1szXSwgdW5wYWNrKGpvYnMsIGZyb20sIHRvKSlcbiAgICAgICAgcmNhbGwoXCJMUFVTSFwiLCB0YXJnZXQsIHVucGFjayhqb2JzLCBmcm9tLCB0bykpXG4gICAgZW5kXG4gICAgYWRkQmFzZU1hcmtlcklmTmVlZGVkKEtFWVNbOF0sIGlzUGF1c2VkT3JNYXhlZClcbmVuZFxubWF4Q291bnQgPSBtYXhDb3VudCAtICNqb2JzXG5pZiAobWF4Q291bnQgPD0gMCkgdGhlbiByZXR1cm4gMSBlbmRcbnJldHVybiAwXG5gO1xuZXhwb3J0cy5tb3ZlSm9ic1RvV2FpdCA9IHtcbiAgICBuYW1lOiAnbW92ZUpvYnNUb1dhaXQnLFxuICAgIGNvbnRlbnQsXG4gICAga2V5czogOCxcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1tb3ZlSm9ic1RvV2FpdC04LmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsIm1vdmVKb2JzVG9XYWl0IiwiY29udGVudCIsIm5hbWUiLCJrZXlzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/scripts/moveJobsToWait-8.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/scripts/moveStalledJobsToWait-8.js":
/*!*************************************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/scripts/moveStalledJobsToWait-8.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.moveStalledJobsToWait = void 0;\nconst content = `--[[\n  Move stalled jobs to wait.\n    Input:\n      KEYS[1] 'stalled' (SET)\n      KEYS[2] 'wait',   (LIST)\n      KEYS[3] 'active', (LIST)\n      KEYS[4] 'stalled-check', (KEY)\n      KEYS[5] 'meta', (KEY)\n      KEYS[6] 'paused', (LIST)\n      KEYS[7] 'marker'\n      KEYS[8] 'event stream' (STREAM)\n      ARGV[1]  Max stalled job count\n      ARGV[2]  queue.toKey('')\n      ARGV[3]  timestamp\n      ARGV[4]  max check time\n    Events:\n      'stalled' with stalled job id.\n]]\nlocal rcall = redis.call\n-- Includes\n--[[\n  Function to add job in target list and add marker if needed.\n]]\n-- Includes\n--[[\n  Add marker if needed when a job is available.\n]]\nlocal function addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)\n  if not isPausedOrMaxed then\n    rcall(\"ZADD\", markerKey, 0, \"0\")\n  end  \nend\nlocal function addJobInTargetList(targetKey, markerKey, pushCmd, isPausedOrMaxed, jobId)\n  rcall(pushCmd, targetKey, jobId)\n  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)\nend\n--[[\n  Function to loop in batches.\n  Just a bit of warning, some commands as ZREM\n  could receive a maximum of 7000 parameters per call.\n]]\nlocal function batches(n, batchSize)\n  local i = 0\n  return function()\n    local from = i * batchSize + 1\n    i = i + 1\n    if (from <= n) then\n      local to = math.min(from + batchSize - 1, n)\n      return from, to\n    end\n  end\nend\n--[[\n  Function to move job to wait to be picked up by a waiting worker.\n]]\n-- Includes\n--[[\n  Function to check for the meta.paused key to decide if we are paused or not\n  (since an empty list and !EXISTS are not really the same).\n]]\nlocal function getTargetQueueList(queueMetaKey, activeKey, waitKey, pausedKey)\n  local queueAttributes = rcall(\"HMGET\", queueMetaKey, \"paused\", \"concurrency\", \"max\", \"duration\")\n  if queueAttributes[1] then\n    return pausedKey, true, queueAttributes[3], queueAttributes[4]\n  else\n    if queueAttributes[2] then\n      local activeCount = rcall(\"LLEN\", activeKey)\n      if activeCount >= tonumber(queueAttributes[2]) then\n        return waitKey, true, queueAttributes[3], queueAttributes[4]\n      else\n        return waitKey, false, queueAttributes[3], queueAttributes[4]\n      end\n    end\n  end\n  return waitKey, false, queueAttributes[3], queueAttributes[4]\nend\nlocal function moveJobToWait(metaKey, activeKey, waitKey, pausedKey, markerKey, eventStreamKey,\n  jobId, pushCmd)\n  local target, isPausedOrMaxed = getTargetQueueList(metaKey, activeKey, waitKey, pausedKey)\n  addJobInTargetList(target, markerKey, pushCmd, isPausedOrMaxed, jobId)\n  rcall(\"XADD\", eventStreamKey, \"*\", \"event\", \"waiting\", \"jobId\", jobId, 'prev', 'active')\nend\n--[[\n  Function to trim events, default 10000.\n]]\n-- Includes\n--[[\n  Function to get max events value or set by default 10000.\n]]\nlocal function getOrSetMaxEvents(metaKey)\n  local maxEvents = rcall(\"HGET\", metaKey, \"opts.maxLenEvents\")\n  if not maxEvents then\n    maxEvents = 10000\n    rcall(\"HSET\", metaKey, \"opts.maxLenEvents\", maxEvents)\n  end\n  return maxEvents\nend\nlocal function trimEvents(metaKey, eventStreamKey)\n  local maxEvents = getOrSetMaxEvents(metaKey)\n  if maxEvents then\n    rcall(\"XTRIM\", eventStreamKey, \"MAXLEN\", \"~\", maxEvents)\n  else\n    rcall(\"XTRIM\", eventStreamKey, \"MAXLEN\", \"~\", 10000)\n  end\nend\nlocal stalledKey = KEYS[1]\nlocal waitKey = KEYS[2]\nlocal activeKey = KEYS[3]\nlocal stalledCheckKey = KEYS[4]\nlocal metaKey = KEYS[5]\nlocal pausedKey = KEYS[6]\nlocal markerKey = KEYS[7]\nlocal eventStreamKey = KEYS[8]\nlocal maxStalledJobCount = tonumber(ARGV[1])\nlocal queueKeyPrefix = ARGV[2]\nlocal timestamp = ARGV[3]\nlocal maxCheckTime = ARGV[4]\nif rcall(\"EXISTS\", stalledCheckKey) == 1 then\n    return {}\nend\nrcall(\"SET\", stalledCheckKey, timestamp, \"PX\", maxCheckTime)\n-- Trim events before emiting them to avoid trimming events emitted in this script\ntrimEvents(metaKey, eventStreamKey)\n-- Move all stalled jobs to wait\nlocal stalling = rcall('SMEMBERS', stalledKey)\nlocal stalled = {}\nif (#stalling > 0) then\n    rcall('DEL', stalledKey)\n    -- Remove from active list\n    for i, jobId in ipairs(stalling) do\n        -- Markers in waitlist DEPRECATED in v5: Remove in v6.\n        if string.sub(jobId, 1, 2) == \"0:\" then\n            -- If the jobId is a delay marker ID we just remove it.\n            rcall(\"LREM\", activeKey, 1, jobId)\n        else\n            local jobKey = queueKeyPrefix .. jobId\n            -- Check that the lock is also missing, then we can handle this job as really stalled.\n            if (rcall(\"EXISTS\", jobKey .. \":lock\") == 0) then\n                --  Remove from the active queue.\n                local removed = rcall(\"LREM\", activeKey, 1, jobId)\n                if (removed > 0) then\n                    -- If this job has been stalled too many times, such as if it crashes the worker, then fail it.\n                    local stalledCount = rcall(\"HINCRBY\", jobKey, \"stc\", 1)\n                    -- Check if this is a repeatable job by looking at job options\n                    local jobOpts = rcall(\"HGET\", jobKey, \"opts\")\n                    local isRepeatableJob = false\n                    if jobOpts then\n                        local opts = cjson.decode(jobOpts)\n                        if opts and opts[\"repeat\"] then\n                            isRepeatableJob = true\n                        end\n                    end\n                    -- Only fail job if it exceeds stall limit AND is not a repeatable job\n                    if stalledCount > maxStalledJobCount and not isRepeatableJob then\n                        local failedReason = \"job stalled more than allowable limit\"\n                        rcall(\"HSET\", jobKey, \"defa\", failedReason)\n                    end\n                    moveJobToWait(metaKey, activeKey, waitKey, pausedKey, markerKey, eventStreamKey, jobId,\n                        \"RPUSH\")\n                    -- Emit the stalled event\n                    rcall(\"XADD\", eventStreamKey, \"*\", \"event\", \"stalled\", \"jobId\", jobId)\n                    table.insert(stalled, jobId)\n                end\n            end\n        end\n    end\nend\n-- Mark potentially stalled jobs\nlocal active = rcall('LRANGE', activeKey, 0, -1)\nif (#active > 0) then\n    for from, to in batches(#active, 7000) do\n        rcall('SADD', stalledKey, unpack(active, from, to))\n    end\nend\nreturn stalled\n`;\nexports.moveStalledJobsToWait = {\n    name: \"moveStalledJobsToWait\",\n    content,\n    keys: 8\n}; //# sourceMappingURL=moveStalledJobsToWait-8.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL3NjcmlwdHMvbW92ZVN0YWxsZWRKb2JzVG9XYWl0LTguanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELDZCQUE2QixHQUFHLEtBQUs7QUFDckMsTUFBTUcsVUFBVSxDQUFDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBK0tqQixDQUFDO0FBQ0RILDZCQUE2QixHQUFHO0lBQzVCSSxNQUFNO0lBQ05EO0lBQ0FFLE1BQU07QUFDVixHQUNBLG1EQUFtRCIsInNvdXJjZXMiOlsid2VicGFjazovL29ubHlmYW5zLXBsYXRmb3JtLy4vbm9kZV9tb2R1bGVzL2J1bGxtcS9kaXN0L2Nqcy9zY3JpcHRzL21vdmVTdGFsbGVkSm9ic1RvV2FpdC04LmpzP2MwZjMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLm1vdmVTdGFsbGVkSm9ic1RvV2FpdCA9IHZvaWQgMDtcbmNvbnN0IGNvbnRlbnQgPSBgLS1bW1xuICBNb3ZlIHN0YWxsZWQgam9icyB0byB3YWl0LlxuICAgIElucHV0OlxuICAgICAgS0VZU1sxXSAnc3RhbGxlZCcgKFNFVClcbiAgICAgIEtFWVNbMl0gJ3dhaXQnLCAgIChMSVNUKVxuICAgICAgS0VZU1szXSAnYWN0aXZlJywgKExJU1QpXG4gICAgICBLRVlTWzRdICdzdGFsbGVkLWNoZWNrJywgKEtFWSlcbiAgICAgIEtFWVNbNV0gJ21ldGEnLCAoS0VZKVxuICAgICAgS0VZU1s2XSAncGF1c2VkJywgKExJU1QpXG4gICAgICBLRVlTWzddICdtYXJrZXInXG4gICAgICBLRVlTWzhdICdldmVudCBzdHJlYW0nIChTVFJFQU0pXG4gICAgICBBUkdWWzFdICBNYXggc3RhbGxlZCBqb2IgY291bnRcbiAgICAgIEFSR1ZbMl0gIHF1ZXVlLnRvS2V5KCcnKVxuICAgICAgQVJHVlszXSAgdGltZXN0YW1wXG4gICAgICBBUkdWWzRdICBtYXggY2hlY2sgdGltZVxuICAgIEV2ZW50czpcbiAgICAgICdzdGFsbGVkJyB3aXRoIHN0YWxsZWQgam9iIGlkLlxuXV1cbmxvY2FsIHJjYWxsID0gcmVkaXMuY2FsbFxuLS0gSW5jbHVkZXNcbi0tW1tcbiAgRnVuY3Rpb24gdG8gYWRkIGpvYiBpbiB0YXJnZXQgbGlzdCBhbmQgYWRkIG1hcmtlciBpZiBuZWVkZWQuXG5dXVxuLS0gSW5jbHVkZXNcbi0tW1tcbiAgQWRkIG1hcmtlciBpZiBuZWVkZWQgd2hlbiBhIGpvYiBpcyBhdmFpbGFibGUuXG5dXVxubG9jYWwgZnVuY3Rpb24gYWRkQmFzZU1hcmtlcklmTmVlZGVkKG1hcmtlcktleSwgaXNQYXVzZWRPck1heGVkKVxuICBpZiBub3QgaXNQYXVzZWRPck1heGVkIHRoZW5cbiAgICByY2FsbChcIlpBRERcIiwgbWFya2VyS2V5LCAwLCBcIjBcIilcbiAgZW5kICBcbmVuZFxubG9jYWwgZnVuY3Rpb24gYWRkSm9iSW5UYXJnZXRMaXN0KHRhcmdldEtleSwgbWFya2VyS2V5LCBwdXNoQ21kLCBpc1BhdXNlZE9yTWF4ZWQsIGpvYklkKVxuICByY2FsbChwdXNoQ21kLCB0YXJnZXRLZXksIGpvYklkKVxuICBhZGRCYXNlTWFya2VySWZOZWVkZWQobWFya2VyS2V5LCBpc1BhdXNlZE9yTWF4ZWQpXG5lbmRcbi0tW1tcbiAgRnVuY3Rpb24gdG8gbG9vcCBpbiBiYXRjaGVzLlxuICBKdXN0IGEgYml0IG9mIHdhcm5pbmcsIHNvbWUgY29tbWFuZHMgYXMgWlJFTVxuICBjb3VsZCByZWNlaXZlIGEgbWF4aW11bSBvZiA3MDAwIHBhcmFtZXRlcnMgcGVyIGNhbGwuXG5dXVxubG9jYWwgZnVuY3Rpb24gYmF0Y2hlcyhuLCBiYXRjaFNpemUpXG4gIGxvY2FsIGkgPSAwXG4gIHJldHVybiBmdW5jdGlvbigpXG4gICAgbG9jYWwgZnJvbSA9IGkgKiBiYXRjaFNpemUgKyAxXG4gICAgaSA9IGkgKyAxXG4gICAgaWYgKGZyb20gPD0gbikgdGhlblxuICAgICAgbG9jYWwgdG8gPSBtYXRoLm1pbihmcm9tICsgYmF0Y2hTaXplIC0gMSwgbilcbiAgICAgIHJldHVybiBmcm9tLCB0b1xuICAgIGVuZFxuICBlbmRcbmVuZFxuLS1bW1xuICBGdW5jdGlvbiB0byBtb3ZlIGpvYiB0byB3YWl0IHRvIGJlIHBpY2tlZCB1cCBieSBhIHdhaXRpbmcgd29ya2VyLlxuXV1cbi0tIEluY2x1ZGVzXG4tLVtbXG4gIEZ1bmN0aW9uIHRvIGNoZWNrIGZvciB0aGUgbWV0YS5wYXVzZWQga2V5IHRvIGRlY2lkZSBpZiB3ZSBhcmUgcGF1c2VkIG9yIG5vdFxuICAoc2luY2UgYW4gZW1wdHkgbGlzdCBhbmQgIUVYSVNUUyBhcmUgbm90IHJlYWxseSB0aGUgc2FtZSkuXG5dXVxubG9jYWwgZnVuY3Rpb24gZ2V0VGFyZ2V0UXVldWVMaXN0KHF1ZXVlTWV0YUtleSwgYWN0aXZlS2V5LCB3YWl0S2V5LCBwYXVzZWRLZXkpXG4gIGxvY2FsIHF1ZXVlQXR0cmlidXRlcyA9IHJjYWxsKFwiSE1HRVRcIiwgcXVldWVNZXRhS2V5LCBcInBhdXNlZFwiLCBcImNvbmN1cnJlbmN5XCIsIFwibWF4XCIsIFwiZHVyYXRpb25cIilcbiAgaWYgcXVldWVBdHRyaWJ1dGVzWzFdIHRoZW5cbiAgICByZXR1cm4gcGF1c2VkS2V5LCB0cnVlLCBxdWV1ZUF0dHJpYnV0ZXNbM10sIHF1ZXVlQXR0cmlidXRlc1s0XVxuICBlbHNlXG4gICAgaWYgcXVldWVBdHRyaWJ1dGVzWzJdIHRoZW5cbiAgICAgIGxvY2FsIGFjdGl2ZUNvdW50ID0gcmNhbGwoXCJMTEVOXCIsIGFjdGl2ZUtleSlcbiAgICAgIGlmIGFjdGl2ZUNvdW50ID49IHRvbnVtYmVyKHF1ZXVlQXR0cmlidXRlc1syXSkgdGhlblxuICAgICAgICByZXR1cm4gd2FpdEtleSwgdHJ1ZSwgcXVldWVBdHRyaWJ1dGVzWzNdLCBxdWV1ZUF0dHJpYnV0ZXNbNF1cbiAgICAgIGVsc2VcbiAgICAgICAgcmV0dXJuIHdhaXRLZXksIGZhbHNlLCBxdWV1ZUF0dHJpYnV0ZXNbM10sIHF1ZXVlQXR0cmlidXRlc1s0XVxuICAgICAgZW5kXG4gICAgZW5kXG4gIGVuZFxuICByZXR1cm4gd2FpdEtleSwgZmFsc2UsIHF1ZXVlQXR0cmlidXRlc1szXSwgcXVldWVBdHRyaWJ1dGVzWzRdXG5lbmRcbmxvY2FsIGZ1bmN0aW9uIG1vdmVKb2JUb1dhaXQobWV0YUtleSwgYWN0aXZlS2V5LCB3YWl0S2V5LCBwYXVzZWRLZXksIG1hcmtlcktleSwgZXZlbnRTdHJlYW1LZXksXG4gIGpvYklkLCBwdXNoQ21kKVxuICBsb2NhbCB0YXJnZXQsIGlzUGF1c2VkT3JNYXhlZCA9IGdldFRhcmdldFF1ZXVlTGlzdChtZXRhS2V5LCBhY3RpdmVLZXksIHdhaXRLZXksIHBhdXNlZEtleSlcbiAgYWRkSm9iSW5UYXJnZXRMaXN0KHRhcmdldCwgbWFya2VyS2V5LCBwdXNoQ21kLCBpc1BhdXNlZE9yTWF4ZWQsIGpvYklkKVxuICByY2FsbChcIlhBRERcIiwgZXZlbnRTdHJlYW1LZXksIFwiKlwiLCBcImV2ZW50XCIsIFwid2FpdGluZ1wiLCBcImpvYklkXCIsIGpvYklkLCAncHJldicsICdhY3RpdmUnKVxuZW5kXG4tLVtbXG4gIEZ1bmN0aW9uIHRvIHRyaW0gZXZlbnRzLCBkZWZhdWx0IDEwMDAwLlxuXV1cbi0tIEluY2x1ZGVzXG4tLVtbXG4gIEZ1bmN0aW9uIHRvIGdldCBtYXggZXZlbnRzIHZhbHVlIG9yIHNldCBieSBkZWZhdWx0IDEwMDAwLlxuXV1cbmxvY2FsIGZ1bmN0aW9uIGdldE9yU2V0TWF4RXZlbnRzKG1ldGFLZXkpXG4gIGxvY2FsIG1heEV2ZW50cyA9IHJjYWxsKFwiSEdFVFwiLCBtZXRhS2V5LCBcIm9wdHMubWF4TGVuRXZlbnRzXCIpXG4gIGlmIG5vdCBtYXhFdmVudHMgdGhlblxuICAgIG1heEV2ZW50cyA9IDEwMDAwXG4gICAgcmNhbGwoXCJIU0VUXCIsIG1ldGFLZXksIFwib3B0cy5tYXhMZW5FdmVudHNcIiwgbWF4RXZlbnRzKVxuICBlbmRcbiAgcmV0dXJuIG1heEV2ZW50c1xuZW5kXG5sb2NhbCBmdW5jdGlvbiB0cmltRXZlbnRzKG1ldGFLZXksIGV2ZW50U3RyZWFtS2V5KVxuICBsb2NhbCBtYXhFdmVudHMgPSBnZXRPclNldE1heEV2ZW50cyhtZXRhS2V5KVxuICBpZiBtYXhFdmVudHMgdGhlblxuICAgIHJjYWxsKFwiWFRSSU1cIiwgZXZlbnRTdHJlYW1LZXksIFwiTUFYTEVOXCIsIFwiflwiLCBtYXhFdmVudHMpXG4gIGVsc2VcbiAgICByY2FsbChcIlhUUklNXCIsIGV2ZW50U3RyZWFtS2V5LCBcIk1BWExFTlwiLCBcIn5cIiwgMTAwMDApXG4gIGVuZFxuZW5kXG5sb2NhbCBzdGFsbGVkS2V5ID0gS0VZU1sxXVxubG9jYWwgd2FpdEtleSA9IEtFWVNbMl1cbmxvY2FsIGFjdGl2ZUtleSA9IEtFWVNbM11cbmxvY2FsIHN0YWxsZWRDaGVja0tleSA9IEtFWVNbNF1cbmxvY2FsIG1ldGFLZXkgPSBLRVlTWzVdXG5sb2NhbCBwYXVzZWRLZXkgPSBLRVlTWzZdXG5sb2NhbCBtYXJrZXJLZXkgPSBLRVlTWzddXG5sb2NhbCBldmVudFN0cmVhbUtleSA9IEtFWVNbOF1cbmxvY2FsIG1heFN0YWxsZWRKb2JDb3VudCA9IHRvbnVtYmVyKEFSR1ZbMV0pXG5sb2NhbCBxdWV1ZUtleVByZWZpeCA9IEFSR1ZbMl1cbmxvY2FsIHRpbWVzdGFtcCA9IEFSR1ZbM11cbmxvY2FsIG1heENoZWNrVGltZSA9IEFSR1ZbNF1cbmlmIHJjYWxsKFwiRVhJU1RTXCIsIHN0YWxsZWRDaGVja0tleSkgPT0gMSB0aGVuXG4gICAgcmV0dXJuIHt9XG5lbmRcbnJjYWxsKFwiU0VUXCIsIHN0YWxsZWRDaGVja0tleSwgdGltZXN0YW1wLCBcIlBYXCIsIG1heENoZWNrVGltZSlcbi0tIFRyaW0gZXZlbnRzIGJlZm9yZSBlbWl0aW5nIHRoZW0gdG8gYXZvaWQgdHJpbW1pbmcgZXZlbnRzIGVtaXR0ZWQgaW4gdGhpcyBzY3JpcHRcbnRyaW1FdmVudHMobWV0YUtleSwgZXZlbnRTdHJlYW1LZXkpXG4tLSBNb3ZlIGFsbCBzdGFsbGVkIGpvYnMgdG8gd2FpdFxubG9jYWwgc3RhbGxpbmcgPSByY2FsbCgnU01FTUJFUlMnLCBzdGFsbGVkS2V5KVxubG9jYWwgc3RhbGxlZCA9IHt9XG5pZiAoI3N0YWxsaW5nID4gMCkgdGhlblxuICAgIHJjYWxsKCdERUwnLCBzdGFsbGVkS2V5KVxuICAgIC0tIFJlbW92ZSBmcm9tIGFjdGl2ZSBsaXN0XG4gICAgZm9yIGksIGpvYklkIGluIGlwYWlycyhzdGFsbGluZykgZG9cbiAgICAgICAgLS0gTWFya2VycyBpbiB3YWl0bGlzdCBERVBSRUNBVEVEIGluIHY1OiBSZW1vdmUgaW4gdjYuXG4gICAgICAgIGlmIHN0cmluZy5zdWIoam9iSWQsIDEsIDIpID09IFwiMDpcIiB0aGVuXG4gICAgICAgICAgICAtLSBJZiB0aGUgam9iSWQgaXMgYSBkZWxheSBtYXJrZXIgSUQgd2UganVzdCByZW1vdmUgaXQuXG4gICAgICAgICAgICByY2FsbChcIkxSRU1cIiwgYWN0aXZlS2V5LCAxLCBqb2JJZClcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgbG9jYWwgam9iS2V5ID0gcXVldWVLZXlQcmVmaXggLi4gam9iSWRcbiAgICAgICAgICAgIC0tIENoZWNrIHRoYXQgdGhlIGxvY2sgaXMgYWxzbyBtaXNzaW5nLCB0aGVuIHdlIGNhbiBoYW5kbGUgdGhpcyBqb2IgYXMgcmVhbGx5IHN0YWxsZWQuXG4gICAgICAgICAgICBpZiAocmNhbGwoXCJFWElTVFNcIiwgam9iS2V5IC4uIFwiOmxvY2tcIikgPT0gMCkgdGhlblxuICAgICAgICAgICAgICAgIC0tICBSZW1vdmUgZnJvbSB0aGUgYWN0aXZlIHF1ZXVlLlxuICAgICAgICAgICAgICAgIGxvY2FsIHJlbW92ZWQgPSByY2FsbChcIkxSRU1cIiwgYWN0aXZlS2V5LCAxLCBqb2JJZClcbiAgICAgICAgICAgICAgICBpZiAocmVtb3ZlZCA+IDApIHRoZW5cbiAgICAgICAgICAgICAgICAgICAgLS0gSWYgdGhpcyBqb2IgaGFzIGJlZW4gc3RhbGxlZCB0b28gbWFueSB0aW1lcywgc3VjaCBhcyBpZiBpdCBjcmFzaGVzIHRoZSB3b3JrZXIsIHRoZW4gZmFpbCBpdC5cbiAgICAgICAgICAgICAgICAgICAgbG9jYWwgc3RhbGxlZENvdW50ID0gcmNhbGwoXCJISU5DUkJZXCIsIGpvYktleSwgXCJzdGNcIiwgMSlcbiAgICAgICAgICAgICAgICAgICAgLS0gQ2hlY2sgaWYgdGhpcyBpcyBhIHJlcGVhdGFibGUgam9iIGJ5IGxvb2tpbmcgYXQgam9iIG9wdGlvbnNcbiAgICAgICAgICAgICAgICAgICAgbG9jYWwgam9iT3B0cyA9IHJjYWxsKFwiSEdFVFwiLCBqb2JLZXksIFwib3B0c1wiKVxuICAgICAgICAgICAgICAgICAgICBsb2NhbCBpc1JlcGVhdGFibGVKb2IgPSBmYWxzZVxuICAgICAgICAgICAgICAgICAgICBpZiBqb2JPcHRzIHRoZW5cbiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIG9wdHMgPSBjanNvbi5kZWNvZGUoam9iT3B0cylcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIG9wdHMgYW5kIG9wdHNbXCJyZXBlYXRcIl0gdGhlblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzUmVwZWF0YWJsZUpvYiA9IHRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuZFxuICAgICAgICAgICAgICAgICAgICBlbmRcbiAgICAgICAgICAgICAgICAgICAgLS0gT25seSBmYWlsIGpvYiBpZiBpdCBleGNlZWRzIHN0YWxsIGxpbWl0IEFORCBpcyBub3QgYSByZXBlYXRhYmxlIGpvYlxuICAgICAgICAgICAgICAgICAgICBpZiBzdGFsbGVkQ291bnQgPiBtYXhTdGFsbGVkSm9iQ291bnQgYW5kIG5vdCBpc1JlcGVhdGFibGVKb2IgdGhlblxuICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgZmFpbGVkUmVhc29uID0gXCJqb2Igc3RhbGxlZCBtb3JlIHRoYW4gYWxsb3dhYmxlIGxpbWl0XCJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJjYWxsKFwiSFNFVFwiLCBqb2JLZXksIFwiZGVmYVwiLCBmYWlsZWRSZWFzb24pXG4gICAgICAgICAgICAgICAgICAgIGVuZFxuICAgICAgICAgICAgICAgICAgICBtb3ZlSm9iVG9XYWl0KG1ldGFLZXksIGFjdGl2ZUtleSwgd2FpdEtleSwgcGF1c2VkS2V5LCBtYXJrZXJLZXksIGV2ZW50U3RyZWFtS2V5LCBqb2JJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiUlBVU0hcIilcbiAgICAgICAgICAgICAgICAgICAgLS0gRW1pdCB0aGUgc3RhbGxlZCBldmVudFxuICAgICAgICAgICAgICAgICAgICByY2FsbChcIlhBRERcIiwgZXZlbnRTdHJlYW1LZXksIFwiKlwiLCBcImV2ZW50XCIsIFwic3RhbGxlZFwiLCBcImpvYklkXCIsIGpvYklkKVxuICAgICAgICAgICAgICAgICAgICB0YWJsZS5pbnNlcnQoc3RhbGxlZCwgam9iSWQpXG4gICAgICAgICAgICAgICAgZW5kXG4gICAgICAgICAgICBlbmRcbiAgICAgICAgZW5kXG4gICAgZW5kXG5lbmRcbi0tIE1hcmsgcG90ZW50aWFsbHkgc3RhbGxlZCBqb2JzXG5sb2NhbCBhY3RpdmUgPSByY2FsbCgnTFJBTkdFJywgYWN0aXZlS2V5LCAwLCAtMSlcbmlmICgjYWN0aXZlID4gMCkgdGhlblxuICAgIGZvciBmcm9tLCB0byBpbiBiYXRjaGVzKCNhY3RpdmUsIDcwMDApIGRvXG4gICAgICAgIHJjYWxsKCdTQUREJywgc3RhbGxlZEtleSwgdW5wYWNrKGFjdGl2ZSwgZnJvbSwgdG8pKVxuICAgIGVuZFxuZW5kXG5yZXR1cm4gc3RhbGxlZFxuYDtcbmV4cG9ydHMubW92ZVN0YWxsZWRKb2JzVG9XYWl0ID0ge1xuICAgIG5hbWU6ICdtb3ZlU3RhbGxlZEpvYnNUb1dhaXQnLFxuICAgIGNvbnRlbnQsXG4gICAga2V5czogOCxcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1tb3ZlU3RhbGxlZEpvYnNUb1dhaXQtOC5qcy5tYXAiXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJtb3ZlU3RhbGxlZEpvYnNUb1dhaXQiLCJjb250ZW50IiwibmFtZSIsImtleXMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/scripts/moveStalledJobsToWait-8.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/scripts/moveToActive-11.js":
/*!*****************************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/scripts/moveToActive-11.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.moveToActive = void 0;\nconst content = `--[[\n  Move next job to be processed to active, lock it and fetch its data. The job\n  may be delayed, in that case we need to move it to the delayed set instead.\n  This operation guarantees that the worker owns the job during the lock\n  expiration time. The worker is responsible of keeping the lock fresh\n  so that no other worker picks this job again.\n  Input:\n    KEYS[1] wait key\n    KEYS[2] active key\n    KEYS[3] prioritized key\n    KEYS[4] stream events key\n    KEYS[5] stalled key\n    -- Rate limiting\n    KEYS[6] rate limiter key\n    KEYS[7] delayed key\n    -- Delayed jobs\n    KEYS[8] paused key\n    KEYS[9] meta key\n    KEYS[10] pc priority counter\n    -- Marker\n    KEYS[11] marker key\n    -- Arguments\n    ARGV[1] key prefix\n    ARGV[2] timestamp\n    ARGV[3] opts\n    opts - token - lock token\n    opts - lockDuration\n    opts - limiter\n    opts - name - worker name\n]]\nlocal rcall = redis.call\nlocal waitKey = KEYS[1]\nlocal activeKey = KEYS[2]\nlocal eventStreamKey = KEYS[4]\nlocal rateLimiterKey = KEYS[6]\nlocal delayedKey = KEYS[7]\nlocal opts = cmsgpack.unpack(ARGV[3])\n-- Includes\n--[[\n  Function to return the next delayed job timestamp.\n]]\nlocal function getNextDelayedTimestamp(delayedKey)\n  local result = rcall(\"ZRANGE\", delayedKey, 0, 0, \"WITHSCORES\")\n  if #result then\n    local nextTimestamp = tonumber(result[2])\n    if nextTimestamp ~= nil then\n      return nextTimestamp / 0x1000\n    end\n  end\nend\n--[[\n  Function to get current rate limit ttl.\n]]\nlocal function getRateLimitTTL(maxJobs, rateLimiterKey)\n  if maxJobs and maxJobs <= tonumber(rcall(\"GET\", rateLimiterKey) or 0) then\n    local pttl = rcall(\"PTTL\", rateLimiterKey)\n    if pttl == 0 then\n      rcall(\"DEL\", rateLimiterKey)\n    end\n    if pttl > 0 then\n      return pttl\n    end\n  end\n  return 0\nend\n--[[\n  Function to check for the meta.paused key to decide if we are paused or not\n  (since an empty list and !EXISTS are not really the same).\n]]\nlocal function getTargetQueueList(queueMetaKey, activeKey, waitKey, pausedKey)\n  local queueAttributes = rcall(\"HMGET\", queueMetaKey, \"paused\", \"concurrency\", \"max\", \"duration\")\n  if queueAttributes[1] then\n    return pausedKey, true, queueAttributes[3], queueAttributes[4]\n  else\n    if queueAttributes[2] then\n      local activeCount = rcall(\"LLEN\", activeKey)\n      if activeCount >= tonumber(queueAttributes[2]) then\n        return waitKey, true, queueAttributes[3], queueAttributes[4]\n      else\n        return waitKey, false, queueAttributes[3], queueAttributes[4]\n      end\n    end\n  end\n  return waitKey, false, queueAttributes[3], queueAttributes[4]\nend\n--[[\n  Function to move job from prioritized state to active.\n]]\nlocal function moveJobFromPrioritizedToActive(priorityKey, activeKey, priorityCounterKey)\n  local prioritizedJob = rcall(\"ZPOPMIN\", priorityKey)\n  if #prioritizedJob > 0 then\n    rcall(\"LPUSH\", activeKey, prioritizedJob[1])\n    return prioritizedJob[1]\n  else\n    rcall(\"DEL\", priorityCounterKey)\n  end\nend\n--[[\n  Function to move job from wait state to active.\n  Input:\n    opts - token - lock token\n    opts - lockDuration\n    opts - limiter\n]]\n-- Includes\n--[[\n  Add marker if needed when a job is available.\n]]\nlocal function addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)\n  if not isPausedOrMaxed then\n    rcall(\"ZADD\", markerKey, 0, \"0\")\n  end  \nend\nlocal function prepareJobForProcessing(keyPrefix, rateLimiterKey, eventStreamKey,\n    jobId, processedOn, maxJobs, limiterDuration, markerKey, opts)\n  local jobKey = keyPrefix .. jobId\n  -- Check if we need to perform rate limiting.\n  if maxJobs then\n    local jobCounter = tonumber(rcall(\"INCR\", rateLimiterKey))\n    if jobCounter == 1 then\n      local integerDuration = math.floor(math.abs(limiterDuration))\n      rcall(\"PEXPIRE\", rateLimiterKey, integerDuration)\n    end\n  end\n  -- get a lock\n  if opts['token'] ~= \"0\" then\n    local lockKey = jobKey .. ':lock'\n    rcall(\"SET\", lockKey, opts['token'], \"PX\", opts['lockDuration'])\n  end\n  local optionalValues = {}\n  if opts['name'] then\n    -- Set \"processedBy\" field to the worker name\n    table.insert(optionalValues, \"pb\")\n    table.insert(optionalValues, opts['name'])\n  end\n  rcall(\"XADD\", eventStreamKey, \"*\", \"event\", \"active\", \"jobId\", jobId, \"prev\", \"waiting\")\n  rcall(\"HMSET\", jobKey, \"processedOn\", processedOn, unpack(optionalValues))\n  rcall(\"HINCRBY\", jobKey, \"ats\", 1)\n  addBaseMarkerIfNeeded(markerKey, false)\n  -- rate limit delay must be 0 in this case to prevent adding more delay\n  -- when job that is moved to active needs to be processed\n  return {rcall(\"HGETALL\", jobKey), jobId, 0, 0} -- get job data\nend\n--[[\n  Updates the delay set, by moving delayed jobs that should\n  be processed now to \"wait\".\n     Events:\n      'waiting'\n]]\n-- Includes\n--[[\n  Function to add job in target list and add marker if needed.\n]]\n-- Includes\nlocal function addJobInTargetList(targetKey, markerKey, pushCmd, isPausedOrMaxed, jobId)\n  rcall(pushCmd, targetKey, jobId)\n  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)\nend\n--[[\n  Function to add job considering priority.\n]]\n-- Includes\n--[[\n  Function to get priority score.\n]]\nlocal function getPriorityScore(priority, priorityCounterKey)\n  local prioCounter = rcall(\"INCR\", priorityCounterKey)\n  return priority * 0x100000000 + prioCounter % 0x100000000\nend\nlocal function addJobWithPriority(markerKey, prioritizedKey, priority, jobId, priorityCounterKey,\n  isPausedOrMaxed)\n  local score = getPriorityScore(priority, priorityCounterKey)\n  rcall(\"ZADD\", prioritizedKey, score, jobId)\n  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)\nend\n-- Try to get as much as 1000 jobs at once\nlocal function promoteDelayedJobs(delayedKey, markerKey, targetKey, prioritizedKey,\n                                  eventStreamKey, prefix, timestamp, priorityCounterKey, isPaused)\n    local jobs = rcall(\"ZRANGEBYSCORE\", delayedKey, 0, (timestamp + 1) * 0x1000 - 1, \"LIMIT\", 0, 1000)\n    if (#jobs > 0) then\n        rcall(\"ZREM\", delayedKey, unpack(jobs))\n        for _, jobId in ipairs(jobs) do\n            local jobKey = prefix .. jobId\n            local priority =\n                tonumber(rcall(\"HGET\", jobKey, \"priority\")) or 0\n            if priority == 0 then\n                -- LIFO or FIFO\n                rcall(\"LPUSH\", targetKey, jobId)\n            else\n                local score = getPriorityScore(priority, priorityCounterKey)\n                rcall(\"ZADD\", prioritizedKey, score, jobId)\n            end\n            -- Emit waiting event\n            rcall(\"XADD\", eventStreamKey, \"*\", \"event\", \"waiting\", \"jobId\",\n                  jobId, \"prev\", \"delayed\")\n            rcall(\"HSET\", jobKey, \"delay\", 0)\n        end\n        addBaseMarkerIfNeeded(markerKey, isPaused)\n    end\nend\nlocal target, isPausedOrMaxed, rateLimitMax, rateLimitDuration = getTargetQueueList(KEYS[9],\n    activeKey, waitKey, KEYS[8])\n-- Check if there are delayed jobs that we can move to wait.\nlocal markerKey = KEYS[11]\npromoteDelayedJobs(delayedKey, markerKey, target, KEYS[3], eventStreamKey, ARGV[1],\n                   ARGV[2], KEYS[10], isPausedOrMaxed)\nlocal maxJobs = tonumber(rateLimitMax or (opts['limiter'] and opts['limiter']['max']))\nlocal expireTime = getRateLimitTTL(maxJobs, rateLimiterKey)\n-- Check if we are rate limited first.\nif expireTime > 0 then return {0, 0, expireTime, 0} end\n-- paused or maxed queue\nif isPausedOrMaxed then return {0, 0, 0, 0} end\nlocal limiterDuration = (opts['limiter'] and opts['limiter']['duration']) or rateLimitDuration\n-- no job ID, try non-blocking move from wait to active\nlocal jobId = rcall(\"RPOPLPUSH\", waitKey, activeKey)\n-- Markers in waitlist DEPRECATED in v5: Will be completely removed in v6.\nif jobId and string.sub(jobId, 1, 2) == \"0:\" then\n    rcall(\"LREM\", activeKey, 1, jobId)\n    jobId = rcall(\"RPOPLPUSH\", waitKey, activeKey)\nend\nif jobId then\n    return prepareJobForProcessing(ARGV[1], rateLimiterKey, eventStreamKey, jobId, ARGV[2],\n                                   maxJobs, limiterDuration, markerKey, opts)\nelse\n    jobId = moveJobFromPrioritizedToActive(KEYS[3], activeKey, KEYS[10])\n    if jobId then\n        return prepareJobForProcessing(ARGV[1], rateLimiterKey, eventStreamKey, jobId, ARGV[2],\n                                       maxJobs, limiterDuration, markerKey, opts)\n    end\nend\n-- Return the timestamp for the next delayed job if any.\nlocal nextTimestamp = getNextDelayedTimestamp(delayedKey)\nif nextTimestamp ~= nil then return {0, 0, 0, nextTimestamp} end\nreturn {0, 0, 0, 0}\n`;\nexports.moveToActive = {\n    name: \"moveToActive\",\n    content,\n    keys: 11\n}; //# sourceMappingURL=moveToActive-11.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL3NjcmlwdHMvbW92ZVRvQWN0aXZlLTExLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCxvQkFBb0IsR0FBRyxLQUFLO0FBQzVCLE1BQU1HLFVBQVUsQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBME9qQixDQUFDO0FBQ0RILG9CQUFvQixHQUFHO0lBQ25CSSxNQUFNO0lBQ05EO0lBQ0FFLE1BQU07QUFDVixHQUNBLDJDQUEyQyIsInNvdXJjZXMiOlsid2VicGFjazovL29ubHlmYW5zLXBsYXRmb3JtLy4vbm9kZV9tb2R1bGVzL2J1bGxtcS9kaXN0L2Nqcy9zY3JpcHRzL21vdmVUb0FjdGl2ZS0xMS5qcz8xOWQyIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5tb3ZlVG9BY3RpdmUgPSB2b2lkIDA7XG5jb25zdCBjb250ZW50ID0gYC0tW1tcbiAgTW92ZSBuZXh0IGpvYiB0byBiZSBwcm9jZXNzZWQgdG8gYWN0aXZlLCBsb2NrIGl0IGFuZCBmZXRjaCBpdHMgZGF0YS4gVGhlIGpvYlxuICBtYXkgYmUgZGVsYXllZCwgaW4gdGhhdCBjYXNlIHdlIG5lZWQgdG8gbW92ZSBpdCB0byB0aGUgZGVsYXllZCBzZXQgaW5zdGVhZC5cbiAgVGhpcyBvcGVyYXRpb24gZ3VhcmFudGVlcyB0aGF0IHRoZSB3b3JrZXIgb3ducyB0aGUgam9iIGR1cmluZyB0aGUgbG9ja1xuICBleHBpcmF0aW9uIHRpbWUuIFRoZSB3b3JrZXIgaXMgcmVzcG9uc2libGUgb2Yga2VlcGluZyB0aGUgbG9jayBmcmVzaFxuICBzbyB0aGF0IG5vIG90aGVyIHdvcmtlciBwaWNrcyB0aGlzIGpvYiBhZ2Fpbi5cbiAgSW5wdXQ6XG4gICAgS0VZU1sxXSB3YWl0IGtleVxuICAgIEtFWVNbMl0gYWN0aXZlIGtleVxuICAgIEtFWVNbM10gcHJpb3JpdGl6ZWQga2V5XG4gICAgS0VZU1s0XSBzdHJlYW0gZXZlbnRzIGtleVxuICAgIEtFWVNbNV0gc3RhbGxlZCBrZXlcbiAgICAtLSBSYXRlIGxpbWl0aW5nXG4gICAgS0VZU1s2XSByYXRlIGxpbWl0ZXIga2V5XG4gICAgS0VZU1s3XSBkZWxheWVkIGtleVxuICAgIC0tIERlbGF5ZWQgam9ic1xuICAgIEtFWVNbOF0gcGF1c2VkIGtleVxuICAgIEtFWVNbOV0gbWV0YSBrZXlcbiAgICBLRVlTWzEwXSBwYyBwcmlvcml0eSBjb3VudGVyXG4gICAgLS0gTWFya2VyXG4gICAgS0VZU1sxMV0gbWFya2VyIGtleVxuICAgIC0tIEFyZ3VtZW50c1xuICAgIEFSR1ZbMV0ga2V5IHByZWZpeFxuICAgIEFSR1ZbMl0gdGltZXN0YW1wXG4gICAgQVJHVlszXSBvcHRzXG4gICAgb3B0cyAtIHRva2VuIC0gbG9jayB0b2tlblxuICAgIG9wdHMgLSBsb2NrRHVyYXRpb25cbiAgICBvcHRzIC0gbGltaXRlclxuICAgIG9wdHMgLSBuYW1lIC0gd29ya2VyIG5hbWVcbl1dXG5sb2NhbCByY2FsbCA9IHJlZGlzLmNhbGxcbmxvY2FsIHdhaXRLZXkgPSBLRVlTWzFdXG5sb2NhbCBhY3RpdmVLZXkgPSBLRVlTWzJdXG5sb2NhbCBldmVudFN0cmVhbUtleSA9IEtFWVNbNF1cbmxvY2FsIHJhdGVMaW1pdGVyS2V5ID0gS0VZU1s2XVxubG9jYWwgZGVsYXllZEtleSA9IEtFWVNbN11cbmxvY2FsIG9wdHMgPSBjbXNncGFjay51bnBhY2soQVJHVlszXSlcbi0tIEluY2x1ZGVzXG4tLVtbXG4gIEZ1bmN0aW9uIHRvIHJldHVybiB0aGUgbmV4dCBkZWxheWVkIGpvYiB0aW1lc3RhbXAuXG5dXVxubG9jYWwgZnVuY3Rpb24gZ2V0TmV4dERlbGF5ZWRUaW1lc3RhbXAoZGVsYXllZEtleSlcbiAgbG9jYWwgcmVzdWx0ID0gcmNhbGwoXCJaUkFOR0VcIiwgZGVsYXllZEtleSwgMCwgMCwgXCJXSVRIU0NPUkVTXCIpXG4gIGlmICNyZXN1bHQgdGhlblxuICAgIGxvY2FsIG5leHRUaW1lc3RhbXAgPSB0b251bWJlcihyZXN1bHRbMl0pXG4gICAgaWYgbmV4dFRpbWVzdGFtcCB+PSBuaWwgdGhlblxuICAgICAgcmV0dXJuIG5leHRUaW1lc3RhbXAgLyAweDEwMDBcbiAgICBlbmRcbiAgZW5kXG5lbmRcbi0tW1tcbiAgRnVuY3Rpb24gdG8gZ2V0IGN1cnJlbnQgcmF0ZSBsaW1pdCB0dGwuXG5dXVxubG9jYWwgZnVuY3Rpb24gZ2V0UmF0ZUxpbWl0VFRMKG1heEpvYnMsIHJhdGVMaW1pdGVyS2V5KVxuICBpZiBtYXhKb2JzIGFuZCBtYXhKb2JzIDw9IHRvbnVtYmVyKHJjYWxsKFwiR0VUXCIsIHJhdGVMaW1pdGVyS2V5KSBvciAwKSB0aGVuXG4gICAgbG9jYWwgcHR0bCA9IHJjYWxsKFwiUFRUTFwiLCByYXRlTGltaXRlcktleSlcbiAgICBpZiBwdHRsID09IDAgdGhlblxuICAgICAgcmNhbGwoXCJERUxcIiwgcmF0ZUxpbWl0ZXJLZXkpXG4gICAgZW5kXG4gICAgaWYgcHR0bCA+IDAgdGhlblxuICAgICAgcmV0dXJuIHB0dGxcbiAgICBlbmRcbiAgZW5kXG4gIHJldHVybiAwXG5lbmRcbi0tW1tcbiAgRnVuY3Rpb24gdG8gY2hlY2sgZm9yIHRoZSBtZXRhLnBhdXNlZCBrZXkgdG8gZGVjaWRlIGlmIHdlIGFyZSBwYXVzZWQgb3Igbm90XG4gIChzaW5jZSBhbiBlbXB0eSBsaXN0IGFuZCAhRVhJU1RTIGFyZSBub3QgcmVhbGx5IHRoZSBzYW1lKS5cbl1dXG5sb2NhbCBmdW5jdGlvbiBnZXRUYXJnZXRRdWV1ZUxpc3QocXVldWVNZXRhS2V5LCBhY3RpdmVLZXksIHdhaXRLZXksIHBhdXNlZEtleSlcbiAgbG9jYWwgcXVldWVBdHRyaWJ1dGVzID0gcmNhbGwoXCJITUdFVFwiLCBxdWV1ZU1ldGFLZXksIFwicGF1c2VkXCIsIFwiY29uY3VycmVuY3lcIiwgXCJtYXhcIiwgXCJkdXJhdGlvblwiKVxuICBpZiBxdWV1ZUF0dHJpYnV0ZXNbMV0gdGhlblxuICAgIHJldHVybiBwYXVzZWRLZXksIHRydWUsIHF1ZXVlQXR0cmlidXRlc1szXSwgcXVldWVBdHRyaWJ1dGVzWzRdXG4gIGVsc2VcbiAgICBpZiBxdWV1ZUF0dHJpYnV0ZXNbMl0gdGhlblxuICAgICAgbG9jYWwgYWN0aXZlQ291bnQgPSByY2FsbChcIkxMRU5cIiwgYWN0aXZlS2V5KVxuICAgICAgaWYgYWN0aXZlQ291bnQgPj0gdG9udW1iZXIocXVldWVBdHRyaWJ1dGVzWzJdKSB0aGVuXG4gICAgICAgIHJldHVybiB3YWl0S2V5LCB0cnVlLCBxdWV1ZUF0dHJpYnV0ZXNbM10sIHF1ZXVlQXR0cmlidXRlc1s0XVxuICAgICAgZWxzZVxuICAgICAgICByZXR1cm4gd2FpdEtleSwgZmFsc2UsIHF1ZXVlQXR0cmlidXRlc1szXSwgcXVldWVBdHRyaWJ1dGVzWzRdXG4gICAgICBlbmRcbiAgICBlbmRcbiAgZW5kXG4gIHJldHVybiB3YWl0S2V5LCBmYWxzZSwgcXVldWVBdHRyaWJ1dGVzWzNdLCBxdWV1ZUF0dHJpYnV0ZXNbNF1cbmVuZFxuLS1bW1xuICBGdW5jdGlvbiB0byBtb3ZlIGpvYiBmcm9tIHByaW9yaXRpemVkIHN0YXRlIHRvIGFjdGl2ZS5cbl1dXG5sb2NhbCBmdW5jdGlvbiBtb3ZlSm9iRnJvbVByaW9yaXRpemVkVG9BY3RpdmUocHJpb3JpdHlLZXksIGFjdGl2ZUtleSwgcHJpb3JpdHlDb3VudGVyS2V5KVxuICBsb2NhbCBwcmlvcml0aXplZEpvYiA9IHJjYWxsKFwiWlBPUE1JTlwiLCBwcmlvcml0eUtleSlcbiAgaWYgI3ByaW9yaXRpemVkSm9iID4gMCB0aGVuXG4gICAgcmNhbGwoXCJMUFVTSFwiLCBhY3RpdmVLZXksIHByaW9yaXRpemVkSm9iWzFdKVxuICAgIHJldHVybiBwcmlvcml0aXplZEpvYlsxXVxuICBlbHNlXG4gICAgcmNhbGwoXCJERUxcIiwgcHJpb3JpdHlDb3VudGVyS2V5KVxuICBlbmRcbmVuZFxuLS1bW1xuICBGdW5jdGlvbiB0byBtb3ZlIGpvYiBmcm9tIHdhaXQgc3RhdGUgdG8gYWN0aXZlLlxuICBJbnB1dDpcbiAgICBvcHRzIC0gdG9rZW4gLSBsb2NrIHRva2VuXG4gICAgb3B0cyAtIGxvY2tEdXJhdGlvblxuICAgIG9wdHMgLSBsaW1pdGVyXG5dXVxuLS0gSW5jbHVkZXNcbi0tW1tcbiAgQWRkIG1hcmtlciBpZiBuZWVkZWQgd2hlbiBhIGpvYiBpcyBhdmFpbGFibGUuXG5dXVxubG9jYWwgZnVuY3Rpb24gYWRkQmFzZU1hcmtlcklmTmVlZGVkKG1hcmtlcktleSwgaXNQYXVzZWRPck1heGVkKVxuICBpZiBub3QgaXNQYXVzZWRPck1heGVkIHRoZW5cbiAgICByY2FsbChcIlpBRERcIiwgbWFya2VyS2V5LCAwLCBcIjBcIilcbiAgZW5kICBcbmVuZFxubG9jYWwgZnVuY3Rpb24gcHJlcGFyZUpvYkZvclByb2Nlc3Npbmcoa2V5UHJlZml4LCByYXRlTGltaXRlcktleSwgZXZlbnRTdHJlYW1LZXksXG4gICAgam9iSWQsIHByb2Nlc3NlZE9uLCBtYXhKb2JzLCBsaW1pdGVyRHVyYXRpb24sIG1hcmtlcktleSwgb3B0cylcbiAgbG9jYWwgam9iS2V5ID0ga2V5UHJlZml4IC4uIGpvYklkXG4gIC0tIENoZWNrIGlmIHdlIG5lZWQgdG8gcGVyZm9ybSByYXRlIGxpbWl0aW5nLlxuICBpZiBtYXhKb2JzIHRoZW5cbiAgICBsb2NhbCBqb2JDb3VudGVyID0gdG9udW1iZXIocmNhbGwoXCJJTkNSXCIsIHJhdGVMaW1pdGVyS2V5KSlcbiAgICBpZiBqb2JDb3VudGVyID09IDEgdGhlblxuICAgICAgbG9jYWwgaW50ZWdlckR1cmF0aW9uID0gbWF0aC5mbG9vcihtYXRoLmFicyhsaW1pdGVyRHVyYXRpb24pKVxuICAgICAgcmNhbGwoXCJQRVhQSVJFXCIsIHJhdGVMaW1pdGVyS2V5LCBpbnRlZ2VyRHVyYXRpb24pXG4gICAgZW5kXG4gIGVuZFxuICAtLSBnZXQgYSBsb2NrXG4gIGlmIG9wdHNbJ3Rva2VuJ10gfj0gXCIwXCIgdGhlblxuICAgIGxvY2FsIGxvY2tLZXkgPSBqb2JLZXkgLi4gJzpsb2NrJ1xuICAgIHJjYWxsKFwiU0VUXCIsIGxvY2tLZXksIG9wdHNbJ3Rva2VuJ10sIFwiUFhcIiwgb3B0c1snbG9ja0R1cmF0aW9uJ10pXG4gIGVuZFxuICBsb2NhbCBvcHRpb25hbFZhbHVlcyA9IHt9XG4gIGlmIG9wdHNbJ25hbWUnXSB0aGVuXG4gICAgLS0gU2V0IFwicHJvY2Vzc2VkQnlcIiBmaWVsZCB0byB0aGUgd29ya2VyIG5hbWVcbiAgICB0YWJsZS5pbnNlcnQob3B0aW9uYWxWYWx1ZXMsIFwicGJcIilcbiAgICB0YWJsZS5pbnNlcnQob3B0aW9uYWxWYWx1ZXMsIG9wdHNbJ25hbWUnXSlcbiAgZW5kXG4gIHJjYWxsKFwiWEFERFwiLCBldmVudFN0cmVhbUtleSwgXCIqXCIsIFwiZXZlbnRcIiwgXCJhY3RpdmVcIiwgXCJqb2JJZFwiLCBqb2JJZCwgXCJwcmV2XCIsIFwid2FpdGluZ1wiKVxuICByY2FsbChcIkhNU0VUXCIsIGpvYktleSwgXCJwcm9jZXNzZWRPblwiLCBwcm9jZXNzZWRPbiwgdW5wYWNrKG9wdGlvbmFsVmFsdWVzKSlcbiAgcmNhbGwoXCJISU5DUkJZXCIsIGpvYktleSwgXCJhdHNcIiwgMSlcbiAgYWRkQmFzZU1hcmtlcklmTmVlZGVkKG1hcmtlcktleSwgZmFsc2UpXG4gIC0tIHJhdGUgbGltaXQgZGVsYXkgbXVzdCBiZSAwIGluIHRoaXMgY2FzZSB0byBwcmV2ZW50IGFkZGluZyBtb3JlIGRlbGF5XG4gIC0tIHdoZW4gam9iIHRoYXQgaXMgbW92ZWQgdG8gYWN0aXZlIG5lZWRzIHRvIGJlIHByb2Nlc3NlZFxuICByZXR1cm4ge3JjYWxsKFwiSEdFVEFMTFwiLCBqb2JLZXkpLCBqb2JJZCwgMCwgMH0gLS0gZ2V0IGpvYiBkYXRhXG5lbmRcbi0tW1tcbiAgVXBkYXRlcyB0aGUgZGVsYXkgc2V0LCBieSBtb3ZpbmcgZGVsYXllZCBqb2JzIHRoYXQgc2hvdWxkXG4gIGJlIHByb2Nlc3NlZCBub3cgdG8gXCJ3YWl0XCIuXG4gICAgIEV2ZW50czpcbiAgICAgICd3YWl0aW5nJ1xuXV1cbi0tIEluY2x1ZGVzXG4tLVtbXG4gIEZ1bmN0aW9uIHRvIGFkZCBqb2IgaW4gdGFyZ2V0IGxpc3QgYW5kIGFkZCBtYXJrZXIgaWYgbmVlZGVkLlxuXV1cbi0tIEluY2x1ZGVzXG5sb2NhbCBmdW5jdGlvbiBhZGRKb2JJblRhcmdldExpc3QodGFyZ2V0S2V5LCBtYXJrZXJLZXksIHB1c2hDbWQsIGlzUGF1c2VkT3JNYXhlZCwgam9iSWQpXG4gIHJjYWxsKHB1c2hDbWQsIHRhcmdldEtleSwgam9iSWQpXG4gIGFkZEJhc2VNYXJrZXJJZk5lZWRlZChtYXJrZXJLZXksIGlzUGF1c2VkT3JNYXhlZClcbmVuZFxuLS1bW1xuICBGdW5jdGlvbiB0byBhZGQgam9iIGNvbnNpZGVyaW5nIHByaW9yaXR5LlxuXV1cbi0tIEluY2x1ZGVzXG4tLVtbXG4gIEZ1bmN0aW9uIHRvIGdldCBwcmlvcml0eSBzY29yZS5cbl1dXG5sb2NhbCBmdW5jdGlvbiBnZXRQcmlvcml0eVNjb3JlKHByaW9yaXR5LCBwcmlvcml0eUNvdW50ZXJLZXkpXG4gIGxvY2FsIHByaW9Db3VudGVyID0gcmNhbGwoXCJJTkNSXCIsIHByaW9yaXR5Q291bnRlcktleSlcbiAgcmV0dXJuIHByaW9yaXR5ICogMHgxMDAwMDAwMDAgKyBwcmlvQ291bnRlciAlIDB4MTAwMDAwMDAwXG5lbmRcbmxvY2FsIGZ1bmN0aW9uIGFkZEpvYldpdGhQcmlvcml0eShtYXJrZXJLZXksIHByaW9yaXRpemVkS2V5LCBwcmlvcml0eSwgam9iSWQsIHByaW9yaXR5Q291bnRlcktleSxcbiAgaXNQYXVzZWRPck1heGVkKVxuICBsb2NhbCBzY29yZSA9IGdldFByaW9yaXR5U2NvcmUocHJpb3JpdHksIHByaW9yaXR5Q291bnRlcktleSlcbiAgcmNhbGwoXCJaQUREXCIsIHByaW9yaXRpemVkS2V5LCBzY29yZSwgam9iSWQpXG4gIGFkZEJhc2VNYXJrZXJJZk5lZWRlZChtYXJrZXJLZXksIGlzUGF1c2VkT3JNYXhlZClcbmVuZFxuLS0gVHJ5IHRvIGdldCBhcyBtdWNoIGFzIDEwMDAgam9icyBhdCBvbmNlXG5sb2NhbCBmdW5jdGlvbiBwcm9tb3RlRGVsYXllZEpvYnMoZGVsYXllZEtleSwgbWFya2VyS2V5LCB0YXJnZXRLZXksIHByaW9yaXRpemVkS2V5LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50U3RyZWFtS2V5LCBwcmVmaXgsIHRpbWVzdGFtcCwgcHJpb3JpdHlDb3VudGVyS2V5LCBpc1BhdXNlZClcbiAgICBsb2NhbCBqb2JzID0gcmNhbGwoXCJaUkFOR0VCWVNDT1JFXCIsIGRlbGF5ZWRLZXksIDAsICh0aW1lc3RhbXAgKyAxKSAqIDB4MTAwMCAtIDEsIFwiTElNSVRcIiwgMCwgMTAwMClcbiAgICBpZiAoI2pvYnMgPiAwKSB0aGVuXG4gICAgICAgIHJjYWxsKFwiWlJFTVwiLCBkZWxheWVkS2V5LCB1bnBhY2soam9icykpXG4gICAgICAgIGZvciBfLCBqb2JJZCBpbiBpcGFpcnMoam9icykgZG9cbiAgICAgICAgICAgIGxvY2FsIGpvYktleSA9IHByZWZpeCAuLiBqb2JJZFxuICAgICAgICAgICAgbG9jYWwgcHJpb3JpdHkgPVxuICAgICAgICAgICAgICAgIHRvbnVtYmVyKHJjYWxsKFwiSEdFVFwiLCBqb2JLZXksIFwicHJpb3JpdHlcIikpIG9yIDBcbiAgICAgICAgICAgIGlmIHByaW9yaXR5ID09IDAgdGhlblxuICAgICAgICAgICAgICAgIC0tIExJRk8gb3IgRklGT1xuICAgICAgICAgICAgICAgIHJjYWxsKFwiTFBVU0hcIiwgdGFyZ2V0S2V5LCBqb2JJZClcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBsb2NhbCBzY29yZSA9IGdldFByaW9yaXR5U2NvcmUocHJpb3JpdHksIHByaW9yaXR5Q291bnRlcktleSlcbiAgICAgICAgICAgICAgICByY2FsbChcIlpBRERcIiwgcHJpb3JpdGl6ZWRLZXksIHNjb3JlLCBqb2JJZClcbiAgICAgICAgICAgIGVuZFxuICAgICAgICAgICAgLS0gRW1pdCB3YWl0aW5nIGV2ZW50XG4gICAgICAgICAgICByY2FsbChcIlhBRERcIiwgZXZlbnRTdHJlYW1LZXksIFwiKlwiLCBcImV2ZW50XCIsIFwid2FpdGluZ1wiLCBcImpvYklkXCIsXG4gICAgICAgICAgICAgICAgICBqb2JJZCwgXCJwcmV2XCIsIFwiZGVsYXllZFwiKVxuICAgICAgICAgICAgcmNhbGwoXCJIU0VUXCIsIGpvYktleSwgXCJkZWxheVwiLCAwKVxuICAgICAgICBlbmRcbiAgICAgICAgYWRkQmFzZU1hcmtlcklmTmVlZGVkKG1hcmtlcktleSwgaXNQYXVzZWQpXG4gICAgZW5kXG5lbmRcbmxvY2FsIHRhcmdldCwgaXNQYXVzZWRPck1heGVkLCByYXRlTGltaXRNYXgsIHJhdGVMaW1pdER1cmF0aW9uID0gZ2V0VGFyZ2V0UXVldWVMaXN0KEtFWVNbOV0sXG4gICAgYWN0aXZlS2V5LCB3YWl0S2V5LCBLRVlTWzhdKVxuLS0gQ2hlY2sgaWYgdGhlcmUgYXJlIGRlbGF5ZWQgam9icyB0aGF0IHdlIGNhbiBtb3ZlIHRvIHdhaXQuXG5sb2NhbCBtYXJrZXJLZXkgPSBLRVlTWzExXVxucHJvbW90ZURlbGF5ZWRKb2JzKGRlbGF5ZWRLZXksIG1hcmtlcktleSwgdGFyZ2V0LCBLRVlTWzNdLCBldmVudFN0cmVhbUtleSwgQVJHVlsxXSxcbiAgICAgICAgICAgICAgICAgICBBUkdWWzJdLCBLRVlTWzEwXSwgaXNQYXVzZWRPck1heGVkKVxubG9jYWwgbWF4Sm9icyA9IHRvbnVtYmVyKHJhdGVMaW1pdE1heCBvciAob3B0c1snbGltaXRlciddIGFuZCBvcHRzWydsaW1pdGVyJ11bJ21heCddKSlcbmxvY2FsIGV4cGlyZVRpbWUgPSBnZXRSYXRlTGltaXRUVEwobWF4Sm9icywgcmF0ZUxpbWl0ZXJLZXkpXG4tLSBDaGVjayBpZiB3ZSBhcmUgcmF0ZSBsaW1pdGVkIGZpcnN0LlxuaWYgZXhwaXJlVGltZSA+IDAgdGhlbiByZXR1cm4gezAsIDAsIGV4cGlyZVRpbWUsIDB9IGVuZFxuLS0gcGF1c2VkIG9yIG1heGVkIHF1ZXVlXG5pZiBpc1BhdXNlZE9yTWF4ZWQgdGhlbiByZXR1cm4gezAsIDAsIDAsIDB9IGVuZFxubG9jYWwgbGltaXRlckR1cmF0aW9uID0gKG9wdHNbJ2xpbWl0ZXInXSBhbmQgb3B0c1snbGltaXRlciddWydkdXJhdGlvbiddKSBvciByYXRlTGltaXREdXJhdGlvblxuLS0gbm8gam9iIElELCB0cnkgbm9uLWJsb2NraW5nIG1vdmUgZnJvbSB3YWl0IHRvIGFjdGl2ZVxubG9jYWwgam9iSWQgPSByY2FsbChcIlJQT1BMUFVTSFwiLCB3YWl0S2V5LCBhY3RpdmVLZXkpXG4tLSBNYXJrZXJzIGluIHdhaXRsaXN0IERFUFJFQ0FURUQgaW4gdjU6IFdpbGwgYmUgY29tcGxldGVseSByZW1vdmVkIGluIHY2LlxuaWYgam9iSWQgYW5kIHN0cmluZy5zdWIoam9iSWQsIDEsIDIpID09IFwiMDpcIiB0aGVuXG4gICAgcmNhbGwoXCJMUkVNXCIsIGFjdGl2ZUtleSwgMSwgam9iSWQpXG4gICAgam9iSWQgPSByY2FsbChcIlJQT1BMUFVTSFwiLCB3YWl0S2V5LCBhY3RpdmVLZXkpXG5lbmRcbmlmIGpvYklkIHRoZW5cbiAgICByZXR1cm4gcHJlcGFyZUpvYkZvclByb2Nlc3NpbmcoQVJHVlsxXSwgcmF0ZUxpbWl0ZXJLZXksIGV2ZW50U3RyZWFtS2V5LCBqb2JJZCwgQVJHVlsyXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4Sm9icywgbGltaXRlckR1cmF0aW9uLCBtYXJrZXJLZXksIG9wdHMpXG5lbHNlXG4gICAgam9iSWQgPSBtb3ZlSm9iRnJvbVByaW9yaXRpemVkVG9BY3RpdmUoS0VZU1szXSwgYWN0aXZlS2V5LCBLRVlTWzEwXSlcbiAgICBpZiBqb2JJZCB0aGVuXG4gICAgICAgIHJldHVybiBwcmVwYXJlSm9iRm9yUHJvY2Vzc2luZyhBUkdWWzFdLCByYXRlTGltaXRlcktleSwgZXZlbnRTdHJlYW1LZXksIGpvYklkLCBBUkdWWzJdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4Sm9icywgbGltaXRlckR1cmF0aW9uLCBtYXJrZXJLZXksIG9wdHMpXG4gICAgZW5kXG5lbmRcbi0tIFJldHVybiB0aGUgdGltZXN0YW1wIGZvciB0aGUgbmV4dCBkZWxheWVkIGpvYiBpZiBhbnkuXG5sb2NhbCBuZXh0VGltZXN0YW1wID0gZ2V0TmV4dERlbGF5ZWRUaW1lc3RhbXAoZGVsYXllZEtleSlcbmlmIG5leHRUaW1lc3RhbXAgfj0gbmlsIHRoZW4gcmV0dXJuIHswLCAwLCAwLCBuZXh0VGltZXN0YW1wfSBlbmRcbnJldHVybiB7MCwgMCwgMCwgMH1cbmA7XG5leHBvcnRzLm1vdmVUb0FjdGl2ZSA9IHtcbiAgICBuYW1lOiAnbW92ZVRvQWN0aXZlJyxcbiAgICBjb250ZW50LFxuICAgIGtleXM6IDExLFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1vdmVUb0FjdGl2ZS0xMS5qcy5tYXAiXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJtb3ZlVG9BY3RpdmUiLCJjb250ZW50IiwibmFtZSIsImtleXMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/scripts/moveToActive-11.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/scripts/moveToDelayed-8.js":
/*!*****************************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/scripts/moveToDelayed-8.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.moveToDelayed = void 0;\nconst content = `--[[\n  Moves job from active to delayed set.\n  Input:\n    KEYS[1] marker key\n    KEYS[2] active key\n    KEYS[3] prioritized key\n    KEYS[4] delayed key\n    KEYS[5] job key\n    KEYS[6] events stream\n    KEYS[7] meta key\n    KEYS[8] stalled key\n    ARGV[1] key prefix\n    ARGV[2] timestamp\n    ARGV[3] the id of the job\n    ARGV[4] queue token\n    ARGV[5] delay value\n    ARGV[6] skip attempt\n    ARGV[7] optional job fields to update\n  Output:\n    0 - OK\n   -1 - Missing job.\n   -3 - Job not in active set.\n  Events:\n    - delayed key.\n]]\nlocal rcall = redis.call\n-- Includes\n--[[\n  Add delay marker if needed.\n]]\n-- Includes\n--[[\n  Function to return the next delayed job timestamp.\n]]\nlocal function getNextDelayedTimestamp(delayedKey)\n  local result = rcall(\"ZRANGE\", delayedKey, 0, 0, \"WITHSCORES\")\n  if #result then\n    local nextTimestamp = tonumber(result[2])\n    if nextTimestamp ~= nil then\n      return nextTimestamp / 0x1000\n    end\n  end\nend\nlocal function addDelayMarkerIfNeeded(markerKey, delayedKey)\n  local nextTimestamp = getNextDelayedTimestamp(delayedKey)\n  if nextTimestamp ~= nil then\n    -- Replace the score of the marker with the newest known\n    -- next timestamp.\n    rcall(\"ZADD\", markerKey, nextTimestamp, \"1\")\n  end\nend\n--[[\n  Bake in the job id first 12 bits into the timestamp\n  to guarantee correct execution order of delayed jobs\n  (up to 4096 jobs per given timestamp or 4096 jobs apart per timestamp)\n  WARNING: Jobs that are so far apart that they wrap around will cause FIFO to fail\n]]\nlocal function getDelayedScore(delayedKey, timestamp, delay)\n  local delayedTimestamp = (delay > 0 and (tonumber(timestamp) + delay)) or tonumber(timestamp)\n  local minScore = delayedTimestamp * 0x1000\n  local maxScore = (delayedTimestamp + 1 ) * 0x1000 - 1\n  local result = rcall(\"ZREVRANGEBYSCORE\", delayedKey, maxScore,\n    minScore, \"WITHSCORES\",\"LIMIT\", 0, 1)\n  if #result then\n    local currentMaxScore = tonumber(result[2])\n    if currentMaxScore ~= nil then\n      if currentMaxScore >= maxScore then\n        return maxScore, delayedTimestamp\n      else\n        return currentMaxScore + 1, delayedTimestamp\n      end\n    end\n  end\n  return minScore, delayedTimestamp\nend\n--[[\n  Function to get max events value or set by default 10000.\n]]\nlocal function getOrSetMaxEvents(metaKey)\n  local maxEvents = rcall(\"HGET\", metaKey, \"opts.maxLenEvents\")\n  if not maxEvents then\n    maxEvents = 10000\n    rcall(\"HSET\", metaKey, \"opts.maxLenEvents\", maxEvents)\n  end\n  return maxEvents\nend\nlocal function removeLock(jobKey, stalledKey, token, jobId)\n  if token ~= \"0\" then\n    local lockKey = jobKey .. ':lock'\n    local lockToken = rcall(\"GET\", lockKey)\n    if lockToken == token then\n      rcall(\"DEL\", lockKey)\n      rcall(\"SREM\", stalledKey, jobId)\n    else\n      if lockToken then\n        -- Lock exists but token does not match\n        return -6\n      else\n        -- Lock is missing completely\n        return -2\n      end\n    end\n  end\n  return 0\nend\n--[[\n  Function to update a bunch of fields in a job.\n]]\nlocal function updateJobFields(jobKey, msgpackedFields)\n  if msgpackedFields and #msgpackedFields > 0 then\n    local fieldsToUpdate = cmsgpack.unpack(msgpackedFields)\n    if fieldsToUpdate then\n      rcall(\"HMSET\", jobKey, unpack(fieldsToUpdate))\n    end\n  end\nend\nlocal jobKey = KEYS[5]\nlocal metaKey = KEYS[7]\nlocal token = ARGV[4] \nif rcall(\"EXISTS\", jobKey) == 1 then\n    local errorCode = removeLock(jobKey, KEYS[8], token, ARGV[3])\n    if errorCode < 0 then\n        return errorCode\n    end\n    updateJobFields(jobKey, ARGV[7])\n    local delayedKey = KEYS[4]\n    local jobId = ARGV[3]\n    local delay = tonumber(ARGV[5])\n    local numRemovedElements = rcall(\"LREM\", KEYS[2], -1, jobId)\n    if numRemovedElements < 1 then return -3 end\n    local score, delayedTimestamp = getDelayedScore(delayedKey, ARGV[2], delay)\n    if ARGV[6] == \"0\" then\n        rcall(\"HINCRBY\", jobKey, \"atm\", 1)\n    end\n    rcall(\"HSET\", jobKey, \"delay\", ARGV[5])\n    local maxEvents = getOrSetMaxEvents(metaKey)\n    rcall(\"ZADD\", delayedKey, score, jobId)\n    rcall(\"XADD\", KEYS[6], \"MAXLEN\", \"~\", maxEvents, \"*\", \"event\", \"delayed\",\n          \"jobId\", jobId, \"delay\", delayedTimestamp)\n    -- Check if we need to push a marker job to wake up sleeping workers.\n    local markerKey = KEYS[1]\n    addDelayMarkerIfNeeded(markerKey, delayedKey)\n    return 0\nelse\n    return -1\nend\n`;\nexports.moveToDelayed = {\n    name: \"moveToDelayed\",\n    content,\n    keys: 8\n}; //# sourceMappingURL=moveToDelayed-8.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL3NjcmlwdHMvbW92ZVRvRGVsYXllZC04LmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCxxQkFBcUIsR0FBRyxLQUFLO0FBQzdCLE1BQU1HLFVBQVUsQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFrSmpCLENBQUM7QUFDREgscUJBQXFCLEdBQUc7SUFDcEJJLE1BQU07SUFDTkQ7SUFDQUUsTUFBTTtBQUNWLEdBQ0EsMkNBQTJDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb25seWZhbnMtcGxhdGZvcm0vLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL3NjcmlwdHMvbW92ZVRvRGVsYXllZC04LmpzPzI0NTIiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLm1vdmVUb0RlbGF5ZWQgPSB2b2lkIDA7XG5jb25zdCBjb250ZW50ID0gYC0tW1tcbiAgTW92ZXMgam9iIGZyb20gYWN0aXZlIHRvIGRlbGF5ZWQgc2V0LlxuICBJbnB1dDpcbiAgICBLRVlTWzFdIG1hcmtlciBrZXlcbiAgICBLRVlTWzJdIGFjdGl2ZSBrZXlcbiAgICBLRVlTWzNdIHByaW9yaXRpemVkIGtleVxuICAgIEtFWVNbNF0gZGVsYXllZCBrZXlcbiAgICBLRVlTWzVdIGpvYiBrZXlcbiAgICBLRVlTWzZdIGV2ZW50cyBzdHJlYW1cbiAgICBLRVlTWzddIG1ldGEga2V5XG4gICAgS0VZU1s4XSBzdGFsbGVkIGtleVxuICAgIEFSR1ZbMV0ga2V5IHByZWZpeFxuICAgIEFSR1ZbMl0gdGltZXN0YW1wXG4gICAgQVJHVlszXSB0aGUgaWQgb2YgdGhlIGpvYlxuICAgIEFSR1ZbNF0gcXVldWUgdG9rZW5cbiAgICBBUkdWWzVdIGRlbGF5IHZhbHVlXG4gICAgQVJHVls2XSBza2lwIGF0dGVtcHRcbiAgICBBUkdWWzddIG9wdGlvbmFsIGpvYiBmaWVsZHMgdG8gdXBkYXRlXG4gIE91dHB1dDpcbiAgICAwIC0gT0tcbiAgIC0xIC0gTWlzc2luZyBqb2IuXG4gICAtMyAtIEpvYiBub3QgaW4gYWN0aXZlIHNldC5cbiAgRXZlbnRzOlxuICAgIC0gZGVsYXllZCBrZXkuXG5dXVxubG9jYWwgcmNhbGwgPSByZWRpcy5jYWxsXG4tLSBJbmNsdWRlc1xuLS1bW1xuICBBZGQgZGVsYXkgbWFya2VyIGlmIG5lZWRlZC5cbl1dXG4tLSBJbmNsdWRlc1xuLS1bW1xuICBGdW5jdGlvbiB0byByZXR1cm4gdGhlIG5leHQgZGVsYXllZCBqb2IgdGltZXN0YW1wLlxuXV1cbmxvY2FsIGZ1bmN0aW9uIGdldE5leHREZWxheWVkVGltZXN0YW1wKGRlbGF5ZWRLZXkpXG4gIGxvY2FsIHJlc3VsdCA9IHJjYWxsKFwiWlJBTkdFXCIsIGRlbGF5ZWRLZXksIDAsIDAsIFwiV0lUSFNDT1JFU1wiKVxuICBpZiAjcmVzdWx0IHRoZW5cbiAgICBsb2NhbCBuZXh0VGltZXN0YW1wID0gdG9udW1iZXIocmVzdWx0WzJdKVxuICAgIGlmIG5leHRUaW1lc3RhbXAgfj0gbmlsIHRoZW5cbiAgICAgIHJldHVybiBuZXh0VGltZXN0YW1wIC8gMHgxMDAwXG4gICAgZW5kXG4gIGVuZFxuZW5kXG5sb2NhbCBmdW5jdGlvbiBhZGREZWxheU1hcmtlcklmTmVlZGVkKG1hcmtlcktleSwgZGVsYXllZEtleSlcbiAgbG9jYWwgbmV4dFRpbWVzdGFtcCA9IGdldE5leHREZWxheWVkVGltZXN0YW1wKGRlbGF5ZWRLZXkpXG4gIGlmIG5leHRUaW1lc3RhbXAgfj0gbmlsIHRoZW5cbiAgICAtLSBSZXBsYWNlIHRoZSBzY29yZSBvZiB0aGUgbWFya2VyIHdpdGggdGhlIG5ld2VzdCBrbm93blxuICAgIC0tIG5leHQgdGltZXN0YW1wLlxuICAgIHJjYWxsKFwiWkFERFwiLCBtYXJrZXJLZXksIG5leHRUaW1lc3RhbXAsIFwiMVwiKVxuICBlbmRcbmVuZFxuLS1bW1xuICBCYWtlIGluIHRoZSBqb2IgaWQgZmlyc3QgMTIgYml0cyBpbnRvIHRoZSB0aW1lc3RhbXBcbiAgdG8gZ3VhcmFudGVlIGNvcnJlY3QgZXhlY3V0aW9uIG9yZGVyIG9mIGRlbGF5ZWQgam9ic1xuICAodXAgdG8gNDA5NiBqb2JzIHBlciBnaXZlbiB0aW1lc3RhbXAgb3IgNDA5NiBqb2JzIGFwYXJ0IHBlciB0aW1lc3RhbXApXG4gIFdBUk5JTkc6IEpvYnMgdGhhdCBhcmUgc28gZmFyIGFwYXJ0IHRoYXQgdGhleSB3cmFwIGFyb3VuZCB3aWxsIGNhdXNlIEZJRk8gdG8gZmFpbFxuXV1cbmxvY2FsIGZ1bmN0aW9uIGdldERlbGF5ZWRTY29yZShkZWxheWVkS2V5LCB0aW1lc3RhbXAsIGRlbGF5KVxuICBsb2NhbCBkZWxheWVkVGltZXN0YW1wID0gKGRlbGF5ID4gMCBhbmQgKHRvbnVtYmVyKHRpbWVzdGFtcCkgKyBkZWxheSkpIG9yIHRvbnVtYmVyKHRpbWVzdGFtcClcbiAgbG9jYWwgbWluU2NvcmUgPSBkZWxheWVkVGltZXN0YW1wICogMHgxMDAwXG4gIGxvY2FsIG1heFNjb3JlID0gKGRlbGF5ZWRUaW1lc3RhbXAgKyAxICkgKiAweDEwMDAgLSAxXG4gIGxvY2FsIHJlc3VsdCA9IHJjYWxsKFwiWlJFVlJBTkdFQllTQ09SRVwiLCBkZWxheWVkS2V5LCBtYXhTY29yZSxcbiAgICBtaW5TY29yZSwgXCJXSVRIU0NPUkVTXCIsXCJMSU1JVFwiLCAwLCAxKVxuICBpZiAjcmVzdWx0IHRoZW5cbiAgICBsb2NhbCBjdXJyZW50TWF4U2NvcmUgPSB0b251bWJlcihyZXN1bHRbMl0pXG4gICAgaWYgY3VycmVudE1heFNjb3JlIH49IG5pbCB0aGVuXG4gICAgICBpZiBjdXJyZW50TWF4U2NvcmUgPj0gbWF4U2NvcmUgdGhlblxuICAgICAgICByZXR1cm4gbWF4U2NvcmUsIGRlbGF5ZWRUaW1lc3RhbXBcbiAgICAgIGVsc2VcbiAgICAgICAgcmV0dXJuIGN1cnJlbnRNYXhTY29yZSArIDEsIGRlbGF5ZWRUaW1lc3RhbXBcbiAgICAgIGVuZFxuICAgIGVuZFxuICBlbmRcbiAgcmV0dXJuIG1pblNjb3JlLCBkZWxheWVkVGltZXN0YW1wXG5lbmRcbi0tW1tcbiAgRnVuY3Rpb24gdG8gZ2V0IG1heCBldmVudHMgdmFsdWUgb3Igc2V0IGJ5IGRlZmF1bHQgMTAwMDAuXG5dXVxubG9jYWwgZnVuY3Rpb24gZ2V0T3JTZXRNYXhFdmVudHMobWV0YUtleSlcbiAgbG9jYWwgbWF4RXZlbnRzID0gcmNhbGwoXCJIR0VUXCIsIG1ldGFLZXksIFwib3B0cy5tYXhMZW5FdmVudHNcIilcbiAgaWYgbm90IG1heEV2ZW50cyB0aGVuXG4gICAgbWF4RXZlbnRzID0gMTAwMDBcbiAgICByY2FsbChcIkhTRVRcIiwgbWV0YUtleSwgXCJvcHRzLm1heExlbkV2ZW50c1wiLCBtYXhFdmVudHMpXG4gIGVuZFxuICByZXR1cm4gbWF4RXZlbnRzXG5lbmRcbmxvY2FsIGZ1bmN0aW9uIHJlbW92ZUxvY2soam9iS2V5LCBzdGFsbGVkS2V5LCB0b2tlbiwgam9iSWQpXG4gIGlmIHRva2VuIH49IFwiMFwiIHRoZW5cbiAgICBsb2NhbCBsb2NrS2V5ID0gam9iS2V5IC4uICc6bG9jaydcbiAgICBsb2NhbCBsb2NrVG9rZW4gPSByY2FsbChcIkdFVFwiLCBsb2NrS2V5KVxuICAgIGlmIGxvY2tUb2tlbiA9PSB0b2tlbiB0aGVuXG4gICAgICByY2FsbChcIkRFTFwiLCBsb2NrS2V5KVxuICAgICAgcmNhbGwoXCJTUkVNXCIsIHN0YWxsZWRLZXksIGpvYklkKVxuICAgIGVsc2VcbiAgICAgIGlmIGxvY2tUb2tlbiB0aGVuXG4gICAgICAgIC0tIExvY2sgZXhpc3RzIGJ1dCB0b2tlbiBkb2VzIG5vdCBtYXRjaFxuICAgICAgICByZXR1cm4gLTZcbiAgICAgIGVsc2VcbiAgICAgICAgLS0gTG9jayBpcyBtaXNzaW5nIGNvbXBsZXRlbHlcbiAgICAgICAgcmV0dXJuIC0yXG4gICAgICBlbmRcbiAgICBlbmRcbiAgZW5kXG4gIHJldHVybiAwXG5lbmRcbi0tW1tcbiAgRnVuY3Rpb24gdG8gdXBkYXRlIGEgYnVuY2ggb2YgZmllbGRzIGluIGEgam9iLlxuXV1cbmxvY2FsIGZ1bmN0aW9uIHVwZGF0ZUpvYkZpZWxkcyhqb2JLZXksIG1zZ3BhY2tlZEZpZWxkcylcbiAgaWYgbXNncGFja2VkRmllbGRzIGFuZCAjbXNncGFja2VkRmllbGRzID4gMCB0aGVuXG4gICAgbG9jYWwgZmllbGRzVG9VcGRhdGUgPSBjbXNncGFjay51bnBhY2sobXNncGFja2VkRmllbGRzKVxuICAgIGlmIGZpZWxkc1RvVXBkYXRlIHRoZW5cbiAgICAgIHJjYWxsKFwiSE1TRVRcIiwgam9iS2V5LCB1bnBhY2soZmllbGRzVG9VcGRhdGUpKVxuICAgIGVuZFxuICBlbmRcbmVuZFxubG9jYWwgam9iS2V5ID0gS0VZU1s1XVxubG9jYWwgbWV0YUtleSA9IEtFWVNbN11cbmxvY2FsIHRva2VuID0gQVJHVls0XSBcbmlmIHJjYWxsKFwiRVhJU1RTXCIsIGpvYktleSkgPT0gMSB0aGVuXG4gICAgbG9jYWwgZXJyb3JDb2RlID0gcmVtb3ZlTG9jayhqb2JLZXksIEtFWVNbOF0sIHRva2VuLCBBUkdWWzNdKVxuICAgIGlmIGVycm9yQ29kZSA8IDAgdGhlblxuICAgICAgICByZXR1cm4gZXJyb3JDb2RlXG4gICAgZW5kXG4gICAgdXBkYXRlSm9iRmllbGRzKGpvYktleSwgQVJHVls3XSlcbiAgICBsb2NhbCBkZWxheWVkS2V5ID0gS0VZU1s0XVxuICAgIGxvY2FsIGpvYklkID0gQVJHVlszXVxuICAgIGxvY2FsIGRlbGF5ID0gdG9udW1iZXIoQVJHVls1XSlcbiAgICBsb2NhbCBudW1SZW1vdmVkRWxlbWVudHMgPSByY2FsbChcIkxSRU1cIiwgS0VZU1syXSwgLTEsIGpvYklkKVxuICAgIGlmIG51bVJlbW92ZWRFbGVtZW50cyA8IDEgdGhlbiByZXR1cm4gLTMgZW5kXG4gICAgbG9jYWwgc2NvcmUsIGRlbGF5ZWRUaW1lc3RhbXAgPSBnZXREZWxheWVkU2NvcmUoZGVsYXllZEtleSwgQVJHVlsyXSwgZGVsYXkpXG4gICAgaWYgQVJHVls2XSA9PSBcIjBcIiB0aGVuXG4gICAgICAgIHJjYWxsKFwiSElOQ1JCWVwiLCBqb2JLZXksIFwiYXRtXCIsIDEpXG4gICAgZW5kXG4gICAgcmNhbGwoXCJIU0VUXCIsIGpvYktleSwgXCJkZWxheVwiLCBBUkdWWzVdKVxuICAgIGxvY2FsIG1heEV2ZW50cyA9IGdldE9yU2V0TWF4RXZlbnRzKG1ldGFLZXkpXG4gICAgcmNhbGwoXCJaQUREXCIsIGRlbGF5ZWRLZXksIHNjb3JlLCBqb2JJZClcbiAgICByY2FsbChcIlhBRERcIiwgS0VZU1s2XSwgXCJNQVhMRU5cIiwgXCJ+XCIsIG1heEV2ZW50cywgXCIqXCIsIFwiZXZlbnRcIiwgXCJkZWxheWVkXCIsXG4gICAgICAgICAgXCJqb2JJZFwiLCBqb2JJZCwgXCJkZWxheVwiLCBkZWxheWVkVGltZXN0YW1wKVxuICAgIC0tIENoZWNrIGlmIHdlIG5lZWQgdG8gcHVzaCBhIG1hcmtlciBqb2IgdG8gd2FrZSB1cCBzbGVlcGluZyB3b3JrZXJzLlxuICAgIGxvY2FsIG1hcmtlcktleSA9IEtFWVNbMV1cbiAgICBhZGREZWxheU1hcmtlcklmTmVlZGVkKG1hcmtlcktleSwgZGVsYXllZEtleSlcbiAgICByZXR1cm4gMFxuZWxzZVxuICAgIHJldHVybiAtMVxuZW5kXG5gO1xuZXhwb3J0cy5tb3ZlVG9EZWxheWVkID0ge1xuICAgIG5hbWU6ICdtb3ZlVG9EZWxheWVkJyxcbiAgICBjb250ZW50LFxuICAgIGtleXM6IDgsXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bW92ZVRvRGVsYXllZC04LmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsIm1vdmVUb0RlbGF5ZWQiLCJjb250ZW50IiwibmFtZSIsImtleXMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/scripts/moveToDelayed-8.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/scripts/moveToFinished-14.js":
/*!*******************************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/scripts/moveToFinished-14.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.moveToFinished = void 0;\nconst content = `--[[\n  Move job from active to a finished status (completed o failed)\n  A job can only be moved to completed if it was active.\n  The job must be locked before it can be moved to a finished status,\n  and the lock must be released in this script.\n    Input:\n      KEYS[1] wait key\n      KEYS[2] active key\n      KEYS[3] prioritized key\n      KEYS[4] event stream key\n      KEYS[5] stalled key\n      -- Rate limiting\n      KEYS[6] rate limiter key\n      KEYS[7] delayed key\n      KEYS[8] paused key\n      KEYS[9] meta key\n      KEYS[10] pc priority counter\n      KEYS[11] completed/failed key\n      KEYS[12] jobId key\n      KEYS[13] metrics key\n      KEYS[14] marker key\n      ARGV[1]  jobId\n      ARGV[2]  timestamp\n      ARGV[3]  msg property returnvalue / failedReason\n      ARGV[4]  return value / failed reason\n      ARGV[5]  target (completed/failed)\n      ARGV[6]  fetch next?\n      ARGV[7]  keys prefix\n      ARGV[8]  opts\n      ARGV[9]  job fields to update\n      opts - token - lock token\n      opts - keepJobs\n      opts - lockDuration - lock duration in milliseconds\n      opts - attempts max attempts\n      opts - maxMetricsSize\n      opts - fpof - fail parent on fail\n      opts - cpof - continue parent on fail\n      opts - idof - ignore dependency on fail\n      opts - rdof - remove dependency on fail\n      opts - name - worker name\n    Output:\n      0 OK\n      -1 Missing key.\n      -2 Missing lock.\n      -3 Job not in active set\n      -4 Job has pending children\n      -6 Lock is not owned by this client\n      -9 Job has failed children\n    Events:\n      'completed/failed'\n]]\nlocal rcall = redis.call\n--- Includes\n--[[\n  Functions to collect metrics based on a current and previous count of jobs.\n  Granualarity is fixed at 1 minute.\n]]\n--[[\n  Function to loop in batches.\n  Just a bit of warning, some commands as ZREM\n  could receive a maximum of 7000 parameters per call.\n]]\nlocal function batches(n, batchSize)\n  local i = 0\n  return function()\n    local from = i * batchSize + 1\n    i = i + 1\n    if (from <= n) then\n      local to = math.min(from + batchSize - 1, n)\n      return from, to\n    end\n  end\nend\nlocal function collectMetrics(metaKey, dataPointsList, maxDataPoints,\n                                 timestamp)\n    -- Increment current count\n    local count = rcall(\"HINCRBY\", metaKey, \"count\", 1) - 1\n    -- Compute how many data points we need to add to the list, N.\n    local prevTS = rcall(\"HGET\", metaKey, \"prevTS\")\n    if not prevTS then\n        -- If prevTS is nil, set it to the current timestamp\n        rcall(\"HSET\", metaKey, \"prevTS\", timestamp, \"prevCount\", 0)\n        return\n    end\n    local N = math.min(math.floor(timestamp / 60000) - math.floor(prevTS / 60000), tonumber(maxDataPoints))\n    if N > 0 then\n        local delta = count - rcall(\"HGET\", metaKey, \"prevCount\")\n        -- If N > 1, add N-1 zeros to the list\n        if N > 1 then\n            local points = {}\n            points[1] = delta\n            for i = 2, N do\n                points[i] = 0\n            end\n            for from, to in batches(#points, 7000) do\n                rcall(\"LPUSH\", dataPointsList, unpack(points, from, to))\n            end\n        else\n            -- LPUSH delta to the list\n            rcall(\"LPUSH\", dataPointsList, delta)\n        end\n        -- LTRIM to keep list to its max size\n        rcall(\"LTRIM\", dataPointsList, 0, maxDataPoints - 1)\n        -- update prev count with current count\n        rcall(\"HSET\", metaKey, \"prevCount\", count, \"prevTS\", timestamp)\n    end\nend\n--[[\n  Function to return the next delayed job timestamp.\n]]\nlocal function getNextDelayedTimestamp(delayedKey)\n  local result = rcall(\"ZRANGE\", delayedKey, 0, 0, \"WITHSCORES\")\n  if #result then\n    local nextTimestamp = tonumber(result[2])\n    if nextTimestamp ~= nil then\n      return nextTimestamp / 0x1000\n    end\n  end\nend\n--[[\n  Function to get current rate limit ttl.\n]]\nlocal function getRateLimitTTL(maxJobs, rateLimiterKey)\n  if maxJobs and maxJobs <= tonumber(rcall(\"GET\", rateLimiterKey) or 0) then\n    local pttl = rcall(\"PTTL\", rateLimiterKey)\n    if pttl == 0 then\n      rcall(\"DEL\", rateLimiterKey)\n    end\n    if pttl > 0 then\n      return pttl\n    end\n  end\n  return 0\nend\n--[[\n  Function to check for the meta.paused key to decide if we are paused or not\n  (since an empty list and !EXISTS are not really the same).\n]]\nlocal function getTargetQueueList(queueMetaKey, activeKey, waitKey, pausedKey)\n  local queueAttributes = rcall(\"HMGET\", queueMetaKey, \"paused\", \"concurrency\", \"max\", \"duration\")\n  if queueAttributes[1] then\n    return pausedKey, true, queueAttributes[3], queueAttributes[4]\n  else\n    if queueAttributes[2] then\n      local activeCount = rcall(\"LLEN\", activeKey)\n      if activeCount >= tonumber(queueAttributes[2]) then\n        return waitKey, true, queueAttributes[3], queueAttributes[4]\n      else\n        return waitKey, false, queueAttributes[3], queueAttributes[4]\n      end\n    end\n  end\n  return waitKey, false, queueAttributes[3], queueAttributes[4]\nend\n--[[\n  Function to move job from prioritized state to active.\n]]\nlocal function moveJobFromPrioritizedToActive(priorityKey, activeKey, priorityCounterKey)\n  local prioritizedJob = rcall(\"ZPOPMIN\", priorityKey)\n  if #prioritizedJob > 0 then\n    rcall(\"LPUSH\", activeKey, prioritizedJob[1])\n    return prioritizedJob[1]\n  else\n    rcall(\"DEL\", priorityCounterKey)\n  end\nend\n--[[\n  Function to recursively move from waitingChildren to failed.\n]]\n-- Includes\n--[[\n  Validate and move parent to a wait status (waiting, delayed or prioritized)\n  if no pending dependencies.\n]]\n-- Includes\n--[[\n  Validate and move parent to a wait status (waiting, delayed or prioritized) if needed.\n]]\n-- Includes\n--[[\n  Move parent to a wait status (wait, prioritized or delayed)\n]]\n-- Includes\n--[[\n  Add delay marker if needed.\n]]\n-- Includes\nlocal function addDelayMarkerIfNeeded(markerKey, delayedKey)\n  local nextTimestamp = getNextDelayedTimestamp(delayedKey)\n  if nextTimestamp ~= nil then\n    -- Replace the score of the marker with the newest known\n    -- next timestamp.\n    rcall(\"ZADD\", markerKey, nextTimestamp, \"1\")\n  end\nend\n--[[\n  Function to add job in target list and add marker if needed.\n]]\n-- Includes\n--[[\n  Add marker if needed when a job is available.\n]]\nlocal function addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)\n  if not isPausedOrMaxed then\n    rcall(\"ZADD\", markerKey, 0, \"0\")\n  end  \nend\nlocal function addJobInTargetList(targetKey, markerKey, pushCmd, isPausedOrMaxed, jobId)\n  rcall(pushCmd, targetKey, jobId)\n  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)\nend\n--[[\n  Function to add job considering priority.\n]]\n-- Includes\n--[[\n  Function to get priority score.\n]]\nlocal function getPriorityScore(priority, priorityCounterKey)\n  local prioCounter = rcall(\"INCR\", priorityCounterKey)\n  return priority * 0x100000000 + prioCounter % 0x100000000\nend\nlocal function addJobWithPriority(markerKey, prioritizedKey, priority, jobId, priorityCounterKey,\n  isPausedOrMaxed)\n  local score = getPriorityScore(priority, priorityCounterKey)\n  rcall(\"ZADD\", prioritizedKey, score, jobId)\n  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)\nend\n--[[\n  Function to check if queue is paused or maxed\n  (since an empty list and !EXISTS are not really the same).\n]]\nlocal function isQueuePausedOrMaxed(queueMetaKey, activeKey)\n  local queueAttributes = rcall(\"HMGET\", queueMetaKey, \"paused\", \"concurrency\")\n  if queueAttributes[1] then\n    return true\n  else\n    if queueAttributes[2] then\n      local activeCount = rcall(\"LLEN\", activeKey)\n      return activeCount >= tonumber(queueAttributes[2])\n    end\n  end\n  return false\nend\nlocal function moveParentToWait(parentQueueKey, parentKey, parentId, timestamp)\n    local parentWaitKey = parentQueueKey .. \":wait\"\n    local parentPausedKey = parentQueueKey .. \":paused\"\n    local parentActiveKey = parentQueueKey .. \":active\"\n    local parentMetaKey = parentQueueKey .. \":meta\"\n    local parentMarkerKey = parentQueueKey .. \":marker\"\n    local jobAttributes = rcall(\"HMGET\", parentKey, \"priority\", \"delay\")\n    local priority = tonumber(jobAttributes[1]) or 0\n    local delay = tonumber(jobAttributes[2]) or 0\n    if delay > 0 then\n        local delayedTimestamp = tonumber(timestamp) + delay\n        local score = delayedTimestamp * 0x1000\n        local parentDelayedKey = parentQueueKey .. \":delayed\"\n        rcall(\"ZADD\", parentDelayedKey, score, parentId)\n        rcall(\"XADD\", parentQueueKey .. \":events\", \"*\", \"event\", \"delayed\", \"jobId\", parentId, \"delay\",\n            delayedTimestamp)\n        addDelayMarkerIfNeeded(parentMarkerKey, parentDelayedKey)\n    else\n        if priority == 0 then\n            local parentTarget, isParentPausedOrMaxed = getTargetQueueList(parentMetaKey, parentActiveKey,\n                parentWaitKey, parentPausedKey)\n            addJobInTargetList(parentTarget, parentMarkerKey, \"RPUSH\", isParentPausedOrMaxed, parentId)\n        else\n            local isPausedOrMaxed = isQueuePausedOrMaxed(parentMetaKey, parentActiveKey)\n            addJobWithPriority(parentMarkerKey, parentQueueKey .. \":prioritized\", priority, parentId,\n                parentQueueKey .. \":pc\", isPausedOrMaxed)\n        end\n        rcall(\"XADD\", parentQueueKey .. \":events\", \"*\", \"event\", \"waiting\", \"jobId\", parentId, \"prev\",\n            \"waiting-children\")\n    end\nend\nlocal function moveParentToWaitIfNeeded(parentQueueKey, parentKey, parentId, timestamp)\n  if rcall(\"EXISTS\", parentKey) == 1 then\n    local parentWaitingChildrenKey = parentQueueKey .. \":waiting-children\"\n    if rcall(\"ZSCORE\", parentWaitingChildrenKey, parentId) then    \n      rcall(\"ZREM\", parentWaitingChildrenKey, parentId)\n      moveParentToWait(parentQueueKey, parentKey, parentId, timestamp)\n    end\n  end\nend\nlocal function moveParentToWaitIfNoPendingDependencies(parentQueueKey, parentDependenciesKey, parentKey,\n  parentId, timestamp)\n  local doNotHavePendingDependencies = rcall(\"SCARD\", parentDependenciesKey) == 0\n  if doNotHavePendingDependencies then\n    moveParentToWaitIfNeeded(parentQueueKey, parentKey, parentId, timestamp)\n  end\nend\n--[[\n  Functions to remove jobs when removeOnFail option is provided.\n]]\n-- Includes\n--[[\n  Function to remove job.\n]]\n-- Includes\n--[[\n  Function to remove deduplication key if needed\n  when a job is being removed.\n]]\nlocal function removeDeduplicationKeyIfNeededOnRemoval(prefixKey,\n  jobKey, jobId)\n  local deduplicationId = rcall(\"HGET\", jobKey, \"deid\")\n  if deduplicationId then\n    local deduplicationKey = prefixKey .. \"de:\" .. deduplicationId\n    local currentJobId = rcall('GET', deduplicationKey)\n    if currentJobId and currentJobId == jobId then\n      return rcall(\"DEL\", deduplicationKey)\n    end\n  end\nend\n--[[\n  Function to remove job keys.\n]]\nlocal function removeJobKeys(jobKey)\n  return rcall(\"DEL\", jobKey, jobKey .. ':logs', jobKey .. ':dependencies',\n    jobKey .. ':processed', jobKey .. ':failed', jobKey .. ':unsuccessful')\nend\n--[[\n  Check if this job has a parent. If so we will just remove it from\n  the parent child list, but if it is the last child we should move the parent to \"wait/paused\"\n  which requires code from \"moveToFinished\"\n]]\n-- Includes\n--[[\n  Functions to destructure job key.\n  Just a bit of warning, these functions may be a bit slow and affect performance significantly.\n]]\nlocal getJobIdFromKey = function (jobKey)\n  return string.match(jobKey, \".*:(.*)\")\nend\nlocal getJobKeyPrefix = function (jobKey, jobId)\n  return string.sub(jobKey, 0, #jobKey - #jobId)\nend\nlocal function _moveParentToWait(parentPrefix, parentId, emitEvent)\n  local parentTarget, isPausedOrMaxed = getTargetQueueList(parentPrefix .. \"meta\", parentPrefix .. \"active\",\n    parentPrefix .. \"wait\", parentPrefix .. \"paused\")\n  addJobInTargetList(parentTarget, parentPrefix .. \"marker\", \"RPUSH\", isPausedOrMaxed, parentId)\n  if emitEvent then\n    local parentEventStream = parentPrefix .. \"events\"\n    rcall(\"XADD\", parentEventStream, \"*\", \"event\", \"waiting\", \"jobId\", parentId, \"prev\", \"waiting-children\")\n  end\nend\nlocal function removeParentDependencyKey(jobKey, hard, parentKey, baseKey, debounceId)\n  if parentKey then\n    local parentDependenciesKey = parentKey .. \":dependencies\"\n    local result = rcall(\"SREM\", parentDependenciesKey, jobKey)\n    if result > 0 then\n      local pendingDependencies = rcall(\"SCARD\", parentDependenciesKey)\n      if pendingDependencies == 0 then\n        local parentId = getJobIdFromKey(parentKey)\n        local parentPrefix = getJobKeyPrefix(parentKey, parentId)\n        local numRemovedElements = rcall(\"ZREM\", parentPrefix .. \"waiting-children\", parentId)\n        if numRemovedElements == 1 then\n          if hard then -- remove parent in same queue\n            if parentPrefix == baseKey then\n              removeParentDependencyKey(parentKey, hard, nil, baseKey, nil)\n              removeJobKeys(parentKey)\n              if debounceId then\n                rcall(\"DEL\", parentPrefix .. \"de:\" .. debounceId)\n              end\n            else\n              _moveParentToWait(parentPrefix, parentId)\n            end\n          else\n            _moveParentToWait(parentPrefix, parentId, true)\n          end\n        end\n      end\n      return true\n    end\n  else\n    local parentAttributes = rcall(\"HMGET\", jobKey, \"parentKey\", \"deid\")\n    local missedParentKey = parentAttributes[1]\n    if( (type(missedParentKey) == \"string\") and missedParentKey ~= \"\"\n      and (rcall(\"EXISTS\", missedParentKey) == 1)) then\n      local parentDependenciesKey = missedParentKey .. \":dependencies\"\n      local result = rcall(\"SREM\", parentDependenciesKey, jobKey)\n      if result > 0 then\n        local pendingDependencies = rcall(\"SCARD\", parentDependenciesKey)\n        if pendingDependencies == 0 then\n          local parentId = getJobIdFromKey(missedParentKey)\n          local parentPrefix = getJobKeyPrefix(missedParentKey, parentId)\n          local numRemovedElements = rcall(\"ZREM\", parentPrefix .. \"waiting-children\", parentId)\n          if numRemovedElements == 1 then\n            if hard then\n              if parentPrefix == baseKey then\n                removeParentDependencyKey(missedParentKey, hard, nil, baseKey, nil)\n                removeJobKeys(missedParentKey)\n                if parentAttributes[2] then\n                  rcall(\"DEL\", parentPrefix .. \"de:\" .. parentAttributes[2])\n                end\n              else\n                _moveParentToWait(parentPrefix, parentId)\n              end\n            else\n              _moveParentToWait(parentPrefix, parentId, true)\n            end\n          end\n        end\n        return true\n      end\n    end\n  end\n  return false\nend\nlocal function removeJob(jobId, hard, baseKey, shouldRemoveDeduplicationKey)\n  local jobKey = baseKey .. jobId\n  removeParentDependencyKey(jobKey, hard, nil, baseKey)\n  if shouldRemoveDeduplicationKey then\n    removeDeduplicationKeyIfNeededOnRemoval(baseKey, jobKey, jobId)\n  end\n  removeJobKeys(jobKey)\nend\n--[[\n  Functions to remove jobs by max age.\n]]\n-- Includes\nlocal function removeJobsByMaxAge(timestamp, maxAge, targetSet, prefix,\n  shouldRemoveDebounceKey)\n  local start = timestamp - maxAge * 1000\n  local jobIds = rcall(\"ZREVRANGEBYSCORE\", targetSet, start, \"-inf\")\n  for i, jobId in ipairs(jobIds) do\n    removeJob(jobId, false, prefix, false --[[remove debounce key]])\n  end\n  rcall(\"ZREMRANGEBYSCORE\", targetSet, \"-inf\", start)\nend\n--[[\n  Functions to remove jobs by max count.\n]]\n-- Includes\nlocal function removeJobsByMaxCount(maxCount, targetSet, prefix)\n  local start = maxCount\n  local jobIds = rcall(\"ZREVRANGE\", targetSet, start, -1)\n  for i, jobId in ipairs(jobIds) do\n    removeJob(jobId, false, prefix, false --[[remove debounce key]])\n  end\n  rcall(\"ZREMRANGEBYRANK\", targetSet, 0, -(maxCount + 1))\nend\nlocal function removeJobsOnFail(queueKeyPrefix, failedKey, jobId, opts, timestamp)\n  local removeOnFailType = type(opts[\"removeOnFail\"])\n  if removeOnFailType == \"number\" then\n    removeJobsByMaxCount(opts[\"removeOnFail\"],\n                        failedKey, queueKeyPrefix)\n  elseif removeOnFailType == \"boolean\" then\n    if opts[\"removeOnFail\"] then\n      removeJob(jobId, false, queueKeyPrefix,\n                false --[[remove debounce key]])\n      rcall(\"ZREM\", failedKey, jobId)\n    end\n  elseif removeOnFailType ~= \"nil\" then\n    local maxAge = opts[\"removeOnFail\"][\"age\"]\n    local maxCount = opts[\"removeOnFail\"][\"count\"]\n    if maxAge ~= nil then\n      removeJobsByMaxAge(timestamp, maxAge,\n                        failedKey, queueKeyPrefix)\n    end\n    if maxCount ~= nil and maxCount > 0 then\n      removeJobsByMaxCount(maxCount, failedKey,\n                            queueKeyPrefix)\n    end\n  end \nend\nlocal moveParentToFailedIfNeeded = function (parentQueueKey, parentKey, parentId, jobIdKey, timestamp)\n  if rcall(\"EXISTS\", parentKey) == 1 then\n    local parentWaitingChildrenKey = parentQueueKey .. \":waiting-children\"\n    local parentDelayedKey = parentQueueKey .. \":delayed\"\n    local parentPrioritizedKey = parentQueueKey .. \":prioritized\"\n    local parentWaitingChildrenOrDelayedKey\n    local prevState\n    if rcall(\"ZSCORE\", parentWaitingChildrenKey, parentId) then\n      parentWaitingChildrenOrDelayedKey = parentWaitingChildrenKey\n      prevState = \"waiting-children\"\n    elseif rcall(\"ZSCORE\", parentDelayedKey, parentId) then\n      parentWaitingChildrenOrDelayedKey = parentDelayedKey\n      prevState = \"delayed\"\n      rcall(\"HSET\", parentKey, \"delay\", 0)\n    end\n    if parentWaitingChildrenOrDelayedKey then\n      rcall(\"ZREM\", parentWaitingChildrenOrDelayedKey, parentId)\n      local parentQueuePrefix = parentQueueKey .. \":\"\n      local parentFailedKey = parentQueueKey .. \":failed\"\n      local deferredFailure = \"child \" .. jobIdKey .. \" failed\"\n      rcall(\"HSET\", parentKey, \"defa\", deferredFailure)\n      moveParentToWait(parentQueueKey, parentKey, parentId, timestamp)\n    else\n      if not rcall(\"ZSCORE\", parentQueueKey .. \":failed\", parentId) then\n        local deferredFailure = \"child \" .. jobIdKey .. \" failed\"\n        rcall(\"HSET\", parentKey, \"defa\", deferredFailure)\n      end\n    end\n  end\nend\nlocal moveChildFromDependenciesIfNeeded = function (rawParentData, childKey, failedReason, timestamp)\n  if rawParentData then\n    local parentData = cjson.decode(rawParentData)\n    local parentKey = parentData['queueKey'] .. ':' .. parentData['id']\n    local parentDependenciesChildrenKey = parentKey .. \":dependencies\"\n    if parentData['fpof'] then\n      if rcall(\"SREM\", parentDependenciesChildrenKey, childKey) == 1 then\n        local parentUnsuccesssfulChildrenKey = parentKey .. \":unsuccessful\"\n        rcall(\"ZADD\", parentUnsuccesssfulChildrenKey, timestamp, childKey)\n        moveParentToFailedIfNeeded(\n          parentData['queueKey'],\n          parentKey,\n          parentData['id'],\n          childKey,\n          timestamp\n        )\n      end\n    elseif parentData['cpof'] then\n      if rcall(\"SREM\", parentDependenciesChildrenKey, childKey) == 1 then\n        local parentFailedChildrenKey = parentKey .. \":failed\"\n        rcall(\"HSET\", parentFailedChildrenKey, childKey, failedReason)\n        moveParentToWaitIfNeeded(parentData['queueKey'], parentKey, parentData['id'], timestamp)\n      end\n    elseif parentData['idof'] or parentData['rdof'] then\n      if rcall(\"SREM\", parentDependenciesChildrenKey, childKey) == 1 then\n        moveParentToWaitIfNoPendingDependencies(parentData['queueKey'], parentDependenciesChildrenKey,\n          parentKey, parentData['id'], timestamp)\n        if parentData['idof'] then\n          local parentFailedChildrenKey = parentKey .. \":failed\"\n          rcall(\"HSET\", parentFailedChildrenKey, childKey, failedReason)\n        end\n      end\n    end\n  end\nend\n--[[\n  Function to move job from wait state to active.\n  Input:\n    opts - token - lock token\n    opts - lockDuration\n    opts - limiter\n]]\n-- Includes\nlocal function prepareJobForProcessing(keyPrefix, rateLimiterKey, eventStreamKey,\n    jobId, processedOn, maxJobs, limiterDuration, markerKey, opts)\n  local jobKey = keyPrefix .. jobId\n  -- Check if we need to perform rate limiting.\n  if maxJobs then\n    local jobCounter = tonumber(rcall(\"INCR\", rateLimiterKey))\n    if jobCounter == 1 then\n      local integerDuration = math.floor(math.abs(limiterDuration))\n      rcall(\"PEXPIRE\", rateLimiterKey, integerDuration)\n    end\n  end\n  -- get a lock\n  if opts['token'] ~= \"0\" then\n    local lockKey = jobKey .. ':lock'\n    rcall(\"SET\", lockKey, opts['token'], \"PX\", opts['lockDuration'])\n  end\n  local optionalValues = {}\n  if opts['name'] then\n    -- Set \"processedBy\" field to the worker name\n    table.insert(optionalValues, \"pb\")\n    table.insert(optionalValues, opts['name'])\n  end\n  rcall(\"XADD\", eventStreamKey, \"*\", \"event\", \"active\", \"jobId\", jobId, \"prev\", \"waiting\")\n  rcall(\"HMSET\", jobKey, \"processedOn\", processedOn, unpack(optionalValues))\n  rcall(\"HINCRBY\", jobKey, \"ats\", 1)\n  addBaseMarkerIfNeeded(markerKey, false)\n  -- rate limit delay must be 0 in this case to prevent adding more delay\n  -- when job that is moved to active needs to be processed\n  return {rcall(\"HGETALL\", jobKey), jobId, 0, 0} -- get job data\nend\n--[[\n  Updates the delay set, by moving delayed jobs that should\n  be processed now to \"wait\".\n     Events:\n      'waiting'\n]]\n-- Includes\n-- Try to get as much as 1000 jobs at once\nlocal function promoteDelayedJobs(delayedKey, markerKey, targetKey, prioritizedKey,\n                                  eventStreamKey, prefix, timestamp, priorityCounterKey, isPaused)\n    local jobs = rcall(\"ZRANGEBYSCORE\", delayedKey, 0, (timestamp + 1) * 0x1000 - 1, \"LIMIT\", 0, 1000)\n    if (#jobs > 0) then\n        rcall(\"ZREM\", delayedKey, unpack(jobs))\n        for _, jobId in ipairs(jobs) do\n            local jobKey = prefix .. jobId\n            local priority =\n                tonumber(rcall(\"HGET\", jobKey, \"priority\")) or 0\n            if priority == 0 then\n                -- LIFO or FIFO\n                rcall(\"LPUSH\", targetKey, jobId)\n            else\n                local score = getPriorityScore(priority, priorityCounterKey)\n                rcall(\"ZADD\", prioritizedKey, score, jobId)\n            end\n            -- Emit waiting event\n            rcall(\"XADD\", eventStreamKey, \"*\", \"event\", \"waiting\", \"jobId\",\n                  jobId, \"prev\", \"delayed\")\n            rcall(\"HSET\", jobKey, \"delay\", 0)\n        end\n        addBaseMarkerIfNeeded(markerKey, isPaused)\n    end\nend\n--[[\n  Function to remove deduplication key if needed\n  when a job is moved to completed or failed states.\n]]\nlocal function removeDeduplicationKeyIfNeededOnFinalization(prefixKey,\n  deduplicationId, jobId)\n  if deduplicationId then\n    local deduplicationKey = prefixKey .. \"de:\" .. deduplicationId\n    local pttl = rcall(\"PTTL\", deduplicationKey)\n    if pttl == 0 then\n      return rcall(\"DEL\", deduplicationKey)\n    end\n    if pttl == -1 then\n      local currentJobId = rcall('GET', deduplicationKey)\n      if currentJobId and currentJobId == jobId then\n        return rcall(\"DEL\", deduplicationKey)\n      end\n    end\n  end\nend\nlocal function removeLock(jobKey, stalledKey, token, jobId)\n  if token ~= \"0\" then\n    local lockKey = jobKey .. ':lock'\n    local lockToken = rcall(\"GET\", lockKey)\n    if lockToken == token then\n      rcall(\"DEL\", lockKey)\n      rcall(\"SREM\", stalledKey, jobId)\n    else\n      if lockToken then\n        -- Lock exists but token does not match\n        return -6\n      else\n        -- Lock is missing completely\n        return -2\n      end\n    end\n  end\n  return 0\nend\n--[[\n  Function to trim events, default 10000.\n]]\n-- Includes\n--[[\n  Function to get max events value or set by default 10000.\n]]\nlocal function getOrSetMaxEvents(metaKey)\n  local maxEvents = rcall(\"HGET\", metaKey, \"opts.maxLenEvents\")\n  if not maxEvents then\n    maxEvents = 10000\n    rcall(\"HSET\", metaKey, \"opts.maxLenEvents\", maxEvents)\n  end\n  return maxEvents\nend\nlocal function trimEvents(metaKey, eventStreamKey)\n  local maxEvents = getOrSetMaxEvents(metaKey)\n  if maxEvents then\n    rcall(\"XTRIM\", eventStreamKey, \"MAXLEN\", \"~\", maxEvents)\n  else\n    rcall(\"XTRIM\", eventStreamKey, \"MAXLEN\", \"~\", 10000)\n  end\nend\n--[[\n  Validate and move or add dependencies to parent.\n]]\n-- Includes\nlocal function updateParentDepsIfNeeded(parentKey, parentQueueKey, parentDependenciesKey,\n  parentId, jobIdKey, returnvalue, timestamp )\n  local processedSet = parentKey .. \":processed\"\n  rcall(\"HSET\", processedSet, jobIdKey, returnvalue)\n  moveParentToWaitIfNoPendingDependencies(parentQueueKey, parentDependenciesKey, parentKey, parentId, timestamp)\nend\n--[[\n  Function to update a bunch of fields in a job.\n]]\nlocal function updateJobFields(jobKey, msgpackedFields)\n  if msgpackedFields and #msgpackedFields > 0 then\n    local fieldsToUpdate = cmsgpack.unpack(msgpackedFields)\n    if fieldsToUpdate then\n      rcall(\"HMSET\", jobKey, unpack(fieldsToUpdate))\n    end\n  end\nend\nlocal jobIdKey = KEYS[12]\nif rcall(\"EXISTS\", jobIdKey) == 1 then -- Make sure job exists\n    -- Make sure it does not have pending dependencies\n    -- It must happen before removing lock\n    if ARGV[5] == \"completed\" then\n        if rcall(\"SCARD\", jobIdKey .. \":dependencies\") ~= 0 then\n            return -4\n        end\n        if rcall(\"ZCARD\", jobIdKey .. \":unsuccessful\") ~= 0 then\n            return -9\n        end\n    end\n    local opts = cmsgpack.unpack(ARGV[8])\n    local token = opts['token']\n    local errorCode = removeLock(jobIdKey, KEYS[5], token, ARGV[1])\n    if errorCode < 0 then\n        return errorCode\n    end\n    updateJobFields(jobIdKey, ARGV[9]);\n    local attempts = opts['attempts']\n    local maxMetricsSize = opts['maxMetricsSize']\n    local maxCount = opts['keepJobs']['count']\n    local maxAge = opts['keepJobs']['age']\n    local jobAttributes = rcall(\"HMGET\", jobIdKey, \"parentKey\", \"parent\", \"deid\")\n    local parentKey = jobAttributes[1] or \"\"\n    local parentId = \"\"\n    local parentQueueKey = \"\"\n    if jobAttributes[2] then -- TODO: need to revisit this logic if it's still needed\n        local jsonDecodedParent = cjson.decode(jobAttributes[2])\n        parentId = jsonDecodedParent['id']\n        parentQueueKey = jsonDecodedParent['queueKey']\n    end\n    local jobId = ARGV[1]\n    local timestamp = ARGV[2]\n    -- Remove from active list (if not active we shall return error)\n    local numRemovedElements = rcall(\"LREM\", KEYS[2], -1, jobId)\n    if (numRemovedElements < 1) then\n        return -3\n    end\n    local eventStreamKey = KEYS[4]\n    local metaKey = KEYS[9]\n    -- Trim events before emiting them to avoid trimming events emitted in this script\n    trimEvents(metaKey, eventStreamKey)\n    local prefix = ARGV[7]\n    removeDeduplicationKeyIfNeededOnFinalization(prefix, jobAttributes[3], jobId)\n    -- If job has a parent we need to\n    -- 1) remove this job id from parents dependencies\n    -- 2) move the job Id to parent \"processed\" set\n    -- 3) push the results into parent \"results\" list\n    -- 4) if parent's dependencies is empty, then move parent to \"wait/paused\". Note it may be a different queue!.\n    if parentId == \"\" and parentKey ~= \"\" then\n        parentId = getJobIdFromKey(parentKey)\n        parentQueueKey = getJobKeyPrefix(parentKey, \":\" .. parentId)\n    end\n    if parentId ~= \"\" then\n        if ARGV[5] == \"completed\" then\n            local dependenciesSet = parentKey .. \":dependencies\"\n            if rcall(\"SREM\", dependenciesSet, jobIdKey) == 1 then\n                updateParentDepsIfNeeded(parentKey, parentQueueKey, dependenciesSet, parentId, jobIdKey, ARGV[4],\n                    timestamp)\n            end\n        else\n            moveChildFromDependenciesIfNeeded(jobAttributes[2], jobIdKey, ARGV[4], timestamp)\n        end\n    end\n    local attemptsMade = rcall(\"HINCRBY\", jobIdKey, \"atm\", 1)\n    -- Remove job?\n    if maxCount ~= 0 then\n        local targetSet = KEYS[11]\n        -- Add to complete/failed set\n        rcall(\"ZADD\", targetSet, timestamp, jobId)\n        rcall(\"HSET\", jobIdKey, ARGV[3], ARGV[4], \"finishedOn\", timestamp)\n        -- \"returnvalue\" / \"failedReason\" and \"finishedOn\"\n        if ARGV[5] == \"failed\" then\n            rcall(\"HDEL\", jobIdKey, \"defa\")\n        end\n        -- Remove old jobs?\n        if maxAge ~= nil then\n            removeJobsByMaxAge(timestamp, maxAge, targetSet, prefix)\n        end\n        if maxCount ~= nil and maxCount > 0 then\n            removeJobsByMaxCount(maxCount, targetSet, prefix)\n        end\n    else\n        removeJobKeys(jobIdKey)\n        if parentKey ~= \"\" then\n            -- TODO: when a child is removed when finished, result or failure in parent\n            -- must not be deleted, those value references should be deleted when the parent\n            -- is deleted\n            removeParentDependencyKey(jobIdKey, false, parentKey, jobAttributes[3])\n        end\n    end\n    rcall(\"XADD\", eventStreamKey, \"*\", \"event\", ARGV[5], \"jobId\", jobId, ARGV[3], ARGV[4], \"prev\", \"active\")\n    if ARGV[5] == \"failed\" then\n        if tonumber(attemptsMade) >= tonumber(attempts) then\n            rcall(\"XADD\", eventStreamKey, \"*\", \"event\", \"retries-exhausted\", \"jobId\", jobId, \"attemptsMade\",\n                attemptsMade)\n        end\n    end\n    -- Collect metrics\n    if maxMetricsSize ~= \"\" then\n        collectMetrics(KEYS[13], KEYS[13] .. ':data', maxMetricsSize, timestamp)\n    end\n    -- Try to get next job to avoid an extra roundtrip if the queue is not closing,\n    -- and not rate limited.\n    if (ARGV[6] == \"1\") then\n        local target, isPausedOrMaxed, rateLimitMax, rateLimitDuration = getTargetQueueList(metaKey, KEYS[2],\n            KEYS[1], KEYS[8])\n        local markerKey = KEYS[14]\n        -- Check if there are delayed jobs that can be promoted\n        promoteDelayedJobs(KEYS[7], markerKey, target, KEYS[3], eventStreamKey, prefix, timestamp, KEYS[10],\n            isPausedOrMaxed)\n        local maxJobs = tonumber(rateLimitMax or (opts['limiter'] and opts['limiter']['max']))\n        -- Check if we are rate limited first.\n        local expireTime = getRateLimitTTL(maxJobs, KEYS[6])\n        if expireTime > 0 then\n            return {0, 0, expireTime, 0}\n        end\n        -- paused or maxed queue\n        if isPausedOrMaxed then\n            return {0, 0, 0, 0}\n        end\n        local limiterDuration = (opts['limiter'] and opts['limiter']['duration']) or rateLimitDuration\n        jobId = rcall(\"RPOPLPUSH\", KEYS[1], KEYS[2])\n        if jobId then\n            -- Markers in waitlist DEPRECATED in v5: Remove in v6.\n            if string.sub(jobId, 1, 2) == \"0:\" then\n                rcall(\"LREM\", KEYS[2], 1, jobId)\n                -- If jobId is special ID 0:delay (delay greater than 0), then there is no job to process\n                -- but if ID is 0:0, then there is at least 1 prioritized job to process\n                if jobId == \"0:0\" then\n                    jobId = moveJobFromPrioritizedToActive(KEYS[3], KEYS[2], KEYS[10])\n                    return prepareJobForProcessing(prefix, KEYS[6], eventStreamKey, jobId, timestamp, maxJobs,\n                        limiterDuration, markerKey, opts)\n                end\n            else\n                return prepareJobForProcessing(prefix, KEYS[6], eventStreamKey, jobId, timestamp, maxJobs,\n                    limiterDuration, markerKey, opts)\n            end\n        else\n            jobId = moveJobFromPrioritizedToActive(KEYS[3], KEYS[2], KEYS[10])\n            if jobId then\n                return prepareJobForProcessing(prefix, KEYS[6], eventStreamKey, jobId, timestamp, maxJobs,\n                    limiterDuration, markerKey, opts)\n            end\n        end\n        -- Return the timestamp for the next delayed job if any.\n        local nextTimestamp = getNextDelayedTimestamp(KEYS[7])\n        if nextTimestamp ~= nil then\n            -- The result is guaranteed to be positive, since the\n            -- ZRANGEBYSCORE command would have return a job otherwise.\n            return {0, 0, 0, nextTimestamp}\n        end\n    end\n    local waitLen = rcall(\"LLEN\", KEYS[1])\n    if waitLen == 0 then\n        local activeLen = rcall(\"LLEN\", KEYS[2])\n        if activeLen == 0 then\n            local prioritizedLen = rcall(\"ZCARD\", KEYS[3])\n            if prioritizedLen == 0 then\n                rcall(\"XADD\", eventStreamKey, \"*\", \"event\", \"drained\")\n            end\n        end\n    end\n    return 0\nelse\n    return -1\nend\n`;\nexports.moveToFinished = {\n    name: \"moveToFinished\",\n    content,\n    keys: 14\n}; //# sourceMappingURL=moveToFinished-14.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL3NjcmlwdHMvbW92ZVRvRmluaXNoZWQtMTQuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELHNCQUFzQixHQUFHLEtBQUs7QUFDOUIsTUFBTUcsVUFBVSxDQUFDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFvMUJqQixDQUFDO0FBQ0RILHNCQUFzQixHQUFHO0lBQ3JCSSxNQUFNO0lBQ05EO0lBQ0FFLE1BQU07QUFDVixHQUNBLDZDQUE2QyIsInNvdXJjZXMiOlsid2VicGFjazovL29ubHlmYW5zLXBsYXRmb3JtLy4vbm9kZV9tb2R1bGVzL2J1bGxtcS9kaXN0L2Nqcy9zY3JpcHRzL21vdmVUb0ZpbmlzaGVkLTE0LmpzPzJhMTAiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLm1vdmVUb0ZpbmlzaGVkID0gdm9pZCAwO1xuY29uc3QgY29udGVudCA9IGAtLVtbXG4gIE1vdmUgam9iIGZyb20gYWN0aXZlIHRvIGEgZmluaXNoZWQgc3RhdHVzIChjb21wbGV0ZWQgbyBmYWlsZWQpXG4gIEEgam9iIGNhbiBvbmx5IGJlIG1vdmVkIHRvIGNvbXBsZXRlZCBpZiBpdCB3YXMgYWN0aXZlLlxuICBUaGUgam9iIG11c3QgYmUgbG9ja2VkIGJlZm9yZSBpdCBjYW4gYmUgbW92ZWQgdG8gYSBmaW5pc2hlZCBzdGF0dXMsXG4gIGFuZCB0aGUgbG9jayBtdXN0IGJlIHJlbGVhc2VkIGluIHRoaXMgc2NyaXB0LlxuICAgIElucHV0OlxuICAgICAgS0VZU1sxXSB3YWl0IGtleVxuICAgICAgS0VZU1syXSBhY3RpdmUga2V5XG4gICAgICBLRVlTWzNdIHByaW9yaXRpemVkIGtleVxuICAgICAgS0VZU1s0XSBldmVudCBzdHJlYW0ga2V5XG4gICAgICBLRVlTWzVdIHN0YWxsZWQga2V5XG4gICAgICAtLSBSYXRlIGxpbWl0aW5nXG4gICAgICBLRVlTWzZdIHJhdGUgbGltaXRlciBrZXlcbiAgICAgIEtFWVNbN10gZGVsYXllZCBrZXlcbiAgICAgIEtFWVNbOF0gcGF1c2VkIGtleVxuICAgICAgS0VZU1s5XSBtZXRhIGtleVxuICAgICAgS0VZU1sxMF0gcGMgcHJpb3JpdHkgY291bnRlclxuICAgICAgS0VZU1sxMV0gY29tcGxldGVkL2ZhaWxlZCBrZXlcbiAgICAgIEtFWVNbMTJdIGpvYklkIGtleVxuICAgICAgS0VZU1sxM10gbWV0cmljcyBrZXlcbiAgICAgIEtFWVNbMTRdIG1hcmtlciBrZXlcbiAgICAgIEFSR1ZbMV0gIGpvYklkXG4gICAgICBBUkdWWzJdICB0aW1lc3RhbXBcbiAgICAgIEFSR1ZbM10gIG1zZyBwcm9wZXJ0eSByZXR1cm52YWx1ZSAvIGZhaWxlZFJlYXNvblxuICAgICAgQVJHVls0XSAgcmV0dXJuIHZhbHVlIC8gZmFpbGVkIHJlYXNvblxuICAgICAgQVJHVls1XSAgdGFyZ2V0IChjb21wbGV0ZWQvZmFpbGVkKVxuICAgICAgQVJHVls2XSAgZmV0Y2ggbmV4dD9cbiAgICAgIEFSR1ZbN10gIGtleXMgcHJlZml4XG4gICAgICBBUkdWWzhdICBvcHRzXG4gICAgICBBUkdWWzldICBqb2IgZmllbGRzIHRvIHVwZGF0ZVxuICAgICAgb3B0cyAtIHRva2VuIC0gbG9jayB0b2tlblxuICAgICAgb3B0cyAtIGtlZXBKb2JzXG4gICAgICBvcHRzIC0gbG9ja0R1cmF0aW9uIC0gbG9jayBkdXJhdGlvbiBpbiBtaWxsaXNlY29uZHNcbiAgICAgIG9wdHMgLSBhdHRlbXB0cyBtYXggYXR0ZW1wdHNcbiAgICAgIG9wdHMgLSBtYXhNZXRyaWNzU2l6ZVxuICAgICAgb3B0cyAtIGZwb2YgLSBmYWlsIHBhcmVudCBvbiBmYWlsXG4gICAgICBvcHRzIC0gY3BvZiAtIGNvbnRpbnVlIHBhcmVudCBvbiBmYWlsXG4gICAgICBvcHRzIC0gaWRvZiAtIGlnbm9yZSBkZXBlbmRlbmN5IG9uIGZhaWxcbiAgICAgIG9wdHMgLSByZG9mIC0gcmVtb3ZlIGRlcGVuZGVuY3kgb24gZmFpbFxuICAgICAgb3B0cyAtIG5hbWUgLSB3b3JrZXIgbmFtZVxuICAgIE91dHB1dDpcbiAgICAgIDAgT0tcbiAgICAgIC0xIE1pc3Npbmcga2V5LlxuICAgICAgLTIgTWlzc2luZyBsb2NrLlxuICAgICAgLTMgSm9iIG5vdCBpbiBhY3RpdmUgc2V0XG4gICAgICAtNCBKb2IgaGFzIHBlbmRpbmcgY2hpbGRyZW5cbiAgICAgIC02IExvY2sgaXMgbm90IG93bmVkIGJ5IHRoaXMgY2xpZW50XG4gICAgICAtOSBKb2IgaGFzIGZhaWxlZCBjaGlsZHJlblxuICAgIEV2ZW50czpcbiAgICAgICdjb21wbGV0ZWQvZmFpbGVkJ1xuXV1cbmxvY2FsIHJjYWxsID0gcmVkaXMuY2FsbFxuLS0tIEluY2x1ZGVzXG4tLVtbXG4gIEZ1bmN0aW9ucyB0byBjb2xsZWN0IG1ldHJpY3MgYmFzZWQgb24gYSBjdXJyZW50IGFuZCBwcmV2aW91cyBjb3VudCBvZiBqb2JzLlxuICBHcmFudWFsYXJpdHkgaXMgZml4ZWQgYXQgMSBtaW51dGUuXG5dXVxuLS1bW1xuICBGdW5jdGlvbiB0byBsb29wIGluIGJhdGNoZXMuXG4gIEp1c3QgYSBiaXQgb2Ygd2FybmluZywgc29tZSBjb21tYW5kcyBhcyBaUkVNXG4gIGNvdWxkIHJlY2VpdmUgYSBtYXhpbXVtIG9mIDcwMDAgcGFyYW1ldGVycyBwZXIgY2FsbC5cbl1dXG5sb2NhbCBmdW5jdGlvbiBiYXRjaGVzKG4sIGJhdGNoU2l6ZSlcbiAgbG9jYWwgaSA9IDBcbiAgcmV0dXJuIGZ1bmN0aW9uKClcbiAgICBsb2NhbCBmcm9tID0gaSAqIGJhdGNoU2l6ZSArIDFcbiAgICBpID0gaSArIDFcbiAgICBpZiAoZnJvbSA8PSBuKSB0aGVuXG4gICAgICBsb2NhbCB0byA9IG1hdGgubWluKGZyb20gKyBiYXRjaFNpemUgLSAxLCBuKVxuICAgICAgcmV0dXJuIGZyb20sIHRvXG4gICAgZW5kXG4gIGVuZFxuZW5kXG5sb2NhbCBmdW5jdGlvbiBjb2xsZWN0TWV0cmljcyhtZXRhS2V5LCBkYXRhUG9pbnRzTGlzdCwgbWF4RGF0YVBvaW50cyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcClcbiAgICAtLSBJbmNyZW1lbnQgY3VycmVudCBjb3VudFxuICAgIGxvY2FsIGNvdW50ID0gcmNhbGwoXCJISU5DUkJZXCIsIG1ldGFLZXksIFwiY291bnRcIiwgMSkgLSAxXG4gICAgLS0gQ29tcHV0ZSBob3cgbWFueSBkYXRhIHBvaW50cyB3ZSBuZWVkIHRvIGFkZCB0byB0aGUgbGlzdCwgTi5cbiAgICBsb2NhbCBwcmV2VFMgPSByY2FsbChcIkhHRVRcIiwgbWV0YUtleSwgXCJwcmV2VFNcIilcbiAgICBpZiBub3QgcHJldlRTIHRoZW5cbiAgICAgICAgLS0gSWYgcHJldlRTIGlzIG5pbCwgc2V0IGl0IHRvIHRoZSBjdXJyZW50IHRpbWVzdGFtcFxuICAgICAgICByY2FsbChcIkhTRVRcIiwgbWV0YUtleSwgXCJwcmV2VFNcIiwgdGltZXN0YW1wLCBcInByZXZDb3VudFwiLCAwKVxuICAgICAgICByZXR1cm5cbiAgICBlbmRcbiAgICBsb2NhbCBOID0gbWF0aC5taW4obWF0aC5mbG9vcih0aW1lc3RhbXAgLyA2MDAwMCkgLSBtYXRoLmZsb29yKHByZXZUUyAvIDYwMDAwKSwgdG9udW1iZXIobWF4RGF0YVBvaW50cykpXG4gICAgaWYgTiA+IDAgdGhlblxuICAgICAgICBsb2NhbCBkZWx0YSA9IGNvdW50IC0gcmNhbGwoXCJIR0VUXCIsIG1ldGFLZXksIFwicHJldkNvdW50XCIpXG4gICAgICAgIC0tIElmIE4gPiAxLCBhZGQgTi0xIHplcm9zIHRvIHRoZSBsaXN0XG4gICAgICAgIGlmIE4gPiAxIHRoZW5cbiAgICAgICAgICAgIGxvY2FsIHBvaW50cyA9IHt9XG4gICAgICAgICAgICBwb2ludHNbMV0gPSBkZWx0YVxuICAgICAgICAgICAgZm9yIGkgPSAyLCBOIGRvXG4gICAgICAgICAgICAgICAgcG9pbnRzW2ldID0gMFxuICAgICAgICAgICAgZW5kXG4gICAgICAgICAgICBmb3IgZnJvbSwgdG8gaW4gYmF0Y2hlcygjcG9pbnRzLCA3MDAwKSBkb1xuICAgICAgICAgICAgICAgIHJjYWxsKFwiTFBVU0hcIiwgZGF0YVBvaW50c0xpc3QsIHVucGFjayhwb2ludHMsIGZyb20sIHRvKSlcbiAgICAgICAgICAgIGVuZFxuICAgICAgICBlbHNlXG4gICAgICAgICAgICAtLSBMUFVTSCBkZWx0YSB0byB0aGUgbGlzdFxuICAgICAgICAgICAgcmNhbGwoXCJMUFVTSFwiLCBkYXRhUG9pbnRzTGlzdCwgZGVsdGEpXG4gICAgICAgIGVuZFxuICAgICAgICAtLSBMVFJJTSB0byBrZWVwIGxpc3QgdG8gaXRzIG1heCBzaXplXG4gICAgICAgIHJjYWxsKFwiTFRSSU1cIiwgZGF0YVBvaW50c0xpc3QsIDAsIG1heERhdGFQb2ludHMgLSAxKVxuICAgICAgICAtLSB1cGRhdGUgcHJldiBjb3VudCB3aXRoIGN1cnJlbnQgY291bnRcbiAgICAgICAgcmNhbGwoXCJIU0VUXCIsIG1ldGFLZXksIFwicHJldkNvdW50XCIsIGNvdW50LCBcInByZXZUU1wiLCB0aW1lc3RhbXApXG4gICAgZW5kXG5lbmRcbi0tW1tcbiAgRnVuY3Rpb24gdG8gcmV0dXJuIHRoZSBuZXh0IGRlbGF5ZWQgam9iIHRpbWVzdGFtcC5cbl1dXG5sb2NhbCBmdW5jdGlvbiBnZXROZXh0RGVsYXllZFRpbWVzdGFtcChkZWxheWVkS2V5KVxuICBsb2NhbCByZXN1bHQgPSByY2FsbChcIlpSQU5HRVwiLCBkZWxheWVkS2V5LCAwLCAwLCBcIldJVEhTQ09SRVNcIilcbiAgaWYgI3Jlc3VsdCB0aGVuXG4gICAgbG9jYWwgbmV4dFRpbWVzdGFtcCA9IHRvbnVtYmVyKHJlc3VsdFsyXSlcbiAgICBpZiBuZXh0VGltZXN0YW1wIH49IG5pbCB0aGVuXG4gICAgICByZXR1cm4gbmV4dFRpbWVzdGFtcCAvIDB4MTAwMFxuICAgIGVuZFxuICBlbmRcbmVuZFxuLS1bW1xuICBGdW5jdGlvbiB0byBnZXQgY3VycmVudCByYXRlIGxpbWl0IHR0bC5cbl1dXG5sb2NhbCBmdW5jdGlvbiBnZXRSYXRlTGltaXRUVEwobWF4Sm9icywgcmF0ZUxpbWl0ZXJLZXkpXG4gIGlmIG1heEpvYnMgYW5kIG1heEpvYnMgPD0gdG9udW1iZXIocmNhbGwoXCJHRVRcIiwgcmF0ZUxpbWl0ZXJLZXkpIG9yIDApIHRoZW5cbiAgICBsb2NhbCBwdHRsID0gcmNhbGwoXCJQVFRMXCIsIHJhdGVMaW1pdGVyS2V5KVxuICAgIGlmIHB0dGwgPT0gMCB0aGVuXG4gICAgICByY2FsbChcIkRFTFwiLCByYXRlTGltaXRlcktleSlcbiAgICBlbmRcbiAgICBpZiBwdHRsID4gMCB0aGVuXG4gICAgICByZXR1cm4gcHR0bFxuICAgIGVuZFxuICBlbmRcbiAgcmV0dXJuIDBcbmVuZFxuLS1bW1xuICBGdW5jdGlvbiB0byBjaGVjayBmb3IgdGhlIG1ldGEucGF1c2VkIGtleSB0byBkZWNpZGUgaWYgd2UgYXJlIHBhdXNlZCBvciBub3RcbiAgKHNpbmNlIGFuIGVtcHR5IGxpc3QgYW5kICFFWElTVFMgYXJlIG5vdCByZWFsbHkgdGhlIHNhbWUpLlxuXV1cbmxvY2FsIGZ1bmN0aW9uIGdldFRhcmdldFF1ZXVlTGlzdChxdWV1ZU1ldGFLZXksIGFjdGl2ZUtleSwgd2FpdEtleSwgcGF1c2VkS2V5KVxuICBsb2NhbCBxdWV1ZUF0dHJpYnV0ZXMgPSByY2FsbChcIkhNR0VUXCIsIHF1ZXVlTWV0YUtleSwgXCJwYXVzZWRcIiwgXCJjb25jdXJyZW5jeVwiLCBcIm1heFwiLCBcImR1cmF0aW9uXCIpXG4gIGlmIHF1ZXVlQXR0cmlidXRlc1sxXSB0aGVuXG4gICAgcmV0dXJuIHBhdXNlZEtleSwgdHJ1ZSwgcXVldWVBdHRyaWJ1dGVzWzNdLCBxdWV1ZUF0dHJpYnV0ZXNbNF1cbiAgZWxzZVxuICAgIGlmIHF1ZXVlQXR0cmlidXRlc1syXSB0aGVuXG4gICAgICBsb2NhbCBhY3RpdmVDb3VudCA9IHJjYWxsKFwiTExFTlwiLCBhY3RpdmVLZXkpXG4gICAgICBpZiBhY3RpdmVDb3VudCA+PSB0b251bWJlcihxdWV1ZUF0dHJpYnV0ZXNbMl0pIHRoZW5cbiAgICAgICAgcmV0dXJuIHdhaXRLZXksIHRydWUsIHF1ZXVlQXR0cmlidXRlc1szXSwgcXVldWVBdHRyaWJ1dGVzWzRdXG4gICAgICBlbHNlXG4gICAgICAgIHJldHVybiB3YWl0S2V5LCBmYWxzZSwgcXVldWVBdHRyaWJ1dGVzWzNdLCBxdWV1ZUF0dHJpYnV0ZXNbNF1cbiAgICAgIGVuZFxuICAgIGVuZFxuICBlbmRcbiAgcmV0dXJuIHdhaXRLZXksIGZhbHNlLCBxdWV1ZUF0dHJpYnV0ZXNbM10sIHF1ZXVlQXR0cmlidXRlc1s0XVxuZW5kXG4tLVtbXG4gIEZ1bmN0aW9uIHRvIG1vdmUgam9iIGZyb20gcHJpb3JpdGl6ZWQgc3RhdGUgdG8gYWN0aXZlLlxuXV1cbmxvY2FsIGZ1bmN0aW9uIG1vdmVKb2JGcm9tUHJpb3JpdGl6ZWRUb0FjdGl2ZShwcmlvcml0eUtleSwgYWN0aXZlS2V5LCBwcmlvcml0eUNvdW50ZXJLZXkpXG4gIGxvY2FsIHByaW9yaXRpemVkSm9iID0gcmNhbGwoXCJaUE9QTUlOXCIsIHByaW9yaXR5S2V5KVxuICBpZiAjcHJpb3JpdGl6ZWRKb2IgPiAwIHRoZW5cbiAgICByY2FsbChcIkxQVVNIXCIsIGFjdGl2ZUtleSwgcHJpb3JpdGl6ZWRKb2JbMV0pXG4gICAgcmV0dXJuIHByaW9yaXRpemVkSm9iWzFdXG4gIGVsc2VcbiAgICByY2FsbChcIkRFTFwiLCBwcmlvcml0eUNvdW50ZXJLZXkpXG4gIGVuZFxuZW5kXG4tLVtbXG4gIEZ1bmN0aW9uIHRvIHJlY3Vyc2l2ZWx5IG1vdmUgZnJvbSB3YWl0aW5nQ2hpbGRyZW4gdG8gZmFpbGVkLlxuXV1cbi0tIEluY2x1ZGVzXG4tLVtbXG4gIFZhbGlkYXRlIGFuZCBtb3ZlIHBhcmVudCB0byBhIHdhaXQgc3RhdHVzICh3YWl0aW5nLCBkZWxheWVkIG9yIHByaW9yaXRpemVkKVxuICBpZiBubyBwZW5kaW5nIGRlcGVuZGVuY2llcy5cbl1dXG4tLSBJbmNsdWRlc1xuLS1bW1xuICBWYWxpZGF0ZSBhbmQgbW92ZSBwYXJlbnQgdG8gYSB3YWl0IHN0YXR1cyAod2FpdGluZywgZGVsYXllZCBvciBwcmlvcml0aXplZCkgaWYgbmVlZGVkLlxuXV1cbi0tIEluY2x1ZGVzXG4tLVtbXG4gIE1vdmUgcGFyZW50IHRvIGEgd2FpdCBzdGF0dXMgKHdhaXQsIHByaW9yaXRpemVkIG9yIGRlbGF5ZWQpXG5dXVxuLS0gSW5jbHVkZXNcbi0tW1tcbiAgQWRkIGRlbGF5IG1hcmtlciBpZiBuZWVkZWQuXG5dXVxuLS0gSW5jbHVkZXNcbmxvY2FsIGZ1bmN0aW9uIGFkZERlbGF5TWFya2VySWZOZWVkZWQobWFya2VyS2V5LCBkZWxheWVkS2V5KVxuICBsb2NhbCBuZXh0VGltZXN0YW1wID0gZ2V0TmV4dERlbGF5ZWRUaW1lc3RhbXAoZGVsYXllZEtleSlcbiAgaWYgbmV4dFRpbWVzdGFtcCB+PSBuaWwgdGhlblxuICAgIC0tIFJlcGxhY2UgdGhlIHNjb3JlIG9mIHRoZSBtYXJrZXIgd2l0aCB0aGUgbmV3ZXN0IGtub3duXG4gICAgLS0gbmV4dCB0aW1lc3RhbXAuXG4gICAgcmNhbGwoXCJaQUREXCIsIG1hcmtlcktleSwgbmV4dFRpbWVzdGFtcCwgXCIxXCIpXG4gIGVuZFxuZW5kXG4tLVtbXG4gIEZ1bmN0aW9uIHRvIGFkZCBqb2IgaW4gdGFyZ2V0IGxpc3QgYW5kIGFkZCBtYXJrZXIgaWYgbmVlZGVkLlxuXV1cbi0tIEluY2x1ZGVzXG4tLVtbXG4gIEFkZCBtYXJrZXIgaWYgbmVlZGVkIHdoZW4gYSBqb2IgaXMgYXZhaWxhYmxlLlxuXV1cbmxvY2FsIGZ1bmN0aW9uIGFkZEJhc2VNYXJrZXJJZk5lZWRlZChtYXJrZXJLZXksIGlzUGF1c2VkT3JNYXhlZClcbiAgaWYgbm90IGlzUGF1c2VkT3JNYXhlZCB0aGVuXG4gICAgcmNhbGwoXCJaQUREXCIsIG1hcmtlcktleSwgMCwgXCIwXCIpXG4gIGVuZCAgXG5lbmRcbmxvY2FsIGZ1bmN0aW9uIGFkZEpvYkluVGFyZ2V0TGlzdCh0YXJnZXRLZXksIG1hcmtlcktleSwgcHVzaENtZCwgaXNQYXVzZWRPck1heGVkLCBqb2JJZClcbiAgcmNhbGwocHVzaENtZCwgdGFyZ2V0S2V5LCBqb2JJZClcbiAgYWRkQmFzZU1hcmtlcklmTmVlZGVkKG1hcmtlcktleSwgaXNQYXVzZWRPck1heGVkKVxuZW5kXG4tLVtbXG4gIEZ1bmN0aW9uIHRvIGFkZCBqb2IgY29uc2lkZXJpbmcgcHJpb3JpdHkuXG5dXVxuLS0gSW5jbHVkZXNcbi0tW1tcbiAgRnVuY3Rpb24gdG8gZ2V0IHByaW9yaXR5IHNjb3JlLlxuXV1cbmxvY2FsIGZ1bmN0aW9uIGdldFByaW9yaXR5U2NvcmUocHJpb3JpdHksIHByaW9yaXR5Q291bnRlcktleSlcbiAgbG9jYWwgcHJpb0NvdW50ZXIgPSByY2FsbChcIklOQ1JcIiwgcHJpb3JpdHlDb3VudGVyS2V5KVxuICByZXR1cm4gcHJpb3JpdHkgKiAweDEwMDAwMDAwMCArIHByaW9Db3VudGVyICUgMHgxMDAwMDAwMDBcbmVuZFxubG9jYWwgZnVuY3Rpb24gYWRkSm9iV2l0aFByaW9yaXR5KG1hcmtlcktleSwgcHJpb3JpdGl6ZWRLZXksIHByaW9yaXR5LCBqb2JJZCwgcHJpb3JpdHlDb3VudGVyS2V5LFxuICBpc1BhdXNlZE9yTWF4ZWQpXG4gIGxvY2FsIHNjb3JlID0gZ2V0UHJpb3JpdHlTY29yZShwcmlvcml0eSwgcHJpb3JpdHlDb3VudGVyS2V5KVxuICByY2FsbChcIlpBRERcIiwgcHJpb3JpdGl6ZWRLZXksIHNjb3JlLCBqb2JJZClcbiAgYWRkQmFzZU1hcmtlcklmTmVlZGVkKG1hcmtlcktleSwgaXNQYXVzZWRPck1heGVkKVxuZW5kXG4tLVtbXG4gIEZ1bmN0aW9uIHRvIGNoZWNrIGlmIHF1ZXVlIGlzIHBhdXNlZCBvciBtYXhlZFxuICAoc2luY2UgYW4gZW1wdHkgbGlzdCBhbmQgIUVYSVNUUyBhcmUgbm90IHJlYWxseSB0aGUgc2FtZSkuXG5dXVxubG9jYWwgZnVuY3Rpb24gaXNRdWV1ZVBhdXNlZE9yTWF4ZWQocXVldWVNZXRhS2V5LCBhY3RpdmVLZXkpXG4gIGxvY2FsIHF1ZXVlQXR0cmlidXRlcyA9IHJjYWxsKFwiSE1HRVRcIiwgcXVldWVNZXRhS2V5LCBcInBhdXNlZFwiLCBcImNvbmN1cnJlbmN5XCIpXG4gIGlmIHF1ZXVlQXR0cmlidXRlc1sxXSB0aGVuXG4gICAgcmV0dXJuIHRydWVcbiAgZWxzZVxuICAgIGlmIHF1ZXVlQXR0cmlidXRlc1syXSB0aGVuXG4gICAgICBsb2NhbCBhY3RpdmVDb3VudCA9IHJjYWxsKFwiTExFTlwiLCBhY3RpdmVLZXkpXG4gICAgICByZXR1cm4gYWN0aXZlQ291bnQgPj0gdG9udW1iZXIocXVldWVBdHRyaWJ1dGVzWzJdKVxuICAgIGVuZFxuICBlbmRcbiAgcmV0dXJuIGZhbHNlXG5lbmRcbmxvY2FsIGZ1bmN0aW9uIG1vdmVQYXJlbnRUb1dhaXQocGFyZW50UXVldWVLZXksIHBhcmVudEtleSwgcGFyZW50SWQsIHRpbWVzdGFtcClcbiAgICBsb2NhbCBwYXJlbnRXYWl0S2V5ID0gcGFyZW50UXVldWVLZXkgLi4gXCI6d2FpdFwiXG4gICAgbG9jYWwgcGFyZW50UGF1c2VkS2V5ID0gcGFyZW50UXVldWVLZXkgLi4gXCI6cGF1c2VkXCJcbiAgICBsb2NhbCBwYXJlbnRBY3RpdmVLZXkgPSBwYXJlbnRRdWV1ZUtleSAuLiBcIjphY3RpdmVcIlxuICAgIGxvY2FsIHBhcmVudE1ldGFLZXkgPSBwYXJlbnRRdWV1ZUtleSAuLiBcIjptZXRhXCJcbiAgICBsb2NhbCBwYXJlbnRNYXJrZXJLZXkgPSBwYXJlbnRRdWV1ZUtleSAuLiBcIjptYXJrZXJcIlxuICAgIGxvY2FsIGpvYkF0dHJpYnV0ZXMgPSByY2FsbChcIkhNR0VUXCIsIHBhcmVudEtleSwgXCJwcmlvcml0eVwiLCBcImRlbGF5XCIpXG4gICAgbG9jYWwgcHJpb3JpdHkgPSB0b251bWJlcihqb2JBdHRyaWJ1dGVzWzFdKSBvciAwXG4gICAgbG9jYWwgZGVsYXkgPSB0b251bWJlcihqb2JBdHRyaWJ1dGVzWzJdKSBvciAwXG4gICAgaWYgZGVsYXkgPiAwIHRoZW5cbiAgICAgICAgbG9jYWwgZGVsYXllZFRpbWVzdGFtcCA9IHRvbnVtYmVyKHRpbWVzdGFtcCkgKyBkZWxheVxuICAgICAgICBsb2NhbCBzY29yZSA9IGRlbGF5ZWRUaW1lc3RhbXAgKiAweDEwMDBcbiAgICAgICAgbG9jYWwgcGFyZW50RGVsYXllZEtleSA9IHBhcmVudFF1ZXVlS2V5IC4uIFwiOmRlbGF5ZWRcIlxuICAgICAgICByY2FsbChcIlpBRERcIiwgcGFyZW50RGVsYXllZEtleSwgc2NvcmUsIHBhcmVudElkKVxuICAgICAgICByY2FsbChcIlhBRERcIiwgcGFyZW50UXVldWVLZXkgLi4gXCI6ZXZlbnRzXCIsIFwiKlwiLCBcImV2ZW50XCIsIFwiZGVsYXllZFwiLCBcImpvYklkXCIsIHBhcmVudElkLCBcImRlbGF5XCIsXG4gICAgICAgICAgICBkZWxheWVkVGltZXN0YW1wKVxuICAgICAgICBhZGREZWxheU1hcmtlcklmTmVlZGVkKHBhcmVudE1hcmtlcktleSwgcGFyZW50RGVsYXllZEtleSlcbiAgICBlbHNlXG4gICAgICAgIGlmIHByaW9yaXR5ID09IDAgdGhlblxuICAgICAgICAgICAgbG9jYWwgcGFyZW50VGFyZ2V0LCBpc1BhcmVudFBhdXNlZE9yTWF4ZWQgPSBnZXRUYXJnZXRRdWV1ZUxpc3QocGFyZW50TWV0YUtleSwgcGFyZW50QWN0aXZlS2V5LFxuICAgICAgICAgICAgICAgIHBhcmVudFdhaXRLZXksIHBhcmVudFBhdXNlZEtleSlcbiAgICAgICAgICAgIGFkZEpvYkluVGFyZ2V0TGlzdChwYXJlbnRUYXJnZXQsIHBhcmVudE1hcmtlcktleSwgXCJSUFVTSFwiLCBpc1BhcmVudFBhdXNlZE9yTWF4ZWQsIHBhcmVudElkKVxuICAgICAgICBlbHNlXG4gICAgICAgICAgICBsb2NhbCBpc1BhdXNlZE9yTWF4ZWQgPSBpc1F1ZXVlUGF1c2VkT3JNYXhlZChwYXJlbnRNZXRhS2V5LCBwYXJlbnRBY3RpdmVLZXkpXG4gICAgICAgICAgICBhZGRKb2JXaXRoUHJpb3JpdHkocGFyZW50TWFya2VyS2V5LCBwYXJlbnRRdWV1ZUtleSAuLiBcIjpwcmlvcml0aXplZFwiLCBwcmlvcml0eSwgcGFyZW50SWQsXG4gICAgICAgICAgICAgICAgcGFyZW50UXVldWVLZXkgLi4gXCI6cGNcIiwgaXNQYXVzZWRPck1heGVkKVxuICAgICAgICBlbmRcbiAgICAgICAgcmNhbGwoXCJYQUREXCIsIHBhcmVudFF1ZXVlS2V5IC4uIFwiOmV2ZW50c1wiLCBcIipcIiwgXCJldmVudFwiLCBcIndhaXRpbmdcIiwgXCJqb2JJZFwiLCBwYXJlbnRJZCwgXCJwcmV2XCIsXG4gICAgICAgICAgICBcIndhaXRpbmctY2hpbGRyZW5cIilcbiAgICBlbmRcbmVuZFxubG9jYWwgZnVuY3Rpb24gbW92ZVBhcmVudFRvV2FpdElmTmVlZGVkKHBhcmVudFF1ZXVlS2V5LCBwYXJlbnRLZXksIHBhcmVudElkLCB0aW1lc3RhbXApXG4gIGlmIHJjYWxsKFwiRVhJU1RTXCIsIHBhcmVudEtleSkgPT0gMSB0aGVuXG4gICAgbG9jYWwgcGFyZW50V2FpdGluZ0NoaWxkcmVuS2V5ID0gcGFyZW50UXVldWVLZXkgLi4gXCI6d2FpdGluZy1jaGlsZHJlblwiXG4gICAgaWYgcmNhbGwoXCJaU0NPUkVcIiwgcGFyZW50V2FpdGluZ0NoaWxkcmVuS2V5LCBwYXJlbnRJZCkgdGhlbiAgICBcbiAgICAgIHJjYWxsKFwiWlJFTVwiLCBwYXJlbnRXYWl0aW5nQ2hpbGRyZW5LZXksIHBhcmVudElkKVxuICAgICAgbW92ZVBhcmVudFRvV2FpdChwYXJlbnRRdWV1ZUtleSwgcGFyZW50S2V5LCBwYXJlbnRJZCwgdGltZXN0YW1wKVxuICAgIGVuZFxuICBlbmRcbmVuZFxubG9jYWwgZnVuY3Rpb24gbW92ZVBhcmVudFRvV2FpdElmTm9QZW5kaW5nRGVwZW5kZW5jaWVzKHBhcmVudFF1ZXVlS2V5LCBwYXJlbnREZXBlbmRlbmNpZXNLZXksIHBhcmVudEtleSxcbiAgcGFyZW50SWQsIHRpbWVzdGFtcClcbiAgbG9jYWwgZG9Ob3RIYXZlUGVuZGluZ0RlcGVuZGVuY2llcyA9IHJjYWxsKFwiU0NBUkRcIiwgcGFyZW50RGVwZW5kZW5jaWVzS2V5KSA9PSAwXG4gIGlmIGRvTm90SGF2ZVBlbmRpbmdEZXBlbmRlbmNpZXMgdGhlblxuICAgIG1vdmVQYXJlbnRUb1dhaXRJZk5lZWRlZChwYXJlbnRRdWV1ZUtleSwgcGFyZW50S2V5LCBwYXJlbnRJZCwgdGltZXN0YW1wKVxuICBlbmRcbmVuZFxuLS1bW1xuICBGdW5jdGlvbnMgdG8gcmVtb3ZlIGpvYnMgd2hlbiByZW1vdmVPbkZhaWwgb3B0aW9uIGlzIHByb3ZpZGVkLlxuXV1cbi0tIEluY2x1ZGVzXG4tLVtbXG4gIEZ1bmN0aW9uIHRvIHJlbW92ZSBqb2IuXG5dXVxuLS0gSW5jbHVkZXNcbi0tW1tcbiAgRnVuY3Rpb24gdG8gcmVtb3ZlIGRlZHVwbGljYXRpb24ga2V5IGlmIG5lZWRlZFxuICB3aGVuIGEgam9iIGlzIGJlaW5nIHJlbW92ZWQuXG5dXVxubG9jYWwgZnVuY3Rpb24gcmVtb3ZlRGVkdXBsaWNhdGlvbktleUlmTmVlZGVkT25SZW1vdmFsKHByZWZpeEtleSxcbiAgam9iS2V5LCBqb2JJZClcbiAgbG9jYWwgZGVkdXBsaWNhdGlvbklkID0gcmNhbGwoXCJIR0VUXCIsIGpvYktleSwgXCJkZWlkXCIpXG4gIGlmIGRlZHVwbGljYXRpb25JZCB0aGVuXG4gICAgbG9jYWwgZGVkdXBsaWNhdGlvbktleSA9IHByZWZpeEtleSAuLiBcImRlOlwiIC4uIGRlZHVwbGljYXRpb25JZFxuICAgIGxvY2FsIGN1cnJlbnRKb2JJZCA9IHJjYWxsKCdHRVQnLCBkZWR1cGxpY2F0aW9uS2V5KVxuICAgIGlmIGN1cnJlbnRKb2JJZCBhbmQgY3VycmVudEpvYklkID09IGpvYklkIHRoZW5cbiAgICAgIHJldHVybiByY2FsbChcIkRFTFwiLCBkZWR1cGxpY2F0aW9uS2V5KVxuICAgIGVuZFxuICBlbmRcbmVuZFxuLS1bW1xuICBGdW5jdGlvbiB0byByZW1vdmUgam9iIGtleXMuXG5dXVxubG9jYWwgZnVuY3Rpb24gcmVtb3ZlSm9iS2V5cyhqb2JLZXkpXG4gIHJldHVybiByY2FsbChcIkRFTFwiLCBqb2JLZXksIGpvYktleSAuLiAnOmxvZ3MnLCBqb2JLZXkgLi4gJzpkZXBlbmRlbmNpZXMnLFxuICAgIGpvYktleSAuLiAnOnByb2Nlc3NlZCcsIGpvYktleSAuLiAnOmZhaWxlZCcsIGpvYktleSAuLiAnOnVuc3VjY2Vzc2Z1bCcpXG5lbmRcbi0tW1tcbiAgQ2hlY2sgaWYgdGhpcyBqb2IgaGFzIGEgcGFyZW50LiBJZiBzbyB3ZSB3aWxsIGp1c3QgcmVtb3ZlIGl0IGZyb21cbiAgdGhlIHBhcmVudCBjaGlsZCBsaXN0LCBidXQgaWYgaXQgaXMgdGhlIGxhc3QgY2hpbGQgd2Ugc2hvdWxkIG1vdmUgdGhlIHBhcmVudCB0byBcIndhaXQvcGF1c2VkXCJcbiAgd2hpY2ggcmVxdWlyZXMgY29kZSBmcm9tIFwibW92ZVRvRmluaXNoZWRcIlxuXV1cbi0tIEluY2x1ZGVzXG4tLVtbXG4gIEZ1bmN0aW9ucyB0byBkZXN0cnVjdHVyZSBqb2Iga2V5LlxuICBKdXN0IGEgYml0IG9mIHdhcm5pbmcsIHRoZXNlIGZ1bmN0aW9ucyBtYXkgYmUgYSBiaXQgc2xvdyBhbmQgYWZmZWN0IHBlcmZvcm1hbmNlIHNpZ25pZmljYW50bHkuXG5dXVxubG9jYWwgZ2V0Sm9iSWRGcm9tS2V5ID0gZnVuY3Rpb24gKGpvYktleSlcbiAgcmV0dXJuIHN0cmluZy5tYXRjaChqb2JLZXksIFwiLio6KC4qKVwiKVxuZW5kXG5sb2NhbCBnZXRKb2JLZXlQcmVmaXggPSBmdW5jdGlvbiAoam9iS2V5LCBqb2JJZClcbiAgcmV0dXJuIHN0cmluZy5zdWIoam9iS2V5LCAwLCAjam9iS2V5IC0gI2pvYklkKVxuZW5kXG5sb2NhbCBmdW5jdGlvbiBfbW92ZVBhcmVudFRvV2FpdChwYXJlbnRQcmVmaXgsIHBhcmVudElkLCBlbWl0RXZlbnQpXG4gIGxvY2FsIHBhcmVudFRhcmdldCwgaXNQYXVzZWRPck1heGVkID0gZ2V0VGFyZ2V0UXVldWVMaXN0KHBhcmVudFByZWZpeCAuLiBcIm1ldGFcIiwgcGFyZW50UHJlZml4IC4uIFwiYWN0aXZlXCIsXG4gICAgcGFyZW50UHJlZml4IC4uIFwid2FpdFwiLCBwYXJlbnRQcmVmaXggLi4gXCJwYXVzZWRcIilcbiAgYWRkSm9iSW5UYXJnZXRMaXN0KHBhcmVudFRhcmdldCwgcGFyZW50UHJlZml4IC4uIFwibWFya2VyXCIsIFwiUlBVU0hcIiwgaXNQYXVzZWRPck1heGVkLCBwYXJlbnRJZClcbiAgaWYgZW1pdEV2ZW50IHRoZW5cbiAgICBsb2NhbCBwYXJlbnRFdmVudFN0cmVhbSA9IHBhcmVudFByZWZpeCAuLiBcImV2ZW50c1wiXG4gICAgcmNhbGwoXCJYQUREXCIsIHBhcmVudEV2ZW50U3RyZWFtLCBcIipcIiwgXCJldmVudFwiLCBcIndhaXRpbmdcIiwgXCJqb2JJZFwiLCBwYXJlbnRJZCwgXCJwcmV2XCIsIFwid2FpdGluZy1jaGlsZHJlblwiKVxuICBlbmRcbmVuZFxubG9jYWwgZnVuY3Rpb24gcmVtb3ZlUGFyZW50RGVwZW5kZW5jeUtleShqb2JLZXksIGhhcmQsIHBhcmVudEtleSwgYmFzZUtleSwgZGVib3VuY2VJZClcbiAgaWYgcGFyZW50S2V5IHRoZW5cbiAgICBsb2NhbCBwYXJlbnREZXBlbmRlbmNpZXNLZXkgPSBwYXJlbnRLZXkgLi4gXCI6ZGVwZW5kZW5jaWVzXCJcbiAgICBsb2NhbCByZXN1bHQgPSByY2FsbChcIlNSRU1cIiwgcGFyZW50RGVwZW5kZW5jaWVzS2V5LCBqb2JLZXkpXG4gICAgaWYgcmVzdWx0ID4gMCB0aGVuXG4gICAgICBsb2NhbCBwZW5kaW5nRGVwZW5kZW5jaWVzID0gcmNhbGwoXCJTQ0FSRFwiLCBwYXJlbnREZXBlbmRlbmNpZXNLZXkpXG4gICAgICBpZiBwZW5kaW5nRGVwZW5kZW5jaWVzID09IDAgdGhlblxuICAgICAgICBsb2NhbCBwYXJlbnRJZCA9IGdldEpvYklkRnJvbUtleShwYXJlbnRLZXkpXG4gICAgICAgIGxvY2FsIHBhcmVudFByZWZpeCA9IGdldEpvYktleVByZWZpeChwYXJlbnRLZXksIHBhcmVudElkKVxuICAgICAgICBsb2NhbCBudW1SZW1vdmVkRWxlbWVudHMgPSByY2FsbChcIlpSRU1cIiwgcGFyZW50UHJlZml4IC4uIFwid2FpdGluZy1jaGlsZHJlblwiLCBwYXJlbnRJZClcbiAgICAgICAgaWYgbnVtUmVtb3ZlZEVsZW1lbnRzID09IDEgdGhlblxuICAgICAgICAgIGlmIGhhcmQgdGhlbiAtLSByZW1vdmUgcGFyZW50IGluIHNhbWUgcXVldWVcbiAgICAgICAgICAgIGlmIHBhcmVudFByZWZpeCA9PSBiYXNlS2V5IHRoZW5cbiAgICAgICAgICAgICAgcmVtb3ZlUGFyZW50RGVwZW5kZW5jeUtleShwYXJlbnRLZXksIGhhcmQsIG5pbCwgYmFzZUtleSwgbmlsKVxuICAgICAgICAgICAgICByZW1vdmVKb2JLZXlzKHBhcmVudEtleSlcbiAgICAgICAgICAgICAgaWYgZGVib3VuY2VJZCB0aGVuXG4gICAgICAgICAgICAgICAgcmNhbGwoXCJERUxcIiwgcGFyZW50UHJlZml4IC4uIFwiZGU6XCIgLi4gZGVib3VuY2VJZClcbiAgICAgICAgICAgICAgZW5kXG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgIF9tb3ZlUGFyZW50VG9XYWl0KHBhcmVudFByZWZpeCwgcGFyZW50SWQpXG4gICAgICAgICAgICBlbmRcbiAgICAgICAgICBlbHNlXG4gICAgICAgICAgICBfbW92ZVBhcmVudFRvV2FpdChwYXJlbnRQcmVmaXgsIHBhcmVudElkLCB0cnVlKVxuICAgICAgICAgIGVuZFxuICAgICAgICBlbmRcbiAgICAgIGVuZFxuICAgICAgcmV0dXJuIHRydWVcbiAgICBlbmRcbiAgZWxzZVxuICAgIGxvY2FsIHBhcmVudEF0dHJpYnV0ZXMgPSByY2FsbChcIkhNR0VUXCIsIGpvYktleSwgXCJwYXJlbnRLZXlcIiwgXCJkZWlkXCIpXG4gICAgbG9jYWwgbWlzc2VkUGFyZW50S2V5ID0gcGFyZW50QXR0cmlidXRlc1sxXVxuICAgIGlmKCAodHlwZShtaXNzZWRQYXJlbnRLZXkpID09IFwic3RyaW5nXCIpIGFuZCBtaXNzZWRQYXJlbnRLZXkgfj0gXCJcIlxuICAgICAgYW5kIChyY2FsbChcIkVYSVNUU1wiLCBtaXNzZWRQYXJlbnRLZXkpID09IDEpKSB0aGVuXG4gICAgICBsb2NhbCBwYXJlbnREZXBlbmRlbmNpZXNLZXkgPSBtaXNzZWRQYXJlbnRLZXkgLi4gXCI6ZGVwZW5kZW5jaWVzXCJcbiAgICAgIGxvY2FsIHJlc3VsdCA9IHJjYWxsKFwiU1JFTVwiLCBwYXJlbnREZXBlbmRlbmNpZXNLZXksIGpvYktleSlcbiAgICAgIGlmIHJlc3VsdCA+IDAgdGhlblxuICAgICAgICBsb2NhbCBwZW5kaW5nRGVwZW5kZW5jaWVzID0gcmNhbGwoXCJTQ0FSRFwiLCBwYXJlbnREZXBlbmRlbmNpZXNLZXkpXG4gICAgICAgIGlmIHBlbmRpbmdEZXBlbmRlbmNpZXMgPT0gMCB0aGVuXG4gICAgICAgICAgbG9jYWwgcGFyZW50SWQgPSBnZXRKb2JJZEZyb21LZXkobWlzc2VkUGFyZW50S2V5KVxuICAgICAgICAgIGxvY2FsIHBhcmVudFByZWZpeCA9IGdldEpvYktleVByZWZpeChtaXNzZWRQYXJlbnRLZXksIHBhcmVudElkKVxuICAgICAgICAgIGxvY2FsIG51bVJlbW92ZWRFbGVtZW50cyA9IHJjYWxsKFwiWlJFTVwiLCBwYXJlbnRQcmVmaXggLi4gXCJ3YWl0aW5nLWNoaWxkcmVuXCIsIHBhcmVudElkKVxuICAgICAgICAgIGlmIG51bVJlbW92ZWRFbGVtZW50cyA9PSAxIHRoZW5cbiAgICAgICAgICAgIGlmIGhhcmQgdGhlblxuICAgICAgICAgICAgICBpZiBwYXJlbnRQcmVmaXggPT0gYmFzZUtleSB0aGVuXG4gICAgICAgICAgICAgICAgcmVtb3ZlUGFyZW50RGVwZW5kZW5jeUtleShtaXNzZWRQYXJlbnRLZXksIGhhcmQsIG5pbCwgYmFzZUtleSwgbmlsKVxuICAgICAgICAgICAgICAgIHJlbW92ZUpvYktleXMobWlzc2VkUGFyZW50S2V5KVxuICAgICAgICAgICAgICAgIGlmIHBhcmVudEF0dHJpYnV0ZXNbMl0gdGhlblxuICAgICAgICAgICAgICAgICAgcmNhbGwoXCJERUxcIiwgcGFyZW50UHJlZml4IC4uIFwiZGU6XCIgLi4gcGFyZW50QXR0cmlidXRlc1syXSlcbiAgICAgICAgICAgICAgICBlbmRcbiAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIF9tb3ZlUGFyZW50VG9XYWl0KHBhcmVudFByZWZpeCwgcGFyZW50SWQpXG4gICAgICAgICAgICAgIGVuZFxuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICBfbW92ZVBhcmVudFRvV2FpdChwYXJlbnRQcmVmaXgsIHBhcmVudElkLCB0cnVlKVxuICAgICAgICAgICAgZW5kXG4gICAgICAgICAgZW5kXG4gICAgICAgIGVuZFxuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgZW5kXG4gICAgZW5kXG4gIGVuZFxuICByZXR1cm4gZmFsc2VcbmVuZFxubG9jYWwgZnVuY3Rpb24gcmVtb3ZlSm9iKGpvYklkLCBoYXJkLCBiYXNlS2V5LCBzaG91bGRSZW1vdmVEZWR1cGxpY2F0aW9uS2V5KVxuICBsb2NhbCBqb2JLZXkgPSBiYXNlS2V5IC4uIGpvYklkXG4gIHJlbW92ZVBhcmVudERlcGVuZGVuY3lLZXkoam9iS2V5LCBoYXJkLCBuaWwsIGJhc2VLZXkpXG4gIGlmIHNob3VsZFJlbW92ZURlZHVwbGljYXRpb25LZXkgdGhlblxuICAgIHJlbW92ZURlZHVwbGljYXRpb25LZXlJZk5lZWRlZE9uUmVtb3ZhbChiYXNlS2V5LCBqb2JLZXksIGpvYklkKVxuICBlbmRcbiAgcmVtb3ZlSm9iS2V5cyhqb2JLZXkpXG5lbmRcbi0tW1tcbiAgRnVuY3Rpb25zIHRvIHJlbW92ZSBqb2JzIGJ5IG1heCBhZ2UuXG5dXVxuLS0gSW5jbHVkZXNcbmxvY2FsIGZ1bmN0aW9uIHJlbW92ZUpvYnNCeU1heEFnZSh0aW1lc3RhbXAsIG1heEFnZSwgdGFyZ2V0U2V0LCBwcmVmaXgsXG4gIHNob3VsZFJlbW92ZURlYm91bmNlS2V5KVxuICBsb2NhbCBzdGFydCA9IHRpbWVzdGFtcCAtIG1heEFnZSAqIDEwMDBcbiAgbG9jYWwgam9iSWRzID0gcmNhbGwoXCJaUkVWUkFOR0VCWVNDT1JFXCIsIHRhcmdldFNldCwgc3RhcnQsIFwiLWluZlwiKVxuICBmb3IgaSwgam9iSWQgaW4gaXBhaXJzKGpvYklkcykgZG9cbiAgICByZW1vdmVKb2Ioam9iSWQsIGZhbHNlLCBwcmVmaXgsIGZhbHNlIC0tW1tyZW1vdmUgZGVib3VuY2Uga2V5XV0pXG4gIGVuZFxuICByY2FsbChcIlpSRU1SQU5HRUJZU0NPUkVcIiwgdGFyZ2V0U2V0LCBcIi1pbmZcIiwgc3RhcnQpXG5lbmRcbi0tW1tcbiAgRnVuY3Rpb25zIHRvIHJlbW92ZSBqb2JzIGJ5IG1heCBjb3VudC5cbl1dXG4tLSBJbmNsdWRlc1xubG9jYWwgZnVuY3Rpb24gcmVtb3ZlSm9ic0J5TWF4Q291bnQobWF4Q291bnQsIHRhcmdldFNldCwgcHJlZml4KVxuICBsb2NhbCBzdGFydCA9IG1heENvdW50XG4gIGxvY2FsIGpvYklkcyA9IHJjYWxsKFwiWlJFVlJBTkdFXCIsIHRhcmdldFNldCwgc3RhcnQsIC0xKVxuICBmb3IgaSwgam9iSWQgaW4gaXBhaXJzKGpvYklkcykgZG9cbiAgICByZW1vdmVKb2Ioam9iSWQsIGZhbHNlLCBwcmVmaXgsIGZhbHNlIC0tW1tyZW1vdmUgZGVib3VuY2Uga2V5XV0pXG4gIGVuZFxuICByY2FsbChcIlpSRU1SQU5HRUJZUkFOS1wiLCB0YXJnZXRTZXQsIDAsIC0obWF4Q291bnQgKyAxKSlcbmVuZFxubG9jYWwgZnVuY3Rpb24gcmVtb3ZlSm9ic09uRmFpbChxdWV1ZUtleVByZWZpeCwgZmFpbGVkS2V5LCBqb2JJZCwgb3B0cywgdGltZXN0YW1wKVxuICBsb2NhbCByZW1vdmVPbkZhaWxUeXBlID0gdHlwZShvcHRzW1wicmVtb3ZlT25GYWlsXCJdKVxuICBpZiByZW1vdmVPbkZhaWxUeXBlID09IFwibnVtYmVyXCIgdGhlblxuICAgIHJlbW92ZUpvYnNCeU1heENvdW50KG9wdHNbXCJyZW1vdmVPbkZhaWxcIl0sXG4gICAgICAgICAgICAgICAgICAgICAgICBmYWlsZWRLZXksIHF1ZXVlS2V5UHJlZml4KVxuICBlbHNlaWYgcmVtb3ZlT25GYWlsVHlwZSA9PSBcImJvb2xlYW5cIiB0aGVuXG4gICAgaWYgb3B0c1tcInJlbW92ZU9uRmFpbFwiXSB0aGVuXG4gICAgICByZW1vdmVKb2Ioam9iSWQsIGZhbHNlLCBxdWV1ZUtleVByZWZpeCxcbiAgICAgICAgICAgICAgICBmYWxzZSAtLVtbcmVtb3ZlIGRlYm91bmNlIGtleV1dKVxuICAgICAgcmNhbGwoXCJaUkVNXCIsIGZhaWxlZEtleSwgam9iSWQpXG4gICAgZW5kXG4gIGVsc2VpZiByZW1vdmVPbkZhaWxUeXBlIH49IFwibmlsXCIgdGhlblxuICAgIGxvY2FsIG1heEFnZSA9IG9wdHNbXCJyZW1vdmVPbkZhaWxcIl1bXCJhZ2VcIl1cbiAgICBsb2NhbCBtYXhDb3VudCA9IG9wdHNbXCJyZW1vdmVPbkZhaWxcIl1bXCJjb3VudFwiXVxuICAgIGlmIG1heEFnZSB+PSBuaWwgdGhlblxuICAgICAgcmVtb3ZlSm9ic0J5TWF4QWdlKHRpbWVzdGFtcCwgbWF4QWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZmFpbGVkS2V5LCBxdWV1ZUtleVByZWZpeClcbiAgICBlbmRcbiAgICBpZiBtYXhDb3VudCB+PSBuaWwgYW5kIG1heENvdW50ID4gMCB0aGVuXG4gICAgICByZW1vdmVKb2JzQnlNYXhDb3VudChtYXhDb3VudCwgZmFpbGVkS2V5LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXVlS2V5UHJlZml4KVxuICAgIGVuZFxuICBlbmQgXG5lbmRcbmxvY2FsIG1vdmVQYXJlbnRUb0ZhaWxlZElmTmVlZGVkID0gZnVuY3Rpb24gKHBhcmVudFF1ZXVlS2V5LCBwYXJlbnRLZXksIHBhcmVudElkLCBqb2JJZEtleSwgdGltZXN0YW1wKVxuICBpZiByY2FsbChcIkVYSVNUU1wiLCBwYXJlbnRLZXkpID09IDEgdGhlblxuICAgIGxvY2FsIHBhcmVudFdhaXRpbmdDaGlsZHJlbktleSA9IHBhcmVudFF1ZXVlS2V5IC4uIFwiOndhaXRpbmctY2hpbGRyZW5cIlxuICAgIGxvY2FsIHBhcmVudERlbGF5ZWRLZXkgPSBwYXJlbnRRdWV1ZUtleSAuLiBcIjpkZWxheWVkXCJcbiAgICBsb2NhbCBwYXJlbnRQcmlvcml0aXplZEtleSA9IHBhcmVudFF1ZXVlS2V5IC4uIFwiOnByaW9yaXRpemVkXCJcbiAgICBsb2NhbCBwYXJlbnRXYWl0aW5nQ2hpbGRyZW5PckRlbGF5ZWRLZXlcbiAgICBsb2NhbCBwcmV2U3RhdGVcbiAgICBpZiByY2FsbChcIlpTQ09SRVwiLCBwYXJlbnRXYWl0aW5nQ2hpbGRyZW5LZXksIHBhcmVudElkKSB0aGVuXG4gICAgICBwYXJlbnRXYWl0aW5nQ2hpbGRyZW5PckRlbGF5ZWRLZXkgPSBwYXJlbnRXYWl0aW5nQ2hpbGRyZW5LZXlcbiAgICAgIHByZXZTdGF0ZSA9IFwid2FpdGluZy1jaGlsZHJlblwiXG4gICAgZWxzZWlmIHJjYWxsKFwiWlNDT1JFXCIsIHBhcmVudERlbGF5ZWRLZXksIHBhcmVudElkKSB0aGVuXG4gICAgICBwYXJlbnRXYWl0aW5nQ2hpbGRyZW5PckRlbGF5ZWRLZXkgPSBwYXJlbnREZWxheWVkS2V5XG4gICAgICBwcmV2U3RhdGUgPSBcImRlbGF5ZWRcIlxuICAgICAgcmNhbGwoXCJIU0VUXCIsIHBhcmVudEtleSwgXCJkZWxheVwiLCAwKVxuICAgIGVuZFxuICAgIGlmIHBhcmVudFdhaXRpbmdDaGlsZHJlbk9yRGVsYXllZEtleSB0aGVuXG4gICAgICByY2FsbChcIlpSRU1cIiwgcGFyZW50V2FpdGluZ0NoaWxkcmVuT3JEZWxheWVkS2V5LCBwYXJlbnRJZClcbiAgICAgIGxvY2FsIHBhcmVudFF1ZXVlUHJlZml4ID0gcGFyZW50UXVldWVLZXkgLi4gXCI6XCJcbiAgICAgIGxvY2FsIHBhcmVudEZhaWxlZEtleSA9IHBhcmVudFF1ZXVlS2V5IC4uIFwiOmZhaWxlZFwiXG4gICAgICBsb2NhbCBkZWZlcnJlZEZhaWx1cmUgPSBcImNoaWxkIFwiIC4uIGpvYklkS2V5IC4uIFwiIGZhaWxlZFwiXG4gICAgICByY2FsbChcIkhTRVRcIiwgcGFyZW50S2V5LCBcImRlZmFcIiwgZGVmZXJyZWRGYWlsdXJlKVxuICAgICAgbW92ZVBhcmVudFRvV2FpdChwYXJlbnRRdWV1ZUtleSwgcGFyZW50S2V5LCBwYXJlbnRJZCwgdGltZXN0YW1wKVxuICAgIGVsc2VcbiAgICAgIGlmIG5vdCByY2FsbChcIlpTQ09SRVwiLCBwYXJlbnRRdWV1ZUtleSAuLiBcIjpmYWlsZWRcIiwgcGFyZW50SWQpIHRoZW5cbiAgICAgICAgbG9jYWwgZGVmZXJyZWRGYWlsdXJlID0gXCJjaGlsZCBcIiAuLiBqb2JJZEtleSAuLiBcIiBmYWlsZWRcIlxuICAgICAgICByY2FsbChcIkhTRVRcIiwgcGFyZW50S2V5LCBcImRlZmFcIiwgZGVmZXJyZWRGYWlsdXJlKVxuICAgICAgZW5kXG4gICAgZW5kXG4gIGVuZFxuZW5kXG5sb2NhbCBtb3ZlQ2hpbGRGcm9tRGVwZW5kZW5jaWVzSWZOZWVkZWQgPSBmdW5jdGlvbiAocmF3UGFyZW50RGF0YSwgY2hpbGRLZXksIGZhaWxlZFJlYXNvbiwgdGltZXN0YW1wKVxuICBpZiByYXdQYXJlbnREYXRhIHRoZW5cbiAgICBsb2NhbCBwYXJlbnREYXRhID0gY2pzb24uZGVjb2RlKHJhd1BhcmVudERhdGEpXG4gICAgbG9jYWwgcGFyZW50S2V5ID0gcGFyZW50RGF0YVsncXVldWVLZXknXSAuLiAnOicgLi4gcGFyZW50RGF0YVsnaWQnXVxuICAgIGxvY2FsIHBhcmVudERlcGVuZGVuY2llc0NoaWxkcmVuS2V5ID0gcGFyZW50S2V5IC4uIFwiOmRlcGVuZGVuY2llc1wiXG4gICAgaWYgcGFyZW50RGF0YVsnZnBvZiddIHRoZW5cbiAgICAgIGlmIHJjYWxsKFwiU1JFTVwiLCBwYXJlbnREZXBlbmRlbmNpZXNDaGlsZHJlbktleSwgY2hpbGRLZXkpID09IDEgdGhlblxuICAgICAgICBsb2NhbCBwYXJlbnRVbnN1Y2Nlc3NzZnVsQ2hpbGRyZW5LZXkgPSBwYXJlbnRLZXkgLi4gXCI6dW5zdWNjZXNzZnVsXCJcbiAgICAgICAgcmNhbGwoXCJaQUREXCIsIHBhcmVudFVuc3VjY2Vzc3NmdWxDaGlsZHJlbktleSwgdGltZXN0YW1wLCBjaGlsZEtleSlcbiAgICAgICAgbW92ZVBhcmVudFRvRmFpbGVkSWZOZWVkZWQoXG4gICAgICAgICAgcGFyZW50RGF0YVsncXVldWVLZXknXSxcbiAgICAgICAgICBwYXJlbnRLZXksXG4gICAgICAgICAgcGFyZW50RGF0YVsnaWQnXSxcbiAgICAgICAgICBjaGlsZEtleSxcbiAgICAgICAgICB0aW1lc3RhbXBcbiAgICAgICAgKVxuICAgICAgZW5kXG4gICAgZWxzZWlmIHBhcmVudERhdGFbJ2Nwb2YnXSB0aGVuXG4gICAgICBpZiByY2FsbChcIlNSRU1cIiwgcGFyZW50RGVwZW5kZW5jaWVzQ2hpbGRyZW5LZXksIGNoaWxkS2V5KSA9PSAxIHRoZW5cbiAgICAgICAgbG9jYWwgcGFyZW50RmFpbGVkQ2hpbGRyZW5LZXkgPSBwYXJlbnRLZXkgLi4gXCI6ZmFpbGVkXCJcbiAgICAgICAgcmNhbGwoXCJIU0VUXCIsIHBhcmVudEZhaWxlZENoaWxkcmVuS2V5LCBjaGlsZEtleSwgZmFpbGVkUmVhc29uKVxuICAgICAgICBtb3ZlUGFyZW50VG9XYWl0SWZOZWVkZWQocGFyZW50RGF0YVsncXVldWVLZXknXSwgcGFyZW50S2V5LCBwYXJlbnREYXRhWydpZCddLCB0aW1lc3RhbXApXG4gICAgICBlbmRcbiAgICBlbHNlaWYgcGFyZW50RGF0YVsnaWRvZiddIG9yIHBhcmVudERhdGFbJ3Jkb2YnXSB0aGVuXG4gICAgICBpZiByY2FsbChcIlNSRU1cIiwgcGFyZW50RGVwZW5kZW5jaWVzQ2hpbGRyZW5LZXksIGNoaWxkS2V5KSA9PSAxIHRoZW5cbiAgICAgICAgbW92ZVBhcmVudFRvV2FpdElmTm9QZW5kaW5nRGVwZW5kZW5jaWVzKHBhcmVudERhdGFbJ3F1ZXVlS2V5J10sIHBhcmVudERlcGVuZGVuY2llc0NoaWxkcmVuS2V5LFxuICAgICAgICAgIHBhcmVudEtleSwgcGFyZW50RGF0YVsnaWQnXSwgdGltZXN0YW1wKVxuICAgICAgICBpZiBwYXJlbnREYXRhWydpZG9mJ10gdGhlblxuICAgICAgICAgIGxvY2FsIHBhcmVudEZhaWxlZENoaWxkcmVuS2V5ID0gcGFyZW50S2V5IC4uIFwiOmZhaWxlZFwiXG4gICAgICAgICAgcmNhbGwoXCJIU0VUXCIsIHBhcmVudEZhaWxlZENoaWxkcmVuS2V5LCBjaGlsZEtleSwgZmFpbGVkUmVhc29uKVxuICAgICAgICBlbmRcbiAgICAgIGVuZFxuICAgIGVuZFxuICBlbmRcbmVuZFxuLS1bW1xuICBGdW5jdGlvbiB0byBtb3ZlIGpvYiBmcm9tIHdhaXQgc3RhdGUgdG8gYWN0aXZlLlxuICBJbnB1dDpcbiAgICBvcHRzIC0gdG9rZW4gLSBsb2NrIHRva2VuXG4gICAgb3B0cyAtIGxvY2tEdXJhdGlvblxuICAgIG9wdHMgLSBsaW1pdGVyXG5dXVxuLS0gSW5jbHVkZXNcbmxvY2FsIGZ1bmN0aW9uIHByZXBhcmVKb2JGb3JQcm9jZXNzaW5nKGtleVByZWZpeCwgcmF0ZUxpbWl0ZXJLZXksIGV2ZW50U3RyZWFtS2V5LFxuICAgIGpvYklkLCBwcm9jZXNzZWRPbiwgbWF4Sm9icywgbGltaXRlckR1cmF0aW9uLCBtYXJrZXJLZXksIG9wdHMpXG4gIGxvY2FsIGpvYktleSA9IGtleVByZWZpeCAuLiBqb2JJZFxuICAtLSBDaGVjayBpZiB3ZSBuZWVkIHRvIHBlcmZvcm0gcmF0ZSBsaW1pdGluZy5cbiAgaWYgbWF4Sm9icyB0aGVuXG4gICAgbG9jYWwgam9iQ291bnRlciA9IHRvbnVtYmVyKHJjYWxsKFwiSU5DUlwiLCByYXRlTGltaXRlcktleSkpXG4gICAgaWYgam9iQ291bnRlciA9PSAxIHRoZW5cbiAgICAgIGxvY2FsIGludGVnZXJEdXJhdGlvbiA9IG1hdGguZmxvb3IobWF0aC5hYnMobGltaXRlckR1cmF0aW9uKSlcbiAgICAgIHJjYWxsKFwiUEVYUElSRVwiLCByYXRlTGltaXRlcktleSwgaW50ZWdlckR1cmF0aW9uKVxuICAgIGVuZFxuICBlbmRcbiAgLS0gZ2V0IGEgbG9ja1xuICBpZiBvcHRzWyd0b2tlbiddIH49IFwiMFwiIHRoZW5cbiAgICBsb2NhbCBsb2NrS2V5ID0gam9iS2V5IC4uICc6bG9jaydcbiAgICByY2FsbChcIlNFVFwiLCBsb2NrS2V5LCBvcHRzWyd0b2tlbiddLCBcIlBYXCIsIG9wdHNbJ2xvY2tEdXJhdGlvbiddKVxuICBlbmRcbiAgbG9jYWwgb3B0aW9uYWxWYWx1ZXMgPSB7fVxuICBpZiBvcHRzWyduYW1lJ10gdGhlblxuICAgIC0tIFNldCBcInByb2Nlc3NlZEJ5XCIgZmllbGQgdG8gdGhlIHdvcmtlciBuYW1lXG4gICAgdGFibGUuaW5zZXJ0KG9wdGlvbmFsVmFsdWVzLCBcInBiXCIpXG4gICAgdGFibGUuaW5zZXJ0KG9wdGlvbmFsVmFsdWVzLCBvcHRzWyduYW1lJ10pXG4gIGVuZFxuICByY2FsbChcIlhBRERcIiwgZXZlbnRTdHJlYW1LZXksIFwiKlwiLCBcImV2ZW50XCIsIFwiYWN0aXZlXCIsIFwiam9iSWRcIiwgam9iSWQsIFwicHJldlwiLCBcIndhaXRpbmdcIilcbiAgcmNhbGwoXCJITVNFVFwiLCBqb2JLZXksIFwicHJvY2Vzc2VkT25cIiwgcHJvY2Vzc2VkT24sIHVucGFjayhvcHRpb25hbFZhbHVlcykpXG4gIHJjYWxsKFwiSElOQ1JCWVwiLCBqb2JLZXksIFwiYXRzXCIsIDEpXG4gIGFkZEJhc2VNYXJrZXJJZk5lZWRlZChtYXJrZXJLZXksIGZhbHNlKVxuICAtLSByYXRlIGxpbWl0IGRlbGF5IG11c3QgYmUgMCBpbiB0aGlzIGNhc2UgdG8gcHJldmVudCBhZGRpbmcgbW9yZSBkZWxheVxuICAtLSB3aGVuIGpvYiB0aGF0IGlzIG1vdmVkIHRvIGFjdGl2ZSBuZWVkcyB0byBiZSBwcm9jZXNzZWRcbiAgcmV0dXJuIHtyY2FsbChcIkhHRVRBTExcIiwgam9iS2V5KSwgam9iSWQsIDAsIDB9IC0tIGdldCBqb2IgZGF0YVxuZW5kXG4tLVtbXG4gIFVwZGF0ZXMgdGhlIGRlbGF5IHNldCwgYnkgbW92aW5nIGRlbGF5ZWQgam9icyB0aGF0IHNob3VsZFxuICBiZSBwcm9jZXNzZWQgbm93IHRvIFwid2FpdFwiLlxuICAgICBFdmVudHM6XG4gICAgICAnd2FpdGluZydcbl1dXG4tLSBJbmNsdWRlc1xuLS0gVHJ5IHRvIGdldCBhcyBtdWNoIGFzIDEwMDAgam9icyBhdCBvbmNlXG5sb2NhbCBmdW5jdGlvbiBwcm9tb3RlRGVsYXllZEpvYnMoZGVsYXllZEtleSwgbWFya2VyS2V5LCB0YXJnZXRLZXksIHByaW9yaXRpemVkS2V5LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50U3RyZWFtS2V5LCBwcmVmaXgsIHRpbWVzdGFtcCwgcHJpb3JpdHlDb3VudGVyS2V5LCBpc1BhdXNlZClcbiAgICBsb2NhbCBqb2JzID0gcmNhbGwoXCJaUkFOR0VCWVNDT1JFXCIsIGRlbGF5ZWRLZXksIDAsICh0aW1lc3RhbXAgKyAxKSAqIDB4MTAwMCAtIDEsIFwiTElNSVRcIiwgMCwgMTAwMClcbiAgICBpZiAoI2pvYnMgPiAwKSB0aGVuXG4gICAgICAgIHJjYWxsKFwiWlJFTVwiLCBkZWxheWVkS2V5LCB1bnBhY2soam9icykpXG4gICAgICAgIGZvciBfLCBqb2JJZCBpbiBpcGFpcnMoam9icykgZG9cbiAgICAgICAgICAgIGxvY2FsIGpvYktleSA9IHByZWZpeCAuLiBqb2JJZFxuICAgICAgICAgICAgbG9jYWwgcHJpb3JpdHkgPVxuICAgICAgICAgICAgICAgIHRvbnVtYmVyKHJjYWxsKFwiSEdFVFwiLCBqb2JLZXksIFwicHJpb3JpdHlcIikpIG9yIDBcbiAgICAgICAgICAgIGlmIHByaW9yaXR5ID09IDAgdGhlblxuICAgICAgICAgICAgICAgIC0tIExJRk8gb3IgRklGT1xuICAgICAgICAgICAgICAgIHJjYWxsKFwiTFBVU0hcIiwgdGFyZ2V0S2V5LCBqb2JJZClcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBsb2NhbCBzY29yZSA9IGdldFByaW9yaXR5U2NvcmUocHJpb3JpdHksIHByaW9yaXR5Q291bnRlcktleSlcbiAgICAgICAgICAgICAgICByY2FsbChcIlpBRERcIiwgcHJpb3JpdGl6ZWRLZXksIHNjb3JlLCBqb2JJZClcbiAgICAgICAgICAgIGVuZFxuICAgICAgICAgICAgLS0gRW1pdCB3YWl0aW5nIGV2ZW50XG4gICAgICAgICAgICByY2FsbChcIlhBRERcIiwgZXZlbnRTdHJlYW1LZXksIFwiKlwiLCBcImV2ZW50XCIsIFwid2FpdGluZ1wiLCBcImpvYklkXCIsXG4gICAgICAgICAgICAgICAgICBqb2JJZCwgXCJwcmV2XCIsIFwiZGVsYXllZFwiKVxuICAgICAgICAgICAgcmNhbGwoXCJIU0VUXCIsIGpvYktleSwgXCJkZWxheVwiLCAwKVxuICAgICAgICBlbmRcbiAgICAgICAgYWRkQmFzZU1hcmtlcklmTmVlZGVkKG1hcmtlcktleSwgaXNQYXVzZWQpXG4gICAgZW5kXG5lbmRcbi0tW1tcbiAgRnVuY3Rpb24gdG8gcmVtb3ZlIGRlZHVwbGljYXRpb24ga2V5IGlmIG5lZWRlZFxuICB3aGVuIGEgam9iIGlzIG1vdmVkIHRvIGNvbXBsZXRlZCBvciBmYWlsZWQgc3RhdGVzLlxuXV1cbmxvY2FsIGZ1bmN0aW9uIHJlbW92ZURlZHVwbGljYXRpb25LZXlJZk5lZWRlZE9uRmluYWxpemF0aW9uKHByZWZpeEtleSxcbiAgZGVkdXBsaWNhdGlvbklkLCBqb2JJZClcbiAgaWYgZGVkdXBsaWNhdGlvbklkIHRoZW5cbiAgICBsb2NhbCBkZWR1cGxpY2F0aW9uS2V5ID0gcHJlZml4S2V5IC4uIFwiZGU6XCIgLi4gZGVkdXBsaWNhdGlvbklkXG4gICAgbG9jYWwgcHR0bCA9IHJjYWxsKFwiUFRUTFwiLCBkZWR1cGxpY2F0aW9uS2V5KVxuICAgIGlmIHB0dGwgPT0gMCB0aGVuXG4gICAgICByZXR1cm4gcmNhbGwoXCJERUxcIiwgZGVkdXBsaWNhdGlvbktleSlcbiAgICBlbmRcbiAgICBpZiBwdHRsID09IC0xIHRoZW5cbiAgICAgIGxvY2FsIGN1cnJlbnRKb2JJZCA9IHJjYWxsKCdHRVQnLCBkZWR1cGxpY2F0aW9uS2V5KVxuICAgICAgaWYgY3VycmVudEpvYklkIGFuZCBjdXJyZW50Sm9iSWQgPT0gam9iSWQgdGhlblxuICAgICAgICByZXR1cm4gcmNhbGwoXCJERUxcIiwgZGVkdXBsaWNhdGlvbktleSlcbiAgICAgIGVuZFxuICAgIGVuZFxuICBlbmRcbmVuZFxubG9jYWwgZnVuY3Rpb24gcmVtb3ZlTG9jayhqb2JLZXksIHN0YWxsZWRLZXksIHRva2VuLCBqb2JJZClcbiAgaWYgdG9rZW4gfj0gXCIwXCIgdGhlblxuICAgIGxvY2FsIGxvY2tLZXkgPSBqb2JLZXkgLi4gJzpsb2NrJ1xuICAgIGxvY2FsIGxvY2tUb2tlbiA9IHJjYWxsKFwiR0VUXCIsIGxvY2tLZXkpXG4gICAgaWYgbG9ja1Rva2VuID09IHRva2VuIHRoZW5cbiAgICAgIHJjYWxsKFwiREVMXCIsIGxvY2tLZXkpXG4gICAgICByY2FsbChcIlNSRU1cIiwgc3RhbGxlZEtleSwgam9iSWQpXG4gICAgZWxzZVxuICAgICAgaWYgbG9ja1Rva2VuIHRoZW5cbiAgICAgICAgLS0gTG9jayBleGlzdHMgYnV0IHRva2VuIGRvZXMgbm90IG1hdGNoXG4gICAgICAgIHJldHVybiAtNlxuICAgICAgZWxzZVxuICAgICAgICAtLSBMb2NrIGlzIG1pc3NpbmcgY29tcGxldGVseVxuICAgICAgICByZXR1cm4gLTJcbiAgICAgIGVuZFxuICAgIGVuZFxuICBlbmRcbiAgcmV0dXJuIDBcbmVuZFxuLS1bW1xuICBGdW5jdGlvbiB0byB0cmltIGV2ZW50cywgZGVmYXVsdCAxMDAwMC5cbl1dXG4tLSBJbmNsdWRlc1xuLS1bW1xuICBGdW5jdGlvbiB0byBnZXQgbWF4IGV2ZW50cyB2YWx1ZSBvciBzZXQgYnkgZGVmYXVsdCAxMDAwMC5cbl1dXG5sb2NhbCBmdW5jdGlvbiBnZXRPclNldE1heEV2ZW50cyhtZXRhS2V5KVxuICBsb2NhbCBtYXhFdmVudHMgPSByY2FsbChcIkhHRVRcIiwgbWV0YUtleSwgXCJvcHRzLm1heExlbkV2ZW50c1wiKVxuICBpZiBub3QgbWF4RXZlbnRzIHRoZW5cbiAgICBtYXhFdmVudHMgPSAxMDAwMFxuICAgIHJjYWxsKFwiSFNFVFwiLCBtZXRhS2V5LCBcIm9wdHMubWF4TGVuRXZlbnRzXCIsIG1heEV2ZW50cylcbiAgZW5kXG4gIHJldHVybiBtYXhFdmVudHNcbmVuZFxubG9jYWwgZnVuY3Rpb24gdHJpbUV2ZW50cyhtZXRhS2V5LCBldmVudFN0cmVhbUtleSlcbiAgbG9jYWwgbWF4RXZlbnRzID0gZ2V0T3JTZXRNYXhFdmVudHMobWV0YUtleSlcbiAgaWYgbWF4RXZlbnRzIHRoZW5cbiAgICByY2FsbChcIlhUUklNXCIsIGV2ZW50U3RyZWFtS2V5LCBcIk1BWExFTlwiLCBcIn5cIiwgbWF4RXZlbnRzKVxuICBlbHNlXG4gICAgcmNhbGwoXCJYVFJJTVwiLCBldmVudFN0cmVhbUtleSwgXCJNQVhMRU5cIiwgXCJ+XCIsIDEwMDAwKVxuICBlbmRcbmVuZFxuLS1bW1xuICBWYWxpZGF0ZSBhbmQgbW92ZSBvciBhZGQgZGVwZW5kZW5jaWVzIHRvIHBhcmVudC5cbl1dXG4tLSBJbmNsdWRlc1xubG9jYWwgZnVuY3Rpb24gdXBkYXRlUGFyZW50RGVwc0lmTmVlZGVkKHBhcmVudEtleSwgcGFyZW50UXVldWVLZXksIHBhcmVudERlcGVuZGVuY2llc0tleSxcbiAgcGFyZW50SWQsIGpvYklkS2V5LCByZXR1cm52YWx1ZSwgdGltZXN0YW1wIClcbiAgbG9jYWwgcHJvY2Vzc2VkU2V0ID0gcGFyZW50S2V5IC4uIFwiOnByb2Nlc3NlZFwiXG4gIHJjYWxsKFwiSFNFVFwiLCBwcm9jZXNzZWRTZXQsIGpvYklkS2V5LCByZXR1cm52YWx1ZSlcbiAgbW92ZVBhcmVudFRvV2FpdElmTm9QZW5kaW5nRGVwZW5kZW5jaWVzKHBhcmVudFF1ZXVlS2V5LCBwYXJlbnREZXBlbmRlbmNpZXNLZXksIHBhcmVudEtleSwgcGFyZW50SWQsIHRpbWVzdGFtcClcbmVuZFxuLS1bW1xuICBGdW5jdGlvbiB0byB1cGRhdGUgYSBidW5jaCBvZiBmaWVsZHMgaW4gYSBqb2IuXG5dXVxubG9jYWwgZnVuY3Rpb24gdXBkYXRlSm9iRmllbGRzKGpvYktleSwgbXNncGFja2VkRmllbGRzKVxuICBpZiBtc2dwYWNrZWRGaWVsZHMgYW5kICNtc2dwYWNrZWRGaWVsZHMgPiAwIHRoZW5cbiAgICBsb2NhbCBmaWVsZHNUb1VwZGF0ZSA9IGNtc2dwYWNrLnVucGFjayhtc2dwYWNrZWRGaWVsZHMpXG4gICAgaWYgZmllbGRzVG9VcGRhdGUgdGhlblxuICAgICAgcmNhbGwoXCJITVNFVFwiLCBqb2JLZXksIHVucGFjayhmaWVsZHNUb1VwZGF0ZSkpXG4gICAgZW5kXG4gIGVuZFxuZW5kXG5sb2NhbCBqb2JJZEtleSA9IEtFWVNbMTJdXG5pZiByY2FsbChcIkVYSVNUU1wiLCBqb2JJZEtleSkgPT0gMSB0aGVuIC0tIE1ha2Ugc3VyZSBqb2IgZXhpc3RzXG4gICAgLS0gTWFrZSBzdXJlIGl0IGRvZXMgbm90IGhhdmUgcGVuZGluZyBkZXBlbmRlbmNpZXNcbiAgICAtLSBJdCBtdXN0IGhhcHBlbiBiZWZvcmUgcmVtb3ZpbmcgbG9ja1xuICAgIGlmIEFSR1ZbNV0gPT0gXCJjb21wbGV0ZWRcIiB0aGVuXG4gICAgICAgIGlmIHJjYWxsKFwiU0NBUkRcIiwgam9iSWRLZXkgLi4gXCI6ZGVwZW5kZW5jaWVzXCIpIH49IDAgdGhlblxuICAgICAgICAgICAgcmV0dXJuIC00XG4gICAgICAgIGVuZFxuICAgICAgICBpZiByY2FsbChcIlpDQVJEXCIsIGpvYklkS2V5IC4uIFwiOnVuc3VjY2Vzc2Z1bFwiKSB+PSAwIHRoZW5cbiAgICAgICAgICAgIHJldHVybiAtOVxuICAgICAgICBlbmRcbiAgICBlbmRcbiAgICBsb2NhbCBvcHRzID0gY21zZ3BhY2sudW5wYWNrKEFSR1ZbOF0pXG4gICAgbG9jYWwgdG9rZW4gPSBvcHRzWyd0b2tlbiddXG4gICAgbG9jYWwgZXJyb3JDb2RlID0gcmVtb3ZlTG9jayhqb2JJZEtleSwgS0VZU1s1XSwgdG9rZW4sIEFSR1ZbMV0pXG4gICAgaWYgZXJyb3JDb2RlIDwgMCB0aGVuXG4gICAgICAgIHJldHVybiBlcnJvckNvZGVcbiAgICBlbmRcbiAgICB1cGRhdGVKb2JGaWVsZHMoam9iSWRLZXksIEFSR1ZbOV0pO1xuICAgIGxvY2FsIGF0dGVtcHRzID0gb3B0c1snYXR0ZW1wdHMnXVxuICAgIGxvY2FsIG1heE1ldHJpY3NTaXplID0gb3B0c1snbWF4TWV0cmljc1NpemUnXVxuICAgIGxvY2FsIG1heENvdW50ID0gb3B0c1sna2VlcEpvYnMnXVsnY291bnQnXVxuICAgIGxvY2FsIG1heEFnZSA9IG9wdHNbJ2tlZXBKb2JzJ11bJ2FnZSddXG4gICAgbG9jYWwgam9iQXR0cmlidXRlcyA9IHJjYWxsKFwiSE1HRVRcIiwgam9iSWRLZXksIFwicGFyZW50S2V5XCIsIFwicGFyZW50XCIsIFwiZGVpZFwiKVxuICAgIGxvY2FsIHBhcmVudEtleSA9IGpvYkF0dHJpYnV0ZXNbMV0gb3IgXCJcIlxuICAgIGxvY2FsIHBhcmVudElkID0gXCJcIlxuICAgIGxvY2FsIHBhcmVudFF1ZXVlS2V5ID0gXCJcIlxuICAgIGlmIGpvYkF0dHJpYnV0ZXNbMl0gdGhlbiAtLSBUT0RPOiBuZWVkIHRvIHJldmlzaXQgdGhpcyBsb2dpYyBpZiBpdCdzIHN0aWxsIG5lZWRlZFxuICAgICAgICBsb2NhbCBqc29uRGVjb2RlZFBhcmVudCA9IGNqc29uLmRlY29kZShqb2JBdHRyaWJ1dGVzWzJdKVxuICAgICAgICBwYXJlbnRJZCA9IGpzb25EZWNvZGVkUGFyZW50WydpZCddXG4gICAgICAgIHBhcmVudFF1ZXVlS2V5ID0ganNvbkRlY29kZWRQYXJlbnRbJ3F1ZXVlS2V5J11cbiAgICBlbmRcbiAgICBsb2NhbCBqb2JJZCA9IEFSR1ZbMV1cbiAgICBsb2NhbCB0aW1lc3RhbXAgPSBBUkdWWzJdXG4gICAgLS0gUmVtb3ZlIGZyb20gYWN0aXZlIGxpc3QgKGlmIG5vdCBhY3RpdmUgd2Ugc2hhbGwgcmV0dXJuIGVycm9yKVxuICAgIGxvY2FsIG51bVJlbW92ZWRFbGVtZW50cyA9IHJjYWxsKFwiTFJFTVwiLCBLRVlTWzJdLCAtMSwgam9iSWQpXG4gICAgaWYgKG51bVJlbW92ZWRFbGVtZW50cyA8IDEpIHRoZW5cbiAgICAgICAgcmV0dXJuIC0zXG4gICAgZW5kXG4gICAgbG9jYWwgZXZlbnRTdHJlYW1LZXkgPSBLRVlTWzRdXG4gICAgbG9jYWwgbWV0YUtleSA9IEtFWVNbOV1cbiAgICAtLSBUcmltIGV2ZW50cyBiZWZvcmUgZW1pdGluZyB0aGVtIHRvIGF2b2lkIHRyaW1taW5nIGV2ZW50cyBlbWl0dGVkIGluIHRoaXMgc2NyaXB0XG4gICAgdHJpbUV2ZW50cyhtZXRhS2V5LCBldmVudFN0cmVhbUtleSlcbiAgICBsb2NhbCBwcmVmaXggPSBBUkdWWzddXG4gICAgcmVtb3ZlRGVkdXBsaWNhdGlvbktleUlmTmVlZGVkT25GaW5hbGl6YXRpb24ocHJlZml4LCBqb2JBdHRyaWJ1dGVzWzNdLCBqb2JJZClcbiAgICAtLSBJZiBqb2IgaGFzIGEgcGFyZW50IHdlIG5lZWQgdG9cbiAgICAtLSAxKSByZW1vdmUgdGhpcyBqb2IgaWQgZnJvbSBwYXJlbnRzIGRlcGVuZGVuY2llc1xuICAgIC0tIDIpIG1vdmUgdGhlIGpvYiBJZCB0byBwYXJlbnQgXCJwcm9jZXNzZWRcIiBzZXRcbiAgICAtLSAzKSBwdXNoIHRoZSByZXN1bHRzIGludG8gcGFyZW50IFwicmVzdWx0c1wiIGxpc3RcbiAgICAtLSA0KSBpZiBwYXJlbnQncyBkZXBlbmRlbmNpZXMgaXMgZW1wdHksIHRoZW4gbW92ZSBwYXJlbnQgdG8gXCJ3YWl0L3BhdXNlZFwiLiBOb3RlIGl0IG1heSBiZSBhIGRpZmZlcmVudCBxdWV1ZSEuXG4gICAgaWYgcGFyZW50SWQgPT0gXCJcIiBhbmQgcGFyZW50S2V5IH49IFwiXCIgdGhlblxuICAgICAgICBwYXJlbnRJZCA9IGdldEpvYklkRnJvbUtleShwYXJlbnRLZXkpXG4gICAgICAgIHBhcmVudFF1ZXVlS2V5ID0gZ2V0Sm9iS2V5UHJlZml4KHBhcmVudEtleSwgXCI6XCIgLi4gcGFyZW50SWQpXG4gICAgZW5kXG4gICAgaWYgcGFyZW50SWQgfj0gXCJcIiB0aGVuXG4gICAgICAgIGlmIEFSR1ZbNV0gPT0gXCJjb21wbGV0ZWRcIiB0aGVuXG4gICAgICAgICAgICBsb2NhbCBkZXBlbmRlbmNpZXNTZXQgPSBwYXJlbnRLZXkgLi4gXCI6ZGVwZW5kZW5jaWVzXCJcbiAgICAgICAgICAgIGlmIHJjYWxsKFwiU1JFTVwiLCBkZXBlbmRlbmNpZXNTZXQsIGpvYklkS2V5KSA9PSAxIHRoZW5cbiAgICAgICAgICAgICAgICB1cGRhdGVQYXJlbnREZXBzSWZOZWVkZWQocGFyZW50S2V5LCBwYXJlbnRRdWV1ZUtleSwgZGVwZW5kZW5jaWVzU2V0LCBwYXJlbnRJZCwgam9iSWRLZXksIEFSR1ZbNF0sXG4gICAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcClcbiAgICAgICAgICAgIGVuZFxuICAgICAgICBlbHNlXG4gICAgICAgICAgICBtb3ZlQ2hpbGRGcm9tRGVwZW5kZW5jaWVzSWZOZWVkZWQoam9iQXR0cmlidXRlc1syXSwgam9iSWRLZXksIEFSR1ZbNF0sIHRpbWVzdGFtcClcbiAgICAgICAgZW5kXG4gICAgZW5kXG4gICAgbG9jYWwgYXR0ZW1wdHNNYWRlID0gcmNhbGwoXCJISU5DUkJZXCIsIGpvYklkS2V5LCBcImF0bVwiLCAxKVxuICAgIC0tIFJlbW92ZSBqb2I/XG4gICAgaWYgbWF4Q291bnQgfj0gMCB0aGVuXG4gICAgICAgIGxvY2FsIHRhcmdldFNldCA9IEtFWVNbMTFdXG4gICAgICAgIC0tIEFkZCB0byBjb21wbGV0ZS9mYWlsZWQgc2V0XG4gICAgICAgIHJjYWxsKFwiWkFERFwiLCB0YXJnZXRTZXQsIHRpbWVzdGFtcCwgam9iSWQpXG4gICAgICAgIHJjYWxsKFwiSFNFVFwiLCBqb2JJZEtleSwgQVJHVlszXSwgQVJHVls0XSwgXCJmaW5pc2hlZE9uXCIsIHRpbWVzdGFtcClcbiAgICAgICAgLS0gXCJyZXR1cm52YWx1ZVwiIC8gXCJmYWlsZWRSZWFzb25cIiBhbmQgXCJmaW5pc2hlZE9uXCJcbiAgICAgICAgaWYgQVJHVls1XSA9PSBcImZhaWxlZFwiIHRoZW5cbiAgICAgICAgICAgIHJjYWxsKFwiSERFTFwiLCBqb2JJZEtleSwgXCJkZWZhXCIpXG4gICAgICAgIGVuZFxuICAgICAgICAtLSBSZW1vdmUgb2xkIGpvYnM/XG4gICAgICAgIGlmIG1heEFnZSB+PSBuaWwgdGhlblxuICAgICAgICAgICAgcmVtb3ZlSm9ic0J5TWF4QWdlKHRpbWVzdGFtcCwgbWF4QWdlLCB0YXJnZXRTZXQsIHByZWZpeClcbiAgICAgICAgZW5kXG4gICAgICAgIGlmIG1heENvdW50IH49IG5pbCBhbmQgbWF4Q291bnQgPiAwIHRoZW5cbiAgICAgICAgICAgIHJlbW92ZUpvYnNCeU1heENvdW50KG1heENvdW50LCB0YXJnZXRTZXQsIHByZWZpeClcbiAgICAgICAgZW5kXG4gICAgZWxzZVxuICAgICAgICByZW1vdmVKb2JLZXlzKGpvYklkS2V5KVxuICAgICAgICBpZiBwYXJlbnRLZXkgfj0gXCJcIiB0aGVuXG4gICAgICAgICAgICAtLSBUT0RPOiB3aGVuIGEgY2hpbGQgaXMgcmVtb3ZlZCB3aGVuIGZpbmlzaGVkLCByZXN1bHQgb3IgZmFpbHVyZSBpbiBwYXJlbnRcbiAgICAgICAgICAgIC0tIG11c3Qgbm90IGJlIGRlbGV0ZWQsIHRob3NlIHZhbHVlIHJlZmVyZW5jZXMgc2hvdWxkIGJlIGRlbGV0ZWQgd2hlbiB0aGUgcGFyZW50XG4gICAgICAgICAgICAtLSBpcyBkZWxldGVkXG4gICAgICAgICAgICByZW1vdmVQYXJlbnREZXBlbmRlbmN5S2V5KGpvYklkS2V5LCBmYWxzZSwgcGFyZW50S2V5LCBqb2JBdHRyaWJ1dGVzWzNdKVxuICAgICAgICBlbmRcbiAgICBlbmRcbiAgICByY2FsbChcIlhBRERcIiwgZXZlbnRTdHJlYW1LZXksIFwiKlwiLCBcImV2ZW50XCIsIEFSR1ZbNV0sIFwiam9iSWRcIiwgam9iSWQsIEFSR1ZbM10sIEFSR1ZbNF0sIFwicHJldlwiLCBcImFjdGl2ZVwiKVxuICAgIGlmIEFSR1ZbNV0gPT0gXCJmYWlsZWRcIiB0aGVuXG4gICAgICAgIGlmIHRvbnVtYmVyKGF0dGVtcHRzTWFkZSkgPj0gdG9udW1iZXIoYXR0ZW1wdHMpIHRoZW5cbiAgICAgICAgICAgIHJjYWxsKFwiWEFERFwiLCBldmVudFN0cmVhbUtleSwgXCIqXCIsIFwiZXZlbnRcIiwgXCJyZXRyaWVzLWV4aGF1c3RlZFwiLCBcImpvYklkXCIsIGpvYklkLCBcImF0dGVtcHRzTWFkZVwiLFxuICAgICAgICAgICAgICAgIGF0dGVtcHRzTWFkZSlcbiAgICAgICAgZW5kXG4gICAgZW5kXG4gICAgLS0gQ29sbGVjdCBtZXRyaWNzXG4gICAgaWYgbWF4TWV0cmljc1NpemUgfj0gXCJcIiB0aGVuXG4gICAgICAgIGNvbGxlY3RNZXRyaWNzKEtFWVNbMTNdLCBLRVlTWzEzXSAuLiAnOmRhdGEnLCBtYXhNZXRyaWNzU2l6ZSwgdGltZXN0YW1wKVxuICAgIGVuZFxuICAgIC0tIFRyeSB0byBnZXQgbmV4dCBqb2IgdG8gYXZvaWQgYW4gZXh0cmEgcm91bmR0cmlwIGlmIHRoZSBxdWV1ZSBpcyBub3QgY2xvc2luZyxcbiAgICAtLSBhbmQgbm90IHJhdGUgbGltaXRlZC5cbiAgICBpZiAoQVJHVls2XSA9PSBcIjFcIikgdGhlblxuICAgICAgICBsb2NhbCB0YXJnZXQsIGlzUGF1c2VkT3JNYXhlZCwgcmF0ZUxpbWl0TWF4LCByYXRlTGltaXREdXJhdGlvbiA9IGdldFRhcmdldFF1ZXVlTGlzdChtZXRhS2V5LCBLRVlTWzJdLFxuICAgICAgICAgICAgS0VZU1sxXSwgS0VZU1s4XSlcbiAgICAgICAgbG9jYWwgbWFya2VyS2V5ID0gS0VZU1sxNF1cbiAgICAgICAgLS0gQ2hlY2sgaWYgdGhlcmUgYXJlIGRlbGF5ZWQgam9icyB0aGF0IGNhbiBiZSBwcm9tb3RlZFxuICAgICAgICBwcm9tb3RlRGVsYXllZEpvYnMoS0VZU1s3XSwgbWFya2VyS2V5LCB0YXJnZXQsIEtFWVNbM10sIGV2ZW50U3RyZWFtS2V5LCBwcmVmaXgsIHRpbWVzdGFtcCwgS0VZU1sxMF0sXG4gICAgICAgICAgICBpc1BhdXNlZE9yTWF4ZWQpXG4gICAgICAgIGxvY2FsIG1heEpvYnMgPSB0b251bWJlcihyYXRlTGltaXRNYXggb3IgKG9wdHNbJ2xpbWl0ZXInXSBhbmQgb3B0c1snbGltaXRlciddWydtYXgnXSkpXG4gICAgICAgIC0tIENoZWNrIGlmIHdlIGFyZSByYXRlIGxpbWl0ZWQgZmlyc3QuXG4gICAgICAgIGxvY2FsIGV4cGlyZVRpbWUgPSBnZXRSYXRlTGltaXRUVEwobWF4Sm9icywgS0VZU1s2XSlcbiAgICAgICAgaWYgZXhwaXJlVGltZSA+IDAgdGhlblxuICAgICAgICAgICAgcmV0dXJuIHswLCAwLCBleHBpcmVUaW1lLCAwfVxuICAgICAgICBlbmRcbiAgICAgICAgLS0gcGF1c2VkIG9yIG1heGVkIHF1ZXVlXG4gICAgICAgIGlmIGlzUGF1c2VkT3JNYXhlZCB0aGVuXG4gICAgICAgICAgICByZXR1cm4gezAsIDAsIDAsIDB9XG4gICAgICAgIGVuZFxuICAgICAgICBsb2NhbCBsaW1pdGVyRHVyYXRpb24gPSAob3B0c1snbGltaXRlciddIGFuZCBvcHRzWydsaW1pdGVyJ11bJ2R1cmF0aW9uJ10pIG9yIHJhdGVMaW1pdER1cmF0aW9uXG4gICAgICAgIGpvYklkID0gcmNhbGwoXCJSUE9QTFBVU0hcIiwgS0VZU1sxXSwgS0VZU1syXSlcbiAgICAgICAgaWYgam9iSWQgdGhlblxuICAgICAgICAgICAgLS0gTWFya2VycyBpbiB3YWl0bGlzdCBERVBSRUNBVEVEIGluIHY1OiBSZW1vdmUgaW4gdjYuXG4gICAgICAgICAgICBpZiBzdHJpbmcuc3ViKGpvYklkLCAxLCAyKSA9PSBcIjA6XCIgdGhlblxuICAgICAgICAgICAgICAgIHJjYWxsKFwiTFJFTVwiLCBLRVlTWzJdLCAxLCBqb2JJZClcbiAgICAgICAgICAgICAgICAtLSBJZiBqb2JJZCBpcyBzcGVjaWFsIElEIDA6ZGVsYXkgKGRlbGF5IGdyZWF0ZXIgdGhhbiAwKSwgdGhlbiB0aGVyZSBpcyBubyBqb2IgdG8gcHJvY2Vzc1xuICAgICAgICAgICAgICAgIC0tIGJ1dCBpZiBJRCBpcyAwOjAsIHRoZW4gdGhlcmUgaXMgYXQgbGVhc3QgMSBwcmlvcml0aXplZCBqb2IgdG8gcHJvY2Vzc1xuICAgICAgICAgICAgICAgIGlmIGpvYklkID09IFwiMDowXCIgdGhlblxuICAgICAgICAgICAgICAgICAgICBqb2JJZCA9IG1vdmVKb2JGcm9tUHJpb3JpdGl6ZWRUb0FjdGl2ZShLRVlTWzNdLCBLRVlTWzJdLCBLRVlTWzEwXSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHByZXBhcmVKb2JGb3JQcm9jZXNzaW5nKHByZWZpeCwgS0VZU1s2XSwgZXZlbnRTdHJlYW1LZXksIGpvYklkLCB0aW1lc3RhbXAsIG1heEpvYnMsXG4gICAgICAgICAgICAgICAgICAgICAgICBsaW1pdGVyRHVyYXRpb24sIG1hcmtlcktleSwgb3B0cylcbiAgICAgICAgICAgICAgICBlbmRcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICByZXR1cm4gcHJlcGFyZUpvYkZvclByb2Nlc3NpbmcocHJlZml4LCBLRVlTWzZdLCBldmVudFN0cmVhbUtleSwgam9iSWQsIHRpbWVzdGFtcCwgbWF4Sm9icyxcbiAgICAgICAgICAgICAgICAgICAgbGltaXRlckR1cmF0aW9uLCBtYXJrZXJLZXksIG9wdHMpXG4gICAgICAgICAgICBlbmRcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgam9iSWQgPSBtb3ZlSm9iRnJvbVByaW9yaXRpemVkVG9BY3RpdmUoS0VZU1szXSwgS0VZU1syXSwgS0VZU1sxMF0pXG4gICAgICAgICAgICBpZiBqb2JJZCB0aGVuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHByZXBhcmVKb2JGb3JQcm9jZXNzaW5nKHByZWZpeCwgS0VZU1s2XSwgZXZlbnRTdHJlYW1LZXksIGpvYklkLCB0aW1lc3RhbXAsIG1heEpvYnMsXG4gICAgICAgICAgICAgICAgICAgIGxpbWl0ZXJEdXJhdGlvbiwgbWFya2VyS2V5LCBvcHRzKVxuICAgICAgICAgICAgZW5kXG4gICAgICAgIGVuZFxuICAgICAgICAtLSBSZXR1cm4gdGhlIHRpbWVzdGFtcCBmb3IgdGhlIG5leHQgZGVsYXllZCBqb2IgaWYgYW55LlxuICAgICAgICBsb2NhbCBuZXh0VGltZXN0YW1wID0gZ2V0TmV4dERlbGF5ZWRUaW1lc3RhbXAoS0VZU1s3XSlcbiAgICAgICAgaWYgbmV4dFRpbWVzdGFtcCB+PSBuaWwgdGhlblxuICAgICAgICAgICAgLS0gVGhlIHJlc3VsdCBpcyBndWFyYW50ZWVkIHRvIGJlIHBvc2l0aXZlLCBzaW5jZSB0aGVcbiAgICAgICAgICAgIC0tIFpSQU5HRUJZU0NPUkUgY29tbWFuZCB3b3VsZCBoYXZlIHJldHVybiBhIGpvYiBvdGhlcndpc2UuXG4gICAgICAgICAgICByZXR1cm4gezAsIDAsIDAsIG5leHRUaW1lc3RhbXB9XG4gICAgICAgIGVuZFxuICAgIGVuZFxuICAgIGxvY2FsIHdhaXRMZW4gPSByY2FsbChcIkxMRU5cIiwgS0VZU1sxXSlcbiAgICBpZiB3YWl0TGVuID09IDAgdGhlblxuICAgICAgICBsb2NhbCBhY3RpdmVMZW4gPSByY2FsbChcIkxMRU5cIiwgS0VZU1syXSlcbiAgICAgICAgaWYgYWN0aXZlTGVuID09IDAgdGhlblxuICAgICAgICAgICAgbG9jYWwgcHJpb3JpdGl6ZWRMZW4gPSByY2FsbChcIlpDQVJEXCIsIEtFWVNbM10pXG4gICAgICAgICAgICBpZiBwcmlvcml0aXplZExlbiA9PSAwIHRoZW5cbiAgICAgICAgICAgICAgICByY2FsbChcIlhBRERcIiwgZXZlbnRTdHJlYW1LZXksIFwiKlwiLCBcImV2ZW50XCIsIFwiZHJhaW5lZFwiKVxuICAgICAgICAgICAgZW5kXG4gICAgICAgIGVuZFxuICAgIGVuZFxuICAgIHJldHVybiAwXG5lbHNlXG4gICAgcmV0dXJuIC0xXG5lbmRcbmA7XG5leHBvcnRzLm1vdmVUb0ZpbmlzaGVkID0ge1xuICAgIG5hbWU6ICdtb3ZlVG9GaW5pc2hlZCcsXG4gICAgY29udGVudCxcbiAgICBrZXlzOiAxNCxcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1tb3ZlVG9GaW5pc2hlZC0xNC5qcy5tYXAiXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJtb3ZlVG9GaW5pc2hlZCIsImNvbnRlbnQiLCJuYW1lIiwia2V5cyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/scripts/moveToFinished-14.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/scripts/moveToWaitingChildren-7.js":
/*!*************************************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/scripts/moveToWaitingChildren-7.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.moveToWaitingChildren = void 0;\nconst content = `--[[\n  Moves job from active to waiting children set.\n  Input:\n    KEYS[1] active key\n    KEYS[2] wait-children key\n    KEYS[3] job key\n    KEYS[4] job dependencies key\n    KEYS[5] job unsuccessful key\n    KEYS[6] stalled key\n    KEYS[7] events key\n    ARGV[1] token\n    ARGV[2] child key\n    ARGV[3] timestamp\n    ARGV[4] jobId\n    ARGV[5] prefix\n  Output:\n    0 - OK\n    1 - There are not pending dependencies.\n   -1 - Missing job.\n   -2 - Missing lock\n   -3 - Job not in active set\n   -9 - Job has failed children\n]]\nlocal rcall = redis.call\nlocal activeKey = KEYS[1]\nlocal waitingChildrenKey = KEYS[2]\nlocal jobKey = KEYS[3]\nlocal jobDependenciesKey = KEYS[4]\nlocal jobUnsuccessfulKey = KEYS[5]\nlocal stalledKey = KEYS[6]\nlocal eventStreamKey = KEYS[7]\nlocal token = ARGV[1]\nlocal timestamp = ARGV[3]\nlocal jobId = ARGV[4]\n--- Includes\nlocal function removeLock(jobKey, stalledKey, token, jobId)\n  if token ~= \"0\" then\n    local lockKey = jobKey .. ':lock'\n    local lockToken = rcall(\"GET\", lockKey)\n    if lockToken == token then\n      rcall(\"DEL\", lockKey)\n      rcall(\"SREM\", stalledKey, jobId)\n    else\n      if lockToken then\n        -- Lock exists but token does not match\n        return -6\n      else\n        -- Lock is missing completely\n        return -2\n      end\n    end\n  end\n  return 0\nend\nlocal function removeJobFromActive(activeKey, stalledKey, jobKey, jobId,\n    token)\n  local errorCode = removeLock(jobKey, stalledKey, token, jobId)\n  if errorCode < 0 then\n    return errorCode\n  end\n  local numRemovedElements = rcall(\"LREM\", activeKey, -1, jobId)\n  if numRemovedElements < 1 then\n    return -3\n  end\n  return 0\nend\nlocal function moveToWaitingChildren(activeKey, waitingChildrenKey, stalledKey, eventStreamKey,\n    jobKey, jobId, timestamp, token)\n  local errorCode = removeJobFromActive(activeKey, stalledKey, jobKey, jobId, token)\n  if errorCode < 0 then\n    return errorCode\n  end\n  local score = tonumber(timestamp)\n  rcall(\"ZADD\", waitingChildrenKey, score, jobId)\n  rcall(\"XADD\", eventStreamKey, \"*\", \"event\", \"waiting-children\", \"jobId\", jobId, 'prev', 'active')\n  return 0\nend\nif rcall(\"EXISTS\", jobKey) == 1 then\n  if rcall(\"ZCARD\", jobUnsuccessfulKey) ~= 0 then\n    return -9\n  else\n    if ARGV[2] ~= \"\" then\n      if rcall(\"SISMEMBER\", jobDependenciesKey, ARGV[2]) ~= 0 then\n        return moveToWaitingChildren(activeKey, waitingChildrenKey, stalledKey, eventStreamKey,\n          jobKey, jobId, timestamp, token)\n      end\n      return 1\n    else\n      if rcall(\"SCARD\", jobDependenciesKey) ~= 0 then \n        return moveToWaitingChildren(activeKey, waitingChildrenKey, stalledKey, eventStreamKey,\n          jobKey, jobId, timestamp, token)\n      end\n      return 1\n    end    \n  end\nend\nreturn -1\n`;\nexports.moveToWaitingChildren = {\n    name: \"moveToWaitingChildren\",\n    content,\n    keys: 7\n}; //# sourceMappingURL=moveToWaitingChildren-7.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL3NjcmlwdHMvbW92ZVRvV2FpdGluZ0NoaWxkcmVuLTcuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELDZCQUE2QixHQUFHLEtBQUs7QUFDckMsTUFBTUcsVUFBVSxDQUFDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBaUdqQixDQUFDO0FBQ0RILDZCQUE2QixHQUFHO0lBQzVCSSxNQUFNO0lBQ05EO0lBQ0FFLE1BQU07QUFDVixHQUNBLG1EQUFtRCIsInNvdXJjZXMiOlsid2VicGFjazovL29ubHlmYW5zLXBsYXRmb3JtLy4vbm9kZV9tb2R1bGVzL2J1bGxtcS9kaXN0L2Nqcy9zY3JpcHRzL21vdmVUb1dhaXRpbmdDaGlsZHJlbi03LmpzPzExZjMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLm1vdmVUb1dhaXRpbmdDaGlsZHJlbiA9IHZvaWQgMDtcbmNvbnN0IGNvbnRlbnQgPSBgLS1bW1xuICBNb3ZlcyBqb2IgZnJvbSBhY3RpdmUgdG8gd2FpdGluZyBjaGlsZHJlbiBzZXQuXG4gIElucHV0OlxuICAgIEtFWVNbMV0gYWN0aXZlIGtleVxuICAgIEtFWVNbMl0gd2FpdC1jaGlsZHJlbiBrZXlcbiAgICBLRVlTWzNdIGpvYiBrZXlcbiAgICBLRVlTWzRdIGpvYiBkZXBlbmRlbmNpZXMga2V5XG4gICAgS0VZU1s1XSBqb2IgdW5zdWNjZXNzZnVsIGtleVxuICAgIEtFWVNbNl0gc3RhbGxlZCBrZXlcbiAgICBLRVlTWzddIGV2ZW50cyBrZXlcbiAgICBBUkdWWzFdIHRva2VuXG4gICAgQVJHVlsyXSBjaGlsZCBrZXlcbiAgICBBUkdWWzNdIHRpbWVzdGFtcFxuICAgIEFSR1ZbNF0gam9iSWRcbiAgICBBUkdWWzVdIHByZWZpeFxuICBPdXRwdXQ6XG4gICAgMCAtIE9LXG4gICAgMSAtIFRoZXJlIGFyZSBub3QgcGVuZGluZyBkZXBlbmRlbmNpZXMuXG4gICAtMSAtIE1pc3Npbmcgam9iLlxuICAgLTIgLSBNaXNzaW5nIGxvY2tcbiAgIC0zIC0gSm9iIG5vdCBpbiBhY3RpdmUgc2V0XG4gICAtOSAtIEpvYiBoYXMgZmFpbGVkIGNoaWxkcmVuXG5dXVxubG9jYWwgcmNhbGwgPSByZWRpcy5jYWxsXG5sb2NhbCBhY3RpdmVLZXkgPSBLRVlTWzFdXG5sb2NhbCB3YWl0aW5nQ2hpbGRyZW5LZXkgPSBLRVlTWzJdXG5sb2NhbCBqb2JLZXkgPSBLRVlTWzNdXG5sb2NhbCBqb2JEZXBlbmRlbmNpZXNLZXkgPSBLRVlTWzRdXG5sb2NhbCBqb2JVbnN1Y2Nlc3NmdWxLZXkgPSBLRVlTWzVdXG5sb2NhbCBzdGFsbGVkS2V5ID0gS0VZU1s2XVxubG9jYWwgZXZlbnRTdHJlYW1LZXkgPSBLRVlTWzddXG5sb2NhbCB0b2tlbiA9IEFSR1ZbMV1cbmxvY2FsIHRpbWVzdGFtcCA9IEFSR1ZbM11cbmxvY2FsIGpvYklkID0gQVJHVls0XVxuLS0tIEluY2x1ZGVzXG5sb2NhbCBmdW5jdGlvbiByZW1vdmVMb2NrKGpvYktleSwgc3RhbGxlZEtleSwgdG9rZW4sIGpvYklkKVxuICBpZiB0b2tlbiB+PSBcIjBcIiB0aGVuXG4gICAgbG9jYWwgbG9ja0tleSA9IGpvYktleSAuLiAnOmxvY2snXG4gICAgbG9jYWwgbG9ja1Rva2VuID0gcmNhbGwoXCJHRVRcIiwgbG9ja0tleSlcbiAgICBpZiBsb2NrVG9rZW4gPT0gdG9rZW4gdGhlblxuICAgICAgcmNhbGwoXCJERUxcIiwgbG9ja0tleSlcbiAgICAgIHJjYWxsKFwiU1JFTVwiLCBzdGFsbGVkS2V5LCBqb2JJZClcbiAgICBlbHNlXG4gICAgICBpZiBsb2NrVG9rZW4gdGhlblxuICAgICAgICAtLSBMb2NrIGV4aXN0cyBidXQgdG9rZW4gZG9lcyBub3QgbWF0Y2hcbiAgICAgICAgcmV0dXJuIC02XG4gICAgICBlbHNlXG4gICAgICAgIC0tIExvY2sgaXMgbWlzc2luZyBjb21wbGV0ZWx5XG4gICAgICAgIHJldHVybiAtMlxuICAgICAgZW5kXG4gICAgZW5kXG4gIGVuZFxuICByZXR1cm4gMFxuZW5kXG5sb2NhbCBmdW5jdGlvbiByZW1vdmVKb2JGcm9tQWN0aXZlKGFjdGl2ZUtleSwgc3RhbGxlZEtleSwgam9iS2V5LCBqb2JJZCxcbiAgICB0b2tlbilcbiAgbG9jYWwgZXJyb3JDb2RlID0gcmVtb3ZlTG9jayhqb2JLZXksIHN0YWxsZWRLZXksIHRva2VuLCBqb2JJZClcbiAgaWYgZXJyb3JDb2RlIDwgMCB0aGVuXG4gICAgcmV0dXJuIGVycm9yQ29kZVxuICBlbmRcbiAgbG9jYWwgbnVtUmVtb3ZlZEVsZW1lbnRzID0gcmNhbGwoXCJMUkVNXCIsIGFjdGl2ZUtleSwgLTEsIGpvYklkKVxuICBpZiBudW1SZW1vdmVkRWxlbWVudHMgPCAxIHRoZW5cbiAgICByZXR1cm4gLTNcbiAgZW5kXG4gIHJldHVybiAwXG5lbmRcbmxvY2FsIGZ1bmN0aW9uIG1vdmVUb1dhaXRpbmdDaGlsZHJlbihhY3RpdmVLZXksIHdhaXRpbmdDaGlsZHJlbktleSwgc3RhbGxlZEtleSwgZXZlbnRTdHJlYW1LZXksXG4gICAgam9iS2V5LCBqb2JJZCwgdGltZXN0YW1wLCB0b2tlbilcbiAgbG9jYWwgZXJyb3JDb2RlID0gcmVtb3ZlSm9iRnJvbUFjdGl2ZShhY3RpdmVLZXksIHN0YWxsZWRLZXksIGpvYktleSwgam9iSWQsIHRva2VuKVxuICBpZiBlcnJvckNvZGUgPCAwIHRoZW5cbiAgICByZXR1cm4gZXJyb3JDb2RlXG4gIGVuZFxuICBsb2NhbCBzY29yZSA9IHRvbnVtYmVyKHRpbWVzdGFtcClcbiAgcmNhbGwoXCJaQUREXCIsIHdhaXRpbmdDaGlsZHJlbktleSwgc2NvcmUsIGpvYklkKVxuICByY2FsbChcIlhBRERcIiwgZXZlbnRTdHJlYW1LZXksIFwiKlwiLCBcImV2ZW50XCIsIFwid2FpdGluZy1jaGlsZHJlblwiLCBcImpvYklkXCIsIGpvYklkLCAncHJldicsICdhY3RpdmUnKVxuICByZXR1cm4gMFxuZW5kXG5pZiByY2FsbChcIkVYSVNUU1wiLCBqb2JLZXkpID09IDEgdGhlblxuICBpZiByY2FsbChcIlpDQVJEXCIsIGpvYlVuc3VjY2Vzc2Z1bEtleSkgfj0gMCB0aGVuXG4gICAgcmV0dXJuIC05XG4gIGVsc2VcbiAgICBpZiBBUkdWWzJdIH49IFwiXCIgdGhlblxuICAgICAgaWYgcmNhbGwoXCJTSVNNRU1CRVJcIiwgam9iRGVwZW5kZW5jaWVzS2V5LCBBUkdWWzJdKSB+PSAwIHRoZW5cbiAgICAgICAgcmV0dXJuIG1vdmVUb1dhaXRpbmdDaGlsZHJlbihhY3RpdmVLZXksIHdhaXRpbmdDaGlsZHJlbktleSwgc3RhbGxlZEtleSwgZXZlbnRTdHJlYW1LZXksXG4gICAgICAgICAgam9iS2V5LCBqb2JJZCwgdGltZXN0YW1wLCB0b2tlbilcbiAgICAgIGVuZFxuICAgICAgcmV0dXJuIDFcbiAgICBlbHNlXG4gICAgICBpZiByY2FsbChcIlNDQVJEXCIsIGpvYkRlcGVuZGVuY2llc0tleSkgfj0gMCB0aGVuIFxuICAgICAgICByZXR1cm4gbW92ZVRvV2FpdGluZ0NoaWxkcmVuKGFjdGl2ZUtleSwgd2FpdGluZ0NoaWxkcmVuS2V5LCBzdGFsbGVkS2V5LCBldmVudFN0cmVhbUtleSxcbiAgICAgICAgICBqb2JLZXksIGpvYklkLCB0aW1lc3RhbXAsIHRva2VuKVxuICAgICAgZW5kXG4gICAgICByZXR1cm4gMVxuICAgIGVuZCAgICBcbiAgZW5kXG5lbmRcbnJldHVybiAtMVxuYDtcbmV4cG9ydHMubW92ZVRvV2FpdGluZ0NoaWxkcmVuID0ge1xuICAgIG5hbWU6ICdtb3ZlVG9XYWl0aW5nQ2hpbGRyZW4nLFxuICAgIGNvbnRlbnQsXG4gICAga2V5czogNyxcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1tb3ZlVG9XYWl0aW5nQ2hpbGRyZW4tNy5qcy5tYXAiXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJtb3ZlVG9XYWl0aW5nQ2hpbGRyZW4iLCJjb250ZW50IiwibmFtZSIsImtleXMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/scripts/moveToWaitingChildren-7.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/scripts/obliterate-2.js":
/*!**************************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/scripts/obliterate-2.js ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.obliterate = void 0;\nconst content = `--[[\n  Completely obliterates a queue and all of its contents\n  This command completely destroys a queue including all of its jobs, current or past \n  leaving no trace of its existence. Since this script needs to iterate to find all the job\n  keys, consider that this call may be slow for very large queues.\n  The queue needs to be \"paused\" or it will return an error\n  If the queue has currently active jobs then the script by default will return error,\n  however this behaviour can be overrided using the 'force' option.\n  Input:\n    KEYS[1] meta\n    KEYS[2] base\n    ARGV[1] count\n    ARGV[2] force\n]]\nlocal maxCount = tonumber(ARGV[1])\nlocal baseKey = KEYS[2]\nlocal rcall = redis.call\n-- Includes\n--[[\n  Functions to remove jobs.\n]]\n-- Includes\n--[[\n  Function to remove job.\n]]\n-- Includes\n--[[\n  Function to remove deduplication key if needed\n  when a job is being removed.\n]]\nlocal function removeDeduplicationKeyIfNeededOnRemoval(prefixKey,\n  jobKey, jobId)\n  local deduplicationId = rcall(\"HGET\", jobKey, \"deid\")\n  if deduplicationId then\n    local deduplicationKey = prefixKey .. \"de:\" .. deduplicationId\n    local currentJobId = rcall('GET', deduplicationKey)\n    if currentJobId and currentJobId == jobId then\n      return rcall(\"DEL\", deduplicationKey)\n    end\n  end\nend\n--[[\n  Function to remove job keys.\n]]\nlocal function removeJobKeys(jobKey)\n  return rcall(\"DEL\", jobKey, jobKey .. ':logs', jobKey .. ':dependencies',\n    jobKey .. ':processed', jobKey .. ':failed', jobKey .. ':unsuccessful')\nend\n--[[\n  Check if this job has a parent. If so we will just remove it from\n  the parent child list, but if it is the last child we should move the parent to \"wait/paused\"\n  which requires code from \"moveToFinished\"\n]]\n-- Includes\n--[[\n  Function to add job in target list and add marker if needed.\n]]\n-- Includes\n--[[\n  Add marker if needed when a job is available.\n]]\nlocal function addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)\n  if not isPausedOrMaxed then\n    rcall(\"ZADD\", markerKey, 0, \"0\")\n  end  \nend\nlocal function addJobInTargetList(targetKey, markerKey, pushCmd, isPausedOrMaxed, jobId)\n  rcall(pushCmd, targetKey, jobId)\n  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)\nend\n--[[\n  Functions to destructure job key.\n  Just a bit of warning, these functions may be a bit slow and affect performance significantly.\n]]\nlocal getJobIdFromKey = function (jobKey)\n  return string.match(jobKey, \".*:(.*)\")\nend\nlocal getJobKeyPrefix = function (jobKey, jobId)\n  return string.sub(jobKey, 0, #jobKey - #jobId)\nend\n--[[\n  Function to check for the meta.paused key to decide if we are paused or not\n  (since an empty list and !EXISTS are not really the same).\n]]\nlocal function getTargetQueueList(queueMetaKey, activeKey, waitKey, pausedKey)\n  local queueAttributes = rcall(\"HMGET\", queueMetaKey, \"paused\", \"concurrency\", \"max\", \"duration\")\n  if queueAttributes[1] then\n    return pausedKey, true, queueAttributes[3], queueAttributes[4]\n  else\n    if queueAttributes[2] then\n      local activeCount = rcall(\"LLEN\", activeKey)\n      if activeCount >= tonumber(queueAttributes[2]) then\n        return waitKey, true, queueAttributes[3], queueAttributes[4]\n      else\n        return waitKey, false, queueAttributes[3], queueAttributes[4]\n      end\n    end\n  end\n  return waitKey, false, queueAttributes[3], queueAttributes[4]\nend\nlocal function _moveParentToWait(parentPrefix, parentId, emitEvent)\n  local parentTarget, isPausedOrMaxed = getTargetQueueList(parentPrefix .. \"meta\", parentPrefix .. \"active\",\n    parentPrefix .. \"wait\", parentPrefix .. \"paused\")\n  addJobInTargetList(parentTarget, parentPrefix .. \"marker\", \"RPUSH\", isPausedOrMaxed, parentId)\n  if emitEvent then\n    local parentEventStream = parentPrefix .. \"events\"\n    rcall(\"XADD\", parentEventStream, \"*\", \"event\", \"waiting\", \"jobId\", parentId, \"prev\", \"waiting-children\")\n  end\nend\nlocal function removeParentDependencyKey(jobKey, hard, parentKey, baseKey, debounceId)\n  if parentKey then\n    local parentDependenciesKey = parentKey .. \":dependencies\"\n    local result = rcall(\"SREM\", parentDependenciesKey, jobKey)\n    if result > 0 then\n      local pendingDependencies = rcall(\"SCARD\", parentDependenciesKey)\n      if pendingDependencies == 0 then\n        local parentId = getJobIdFromKey(parentKey)\n        local parentPrefix = getJobKeyPrefix(parentKey, parentId)\n        local numRemovedElements = rcall(\"ZREM\", parentPrefix .. \"waiting-children\", parentId)\n        if numRemovedElements == 1 then\n          if hard then -- remove parent in same queue\n            if parentPrefix == baseKey then\n              removeParentDependencyKey(parentKey, hard, nil, baseKey, nil)\n              removeJobKeys(parentKey)\n              if debounceId then\n                rcall(\"DEL\", parentPrefix .. \"de:\" .. debounceId)\n              end\n            else\n              _moveParentToWait(parentPrefix, parentId)\n            end\n          else\n            _moveParentToWait(parentPrefix, parentId, true)\n          end\n        end\n      end\n      return true\n    end\n  else\n    local parentAttributes = rcall(\"HMGET\", jobKey, \"parentKey\", \"deid\")\n    local missedParentKey = parentAttributes[1]\n    if( (type(missedParentKey) == \"string\") and missedParentKey ~= \"\"\n      and (rcall(\"EXISTS\", missedParentKey) == 1)) then\n      local parentDependenciesKey = missedParentKey .. \":dependencies\"\n      local result = rcall(\"SREM\", parentDependenciesKey, jobKey)\n      if result > 0 then\n        local pendingDependencies = rcall(\"SCARD\", parentDependenciesKey)\n        if pendingDependencies == 0 then\n          local parentId = getJobIdFromKey(missedParentKey)\n          local parentPrefix = getJobKeyPrefix(missedParentKey, parentId)\n          local numRemovedElements = rcall(\"ZREM\", parentPrefix .. \"waiting-children\", parentId)\n          if numRemovedElements == 1 then\n            if hard then\n              if parentPrefix == baseKey then\n                removeParentDependencyKey(missedParentKey, hard, nil, baseKey, nil)\n                removeJobKeys(missedParentKey)\n                if parentAttributes[2] then\n                  rcall(\"DEL\", parentPrefix .. \"de:\" .. parentAttributes[2])\n                end\n              else\n                _moveParentToWait(parentPrefix, parentId)\n              end\n            else\n              _moveParentToWait(parentPrefix, parentId, true)\n            end\n          end\n        end\n        return true\n      end\n    end\n  end\n  return false\nend\nlocal function removeJob(jobId, hard, baseKey, shouldRemoveDeduplicationKey)\n  local jobKey = baseKey .. jobId\n  removeParentDependencyKey(jobKey, hard, nil, baseKey)\n  if shouldRemoveDeduplicationKey then\n    removeDeduplicationKeyIfNeededOnRemoval(baseKey, jobKey, jobId)\n  end\n  removeJobKeys(jobKey)\nend\nlocal function removeJobs(keys, hard, baseKey, max)\n  for i, key in ipairs(keys) do\n    removeJob(key, hard, baseKey, true --[[remove debounce key]])\n  end\n  return max - #keys\nend\n--[[\n  Functions to remove jobs.\n]]\n-- Includes\n--[[\n  Function to filter out jobs to ignore from a table.\n]]\nlocal function filterOutJobsToIgnore(jobs, jobsToIgnore)\n  local filteredJobs = {}\n  for i = 1, #jobs do\n    if not jobsToIgnore[jobs[i]] then\n      table.insert(filteredJobs, jobs[i])\n    end\n  end\n  return filteredJobs\nend\nlocal function getListItems(keyName, max)\n  return rcall('LRANGE', keyName, 0, max - 1)\nend\nlocal function removeListJobs(keyName, hard, baseKey, max, jobsToIgnore)\n  local jobs = getListItems(keyName, max)\n  if jobsToIgnore then\n    jobs = filterOutJobsToIgnore(jobs, jobsToIgnore)\n  end\n  local count = removeJobs(jobs, hard, baseKey, max)\n  rcall(\"LTRIM\", keyName, #jobs, -1)\n  return count\nend\n-- Includes\n--[[\n  Function to loop in batches.\n  Just a bit of warning, some commands as ZREM\n  could receive a maximum of 7000 parameters per call.\n]]\nlocal function batches(n, batchSize)\n  local i = 0\n  return function()\n    local from = i * batchSize + 1\n    i = i + 1\n    if (from <= n) then\n      local to = math.min(from + batchSize - 1, n)\n      return from, to\n    end\n  end\nend\n--[[\n  Function to get ZSet items.\n]]\nlocal function getZSetItems(keyName, max)\n  return rcall('ZRANGE', keyName, 0, max - 1)\nend\nlocal function removeZSetJobs(keyName, hard, baseKey, max, jobsToIgnore)\n  local jobs = getZSetItems(keyName, max)\n  if jobsToIgnore then\n    jobs = filterOutJobsToIgnore(jobs, jobsToIgnore)\n  end\n  local count = removeJobs(jobs, hard, baseKey, max)\n  if(#jobs > 0) then\n    for from, to in batches(#jobs, 7000) do\n      rcall(\"ZREM\", keyName, unpack(jobs, from, to))\n    end\n  end\n  return count\nend\nlocal function removeLockKeys(keys)\n  for i, key in ipairs(keys) do\n    rcall(\"DEL\", baseKey .. key .. ':lock')\n  end\nend\n-- 1) Check if paused, if not return with error.\nif rcall(\"HEXISTS\", KEYS[1], \"paused\") ~= 1 then\n  return -1 -- Error, NotPaused\nend\n-- 2) Check if there are active jobs, if there are and not \"force\" return error.\nlocal activeKey = baseKey .. 'active'\nlocal activeJobs = getListItems(activeKey, maxCount)\nif (#activeJobs > 0) then\n  if(ARGV[2] == \"\") then \n    return -2 -- Error, ExistActiveJobs\n  end\nend\nremoveLockKeys(activeJobs)\nmaxCount = removeJobs(activeJobs, true, baseKey, maxCount)\nrcall(\"LTRIM\", activeKey, #activeJobs, -1)\nif(maxCount <= 0) then\n  return 1\nend\nlocal delayedKey = baseKey .. 'delayed'\nmaxCount = removeZSetJobs(delayedKey, true, baseKey, maxCount)\nif(maxCount <= 0) then\n  return 1\nend\nlocal repeatKey = baseKey .. 'repeat'\nlocal repeatJobsIds = getZSetItems(repeatKey, maxCount)\nfor i, key in ipairs(repeatJobsIds) do\n  local jobKey = repeatKey .. \":\" .. key\n  rcall(\"DEL\", jobKey)\nend\nif(#repeatJobsIds > 0) then\n  for from, to in batches(#repeatJobsIds, 7000) do\n    rcall(\"ZREM\", repeatKey, unpack(repeatJobsIds, from, to))\n  end\nend\nmaxCount = maxCount - #repeatJobsIds\nif(maxCount <= 0) then\n  return 1\nend\nlocal completedKey = baseKey .. 'completed'\nmaxCount = removeZSetJobs(completedKey, true, baseKey, maxCount)\nif(maxCount <= 0) then\n  return 1\nend\nlocal waitKey = baseKey .. 'paused'\nmaxCount = removeListJobs(waitKey, true, baseKey, maxCount)\nif(maxCount <= 0) then\n  return 1\nend\nlocal prioritizedKey = baseKey .. 'prioritized'\nmaxCount = removeZSetJobs(prioritizedKey, true, baseKey, maxCount)\nif(maxCount <= 0) then\n  return 1\nend\nlocal failedKey = baseKey .. 'failed'\nmaxCount = removeZSetJobs(failedKey, true, baseKey, maxCount)\nif(maxCount <= 0) then\n  return 1\nend\nif(maxCount > 0) then\n  rcall(\"DEL\",\n    baseKey .. 'events',\n    baseKey .. 'delay', \n    baseKey .. 'stalled-check',\n    baseKey .. 'stalled',\n    baseKey .. 'id',\n    baseKey .. 'pc',\n    baseKey .. 'meta',\n    baseKey .. 'metrics:completed',\n    baseKey .. 'metrics:completed:data',\n    baseKey .. 'metrics:failed',\n    baseKey .. 'metrics:failed:data')\n  return 0\nelse\n  return 1\nend\n`;\nexports.obliterate = {\n    name: \"obliterate\",\n    content,\n    keys: 2\n}; //# sourceMappingURL=obliterate-2.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL3NjcmlwdHMvb2JsaXRlcmF0ZS0yLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCxrQkFBa0IsR0FBRyxLQUFLO0FBQzFCLE1BQU1HLFVBQVUsQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBMFVqQixDQUFDO0FBQ0RILGtCQUFrQixHQUFHO0lBQ2pCSSxNQUFNO0lBQ05EO0lBQ0FFLE1BQU07QUFDVixHQUNBLHdDQUF3QyIsInNvdXJjZXMiOlsid2VicGFjazovL29ubHlmYW5zLXBsYXRmb3JtLy4vbm9kZV9tb2R1bGVzL2J1bGxtcS9kaXN0L2Nqcy9zY3JpcHRzL29ibGl0ZXJhdGUtMi5qcz8xM2RmIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5vYmxpdGVyYXRlID0gdm9pZCAwO1xuY29uc3QgY29udGVudCA9IGAtLVtbXG4gIENvbXBsZXRlbHkgb2JsaXRlcmF0ZXMgYSBxdWV1ZSBhbmQgYWxsIG9mIGl0cyBjb250ZW50c1xuICBUaGlzIGNvbW1hbmQgY29tcGxldGVseSBkZXN0cm95cyBhIHF1ZXVlIGluY2x1ZGluZyBhbGwgb2YgaXRzIGpvYnMsIGN1cnJlbnQgb3IgcGFzdCBcbiAgbGVhdmluZyBubyB0cmFjZSBvZiBpdHMgZXhpc3RlbmNlLiBTaW5jZSB0aGlzIHNjcmlwdCBuZWVkcyB0byBpdGVyYXRlIHRvIGZpbmQgYWxsIHRoZSBqb2JcbiAga2V5cywgY29uc2lkZXIgdGhhdCB0aGlzIGNhbGwgbWF5IGJlIHNsb3cgZm9yIHZlcnkgbGFyZ2UgcXVldWVzLlxuICBUaGUgcXVldWUgbmVlZHMgdG8gYmUgXCJwYXVzZWRcIiBvciBpdCB3aWxsIHJldHVybiBhbiBlcnJvclxuICBJZiB0aGUgcXVldWUgaGFzIGN1cnJlbnRseSBhY3RpdmUgam9icyB0aGVuIHRoZSBzY3JpcHQgYnkgZGVmYXVsdCB3aWxsIHJldHVybiBlcnJvcixcbiAgaG93ZXZlciB0aGlzIGJlaGF2aW91ciBjYW4gYmUgb3ZlcnJpZGVkIHVzaW5nIHRoZSAnZm9yY2UnIG9wdGlvbi5cbiAgSW5wdXQ6XG4gICAgS0VZU1sxXSBtZXRhXG4gICAgS0VZU1syXSBiYXNlXG4gICAgQVJHVlsxXSBjb3VudFxuICAgIEFSR1ZbMl0gZm9yY2Vcbl1dXG5sb2NhbCBtYXhDb3VudCA9IHRvbnVtYmVyKEFSR1ZbMV0pXG5sb2NhbCBiYXNlS2V5ID0gS0VZU1syXVxubG9jYWwgcmNhbGwgPSByZWRpcy5jYWxsXG4tLSBJbmNsdWRlc1xuLS1bW1xuICBGdW5jdGlvbnMgdG8gcmVtb3ZlIGpvYnMuXG5dXVxuLS0gSW5jbHVkZXNcbi0tW1tcbiAgRnVuY3Rpb24gdG8gcmVtb3ZlIGpvYi5cbl1dXG4tLSBJbmNsdWRlc1xuLS1bW1xuICBGdW5jdGlvbiB0byByZW1vdmUgZGVkdXBsaWNhdGlvbiBrZXkgaWYgbmVlZGVkXG4gIHdoZW4gYSBqb2IgaXMgYmVpbmcgcmVtb3ZlZC5cbl1dXG5sb2NhbCBmdW5jdGlvbiByZW1vdmVEZWR1cGxpY2F0aW9uS2V5SWZOZWVkZWRPblJlbW92YWwocHJlZml4S2V5LFxuICBqb2JLZXksIGpvYklkKVxuICBsb2NhbCBkZWR1cGxpY2F0aW9uSWQgPSByY2FsbChcIkhHRVRcIiwgam9iS2V5LCBcImRlaWRcIilcbiAgaWYgZGVkdXBsaWNhdGlvbklkIHRoZW5cbiAgICBsb2NhbCBkZWR1cGxpY2F0aW9uS2V5ID0gcHJlZml4S2V5IC4uIFwiZGU6XCIgLi4gZGVkdXBsaWNhdGlvbklkXG4gICAgbG9jYWwgY3VycmVudEpvYklkID0gcmNhbGwoJ0dFVCcsIGRlZHVwbGljYXRpb25LZXkpXG4gICAgaWYgY3VycmVudEpvYklkIGFuZCBjdXJyZW50Sm9iSWQgPT0gam9iSWQgdGhlblxuICAgICAgcmV0dXJuIHJjYWxsKFwiREVMXCIsIGRlZHVwbGljYXRpb25LZXkpXG4gICAgZW5kXG4gIGVuZFxuZW5kXG4tLVtbXG4gIEZ1bmN0aW9uIHRvIHJlbW92ZSBqb2Iga2V5cy5cbl1dXG5sb2NhbCBmdW5jdGlvbiByZW1vdmVKb2JLZXlzKGpvYktleSlcbiAgcmV0dXJuIHJjYWxsKFwiREVMXCIsIGpvYktleSwgam9iS2V5IC4uICc6bG9ncycsIGpvYktleSAuLiAnOmRlcGVuZGVuY2llcycsXG4gICAgam9iS2V5IC4uICc6cHJvY2Vzc2VkJywgam9iS2V5IC4uICc6ZmFpbGVkJywgam9iS2V5IC4uICc6dW5zdWNjZXNzZnVsJylcbmVuZFxuLS1bW1xuICBDaGVjayBpZiB0aGlzIGpvYiBoYXMgYSBwYXJlbnQuIElmIHNvIHdlIHdpbGwganVzdCByZW1vdmUgaXQgZnJvbVxuICB0aGUgcGFyZW50IGNoaWxkIGxpc3QsIGJ1dCBpZiBpdCBpcyB0aGUgbGFzdCBjaGlsZCB3ZSBzaG91bGQgbW92ZSB0aGUgcGFyZW50IHRvIFwid2FpdC9wYXVzZWRcIlxuICB3aGljaCByZXF1aXJlcyBjb2RlIGZyb20gXCJtb3ZlVG9GaW5pc2hlZFwiXG5dXVxuLS0gSW5jbHVkZXNcbi0tW1tcbiAgRnVuY3Rpb24gdG8gYWRkIGpvYiBpbiB0YXJnZXQgbGlzdCBhbmQgYWRkIG1hcmtlciBpZiBuZWVkZWQuXG5dXVxuLS0gSW5jbHVkZXNcbi0tW1tcbiAgQWRkIG1hcmtlciBpZiBuZWVkZWQgd2hlbiBhIGpvYiBpcyBhdmFpbGFibGUuXG5dXVxubG9jYWwgZnVuY3Rpb24gYWRkQmFzZU1hcmtlcklmTmVlZGVkKG1hcmtlcktleSwgaXNQYXVzZWRPck1heGVkKVxuICBpZiBub3QgaXNQYXVzZWRPck1heGVkIHRoZW5cbiAgICByY2FsbChcIlpBRERcIiwgbWFya2VyS2V5LCAwLCBcIjBcIilcbiAgZW5kICBcbmVuZFxubG9jYWwgZnVuY3Rpb24gYWRkSm9iSW5UYXJnZXRMaXN0KHRhcmdldEtleSwgbWFya2VyS2V5LCBwdXNoQ21kLCBpc1BhdXNlZE9yTWF4ZWQsIGpvYklkKVxuICByY2FsbChwdXNoQ21kLCB0YXJnZXRLZXksIGpvYklkKVxuICBhZGRCYXNlTWFya2VySWZOZWVkZWQobWFya2VyS2V5LCBpc1BhdXNlZE9yTWF4ZWQpXG5lbmRcbi0tW1tcbiAgRnVuY3Rpb25zIHRvIGRlc3RydWN0dXJlIGpvYiBrZXkuXG4gIEp1c3QgYSBiaXQgb2Ygd2FybmluZywgdGhlc2UgZnVuY3Rpb25zIG1heSBiZSBhIGJpdCBzbG93IGFuZCBhZmZlY3QgcGVyZm9ybWFuY2Ugc2lnbmlmaWNhbnRseS5cbl1dXG5sb2NhbCBnZXRKb2JJZEZyb21LZXkgPSBmdW5jdGlvbiAoam9iS2V5KVxuICByZXR1cm4gc3RyaW5nLm1hdGNoKGpvYktleSwgXCIuKjooLiopXCIpXG5lbmRcbmxvY2FsIGdldEpvYktleVByZWZpeCA9IGZ1bmN0aW9uIChqb2JLZXksIGpvYklkKVxuICByZXR1cm4gc3RyaW5nLnN1Yihqb2JLZXksIDAsICNqb2JLZXkgLSAjam9iSWQpXG5lbmRcbi0tW1tcbiAgRnVuY3Rpb24gdG8gY2hlY2sgZm9yIHRoZSBtZXRhLnBhdXNlZCBrZXkgdG8gZGVjaWRlIGlmIHdlIGFyZSBwYXVzZWQgb3Igbm90XG4gIChzaW5jZSBhbiBlbXB0eSBsaXN0IGFuZCAhRVhJU1RTIGFyZSBub3QgcmVhbGx5IHRoZSBzYW1lKS5cbl1dXG5sb2NhbCBmdW5jdGlvbiBnZXRUYXJnZXRRdWV1ZUxpc3QocXVldWVNZXRhS2V5LCBhY3RpdmVLZXksIHdhaXRLZXksIHBhdXNlZEtleSlcbiAgbG9jYWwgcXVldWVBdHRyaWJ1dGVzID0gcmNhbGwoXCJITUdFVFwiLCBxdWV1ZU1ldGFLZXksIFwicGF1c2VkXCIsIFwiY29uY3VycmVuY3lcIiwgXCJtYXhcIiwgXCJkdXJhdGlvblwiKVxuICBpZiBxdWV1ZUF0dHJpYnV0ZXNbMV0gdGhlblxuICAgIHJldHVybiBwYXVzZWRLZXksIHRydWUsIHF1ZXVlQXR0cmlidXRlc1szXSwgcXVldWVBdHRyaWJ1dGVzWzRdXG4gIGVsc2VcbiAgICBpZiBxdWV1ZUF0dHJpYnV0ZXNbMl0gdGhlblxuICAgICAgbG9jYWwgYWN0aXZlQ291bnQgPSByY2FsbChcIkxMRU5cIiwgYWN0aXZlS2V5KVxuICAgICAgaWYgYWN0aXZlQ291bnQgPj0gdG9udW1iZXIocXVldWVBdHRyaWJ1dGVzWzJdKSB0aGVuXG4gICAgICAgIHJldHVybiB3YWl0S2V5LCB0cnVlLCBxdWV1ZUF0dHJpYnV0ZXNbM10sIHF1ZXVlQXR0cmlidXRlc1s0XVxuICAgICAgZWxzZVxuICAgICAgICByZXR1cm4gd2FpdEtleSwgZmFsc2UsIHF1ZXVlQXR0cmlidXRlc1szXSwgcXVldWVBdHRyaWJ1dGVzWzRdXG4gICAgICBlbmRcbiAgICBlbmRcbiAgZW5kXG4gIHJldHVybiB3YWl0S2V5LCBmYWxzZSwgcXVldWVBdHRyaWJ1dGVzWzNdLCBxdWV1ZUF0dHJpYnV0ZXNbNF1cbmVuZFxubG9jYWwgZnVuY3Rpb24gX21vdmVQYXJlbnRUb1dhaXQocGFyZW50UHJlZml4LCBwYXJlbnRJZCwgZW1pdEV2ZW50KVxuICBsb2NhbCBwYXJlbnRUYXJnZXQsIGlzUGF1c2VkT3JNYXhlZCA9IGdldFRhcmdldFF1ZXVlTGlzdChwYXJlbnRQcmVmaXggLi4gXCJtZXRhXCIsIHBhcmVudFByZWZpeCAuLiBcImFjdGl2ZVwiLFxuICAgIHBhcmVudFByZWZpeCAuLiBcIndhaXRcIiwgcGFyZW50UHJlZml4IC4uIFwicGF1c2VkXCIpXG4gIGFkZEpvYkluVGFyZ2V0TGlzdChwYXJlbnRUYXJnZXQsIHBhcmVudFByZWZpeCAuLiBcIm1hcmtlclwiLCBcIlJQVVNIXCIsIGlzUGF1c2VkT3JNYXhlZCwgcGFyZW50SWQpXG4gIGlmIGVtaXRFdmVudCB0aGVuXG4gICAgbG9jYWwgcGFyZW50RXZlbnRTdHJlYW0gPSBwYXJlbnRQcmVmaXggLi4gXCJldmVudHNcIlxuICAgIHJjYWxsKFwiWEFERFwiLCBwYXJlbnRFdmVudFN0cmVhbSwgXCIqXCIsIFwiZXZlbnRcIiwgXCJ3YWl0aW5nXCIsIFwiam9iSWRcIiwgcGFyZW50SWQsIFwicHJldlwiLCBcIndhaXRpbmctY2hpbGRyZW5cIilcbiAgZW5kXG5lbmRcbmxvY2FsIGZ1bmN0aW9uIHJlbW92ZVBhcmVudERlcGVuZGVuY3lLZXkoam9iS2V5LCBoYXJkLCBwYXJlbnRLZXksIGJhc2VLZXksIGRlYm91bmNlSWQpXG4gIGlmIHBhcmVudEtleSB0aGVuXG4gICAgbG9jYWwgcGFyZW50RGVwZW5kZW5jaWVzS2V5ID0gcGFyZW50S2V5IC4uIFwiOmRlcGVuZGVuY2llc1wiXG4gICAgbG9jYWwgcmVzdWx0ID0gcmNhbGwoXCJTUkVNXCIsIHBhcmVudERlcGVuZGVuY2llc0tleSwgam9iS2V5KVxuICAgIGlmIHJlc3VsdCA+IDAgdGhlblxuICAgICAgbG9jYWwgcGVuZGluZ0RlcGVuZGVuY2llcyA9IHJjYWxsKFwiU0NBUkRcIiwgcGFyZW50RGVwZW5kZW5jaWVzS2V5KVxuICAgICAgaWYgcGVuZGluZ0RlcGVuZGVuY2llcyA9PSAwIHRoZW5cbiAgICAgICAgbG9jYWwgcGFyZW50SWQgPSBnZXRKb2JJZEZyb21LZXkocGFyZW50S2V5KVxuICAgICAgICBsb2NhbCBwYXJlbnRQcmVmaXggPSBnZXRKb2JLZXlQcmVmaXgocGFyZW50S2V5LCBwYXJlbnRJZClcbiAgICAgICAgbG9jYWwgbnVtUmVtb3ZlZEVsZW1lbnRzID0gcmNhbGwoXCJaUkVNXCIsIHBhcmVudFByZWZpeCAuLiBcIndhaXRpbmctY2hpbGRyZW5cIiwgcGFyZW50SWQpXG4gICAgICAgIGlmIG51bVJlbW92ZWRFbGVtZW50cyA9PSAxIHRoZW5cbiAgICAgICAgICBpZiBoYXJkIHRoZW4gLS0gcmVtb3ZlIHBhcmVudCBpbiBzYW1lIHF1ZXVlXG4gICAgICAgICAgICBpZiBwYXJlbnRQcmVmaXggPT0gYmFzZUtleSB0aGVuXG4gICAgICAgICAgICAgIHJlbW92ZVBhcmVudERlcGVuZGVuY3lLZXkocGFyZW50S2V5LCBoYXJkLCBuaWwsIGJhc2VLZXksIG5pbClcbiAgICAgICAgICAgICAgcmVtb3ZlSm9iS2V5cyhwYXJlbnRLZXkpXG4gICAgICAgICAgICAgIGlmIGRlYm91bmNlSWQgdGhlblxuICAgICAgICAgICAgICAgIHJjYWxsKFwiREVMXCIsIHBhcmVudFByZWZpeCAuLiBcImRlOlwiIC4uIGRlYm91bmNlSWQpXG4gICAgICAgICAgICAgIGVuZFxuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICBfbW92ZVBhcmVudFRvV2FpdChwYXJlbnRQcmVmaXgsIHBhcmVudElkKVxuICAgICAgICAgICAgZW5kXG4gICAgICAgICAgZWxzZVxuICAgICAgICAgICAgX21vdmVQYXJlbnRUb1dhaXQocGFyZW50UHJlZml4LCBwYXJlbnRJZCwgdHJ1ZSlcbiAgICAgICAgICBlbmRcbiAgICAgICAgZW5kXG4gICAgICBlbmRcbiAgICAgIHJldHVybiB0cnVlXG4gICAgZW5kXG4gIGVsc2VcbiAgICBsb2NhbCBwYXJlbnRBdHRyaWJ1dGVzID0gcmNhbGwoXCJITUdFVFwiLCBqb2JLZXksIFwicGFyZW50S2V5XCIsIFwiZGVpZFwiKVxuICAgIGxvY2FsIG1pc3NlZFBhcmVudEtleSA9IHBhcmVudEF0dHJpYnV0ZXNbMV1cbiAgICBpZiggKHR5cGUobWlzc2VkUGFyZW50S2V5KSA9PSBcInN0cmluZ1wiKSBhbmQgbWlzc2VkUGFyZW50S2V5IH49IFwiXCJcbiAgICAgIGFuZCAocmNhbGwoXCJFWElTVFNcIiwgbWlzc2VkUGFyZW50S2V5KSA9PSAxKSkgdGhlblxuICAgICAgbG9jYWwgcGFyZW50RGVwZW5kZW5jaWVzS2V5ID0gbWlzc2VkUGFyZW50S2V5IC4uIFwiOmRlcGVuZGVuY2llc1wiXG4gICAgICBsb2NhbCByZXN1bHQgPSByY2FsbChcIlNSRU1cIiwgcGFyZW50RGVwZW5kZW5jaWVzS2V5LCBqb2JLZXkpXG4gICAgICBpZiByZXN1bHQgPiAwIHRoZW5cbiAgICAgICAgbG9jYWwgcGVuZGluZ0RlcGVuZGVuY2llcyA9IHJjYWxsKFwiU0NBUkRcIiwgcGFyZW50RGVwZW5kZW5jaWVzS2V5KVxuICAgICAgICBpZiBwZW5kaW5nRGVwZW5kZW5jaWVzID09IDAgdGhlblxuICAgICAgICAgIGxvY2FsIHBhcmVudElkID0gZ2V0Sm9iSWRGcm9tS2V5KG1pc3NlZFBhcmVudEtleSlcbiAgICAgICAgICBsb2NhbCBwYXJlbnRQcmVmaXggPSBnZXRKb2JLZXlQcmVmaXgobWlzc2VkUGFyZW50S2V5LCBwYXJlbnRJZClcbiAgICAgICAgICBsb2NhbCBudW1SZW1vdmVkRWxlbWVudHMgPSByY2FsbChcIlpSRU1cIiwgcGFyZW50UHJlZml4IC4uIFwid2FpdGluZy1jaGlsZHJlblwiLCBwYXJlbnRJZClcbiAgICAgICAgICBpZiBudW1SZW1vdmVkRWxlbWVudHMgPT0gMSB0aGVuXG4gICAgICAgICAgICBpZiBoYXJkIHRoZW5cbiAgICAgICAgICAgICAgaWYgcGFyZW50UHJlZml4ID09IGJhc2VLZXkgdGhlblxuICAgICAgICAgICAgICAgIHJlbW92ZVBhcmVudERlcGVuZGVuY3lLZXkobWlzc2VkUGFyZW50S2V5LCBoYXJkLCBuaWwsIGJhc2VLZXksIG5pbClcbiAgICAgICAgICAgICAgICByZW1vdmVKb2JLZXlzKG1pc3NlZFBhcmVudEtleSlcbiAgICAgICAgICAgICAgICBpZiBwYXJlbnRBdHRyaWJ1dGVzWzJdIHRoZW5cbiAgICAgICAgICAgICAgICAgIHJjYWxsKFwiREVMXCIsIHBhcmVudFByZWZpeCAuLiBcImRlOlwiIC4uIHBhcmVudEF0dHJpYnV0ZXNbMl0pXG4gICAgICAgICAgICAgICAgZW5kXG4gICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBfbW92ZVBhcmVudFRvV2FpdChwYXJlbnRQcmVmaXgsIHBhcmVudElkKVxuICAgICAgICAgICAgICBlbmRcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgX21vdmVQYXJlbnRUb1dhaXQocGFyZW50UHJlZml4LCBwYXJlbnRJZCwgdHJ1ZSlcbiAgICAgICAgICAgIGVuZFxuICAgICAgICAgIGVuZFxuICAgICAgICBlbmRcbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgIGVuZFxuICAgIGVuZFxuICBlbmRcbiAgcmV0dXJuIGZhbHNlXG5lbmRcbmxvY2FsIGZ1bmN0aW9uIHJlbW92ZUpvYihqb2JJZCwgaGFyZCwgYmFzZUtleSwgc2hvdWxkUmVtb3ZlRGVkdXBsaWNhdGlvbktleSlcbiAgbG9jYWwgam9iS2V5ID0gYmFzZUtleSAuLiBqb2JJZFxuICByZW1vdmVQYXJlbnREZXBlbmRlbmN5S2V5KGpvYktleSwgaGFyZCwgbmlsLCBiYXNlS2V5KVxuICBpZiBzaG91bGRSZW1vdmVEZWR1cGxpY2F0aW9uS2V5IHRoZW5cbiAgICByZW1vdmVEZWR1cGxpY2F0aW9uS2V5SWZOZWVkZWRPblJlbW92YWwoYmFzZUtleSwgam9iS2V5LCBqb2JJZClcbiAgZW5kXG4gIHJlbW92ZUpvYktleXMoam9iS2V5KVxuZW5kXG5sb2NhbCBmdW5jdGlvbiByZW1vdmVKb2JzKGtleXMsIGhhcmQsIGJhc2VLZXksIG1heClcbiAgZm9yIGksIGtleSBpbiBpcGFpcnMoa2V5cykgZG9cbiAgICByZW1vdmVKb2Ioa2V5LCBoYXJkLCBiYXNlS2V5LCB0cnVlIC0tW1tyZW1vdmUgZGVib3VuY2Uga2V5XV0pXG4gIGVuZFxuICByZXR1cm4gbWF4IC0gI2tleXNcbmVuZFxuLS1bW1xuICBGdW5jdGlvbnMgdG8gcmVtb3ZlIGpvYnMuXG5dXVxuLS0gSW5jbHVkZXNcbi0tW1tcbiAgRnVuY3Rpb24gdG8gZmlsdGVyIG91dCBqb2JzIHRvIGlnbm9yZSBmcm9tIGEgdGFibGUuXG5dXVxubG9jYWwgZnVuY3Rpb24gZmlsdGVyT3V0Sm9ic1RvSWdub3JlKGpvYnMsIGpvYnNUb0lnbm9yZSlcbiAgbG9jYWwgZmlsdGVyZWRKb2JzID0ge31cbiAgZm9yIGkgPSAxLCAjam9icyBkb1xuICAgIGlmIG5vdCBqb2JzVG9JZ25vcmVbam9ic1tpXV0gdGhlblxuICAgICAgdGFibGUuaW5zZXJ0KGZpbHRlcmVkSm9icywgam9ic1tpXSlcbiAgICBlbmRcbiAgZW5kXG4gIHJldHVybiBmaWx0ZXJlZEpvYnNcbmVuZFxubG9jYWwgZnVuY3Rpb24gZ2V0TGlzdEl0ZW1zKGtleU5hbWUsIG1heClcbiAgcmV0dXJuIHJjYWxsKCdMUkFOR0UnLCBrZXlOYW1lLCAwLCBtYXggLSAxKVxuZW5kXG5sb2NhbCBmdW5jdGlvbiByZW1vdmVMaXN0Sm9icyhrZXlOYW1lLCBoYXJkLCBiYXNlS2V5LCBtYXgsIGpvYnNUb0lnbm9yZSlcbiAgbG9jYWwgam9icyA9IGdldExpc3RJdGVtcyhrZXlOYW1lLCBtYXgpXG4gIGlmIGpvYnNUb0lnbm9yZSB0aGVuXG4gICAgam9icyA9IGZpbHRlck91dEpvYnNUb0lnbm9yZShqb2JzLCBqb2JzVG9JZ25vcmUpXG4gIGVuZFxuICBsb2NhbCBjb3VudCA9IHJlbW92ZUpvYnMoam9icywgaGFyZCwgYmFzZUtleSwgbWF4KVxuICByY2FsbChcIkxUUklNXCIsIGtleU5hbWUsICNqb2JzLCAtMSlcbiAgcmV0dXJuIGNvdW50XG5lbmRcbi0tIEluY2x1ZGVzXG4tLVtbXG4gIEZ1bmN0aW9uIHRvIGxvb3AgaW4gYmF0Y2hlcy5cbiAgSnVzdCBhIGJpdCBvZiB3YXJuaW5nLCBzb21lIGNvbW1hbmRzIGFzIFpSRU1cbiAgY291bGQgcmVjZWl2ZSBhIG1heGltdW0gb2YgNzAwMCBwYXJhbWV0ZXJzIHBlciBjYWxsLlxuXV1cbmxvY2FsIGZ1bmN0aW9uIGJhdGNoZXMobiwgYmF0Y2hTaXplKVxuICBsb2NhbCBpID0gMFxuICByZXR1cm4gZnVuY3Rpb24oKVxuICAgIGxvY2FsIGZyb20gPSBpICogYmF0Y2hTaXplICsgMVxuICAgIGkgPSBpICsgMVxuICAgIGlmIChmcm9tIDw9IG4pIHRoZW5cbiAgICAgIGxvY2FsIHRvID0gbWF0aC5taW4oZnJvbSArIGJhdGNoU2l6ZSAtIDEsIG4pXG4gICAgICByZXR1cm4gZnJvbSwgdG9cbiAgICBlbmRcbiAgZW5kXG5lbmRcbi0tW1tcbiAgRnVuY3Rpb24gdG8gZ2V0IFpTZXQgaXRlbXMuXG5dXVxubG9jYWwgZnVuY3Rpb24gZ2V0WlNldEl0ZW1zKGtleU5hbWUsIG1heClcbiAgcmV0dXJuIHJjYWxsKCdaUkFOR0UnLCBrZXlOYW1lLCAwLCBtYXggLSAxKVxuZW5kXG5sb2NhbCBmdW5jdGlvbiByZW1vdmVaU2V0Sm9icyhrZXlOYW1lLCBoYXJkLCBiYXNlS2V5LCBtYXgsIGpvYnNUb0lnbm9yZSlcbiAgbG9jYWwgam9icyA9IGdldFpTZXRJdGVtcyhrZXlOYW1lLCBtYXgpXG4gIGlmIGpvYnNUb0lnbm9yZSB0aGVuXG4gICAgam9icyA9IGZpbHRlck91dEpvYnNUb0lnbm9yZShqb2JzLCBqb2JzVG9JZ25vcmUpXG4gIGVuZFxuICBsb2NhbCBjb3VudCA9IHJlbW92ZUpvYnMoam9icywgaGFyZCwgYmFzZUtleSwgbWF4KVxuICBpZigjam9icyA+IDApIHRoZW5cbiAgICBmb3IgZnJvbSwgdG8gaW4gYmF0Y2hlcygjam9icywgNzAwMCkgZG9cbiAgICAgIHJjYWxsKFwiWlJFTVwiLCBrZXlOYW1lLCB1bnBhY2soam9icywgZnJvbSwgdG8pKVxuICAgIGVuZFxuICBlbmRcbiAgcmV0dXJuIGNvdW50XG5lbmRcbmxvY2FsIGZ1bmN0aW9uIHJlbW92ZUxvY2tLZXlzKGtleXMpXG4gIGZvciBpLCBrZXkgaW4gaXBhaXJzKGtleXMpIGRvXG4gICAgcmNhbGwoXCJERUxcIiwgYmFzZUtleSAuLiBrZXkgLi4gJzpsb2NrJylcbiAgZW5kXG5lbmRcbi0tIDEpIENoZWNrIGlmIHBhdXNlZCwgaWYgbm90IHJldHVybiB3aXRoIGVycm9yLlxuaWYgcmNhbGwoXCJIRVhJU1RTXCIsIEtFWVNbMV0sIFwicGF1c2VkXCIpIH49IDEgdGhlblxuICByZXR1cm4gLTEgLS0gRXJyb3IsIE5vdFBhdXNlZFxuZW5kXG4tLSAyKSBDaGVjayBpZiB0aGVyZSBhcmUgYWN0aXZlIGpvYnMsIGlmIHRoZXJlIGFyZSBhbmQgbm90IFwiZm9yY2VcIiByZXR1cm4gZXJyb3IuXG5sb2NhbCBhY3RpdmVLZXkgPSBiYXNlS2V5IC4uICdhY3RpdmUnXG5sb2NhbCBhY3RpdmVKb2JzID0gZ2V0TGlzdEl0ZW1zKGFjdGl2ZUtleSwgbWF4Q291bnQpXG5pZiAoI2FjdGl2ZUpvYnMgPiAwKSB0aGVuXG4gIGlmKEFSR1ZbMl0gPT0gXCJcIikgdGhlbiBcbiAgICByZXR1cm4gLTIgLS0gRXJyb3IsIEV4aXN0QWN0aXZlSm9ic1xuICBlbmRcbmVuZFxucmVtb3ZlTG9ja0tleXMoYWN0aXZlSm9icylcbm1heENvdW50ID0gcmVtb3ZlSm9icyhhY3RpdmVKb2JzLCB0cnVlLCBiYXNlS2V5LCBtYXhDb3VudClcbnJjYWxsKFwiTFRSSU1cIiwgYWN0aXZlS2V5LCAjYWN0aXZlSm9icywgLTEpXG5pZihtYXhDb3VudCA8PSAwKSB0aGVuXG4gIHJldHVybiAxXG5lbmRcbmxvY2FsIGRlbGF5ZWRLZXkgPSBiYXNlS2V5IC4uICdkZWxheWVkJ1xubWF4Q291bnQgPSByZW1vdmVaU2V0Sm9icyhkZWxheWVkS2V5LCB0cnVlLCBiYXNlS2V5LCBtYXhDb3VudClcbmlmKG1heENvdW50IDw9IDApIHRoZW5cbiAgcmV0dXJuIDFcbmVuZFxubG9jYWwgcmVwZWF0S2V5ID0gYmFzZUtleSAuLiAncmVwZWF0J1xubG9jYWwgcmVwZWF0Sm9ic0lkcyA9IGdldFpTZXRJdGVtcyhyZXBlYXRLZXksIG1heENvdW50KVxuZm9yIGksIGtleSBpbiBpcGFpcnMocmVwZWF0Sm9ic0lkcykgZG9cbiAgbG9jYWwgam9iS2V5ID0gcmVwZWF0S2V5IC4uIFwiOlwiIC4uIGtleVxuICByY2FsbChcIkRFTFwiLCBqb2JLZXkpXG5lbmRcbmlmKCNyZXBlYXRKb2JzSWRzID4gMCkgdGhlblxuICBmb3IgZnJvbSwgdG8gaW4gYmF0Y2hlcygjcmVwZWF0Sm9ic0lkcywgNzAwMCkgZG9cbiAgICByY2FsbChcIlpSRU1cIiwgcmVwZWF0S2V5LCB1bnBhY2socmVwZWF0Sm9ic0lkcywgZnJvbSwgdG8pKVxuICBlbmRcbmVuZFxubWF4Q291bnQgPSBtYXhDb3VudCAtICNyZXBlYXRKb2JzSWRzXG5pZihtYXhDb3VudCA8PSAwKSB0aGVuXG4gIHJldHVybiAxXG5lbmRcbmxvY2FsIGNvbXBsZXRlZEtleSA9IGJhc2VLZXkgLi4gJ2NvbXBsZXRlZCdcbm1heENvdW50ID0gcmVtb3ZlWlNldEpvYnMoY29tcGxldGVkS2V5LCB0cnVlLCBiYXNlS2V5LCBtYXhDb3VudClcbmlmKG1heENvdW50IDw9IDApIHRoZW5cbiAgcmV0dXJuIDFcbmVuZFxubG9jYWwgd2FpdEtleSA9IGJhc2VLZXkgLi4gJ3BhdXNlZCdcbm1heENvdW50ID0gcmVtb3ZlTGlzdEpvYnMod2FpdEtleSwgdHJ1ZSwgYmFzZUtleSwgbWF4Q291bnQpXG5pZihtYXhDb3VudCA8PSAwKSB0aGVuXG4gIHJldHVybiAxXG5lbmRcbmxvY2FsIHByaW9yaXRpemVkS2V5ID0gYmFzZUtleSAuLiAncHJpb3JpdGl6ZWQnXG5tYXhDb3VudCA9IHJlbW92ZVpTZXRKb2JzKHByaW9yaXRpemVkS2V5LCB0cnVlLCBiYXNlS2V5LCBtYXhDb3VudClcbmlmKG1heENvdW50IDw9IDApIHRoZW5cbiAgcmV0dXJuIDFcbmVuZFxubG9jYWwgZmFpbGVkS2V5ID0gYmFzZUtleSAuLiAnZmFpbGVkJ1xubWF4Q291bnQgPSByZW1vdmVaU2V0Sm9icyhmYWlsZWRLZXksIHRydWUsIGJhc2VLZXksIG1heENvdW50KVxuaWYobWF4Q291bnQgPD0gMCkgdGhlblxuICByZXR1cm4gMVxuZW5kXG5pZihtYXhDb3VudCA+IDApIHRoZW5cbiAgcmNhbGwoXCJERUxcIixcbiAgICBiYXNlS2V5IC4uICdldmVudHMnLFxuICAgIGJhc2VLZXkgLi4gJ2RlbGF5JywgXG4gICAgYmFzZUtleSAuLiAnc3RhbGxlZC1jaGVjaycsXG4gICAgYmFzZUtleSAuLiAnc3RhbGxlZCcsXG4gICAgYmFzZUtleSAuLiAnaWQnLFxuICAgIGJhc2VLZXkgLi4gJ3BjJyxcbiAgICBiYXNlS2V5IC4uICdtZXRhJyxcbiAgICBiYXNlS2V5IC4uICdtZXRyaWNzOmNvbXBsZXRlZCcsXG4gICAgYmFzZUtleSAuLiAnbWV0cmljczpjb21wbGV0ZWQ6ZGF0YScsXG4gICAgYmFzZUtleSAuLiAnbWV0cmljczpmYWlsZWQnLFxuICAgIGJhc2VLZXkgLi4gJ21ldHJpY3M6ZmFpbGVkOmRhdGEnKVxuICByZXR1cm4gMFxuZWxzZVxuICByZXR1cm4gMVxuZW5kXG5gO1xuZXhwb3J0cy5vYmxpdGVyYXRlID0ge1xuICAgIG5hbWU6ICdvYmxpdGVyYXRlJyxcbiAgICBjb250ZW50LFxuICAgIGtleXM6IDIsXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9b2JsaXRlcmF0ZS0yLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsIm9ibGl0ZXJhdGUiLCJjb250ZW50IiwibmFtZSIsImtleXMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/scripts/obliterate-2.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/scripts/paginate-1.js":
/*!************************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/scripts/paginate-1.js ***!
  \************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.paginate = void 0;\nconst content = `--[[\n    Paginate a set or hash\n    Input:\n      KEYS[1] key pointing to the set or hash to be paginated.\n      ARGV[1]  page start offset\n      ARGV[2]  page end offset (-1 for all the elements)\n      ARGV[3]  cursor\n      ARGV[4]  offset\n      ARGV[5]  max iterations\n      ARGV[6]  fetch jobs?\n    Output:\n      [cursor, offset, items, numItems]\n]]\nlocal rcall = redis.call\n-- Includes\n--[[\n  Function to achieve pagination for a set or hash.\n  This function simulates pagination in the most efficient way possible\n  for a set using sscan or hscan.\n  The main limitation is that sets are not order preserving, so the\n  pagination is not stable. This means that if the set is modified\n  between pages, the same element may appear in different pages.\n]] -- Maximum number of elements to be returned by sscan per iteration.\nlocal maxCount = 100\n-- Finds the cursor, and returns the first elements available for the requested page.\nlocal function findPage(key, command, pageStart, pageSize, cursor, offset,\n                        maxIterations, fetchJobs)\n    local items = {}\n    local jobs = {}\n    local iterations = 0\n    repeat\n        -- Iterate over the set using sscan/hscan.\n        local result = rcall(command, key, cursor, \"COUNT\", maxCount)\n        cursor = result[1]\n        local members = result[2]\n        local step = 1\n        if command == \"HSCAN\" then\n            step = 2\n        end\n        if #members == 0 then\n            -- If the result is empty, we can return the result.\n            return cursor, offset, items, jobs\n        end\n        local chunkStart = offset\n        local chunkEnd = offset + #members / step\n        local pageEnd = pageStart + pageSize\n        if chunkEnd < pageStart then\n            -- If the chunk is before the page, we can skip it.\n            offset = chunkEnd\n        elseif chunkStart > pageEnd then\n            -- If the chunk is after the page, we can return the result.\n            return cursor, offset, items, jobs\n        else\n            -- If the chunk is overlapping the page, we need to add the elements to the result.\n            for i = 1, #members, step do\n                if offset >= pageEnd then\n                    return cursor, offset, items, jobs\n                end\n                if offset >= pageStart then\n                    local index = #items + 1\n                    if fetchJobs ~= nil then\n                        jobs[#jobs+1] = rcall(\"HGETALL\", members[i])\n                    end\n                    if step == 2 then\n                        items[index] = {members[i], members[i + 1]}\n                    else\n                        items[index] = members[i]\n                    end\n                end\n                offset = offset + 1\n            end\n        end\n        iterations = iterations + 1\n    until cursor == \"0\" or iterations >= maxIterations\n    return cursor, offset, items, jobs\nend\nlocal key = KEYS[1]\nlocal scanCommand = \"SSCAN\"\nlocal countCommand = \"SCARD\"\nlocal type = rcall(\"TYPE\", key)[\"ok\"]\nif type == \"none\" then\n    return {0, 0, {}, 0}\nelseif type == \"hash\" then\n    scanCommand = \"HSCAN\"\n    countCommand = \"HLEN\"\nelseif type ~= \"set\" then\n    return\n        redis.error_reply(\"Pagination is only supported for sets and hashes.\")\nend\nlocal numItems = rcall(countCommand, key)\nlocal startOffset = tonumber(ARGV[1])\nlocal endOffset = tonumber(ARGV[2])\nif endOffset == -1 then \n  endOffset = numItems\nend\nlocal pageSize = (endOffset - startOffset) + 1\nlocal cursor, offset, items, jobs = findPage(key, scanCommand, startOffset,\n                                       pageSize, ARGV[3], tonumber(ARGV[4]),\n                                       tonumber(ARGV[5]), ARGV[6])\nreturn {cursor, offset, items, numItems, jobs}\n`;\nexports.paginate = {\n    name: \"paginate\",\n    content,\n    keys: 1\n}; //# sourceMappingURL=paginate-1.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL3NjcmlwdHMvcGFnaW5hdGUtMS5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsZ0JBQWdCLEdBQUcsS0FBSztBQUN4QixNQUFNRyxVQUFVLENBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFvR2pCLENBQUM7QUFDREgsZ0JBQWdCLEdBQUc7SUFDZkksTUFBTTtJQUNORDtJQUNBRSxNQUFNO0FBQ1YsR0FDQSxzQ0FBc0MiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vbmx5ZmFucy1wbGF0Zm9ybS8uL25vZGVfbW9kdWxlcy9idWxsbXEvZGlzdC9janMvc2NyaXB0cy9wYWdpbmF0ZS0xLmpzP2JmOGUiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLnBhZ2luYXRlID0gdm9pZCAwO1xuY29uc3QgY29udGVudCA9IGAtLVtbXG4gICAgUGFnaW5hdGUgYSBzZXQgb3IgaGFzaFxuICAgIElucHV0OlxuICAgICAgS0VZU1sxXSBrZXkgcG9pbnRpbmcgdG8gdGhlIHNldCBvciBoYXNoIHRvIGJlIHBhZ2luYXRlZC5cbiAgICAgIEFSR1ZbMV0gIHBhZ2Ugc3RhcnQgb2Zmc2V0XG4gICAgICBBUkdWWzJdICBwYWdlIGVuZCBvZmZzZXQgKC0xIGZvciBhbGwgdGhlIGVsZW1lbnRzKVxuICAgICAgQVJHVlszXSAgY3Vyc29yXG4gICAgICBBUkdWWzRdICBvZmZzZXRcbiAgICAgIEFSR1ZbNV0gIG1heCBpdGVyYXRpb25zXG4gICAgICBBUkdWWzZdICBmZXRjaCBqb2JzP1xuICAgIE91dHB1dDpcbiAgICAgIFtjdXJzb3IsIG9mZnNldCwgaXRlbXMsIG51bUl0ZW1zXVxuXV1cbmxvY2FsIHJjYWxsID0gcmVkaXMuY2FsbFxuLS0gSW5jbHVkZXNcbi0tW1tcbiAgRnVuY3Rpb24gdG8gYWNoaWV2ZSBwYWdpbmF0aW9uIGZvciBhIHNldCBvciBoYXNoLlxuICBUaGlzIGZ1bmN0aW9uIHNpbXVsYXRlcyBwYWdpbmF0aW9uIGluIHRoZSBtb3N0IGVmZmljaWVudCB3YXkgcG9zc2libGVcbiAgZm9yIGEgc2V0IHVzaW5nIHNzY2FuIG9yIGhzY2FuLlxuICBUaGUgbWFpbiBsaW1pdGF0aW9uIGlzIHRoYXQgc2V0cyBhcmUgbm90IG9yZGVyIHByZXNlcnZpbmcsIHNvIHRoZVxuICBwYWdpbmF0aW9uIGlzIG5vdCBzdGFibGUuIFRoaXMgbWVhbnMgdGhhdCBpZiB0aGUgc2V0IGlzIG1vZGlmaWVkXG4gIGJldHdlZW4gcGFnZXMsIHRoZSBzYW1lIGVsZW1lbnQgbWF5IGFwcGVhciBpbiBkaWZmZXJlbnQgcGFnZXMuXG5dXSAtLSBNYXhpbXVtIG51bWJlciBvZiBlbGVtZW50cyB0byBiZSByZXR1cm5lZCBieSBzc2NhbiBwZXIgaXRlcmF0aW9uLlxubG9jYWwgbWF4Q291bnQgPSAxMDBcbi0tIEZpbmRzIHRoZSBjdXJzb3IsIGFuZCByZXR1cm5zIHRoZSBmaXJzdCBlbGVtZW50cyBhdmFpbGFibGUgZm9yIHRoZSByZXF1ZXN0ZWQgcGFnZS5cbmxvY2FsIGZ1bmN0aW9uIGZpbmRQYWdlKGtleSwgY29tbWFuZCwgcGFnZVN0YXJ0LCBwYWdlU2l6ZSwgY3Vyc29yLCBvZmZzZXQsXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXhJdGVyYXRpb25zLCBmZXRjaEpvYnMpXG4gICAgbG9jYWwgaXRlbXMgPSB7fVxuICAgIGxvY2FsIGpvYnMgPSB7fVxuICAgIGxvY2FsIGl0ZXJhdGlvbnMgPSAwXG4gICAgcmVwZWF0XG4gICAgICAgIC0tIEl0ZXJhdGUgb3ZlciB0aGUgc2V0IHVzaW5nIHNzY2FuL2hzY2FuLlxuICAgICAgICBsb2NhbCByZXN1bHQgPSByY2FsbChjb21tYW5kLCBrZXksIGN1cnNvciwgXCJDT1VOVFwiLCBtYXhDb3VudClcbiAgICAgICAgY3Vyc29yID0gcmVzdWx0WzFdXG4gICAgICAgIGxvY2FsIG1lbWJlcnMgPSByZXN1bHRbMl1cbiAgICAgICAgbG9jYWwgc3RlcCA9IDFcbiAgICAgICAgaWYgY29tbWFuZCA9PSBcIkhTQ0FOXCIgdGhlblxuICAgICAgICAgICAgc3RlcCA9IDJcbiAgICAgICAgZW5kXG4gICAgICAgIGlmICNtZW1iZXJzID09IDAgdGhlblxuICAgICAgICAgICAgLS0gSWYgdGhlIHJlc3VsdCBpcyBlbXB0eSwgd2UgY2FuIHJldHVybiB0aGUgcmVzdWx0LlxuICAgICAgICAgICAgcmV0dXJuIGN1cnNvciwgb2Zmc2V0LCBpdGVtcywgam9ic1xuICAgICAgICBlbmRcbiAgICAgICAgbG9jYWwgY2h1bmtTdGFydCA9IG9mZnNldFxuICAgICAgICBsb2NhbCBjaHVua0VuZCA9IG9mZnNldCArICNtZW1iZXJzIC8gc3RlcFxuICAgICAgICBsb2NhbCBwYWdlRW5kID0gcGFnZVN0YXJ0ICsgcGFnZVNpemVcbiAgICAgICAgaWYgY2h1bmtFbmQgPCBwYWdlU3RhcnQgdGhlblxuICAgICAgICAgICAgLS0gSWYgdGhlIGNodW5rIGlzIGJlZm9yZSB0aGUgcGFnZSwgd2UgY2FuIHNraXAgaXQuXG4gICAgICAgICAgICBvZmZzZXQgPSBjaHVua0VuZFxuICAgICAgICBlbHNlaWYgY2h1bmtTdGFydCA+IHBhZ2VFbmQgdGhlblxuICAgICAgICAgICAgLS0gSWYgdGhlIGNodW5rIGlzIGFmdGVyIHRoZSBwYWdlLCB3ZSBjYW4gcmV0dXJuIHRoZSByZXN1bHQuXG4gICAgICAgICAgICByZXR1cm4gY3Vyc29yLCBvZmZzZXQsIGl0ZW1zLCBqb2JzXG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIC0tIElmIHRoZSBjaHVuayBpcyBvdmVybGFwcGluZyB0aGUgcGFnZSwgd2UgbmVlZCB0byBhZGQgdGhlIGVsZW1lbnRzIHRvIHRoZSByZXN1bHQuXG4gICAgICAgICAgICBmb3IgaSA9IDEsICNtZW1iZXJzLCBzdGVwIGRvXG4gICAgICAgICAgICAgICAgaWYgb2Zmc2V0ID49IHBhZ2VFbmQgdGhlblxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY3Vyc29yLCBvZmZzZXQsIGl0ZW1zLCBqb2JzXG4gICAgICAgICAgICAgICAgZW5kXG4gICAgICAgICAgICAgICAgaWYgb2Zmc2V0ID49IHBhZ2VTdGFydCB0aGVuXG4gICAgICAgICAgICAgICAgICAgIGxvY2FsIGluZGV4ID0gI2l0ZW1zICsgMVxuICAgICAgICAgICAgICAgICAgICBpZiBmZXRjaEpvYnMgfj0gbmlsIHRoZW5cbiAgICAgICAgICAgICAgICAgICAgICAgIGpvYnNbI2pvYnMrMV0gPSByY2FsbChcIkhHRVRBTExcIiwgbWVtYmVyc1tpXSlcbiAgICAgICAgICAgICAgICAgICAgZW5kXG4gICAgICAgICAgICAgICAgICAgIGlmIHN0ZXAgPT0gMiB0aGVuXG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtc1tpbmRleF0gPSB7bWVtYmVyc1tpXSwgbWVtYmVyc1tpICsgMV19XG4gICAgICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1zW2luZGV4XSA9IG1lbWJlcnNbaV1cbiAgICAgICAgICAgICAgICAgICAgZW5kXG4gICAgICAgICAgICAgICAgZW5kXG4gICAgICAgICAgICAgICAgb2Zmc2V0ID0gb2Zmc2V0ICsgMVxuICAgICAgICAgICAgZW5kXG4gICAgICAgIGVuZFxuICAgICAgICBpdGVyYXRpb25zID0gaXRlcmF0aW9ucyArIDFcbiAgICB1bnRpbCBjdXJzb3IgPT0gXCIwXCIgb3IgaXRlcmF0aW9ucyA+PSBtYXhJdGVyYXRpb25zXG4gICAgcmV0dXJuIGN1cnNvciwgb2Zmc2V0LCBpdGVtcywgam9ic1xuZW5kXG5sb2NhbCBrZXkgPSBLRVlTWzFdXG5sb2NhbCBzY2FuQ29tbWFuZCA9IFwiU1NDQU5cIlxubG9jYWwgY291bnRDb21tYW5kID0gXCJTQ0FSRFwiXG5sb2NhbCB0eXBlID0gcmNhbGwoXCJUWVBFXCIsIGtleSlbXCJva1wiXVxuaWYgdHlwZSA9PSBcIm5vbmVcIiB0aGVuXG4gICAgcmV0dXJuIHswLCAwLCB7fSwgMH1cbmVsc2VpZiB0eXBlID09IFwiaGFzaFwiIHRoZW5cbiAgICBzY2FuQ29tbWFuZCA9IFwiSFNDQU5cIlxuICAgIGNvdW50Q29tbWFuZCA9IFwiSExFTlwiXG5lbHNlaWYgdHlwZSB+PSBcInNldFwiIHRoZW5cbiAgICByZXR1cm5cbiAgICAgICAgcmVkaXMuZXJyb3JfcmVwbHkoXCJQYWdpbmF0aW9uIGlzIG9ubHkgc3VwcG9ydGVkIGZvciBzZXRzIGFuZCBoYXNoZXMuXCIpXG5lbmRcbmxvY2FsIG51bUl0ZW1zID0gcmNhbGwoY291bnRDb21tYW5kLCBrZXkpXG5sb2NhbCBzdGFydE9mZnNldCA9IHRvbnVtYmVyKEFSR1ZbMV0pXG5sb2NhbCBlbmRPZmZzZXQgPSB0b251bWJlcihBUkdWWzJdKVxuaWYgZW5kT2Zmc2V0ID09IC0xIHRoZW4gXG4gIGVuZE9mZnNldCA9IG51bUl0ZW1zXG5lbmRcbmxvY2FsIHBhZ2VTaXplID0gKGVuZE9mZnNldCAtIHN0YXJ0T2Zmc2V0KSArIDFcbmxvY2FsIGN1cnNvciwgb2Zmc2V0LCBpdGVtcywgam9icyA9IGZpbmRQYWdlKGtleSwgc2NhbkNvbW1hbmQsIHN0YXJ0T2Zmc2V0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFnZVNpemUsIEFSR1ZbM10sIHRvbnVtYmVyKEFSR1ZbNF0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9udW1iZXIoQVJHVls1XSksIEFSR1ZbNl0pXG5yZXR1cm4ge2N1cnNvciwgb2Zmc2V0LCBpdGVtcywgbnVtSXRlbXMsIGpvYnN9XG5gO1xuZXhwb3J0cy5wYWdpbmF0ZSA9IHtcbiAgICBuYW1lOiAncGFnaW5hdGUnLFxuICAgIGNvbnRlbnQsXG4gICAga2V5czogMSxcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYWdpbmF0ZS0xLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsInBhZ2luYXRlIiwiY29udGVudCIsIm5hbWUiLCJrZXlzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/scripts/paginate-1.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/scripts/pause-7.js":
/*!*********************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/scripts/pause-7.js ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.pause = void 0;\nconst content = `--[[\n  Pauses or resumes a queue globably.\n  Input:\n    KEYS[1] 'wait' or 'paused''\n    KEYS[2] 'paused' or 'wait'\n    KEYS[3] 'meta'\n    KEYS[4] 'prioritized'\n    KEYS[5] events stream key\n    KEYS[6] 'delayed'\n    KEYS|7] 'marker'\n    ARGV[1] 'paused' or 'resumed'\n  Event:\n    publish paused or resumed event.\n]]\nlocal rcall = redis.call\n-- Includes\n--[[\n  Add delay marker if needed.\n]]\n-- Includes\n--[[\n  Function to return the next delayed job timestamp.\n]]\nlocal function getNextDelayedTimestamp(delayedKey)\n  local result = rcall(\"ZRANGE\", delayedKey, 0, 0, \"WITHSCORES\")\n  if #result then\n    local nextTimestamp = tonumber(result[2])\n    if nextTimestamp ~= nil then\n      return nextTimestamp / 0x1000\n    end\n  end\nend\nlocal function addDelayMarkerIfNeeded(markerKey, delayedKey)\n  local nextTimestamp = getNextDelayedTimestamp(delayedKey)\n  if nextTimestamp ~= nil then\n    -- Replace the score of the marker with the newest known\n    -- next timestamp.\n    rcall(\"ZADD\", markerKey, nextTimestamp, \"1\")\n  end\nend\nlocal markerKey = KEYS[7]\nlocal hasJobs = rcall(\"EXISTS\", KEYS[1]) == 1\n--TODO: check this logic to be reused when changing a delay\nif hasJobs then rcall(\"RENAME\", KEYS[1], KEYS[2]) end\nif ARGV[1] == \"paused\" then\n    rcall(\"HSET\", KEYS[3], \"paused\", 1)\n    rcall(\"DEL\", markerKey)\nelse\n    rcall(\"HDEL\", KEYS[3], \"paused\")\n    if hasJobs or rcall(\"ZCARD\", KEYS[4]) > 0 then\n        -- Add marker if there are waiting or priority jobs\n        rcall(\"ZADD\", markerKey, 0, \"0\")\n    else\n        addDelayMarkerIfNeeded(markerKey, KEYS[6])\n    end\nend\nrcall(\"XADD\", KEYS[5], \"*\", \"event\", ARGV[1]);\n`;\nexports.pause = {\n    name: \"pause\",\n    content,\n    keys: 7\n}; //# sourceMappingURL=pause-7.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL3NjcmlwdHMvcGF1c2UtNy5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsYUFBYSxHQUFHLEtBQUs7QUFDckIsTUFBTUcsVUFBVSxDQUFDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUF5RGpCLENBQUM7QUFDREgsYUFBYSxHQUFHO0lBQ1pJLE1BQU07SUFDTkQ7SUFDQUUsTUFBTTtBQUNWLEdBQ0EsbUNBQW1DIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb25seWZhbnMtcGxhdGZvcm0vLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL3NjcmlwdHMvcGF1c2UtNy5qcz9lYWFjIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5wYXVzZSA9IHZvaWQgMDtcbmNvbnN0IGNvbnRlbnQgPSBgLS1bW1xuICBQYXVzZXMgb3IgcmVzdW1lcyBhIHF1ZXVlIGdsb2JhYmx5LlxuICBJbnB1dDpcbiAgICBLRVlTWzFdICd3YWl0JyBvciAncGF1c2VkJydcbiAgICBLRVlTWzJdICdwYXVzZWQnIG9yICd3YWl0J1xuICAgIEtFWVNbM10gJ21ldGEnXG4gICAgS0VZU1s0XSAncHJpb3JpdGl6ZWQnXG4gICAgS0VZU1s1XSBldmVudHMgc3RyZWFtIGtleVxuICAgIEtFWVNbNl0gJ2RlbGF5ZWQnXG4gICAgS0VZU3w3XSAnbWFya2VyJ1xuICAgIEFSR1ZbMV0gJ3BhdXNlZCcgb3IgJ3Jlc3VtZWQnXG4gIEV2ZW50OlxuICAgIHB1Ymxpc2ggcGF1c2VkIG9yIHJlc3VtZWQgZXZlbnQuXG5dXVxubG9jYWwgcmNhbGwgPSByZWRpcy5jYWxsXG4tLSBJbmNsdWRlc1xuLS1bW1xuICBBZGQgZGVsYXkgbWFya2VyIGlmIG5lZWRlZC5cbl1dXG4tLSBJbmNsdWRlc1xuLS1bW1xuICBGdW5jdGlvbiB0byByZXR1cm4gdGhlIG5leHQgZGVsYXllZCBqb2IgdGltZXN0YW1wLlxuXV1cbmxvY2FsIGZ1bmN0aW9uIGdldE5leHREZWxheWVkVGltZXN0YW1wKGRlbGF5ZWRLZXkpXG4gIGxvY2FsIHJlc3VsdCA9IHJjYWxsKFwiWlJBTkdFXCIsIGRlbGF5ZWRLZXksIDAsIDAsIFwiV0lUSFNDT1JFU1wiKVxuICBpZiAjcmVzdWx0IHRoZW5cbiAgICBsb2NhbCBuZXh0VGltZXN0YW1wID0gdG9udW1iZXIocmVzdWx0WzJdKVxuICAgIGlmIG5leHRUaW1lc3RhbXAgfj0gbmlsIHRoZW5cbiAgICAgIHJldHVybiBuZXh0VGltZXN0YW1wIC8gMHgxMDAwXG4gICAgZW5kXG4gIGVuZFxuZW5kXG5sb2NhbCBmdW5jdGlvbiBhZGREZWxheU1hcmtlcklmTmVlZGVkKG1hcmtlcktleSwgZGVsYXllZEtleSlcbiAgbG9jYWwgbmV4dFRpbWVzdGFtcCA9IGdldE5leHREZWxheWVkVGltZXN0YW1wKGRlbGF5ZWRLZXkpXG4gIGlmIG5leHRUaW1lc3RhbXAgfj0gbmlsIHRoZW5cbiAgICAtLSBSZXBsYWNlIHRoZSBzY29yZSBvZiB0aGUgbWFya2VyIHdpdGggdGhlIG5ld2VzdCBrbm93blxuICAgIC0tIG5leHQgdGltZXN0YW1wLlxuICAgIHJjYWxsKFwiWkFERFwiLCBtYXJrZXJLZXksIG5leHRUaW1lc3RhbXAsIFwiMVwiKVxuICBlbmRcbmVuZFxubG9jYWwgbWFya2VyS2V5ID0gS0VZU1s3XVxubG9jYWwgaGFzSm9icyA9IHJjYWxsKFwiRVhJU1RTXCIsIEtFWVNbMV0pID09IDFcbi0tVE9ETzogY2hlY2sgdGhpcyBsb2dpYyB0byBiZSByZXVzZWQgd2hlbiBjaGFuZ2luZyBhIGRlbGF5XG5pZiBoYXNKb2JzIHRoZW4gcmNhbGwoXCJSRU5BTUVcIiwgS0VZU1sxXSwgS0VZU1syXSkgZW5kXG5pZiBBUkdWWzFdID09IFwicGF1c2VkXCIgdGhlblxuICAgIHJjYWxsKFwiSFNFVFwiLCBLRVlTWzNdLCBcInBhdXNlZFwiLCAxKVxuICAgIHJjYWxsKFwiREVMXCIsIG1hcmtlcktleSlcbmVsc2VcbiAgICByY2FsbChcIkhERUxcIiwgS0VZU1szXSwgXCJwYXVzZWRcIilcbiAgICBpZiBoYXNKb2JzIG9yIHJjYWxsKFwiWkNBUkRcIiwgS0VZU1s0XSkgPiAwIHRoZW5cbiAgICAgICAgLS0gQWRkIG1hcmtlciBpZiB0aGVyZSBhcmUgd2FpdGluZyBvciBwcmlvcml0eSBqb2JzXG4gICAgICAgIHJjYWxsKFwiWkFERFwiLCBtYXJrZXJLZXksIDAsIFwiMFwiKVxuICAgIGVsc2VcbiAgICAgICAgYWRkRGVsYXlNYXJrZXJJZk5lZWRlZChtYXJrZXJLZXksIEtFWVNbNl0pXG4gICAgZW5kXG5lbmRcbnJjYWxsKFwiWEFERFwiLCBLRVlTWzVdLCBcIipcIiwgXCJldmVudFwiLCBBUkdWWzFdKTtcbmA7XG5leHBvcnRzLnBhdXNlID0ge1xuICAgIG5hbWU6ICdwYXVzZScsXG4gICAgY29udGVudCxcbiAgICBrZXlzOiA3LFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhdXNlLTcuanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwicGF1c2UiLCJjb250ZW50IiwibmFtZSIsImtleXMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/scripts/pause-7.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/scripts/promote-9.js":
/*!***********************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/scripts/promote-9.js ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.promote = void 0;\nconst content = `--[[\n  Promotes a job that is currently \"delayed\" to the \"waiting\" state\n    Input:\n      KEYS[1] 'delayed'\n      KEYS[2] 'wait'\n      KEYS[3] 'paused'\n      KEYS[4] 'meta'\n      KEYS[5] 'prioritized'\n      KEYS[6] 'active'\n      KEYS[7] 'pc' priority counter\n      KEYS[8] 'event stream'\n      KEYS[9] 'marker'\n      ARGV[1]  queue.toKey('')\n      ARGV[2]  jobId\n    Output:\n       0 - OK\n      -3 - Job not in delayed zset.\n    Events:\n      'waiting'\n]]\nlocal rcall = redis.call\nlocal jobId = ARGV[2]\n-- Includes\n--[[\n  Function to add job in target list and add marker if needed.\n]]\n-- Includes\n--[[\n  Add marker if needed when a job is available.\n]]\nlocal function addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)\n  if not isPausedOrMaxed then\n    rcall(\"ZADD\", markerKey, 0, \"0\")\n  end  \nend\nlocal function addJobInTargetList(targetKey, markerKey, pushCmd, isPausedOrMaxed, jobId)\n  rcall(pushCmd, targetKey, jobId)\n  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)\nend\n--[[\n  Function to add job considering priority.\n]]\n-- Includes\n--[[\n  Function to get priority score.\n]]\nlocal function getPriorityScore(priority, priorityCounterKey)\n  local prioCounter = rcall(\"INCR\", priorityCounterKey)\n  return priority * 0x100000000 + prioCounter % 0x100000000\nend\nlocal function addJobWithPriority(markerKey, prioritizedKey, priority, jobId, priorityCounterKey,\n  isPausedOrMaxed)\n  local score = getPriorityScore(priority, priorityCounterKey)\n  rcall(\"ZADD\", prioritizedKey, score, jobId)\n  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)\nend\n--[[\n  Function to check for the meta.paused key to decide if we are paused or not\n  (since an empty list and !EXISTS are not really the same).\n]]\nlocal function getTargetQueueList(queueMetaKey, activeKey, waitKey, pausedKey)\n  local queueAttributes = rcall(\"HMGET\", queueMetaKey, \"paused\", \"concurrency\", \"max\", \"duration\")\n  if queueAttributes[1] then\n    return pausedKey, true, queueAttributes[3], queueAttributes[4]\n  else\n    if queueAttributes[2] then\n      local activeCount = rcall(\"LLEN\", activeKey)\n      if activeCount >= tonumber(queueAttributes[2]) then\n        return waitKey, true, queueAttributes[3], queueAttributes[4]\n      else\n        return waitKey, false, queueAttributes[3], queueAttributes[4]\n      end\n    end\n  end\n  return waitKey, false, queueAttributes[3], queueAttributes[4]\nend\nif rcall(\"ZREM\", KEYS[1], jobId) == 1 then\n    local jobKey = ARGV[1] .. jobId\n    local priority = tonumber(rcall(\"HGET\", jobKey, \"priority\")) or 0\n    local metaKey = KEYS[4]\n    local markerKey = KEYS[9]\n    -- Remove delayed \"marker\" from the wait list if there is any.\n    -- Since we are adding a job we do not need the marker anymore.\n    -- Markers in waitlist DEPRECATED in v5: Remove in v6.\n    local target, isPausedOrMaxed = getTargetQueueList(metaKey, KEYS[6], KEYS[2], KEYS[3])\n    local marker = rcall(\"LINDEX\", target, 0)\n    if marker and string.sub(marker, 1, 2) == \"0:\" then rcall(\"LPOP\", target) end\n    if priority == 0 then\n        -- LIFO or FIFO\n        addJobInTargetList(target, markerKey, \"LPUSH\", isPausedOrMaxed, jobId)\n    else\n        addJobWithPriority(markerKey, KEYS[5], priority, jobId, KEYS[7], isPausedOrMaxed)\n    end\n    rcall(\"XADD\", KEYS[8], \"*\", \"event\", \"waiting\", \"jobId\", jobId, \"prev\",\n          \"delayed\");\n    rcall(\"HSET\", jobKey, \"delay\", 0)\n    return 0\nelse\n    return -3\nend\n`;\nexports.promote = {\n    name: \"promote\",\n    content,\n    keys: 9\n}; //# sourceMappingURL=promote-9.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL3NjcmlwdHMvcHJvbW90ZS05LmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCxlQUFlLEdBQUcsS0FBSztBQUN2QixNQUFNRyxVQUFVLENBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFvR2pCLENBQUM7QUFDREgsZUFBZSxHQUFHO0lBQ2RJLE1BQU07SUFDTkQ7SUFDQUUsTUFBTTtBQUNWLEdBQ0EscUNBQXFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb25seWZhbnMtcGxhdGZvcm0vLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL3NjcmlwdHMvcHJvbW90ZS05LmpzPzFjZTciXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLnByb21vdGUgPSB2b2lkIDA7XG5jb25zdCBjb250ZW50ID0gYC0tW1tcbiAgUHJvbW90ZXMgYSBqb2IgdGhhdCBpcyBjdXJyZW50bHkgXCJkZWxheWVkXCIgdG8gdGhlIFwid2FpdGluZ1wiIHN0YXRlXG4gICAgSW5wdXQ6XG4gICAgICBLRVlTWzFdICdkZWxheWVkJ1xuICAgICAgS0VZU1syXSAnd2FpdCdcbiAgICAgIEtFWVNbM10gJ3BhdXNlZCdcbiAgICAgIEtFWVNbNF0gJ21ldGEnXG4gICAgICBLRVlTWzVdICdwcmlvcml0aXplZCdcbiAgICAgIEtFWVNbNl0gJ2FjdGl2ZSdcbiAgICAgIEtFWVNbN10gJ3BjJyBwcmlvcml0eSBjb3VudGVyXG4gICAgICBLRVlTWzhdICdldmVudCBzdHJlYW0nXG4gICAgICBLRVlTWzldICdtYXJrZXInXG4gICAgICBBUkdWWzFdICBxdWV1ZS50b0tleSgnJylcbiAgICAgIEFSR1ZbMl0gIGpvYklkXG4gICAgT3V0cHV0OlxuICAgICAgIDAgLSBPS1xuICAgICAgLTMgLSBKb2Igbm90IGluIGRlbGF5ZWQgenNldC5cbiAgICBFdmVudHM6XG4gICAgICAnd2FpdGluZydcbl1dXG5sb2NhbCByY2FsbCA9IHJlZGlzLmNhbGxcbmxvY2FsIGpvYklkID0gQVJHVlsyXVxuLS0gSW5jbHVkZXNcbi0tW1tcbiAgRnVuY3Rpb24gdG8gYWRkIGpvYiBpbiB0YXJnZXQgbGlzdCBhbmQgYWRkIG1hcmtlciBpZiBuZWVkZWQuXG5dXVxuLS0gSW5jbHVkZXNcbi0tW1tcbiAgQWRkIG1hcmtlciBpZiBuZWVkZWQgd2hlbiBhIGpvYiBpcyBhdmFpbGFibGUuXG5dXVxubG9jYWwgZnVuY3Rpb24gYWRkQmFzZU1hcmtlcklmTmVlZGVkKG1hcmtlcktleSwgaXNQYXVzZWRPck1heGVkKVxuICBpZiBub3QgaXNQYXVzZWRPck1heGVkIHRoZW5cbiAgICByY2FsbChcIlpBRERcIiwgbWFya2VyS2V5LCAwLCBcIjBcIilcbiAgZW5kICBcbmVuZFxubG9jYWwgZnVuY3Rpb24gYWRkSm9iSW5UYXJnZXRMaXN0KHRhcmdldEtleSwgbWFya2VyS2V5LCBwdXNoQ21kLCBpc1BhdXNlZE9yTWF4ZWQsIGpvYklkKVxuICByY2FsbChwdXNoQ21kLCB0YXJnZXRLZXksIGpvYklkKVxuICBhZGRCYXNlTWFya2VySWZOZWVkZWQobWFya2VyS2V5LCBpc1BhdXNlZE9yTWF4ZWQpXG5lbmRcbi0tW1tcbiAgRnVuY3Rpb24gdG8gYWRkIGpvYiBjb25zaWRlcmluZyBwcmlvcml0eS5cbl1dXG4tLSBJbmNsdWRlc1xuLS1bW1xuICBGdW5jdGlvbiB0byBnZXQgcHJpb3JpdHkgc2NvcmUuXG5dXVxubG9jYWwgZnVuY3Rpb24gZ2V0UHJpb3JpdHlTY29yZShwcmlvcml0eSwgcHJpb3JpdHlDb3VudGVyS2V5KVxuICBsb2NhbCBwcmlvQ291bnRlciA9IHJjYWxsKFwiSU5DUlwiLCBwcmlvcml0eUNvdW50ZXJLZXkpXG4gIHJldHVybiBwcmlvcml0eSAqIDB4MTAwMDAwMDAwICsgcHJpb0NvdW50ZXIgJSAweDEwMDAwMDAwMFxuZW5kXG5sb2NhbCBmdW5jdGlvbiBhZGRKb2JXaXRoUHJpb3JpdHkobWFya2VyS2V5LCBwcmlvcml0aXplZEtleSwgcHJpb3JpdHksIGpvYklkLCBwcmlvcml0eUNvdW50ZXJLZXksXG4gIGlzUGF1c2VkT3JNYXhlZClcbiAgbG9jYWwgc2NvcmUgPSBnZXRQcmlvcml0eVNjb3JlKHByaW9yaXR5LCBwcmlvcml0eUNvdW50ZXJLZXkpXG4gIHJjYWxsKFwiWkFERFwiLCBwcmlvcml0aXplZEtleSwgc2NvcmUsIGpvYklkKVxuICBhZGRCYXNlTWFya2VySWZOZWVkZWQobWFya2VyS2V5LCBpc1BhdXNlZE9yTWF4ZWQpXG5lbmRcbi0tW1tcbiAgRnVuY3Rpb24gdG8gY2hlY2sgZm9yIHRoZSBtZXRhLnBhdXNlZCBrZXkgdG8gZGVjaWRlIGlmIHdlIGFyZSBwYXVzZWQgb3Igbm90XG4gIChzaW5jZSBhbiBlbXB0eSBsaXN0IGFuZCAhRVhJU1RTIGFyZSBub3QgcmVhbGx5IHRoZSBzYW1lKS5cbl1dXG5sb2NhbCBmdW5jdGlvbiBnZXRUYXJnZXRRdWV1ZUxpc3QocXVldWVNZXRhS2V5LCBhY3RpdmVLZXksIHdhaXRLZXksIHBhdXNlZEtleSlcbiAgbG9jYWwgcXVldWVBdHRyaWJ1dGVzID0gcmNhbGwoXCJITUdFVFwiLCBxdWV1ZU1ldGFLZXksIFwicGF1c2VkXCIsIFwiY29uY3VycmVuY3lcIiwgXCJtYXhcIiwgXCJkdXJhdGlvblwiKVxuICBpZiBxdWV1ZUF0dHJpYnV0ZXNbMV0gdGhlblxuICAgIHJldHVybiBwYXVzZWRLZXksIHRydWUsIHF1ZXVlQXR0cmlidXRlc1szXSwgcXVldWVBdHRyaWJ1dGVzWzRdXG4gIGVsc2VcbiAgICBpZiBxdWV1ZUF0dHJpYnV0ZXNbMl0gdGhlblxuICAgICAgbG9jYWwgYWN0aXZlQ291bnQgPSByY2FsbChcIkxMRU5cIiwgYWN0aXZlS2V5KVxuICAgICAgaWYgYWN0aXZlQ291bnQgPj0gdG9udW1iZXIocXVldWVBdHRyaWJ1dGVzWzJdKSB0aGVuXG4gICAgICAgIHJldHVybiB3YWl0S2V5LCB0cnVlLCBxdWV1ZUF0dHJpYnV0ZXNbM10sIHF1ZXVlQXR0cmlidXRlc1s0XVxuICAgICAgZWxzZVxuICAgICAgICByZXR1cm4gd2FpdEtleSwgZmFsc2UsIHF1ZXVlQXR0cmlidXRlc1szXSwgcXVldWVBdHRyaWJ1dGVzWzRdXG4gICAgICBlbmRcbiAgICBlbmRcbiAgZW5kXG4gIHJldHVybiB3YWl0S2V5LCBmYWxzZSwgcXVldWVBdHRyaWJ1dGVzWzNdLCBxdWV1ZUF0dHJpYnV0ZXNbNF1cbmVuZFxuaWYgcmNhbGwoXCJaUkVNXCIsIEtFWVNbMV0sIGpvYklkKSA9PSAxIHRoZW5cbiAgICBsb2NhbCBqb2JLZXkgPSBBUkdWWzFdIC4uIGpvYklkXG4gICAgbG9jYWwgcHJpb3JpdHkgPSB0b251bWJlcihyY2FsbChcIkhHRVRcIiwgam9iS2V5LCBcInByaW9yaXR5XCIpKSBvciAwXG4gICAgbG9jYWwgbWV0YUtleSA9IEtFWVNbNF1cbiAgICBsb2NhbCBtYXJrZXJLZXkgPSBLRVlTWzldXG4gICAgLS0gUmVtb3ZlIGRlbGF5ZWQgXCJtYXJrZXJcIiBmcm9tIHRoZSB3YWl0IGxpc3QgaWYgdGhlcmUgaXMgYW55LlxuICAgIC0tIFNpbmNlIHdlIGFyZSBhZGRpbmcgYSBqb2Igd2UgZG8gbm90IG5lZWQgdGhlIG1hcmtlciBhbnltb3JlLlxuICAgIC0tIE1hcmtlcnMgaW4gd2FpdGxpc3QgREVQUkVDQVRFRCBpbiB2NTogUmVtb3ZlIGluIHY2LlxuICAgIGxvY2FsIHRhcmdldCwgaXNQYXVzZWRPck1heGVkID0gZ2V0VGFyZ2V0UXVldWVMaXN0KG1ldGFLZXksIEtFWVNbNl0sIEtFWVNbMl0sIEtFWVNbM10pXG4gICAgbG9jYWwgbWFya2VyID0gcmNhbGwoXCJMSU5ERVhcIiwgdGFyZ2V0LCAwKVxuICAgIGlmIG1hcmtlciBhbmQgc3RyaW5nLnN1YihtYXJrZXIsIDEsIDIpID09IFwiMDpcIiB0aGVuIHJjYWxsKFwiTFBPUFwiLCB0YXJnZXQpIGVuZFxuICAgIGlmIHByaW9yaXR5ID09IDAgdGhlblxuICAgICAgICAtLSBMSUZPIG9yIEZJRk9cbiAgICAgICAgYWRkSm9iSW5UYXJnZXRMaXN0KHRhcmdldCwgbWFya2VyS2V5LCBcIkxQVVNIXCIsIGlzUGF1c2VkT3JNYXhlZCwgam9iSWQpXG4gICAgZWxzZVxuICAgICAgICBhZGRKb2JXaXRoUHJpb3JpdHkobWFya2VyS2V5LCBLRVlTWzVdLCBwcmlvcml0eSwgam9iSWQsIEtFWVNbN10sIGlzUGF1c2VkT3JNYXhlZClcbiAgICBlbmRcbiAgICByY2FsbChcIlhBRERcIiwgS0VZU1s4XSwgXCIqXCIsIFwiZXZlbnRcIiwgXCJ3YWl0aW5nXCIsIFwiam9iSWRcIiwgam9iSWQsIFwicHJldlwiLFxuICAgICAgICAgIFwiZGVsYXllZFwiKTtcbiAgICByY2FsbChcIkhTRVRcIiwgam9iS2V5LCBcImRlbGF5XCIsIDApXG4gICAgcmV0dXJuIDBcbmVsc2VcbiAgICByZXR1cm4gLTNcbmVuZFxuYDtcbmV4cG9ydHMucHJvbW90ZSA9IHtcbiAgICBuYW1lOiAncHJvbW90ZScsXG4gICAgY29udGVudCxcbiAgICBrZXlzOiA5LFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXByb21vdGUtOS5qcy5tYXAiXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJwcm9tb3RlIiwiY29udGVudCIsIm5hbWUiLCJrZXlzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/scripts/promote-9.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/scripts/releaseLock-1.js":
/*!***************************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/scripts/releaseLock-1.js ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.releaseLock = void 0;\nconst content = `--[[\n  Release lock\n    Input:\n      KEYS[1] 'lock',\n      ARGV[1]  token\n      ARGV[2]  lock duration in milliseconds\n    Output:\n      \"OK\" if lock extented succesfully.\n]]\nlocal rcall = redis.call\nif rcall(\"GET\", KEYS[1]) == ARGV[1] then\n  return rcall(\"DEL\", KEYS[1])\nelse\n  return 0\nend\n`;\nexports.releaseLock = {\n    name: \"releaseLock\",\n    content,\n    keys: 1\n}; //# sourceMappingURL=releaseLock-1.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL3NjcmlwdHMvcmVsZWFzZUxvY2stMS5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsbUJBQW1CLEdBQUcsS0FBSztBQUMzQixNQUFNRyxVQUFVLENBQUM7Ozs7Ozs7Ozs7Ozs7OztBQWVqQixDQUFDO0FBQ0RILG1CQUFtQixHQUFHO0lBQ2xCSSxNQUFNO0lBQ05EO0lBQ0FFLE1BQU07QUFDVixHQUNBLHlDQUF5QyIsInNvdXJjZXMiOlsid2VicGFjazovL29ubHlmYW5zLXBsYXRmb3JtLy4vbm9kZV9tb2R1bGVzL2J1bGxtcS9kaXN0L2Nqcy9zY3JpcHRzL3JlbGVhc2VMb2NrLTEuanM/ODE0OCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMucmVsZWFzZUxvY2sgPSB2b2lkIDA7XG5jb25zdCBjb250ZW50ID0gYC0tW1tcbiAgUmVsZWFzZSBsb2NrXG4gICAgSW5wdXQ6XG4gICAgICBLRVlTWzFdICdsb2NrJyxcbiAgICAgIEFSR1ZbMV0gIHRva2VuXG4gICAgICBBUkdWWzJdICBsb2NrIGR1cmF0aW9uIGluIG1pbGxpc2Vjb25kc1xuICAgIE91dHB1dDpcbiAgICAgIFwiT0tcIiBpZiBsb2NrIGV4dGVudGVkIHN1Y2Nlc2Z1bGx5LlxuXV1cbmxvY2FsIHJjYWxsID0gcmVkaXMuY2FsbFxuaWYgcmNhbGwoXCJHRVRcIiwgS0VZU1sxXSkgPT0gQVJHVlsxXSB0aGVuXG4gIHJldHVybiByY2FsbChcIkRFTFwiLCBLRVlTWzFdKVxuZWxzZVxuICByZXR1cm4gMFxuZW5kXG5gO1xuZXhwb3J0cy5yZWxlYXNlTG9jayA9IHtcbiAgICBuYW1lOiAncmVsZWFzZUxvY2snLFxuICAgIGNvbnRlbnQsXG4gICAga2V5czogMSxcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1yZWxlYXNlTG9jay0xLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsInJlbGVhc2VMb2NrIiwiY29udGVudCIsIm5hbWUiLCJrZXlzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/scripts/releaseLock-1.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/scripts/removeChildDependency-1.js":
/*!*************************************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/scripts/removeChildDependency-1.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.removeChildDependency = void 0;\nconst content = `--[[\n  Break parent-child dependency by removing\n  child reference from parent\n  Input:\n    KEYS[1] 'key' prefix,\n    ARGV[1] job key\n    ARGV[2] parent key\n    Output:\n       0  - OK\n       1  - There is not relationship.\n      -1  - Missing job key\n      -5  - Missing parent key\n]]\nlocal rcall = redis.call\nlocal jobKey = ARGV[1]\nlocal parentKey = ARGV[2]\n-- Includes\n--[[\n  Check if this job has a parent. If so we will just remove it from\n  the parent child list, but if it is the last child we should move the parent to \"wait/paused\"\n  which requires code from \"moveToFinished\"\n]]\n-- Includes\n--[[\n  Function to add job in target list and add marker if needed.\n]]\n-- Includes\n--[[\n  Add marker if needed when a job is available.\n]]\nlocal function addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)\n  if not isPausedOrMaxed then\n    rcall(\"ZADD\", markerKey, 0, \"0\")\n  end  \nend\nlocal function addJobInTargetList(targetKey, markerKey, pushCmd, isPausedOrMaxed, jobId)\n  rcall(pushCmd, targetKey, jobId)\n  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)\nend\n--[[\n  Functions to destructure job key.\n  Just a bit of warning, these functions may be a bit slow and affect performance significantly.\n]]\nlocal getJobIdFromKey = function (jobKey)\n  return string.match(jobKey, \".*:(.*)\")\nend\nlocal getJobKeyPrefix = function (jobKey, jobId)\n  return string.sub(jobKey, 0, #jobKey - #jobId)\nend\n--[[\n  Function to check for the meta.paused key to decide if we are paused or not\n  (since an empty list and !EXISTS are not really the same).\n]]\nlocal function getTargetQueueList(queueMetaKey, activeKey, waitKey, pausedKey)\n  local queueAttributes = rcall(\"HMGET\", queueMetaKey, \"paused\", \"concurrency\", \"max\", \"duration\")\n  if queueAttributes[1] then\n    return pausedKey, true, queueAttributes[3], queueAttributes[4]\n  else\n    if queueAttributes[2] then\n      local activeCount = rcall(\"LLEN\", activeKey)\n      if activeCount >= tonumber(queueAttributes[2]) then\n        return waitKey, true, queueAttributes[3], queueAttributes[4]\n      else\n        return waitKey, false, queueAttributes[3], queueAttributes[4]\n      end\n    end\n  end\n  return waitKey, false, queueAttributes[3], queueAttributes[4]\nend\n--[[\n  Function to remove job keys.\n]]\nlocal function removeJobKeys(jobKey)\n  return rcall(\"DEL\", jobKey, jobKey .. ':logs', jobKey .. ':dependencies',\n    jobKey .. ':processed', jobKey .. ':failed', jobKey .. ':unsuccessful')\nend\nlocal function _moveParentToWait(parentPrefix, parentId, emitEvent)\n  local parentTarget, isPausedOrMaxed = getTargetQueueList(parentPrefix .. \"meta\", parentPrefix .. \"active\",\n    parentPrefix .. \"wait\", parentPrefix .. \"paused\")\n  addJobInTargetList(parentTarget, parentPrefix .. \"marker\", \"RPUSH\", isPausedOrMaxed, parentId)\n  if emitEvent then\n    local parentEventStream = parentPrefix .. \"events\"\n    rcall(\"XADD\", parentEventStream, \"*\", \"event\", \"waiting\", \"jobId\", parentId, \"prev\", \"waiting-children\")\n  end\nend\nlocal function removeParentDependencyKey(jobKey, hard, parentKey, baseKey, debounceId)\n  if parentKey then\n    local parentDependenciesKey = parentKey .. \":dependencies\"\n    local result = rcall(\"SREM\", parentDependenciesKey, jobKey)\n    if result > 0 then\n      local pendingDependencies = rcall(\"SCARD\", parentDependenciesKey)\n      if pendingDependencies == 0 then\n        local parentId = getJobIdFromKey(parentKey)\n        local parentPrefix = getJobKeyPrefix(parentKey, parentId)\n        local numRemovedElements = rcall(\"ZREM\", parentPrefix .. \"waiting-children\", parentId)\n        if numRemovedElements == 1 then\n          if hard then -- remove parent in same queue\n            if parentPrefix == baseKey then\n              removeParentDependencyKey(parentKey, hard, nil, baseKey, nil)\n              removeJobKeys(parentKey)\n              if debounceId then\n                rcall(\"DEL\", parentPrefix .. \"de:\" .. debounceId)\n              end\n            else\n              _moveParentToWait(parentPrefix, parentId)\n            end\n          else\n            _moveParentToWait(parentPrefix, parentId, true)\n          end\n        end\n      end\n      return true\n    end\n  else\n    local parentAttributes = rcall(\"HMGET\", jobKey, \"parentKey\", \"deid\")\n    local missedParentKey = parentAttributes[1]\n    if( (type(missedParentKey) == \"string\") and missedParentKey ~= \"\"\n      and (rcall(\"EXISTS\", missedParentKey) == 1)) then\n      local parentDependenciesKey = missedParentKey .. \":dependencies\"\n      local result = rcall(\"SREM\", parentDependenciesKey, jobKey)\n      if result > 0 then\n        local pendingDependencies = rcall(\"SCARD\", parentDependenciesKey)\n        if pendingDependencies == 0 then\n          local parentId = getJobIdFromKey(missedParentKey)\n          local parentPrefix = getJobKeyPrefix(missedParentKey, parentId)\n          local numRemovedElements = rcall(\"ZREM\", parentPrefix .. \"waiting-children\", parentId)\n          if numRemovedElements == 1 then\n            if hard then\n              if parentPrefix == baseKey then\n                removeParentDependencyKey(missedParentKey, hard, nil, baseKey, nil)\n                removeJobKeys(missedParentKey)\n                if parentAttributes[2] then\n                  rcall(\"DEL\", parentPrefix .. \"de:\" .. parentAttributes[2])\n                end\n              else\n                _moveParentToWait(parentPrefix, parentId)\n              end\n            else\n              _moveParentToWait(parentPrefix, parentId, true)\n            end\n          end\n        end\n        return true\n      end\n    end\n  end\n  return false\nend\nif rcall(\"EXISTS\", jobKey) ~= 1 then return -1 end\nif rcall(\"EXISTS\", parentKey) ~= 1 then return -5 end\nif removeParentDependencyKey(jobKey, false, parentKey, KEYS[1], nil) then\n  rcall(\"HDEL\", jobKey, \"parentKey\", \"parent\")\n  return 0\nelse\n  return 1\nend`;\nexports.removeChildDependency = {\n    name: \"removeChildDependency\",\n    content,\n    keys: 1\n}; //# sourceMappingURL=removeChildDependency-1.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL3NjcmlwdHMvcmVtb3ZlQ2hpbGREZXBlbmRlbmN5LTEuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELDZCQUE2QixHQUFHLEtBQUs7QUFDckMsTUFBTUcsVUFBVSxDQUFDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztHQTJKZCxDQUFDO0FBQ0pILDZCQUE2QixHQUFHO0lBQzVCSSxNQUFNO0lBQ05EO0lBQ0FFLE1BQU07QUFDVixHQUNBLG1EQUFtRCIsInNvdXJjZXMiOlsid2VicGFjazovL29ubHlmYW5zLXBsYXRmb3JtLy4vbm9kZV9tb2R1bGVzL2J1bGxtcS9kaXN0L2Nqcy9zY3JpcHRzL3JlbW92ZUNoaWxkRGVwZW5kZW5jeS0xLmpzP2U2Y2IiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLnJlbW92ZUNoaWxkRGVwZW5kZW5jeSA9IHZvaWQgMDtcbmNvbnN0IGNvbnRlbnQgPSBgLS1bW1xuICBCcmVhayBwYXJlbnQtY2hpbGQgZGVwZW5kZW5jeSBieSByZW1vdmluZ1xuICBjaGlsZCByZWZlcmVuY2UgZnJvbSBwYXJlbnRcbiAgSW5wdXQ6XG4gICAgS0VZU1sxXSAna2V5JyBwcmVmaXgsXG4gICAgQVJHVlsxXSBqb2Iga2V5XG4gICAgQVJHVlsyXSBwYXJlbnQga2V5XG4gICAgT3V0cHV0OlxuICAgICAgIDAgIC0gT0tcbiAgICAgICAxICAtIFRoZXJlIGlzIG5vdCByZWxhdGlvbnNoaXAuXG4gICAgICAtMSAgLSBNaXNzaW5nIGpvYiBrZXlcbiAgICAgIC01ICAtIE1pc3NpbmcgcGFyZW50IGtleVxuXV1cbmxvY2FsIHJjYWxsID0gcmVkaXMuY2FsbFxubG9jYWwgam9iS2V5ID0gQVJHVlsxXVxubG9jYWwgcGFyZW50S2V5ID0gQVJHVlsyXVxuLS0gSW5jbHVkZXNcbi0tW1tcbiAgQ2hlY2sgaWYgdGhpcyBqb2IgaGFzIGEgcGFyZW50LiBJZiBzbyB3ZSB3aWxsIGp1c3QgcmVtb3ZlIGl0IGZyb21cbiAgdGhlIHBhcmVudCBjaGlsZCBsaXN0LCBidXQgaWYgaXQgaXMgdGhlIGxhc3QgY2hpbGQgd2Ugc2hvdWxkIG1vdmUgdGhlIHBhcmVudCB0byBcIndhaXQvcGF1c2VkXCJcbiAgd2hpY2ggcmVxdWlyZXMgY29kZSBmcm9tIFwibW92ZVRvRmluaXNoZWRcIlxuXV1cbi0tIEluY2x1ZGVzXG4tLVtbXG4gIEZ1bmN0aW9uIHRvIGFkZCBqb2IgaW4gdGFyZ2V0IGxpc3QgYW5kIGFkZCBtYXJrZXIgaWYgbmVlZGVkLlxuXV1cbi0tIEluY2x1ZGVzXG4tLVtbXG4gIEFkZCBtYXJrZXIgaWYgbmVlZGVkIHdoZW4gYSBqb2IgaXMgYXZhaWxhYmxlLlxuXV1cbmxvY2FsIGZ1bmN0aW9uIGFkZEJhc2VNYXJrZXJJZk5lZWRlZChtYXJrZXJLZXksIGlzUGF1c2VkT3JNYXhlZClcbiAgaWYgbm90IGlzUGF1c2VkT3JNYXhlZCB0aGVuXG4gICAgcmNhbGwoXCJaQUREXCIsIG1hcmtlcktleSwgMCwgXCIwXCIpXG4gIGVuZCAgXG5lbmRcbmxvY2FsIGZ1bmN0aW9uIGFkZEpvYkluVGFyZ2V0TGlzdCh0YXJnZXRLZXksIG1hcmtlcktleSwgcHVzaENtZCwgaXNQYXVzZWRPck1heGVkLCBqb2JJZClcbiAgcmNhbGwocHVzaENtZCwgdGFyZ2V0S2V5LCBqb2JJZClcbiAgYWRkQmFzZU1hcmtlcklmTmVlZGVkKG1hcmtlcktleSwgaXNQYXVzZWRPck1heGVkKVxuZW5kXG4tLVtbXG4gIEZ1bmN0aW9ucyB0byBkZXN0cnVjdHVyZSBqb2Iga2V5LlxuICBKdXN0IGEgYml0IG9mIHdhcm5pbmcsIHRoZXNlIGZ1bmN0aW9ucyBtYXkgYmUgYSBiaXQgc2xvdyBhbmQgYWZmZWN0IHBlcmZvcm1hbmNlIHNpZ25pZmljYW50bHkuXG5dXVxubG9jYWwgZ2V0Sm9iSWRGcm9tS2V5ID0gZnVuY3Rpb24gKGpvYktleSlcbiAgcmV0dXJuIHN0cmluZy5tYXRjaChqb2JLZXksIFwiLio6KC4qKVwiKVxuZW5kXG5sb2NhbCBnZXRKb2JLZXlQcmVmaXggPSBmdW5jdGlvbiAoam9iS2V5LCBqb2JJZClcbiAgcmV0dXJuIHN0cmluZy5zdWIoam9iS2V5LCAwLCAjam9iS2V5IC0gI2pvYklkKVxuZW5kXG4tLVtbXG4gIEZ1bmN0aW9uIHRvIGNoZWNrIGZvciB0aGUgbWV0YS5wYXVzZWQga2V5IHRvIGRlY2lkZSBpZiB3ZSBhcmUgcGF1c2VkIG9yIG5vdFxuICAoc2luY2UgYW4gZW1wdHkgbGlzdCBhbmQgIUVYSVNUUyBhcmUgbm90IHJlYWxseSB0aGUgc2FtZSkuXG5dXVxubG9jYWwgZnVuY3Rpb24gZ2V0VGFyZ2V0UXVldWVMaXN0KHF1ZXVlTWV0YUtleSwgYWN0aXZlS2V5LCB3YWl0S2V5LCBwYXVzZWRLZXkpXG4gIGxvY2FsIHF1ZXVlQXR0cmlidXRlcyA9IHJjYWxsKFwiSE1HRVRcIiwgcXVldWVNZXRhS2V5LCBcInBhdXNlZFwiLCBcImNvbmN1cnJlbmN5XCIsIFwibWF4XCIsIFwiZHVyYXRpb25cIilcbiAgaWYgcXVldWVBdHRyaWJ1dGVzWzFdIHRoZW5cbiAgICByZXR1cm4gcGF1c2VkS2V5LCB0cnVlLCBxdWV1ZUF0dHJpYnV0ZXNbM10sIHF1ZXVlQXR0cmlidXRlc1s0XVxuICBlbHNlXG4gICAgaWYgcXVldWVBdHRyaWJ1dGVzWzJdIHRoZW5cbiAgICAgIGxvY2FsIGFjdGl2ZUNvdW50ID0gcmNhbGwoXCJMTEVOXCIsIGFjdGl2ZUtleSlcbiAgICAgIGlmIGFjdGl2ZUNvdW50ID49IHRvbnVtYmVyKHF1ZXVlQXR0cmlidXRlc1syXSkgdGhlblxuICAgICAgICByZXR1cm4gd2FpdEtleSwgdHJ1ZSwgcXVldWVBdHRyaWJ1dGVzWzNdLCBxdWV1ZUF0dHJpYnV0ZXNbNF1cbiAgICAgIGVsc2VcbiAgICAgICAgcmV0dXJuIHdhaXRLZXksIGZhbHNlLCBxdWV1ZUF0dHJpYnV0ZXNbM10sIHF1ZXVlQXR0cmlidXRlc1s0XVxuICAgICAgZW5kXG4gICAgZW5kXG4gIGVuZFxuICByZXR1cm4gd2FpdEtleSwgZmFsc2UsIHF1ZXVlQXR0cmlidXRlc1szXSwgcXVldWVBdHRyaWJ1dGVzWzRdXG5lbmRcbi0tW1tcbiAgRnVuY3Rpb24gdG8gcmVtb3ZlIGpvYiBrZXlzLlxuXV1cbmxvY2FsIGZ1bmN0aW9uIHJlbW92ZUpvYktleXMoam9iS2V5KVxuICByZXR1cm4gcmNhbGwoXCJERUxcIiwgam9iS2V5LCBqb2JLZXkgLi4gJzpsb2dzJywgam9iS2V5IC4uICc6ZGVwZW5kZW5jaWVzJyxcbiAgICBqb2JLZXkgLi4gJzpwcm9jZXNzZWQnLCBqb2JLZXkgLi4gJzpmYWlsZWQnLCBqb2JLZXkgLi4gJzp1bnN1Y2Nlc3NmdWwnKVxuZW5kXG5sb2NhbCBmdW5jdGlvbiBfbW92ZVBhcmVudFRvV2FpdChwYXJlbnRQcmVmaXgsIHBhcmVudElkLCBlbWl0RXZlbnQpXG4gIGxvY2FsIHBhcmVudFRhcmdldCwgaXNQYXVzZWRPck1heGVkID0gZ2V0VGFyZ2V0UXVldWVMaXN0KHBhcmVudFByZWZpeCAuLiBcIm1ldGFcIiwgcGFyZW50UHJlZml4IC4uIFwiYWN0aXZlXCIsXG4gICAgcGFyZW50UHJlZml4IC4uIFwid2FpdFwiLCBwYXJlbnRQcmVmaXggLi4gXCJwYXVzZWRcIilcbiAgYWRkSm9iSW5UYXJnZXRMaXN0KHBhcmVudFRhcmdldCwgcGFyZW50UHJlZml4IC4uIFwibWFya2VyXCIsIFwiUlBVU0hcIiwgaXNQYXVzZWRPck1heGVkLCBwYXJlbnRJZClcbiAgaWYgZW1pdEV2ZW50IHRoZW5cbiAgICBsb2NhbCBwYXJlbnRFdmVudFN0cmVhbSA9IHBhcmVudFByZWZpeCAuLiBcImV2ZW50c1wiXG4gICAgcmNhbGwoXCJYQUREXCIsIHBhcmVudEV2ZW50U3RyZWFtLCBcIipcIiwgXCJldmVudFwiLCBcIndhaXRpbmdcIiwgXCJqb2JJZFwiLCBwYXJlbnRJZCwgXCJwcmV2XCIsIFwid2FpdGluZy1jaGlsZHJlblwiKVxuICBlbmRcbmVuZFxubG9jYWwgZnVuY3Rpb24gcmVtb3ZlUGFyZW50RGVwZW5kZW5jeUtleShqb2JLZXksIGhhcmQsIHBhcmVudEtleSwgYmFzZUtleSwgZGVib3VuY2VJZClcbiAgaWYgcGFyZW50S2V5IHRoZW5cbiAgICBsb2NhbCBwYXJlbnREZXBlbmRlbmNpZXNLZXkgPSBwYXJlbnRLZXkgLi4gXCI6ZGVwZW5kZW5jaWVzXCJcbiAgICBsb2NhbCByZXN1bHQgPSByY2FsbChcIlNSRU1cIiwgcGFyZW50RGVwZW5kZW5jaWVzS2V5LCBqb2JLZXkpXG4gICAgaWYgcmVzdWx0ID4gMCB0aGVuXG4gICAgICBsb2NhbCBwZW5kaW5nRGVwZW5kZW5jaWVzID0gcmNhbGwoXCJTQ0FSRFwiLCBwYXJlbnREZXBlbmRlbmNpZXNLZXkpXG4gICAgICBpZiBwZW5kaW5nRGVwZW5kZW5jaWVzID09IDAgdGhlblxuICAgICAgICBsb2NhbCBwYXJlbnRJZCA9IGdldEpvYklkRnJvbUtleShwYXJlbnRLZXkpXG4gICAgICAgIGxvY2FsIHBhcmVudFByZWZpeCA9IGdldEpvYktleVByZWZpeChwYXJlbnRLZXksIHBhcmVudElkKVxuICAgICAgICBsb2NhbCBudW1SZW1vdmVkRWxlbWVudHMgPSByY2FsbChcIlpSRU1cIiwgcGFyZW50UHJlZml4IC4uIFwid2FpdGluZy1jaGlsZHJlblwiLCBwYXJlbnRJZClcbiAgICAgICAgaWYgbnVtUmVtb3ZlZEVsZW1lbnRzID09IDEgdGhlblxuICAgICAgICAgIGlmIGhhcmQgdGhlbiAtLSByZW1vdmUgcGFyZW50IGluIHNhbWUgcXVldWVcbiAgICAgICAgICAgIGlmIHBhcmVudFByZWZpeCA9PSBiYXNlS2V5IHRoZW5cbiAgICAgICAgICAgICAgcmVtb3ZlUGFyZW50RGVwZW5kZW5jeUtleShwYXJlbnRLZXksIGhhcmQsIG5pbCwgYmFzZUtleSwgbmlsKVxuICAgICAgICAgICAgICByZW1vdmVKb2JLZXlzKHBhcmVudEtleSlcbiAgICAgICAgICAgICAgaWYgZGVib3VuY2VJZCB0aGVuXG4gICAgICAgICAgICAgICAgcmNhbGwoXCJERUxcIiwgcGFyZW50UHJlZml4IC4uIFwiZGU6XCIgLi4gZGVib3VuY2VJZClcbiAgICAgICAgICAgICAgZW5kXG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgIF9tb3ZlUGFyZW50VG9XYWl0KHBhcmVudFByZWZpeCwgcGFyZW50SWQpXG4gICAgICAgICAgICBlbmRcbiAgICAgICAgICBlbHNlXG4gICAgICAgICAgICBfbW92ZVBhcmVudFRvV2FpdChwYXJlbnRQcmVmaXgsIHBhcmVudElkLCB0cnVlKVxuICAgICAgICAgIGVuZFxuICAgICAgICBlbmRcbiAgICAgIGVuZFxuICAgICAgcmV0dXJuIHRydWVcbiAgICBlbmRcbiAgZWxzZVxuICAgIGxvY2FsIHBhcmVudEF0dHJpYnV0ZXMgPSByY2FsbChcIkhNR0VUXCIsIGpvYktleSwgXCJwYXJlbnRLZXlcIiwgXCJkZWlkXCIpXG4gICAgbG9jYWwgbWlzc2VkUGFyZW50S2V5ID0gcGFyZW50QXR0cmlidXRlc1sxXVxuICAgIGlmKCAodHlwZShtaXNzZWRQYXJlbnRLZXkpID09IFwic3RyaW5nXCIpIGFuZCBtaXNzZWRQYXJlbnRLZXkgfj0gXCJcIlxuICAgICAgYW5kIChyY2FsbChcIkVYSVNUU1wiLCBtaXNzZWRQYXJlbnRLZXkpID09IDEpKSB0aGVuXG4gICAgICBsb2NhbCBwYXJlbnREZXBlbmRlbmNpZXNLZXkgPSBtaXNzZWRQYXJlbnRLZXkgLi4gXCI6ZGVwZW5kZW5jaWVzXCJcbiAgICAgIGxvY2FsIHJlc3VsdCA9IHJjYWxsKFwiU1JFTVwiLCBwYXJlbnREZXBlbmRlbmNpZXNLZXksIGpvYktleSlcbiAgICAgIGlmIHJlc3VsdCA+IDAgdGhlblxuICAgICAgICBsb2NhbCBwZW5kaW5nRGVwZW5kZW5jaWVzID0gcmNhbGwoXCJTQ0FSRFwiLCBwYXJlbnREZXBlbmRlbmNpZXNLZXkpXG4gICAgICAgIGlmIHBlbmRpbmdEZXBlbmRlbmNpZXMgPT0gMCB0aGVuXG4gICAgICAgICAgbG9jYWwgcGFyZW50SWQgPSBnZXRKb2JJZEZyb21LZXkobWlzc2VkUGFyZW50S2V5KVxuICAgICAgICAgIGxvY2FsIHBhcmVudFByZWZpeCA9IGdldEpvYktleVByZWZpeChtaXNzZWRQYXJlbnRLZXksIHBhcmVudElkKVxuICAgICAgICAgIGxvY2FsIG51bVJlbW92ZWRFbGVtZW50cyA9IHJjYWxsKFwiWlJFTVwiLCBwYXJlbnRQcmVmaXggLi4gXCJ3YWl0aW5nLWNoaWxkcmVuXCIsIHBhcmVudElkKVxuICAgICAgICAgIGlmIG51bVJlbW92ZWRFbGVtZW50cyA9PSAxIHRoZW5cbiAgICAgICAgICAgIGlmIGhhcmQgdGhlblxuICAgICAgICAgICAgICBpZiBwYXJlbnRQcmVmaXggPT0gYmFzZUtleSB0aGVuXG4gICAgICAgICAgICAgICAgcmVtb3ZlUGFyZW50RGVwZW5kZW5jeUtleShtaXNzZWRQYXJlbnRLZXksIGhhcmQsIG5pbCwgYmFzZUtleSwgbmlsKVxuICAgICAgICAgICAgICAgIHJlbW92ZUpvYktleXMobWlzc2VkUGFyZW50S2V5KVxuICAgICAgICAgICAgICAgIGlmIHBhcmVudEF0dHJpYnV0ZXNbMl0gdGhlblxuICAgICAgICAgICAgICAgICAgcmNhbGwoXCJERUxcIiwgcGFyZW50UHJlZml4IC4uIFwiZGU6XCIgLi4gcGFyZW50QXR0cmlidXRlc1syXSlcbiAgICAgICAgICAgICAgICBlbmRcbiAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIF9tb3ZlUGFyZW50VG9XYWl0KHBhcmVudFByZWZpeCwgcGFyZW50SWQpXG4gICAgICAgICAgICAgIGVuZFxuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICBfbW92ZVBhcmVudFRvV2FpdChwYXJlbnRQcmVmaXgsIHBhcmVudElkLCB0cnVlKVxuICAgICAgICAgICAgZW5kXG4gICAgICAgICAgZW5kXG4gICAgICAgIGVuZFxuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgZW5kXG4gICAgZW5kXG4gIGVuZFxuICByZXR1cm4gZmFsc2VcbmVuZFxuaWYgcmNhbGwoXCJFWElTVFNcIiwgam9iS2V5KSB+PSAxIHRoZW4gcmV0dXJuIC0xIGVuZFxuaWYgcmNhbGwoXCJFWElTVFNcIiwgcGFyZW50S2V5KSB+PSAxIHRoZW4gcmV0dXJuIC01IGVuZFxuaWYgcmVtb3ZlUGFyZW50RGVwZW5kZW5jeUtleShqb2JLZXksIGZhbHNlLCBwYXJlbnRLZXksIEtFWVNbMV0sIG5pbCkgdGhlblxuICByY2FsbChcIkhERUxcIiwgam9iS2V5LCBcInBhcmVudEtleVwiLCBcInBhcmVudFwiKVxuICByZXR1cm4gMFxuZWxzZVxuICByZXR1cm4gMVxuZW5kYDtcbmV4cG9ydHMucmVtb3ZlQ2hpbGREZXBlbmRlbmN5ID0ge1xuICAgIG5hbWU6ICdyZW1vdmVDaGlsZERlcGVuZGVuY3knLFxuICAgIGNvbnRlbnQsXG4gICAga2V5czogMSxcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1yZW1vdmVDaGlsZERlcGVuZGVuY3ktMS5qcy5tYXAiXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJyZW1vdmVDaGlsZERlcGVuZGVuY3kiLCJjb250ZW50IiwibmFtZSIsImtleXMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/scripts/removeChildDependency-1.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/scripts/removeJob-2.js":
/*!*************************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/scripts/removeJob-2.js ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.removeJob = void 0;\nconst content = `--[[\n    Remove a job from all the statuses it may be in as well as all its data.\n    In order to be able to remove a job, it cannot be active.\n    Input:\n      KEYS[1] jobKey\n      KEYS[2] repeat key\n      ARGV[1] jobId\n      ARGV[2] remove children\n      ARGV[3] queue prefix\n    Events:\n      'removed'\n]]\nlocal rcall = redis.call\n-- Includes\n--[[\n  Function to check if the job belongs to a job scheduler and\n  current delayed job matches with jobId\n]]\nlocal function isJobSchedulerJob(jobId, jobKey, jobSchedulersKey)\n  local repeatJobKey = rcall(\"HGET\", jobKey, \"rjk\")\n  if repeatJobKey  then\n    local prevMillis = rcall(\"ZSCORE\", jobSchedulersKey, repeatJobKey)\n    if prevMillis then\n      local currentDelayedJobId = \"repeat:\" .. repeatJobKey .. \":\" .. prevMillis\n      return jobId == currentDelayedJobId\n    end\n  end\n  return false\nend\n--[[\n  Function to recursively check if there are no locks\n  on the jobs to be removed.\n  returns:\n    boolean\n]]\n--[[\n  Functions to destructure job key.\n  Just a bit of warning, these functions may be a bit slow and affect performance significantly.\n]]\nlocal getJobIdFromKey = function (jobKey)\n  return string.match(jobKey, \".*:(.*)\")\nend\nlocal getJobKeyPrefix = function (jobKey, jobId)\n  return string.sub(jobKey, 0, #jobKey - #jobId)\nend\nlocal function isLocked( prefix, jobId, removeChildren)\n  local jobKey = prefix .. jobId;\n  -- Check if this job is locked\n  local lockKey = jobKey .. ':lock'\n  local lock = rcall(\"GET\", lockKey)\n  if not lock then\n    if removeChildren == \"1\" then\n      local dependencies = rcall(\"SMEMBERS\", jobKey .. \":dependencies\")\n      if (#dependencies > 0) then\n        for i, childJobKey in ipairs(dependencies) do\n          -- We need to get the jobId for this job.\n          local childJobId = getJobIdFromKey(childJobKey)\n          local childJobPrefix = getJobKeyPrefix(childJobKey, childJobId)\n          local result = isLocked( childJobPrefix, childJobId, removeChildren )\n          if result then\n            return true\n          end\n        end\n      end\n    end\n    return false\n  end\n  return true\nend\n--[[\n    Remove a job from all the statuses it may be in as well as all its data,\n    including its children. Active children can be ignored.\n    Events:\n      'removed'\n]]\nlocal rcall = redis.call\n-- Includes\n--[[\n  Function to get max events value or set by default 10000.\n]]\nlocal function getOrSetMaxEvents(metaKey)\n  local maxEvents = rcall(\"HGET\", metaKey, \"opts.maxLenEvents\")\n  if not maxEvents then\n    maxEvents = 10000\n    rcall(\"HSET\", metaKey, \"opts.maxLenEvents\", maxEvents)\n  end\n  return maxEvents\nend\n--[[\n  Function to remove deduplication key if needed\n  when a job is being removed.\n]]\nlocal function removeDeduplicationKeyIfNeededOnRemoval(prefixKey,\n  jobKey, jobId)\n  local deduplicationId = rcall(\"HGET\", jobKey, \"deid\")\n  if deduplicationId then\n    local deduplicationKey = prefixKey .. \"de:\" .. deduplicationId\n    local currentJobId = rcall('GET', deduplicationKey)\n    if currentJobId and currentJobId == jobId then\n      return rcall(\"DEL\", deduplicationKey)\n    end\n  end\nend\n--[[\n  Function to remove from any state.\n  returns:\n    prev state\n]]\nlocal function removeJobFromAnyState( prefix, jobId)\n  -- We start with the ZSCORE checks, since they have O(1) complexity\n  if rcall(\"ZSCORE\", prefix .. \"completed\", jobId) then\n    rcall(\"ZREM\", prefix .. \"completed\", jobId)\n    return \"completed\"\n  elseif rcall(\"ZSCORE\", prefix .. \"waiting-children\", jobId) then\n    rcall(\"ZREM\", prefix .. \"waiting-children\", jobId)\n    return \"waiting-children\"\n  elseif rcall(\"ZSCORE\", prefix .. \"delayed\", jobId) then\n    rcall(\"ZREM\", prefix .. \"delayed\", jobId)\n    return \"delayed\"\n  elseif rcall(\"ZSCORE\", prefix .. \"failed\", jobId) then\n    rcall(\"ZREM\", prefix .. \"failed\", jobId)\n    return \"failed\"\n  elseif rcall(\"ZSCORE\", prefix .. \"prioritized\", jobId) then\n    rcall(\"ZREM\", prefix .. \"prioritized\", jobId)\n    return \"prioritized\"\n  -- We remove only 1 element from the list, since we assume they are not added multiple times\n  elseif rcall(\"LREM\", prefix .. \"wait\", 1, jobId) == 1 then\n    return \"wait\"\n  elseif rcall(\"LREM\", prefix .. \"paused\", 1, jobId) == 1 then\n    return \"paused\"\n  elseif rcall(\"LREM\", prefix .. \"active\", 1, jobId) == 1 then\n    return \"active\"\n  end\n  return \"unknown\"\nend\n--[[\n  Function to remove job keys.\n]]\nlocal function removeJobKeys(jobKey)\n  return rcall(\"DEL\", jobKey, jobKey .. ':logs', jobKey .. ':dependencies',\n    jobKey .. ':processed', jobKey .. ':failed', jobKey .. ':unsuccessful')\nend\n--[[\n  Check if this job has a parent. If so we will just remove it from\n  the parent child list, but if it is the last child we should move the parent to \"wait/paused\"\n  which requires code from \"moveToFinished\"\n]]\n-- Includes\n--[[\n  Function to add job in target list and add marker if needed.\n]]\n-- Includes\n--[[\n  Add marker if needed when a job is available.\n]]\nlocal function addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)\n  if not isPausedOrMaxed then\n    rcall(\"ZADD\", markerKey, 0, \"0\")\n  end  \nend\nlocal function addJobInTargetList(targetKey, markerKey, pushCmd, isPausedOrMaxed, jobId)\n  rcall(pushCmd, targetKey, jobId)\n  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)\nend\n--[[\n  Function to check for the meta.paused key to decide if we are paused or not\n  (since an empty list and !EXISTS are not really the same).\n]]\nlocal function getTargetQueueList(queueMetaKey, activeKey, waitKey, pausedKey)\n  local queueAttributes = rcall(\"HMGET\", queueMetaKey, \"paused\", \"concurrency\", \"max\", \"duration\")\n  if queueAttributes[1] then\n    return pausedKey, true, queueAttributes[3], queueAttributes[4]\n  else\n    if queueAttributes[2] then\n      local activeCount = rcall(\"LLEN\", activeKey)\n      if activeCount >= tonumber(queueAttributes[2]) then\n        return waitKey, true, queueAttributes[3], queueAttributes[4]\n      else\n        return waitKey, false, queueAttributes[3], queueAttributes[4]\n      end\n    end\n  end\n  return waitKey, false, queueAttributes[3], queueAttributes[4]\nend\nlocal function _moveParentToWait(parentPrefix, parentId, emitEvent)\n  local parentTarget, isPausedOrMaxed = getTargetQueueList(parentPrefix .. \"meta\", parentPrefix .. \"active\",\n    parentPrefix .. \"wait\", parentPrefix .. \"paused\")\n  addJobInTargetList(parentTarget, parentPrefix .. \"marker\", \"RPUSH\", isPausedOrMaxed, parentId)\n  if emitEvent then\n    local parentEventStream = parentPrefix .. \"events\"\n    rcall(\"XADD\", parentEventStream, \"*\", \"event\", \"waiting\", \"jobId\", parentId, \"prev\", \"waiting-children\")\n  end\nend\nlocal function removeParentDependencyKey(jobKey, hard, parentKey, baseKey, debounceId)\n  if parentKey then\n    local parentDependenciesKey = parentKey .. \":dependencies\"\n    local result = rcall(\"SREM\", parentDependenciesKey, jobKey)\n    if result > 0 then\n      local pendingDependencies = rcall(\"SCARD\", parentDependenciesKey)\n      if pendingDependencies == 0 then\n        local parentId = getJobIdFromKey(parentKey)\n        local parentPrefix = getJobKeyPrefix(parentKey, parentId)\n        local numRemovedElements = rcall(\"ZREM\", parentPrefix .. \"waiting-children\", parentId)\n        if numRemovedElements == 1 then\n          if hard then -- remove parent in same queue\n            if parentPrefix == baseKey then\n              removeParentDependencyKey(parentKey, hard, nil, baseKey, nil)\n              removeJobKeys(parentKey)\n              if debounceId then\n                rcall(\"DEL\", parentPrefix .. \"de:\" .. debounceId)\n              end\n            else\n              _moveParentToWait(parentPrefix, parentId)\n            end\n          else\n            _moveParentToWait(parentPrefix, parentId, true)\n          end\n        end\n      end\n      return true\n    end\n  else\n    local parentAttributes = rcall(\"HMGET\", jobKey, \"parentKey\", \"deid\")\n    local missedParentKey = parentAttributes[1]\n    if( (type(missedParentKey) == \"string\") and missedParentKey ~= \"\"\n      and (rcall(\"EXISTS\", missedParentKey) == 1)) then\n      local parentDependenciesKey = missedParentKey .. \":dependencies\"\n      local result = rcall(\"SREM\", parentDependenciesKey, jobKey)\n      if result > 0 then\n        local pendingDependencies = rcall(\"SCARD\", parentDependenciesKey)\n        if pendingDependencies == 0 then\n          local parentId = getJobIdFromKey(missedParentKey)\n          local parentPrefix = getJobKeyPrefix(missedParentKey, parentId)\n          local numRemovedElements = rcall(\"ZREM\", parentPrefix .. \"waiting-children\", parentId)\n          if numRemovedElements == 1 then\n            if hard then\n              if parentPrefix == baseKey then\n                removeParentDependencyKey(missedParentKey, hard, nil, baseKey, nil)\n                removeJobKeys(missedParentKey)\n                if parentAttributes[2] then\n                  rcall(\"DEL\", parentPrefix .. \"de:\" .. parentAttributes[2])\n                end\n              else\n                _moveParentToWait(parentPrefix, parentId)\n              end\n            else\n              _moveParentToWait(parentPrefix, parentId, true)\n            end\n          end\n        end\n        return true\n      end\n    end\n  end\n  return false\nend\nlocal removeJobChildren\nlocal removeJobWithChildren\nremoveJobChildren = function(prefix, jobKey, options)\n    -- Check if this job has children\n    -- If so, we are going to try to remove the children recursively in a depth-first way\n    -- because if some job is locked, we must exit with an error.\n    if not options.ignoreProcessed then\n        local processed = rcall(\"HGETALL\", jobKey .. \":processed\")\n        if #processed > 0 then\n            for i = 1, #processed, 2 do\n                local childJobId = getJobIdFromKey(processed[i])\n                local childJobPrefix = getJobKeyPrefix(processed[i], childJobId)\n                removeJobWithChildren(childJobPrefix, childJobId, jobKey, options)\n            end\n        end\n        local failed = rcall(\"HGETALL\", jobKey .. \":failed\")\n        if #failed > 0 then\n            for i = 1, #failed, 2 do\n                local childJobId = getJobIdFromKey(failed[i])\n                local childJobPrefix = getJobKeyPrefix(failed[i], childJobId)\n                removeJobWithChildren(childJobPrefix, childJobId, jobKey, options)\n            end\n        end\n        local unsuccessful = rcall(\"ZRANGE\", jobKey .. \":unsuccessful\", 0, -1)\n        if #unsuccessful > 0 then\n            for i = 1, #unsuccessful, 1 do\n                local childJobId = getJobIdFromKey(unsuccessful[i])\n                local childJobPrefix = getJobKeyPrefix(unsuccessful[i], childJobId)\n                removeJobWithChildren(childJobPrefix, childJobId, jobKey, options)\n            end\n        end\n    end\n    local dependencies = rcall(\"SMEMBERS\", jobKey .. \":dependencies\")\n    if #dependencies > 0 then\n        for i, childJobKey in ipairs(dependencies) do\n            local childJobId = getJobIdFromKey(childJobKey)\n            local childJobPrefix = getJobKeyPrefix(childJobKey, childJobId)\n            removeJobWithChildren(childJobPrefix, childJobId, jobKey, options)\n        end\n    end\nend\nremoveJobWithChildren = function(prefix, jobId, parentKey, options)\n    local jobKey = prefix .. jobId\n    if options.ignoreLocked then\n        if isLocked(prefix, jobId) then\n            return\n        end\n    end\n    -- Check if job is in the failed zset\n    local failedSet = prefix .. \"failed\"\n    if not (options.ignoreProcessed and rcall(\"ZSCORE\", failedSet, jobId)) then\n        removeParentDependencyKey(jobKey, false, parentKey, nil)\n        if options.removeChildren then\n            removeJobChildren(prefix, jobKey, options)\n        end\n        local prev = removeJobFromAnyState(prefix, jobId)\n        removeDeduplicationKeyIfNeededOnRemoval(prefix, jobKey, jobId)\n        if removeJobKeys(jobKey) > 0 then\n            local metaKey = prefix .. \"meta\"\n            local maxEvents = getOrSetMaxEvents(metaKey)\n            rcall(\"XADD\", prefix .. \"events\", \"MAXLEN\", \"~\", maxEvents, \"*\", \"event\", \"removed\",\n                \"jobId\", jobId, \"prev\", prev)\n        end\n    end\nend\nlocal jobId = ARGV[1]\nlocal shouldRemoveChildren = ARGV[2]\nlocal prefix = ARGV[3]\nlocal jobKey = KEYS[1]\nlocal repeatKey = KEYS[2]\nif isJobSchedulerJob(jobId, jobKey, repeatKey) then\n    return -8\nend\nif not isLocked(prefix, jobId, shouldRemoveChildren) then\n    local options = {\n        removeChildren = shouldRemoveChildren == \"1\",\n        ignoreProcessed = false,\n        ignoreLocked = false\n    }\n    removeJobWithChildren(prefix, jobId, nil, options)\n    return 1\nend\nreturn 0\n`;\nexports.removeJob = {\n    name: \"removeJob\",\n    content,\n    keys: 2\n}; //# sourceMappingURL=removeJob-2.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL3NjcmlwdHMvcmVtb3ZlSm9iLTIuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELGlCQUFpQixHQUFHLEtBQUs7QUFDekIsTUFBTUcsVUFBVSxDQUFDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFtVmpCLENBQUM7QUFDREgsaUJBQWlCLEdBQUc7SUFDaEJJLE1BQU07SUFDTkQ7SUFDQUUsTUFBTTtBQUNWLEdBQ0EsdUNBQXVDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb25seWZhbnMtcGxhdGZvcm0vLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL3NjcmlwdHMvcmVtb3ZlSm9iLTIuanM/ZjY5NCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMucmVtb3ZlSm9iID0gdm9pZCAwO1xuY29uc3QgY29udGVudCA9IGAtLVtbXG4gICAgUmVtb3ZlIGEgam9iIGZyb20gYWxsIHRoZSBzdGF0dXNlcyBpdCBtYXkgYmUgaW4gYXMgd2VsbCBhcyBhbGwgaXRzIGRhdGEuXG4gICAgSW4gb3JkZXIgdG8gYmUgYWJsZSB0byByZW1vdmUgYSBqb2IsIGl0IGNhbm5vdCBiZSBhY3RpdmUuXG4gICAgSW5wdXQ6XG4gICAgICBLRVlTWzFdIGpvYktleVxuICAgICAgS0VZU1syXSByZXBlYXQga2V5XG4gICAgICBBUkdWWzFdIGpvYklkXG4gICAgICBBUkdWWzJdIHJlbW92ZSBjaGlsZHJlblxuICAgICAgQVJHVlszXSBxdWV1ZSBwcmVmaXhcbiAgICBFdmVudHM6XG4gICAgICAncmVtb3ZlZCdcbl1dXG5sb2NhbCByY2FsbCA9IHJlZGlzLmNhbGxcbi0tIEluY2x1ZGVzXG4tLVtbXG4gIEZ1bmN0aW9uIHRvIGNoZWNrIGlmIHRoZSBqb2IgYmVsb25ncyB0byBhIGpvYiBzY2hlZHVsZXIgYW5kXG4gIGN1cnJlbnQgZGVsYXllZCBqb2IgbWF0Y2hlcyB3aXRoIGpvYklkXG5dXVxubG9jYWwgZnVuY3Rpb24gaXNKb2JTY2hlZHVsZXJKb2Ioam9iSWQsIGpvYktleSwgam9iU2NoZWR1bGVyc0tleSlcbiAgbG9jYWwgcmVwZWF0Sm9iS2V5ID0gcmNhbGwoXCJIR0VUXCIsIGpvYktleSwgXCJyamtcIilcbiAgaWYgcmVwZWF0Sm9iS2V5ICB0aGVuXG4gICAgbG9jYWwgcHJldk1pbGxpcyA9IHJjYWxsKFwiWlNDT1JFXCIsIGpvYlNjaGVkdWxlcnNLZXksIHJlcGVhdEpvYktleSlcbiAgICBpZiBwcmV2TWlsbGlzIHRoZW5cbiAgICAgIGxvY2FsIGN1cnJlbnREZWxheWVkSm9iSWQgPSBcInJlcGVhdDpcIiAuLiByZXBlYXRKb2JLZXkgLi4gXCI6XCIgLi4gcHJldk1pbGxpc1xuICAgICAgcmV0dXJuIGpvYklkID09IGN1cnJlbnREZWxheWVkSm9iSWRcbiAgICBlbmRcbiAgZW5kXG4gIHJldHVybiBmYWxzZVxuZW5kXG4tLVtbXG4gIEZ1bmN0aW9uIHRvIHJlY3Vyc2l2ZWx5IGNoZWNrIGlmIHRoZXJlIGFyZSBubyBsb2Nrc1xuICBvbiB0aGUgam9icyB0byBiZSByZW1vdmVkLlxuICByZXR1cm5zOlxuICAgIGJvb2xlYW5cbl1dXG4tLVtbXG4gIEZ1bmN0aW9ucyB0byBkZXN0cnVjdHVyZSBqb2Iga2V5LlxuICBKdXN0IGEgYml0IG9mIHdhcm5pbmcsIHRoZXNlIGZ1bmN0aW9ucyBtYXkgYmUgYSBiaXQgc2xvdyBhbmQgYWZmZWN0IHBlcmZvcm1hbmNlIHNpZ25pZmljYW50bHkuXG5dXVxubG9jYWwgZ2V0Sm9iSWRGcm9tS2V5ID0gZnVuY3Rpb24gKGpvYktleSlcbiAgcmV0dXJuIHN0cmluZy5tYXRjaChqb2JLZXksIFwiLio6KC4qKVwiKVxuZW5kXG5sb2NhbCBnZXRKb2JLZXlQcmVmaXggPSBmdW5jdGlvbiAoam9iS2V5LCBqb2JJZClcbiAgcmV0dXJuIHN0cmluZy5zdWIoam9iS2V5LCAwLCAjam9iS2V5IC0gI2pvYklkKVxuZW5kXG5sb2NhbCBmdW5jdGlvbiBpc0xvY2tlZCggcHJlZml4LCBqb2JJZCwgcmVtb3ZlQ2hpbGRyZW4pXG4gIGxvY2FsIGpvYktleSA9IHByZWZpeCAuLiBqb2JJZDtcbiAgLS0gQ2hlY2sgaWYgdGhpcyBqb2IgaXMgbG9ja2VkXG4gIGxvY2FsIGxvY2tLZXkgPSBqb2JLZXkgLi4gJzpsb2NrJ1xuICBsb2NhbCBsb2NrID0gcmNhbGwoXCJHRVRcIiwgbG9ja0tleSlcbiAgaWYgbm90IGxvY2sgdGhlblxuICAgIGlmIHJlbW92ZUNoaWxkcmVuID09IFwiMVwiIHRoZW5cbiAgICAgIGxvY2FsIGRlcGVuZGVuY2llcyA9IHJjYWxsKFwiU01FTUJFUlNcIiwgam9iS2V5IC4uIFwiOmRlcGVuZGVuY2llc1wiKVxuICAgICAgaWYgKCNkZXBlbmRlbmNpZXMgPiAwKSB0aGVuXG4gICAgICAgIGZvciBpLCBjaGlsZEpvYktleSBpbiBpcGFpcnMoZGVwZW5kZW5jaWVzKSBkb1xuICAgICAgICAgIC0tIFdlIG5lZWQgdG8gZ2V0IHRoZSBqb2JJZCBmb3IgdGhpcyBqb2IuXG4gICAgICAgICAgbG9jYWwgY2hpbGRKb2JJZCA9IGdldEpvYklkRnJvbUtleShjaGlsZEpvYktleSlcbiAgICAgICAgICBsb2NhbCBjaGlsZEpvYlByZWZpeCA9IGdldEpvYktleVByZWZpeChjaGlsZEpvYktleSwgY2hpbGRKb2JJZClcbiAgICAgICAgICBsb2NhbCByZXN1bHQgPSBpc0xvY2tlZCggY2hpbGRKb2JQcmVmaXgsIGNoaWxkSm9iSWQsIHJlbW92ZUNoaWxkcmVuIClcbiAgICAgICAgICBpZiByZXN1bHQgdGhlblxuICAgICAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgICAgICBlbmRcbiAgICAgICAgZW5kXG4gICAgICBlbmRcbiAgICBlbmRcbiAgICByZXR1cm4gZmFsc2VcbiAgZW5kXG4gIHJldHVybiB0cnVlXG5lbmRcbi0tW1tcbiAgICBSZW1vdmUgYSBqb2IgZnJvbSBhbGwgdGhlIHN0YXR1c2VzIGl0IG1heSBiZSBpbiBhcyB3ZWxsIGFzIGFsbCBpdHMgZGF0YSxcbiAgICBpbmNsdWRpbmcgaXRzIGNoaWxkcmVuLiBBY3RpdmUgY2hpbGRyZW4gY2FuIGJlIGlnbm9yZWQuXG4gICAgRXZlbnRzOlxuICAgICAgJ3JlbW92ZWQnXG5dXVxubG9jYWwgcmNhbGwgPSByZWRpcy5jYWxsXG4tLSBJbmNsdWRlc1xuLS1bW1xuICBGdW5jdGlvbiB0byBnZXQgbWF4IGV2ZW50cyB2YWx1ZSBvciBzZXQgYnkgZGVmYXVsdCAxMDAwMC5cbl1dXG5sb2NhbCBmdW5jdGlvbiBnZXRPclNldE1heEV2ZW50cyhtZXRhS2V5KVxuICBsb2NhbCBtYXhFdmVudHMgPSByY2FsbChcIkhHRVRcIiwgbWV0YUtleSwgXCJvcHRzLm1heExlbkV2ZW50c1wiKVxuICBpZiBub3QgbWF4RXZlbnRzIHRoZW5cbiAgICBtYXhFdmVudHMgPSAxMDAwMFxuICAgIHJjYWxsKFwiSFNFVFwiLCBtZXRhS2V5LCBcIm9wdHMubWF4TGVuRXZlbnRzXCIsIG1heEV2ZW50cylcbiAgZW5kXG4gIHJldHVybiBtYXhFdmVudHNcbmVuZFxuLS1bW1xuICBGdW5jdGlvbiB0byByZW1vdmUgZGVkdXBsaWNhdGlvbiBrZXkgaWYgbmVlZGVkXG4gIHdoZW4gYSBqb2IgaXMgYmVpbmcgcmVtb3ZlZC5cbl1dXG5sb2NhbCBmdW5jdGlvbiByZW1vdmVEZWR1cGxpY2F0aW9uS2V5SWZOZWVkZWRPblJlbW92YWwocHJlZml4S2V5LFxuICBqb2JLZXksIGpvYklkKVxuICBsb2NhbCBkZWR1cGxpY2F0aW9uSWQgPSByY2FsbChcIkhHRVRcIiwgam9iS2V5LCBcImRlaWRcIilcbiAgaWYgZGVkdXBsaWNhdGlvbklkIHRoZW5cbiAgICBsb2NhbCBkZWR1cGxpY2F0aW9uS2V5ID0gcHJlZml4S2V5IC4uIFwiZGU6XCIgLi4gZGVkdXBsaWNhdGlvbklkXG4gICAgbG9jYWwgY3VycmVudEpvYklkID0gcmNhbGwoJ0dFVCcsIGRlZHVwbGljYXRpb25LZXkpXG4gICAgaWYgY3VycmVudEpvYklkIGFuZCBjdXJyZW50Sm9iSWQgPT0gam9iSWQgdGhlblxuICAgICAgcmV0dXJuIHJjYWxsKFwiREVMXCIsIGRlZHVwbGljYXRpb25LZXkpXG4gICAgZW5kXG4gIGVuZFxuZW5kXG4tLVtbXG4gIEZ1bmN0aW9uIHRvIHJlbW92ZSBmcm9tIGFueSBzdGF0ZS5cbiAgcmV0dXJuczpcbiAgICBwcmV2IHN0YXRlXG5dXVxubG9jYWwgZnVuY3Rpb24gcmVtb3ZlSm9iRnJvbUFueVN0YXRlKCBwcmVmaXgsIGpvYklkKVxuICAtLSBXZSBzdGFydCB3aXRoIHRoZSBaU0NPUkUgY2hlY2tzLCBzaW5jZSB0aGV5IGhhdmUgTygxKSBjb21wbGV4aXR5XG4gIGlmIHJjYWxsKFwiWlNDT1JFXCIsIHByZWZpeCAuLiBcImNvbXBsZXRlZFwiLCBqb2JJZCkgdGhlblxuICAgIHJjYWxsKFwiWlJFTVwiLCBwcmVmaXggLi4gXCJjb21wbGV0ZWRcIiwgam9iSWQpXG4gICAgcmV0dXJuIFwiY29tcGxldGVkXCJcbiAgZWxzZWlmIHJjYWxsKFwiWlNDT1JFXCIsIHByZWZpeCAuLiBcIndhaXRpbmctY2hpbGRyZW5cIiwgam9iSWQpIHRoZW5cbiAgICByY2FsbChcIlpSRU1cIiwgcHJlZml4IC4uIFwid2FpdGluZy1jaGlsZHJlblwiLCBqb2JJZClcbiAgICByZXR1cm4gXCJ3YWl0aW5nLWNoaWxkcmVuXCJcbiAgZWxzZWlmIHJjYWxsKFwiWlNDT1JFXCIsIHByZWZpeCAuLiBcImRlbGF5ZWRcIiwgam9iSWQpIHRoZW5cbiAgICByY2FsbChcIlpSRU1cIiwgcHJlZml4IC4uIFwiZGVsYXllZFwiLCBqb2JJZClcbiAgICByZXR1cm4gXCJkZWxheWVkXCJcbiAgZWxzZWlmIHJjYWxsKFwiWlNDT1JFXCIsIHByZWZpeCAuLiBcImZhaWxlZFwiLCBqb2JJZCkgdGhlblxuICAgIHJjYWxsKFwiWlJFTVwiLCBwcmVmaXggLi4gXCJmYWlsZWRcIiwgam9iSWQpXG4gICAgcmV0dXJuIFwiZmFpbGVkXCJcbiAgZWxzZWlmIHJjYWxsKFwiWlNDT1JFXCIsIHByZWZpeCAuLiBcInByaW9yaXRpemVkXCIsIGpvYklkKSB0aGVuXG4gICAgcmNhbGwoXCJaUkVNXCIsIHByZWZpeCAuLiBcInByaW9yaXRpemVkXCIsIGpvYklkKVxuICAgIHJldHVybiBcInByaW9yaXRpemVkXCJcbiAgLS0gV2UgcmVtb3ZlIG9ubHkgMSBlbGVtZW50IGZyb20gdGhlIGxpc3QsIHNpbmNlIHdlIGFzc3VtZSB0aGV5IGFyZSBub3QgYWRkZWQgbXVsdGlwbGUgdGltZXNcbiAgZWxzZWlmIHJjYWxsKFwiTFJFTVwiLCBwcmVmaXggLi4gXCJ3YWl0XCIsIDEsIGpvYklkKSA9PSAxIHRoZW5cbiAgICByZXR1cm4gXCJ3YWl0XCJcbiAgZWxzZWlmIHJjYWxsKFwiTFJFTVwiLCBwcmVmaXggLi4gXCJwYXVzZWRcIiwgMSwgam9iSWQpID09IDEgdGhlblxuICAgIHJldHVybiBcInBhdXNlZFwiXG4gIGVsc2VpZiByY2FsbChcIkxSRU1cIiwgcHJlZml4IC4uIFwiYWN0aXZlXCIsIDEsIGpvYklkKSA9PSAxIHRoZW5cbiAgICByZXR1cm4gXCJhY3RpdmVcIlxuICBlbmRcbiAgcmV0dXJuIFwidW5rbm93blwiXG5lbmRcbi0tW1tcbiAgRnVuY3Rpb24gdG8gcmVtb3ZlIGpvYiBrZXlzLlxuXV1cbmxvY2FsIGZ1bmN0aW9uIHJlbW92ZUpvYktleXMoam9iS2V5KVxuICByZXR1cm4gcmNhbGwoXCJERUxcIiwgam9iS2V5LCBqb2JLZXkgLi4gJzpsb2dzJywgam9iS2V5IC4uICc6ZGVwZW5kZW5jaWVzJyxcbiAgICBqb2JLZXkgLi4gJzpwcm9jZXNzZWQnLCBqb2JLZXkgLi4gJzpmYWlsZWQnLCBqb2JLZXkgLi4gJzp1bnN1Y2Nlc3NmdWwnKVxuZW5kXG4tLVtbXG4gIENoZWNrIGlmIHRoaXMgam9iIGhhcyBhIHBhcmVudC4gSWYgc28gd2Ugd2lsbCBqdXN0IHJlbW92ZSBpdCBmcm9tXG4gIHRoZSBwYXJlbnQgY2hpbGQgbGlzdCwgYnV0IGlmIGl0IGlzIHRoZSBsYXN0IGNoaWxkIHdlIHNob3VsZCBtb3ZlIHRoZSBwYXJlbnQgdG8gXCJ3YWl0L3BhdXNlZFwiXG4gIHdoaWNoIHJlcXVpcmVzIGNvZGUgZnJvbSBcIm1vdmVUb0ZpbmlzaGVkXCJcbl1dXG4tLSBJbmNsdWRlc1xuLS1bW1xuICBGdW5jdGlvbiB0byBhZGQgam9iIGluIHRhcmdldCBsaXN0IGFuZCBhZGQgbWFya2VyIGlmIG5lZWRlZC5cbl1dXG4tLSBJbmNsdWRlc1xuLS1bW1xuICBBZGQgbWFya2VyIGlmIG5lZWRlZCB3aGVuIGEgam9iIGlzIGF2YWlsYWJsZS5cbl1dXG5sb2NhbCBmdW5jdGlvbiBhZGRCYXNlTWFya2VySWZOZWVkZWQobWFya2VyS2V5LCBpc1BhdXNlZE9yTWF4ZWQpXG4gIGlmIG5vdCBpc1BhdXNlZE9yTWF4ZWQgdGhlblxuICAgIHJjYWxsKFwiWkFERFwiLCBtYXJrZXJLZXksIDAsIFwiMFwiKVxuICBlbmQgIFxuZW5kXG5sb2NhbCBmdW5jdGlvbiBhZGRKb2JJblRhcmdldExpc3QodGFyZ2V0S2V5LCBtYXJrZXJLZXksIHB1c2hDbWQsIGlzUGF1c2VkT3JNYXhlZCwgam9iSWQpXG4gIHJjYWxsKHB1c2hDbWQsIHRhcmdldEtleSwgam9iSWQpXG4gIGFkZEJhc2VNYXJrZXJJZk5lZWRlZChtYXJrZXJLZXksIGlzUGF1c2VkT3JNYXhlZClcbmVuZFxuLS1bW1xuICBGdW5jdGlvbiB0byBjaGVjayBmb3IgdGhlIG1ldGEucGF1c2VkIGtleSB0byBkZWNpZGUgaWYgd2UgYXJlIHBhdXNlZCBvciBub3RcbiAgKHNpbmNlIGFuIGVtcHR5IGxpc3QgYW5kICFFWElTVFMgYXJlIG5vdCByZWFsbHkgdGhlIHNhbWUpLlxuXV1cbmxvY2FsIGZ1bmN0aW9uIGdldFRhcmdldFF1ZXVlTGlzdChxdWV1ZU1ldGFLZXksIGFjdGl2ZUtleSwgd2FpdEtleSwgcGF1c2VkS2V5KVxuICBsb2NhbCBxdWV1ZUF0dHJpYnV0ZXMgPSByY2FsbChcIkhNR0VUXCIsIHF1ZXVlTWV0YUtleSwgXCJwYXVzZWRcIiwgXCJjb25jdXJyZW5jeVwiLCBcIm1heFwiLCBcImR1cmF0aW9uXCIpXG4gIGlmIHF1ZXVlQXR0cmlidXRlc1sxXSB0aGVuXG4gICAgcmV0dXJuIHBhdXNlZEtleSwgdHJ1ZSwgcXVldWVBdHRyaWJ1dGVzWzNdLCBxdWV1ZUF0dHJpYnV0ZXNbNF1cbiAgZWxzZVxuICAgIGlmIHF1ZXVlQXR0cmlidXRlc1syXSB0aGVuXG4gICAgICBsb2NhbCBhY3RpdmVDb3VudCA9IHJjYWxsKFwiTExFTlwiLCBhY3RpdmVLZXkpXG4gICAgICBpZiBhY3RpdmVDb3VudCA+PSB0b251bWJlcihxdWV1ZUF0dHJpYnV0ZXNbMl0pIHRoZW5cbiAgICAgICAgcmV0dXJuIHdhaXRLZXksIHRydWUsIHF1ZXVlQXR0cmlidXRlc1szXSwgcXVldWVBdHRyaWJ1dGVzWzRdXG4gICAgICBlbHNlXG4gICAgICAgIHJldHVybiB3YWl0S2V5LCBmYWxzZSwgcXVldWVBdHRyaWJ1dGVzWzNdLCBxdWV1ZUF0dHJpYnV0ZXNbNF1cbiAgICAgIGVuZFxuICAgIGVuZFxuICBlbmRcbiAgcmV0dXJuIHdhaXRLZXksIGZhbHNlLCBxdWV1ZUF0dHJpYnV0ZXNbM10sIHF1ZXVlQXR0cmlidXRlc1s0XVxuZW5kXG5sb2NhbCBmdW5jdGlvbiBfbW92ZVBhcmVudFRvV2FpdChwYXJlbnRQcmVmaXgsIHBhcmVudElkLCBlbWl0RXZlbnQpXG4gIGxvY2FsIHBhcmVudFRhcmdldCwgaXNQYXVzZWRPck1heGVkID0gZ2V0VGFyZ2V0UXVldWVMaXN0KHBhcmVudFByZWZpeCAuLiBcIm1ldGFcIiwgcGFyZW50UHJlZml4IC4uIFwiYWN0aXZlXCIsXG4gICAgcGFyZW50UHJlZml4IC4uIFwid2FpdFwiLCBwYXJlbnRQcmVmaXggLi4gXCJwYXVzZWRcIilcbiAgYWRkSm9iSW5UYXJnZXRMaXN0KHBhcmVudFRhcmdldCwgcGFyZW50UHJlZml4IC4uIFwibWFya2VyXCIsIFwiUlBVU0hcIiwgaXNQYXVzZWRPck1heGVkLCBwYXJlbnRJZClcbiAgaWYgZW1pdEV2ZW50IHRoZW5cbiAgICBsb2NhbCBwYXJlbnRFdmVudFN0cmVhbSA9IHBhcmVudFByZWZpeCAuLiBcImV2ZW50c1wiXG4gICAgcmNhbGwoXCJYQUREXCIsIHBhcmVudEV2ZW50U3RyZWFtLCBcIipcIiwgXCJldmVudFwiLCBcIndhaXRpbmdcIiwgXCJqb2JJZFwiLCBwYXJlbnRJZCwgXCJwcmV2XCIsIFwid2FpdGluZy1jaGlsZHJlblwiKVxuICBlbmRcbmVuZFxubG9jYWwgZnVuY3Rpb24gcmVtb3ZlUGFyZW50RGVwZW5kZW5jeUtleShqb2JLZXksIGhhcmQsIHBhcmVudEtleSwgYmFzZUtleSwgZGVib3VuY2VJZClcbiAgaWYgcGFyZW50S2V5IHRoZW5cbiAgICBsb2NhbCBwYXJlbnREZXBlbmRlbmNpZXNLZXkgPSBwYXJlbnRLZXkgLi4gXCI6ZGVwZW5kZW5jaWVzXCJcbiAgICBsb2NhbCByZXN1bHQgPSByY2FsbChcIlNSRU1cIiwgcGFyZW50RGVwZW5kZW5jaWVzS2V5LCBqb2JLZXkpXG4gICAgaWYgcmVzdWx0ID4gMCB0aGVuXG4gICAgICBsb2NhbCBwZW5kaW5nRGVwZW5kZW5jaWVzID0gcmNhbGwoXCJTQ0FSRFwiLCBwYXJlbnREZXBlbmRlbmNpZXNLZXkpXG4gICAgICBpZiBwZW5kaW5nRGVwZW5kZW5jaWVzID09IDAgdGhlblxuICAgICAgICBsb2NhbCBwYXJlbnRJZCA9IGdldEpvYklkRnJvbUtleShwYXJlbnRLZXkpXG4gICAgICAgIGxvY2FsIHBhcmVudFByZWZpeCA9IGdldEpvYktleVByZWZpeChwYXJlbnRLZXksIHBhcmVudElkKVxuICAgICAgICBsb2NhbCBudW1SZW1vdmVkRWxlbWVudHMgPSByY2FsbChcIlpSRU1cIiwgcGFyZW50UHJlZml4IC4uIFwid2FpdGluZy1jaGlsZHJlblwiLCBwYXJlbnRJZClcbiAgICAgICAgaWYgbnVtUmVtb3ZlZEVsZW1lbnRzID09IDEgdGhlblxuICAgICAgICAgIGlmIGhhcmQgdGhlbiAtLSByZW1vdmUgcGFyZW50IGluIHNhbWUgcXVldWVcbiAgICAgICAgICAgIGlmIHBhcmVudFByZWZpeCA9PSBiYXNlS2V5IHRoZW5cbiAgICAgICAgICAgICAgcmVtb3ZlUGFyZW50RGVwZW5kZW5jeUtleShwYXJlbnRLZXksIGhhcmQsIG5pbCwgYmFzZUtleSwgbmlsKVxuICAgICAgICAgICAgICByZW1vdmVKb2JLZXlzKHBhcmVudEtleSlcbiAgICAgICAgICAgICAgaWYgZGVib3VuY2VJZCB0aGVuXG4gICAgICAgICAgICAgICAgcmNhbGwoXCJERUxcIiwgcGFyZW50UHJlZml4IC4uIFwiZGU6XCIgLi4gZGVib3VuY2VJZClcbiAgICAgICAgICAgICAgZW5kXG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgIF9tb3ZlUGFyZW50VG9XYWl0KHBhcmVudFByZWZpeCwgcGFyZW50SWQpXG4gICAgICAgICAgICBlbmRcbiAgICAgICAgICBlbHNlXG4gICAgICAgICAgICBfbW92ZVBhcmVudFRvV2FpdChwYXJlbnRQcmVmaXgsIHBhcmVudElkLCB0cnVlKVxuICAgICAgICAgIGVuZFxuICAgICAgICBlbmRcbiAgICAgIGVuZFxuICAgICAgcmV0dXJuIHRydWVcbiAgICBlbmRcbiAgZWxzZVxuICAgIGxvY2FsIHBhcmVudEF0dHJpYnV0ZXMgPSByY2FsbChcIkhNR0VUXCIsIGpvYktleSwgXCJwYXJlbnRLZXlcIiwgXCJkZWlkXCIpXG4gICAgbG9jYWwgbWlzc2VkUGFyZW50S2V5ID0gcGFyZW50QXR0cmlidXRlc1sxXVxuICAgIGlmKCAodHlwZShtaXNzZWRQYXJlbnRLZXkpID09IFwic3RyaW5nXCIpIGFuZCBtaXNzZWRQYXJlbnRLZXkgfj0gXCJcIlxuICAgICAgYW5kIChyY2FsbChcIkVYSVNUU1wiLCBtaXNzZWRQYXJlbnRLZXkpID09IDEpKSB0aGVuXG4gICAgICBsb2NhbCBwYXJlbnREZXBlbmRlbmNpZXNLZXkgPSBtaXNzZWRQYXJlbnRLZXkgLi4gXCI6ZGVwZW5kZW5jaWVzXCJcbiAgICAgIGxvY2FsIHJlc3VsdCA9IHJjYWxsKFwiU1JFTVwiLCBwYXJlbnREZXBlbmRlbmNpZXNLZXksIGpvYktleSlcbiAgICAgIGlmIHJlc3VsdCA+IDAgdGhlblxuICAgICAgICBsb2NhbCBwZW5kaW5nRGVwZW5kZW5jaWVzID0gcmNhbGwoXCJTQ0FSRFwiLCBwYXJlbnREZXBlbmRlbmNpZXNLZXkpXG4gICAgICAgIGlmIHBlbmRpbmdEZXBlbmRlbmNpZXMgPT0gMCB0aGVuXG4gICAgICAgICAgbG9jYWwgcGFyZW50SWQgPSBnZXRKb2JJZEZyb21LZXkobWlzc2VkUGFyZW50S2V5KVxuICAgICAgICAgIGxvY2FsIHBhcmVudFByZWZpeCA9IGdldEpvYktleVByZWZpeChtaXNzZWRQYXJlbnRLZXksIHBhcmVudElkKVxuICAgICAgICAgIGxvY2FsIG51bVJlbW92ZWRFbGVtZW50cyA9IHJjYWxsKFwiWlJFTVwiLCBwYXJlbnRQcmVmaXggLi4gXCJ3YWl0aW5nLWNoaWxkcmVuXCIsIHBhcmVudElkKVxuICAgICAgICAgIGlmIG51bVJlbW92ZWRFbGVtZW50cyA9PSAxIHRoZW5cbiAgICAgICAgICAgIGlmIGhhcmQgdGhlblxuICAgICAgICAgICAgICBpZiBwYXJlbnRQcmVmaXggPT0gYmFzZUtleSB0aGVuXG4gICAgICAgICAgICAgICAgcmVtb3ZlUGFyZW50RGVwZW5kZW5jeUtleShtaXNzZWRQYXJlbnRLZXksIGhhcmQsIG5pbCwgYmFzZUtleSwgbmlsKVxuICAgICAgICAgICAgICAgIHJlbW92ZUpvYktleXMobWlzc2VkUGFyZW50S2V5KVxuICAgICAgICAgICAgICAgIGlmIHBhcmVudEF0dHJpYnV0ZXNbMl0gdGhlblxuICAgICAgICAgICAgICAgICAgcmNhbGwoXCJERUxcIiwgcGFyZW50UHJlZml4IC4uIFwiZGU6XCIgLi4gcGFyZW50QXR0cmlidXRlc1syXSlcbiAgICAgICAgICAgICAgICBlbmRcbiAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIF9tb3ZlUGFyZW50VG9XYWl0KHBhcmVudFByZWZpeCwgcGFyZW50SWQpXG4gICAgICAgICAgICAgIGVuZFxuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICBfbW92ZVBhcmVudFRvV2FpdChwYXJlbnRQcmVmaXgsIHBhcmVudElkLCB0cnVlKVxuICAgICAgICAgICAgZW5kXG4gICAgICAgICAgZW5kXG4gICAgICAgIGVuZFxuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgZW5kXG4gICAgZW5kXG4gIGVuZFxuICByZXR1cm4gZmFsc2VcbmVuZFxubG9jYWwgcmVtb3ZlSm9iQ2hpbGRyZW5cbmxvY2FsIHJlbW92ZUpvYldpdGhDaGlsZHJlblxucmVtb3ZlSm9iQ2hpbGRyZW4gPSBmdW5jdGlvbihwcmVmaXgsIGpvYktleSwgb3B0aW9ucylcbiAgICAtLSBDaGVjayBpZiB0aGlzIGpvYiBoYXMgY2hpbGRyZW5cbiAgICAtLSBJZiBzbywgd2UgYXJlIGdvaW5nIHRvIHRyeSB0byByZW1vdmUgdGhlIGNoaWxkcmVuIHJlY3Vyc2l2ZWx5IGluIGEgZGVwdGgtZmlyc3Qgd2F5XG4gICAgLS0gYmVjYXVzZSBpZiBzb21lIGpvYiBpcyBsb2NrZWQsIHdlIG11c3QgZXhpdCB3aXRoIGFuIGVycm9yLlxuICAgIGlmIG5vdCBvcHRpb25zLmlnbm9yZVByb2Nlc3NlZCB0aGVuXG4gICAgICAgIGxvY2FsIHByb2Nlc3NlZCA9IHJjYWxsKFwiSEdFVEFMTFwiLCBqb2JLZXkgLi4gXCI6cHJvY2Vzc2VkXCIpXG4gICAgICAgIGlmICNwcm9jZXNzZWQgPiAwIHRoZW5cbiAgICAgICAgICAgIGZvciBpID0gMSwgI3Byb2Nlc3NlZCwgMiBkb1xuICAgICAgICAgICAgICAgIGxvY2FsIGNoaWxkSm9iSWQgPSBnZXRKb2JJZEZyb21LZXkocHJvY2Vzc2VkW2ldKVxuICAgICAgICAgICAgICAgIGxvY2FsIGNoaWxkSm9iUHJlZml4ID0gZ2V0Sm9iS2V5UHJlZml4KHByb2Nlc3NlZFtpXSwgY2hpbGRKb2JJZClcbiAgICAgICAgICAgICAgICByZW1vdmVKb2JXaXRoQ2hpbGRyZW4oY2hpbGRKb2JQcmVmaXgsIGNoaWxkSm9iSWQsIGpvYktleSwgb3B0aW9ucylcbiAgICAgICAgICAgIGVuZFxuICAgICAgICBlbmRcbiAgICAgICAgbG9jYWwgZmFpbGVkID0gcmNhbGwoXCJIR0VUQUxMXCIsIGpvYktleSAuLiBcIjpmYWlsZWRcIilcbiAgICAgICAgaWYgI2ZhaWxlZCA+IDAgdGhlblxuICAgICAgICAgICAgZm9yIGkgPSAxLCAjZmFpbGVkLCAyIGRvXG4gICAgICAgICAgICAgICAgbG9jYWwgY2hpbGRKb2JJZCA9IGdldEpvYklkRnJvbUtleShmYWlsZWRbaV0pXG4gICAgICAgICAgICAgICAgbG9jYWwgY2hpbGRKb2JQcmVmaXggPSBnZXRKb2JLZXlQcmVmaXgoZmFpbGVkW2ldLCBjaGlsZEpvYklkKVxuICAgICAgICAgICAgICAgIHJlbW92ZUpvYldpdGhDaGlsZHJlbihjaGlsZEpvYlByZWZpeCwgY2hpbGRKb2JJZCwgam9iS2V5LCBvcHRpb25zKVxuICAgICAgICAgICAgZW5kXG4gICAgICAgIGVuZFxuICAgICAgICBsb2NhbCB1bnN1Y2Nlc3NmdWwgPSByY2FsbChcIlpSQU5HRVwiLCBqb2JLZXkgLi4gXCI6dW5zdWNjZXNzZnVsXCIsIDAsIC0xKVxuICAgICAgICBpZiAjdW5zdWNjZXNzZnVsID4gMCB0aGVuXG4gICAgICAgICAgICBmb3IgaSA9IDEsICN1bnN1Y2Nlc3NmdWwsIDEgZG9cbiAgICAgICAgICAgICAgICBsb2NhbCBjaGlsZEpvYklkID0gZ2V0Sm9iSWRGcm9tS2V5KHVuc3VjY2Vzc2Z1bFtpXSlcbiAgICAgICAgICAgICAgICBsb2NhbCBjaGlsZEpvYlByZWZpeCA9IGdldEpvYktleVByZWZpeCh1bnN1Y2Nlc3NmdWxbaV0sIGNoaWxkSm9iSWQpXG4gICAgICAgICAgICAgICAgcmVtb3ZlSm9iV2l0aENoaWxkcmVuKGNoaWxkSm9iUHJlZml4LCBjaGlsZEpvYklkLCBqb2JLZXksIG9wdGlvbnMpXG4gICAgICAgICAgICBlbmRcbiAgICAgICAgZW5kXG4gICAgZW5kXG4gICAgbG9jYWwgZGVwZW5kZW5jaWVzID0gcmNhbGwoXCJTTUVNQkVSU1wiLCBqb2JLZXkgLi4gXCI6ZGVwZW5kZW5jaWVzXCIpXG4gICAgaWYgI2RlcGVuZGVuY2llcyA+IDAgdGhlblxuICAgICAgICBmb3IgaSwgY2hpbGRKb2JLZXkgaW4gaXBhaXJzKGRlcGVuZGVuY2llcykgZG9cbiAgICAgICAgICAgIGxvY2FsIGNoaWxkSm9iSWQgPSBnZXRKb2JJZEZyb21LZXkoY2hpbGRKb2JLZXkpXG4gICAgICAgICAgICBsb2NhbCBjaGlsZEpvYlByZWZpeCA9IGdldEpvYktleVByZWZpeChjaGlsZEpvYktleSwgY2hpbGRKb2JJZClcbiAgICAgICAgICAgIHJlbW92ZUpvYldpdGhDaGlsZHJlbihjaGlsZEpvYlByZWZpeCwgY2hpbGRKb2JJZCwgam9iS2V5LCBvcHRpb25zKVxuICAgICAgICBlbmRcbiAgICBlbmRcbmVuZFxucmVtb3ZlSm9iV2l0aENoaWxkcmVuID0gZnVuY3Rpb24ocHJlZml4LCBqb2JJZCwgcGFyZW50S2V5LCBvcHRpb25zKVxuICAgIGxvY2FsIGpvYktleSA9IHByZWZpeCAuLiBqb2JJZFxuICAgIGlmIG9wdGlvbnMuaWdub3JlTG9ja2VkIHRoZW5cbiAgICAgICAgaWYgaXNMb2NrZWQocHJlZml4LCBqb2JJZCkgdGhlblxuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgIGVuZFxuICAgIGVuZFxuICAgIC0tIENoZWNrIGlmIGpvYiBpcyBpbiB0aGUgZmFpbGVkIHpzZXRcbiAgICBsb2NhbCBmYWlsZWRTZXQgPSBwcmVmaXggLi4gXCJmYWlsZWRcIlxuICAgIGlmIG5vdCAob3B0aW9ucy5pZ25vcmVQcm9jZXNzZWQgYW5kIHJjYWxsKFwiWlNDT1JFXCIsIGZhaWxlZFNldCwgam9iSWQpKSB0aGVuXG4gICAgICAgIHJlbW92ZVBhcmVudERlcGVuZGVuY3lLZXkoam9iS2V5LCBmYWxzZSwgcGFyZW50S2V5LCBuaWwpXG4gICAgICAgIGlmIG9wdGlvbnMucmVtb3ZlQ2hpbGRyZW4gdGhlblxuICAgICAgICAgICAgcmVtb3ZlSm9iQ2hpbGRyZW4ocHJlZml4LCBqb2JLZXksIG9wdGlvbnMpXG4gICAgICAgIGVuZFxuICAgICAgICBsb2NhbCBwcmV2ID0gcmVtb3ZlSm9iRnJvbUFueVN0YXRlKHByZWZpeCwgam9iSWQpXG4gICAgICAgIHJlbW92ZURlZHVwbGljYXRpb25LZXlJZk5lZWRlZE9uUmVtb3ZhbChwcmVmaXgsIGpvYktleSwgam9iSWQpXG4gICAgICAgIGlmIHJlbW92ZUpvYktleXMoam9iS2V5KSA+IDAgdGhlblxuICAgICAgICAgICAgbG9jYWwgbWV0YUtleSA9IHByZWZpeCAuLiBcIm1ldGFcIlxuICAgICAgICAgICAgbG9jYWwgbWF4RXZlbnRzID0gZ2V0T3JTZXRNYXhFdmVudHMobWV0YUtleSlcbiAgICAgICAgICAgIHJjYWxsKFwiWEFERFwiLCBwcmVmaXggLi4gXCJldmVudHNcIiwgXCJNQVhMRU5cIiwgXCJ+XCIsIG1heEV2ZW50cywgXCIqXCIsIFwiZXZlbnRcIiwgXCJyZW1vdmVkXCIsXG4gICAgICAgICAgICAgICAgXCJqb2JJZFwiLCBqb2JJZCwgXCJwcmV2XCIsIHByZXYpXG4gICAgICAgIGVuZFxuICAgIGVuZFxuZW5kXG5sb2NhbCBqb2JJZCA9IEFSR1ZbMV1cbmxvY2FsIHNob3VsZFJlbW92ZUNoaWxkcmVuID0gQVJHVlsyXVxubG9jYWwgcHJlZml4ID0gQVJHVlszXVxubG9jYWwgam9iS2V5ID0gS0VZU1sxXVxubG9jYWwgcmVwZWF0S2V5ID0gS0VZU1syXVxuaWYgaXNKb2JTY2hlZHVsZXJKb2Ioam9iSWQsIGpvYktleSwgcmVwZWF0S2V5KSB0aGVuXG4gICAgcmV0dXJuIC04XG5lbmRcbmlmIG5vdCBpc0xvY2tlZChwcmVmaXgsIGpvYklkLCBzaG91bGRSZW1vdmVDaGlsZHJlbikgdGhlblxuICAgIGxvY2FsIG9wdGlvbnMgPSB7XG4gICAgICAgIHJlbW92ZUNoaWxkcmVuID0gc2hvdWxkUmVtb3ZlQ2hpbGRyZW4gPT0gXCIxXCIsXG4gICAgICAgIGlnbm9yZVByb2Nlc3NlZCA9IGZhbHNlLFxuICAgICAgICBpZ25vcmVMb2NrZWQgPSBmYWxzZVxuICAgIH1cbiAgICByZW1vdmVKb2JXaXRoQ2hpbGRyZW4ocHJlZml4LCBqb2JJZCwgbmlsLCBvcHRpb25zKVxuICAgIHJldHVybiAxXG5lbmRcbnJldHVybiAwXG5gO1xuZXhwb3J0cy5yZW1vdmVKb2IgPSB7XG4gICAgbmFtZTogJ3JlbW92ZUpvYicsXG4gICAgY29udGVudCxcbiAgICBrZXlzOiAyLFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJlbW92ZUpvYi0yLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsInJlbW92ZUpvYiIsImNvbnRlbnQiLCJuYW1lIiwia2V5cyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/scripts/removeJob-2.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/scripts/removeJobScheduler-3.js":
/*!**********************************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/scripts/removeJobScheduler-3.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.removeJobScheduler = void 0;\nconst content = `--[[\n  Removes a job scheduler and its next scheduled job.\n  Input:\n    KEYS[1] job schedulers key\n    KEYS[2] delayed jobs key\n    KEYS[3] events key\n    ARGV[1] job scheduler id\n    ARGV[2] prefix key\n  Output:\n    0 - OK\n    1 - Missing repeat job\n  Events:\n    'removed'\n]]\nlocal rcall = redis.call\n-- Includes\n--[[\n  Function to remove job keys.\n]]\nlocal function removeJobKeys(jobKey)\n  return rcall(\"DEL\", jobKey, jobKey .. ':logs', jobKey .. ':dependencies',\n    jobKey .. ':processed', jobKey .. ':failed', jobKey .. ':unsuccessful')\nend\nlocal jobSchedulerId = ARGV[1]\nlocal prefix = ARGV[2]\nlocal millis = rcall(\"ZSCORE\", KEYS[1], jobSchedulerId)\nif millis then\n  -- Delete next programmed job.\n  local delayedJobId = \"repeat:\" .. jobSchedulerId .. \":\" .. millis\n  if(rcall(\"ZREM\", KEYS[2], delayedJobId) == 1) then\n    removeJobKeys(prefix .. delayedJobId)\n    rcall(\"XADD\", KEYS[3], \"*\", \"event\", \"removed\", \"jobId\", delayedJobId, \"prev\", \"delayed\")\n  end\nend\nif(rcall(\"ZREM\", KEYS[1], jobSchedulerId) == 1) then\n  rcall(\"DEL\", KEYS[1] .. \":\" .. jobSchedulerId)\n  return 0\nend\nreturn 1\n`;\nexports.removeJobScheduler = {\n    name: \"removeJobScheduler\",\n    content,\n    keys: 3\n}; //# sourceMappingURL=removeJobScheduler-3.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL3NjcmlwdHMvcmVtb3ZlSm9iU2NoZWR1bGVyLTMuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELDBCQUEwQixHQUFHLEtBQUs7QUFDbEMsTUFBTUcsVUFBVSxDQUFDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUF1Q2pCLENBQUM7QUFDREgsMEJBQTBCLEdBQUc7SUFDekJJLE1BQU07SUFDTkQ7SUFDQUUsTUFBTTtBQUNWLEdBQ0EsZ0RBQWdEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb25seWZhbnMtcGxhdGZvcm0vLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL3NjcmlwdHMvcmVtb3ZlSm9iU2NoZWR1bGVyLTMuanM/YzY1YyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMucmVtb3ZlSm9iU2NoZWR1bGVyID0gdm9pZCAwO1xuY29uc3QgY29udGVudCA9IGAtLVtbXG4gIFJlbW92ZXMgYSBqb2Igc2NoZWR1bGVyIGFuZCBpdHMgbmV4dCBzY2hlZHVsZWQgam9iLlxuICBJbnB1dDpcbiAgICBLRVlTWzFdIGpvYiBzY2hlZHVsZXJzIGtleVxuICAgIEtFWVNbMl0gZGVsYXllZCBqb2JzIGtleVxuICAgIEtFWVNbM10gZXZlbnRzIGtleVxuICAgIEFSR1ZbMV0gam9iIHNjaGVkdWxlciBpZFxuICAgIEFSR1ZbMl0gcHJlZml4IGtleVxuICBPdXRwdXQ6XG4gICAgMCAtIE9LXG4gICAgMSAtIE1pc3NpbmcgcmVwZWF0IGpvYlxuICBFdmVudHM6XG4gICAgJ3JlbW92ZWQnXG5dXVxubG9jYWwgcmNhbGwgPSByZWRpcy5jYWxsXG4tLSBJbmNsdWRlc1xuLS1bW1xuICBGdW5jdGlvbiB0byByZW1vdmUgam9iIGtleXMuXG5dXVxubG9jYWwgZnVuY3Rpb24gcmVtb3ZlSm9iS2V5cyhqb2JLZXkpXG4gIHJldHVybiByY2FsbChcIkRFTFwiLCBqb2JLZXksIGpvYktleSAuLiAnOmxvZ3MnLCBqb2JLZXkgLi4gJzpkZXBlbmRlbmNpZXMnLFxuICAgIGpvYktleSAuLiAnOnByb2Nlc3NlZCcsIGpvYktleSAuLiAnOmZhaWxlZCcsIGpvYktleSAuLiAnOnVuc3VjY2Vzc2Z1bCcpXG5lbmRcbmxvY2FsIGpvYlNjaGVkdWxlcklkID0gQVJHVlsxXVxubG9jYWwgcHJlZml4ID0gQVJHVlsyXVxubG9jYWwgbWlsbGlzID0gcmNhbGwoXCJaU0NPUkVcIiwgS0VZU1sxXSwgam9iU2NoZWR1bGVySWQpXG5pZiBtaWxsaXMgdGhlblxuICAtLSBEZWxldGUgbmV4dCBwcm9ncmFtbWVkIGpvYi5cbiAgbG9jYWwgZGVsYXllZEpvYklkID0gXCJyZXBlYXQ6XCIgLi4gam9iU2NoZWR1bGVySWQgLi4gXCI6XCIgLi4gbWlsbGlzXG4gIGlmKHJjYWxsKFwiWlJFTVwiLCBLRVlTWzJdLCBkZWxheWVkSm9iSWQpID09IDEpIHRoZW5cbiAgICByZW1vdmVKb2JLZXlzKHByZWZpeCAuLiBkZWxheWVkSm9iSWQpXG4gICAgcmNhbGwoXCJYQUREXCIsIEtFWVNbM10sIFwiKlwiLCBcImV2ZW50XCIsIFwicmVtb3ZlZFwiLCBcImpvYklkXCIsIGRlbGF5ZWRKb2JJZCwgXCJwcmV2XCIsIFwiZGVsYXllZFwiKVxuICBlbmRcbmVuZFxuaWYocmNhbGwoXCJaUkVNXCIsIEtFWVNbMV0sIGpvYlNjaGVkdWxlcklkKSA9PSAxKSB0aGVuXG4gIHJjYWxsKFwiREVMXCIsIEtFWVNbMV0gLi4gXCI6XCIgLi4gam9iU2NoZWR1bGVySWQpXG4gIHJldHVybiAwXG5lbmRcbnJldHVybiAxXG5gO1xuZXhwb3J0cy5yZW1vdmVKb2JTY2hlZHVsZXIgPSB7XG4gICAgbmFtZTogJ3JlbW92ZUpvYlNjaGVkdWxlcicsXG4gICAgY29udGVudCxcbiAgICBrZXlzOiAzLFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJlbW92ZUpvYlNjaGVkdWxlci0zLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsInJlbW92ZUpvYlNjaGVkdWxlciIsImNvbnRlbnQiLCJuYW1lIiwia2V5cyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/scripts/removeJobScheduler-3.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/scripts/removeRepeatable-3.js":
/*!********************************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/scripts/removeRepeatable-3.js ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.removeRepeatable = void 0;\nconst content = `--[[\n  Removes a repeatable job\n  Input:\n    KEYS[1] repeat jobs key\n    KEYS[2] delayed jobs key\n    KEYS[3] events key\n    ARGV[1] old repeat job id\n    ARGV[2] options concat\n    ARGV[3] repeat job key\n    ARGV[4] prefix key\n  Output:\n    0 - OK\n    1 - Missing repeat job\n  Events:\n    'removed'\n]]\nlocal rcall = redis.call\nlocal millis = rcall(\"ZSCORE\", KEYS[1], ARGV[2])\n-- Includes\n--[[\n  Function to remove job keys.\n]]\nlocal function removeJobKeys(jobKey)\n  return rcall(\"DEL\", jobKey, jobKey .. ':logs', jobKey .. ':dependencies',\n    jobKey .. ':processed', jobKey .. ':failed', jobKey .. ':unsuccessful')\nend\n-- legacy removal TODO: remove in next breaking change\nif millis then\n  -- Delete next programmed job.\n  local repeatJobId = ARGV[1] .. millis\n  if(rcall(\"ZREM\", KEYS[2], repeatJobId) == 1) then\n    removeJobKeys(ARGV[4] .. repeatJobId)\n    rcall(\"XADD\", KEYS[3], \"*\", \"event\", \"removed\", \"jobId\", repeatJobId, \"prev\", \"delayed\");\n  end\nend\nif(rcall(\"ZREM\", KEYS[1], ARGV[2]) == 1) then\n  return 0\nend\n-- new removal\nmillis = rcall(\"ZSCORE\", KEYS[1], ARGV[3])\nif millis then\n  -- Delete next programmed job.\n  local repeatJobId = \"repeat:\" .. ARGV[3] .. \":\" .. millis\n  if(rcall(\"ZREM\", KEYS[2], repeatJobId) == 1) then\n    removeJobKeys(ARGV[4] .. repeatJobId)\n    rcall(\"XADD\", KEYS[3], \"*\", \"event\", \"removed\", \"jobId\", repeatJobId, \"prev\", \"delayed\")\n  end\nend\nif(rcall(\"ZREM\", KEYS[1], ARGV[3]) == 1) then\n  rcall(\"DEL\", KEYS[1] .. \":\" .. ARGV[3])\n  return 0\nend\nreturn 1\n`;\nexports.removeRepeatable = {\n    name: \"removeRepeatable\",\n    content,\n    keys: 3\n}; //# sourceMappingURL=removeRepeatable-3.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL3NjcmlwdHMvcmVtb3ZlUmVwZWF0YWJsZS0zLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCx3QkFBd0IsR0FBRyxLQUFLO0FBQ2hDLE1BQU1HLFVBQVUsQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFxRGpCLENBQUM7QUFDREgsd0JBQXdCLEdBQUc7SUFDdkJJLE1BQU07SUFDTkQ7SUFDQUUsTUFBTTtBQUNWLEdBQ0EsOENBQThDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb25seWZhbnMtcGxhdGZvcm0vLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL3NjcmlwdHMvcmVtb3ZlUmVwZWF0YWJsZS0zLmpzP2M3YWMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLnJlbW92ZVJlcGVhdGFibGUgPSB2b2lkIDA7XG5jb25zdCBjb250ZW50ID0gYC0tW1tcbiAgUmVtb3ZlcyBhIHJlcGVhdGFibGUgam9iXG4gIElucHV0OlxuICAgIEtFWVNbMV0gcmVwZWF0IGpvYnMga2V5XG4gICAgS0VZU1syXSBkZWxheWVkIGpvYnMga2V5XG4gICAgS0VZU1szXSBldmVudHMga2V5XG4gICAgQVJHVlsxXSBvbGQgcmVwZWF0IGpvYiBpZFxuICAgIEFSR1ZbMl0gb3B0aW9ucyBjb25jYXRcbiAgICBBUkdWWzNdIHJlcGVhdCBqb2Iga2V5XG4gICAgQVJHVls0XSBwcmVmaXgga2V5XG4gIE91dHB1dDpcbiAgICAwIC0gT0tcbiAgICAxIC0gTWlzc2luZyByZXBlYXQgam9iXG4gIEV2ZW50czpcbiAgICAncmVtb3ZlZCdcbl1dXG5sb2NhbCByY2FsbCA9IHJlZGlzLmNhbGxcbmxvY2FsIG1pbGxpcyA9IHJjYWxsKFwiWlNDT1JFXCIsIEtFWVNbMV0sIEFSR1ZbMl0pXG4tLSBJbmNsdWRlc1xuLS1bW1xuICBGdW5jdGlvbiB0byByZW1vdmUgam9iIGtleXMuXG5dXVxubG9jYWwgZnVuY3Rpb24gcmVtb3ZlSm9iS2V5cyhqb2JLZXkpXG4gIHJldHVybiByY2FsbChcIkRFTFwiLCBqb2JLZXksIGpvYktleSAuLiAnOmxvZ3MnLCBqb2JLZXkgLi4gJzpkZXBlbmRlbmNpZXMnLFxuICAgIGpvYktleSAuLiAnOnByb2Nlc3NlZCcsIGpvYktleSAuLiAnOmZhaWxlZCcsIGpvYktleSAuLiAnOnVuc3VjY2Vzc2Z1bCcpXG5lbmRcbi0tIGxlZ2FjeSByZW1vdmFsIFRPRE86IHJlbW92ZSBpbiBuZXh0IGJyZWFraW5nIGNoYW5nZVxuaWYgbWlsbGlzIHRoZW5cbiAgLS0gRGVsZXRlIG5leHQgcHJvZ3JhbW1lZCBqb2IuXG4gIGxvY2FsIHJlcGVhdEpvYklkID0gQVJHVlsxXSAuLiBtaWxsaXNcbiAgaWYocmNhbGwoXCJaUkVNXCIsIEtFWVNbMl0sIHJlcGVhdEpvYklkKSA9PSAxKSB0aGVuXG4gICAgcmVtb3ZlSm9iS2V5cyhBUkdWWzRdIC4uIHJlcGVhdEpvYklkKVxuICAgIHJjYWxsKFwiWEFERFwiLCBLRVlTWzNdLCBcIipcIiwgXCJldmVudFwiLCBcInJlbW92ZWRcIiwgXCJqb2JJZFwiLCByZXBlYXRKb2JJZCwgXCJwcmV2XCIsIFwiZGVsYXllZFwiKTtcbiAgZW5kXG5lbmRcbmlmKHJjYWxsKFwiWlJFTVwiLCBLRVlTWzFdLCBBUkdWWzJdKSA9PSAxKSB0aGVuXG4gIHJldHVybiAwXG5lbmRcbi0tIG5ldyByZW1vdmFsXG5taWxsaXMgPSByY2FsbChcIlpTQ09SRVwiLCBLRVlTWzFdLCBBUkdWWzNdKVxuaWYgbWlsbGlzIHRoZW5cbiAgLS0gRGVsZXRlIG5leHQgcHJvZ3JhbW1lZCBqb2IuXG4gIGxvY2FsIHJlcGVhdEpvYklkID0gXCJyZXBlYXQ6XCIgLi4gQVJHVlszXSAuLiBcIjpcIiAuLiBtaWxsaXNcbiAgaWYocmNhbGwoXCJaUkVNXCIsIEtFWVNbMl0sIHJlcGVhdEpvYklkKSA9PSAxKSB0aGVuXG4gICAgcmVtb3ZlSm9iS2V5cyhBUkdWWzRdIC4uIHJlcGVhdEpvYklkKVxuICAgIHJjYWxsKFwiWEFERFwiLCBLRVlTWzNdLCBcIipcIiwgXCJldmVudFwiLCBcInJlbW92ZWRcIiwgXCJqb2JJZFwiLCByZXBlYXRKb2JJZCwgXCJwcmV2XCIsIFwiZGVsYXllZFwiKVxuICBlbmRcbmVuZFxuaWYocmNhbGwoXCJaUkVNXCIsIEtFWVNbMV0sIEFSR1ZbM10pID09IDEpIHRoZW5cbiAgcmNhbGwoXCJERUxcIiwgS0VZU1sxXSAuLiBcIjpcIiAuLiBBUkdWWzNdKVxuICByZXR1cm4gMFxuZW5kXG5yZXR1cm4gMVxuYDtcbmV4cG9ydHMucmVtb3ZlUmVwZWF0YWJsZSA9IHtcbiAgICBuYW1lOiAncmVtb3ZlUmVwZWF0YWJsZScsXG4gICAgY29udGVudCxcbiAgICBrZXlzOiAzLFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJlbW92ZVJlcGVhdGFibGUtMy5qcy5tYXAiXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJyZW1vdmVSZXBlYXRhYmxlIiwiY29udGVudCIsIm5hbWUiLCJrZXlzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/scripts/removeRepeatable-3.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/scripts/removeUnprocessedChildren-2.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/scripts/removeUnprocessedChildren-2.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.removeUnprocessedChildren = void 0;\nconst content = `--[[\n    Remove a job from all the statuses it may be in as well as all its data.\n    In order to be able to remove a job, it cannot be active.\n    Input:\n      KEYS[1] jobKey\n      KEYS[2] meta key\n      ARGV[1] prefix\n      ARGV[2] jobId\n    Events:\n      'removed' for every children removed\n]]\n-- Includes\n--[[\n    Remove a job from all the statuses it may be in as well as all its data,\n    including its children. Active children can be ignored.\n    Events:\n      'removed'\n]]\nlocal rcall = redis.call\n-- Includes\n--[[\n  Functions to destructure job key.\n  Just a bit of warning, these functions may be a bit slow and affect performance significantly.\n]]\nlocal getJobIdFromKey = function (jobKey)\n  return string.match(jobKey, \".*:(.*)\")\nend\nlocal getJobKeyPrefix = function (jobKey, jobId)\n  return string.sub(jobKey, 0, #jobKey - #jobId)\nend\n--[[\n  Function to get max events value or set by default 10000.\n]]\nlocal function getOrSetMaxEvents(metaKey)\n  local maxEvents = rcall(\"HGET\", metaKey, \"opts.maxLenEvents\")\n  if not maxEvents then\n    maxEvents = 10000\n    rcall(\"HSET\", metaKey, \"opts.maxLenEvents\", maxEvents)\n  end\n  return maxEvents\nend\n--[[\n  Function to check if the job belongs to a job scheduler and\n  current delayed job matches with jobId\n]]\nlocal function isJobSchedulerJob(jobId, jobKey, jobSchedulersKey)\n  local repeatJobKey = rcall(\"HGET\", jobKey, \"rjk\")\n  if repeatJobKey  then\n    local prevMillis = rcall(\"ZSCORE\", jobSchedulersKey, repeatJobKey)\n    if prevMillis then\n      local currentDelayedJobId = \"repeat:\" .. repeatJobKey .. \":\" .. prevMillis\n      return jobId == currentDelayedJobId\n    end\n  end\n  return false\nend\n--[[\n  Function to remove deduplication key if needed\n  when a job is being removed.\n]]\nlocal function removeDeduplicationKeyIfNeededOnRemoval(prefixKey,\n  jobKey, jobId)\n  local deduplicationId = rcall(\"HGET\", jobKey, \"deid\")\n  if deduplicationId then\n    local deduplicationKey = prefixKey .. \"de:\" .. deduplicationId\n    local currentJobId = rcall('GET', deduplicationKey)\n    if currentJobId and currentJobId == jobId then\n      return rcall(\"DEL\", deduplicationKey)\n    end\n  end\nend\n--[[\n  Function to remove from any state.\n  returns:\n    prev state\n]]\nlocal function removeJobFromAnyState( prefix, jobId)\n  -- We start with the ZSCORE checks, since they have O(1) complexity\n  if rcall(\"ZSCORE\", prefix .. \"completed\", jobId) then\n    rcall(\"ZREM\", prefix .. \"completed\", jobId)\n    return \"completed\"\n  elseif rcall(\"ZSCORE\", prefix .. \"waiting-children\", jobId) then\n    rcall(\"ZREM\", prefix .. \"waiting-children\", jobId)\n    return \"waiting-children\"\n  elseif rcall(\"ZSCORE\", prefix .. \"delayed\", jobId) then\n    rcall(\"ZREM\", prefix .. \"delayed\", jobId)\n    return \"delayed\"\n  elseif rcall(\"ZSCORE\", prefix .. \"failed\", jobId) then\n    rcall(\"ZREM\", prefix .. \"failed\", jobId)\n    return \"failed\"\n  elseif rcall(\"ZSCORE\", prefix .. \"prioritized\", jobId) then\n    rcall(\"ZREM\", prefix .. \"prioritized\", jobId)\n    return \"prioritized\"\n  -- We remove only 1 element from the list, since we assume they are not added multiple times\n  elseif rcall(\"LREM\", prefix .. \"wait\", 1, jobId) == 1 then\n    return \"wait\"\n  elseif rcall(\"LREM\", prefix .. \"paused\", 1, jobId) == 1 then\n    return \"paused\"\n  elseif rcall(\"LREM\", prefix .. \"active\", 1, jobId) == 1 then\n    return \"active\"\n  end\n  return \"unknown\"\nend\n--[[\n  Function to remove job keys.\n]]\nlocal function removeJobKeys(jobKey)\n  return rcall(\"DEL\", jobKey, jobKey .. ':logs', jobKey .. ':dependencies',\n    jobKey .. ':processed', jobKey .. ':failed', jobKey .. ':unsuccessful')\nend\n--[[\n  Check if this job has a parent. If so we will just remove it from\n  the parent child list, but if it is the last child we should move the parent to \"wait/paused\"\n  which requires code from \"moveToFinished\"\n]]\n-- Includes\n--[[\n  Function to add job in target list and add marker if needed.\n]]\n-- Includes\n--[[\n  Add marker if needed when a job is available.\n]]\nlocal function addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)\n  if not isPausedOrMaxed then\n    rcall(\"ZADD\", markerKey, 0, \"0\")\n  end  \nend\nlocal function addJobInTargetList(targetKey, markerKey, pushCmd, isPausedOrMaxed, jobId)\n  rcall(pushCmd, targetKey, jobId)\n  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)\nend\n--[[\n  Function to check for the meta.paused key to decide if we are paused or not\n  (since an empty list and !EXISTS are not really the same).\n]]\nlocal function getTargetQueueList(queueMetaKey, activeKey, waitKey, pausedKey)\n  local queueAttributes = rcall(\"HMGET\", queueMetaKey, \"paused\", \"concurrency\", \"max\", \"duration\")\n  if queueAttributes[1] then\n    return pausedKey, true, queueAttributes[3], queueAttributes[4]\n  else\n    if queueAttributes[2] then\n      local activeCount = rcall(\"LLEN\", activeKey)\n      if activeCount >= tonumber(queueAttributes[2]) then\n        return waitKey, true, queueAttributes[3], queueAttributes[4]\n      else\n        return waitKey, false, queueAttributes[3], queueAttributes[4]\n      end\n    end\n  end\n  return waitKey, false, queueAttributes[3], queueAttributes[4]\nend\nlocal function _moveParentToWait(parentPrefix, parentId, emitEvent)\n  local parentTarget, isPausedOrMaxed = getTargetQueueList(parentPrefix .. \"meta\", parentPrefix .. \"active\",\n    parentPrefix .. \"wait\", parentPrefix .. \"paused\")\n  addJobInTargetList(parentTarget, parentPrefix .. \"marker\", \"RPUSH\", isPausedOrMaxed, parentId)\n  if emitEvent then\n    local parentEventStream = parentPrefix .. \"events\"\n    rcall(\"XADD\", parentEventStream, \"*\", \"event\", \"waiting\", \"jobId\", parentId, \"prev\", \"waiting-children\")\n  end\nend\nlocal function removeParentDependencyKey(jobKey, hard, parentKey, baseKey, debounceId)\n  if parentKey then\n    local parentDependenciesKey = parentKey .. \":dependencies\"\n    local result = rcall(\"SREM\", parentDependenciesKey, jobKey)\n    if result > 0 then\n      local pendingDependencies = rcall(\"SCARD\", parentDependenciesKey)\n      if pendingDependencies == 0 then\n        local parentId = getJobIdFromKey(parentKey)\n        local parentPrefix = getJobKeyPrefix(parentKey, parentId)\n        local numRemovedElements = rcall(\"ZREM\", parentPrefix .. \"waiting-children\", parentId)\n        if numRemovedElements == 1 then\n          if hard then -- remove parent in same queue\n            if parentPrefix == baseKey then\n              removeParentDependencyKey(parentKey, hard, nil, baseKey, nil)\n              removeJobKeys(parentKey)\n              if debounceId then\n                rcall(\"DEL\", parentPrefix .. \"de:\" .. debounceId)\n              end\n            else\n              _moveParentToWait(parentPrefix, parentId)\n            end\n          else\n            _moveParentToWait(parentPrefix, parentId, true)\n          end\n        end\n      end\n      return true\n    end\n  else\n    local parentAttributes = rcall(\"HMGET\", jobKey, \"parentKey\", \"deid\")\n    local missedParentKey = parentAttributes[1]\n    if( (type(missedParentKey) == \"string\") and missedParentKey ~= \"\"\n      and (rcall(\"EXISTS\", missedParentKey) == 1)) then\n      local parentDependenciesKey = missedParentKey .. \":dependencies\"\n      local result = rcall(\"SREM\", parentDependenciesKey, jobKey)\n      if result > 0 then\n        local pendingDependencies = rcall(\"SCARD\", parentDependenciesKey)\n        if pendingDependencies == 0 then\n          local parentId = getJobIdFromKey(missedParentKey)\n          local parentPrefix = getJobKeyPrefix(missedParentKey, parentId)\n          local numRemovedElements = rcall(\"ZREM\", parentPrefix .. \"waiting-children\", parentId)\n          if numRemovedElements == 1 then\n            if hard then\n              if parentPrefix == baseKey then\n                removeParentDependencyKey(missedParentKey, hard, nil, baseKey, nil)\n                removeJobKeys(missedParentKey)\n                if parentAttributes[2] then\n                  rcall(\"DEL\", parentPrefix .. \"de:\" .. parentAttributes[2])\n                end\n              else\n                _moveParentToWait(parentPrefix, parentId)\n              end\n            else\n              _moveParentToWait(parentPrefix, parentId, true)\n            end\n          end\n        end\n        return true\n      end\n    end\n  end\n  return false\nend\n--[[\n  Function to recursively check if there are no locks\n  on the jobs to be removed.\n  returns:\n    boolean\n]]\nlocal function isLocked( prefix, jobId, removeChildren)\n  local jobKey = prefix .. jobId;\n  -- Check if this job is locked\n  local lockKey = jobKey .. ':lock'\n  local lock = rcall(\"GET\", lockKey)\n  if not lock then\n    if removeChildren == \"1\" then\n      local dependencies = rcall(\"SMEMBERS\", jobKey .. \":dependencies\")\n      if (#dependencies > 0) then\n        for i, childJobKey in ipairs(dependencies) do\n          -- We need to get the jobId for this job.\n          local childJobId = getJobIdFromKey(childJobKey)\n          local childJobPrefix = getJobKeyPrefix(childJobKey, childJobId)\n          local result = isLocked( childJobPrefix, childJobId, removeChildren )\n          if result then\n            return true\n          end\n        end\n      end\n    end\n    return false\n  end\n  return true\nend\nlocal removeJobChildren\nlocal removeJobWithChildren\nremoveJobChildren = function(prefix, jobKey, options)\n    -- Check if this job has children\n    -- If so, we are going to try to remove the children recursively in a depth-first way\n    -- because if some job is locked, we must exit with an error.\n    if not options.ignoreProcessed then\n        local processed = rcall(\"HGETALL\", jobKey .. \":processed\")\n        if #processed > 0 then\n            for i = 1, #processed, 2 do\n                local childJobId = getJobIdFromKey(processed[i])\n                local childJobPrefix = getJobKeyPrefix(processed[i], childJobId)\n                removeJobWithChildren(childJobPrefix, childJobId, jobKey, options)\n            end\n        end\n        local failed = rcall(\"HGETALL\", jobKey .. \":failed\")\n        if #failed > 0 then\n            for i = 1, #failed, 2 do\n                local childJobId = getJobIdFromKey(failed[i])\n                local childJobPrefix = getJobKeyPrefix(failed[i], childJobId)\n                removeJobWithChildren(childJobPrefix, childJobId, jobKey, options)\n            end\n        end\n        local unsuccessful = rcall(\"ZRANGE\", jobKey .. \":unsuccessful\", 0, -1)\n        if #unsuccessful > 0 then\n            for i = 1, #unsuccessful, 1 do\n                local childJobId = getJobIdFromKey(unsuccessful[i])\n                local childJobPrefix = getJobKeyPrefix(unsuccessful[i], childJobId)\n                removeJobWithChildren(childJobPrefix, childJobId, jobKey, options)\n            end\n        end\n    end\n    local dependencies = rcall(\"SMEMBERS\", jobKey .. \":dependencies\")\n    if #dependencies > 0 then\n        for i, childJobKey in ipairs(dependencies) do\n            local childJobId = getJobIdFromKey(childJobKey)\n            local childJobPrefix = getJobKeyPrefix(childJobKey, childJobId)\n            removeJobWithChildren(childJobPrefix, childJobId, jobKey, options)\n        end\n    end\nend\nremoveJobWithChildren = function(prefix, jobId, parentKey, options)\n    local jobKey = prefix .. jobId\n    if options.ignoreLocked then\n        if isLocked(prefix, jobId) then\n            return\n        end\n    end\n    -- Check if job is in the failed zset\n    local failedSet = prefix .. \"failed\"\n    if not (options.ignoreProcessed and rcall(\"ZSCORE\", failedSet, jobId)) then\n        removeParentDependencyKey(jobKey, false, parentKey, nil)\n        if options.removeChildren then\n            removeJobChildren(prefix, jobKey, options)\n        end\n        local prev = removeJobFromAnyState(prefix, jobId)\n        removeDeduplicationKeyIfNeededOnRemoval(prefix, jobKey, jobId)\n        if removeJobKeys(jobKey) > 0 then\n            local metaKey = prefix .. \"meta\"\n            local maxEvents = getOrSetMaxEvents(metaKey)\n            rcall(\"XADD\", prefix .. \"events\", \"MAXLEN\", \"~\", maxEvents, \"*\", \"event\", \"removed\",\n                \"jobId\", jobId, \"prev\", prev)\n        end\n    end\nend\nlocal prefix = ARGV[1]\nlocal jobId = ARGV[2]\nlocal jobKey = KEYS[1]\nlocal metaKey = KEYS[2]\nlocal options = {\n  removeChildren = \"1\",\n  ignoreProcessed = true,\n  ignoreLocked = true\n}\nremoveJobChildren(prefix, jobKey, options) \n`;\nexports.removeUnprocessedChildren = {\n    name: \"removeUnprocessedChildren\",\n    content,\n    keys: 2\n}; //# sourceMappingURL=removeUnprocessedChildren-2.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL3NjcmlwdHMvcmVtb3ZlVW5wcm9jZXNzZWRDaGlsZHJlbi0yLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCxpQ0FBaUMsR0FBRyxLQUFLO0FBQ3pDLE1BQU1HLFVBQVUsQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUF5VWpCLENBQUM7QUFDREgsaUNBQWlDLEdBQUc7SUFDaENJLE1BQU07SUFDTkQ7SUFDQUUsTUFBTTtBQUNWLEdBQ0EsdURBQXVEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb25seWZhbnMtcGxhdGZvcm0vLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL3NjcmlwdHMvcmVtb3ZlVW5wcm9jZXNzZWRDaGlsZHJlbi0yLmpzP2QzZjgiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLnJlbW92ZVVucHJvY2Vzc2VkQ2hpbGRyZW4gPSB2b2lkIDA7XG5jb25zdCBjb250ZW50ID0gYC0tW1tcbiAgICBSZW1vdmUgYSBqb2IgZnJvbSBhbGwgdGhlIHN0YXR1c2VzIGl0IG1heSBiZSBpbiBhcyB3ZWxsIGFzIGFsbCBpdHMgZGF0YS5cbiAgICBJbiBvcmRlciB0byBiZSBhYmxlIHRvIHJlbW92ZSBhIGpvYiwgaXQgY2Fubm90IGJlIGFjdGl2ZS5cbiAgICBJbnB1dDpcbiAgICAgIEtFWVNbMV0gam9iS2V5XG4gICAgICBLRVlTWzJdIG1ldGEga2V5XG4gICAgICBBUkdWWzFdIHByZWZpeFxuICAgICAgQVJHVlsyXSBqb2JJZFxuICAgIEV2ZW50czpcbiAgICAgICdyZW1vdmVkJyBmb3IgZXZlcnkgY2hpbGRyZW4gcmVtb3ZlZFxuXV1cbi0tIEluY2x1ZGVzXG4tLVtbXG4gICAgUmVtb3ZlIGEgam9iIGZyb20gYWxsIHRoZSBzdGF0dXNlcyBpdCBtYXkgYmUgaW4gYXMgd2VsbCBhcyBhbGwgaXRzIGRhdGEsXG4gICAgaW5jbHVkaW5nIGl0cyBjaGlsZHJlbi4gQWN0aXZlIGNoaWxkcmVuIGNhbiBiZSBpZ25vcmVkLlxuICAgIEV2ZW50czpcbiAgICAgICdyZW1vdmVkJ1xuXV1cbmxvY2FsIHJjYWxsID0gcmVkaXMuY2FsbFxuLS0gSW5jbHVkZXNcbi0tW1tcbiAgRnVuY3Rpb25zIHRvIGRlc3RydWN0dXJlIGpvYiBrZXkuXG4gIEp1c3QgYSBiaXQgb2Ygd2FybmluZywgdGhlc2UgZnVuY3Rpb25zIG1heSBiZSBhIGJpdCBzbG93IGFuZCBhZmZlY3QgcGVyZm9ybWFuY2Ugc2lnbmlmaWNhbnRseS5cbl1dXG5sb2NhbCBnZXRKb2JJZEZyb21LZXkgPSBmdW5jdGlvbiAoam9iS2V5KVxuICByZXR1cm4gc3RyaW5nLm1hdGNoKGpvYktleSwgXCIuKjooLiopXCIpXG5lbmRcbmxvY2FsIGdldEpvYktleVByZWZpeCA9IGZ1bmN0aW9uIChqb2JLZXksIGpvYklkKVxuICByZXR1cm4gc3RyaW5nLnN1Yihqb2JLZXksIDAsICNqb2JLZXkgLSAjam9iSWQpXG5lbmRcbi0tW1tcbiAgRnVuY3Rpb24gdG8gZ2V0IG1heCBldmVudHMgdmFsdWUgb3Igc2V0IGJ5IGRlZmF1bHQgMTAwMDAuXG5dXVxubG9jYWwgZnVuY3Rpb24gZ2V0T3JTZXRNYXhFdmVudHMobWV0YUtleSlcbiAgbG9jYWwgbWF4RXZlbnRzID0gcmNhbGwoXCJIR0VUXCIsIG1ldGFLZXksIFwib3B0cy5tYXhMZW5FdmVudHNcIilcbiAgaWYgbm90IG1heEV2ZW50cyB0aGVuXG4gICAgbWF4RXZlbnRzID0gMTAwMDBcbiAgICByY2FsbChcIkhTRVRcIiwgbWV0YUtleSwgXCJvcHRzLm1heExlbkV2ZW50c1wiLCBtYXhFdmVudHMpXG4gIGVuZFxuICByZXR1cm4gbWF4RXZlbnRzXG5lbmRcbi0tW1tcbiAgRnVuY3Rpb24gdG8gY2hlY2sgaWYgdGhlIGpvYiBiZWxvbmdzIHRvIGEgam9iIHNjaGVkdWxlciBhbmRcbiAgY3VycmVudCBkZWxheWVkIGpvYiBtYXRjaGVzIHdpdGggam9iSWRcbl1dXG5sb2NhbCBmdW5jdGlvbiBpc0pvYlNjaGVkdWxlckpvYihqb2JJZCwgam9iS2V5LCBqb2JTY2hlZHVsZXJzS2V5KVxuICBsb2NhbCByZXBlYXRKb2JLZXkgPSByY2FsbChcIkhHRVRcIiwgam9iS2V5LCBcInJqa1wiKVxuICBpZiByZXBlYXRKb2JLZXkgIHRoZW5cbiAgICBsb2NhbCBwcmV2TWlsbGlzID0gcmNhbGwoXCJaU0NPUkVcIiwgam9iU2NoZWR1bGVyc0tleSwgcmVwZWF0Sm9iS2V5KVxuICAgIGlmIHByZXZNaWxsaXMgdGhlblxuICAgICAgbG9jYWwgY3VycmVudERlbGF5ZWRKb2JJZCA9IFwicmVwZWF0OlwiIC4uIHJlcGVhdEpvYktleSAuLiBcIjpcIiAuLiBwcmV2TWlsbGlzXG4gICAgICByZXR1cm4gam9iSWQgPT0gY3VycmVudERlbGF5ZWRKb2JJZFxuICAgIGVuZFxuICBlbmRcbiAgcmV0dXJuIGZhbHNlXG5lbmRcbi0tW1tcbiAgRnVuY3Rpb24gdG8gcmVtb3ZlIGRlZHVwbGljYXRpb24ga2V5IGlmIG5lZWRlZFxuICB3aGVuIGEgam9iIGlzIGJlaW5nIHJlbW92ZWQuXG5dXVxubG9jYWwgZnVuY3Rpb24gcmVtb3ZlRGVkdXBsaWNhdGlvbktleUlmTmVlZGVkT25SZW1vdmFsKHByZWZpeEtleSxcbiAgam9iS2V5LCBqb2JJZClcbiAgbG9jYWwgZGVkdXBsaWNhdGlvbklkID0gcmNhbGwoXCJIR0VUXCIsIGpvYktleSwgXCJkZWlkXCIpXG4gIGlmIGRlZHVwbGljYXRpb25JZCB0aGVuXG4gICAgbG9jYWwgZGVkdXBsaWNhdGlvbktleSA9IHByZWZpeEtleSAuLiBcImRlOlwiIC4uIGRlZHVwbGljYXRpb25JZFxuICAgIGxvY2FsIGN1cnJlbnRKb2JJZCA9IHJjYWxsKCdHRVQnLCBkZWR1cGxpY2F0aW9uS2V5KVxuICAgIGlmIGN1cnJlbnRKb2JJZCBhbmQgY3VycmVudEpvYklkID09IGpvYklkIHRoZW5cbiAgICAgIHJldHVybiByY2FsbChcIkRFTFwiLCBkZWR1cGxpY2F0aW9uS2V5KVxuICAgIGVuZFxuICBlbmRcbmVuZFxuLS1bW1xuICBGdW5jdGlvbiB0byByZW1vdmUgZnJvbSBhbnkgc3RhdGUuXG4gIHJldHVybnM6XG4gICAgcHJldiBzdGF0ZVxuXV1cbmxvY2FsIGZ1bmN0aW9uIHJlbW92ZUpvYkZyb21BbnlTdGF0ZSggcHJlZml4LCBqb2JJZClcbiAgLS0gV2Ugc3RhcnQgd2l0aCB0aGUgWlNDT1JFIGNoZWNrcywgc2luY2UgdGhleSBoYXZlIE8oMSkgY29tcGxleGl0eVxuICBpZiByY2FsbChcIlpTQ09SRVwiLCBwcmVmaXggLi4gXCJjb21wbGV0ZWRcIiwgam9iSWQpIHRoZW5cbiAgICByY2FsbChcIlpSRU1cIiwgcHJlZml4IC4uIFwiY29tcGxldGVkXCIsIGpvYklkKVxuICAgIHJldHVybiBcImNvbXBsZXRlZFwiXG4gIGVsc2VpZiByY2FsbChcIlpTQ09SRVwiLCBwcmVmaXggLi4gXCJ3YWl0aW5nLWNoaWxkcmVuXCIsIGpvYklkKSB0aGVuXG4gICAgcmNhbGwoXCJaUkVNXCIsIHByZWZpeCAuLiBcIndhaXRpbmctY2hpbGRyZW5cIiwgam9iSWQpXG4gICAgcmV0dXJuIFwid2FpdGluZy1jaGlsZHJlblwiXG4gIGVsc2VpZiByY2FsbChcIlpTQ09SRVwiLCBwcmVmaXggLi4gXCJkZWxheWVkXCIsIGpvYklkKSB0aGVuXG4gICAgcmNhbGwoXCJaUkVNXCIsIHByZWZpeCAuLiBcImRlbGF5ZWRcIiwgam9iSWQpXG4gICAgcmV0dXJuIFwiZGVsYXllZFwiXG4gIGVsc2VpZiByY2FsbChcIlpTQ09SRVwiLCBwcmVmaXggLi4gXCJmYWlsZWRcIiwgam9iSWQpIHRoZW5cbiAgICByY2FsbChcIlpSRU1cIiwgcHJlZml4IC4uIFwiZmFpbGVkXCIsIGpvYklkKVxuICAgIHJldHVybiBcImZhaWxlZFwiXG4gIGVsc2VpZiByY2FsbChcIlpTQ09SRVwiLCBwcmVmaXggLi4gXCJwcmlvcml0aXplZFwiLCBqb2JJZCkgdGhlblxuICAgIHJjYWxsKFwiWlJFTVwiLCBwcmVmaXggLi4gXCJwcmlvcml0aXplZFwiLCBqb2JJZClcbiAgICByZXR1cm4gXCJwcmlvcml0aXplZFwiXG4gIC0tIFdlIHJlbW92ZSBvbmx5IDEgZWxlbWVudCBmcm9tIHRoZSBsaXN0LCBzaW5jZSB3ZSBhc3N1bWUgdGhleSBhcmUgbm90IGFkZGVkIG11bHRpcGxlIHRpbWVzXG4gIGVsc2VpZiByY2FsbChcIkxSRU1cIiwgcHJlZml4IC4uIFwid2FpdFwiLCAxLCBqb2JJZCkgPT0gMSB0aGVuXG4gICAgcmV0dXJuIFwid2FpdFwiXG4gIGVsc2VpZiByY2FsbChcIkxSRU1cIiwgcHJlZml4IC4uIFwicGF1c2VkXCIsIDEsIGpvYklkKSA9PSAxIHRoZW5cbiAgICByZXR1cm4gXCJwYXVzZWRcIlxuICBlbHNlaWYgcmNhbGwoXCJMUkVNXCIsIHByZWZpeCAuLiBcImFjdGl2ZVwiLCAxLCBqb2JJZCkgPT0gMSB0aGVuXG4gICAgcmV0dXJuIFwiYWN0aXZlXCJcbiAgZW5kXG4gIHJldHVybiBcInVua25vd25cIlxuZW5kXG4tLVtbXG4gIEZ1bmN0aW9uIHRvIHJlbW92ZSBqb2Iga2V5cy5cbl1dXG5sb2NhbCBmdW5jdGlvbiByZW1vdmVKb2JLZXlzKGpvYktleSlcbiAgcmV0dXJuIHJjYWxsKFwiREVMXCIsIGpvYktleSwgam9iS2V5IC4uICc6bG9ncycsIGpvYktleSAuLiAnOmRlcGVuZGVuY2llcycsXG4gICAgam9iS2V5IC4uICc6cHJvY2Vzc2VkJywgam9iS2V5IC4uICc6ZmFpbGVkJywgam9iS2V5IC4uICc6dW5zdWNjZXNzZnVsJylcbmVuZFxuLS1bW1xuICBDaGVjayBpZiB0aGlzIGpvYiBoYXMgYSBwYXJlbnQuIElmIHNvIHdlIHdpbGwganVzdCByZW1vdmUgaXQgZnJvbVxuICB0aGUgcGFyZW50IGNoaWxkIGxpc3QsIGJ1dCBpZiBpdCBpcyB0aGUgbGFzdCBjaGlsZCB3ZSBzaG91bGQgbW92ZSB0aGUgcGFyZW50IHRvIFwid2FpdC9wYXVzZWRcIlxuICB3aGljaCByZXF1aXJlcyBjb2RlIGZyb20gXCJtb3ZlVG9GaW5pc2hlZFwiXG5dXVxuLS0gSW5jbHVkZXNcbi0tW1tcbiAgRnVuY3Rpb24gdG8gYWRkIGpvYiBpbiB0YXJnZXQgbGlzdCBhbmQgYWRkIG1hcmtlciBpZiBuZWVkZWQuXG5dXVxuLS0gSW5jbHVkZXNcbi0tW1tcbiAgQWRkIG1hcmtlciBpZiBuZWVkZWQgd2hlbiBhIGpvYiBpcyBhdmFpbGFibGUuXG5dXVxubG9jYWwgZnVuY3Rpb24gYWRkQmFzZU1hcmtlcklmTmVlZGVkKG1hcmtlcktleSwgaXNQYXVzZWRPck1heGVkKVxuICBpZiBub3QgaXNQYXVzZWRPck1heGVkIHRoZW5cbiAgICByY2FsbChcIlpBRERcIiwgbWFya2VyS2V5LCAwLCBcIjBcIilcbiAgZW5kICBcbmVuZFxubG9jYWwgZnVuY3Rpb24gYWRkSm9iSW5UYXJnZXRMaXN0KHRhcmdldEtleSwgbWFya2VyS2V5LCBwdXNoQ21kLCBpc1BhdXNlZE9yTWF4ZWQsIGpvYklkKVxuICByY2FsbChwdXNoQ21kLCB0YXJnZXRLZXksIGpvYklkKVxuICBhZGRCYXNlTWFya2VySWZOZWVkZWQobWFya2VyS2V5LCBpc1BhdXNlZE9yTWF4ZWQpXG5lbmRcbi0tW1tcbiAgRnVuY3Rpb24gdG8gY2hlY2sgZm9yIHRoZSBtZXRhLnBhdXNlZCBrZXkgdG8gZGVjaWRlIGlmIHdlIGFyZSBwYXVzZWQgb3Igbm90XG4gIChzaW5jZSBhbiBlbXB0eSBsaXN0IGFuZCAhRVhJU1RTIGFyZSBub3QgcmVhbGx5IHRoZSBzYW1lKS5cbl1dXG5sb2NhbCBmdW5jdGlvbiBnZXRUYXJnZXRRdWV1ZUxpc3QocXVldWVNZXRhS2V5LCBhY3RpdmVLZXksIHdhaXRLZXksIHBhdXNlZEtleSlcbiAgbG9jYWwgcXVldWVBdHRyaWJ1dGVzID0gcmNhbGwoXCJITUdFVFwiLCBxdWV1ZU1ldGFLZXksIFwicGF1c2VkXCIsIFwiY29uY3VycmVuY3lcIiwgXCJtYXhcIiwgXCJkdXJhdGlvblwiKVxuICBpZiBxdWV1ZUF0dHJpYnV0ZXNbMV0gdGhlblxuICAgIHJldHVybiBwYXVzZWRLZXksIHRydWUsIHF1ZXVlQXR0cmlidXRlc1szXSwgcXVldWVBdHRyaWJ1dGVzWzRdXG4gIGVsc2VcbiAgICBpZiBxdWV1ZUF0dHJpYnV0ZXNbMl0gdGhlblxuICAgICAgbG9jYWwgYWN0aXZlQ291bnQgPSByY2FsbChcIkxMRU5cIiwgYWN0aXZlS2V5KVxuICAgICAgaWYgYWN0aXZlQ291bnQgPj0gdG9udW1iZXIocXVldWVBdHRyaWJ1dGVzWzJdKSB0aGVuXG4gICAgICAgIHJldHVybiB3YWl0S2V5LCB0cnVlLCBxdWV1ZUF0dHJpYnV0ZXNbM10sIHF1ZXVlQXR0cmlidXRlc1s0XVxuICAgICAgZWxzZVxuICAgICAgICByZXR1cm4gd2FpdEtleSwgZmFsc2UsIHF1ZXVlQXR0cmlidXRlc1szXSwgcXVldWVBdHRyaWJ1dGVzWzRdXG4gICAgICBlbmRcbiAgICBlbmRcbiAgZW5kXG4gIHJldHVybiB3YWl0S2V5LCBmYWxzZSwgcXVldWVBdHRyaWJ1dGVzWzNdLCBxdWV1ZUF0dHJpYnV0ZXNbNF1cbmVuZFxubG9jYWwgZnVuY3Rpb24gX21vdmVQYXJlbnRUb1dhaXQocGFyZW50UHJlZml4LCBwYXJlbnRJZCwgZW1pdEV2ZW50KVxuICBsb2NhbCBwYXJlbnRUYXJnZXQsIGlzUGF1c2VkT3JNYXhlZCA9IGdldFRhcmdldFF1ZXVlTGlzdChwYXJlbnRQcmVmaXggLi4gXCJtZXRhXCIsIHBhcmVudFByZWZpeCAuLiBcImFjdGl2ZVwiLFxuICAgIHBhcmVudFByZWZpeCAuLiBcIndhaXRcIiwgcGFyZW50UHJlZml4IC4uIFwicGF1c2VkXCIpXG4gIGFkZEpvYkluVGFyZ2V0TGlzdChwYXJlbnRUYXJnZXQsIHBhcmVudFByZWZpeCAuLiBcIm1hcmtlclwiLCBcIlJQVVNIXCIsIGlzUGF1c2VkT3JNYXhlZCwgcGFyZW50SWQpXG4gIGlmIGVtaXRFdmVudCB0aGVuXG4gICAgbG9jYWwgcGFyZW50RXZlbnRTdHJlYW0gPSBwYXJlbnRQcmVmaXggLi4gXCJldmVudHNcIlxuICAgIHJjYWxsKFwiWEFERFwiLCBwYXJlbnRFdmVudFN0cmVhbSwgXCIqXCIsIFwiZXZlbnRcIiwgXCJ3YWl0aW5nXCIsIFwiam9iSWRcIiwgcGFyZW50SWQsIFwicHJldlwiLCBcIndhaXRpbmctY2hpbGRyZW5cIilcbiAgZW5kXG5lbmRcbmxvY2FsIGZ1bmN0aW9uIHJlbW92ZVBhcmVudERlcGVuZGVuY3lLZXkoam9iS2V5LCBoYXJkLCBwYXJlbnRLZXksIGJhc2VLZXksIGRlYm91bmNlSWQpXG4gIGlmIHBhcmVudEtleSB0aGVuXG4gICAgbG9jYWwgcGFyZW50RGVwZW5kZW5jaWVzS2V5ID0gcGFyZW50S2V5IC4uIFwiOmRlcGVuZGVuY2llc1wiXG4gICAgbG9jYWwgcmVzdWx0ID0gcmNhbGwoXCJTUkVNXCIsIHBhcmVudERlcGVuZGVuY2llc0tleSwgam9iS2V5KVxuICAgIGlmIHJlc3VsdCA+IDAgdGhlblxuICAgICAgbG9jYWwgcGVuZGluZ0RlcGVuZGVuY2llcyA9IHJjYWxsKFwiU0NBUkRcIiwgcGFyZW50RGVwZW5kZW5jaWVzS2V5KVxuICAgICAgaWYgcGVuZGluZ0RlcGVuZGVuY2llcyA9PSAwIHRoZW5cbiAgICAgICAgbG9jYWwgcGFyZW50SWQgPSBnZXRKb2JJZEZyb21LZXkocGFyZW50S2V5KVxuICAgICAgICBsb2NhbCBwYXJlbnRQcmVmaXggPSBnZXRKb2JLZXlQcmVmaXgocGFyZW50S2V5LCBwYXJlbnRJZClcbiAgICAgICAgbG9jYWwgbnVtUmVtb3ZlZEVsZW1lbnRzID0gcmNhbGwoXCJaUkVNXCIsIHBhcmVudFByZWZpeCAuLiBcIndhaXRpbmctY2hpbGRyZW5cIiwgcGFyZW50SWQpXG4gICAgICAgIGlmIG51bVJlbW92ZWRFbGVtZW50cyA9PSAxIHRoZW5cbiAgICAgICAgICBpZiBoYXJkIHRoZW4gLS0gcmVtb3ZlIHBhcmVudCBpbiBzYW1lIHF1ZXVlXG4gICAgICAgICAgICBpZiBwYXJlbnRQcmVmaXggPT0gYmFzZUtleSB0aGVuXG4gICAgICAgICAgICAgIHJlbW92ZVBhcmVudERlcGVuZGVuY3lLZXkocGFyZW50S2V5LCBoYXJkLCBuaWwsIGJhc2VLZXksIG5pbClcbiAgICAgICAgICAgICAgcmVtb3ZlSm9iS2V5cyhwYXJlbnRLZXkpXG4gICAgICAgICAgICAgIGlmIGRlYm91bmNlSWQgdGhlblxuICAgICAgICAgICAgICAgIHJjYWxsKFwiREVMXCIsIHBhcmVudFByZWZpeCAuLiBcImRlOlwiIC4uIGRlYm91bmNlSWQpXG4gICAgICAgICAgICAgIGVuZFxuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICBfbW92ZVBhcmVudFRvV2FpdChwYXJlbnRQcmVmaXgsIHBhcmVudElkKVxuICAgICAgICAgICAgZW5kXG4gICAgICAgICAgZWxzZVxuICAgICAgICAgICAgX21vdmVQYXJlbnRUb1dhaXQocGFyZW50UHJlZml4LCBwYXJlbnRJZCwgdHJ1ZSlcbiAgICAgICAgICBlbmRcbiAgICAgICAgZW5kXG4gICAgICBlbmRcbiAgICAgIHJldHVybiB0cnVlXG4gICAgZW5kXG4gIGVsc2VcbiAgICBsb2NhbCBwYXJlbnRBdHRyaWJ1dGVzID0gcmNhbGwoXCJITUdFVFwiLCBqb2JLZXksIFwicGFyZW50S2V5XCIsIFwiZGVpZFwiKVxuICAgIGxvY2FsIG1pc3NlZFBhcmVudEtleSA9IHBhcmVudEF0dHJpYnV0ZXNbMV1cbiAgICBpZiggKHR5cGUobWlzc2VkUGFyZW50S2V5KSA9PSBcInN0cmluZ1wiKSBhbmQgbWlzc2VkUGFyZW50S2V5IH49IFwiXCJcbiAgICAgIGFuZCAocmNhbGwoXCJFWElTVFNcIiwgbWlzc2VkUGFyZW50S2V5KSA9PSAxKSkgdGhlblxuICAgICAgbG9jYWwgcGFyZW50RGVwZW5kZW5jaWVzS2V5ID0gbWlzc2VkUGFyZW50S2V5IC4uIFwiOmRlcGVuZGVuY2llc1wiXG4gICAgICBsb2NhbCByZXN1bHQgPSByY2FsbChcIlNSRU1cIiwgcGFyZW50RGVwZW5kZW5jaWVzS2V5LCBqb2JLZXkpXG4gICAgICBpZiByZXN1bHQgPiAwIHRoZW5cbiAgICAgICAgbG9jYWwgcGVuZGluZ0RlcGVuZGVuY2llcyA9IHJjYWxsKFwiU0NBUkRcIiwgcGFyZW50RGVwZW5kZW5jaWVzS2V5KVxuICAgICAgICBpZiBwZW5kaW5nRGVwZW5kZW5jaWVzID09IDAgdGhlblxuICAgICAgICAgIGxvY2FsIHBhcmVudElkID0gZ2V0Sm9iSWRGcm9tS2V5KG1pc3NlZFBhcmVudEtleSlcbiAgICAgICAgICBsb2NhbCBwYXJlbnRQcmVmaXggPSBnZXRKb2JLZXlQcmVmaXgobWlzc2VkUGFyZW50S2V5LCBwYXJlbnRJZClcbiAgICAgICAgICBsb2NhbCBudW1SZW1vdmVkRWxlbWVudHMgPSByY2FsbChcIlpSRU1cIiwgcGFyZW50UHJlZml4IC4uIFwid2FpdGluZy1jaGlsZHJlblwiLCBwYXJlbnRJZClcbiAgICAgICAgICBpZiBudW1SZW1vdmVkRWxlbWVudHMgPT0gMSB0aGVuXG4gICAgICAgICAgICBpZiBoYXJkIHRoZW5cbiAgICAgICAgICAgICAgaWYgcGFyZW50UHJlZml4ID09IGJhc2VLZXkgdGhlblxuICAgICAgICAgICAgICAgIHJlbW92ZVBhcmVudERlcGVuZGVuY3lLZXkobWlzc2VkUGFyZW50S2V5LCBoYXJkLCBuaWwsIGJhc2VLZXksIG5pbClcbiAgICAgICAgICAgICAgICByZW1vdmVKb2JLZXlzKG1pc3NlZFBhcmVudEtleSlcbiAgICAgICAgICAgICAgICBpZiBwYXJlbnRBdHRyaWJ1dGVzWzJdIHRoZW5cbiAgICAgICAgICAgICAgICAgIHJjYWxsKFwiREVMXCIsIHBhcmVudFByZWZpeCAuLiBcImRlOlwiIC4uIHBhcmVudEF0dHJpYnV0ZXNbMl0pXG4gICAgICAgICAgICAgICAgZW5kXG4gICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBfbW92ZVBhcmVudFRvV2FpdChwYXJlbnRQcmVmaXgsIHBhcmVudElkKVxuICAgICAgICAgICAgICBlbmRcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgX21vdmVQYXJlbnRUb1dhaXQocGFyZW50UHJlZml4LCBwYXJlbnRJZCwgdHJ1ZSlcbiAgICAgICAgICAgIGVuZFxuICAgICAgICAgIGVuZFxuICAgICAgICBlbmRcbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgIGVuZFxuICAgIGVuZFxuICBlbmRcbiAgcmV0dXJuIGZhbHNlXG5lbmRcbi0tW1tcbiAgRnVuY3Rpb24gdG8gcmVjdXJzaXZlbHkgY2hlY2sgaWYgdGhlcmUgYXJlIG5vIGxvY2tzXG4gIG9uIHRoZSBqb2JzIHRvIGJlIHJlbW92ZWQuXG4gIHJldHVybnM6XG4gICAgYm9vbGVhblxuXV1cbmxvY2FsIGZ1bmN0aW9uIGlzTG9ja2VkKCBwcmVmaXgsIGpvYklkLCByZW1vdmVDaGlsZHJlbilcbiAgbG9jYWwgam9iS2V5ID0gcHJlZml4IC4uIGpvYklkO1xuICAtLSBDaGVjayBpZiB0aGlzIGpvYiBpcyBsb2NrZWRcbiAgbG9jYWwgbG9ja0tleSA9IGpvYktleSAuLiAnOmxvY2snXG4gIGxvY2FsIGxvY2sgPSByY2FsbChcIkdFVFwiLCBsb2NrS2V5KVxuICBpZiBub3QgbG9jayB0aGVuXG4gICAgaWYgcmVtb3ZlQ2hpbGRyZW4gPT0gXCIxXCIgdGhlblxuICAgICAgbG9jYWwgZGVwZW5kZW5jaWVzID0gcmNhbGwoXCJTTUVNQkVSU1wiLCBqb2JLZXkgLi4gXCI6ZGVwZW5kZW5jaWVzXCIpXG4gICAgICBpZiAoI2RlcGVuZGVuY2llcyA+IDApIHRoZW5cbiAgICAgICAgZm9yIGksIGNoaWxkSm9iS2V5IGluIGlwYWlycyhkZXBlbmRlbmNpZXMpIGRvXG4gICAgICAgICAgLS0gV2UgbmVlZCB0byBnZXQgdGhlIGpvYklkIGZvciB0aGlzIGpvYi5cbiAgICAgICAgICBsb2NhbCBjaGlsZEpvYklkID0gZ2V0Sm9iSWRGcm9tS2V5KGNoaWxkSm9iS2V5KVxuICAgICAgICAgIGxvY2FsIGNoaWxkSm9iUHJlZml4ID0gZ2V0Sm9iS2V5UHJlZml4KGNoaWxkSm9iS2V5LCBjaGlsZEpvYklkKVxuICAgICAgICAgIGxvY2FsIHJlc3VsdCA9IGlzTG9ja2VkKCBjaGlsZEpvYlByZWZpeCwgY2hpbGRKb2JJZCwgcmVtb3ZlQ2hpbGRyZW4gKVxuICAgICAgICAgIGlmIHJlc3VsdCB0aGVuXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgICAgIGVuZFxuICAgICAgICBlbmRcbiAgICAgIGVuZFxuICAgIGVuZFxuICAgIHJldHVybiBmYWxzZVxuICBlbmRcbiAgcmV0dXJuIHRydWVcbmVuZFxubG9jYWwgcmVtb3ZlSm9iQ2hpbGRyZW5cbmxvY2FsIHJlbW92ZUpvYldpdGhDaGlsZHJlblxucmVtb3ZlSm9iQ2hpbGRyZW4gPSBmdW5jdGlvbihwcmVmaXgsIGpvYktleSwgb3B0aW9ucylcbiAgICAtLSBDaGVjayBpZiB0aGlzIGpvYiBoYXMgY2hpbGRyZW5cbiAgICAtLSBJZiBzbywgd2UgYXJlIGdvaW5nIHRvIHRyeSB0byByZW1vdmUgdGhlIGNoaWxkcmVuIHJlY3Vyc2l2ZWx5IGluIGEgZGVwdGgtZmlyc3Qgd2F5XG4gICAgLS0gYmVjYXVzZSBpZiBzb21lIGpvYiBpcyBsb2NrZWQsIHdlIG11c3QgZXhpdCB3aXRoIGFuIGVycm9yLlxuICAgIGlmIG5vdCBvcHRpb25zLmlnbm9yZVByb2Nlc3NlZCB0aGVuXG4gICAgICAgIGxvY2FsIHByb2Nlc3NlZCA9IHJjYWxsKFwiSEdFVEFMTFwiLCBqb2JLZXkgLi4gXCI6cHJvY2Vzc2VkXCIpXG4gICAgICAgIGlmICNwcm9jZXNzZWQgPiAwIHRoZW5cbiAgICAgICAgICAgIGZvciBpID0gMSwgI3Byb2Nlc3NlZCwgMiBkb1xuICAgICAgICAgICAgICAgIGxvY2FsIGNoaWxkSm9iSWQgPSBnZXRKb2JJZEZyb21LZXkocHJvY2Vzc2VkW2ldKVxuICAgICAgICAgICAgICAgIGxvY2FsIGNoaWxkSm9iUHJlZml4ID0gZ2V0Sm9iS2V5UHJlZml4KHByb2Nlc3NlZFtpXSwgY2hpbGRKb2JJZClcbiAgICAgICAgICAgICAgICByZW1vdmVKb2JXaXRoQ2hpbGRyZW4oY2hpbGRKb2JQcmVmaXgsIGNoaWxkSm9iSWQsIGpvYktleSwgb3B0aW9ucylcbiAgICAgICAgICAgIGVuZFxuICAgICAgICBlbmRcbiAgICAgICAgbG9jYWwgZmFpbGVkID0gcmNhbGwoXCJIR0VUQUxMXCIsIGpvYktleSAuLiBcIjpmYWlsZWRcIilcbiAgICAgICAgaWYgI2ZhaWxlZCA+IDAgdGhlblxuICAgICAgICAgICAgZm9yIGkgPSAxLCAjZmFpbGVkLCAyIGRvXG4gICAgICAgICAgICAgICAgbG9jYWwgY2hpbGRKb2JJZCA9IGdldEpvYklkRnJvbUtleShmYWlsZWRbaV0pXG4gICAgICAgICAgICAgICAgbG9jYWwgY2hpbGRKb2JQcmVmaXggPSBnZXRKb2JLZXlQcmVmaXgoZmFpbGVkW2ldLCBjaGlsZEpvYklkKVxuICAgICAgICAgICAgICAgIHJlbW92ZUpvYldpdGhDaGlsZHJlbihjaGlsZEpvYlByZWZpeCwgY2hpbGRKb2JJZCwgam9iS2V5LCBvcHRpb25zKVxuICAgICAgICAgICAgZW5kXG4gICAgICAgIGVuZFxuICAgICAgICBsb2NhbCB1bnN1Y2Nlc3NmdWwgPSByY2FsbChcIlpSQU5HRVwiLCBqb2JLZXkgLi4gXCI6dW5zdWNjZXNzZnVsXCIsIDAsIC0xKVxuICAgICAgICBpZiAjdW5zdWNjZXNzZnVsID4gMCB0aGVuXG4gICAgICAgICAgICBmb3IgaSA9IDEsICN1bnN1Y2Nlc3NmdWwsIDEgZG9cbiAgICAgICAgICAgICAgICBsb2NhbCBjaGlsZEpvYklkID0gZ2V0Sm9iSWRGcm9tS2V5KHVuc3VjY2Vzc2Z1bFtpXSlcbiAgICAgICAgICAgICAgICBsb2NhbCBjaGlsZEpvYlByZWZpeCA9IGdldEpvYktleVByZWZpeCh1bnN1Y2Nlc3NmdWxbaV0sIGNoaWxkSm9iSWQpXG4gICAgICAgICAgICAgICAgcmVtb3ZlSm9iV2l0aENoaWxkcmVuKGNoaWxkSm9iUHJlZml4LCBjaGlsZEpvYklkLCBqb2JLZXksIG9wdGlvbnMpXG4gICAgICAgICAgICBlbmRcbiAgICAgICAgZW5kXG4gICAgZW5kXG4gICAgbG9jYWwgZGVwZW5kZW5jaWVzID0gcmNhbGwoXCJTTUVNQkVSU1wiLCBqb2JLZXkgLi4gXCI6ZGVwZW5kZW5jaWVzXCIpXG4gICAgaWYgI2RlcGVuZGVuY2llcyA+IDAgdGhlblxuICAgICAgICBmb3IgaSwgY2hpbGRKb2JLZXkgaW4gaXBhaXJzKGRlcGVuZGVuY2llcykgZG9cbiAgICAgICAgICAgIGxvY2FsIGNoaWxkSm9iSWQgPSBnZXRKb2JJZEZyb21LZXkoY2hpbGRKb2JLZXkpXG4gICAgICAgICAgICBsb2NhbCBjaGlsZEpvYlByZWZpeCA9IGdldEpvYktleVByZWZpeChjaGlsZEpvYktleSwgY2hpbGRKb2JJZClcbiAgICAgICAgICAgIHJlbW92ZUpvYldpdGhDaGlsZHJlbihjaGlsZEpvYlByZWZpeCwgY2hpbGRKb2JJZCwgam9iS2V5LCBvcHRpb25zKVxuICAgICAgICBlbmRcbiAgICBlbmRcbmVuZFxucmVtb3ZlSm9iV2l0aENoaWxkcmVuID0gZnVuY3Rpb24ocHJlZml4LCBqb2JJZCwgcGFyZW50S2V5LCBvcHRpb25zKVxuICAgIGxvY2FsIGpvYktleSA9IHByZWZpeCAuLiBqb2JJZFxuICAgIGlmIG9wdGlvbnMuaWdub3JlTG9ja2VkIHRoZW5cbiAgICAgICAgaWYgaXNMb2NrZWQocHJlZml4LCBqb2JJZCkgdGhlblxuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgIGVuZFxuICAgIGVuZFxuICAgIC0tIENoZWNrIGlmIGpvYiBpcyBpbiB0aGUgZmFpbGVkIHpzZXRcbiAgICBsb2NhbCBmYWlsZWRTZXQgPSBwcmVmaXggLi4gXCJmYWlsZWRcIlxuICAgIGlmIG5vdCAob3B0aW9ucy5pZ25vcmVQcm9jZXNzZWQgYW5kIHJjYWxsKFwiWlNDT1JFXCIsIGZhaWxlZFNldCwgam9iSWQpKSB0aGVuXG4gICAgICAgIHJlbW92ZVBhcmVudERlcGVuZGVuY3lLZXkoam9iS2V5LCBmYWxzZSwgcGFyZW50S2V5LCBuaWwpXG4gICAgICAgIGlmIG9wdGlvbnMucmVtb3ZlQ2hpbGRyZW4gdGhlblxuICAgICAgICAgICAgcmVtb3ZlSm9iQ2hpbGRyZW4ocHJlZml4LCBqb2JLZXksIG9wdGlvbnMpXG4gICAgICAgIGVuZFxuICAgICAgICBsb2NhbCBwcmV2ID0gcmVtb3ZlSm9iRnJvbUFueVN0YXRlKHByZWZpeCwgam9iSWQpXG4gICAgICAgIHJlbW92ZURlZHVwbGljYXRpb25LZXlJZk5lZWRlZE9uUmVtb3ZhbChwcmVmaXgsIGpvYktleSwgam9iSWQpXG4gICAgICAgIGlmIHJlbW92ZUpvYktleXMoam9iS2V5KSA+IDAgdGhlblxuICAgICAgICAgICAgbG9jYWwgbWV0YUtleSA9IHByZWZpeCAuLiBcIm1ldGFcIlxuICAgICAgICAgICAgbG9jYWwgbWF4RXZlbnRzID0gZ2V0T3JTZXRNYXhFdmVudHMobWV0YUtleSlcbiAgICAgICAgICAgIHJjYWxsKFwiWEFERFwiLCBwcmVmaXggLi4gXCJldmVudHNcIiwgXCJNQVhMRU5cIiwgXCJ+XCIsIG1heEV2ZW50cywgXCIqXCIsIFwiZXZlbnRcIiwgXCJyZW1vdmVkXCIsXG4gICAgICAgICAgICAgICAgXCJqb2JJZFwiLCBqb2JJZCwgXCJwcmV2XCIsIHByZXYpXG4gICAgICAgIGVuZFxuICAgIGVuZFxuZW5kXG5sb2NhbCBwcmVmaXggPSBBUkdWWzFdXG5sb2NhbCBqb2JJZCA9IEFSR1ZbMl1cbmxvY2FsIGpvYktleSA9IEtFWVNbMV1cbmxvY2FsIG1ldGFLZXkgPSBLRVlTWzJdXG5sb2NhbCBvcHRpb25zID0ge1xuICByZW1vdmVDaGlsZHJlbiA9IFwiMVwiLFxuICBpZ25vcmVQcm9jZXNzZWQgPSB0cnVlLFxuICBpZ25vcmVMb2NrZWQgPSB0cnVlXG59XG5yZW1vdmVKb2JDaGlsZHJlbihwcmVmaXgsIGpvYktleSwgb3B0aW9ucykgXG5gO1xuZXhwb3J0cy5yZW1vdmVVbnByb2Nlc3NlZENoaWxkcmVuID0ge1xuICAgIG5hbWU6ICdyZW1vdmVVbnByb2Nlc3NlZENoaWxkcmVuJyxcbiAgICBjb250ZW50LFxuICAgIGtleXM6IDIsXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmVtb3ZlVW5wcm9jZXNzZWRDaGlsZHJlbi0yLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsInJlbW92ZVVucHJvY2Vzc2VkQ2hpbGRyZW4iLCJjb250ZW50IiwibmFtZSIsImtleXMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/scripts/removeUnprocessedChildren-2.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/scripts/reprocessJob-8.js":
/*!****************************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/scripts/reprocessJob-8.js ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.reprocessJob = void 0;\nconst content = `--[[\n  Attempts to reprocess a job\n  Input:\n    KEYS[1] job key\n    KEYS[2] events stream\n    KEYS[3] job state\n    KEYS[4] wait key\n    KEYS[5] meta\n    KEYS[6] paused key\n    KEYS[7] active key\n    KEYS[8] marker key\n    ARGV[1] job.id\n    ARGV[2] (job.opts.lifo ? 'R' : 'L') + 'PUSH'\n    ARGV[3] propVal - failedReason/returnvalue\n    ARGV[4] prev state - failed/completed\n  Output:\n     1 means the operation was a success\n    -1 means the job does not exist\n    -3 means the job was not found in the expected set.\n]]\nlocal rcall = redis.call;\n-- Includes\n--[[\n  Function to add job in target list and add marker if needed.\n]]\n-- Includes\n--[[\n  Add marker if needed when a job is available.\n]]\nlocal function addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)\n  if not isPausedOrMaxed then\n    rcall(\"ZADD\", markerKey, 0, \"0\")\n  end  \nend\nlocal function addJobInTargetList(targetKey, markerKey, pushCmd, isPausedOrMaxed, jobId)\n  rcall(pushCmd, targetKey, jobId)\n  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)\nend\n--[[\n  Function to get max events value or set by default 10000.\n]]\nlocal function getOrSetMaxEvents(metaKey)\n  local maxEvents = rcall(\"HGET\", metaKey, \"opts.maxLenEvents\")\n  if not maxEvents then\n    maxEvents = 10000\n    rcall(\"HSET\", metaKey, \"opts.maxLenEvents\", maxEvents)\n  end\n  return maxEvents\nend\n--[[\n  Function to check for the meta.paused key to decide if we are paused or not\n  (since an empty list and !EXISTS are not really the same).\n]]\nlocal function getTargetQueueList(queueMetaKey, activeKey, waitKey, pausedKey)\n  local queueAttributes = rcall(\"HMGET\", queueMetaKey, \"paused\", \"concurrency\", \"max\", \"duration\")\n  if queueAttributes[1] then\n    return pausedKey, true, queueAttributes[3], queueAttributes[4]\n  else\n    if queueAttributes[2] then\n      local activeCount = rcall(\"LLEN\", activeKey)\n      if activeCount >= tonumber(queueAttributes[2]) then\n        return waitKey, true, queueAttributes[3], queueAttributes[4]\n      else\n        return waitKey, false, queueAttributes[3], queueAttributes[4]\n      end\n    end\n  end\n  return waitKey, false, queueAttributes[3], queueAttributes[4]\nend\nlocal jobKey = KEYS[1]\nif rcall(\"EXISTS\", jobKey) == 1 then\n  local jobId = ARGV[1]\n  if (rcall(\"ZREM\", KEYS[3], jobId) == 1) then\n    rcall(\"HDEL\", jobKey, \"finishedOn\", \"processedOn\", ARGV[3])\n    local target, isPausedOrMaxed = getTargetQueueList(KEYS[5], KEYS[7], KEYS[4], KEYS[6])\n    addJobInTargetList(target, KEYS[8], ARGV[2], isPausedOrMaxed, jobId)\n    local parentKey = rcall(\"HGET\", jobKey, \"parentKey\")\n    if parentKey and rcall(\"EXISTS\", parentKey) == 1 then\n      if ARGV[4] == \"failed\" then\n        if rcall(\"ZREM\", parentKey .. \":unsuccessful\", jobKey) == 1 or\n          rcall(\"ZREM\", parentKey .. \":failed\", jobKey) == 1 then\n          rcall(\"SADD\", parentKey .. \":dependencies\", jobKey)\n        end\n      else\n        if rcall(\"HDEL\", parentKey .. \":processed\", jobKey) == 1 then\n          rcall(\"SADD\", parentKey .. \":dependencies\", jobKey)\n        end\n      end\n    end\n    local maxEvents = getOrSetMaxEvents(KEYS[5])\n    -- Emit waiting event\n    rcall(\"XADD\", KEYS[2], \"MAXLEN\", \"~\", maxEvents, \"*\", \"event\", \"waiting\",\n      \"jobId\", jobId, \"prev\", ARGV[4]);\n    return 1\n  else\n    return -3\n  end\nelse\n  return -1\nend\n`;\nexports.reprocessJob = {\n    name: \"reprocessJob\",\n    content,\n    keys: 8\n}; //# sourceMappingURL=reprocessJob-8.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL3NjcmlwdHMvcmVwcm9jZXNzSm9iLTguanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELG9CQUFvQixHQUFHLEtBQUs7QUFDNUIsTUFBTUcsVUFBVSxDQUFDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBb0dqQixDQUFDO0FBQ0RILG9CQUFvQixHQUFHO0lBQ25CSSxNQUFNO0lBQ05EO0lBQ0FFLE1BQU07QUFDVixHQUNBLDBDQUEwQyIsInNvdXJjZXMiOlsid2VicGFjazovL29ubHlmYW5zLXBsYXRmb3JtLy4vbm9kZV9tb2R1bGVzL2J1bGxtcS9kaXN0L2Nqcy9zY3JpcHRzL3JlcHJvY2Vzc0pvYi04LmpzP2ViMGIiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLnJlcHJvY2Vzc0pvYiA9IHZvaWQgMDtcbmNvbnN0IGNvbnRlbnQgPSBgLS1bW1xuICBBdHRlbXB0cyB0byByZXByb2Nlc3MgYSBqb2JcbiAgSW5wdXQ6XG4gICAgS0VZU1sxXSBqb2Iga2V5XG4gICAgS0VZU1syXSBldmVudHMgc3RyZWFtXG4gICAgS0VZU1szXSBqb2Igc3RhdGVcbiAgICBLRVlTWzRdIHdhaXQga2V5XG4gICAgS0VZU1s1XSBtZXRhXG4gICAgS0VZU1s2XSBwYXVzZWQga2V5XG4gICAgS0VZU1s3XSBhY3RpdmUga2V5XG4gICAgS0VZU1s4XSBtYXJrZXIga2V5XG4gICAgQVJHVlsxXSBqb2IuaWRcbiAgICBBUkdWWzJdIChqb2Iub3B0cy5saWZvID8gJ1InIDogJ0wnKSArICdQVVNIJ1xuICAgIEFSR1ZbM10gcHJvcFZhbCAtIGZhaWxlZFJlYXNvbi9yZXR1cm52YWx1ZVxuICAgIEFSR1ZbNF0gcHJldiBzdGF0ZSAtIGZhaWxlZC9jb21wbGV0ZWRcbiAgT3V0cHV0OlxuICAgICAxIG1lYW5zIHRoZSBvcGVyYXRpb24gd2FzIGEgc3VjY2Vzc1xuICAgIC0xIG1lYW5zIHRoZSBqb2IgZG9lcyBub3QgZXhpc3RcbiAgICAtMyBtZWFucyB0aGUgam9iIHdhcyBub3QgZm91bmQgaW4gdGhlIGV4cGVjdGVkIHNldC5cbl1dXG5sb2NhbCByY2FsbCA9IHJlZGlzLmNhbGw7XG4tLSBJbmNsdWRlc1xuLS1bW1xuICBGdW5jdGlvbiB0byBhZGQgam9iIGluIHRhcmdldCBsaXN0IGFuZCBhZGQgbWFya2VyIGlmIG5lZWRlZC5cbl1dXG4tLSBJbmNsdWRlc1xuLS1bW1xuICBBZGQgbWFya2VyIGlmIG5lZWRlZCB3aGVuIGEgam9iIGlzIGF2YWlsYWJsZS5cbl1dXG5sb2NhbCBmdW5jdGlvbiBhZGRCYXNlTWFya2VySWZOZWVkZWQobWFya2VyS2V5LCBpc1BhdXNlZE9yTWF4ZWQpXG4gIGlmIG5vdCBpc1BhdXNlZE9yTWF4ZWQgdGhlblxuICAgIHJjYWxsKFwiWkFERFwiLCBtYXJrZXJLZXksIDAsIFwiMFwiKVxuICBlbmQgIFxuZW5kXG5sb2NhbCBmdW5jdGlvbiBhZGRKb2JJblRhcmdldExpc3QodGFyZ2V0S2V5LCBtYXJrZXJLZXksIHB1c2hDbWQsIGlzUGF1c2VkT3JNYXhlZCwgam9iSWQpXG4gIHJjYWxsKHB1c2hDbWQsIHRhcmdldEtleSwgam9iSWQpXG4gIGFkZEJhc2VNYXJrZXJJZk5lZWRlZChtYXJrZXJLZXksIGlzUGF1c2VkT3JNYXhlZClcbmVuZFxuLS1bW1xuICBGdW5jdGlvbiB0byBnZXQgbWF4IGV2ZW50cyB2YWx1ZSBvciBzZXQgYnkgZGVmYXVsdCAxMDAwMC5cbl1dXG5sb2NhbCBmdW5jdGlvbiBnZXRPclNldE1heEV2ZW50cyhtZXRhS2V5KVxuICBsb2NhbCBtYXhFdmVudHMgPSByY2FsbChcIkhHRVRcIiwgbWV0YUtleSwgXCJvcHRzLm1heExlbkV2ZW50c1wiKVxuICBpZiBub3QgbWF4RXZlbnRzIHRoZW5cbiAgICBtYXhFdmVudHMgPSAxMDAwMFxuICAgIHJjYWxsKFwiSFNFVFwiLCBtZXRhS2V5LCBcIm9wdHMubWF4TGVuRXZlbnRzXCIsIG1heEV2ZW50cylcbiAgZW5kXG4gIHJldHVybiBtYXhFdmVudHNcbmVuZFxuLS1bW1xuICBGdW5jdGlvbiB0byBjaGVjayBmb3IgdGhlIG1ldGEucGF1c2VkIGtleSB0byBkZWNpZGUgaWYgd2UgYXJlIHBhdXNlZCBvciBub3RcbiAgKHNpbmNlIGFuIGVtcHR5IGxpc3QgYW5kICFFWElTVFMgYXJlIG5vdCByZWFsbHkgdGhlIHNhbWUpLlxuXV1cbmxvY2FsIGZ1bmN0aW9uIGdldFRhcmdldFF1ZXVlTGlzdChxdWV1ZU1ldGFLZXksIGFjdGl2ZUtleSwgd2FpdEtleSwgcGF1c2VkS2V5KVxuICBsb2NhbCBxdWV1ZUF0dHJpYnV0ZXMgPSByY2FsbChcIkhNR0VUXCIsIHF1ZXVlTWV0YUtleSwgXCJwYXVzZWRcIiwgXCJjb25jdXJyZW5jeVwiLCBcIm1heFwiLCBcImR1cmF0aW9uXCIpXG4gIGlmIHF1ZXVlQXR0cmlidXRlc1sxXSB0aGVuXG4gICAgcmV0dXJuIHBhdXNlZEtleSwgdHJ1ZSwgcXVldWVBdHRyaWJ1dGVzWzNdLCBxdWV1ZUF0dHJpYnV0ZXNbNF1cbiAgZWxzZVxuICAgIGlmIHF1ZXVlQXR0cmlidXRlc1syXSB0aGVuXG4gICAgICBsb2NhbCBhY3RpdmVDb3VudCA9IHJjYWxsKFwiTExFTlwiLCBhY3RpdmVLZXkpXG4gICAgICBpZiBhY3RpdmVDb3VudCA+PSB0b251bWJlcihxdWV1ZUF0dHJpYnV0ZXNbMl0pIHRoZW5cbiAgICAgICAgcmV0dXJuIHdhaXRLZXksIHRydWUsIHF1ZXVlQXR0cmlidXRlc1szXSwgcXVldWVBdHRyaWJ1dGVzWzRdXG4gICAgICBlbHNlXG4gICAgICAgIHJldHVybiB3YWl0S2V5LCBmYWxzZSwgcXVldWVBdHRyaWJ1dGVzWzNdLCBxdWV1ZUF0dHJpYnV0ZXNbNF1cbiAgICAgIGVuZFxuICAgIGVuZFxuICBlbmRcbiAgcmV0dXJuIHdhaXRLZXksIGZhbHNlLCBxdWV1ZUF0dHJpYnV0ZXNbM10sIHF1ZXVlQXR0cmlidXRlc1s0XVxuZW5kXG5sb2NhbCBqb2JLZXkgPSBLRVlTWzFdXG5pZiByY2FsbChcIkVYSVNUU1wiLCBqb2JLZXkpID09IDEgdGhlblxuICBsb2NhbCBqb2JJZCA9IEFSR1ZbMV1cbiAgaWYgKHJjYWxsKFwiWlJFTVwiLCBLRVlTWzNdLCBqb2JJZCkgPT0gMSkgdGhlblxuICAgIHJjYWxsKFwiSERFTFwiLCBqb2JLZXksIFwiZmluaXNoZWRPblwiLCBcInByb2Nlc3NlZE9uXCIsIEFSR1ZbM10pXG4gICAgbG9jYWwgdGFyZ2V0LCBpc1BhdXNlZE9yTWF4ZWQgPSBnZXRUYXJnZXRRdWV1ZUxpc3QoS0VZU1s1XSwgS0VZU1s3XSwgS0VZU1s0XSwgS0VZU1s2XSlcbiAgICBhZGRKb2JJblRhcmdldExpc3QodGFyZ2V0LCBLRVlTWzhdLCBBUkdWWzJdLCBpc1BhdXNlZE9yTWF4ZWQsIGpvYklkKVxuICAgIGxvY2FsIHBhcmVudEtleSA9IHJjYWxsKFwiSEdFVFwiLCBqb2JLZXksIFwicGFyZW50S2V5XCIpXG4gICAgaWYgcGFyZW50S2V5IGFuZCByY2FsbChcIkVYSVNUU1wiLCBwYXJlbnRLZXkpID09IDEgdGhlblxuICAgICAgaWYgQVJHVls0XSA9PSBcImZhaWxlZFwiIHRoZW5cbiAgICAgICAgaWYgcmNhbGwoXCJaUkVNXCIsIHBhcmVudEtleSAuLiBcIjp1bnN1Y2Nlc3NmdWxcIiwgam9iS2V5KSA9PSAxIG9yXG4gICAgICAgICAgcmNhbGwoXCJaUkVNXCIsIHBhcmVudEtleSAuLiBcIjpmYWlsZWRcIiwgam9iS2V5KSA9PSAxIHRoZW5cbiAgICAgICAgICByY2FsbChcIlNBRERcIiwgcGFyZW50S2V5IC4uIFwiOmRlcGVuZGVuY2llc1wiLCBqb2JLZXkpXG4gICAgICAgIGVuZFxuICAgICAgZWxzZVxuICAgICAgICBpZiByY2FsbChcIkhERUxcIiwgcGFyZW50S2V5IC4uIFwiOnByb2Nlc3NlZFwiLCBqb2JLZXkpID09IDEgdGhlblxuICAgICAgICAgIHJjYWxsKFwiU0FERFwiLCBwYXJlbnRLZXkgLi4gXCI6ZGVwZW5kZW5jaWVzXCIsIGpvYktleSlcbiAgICAgICAgZW5kXG4gICAgICBlbmRcbiAgICBlbmRcbiAgICBsb2NhbCBtYXhFdmVudHMgPSBnZXRPclNldE1heEV2ZW50cyhLRVlTWzVdKVxuICAgIC0tIEVtaXQgd2FpdGluZyBldmVudFxuICAgIHJjYWxsKFwiWEFERFwiLCBLRVlTWzJdLCBcIk1BWExFTlwiLCBcIn5cIiwgbWF4RXZlbnRzLCBcIipcIiwgXCJldmVudFwiLCBcIndhaXRpbmdcIixcbiAgICAgIFwiam9iSWRcIiwgam9iSWQsIFwicHJldlwiLCBBUkdWWzRdKTtcbiAgICByZXR1cm4gMVxuICBlbHNlXG4gICAgcmV0dXJuIC0zXG4gIGVuZFxuZWxzZVxuICByZXR1cm4gLTFcbmVuZFxuYDtcbmV4cG9ydHMucmVwcm9jZXNzSm9iID0ge1xuICAgIG5hbWU6ICdyZXByb2Nlc3NKb2InLFxuICAgIGNvbnRlbnQsXG4gICAga2V5czogOCxcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1yZXByb2Nlc3NKb2ItOC5qcy5tYXAiXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJyZXByb2Nlc3NKb2IiLCJjb250ZW50IiwibmFtZSIsImtleXMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/scripts/reprocessJob-8.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/scripts/retryJob-11.js":
/*!*************************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/scripts/retryJob-11.js ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.retryJob = void 0;\nconst content = `--[[\n  Retries a failed job by moving it back to the wait queue.\n    Input:\n      KEYS[1]  'active',\n      KEYS[2]  'wait'\n      KEYS[3]  'paused'\n      KEYS[4]  job key\n      KEYS[5]  'meta'\n      KEYS[6]  events stream\n      KEYS[7]  delayed key\n      KEYS[8]  prioritized key\n      KEYS[9]  'pc' priority counter\n      KEYS[10] 'marker'\n      KEYS[11] 'stalled'\n      ARGV[1]  key prefix\n      ARGV[2]  timestamp\n      ARGV[3]  pushCmd\n      ARGV[4]  jobId\n      ARGV[5]  token\n      ARGV[6]  optional job fields to update\n    Events:\n      'waiting'\n    Output:\n     0  - OK\n     -1 - Missing key\n     -2 - Missing lock\n     -3 - Job not in active set\n]]\nlocal rcall = redis.call\n-- Includes\n--[[\n  Function to add job in target list and add marker if needed.\n]]\n-- Includes\n--[[\n  Add marker if needed when a job is available.\n]]\nlocal function addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)\n  if not isPausedOrMaxed then\n    rcall(\"ZADD\", markerKey, 0, \"0\")\n  end  \nend\nlocal function addJobInTargetList(targetKey, markerKey, pushCmd, isPausedOrMaxed, jobId)\n  rcall(pushCmd, targetKey, jobId)\n  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)\nend\n--[[\n  Function to add job considering priority.\n]]\n-- Includes\n--[[\n  Function to get priority score.\n]]\nlocal function getPriorityScore(priority, priorityCounterKey)\n  local prioCounter = rcall(\"INCR\", priorityCounterKey)\n  return priority * 0x100000000 + prioCounter % 0x100000000\nend\nlocal function addJobWithPriority(markerKey, prioritizedKey, priority, jobId, priorityCounterKey,\n  isPausedOrMaxed)\n  local score = getPriorityScore(priority, priorityCounterKey)\n  rcall(\"ZADD\", prioritizedKey, score, jobId)\n  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)\nend\n--[[\n  Function to get max events value or set by default 10000.\n]]\nlocal function getOrSetMaxEvents(metaKey)\n  local maxEvents = rcall(\"HGET\", metaKey, \"opts.maxLenEvents\")\n  if not maxEvents then\n    maxEvents = 10000\n    rcall(\"HSET\", metaKey, \"opts.maxLenEvents\", maxEvents)\n  end\n  return maxEvents\nend\n--[[\n  Function to check for the meta.paused key to decide if we are paused or not\n  (since an empty list and !EXISTS are not really the same).\n]]\nlocal function getTargetQueueList(queueMetaKey, activeKey, waitKey, pausedKey)\n  local queueAttributes = rcall(\"HMGET\", queueMetaKey, \"paused\", \"concurrency\", \"max\", \"duration\")\n  if queueAttributes[1] then\n    return pausedKey, true, queueAttributes[3], queueAttributes[4]\n  else\n    if queueAttributes[2] then\n      local activeCount = rcall(\"LLEN\", activeKey)\n      if activeCount >= tonumber(queueAttributes[2]) then\n        return waitKey, true, queueAttributes[3], queueAttributes[4]\n      else\n        return waitKey, false, queueAttributes[3], queueAttributes[4]\n      end\n    end\n  end\n  return waitKey, false, queueAttributes[3], queueAttributes[4]\nend\n--[[\n  Function to check if queue is paused or maxed\n  (since an empty list and !EXISTS are not really the same).\n]]\nlocal function isQueuePausedOrMaxed(queueMetaKey, activeKey)\n  local queueAttributes = rcall(\"HMGET\", queueMetaKey, \"paused\", \"concurrency\")\n  if queueAttributes[1] then\n    return true\n  else\n    if queueAttributes[2] then\n      local activeCount = rcall(\"LLEN\", activeKey)\n      return activeCount >= tonumber(queueAttributes[2])\n    end\n  end\n  return false\nend\n--[[\n  Updates the delay set, by moving delayed jobs that should\n  be processed now to \"wait\".\n     Events:\n      'waiting'\n]]\n-- Includes\n-- Try to get as much as 1000 jobs at once\nlocal function promoteDelayedJobs(delayedKey, markerKey, targetKey, prioritizedKey,\n                                  eventStreamKey, prefix, timestamp, priorityCounterKey, isPaused)\n    local jobs = rcall(\"ZRANGEBYSCORE\", delayedKey, 0, (timestamp + 1) * 0x1000 - 1, \"LIMIT\", 0, 1000)\n    if (#jobs > 0) then\n        rcall(\"ZREM\", delayedKey, unpack(jobs))\n        for _, jobId in ipairs(jobs) do\n            local jobKey = prefix .. jobId\n            local priority =\n                tonumber(rcall(\"HGET\", jobKey, \"priority\")) or 0\n            if priority == 0 then\n                -- LIFO or FIFO\n                rcall(\"LPUSH\", targetKey, jobId)\n            else\n                local score = getPriorityScore(priority, priorityCounterKey)\n                rcall(\"ZADD\", prioritizedKey, score, jobId)\n            end\n            -- Emit waiting event\n            rcall(\"XADD\", eventStreamKey, \"*\", \"event\", \"waiting\", \"jobId\",\n                  jobId, \"prev\", \"delayed\")\n            rcall(\"HSET\", jobKey, \"delay\", 0)\n        end\n        addBaseMarkerIfNeeded(markerKey, isPaused)\n    end\nend\nlocal function removeLock(jobKey, stalledKey, token, jobId)\n  if token ~= \"0\" then\n    local lockKey = jobKey .. ':lock'\n    local lockToken = rcall(\"GET\", lockKey)\n    if lockToken == token then\n      rcall(\"DEL\", lockKey)\n      rcall(\"SREM\", stalledKey, jobId)\n    else\n      if lockToken then\n        -- Lock exists but token does not match\n        return -6\n      else\n        -- Lock is missing completely\n        return -2\n      end\n    end\n  end\n  return 0\nend\n--[[\n  Function to update a bunch of fields in a job.\n]]\nlocal function updateJobFields(jobKey, msgpackedFields)\n  if msgpackedFields and #msgpackedFields > 0 then\n    local fieldsToUpdate = cmsgpack.unpack(msgpackedFields)\n    if fieldsToUpdate then\n      rcall(\"HMSET\", jobKey, unpack(fieldsToUpdate))\n    end\n  end\nend\nlocal target, isPausedOrMaxed = getTargetQueueList(KEYS[5], KEYS[1], KEYS[2], KEYS[3])\nlocal markerKey = KEYS[10]\n-- Check if there are delayed jobs that we can move to wait.\n-- test example: when there are delayed jobs between retries\npromoteDelayedJobs(KEYS[7], markerKey, target, KEYS[8], KEYS[6], ARGV[1], ARGV[2], KEYS[9], isPausedOrMaxed)\nlocal jobKey = KEYS[4]\nif rcall(\"EXISTS\", jobKey) == 1 then\n  local errorCode = removeLock(jobKey, KEYS[11], ARGV[5], ARGV[4]) \n  if errorCode < 0 then\n    return errorCode\n  end\n  updateJobFields(jobKey, ARGV[6])\n  local numRemovedElements = rcall(\"LREM\", KEYS[1], -1, ARGV[4])\n  if (numRemovedElements < 1) then return -3 end\n  local priority = tonumber(rcall(\"HGET\", jobKey, \"priority\")) or 0\n  --need to re-evaluate after removing job from active\n  isPausedOrMaxed = isQueuePausedOrMaxed(KEYS[5], KEYS[1])\n  -- Standard or priority add\n  if priority == 0 then\n    addJobInTargetList(target, markerKey, ARGV[3], isPausedOrMaxed, ARGV[4])\n  else\n    addJobWithPriority(markerKey, KEYS[8], priority, ARGV[4], KEYS[9], isPausedOrMaxed)\n  end\n  rcall(\"HINCRBY\", jobKey, \"atm\", 1)\n  local maxEvents = getOrSetMaxEvents(KEYS[5])\n  -- Emit waiting event\n  rcall(\"XADD\", KEYS[6], \"MAXLEN\", \"~\", maxEvents, \"*\", \"event\", \"waiting\",\n    \"jobId\", ARGV[4], \"prev\", \"active\")\n  return 0\nelse\n  return -1\nend\n`;\nexports.retryJob = {\n    name: \"retryJob\",\n    content,\n    keys: 11\n}; //# sourceMappingURL=retryJob-11.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL3NjcmlwdHMvcmV0cnlKb2ItMTEuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELGdCQUFnQixHQUFHLEtBQUs7QUFDeEIsTUFBTUcsVUFBVSxDQUFDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUE0TWpCLENBQUM7QUFDREgsZ0JBQWdCLEdBQUc7SUFDZkksTUFBTTtJQUNORDtJQUNBRSxNQUFNO0FBQ1YsR0FDQSx1Q0FBdUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vbmx5ZmFucy1wbGF0Zm9ybS8uL25vZGVfbW9kdWxlcy9idWxsbXEvZGlzdC9janMvc2NyaXB0cy9yZXRyeUpvYi0xMS5qcz84ZWY2Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5yZXRyeUpvYiA9IHZvaWQgMDtcbmNvbnN0IGNvbnRlbnQgPSBgLS1bW1xuICBSZXRyaWVzIGEgZmFpbGVkIGpvYiBieSBtb3ZpbmcgaXQgYmFjayB0byB0aGUgd2FpdCBxdWV1ZS5cbiAgICBJbnB1dDpcbiAgICAgIEtFWVNbMV0gICdhY3RpdmUnLFxuICAgICAgS0VZU1syXSAgJ3dhaXQnXG4gICAgICBLRVlTWzNdICAncGF1c2VkJ1xuICAgICAgS0VZU1s0XSAgam9iIGtleVxuICAgICAgS0VZU1s1XSAgJ21ldGEnXG4gICAgICBLRVlTWzZdICBldmVudHMgc3RyZWFtXG4gICAgICBLRVlTWzddICBkZWxheWVkIGtleVxuICAgICAgS0VZU1s4XSAgcHJpb3JpdGl6ZWQga2V5XG4gICAgICBLRVlTWzldICAncGMnIHByaW9yaXR5IGNvdW50ZXJcbiAgICAgIEtFWVNbMTBdICdtYXJrZXInXG4gICAgICBLRVlTWzExXSAnc3RhbGxlZCdcbiAgICAgIEFSR1ZbMV0gIGtleSBwcmVmaXhcbiAgICAgIEFSR1ZbMl0gIHRpbWVzdGFtcFxuICAgICAgQVJHVlszXSAgcHVzaENtZFxuICAgICAgQVJHVls0XSAgam9iSWRcbiAgICAgIEFSR1ZbNV0gIHRva2VuXG4gICAgICBBUkdWWzZdICBvcHRpb25hbCBqb2IgZmllbGRzIHRvIHVwZGF0ZVxuICAgIEV2ZW50czpcbiAgICAgICd3YWl0aW5nJ1xuICAgIE91dHB1dDpcbiAgICAgMCAgLSBPS1xuICAgICAtMSAtIE1pc3Npbmcga2V5XG4gICAgIC0yIC0gTWlzc2luZyBsb2NrXG4gICAgIC0zIC0gSm9iIG5vdCBpbiBhY3RpdmUgc2V0XG5dXVxubG9jYWwgcmNhbGwgPSByZWRpcy5jYWxsXG4tLSBJbmNsdWRlc1xuLS1bW1xuICBGdW5jdGlvbiB0byBhZGQgam9iIGluIHRhcmdldCBsaXN0IGFuZCBhZGQgbWFya2VyIGlmIG5lZWRlZC5cbl1dXG4tLSBJbmNsdWRlc1xuLS1bW1xuICBBZGQgbWFya2VyIGlmIG5lZWRlZCB3aGVuIGEgam9iIGlzIGF2YWlsYWJsZS5cbl1dXG5sb2NhbCBmdW5jdGlvbiBhZGRCYXNlTWFya2VySWZOZWVkZWQobWFya2VyS2V5LCBpc1BhdXNlZE9yTWF4ZWQpXG4gIGlmIG5vdCBpc1BhdXNlZE9yTWF4ZWQgdGhlblxuICAgIHJjYWxsKFwiWkFERFwiLCBtYXJrZXJLZXksIDAsIFwiMFwiKVxuICBlbmQgIFxuZW5kXG5sb2NhbCBmdW5jdGlvbiBhZGRKb2JJblRhcmdldExpc3QodGFyZ2V0S2V5LCBtYXJrZXJLZXksIHB1c2hDbWQsIGlzUGF1c2VkT3JNYXhlZCwgam9iSWQpXG4gIHJjYWxsKHB1c2hDbWQsIHRhcmdldEtleSwgam9iSWQpXG4gIGFkZEJhc2VNYXJrZXJJZk5lZWRlZChtYXJrZXJLZXksIGlzUGF1c2VkT3JNYXhlZClcbmVuZFxuLS1bW1xuICBGdW5jdGlvbiB0byBhZGQgam9iIGNvbnNpZGVyaW5nIHByaW9yaXR5LlxuXV1cbi0tIEluY2x1ZGVzXG4tLVtbXG4gIEZ1bmN0aW9uIHRvIGdldCBwcmlvcml0eSBzY29yZS5cbl1dXG5sb2NhbCBmdW5jdGlvbiBnZXRQcmlvcml0eVNjb3JlKHByaW9yaXR5LCBwcmlvcml0eUNvdW50ZXJLZXkpXG4gIGxvY2FsIHByaW9Db3VudGVyID0gcmNhbGwoXCJJTkNSXCIsIHByaW9yaXR5Q291bnRlcktleSlcbiAgcmV0dXJuIHByaW9yaXR5ICogMHgxMDAwMDAwMDAgKyBwcmlvQ291bnRlciAlIDB4MTAwMDAwMDAwXG5lbmRcbmxvY2FsIGZ1bmN0aW9uIGFkZEpvYldpdGhQcmlvcml0eShtYXJrZXJLZXksIHByaW9yaXRpemVkS2V5LCBwcmlvcml0eSwgam9iSWQsIHByaW9yaXR5Q291bnRlcktleSxcbiAgaXNQYXVzZWRPck1heGVkKVxuICBsb2NhbCBzY29yZSA9IGdldFByaW9yaXR5U2NvcmUocHJpb3JpdHksIHByaW9yaXR5Q291bnRlcktleSlcbiAgcmNhbGwoXCJaQUREXCIsIHByaW9yaXRpemVkS2V5LCBzY29yZSwgam9iSWQpXG4gIGFkZEJhc2VNYXJrZXJJZk5lZWRlZChtYXJrZXJLZXksIGlzUGF1c2VkT3JNYXhlZClcbmVuZFxuLS1bW1xuICBGdW5jdGlvbiB0byBnZXQgbWF4IGV2ZW50cyB2YWx1ZSBvciBzZXQgYnkgZGVmYXVsdCAxMDAwMC5cbl1dXG5sb2NhbCBmdW5jdGlvbiBnZXRPclNldE1heEV2ZW50cyhtZXRhS2V5KVxuICBsb2NhbCBtYXhFdmVudHMgPSByY2FsbChcIkhHRVRcIiwgbWV0YUtleSwgXCJvcHRzLm1heExlbkV2ZW50c1wiKVxuICBpZiBub3QgbWF4RXZlbnRzIHRoZW5cbiAgICBtYXhFdmVudHMgPSAxMDAwMFxuICAgIHJjYWxsKFwiSFNFVFwiLCBtZXRhS2V5LCBcIm9wdHMubWF4TGVuRXZlbnRzXCIsIG1heEV2ZW50cylcbiAgZW5kXG4gIHJldHVybiBtYXhFdmVudHNcbmVuZFxuLS1bW1xuICBGdW5jdGlvbiB0byBjaGVjayBmb3IgdGhlIG1ldGEucGF1c2VkIGtleSB0byBkZWNpZGUgaWYgd2UgYXJlIHBhdXNlZCBvciBub3RcbiAgKHNpbmNlIGFuIGVtcHR5IGxpc3QgYW5kICFFWElTVFMgYXJlIG5vdCByZWFsbHkgdGhlIHNhbWUpLlxuXV1cbmxvY2FsIGZ1bmN0aW9uIGdldFRhcmdldFF1ZXVlTGlzdChxdWV1ZU1ldGFLZXksIGFjdGl2ZUtleSwgd2FpdEtleSwgcGF1c2VkS2V5KVxuICBsb2NhbCBxdWV1ZUF0dHJpYnV0ZXMgPSByY2FsbChcIkhNR0VUXCIsIHF1ZXVlTWV0YUtleSwgXCJwYXVzZWRcIiwgXCJjb25jdXJyZW5jeVwiLCBcIm1heFwiLCBcImR1cmF0aW9uXCIpXG4gIGlmIHF1ZXVlQXR0cmlidXRlc1sxXSB0aGVuXG4gICAgcmV0dXJuIHBhdXNlZEtleSwgdHJ1ZSwgcXVldWVBdHRyaWJ1dGVzWzNdLCBxdWV1ZUF0dHJpYnV0ZXNbNF1cbiAgZWxzZVxuICAgIGlmIHF1ZXVlQXR0cmlidXRlc1syXSB0aGVuXG4gICAgICBsb2NhbCBhY3RpdmVDb3VudCA9IHJjYWxsKFwiTExFTlwiLCBhY3RpdmVLZXkpXG4gICAgICBpZiBhY3RpdmVDb3VudCA+PSB0b251bWJlcihxdWV1ZUF0dHJpYnV0ZXNbMl0pIHRoZW5cbiAgICAgICAgcmV0dXJuIHdhaXRLZXksIHRydWUsIHF1ZXVlQXR0cmlidXRlc1szXSwgcXVldWVBdHRyaWJ1dGVzWzRdXG4gICAgICBlbHNlXG4gICAgICAgIHJldHVybiB3YWl0S2V5LCBmYWxzZSwgcXVldWVBdHRyaWJ1dGVzWzNdLCBxdWV1ZUF0dHJpYnV0ZXNbNF1cbiAgICAgIGVuZFxuICAgIGVuZFxuICBlbmRcbiAgcmV0dXJuIHdhaXRLZXksIGZhbHNlLCBxdWV1ZUF0dHJpYnV0ZXNbM10sIHF1ZXVlQXR0cmlidXRlc1s0XVxuZW5kXG4tLVtbXG4gIEZ1bmN0aW9uIHRvIGNoZWNrIGlmIHF1ZXVlIGlzIHBhdXNlZCBvciBtYXhlZFxuICAoc2luY2UgYW4gZW1wdHkgbGlzdCBhbmQgIUVYSVNUUyBhcmUgbm90IHJlYWxseSB0aGUgc2FtZSkuXG5dXVxubG9jYWwgZnVuY3Rpb24gaXNRdWV1ZVBhdXNlZE9yTWF4ZWQocXVldWVNZXRhS2V5LCBhY3RpdmVLZXkpXG4gIGxvY2FsIHF1ZXVlQXR0cmlidXRlcyA9IHJjYWxsKFwiSE1HRVRcIiwgcXVldWVNZXRhS2V5LCBcInBhdXNlZFwiLCBcImNvbmN1cnJlbmN5XCIpXG4gIGlmIHF1ZXVlQXR0cmlidXRlc1sxXSB0aGVuXG4gICAgcmV0dXJuIHRydWVcbiAgZWxzZVxuICAgIGlmIHF1ZXVlQXR0cmlidXRlc1syXSB0aGVuXG4gICAgICBsb2NhbCBhY3RpdmVDb3VudCA9IHJjYWxsKFwiTExFTlwiLCBhY3RpdmVLZXkpXG4gICAgICByZXR1cm4gYWN0aXZlQ291bnQgPj0gdG9udW1iZXIocXVldWVBdHRyaWJ1dGVzWzJdKVxuICAgIGVuZFxuICBlbmRcbiAgcmV0dXJuIGZhbHNlXG5lbmRcbi0tW1tcbiAgVXBkYXRlcyB0aGUgZGVsYXkgc2V0LCBieSBtb3ZpbmcgZGVsYXllZCBqb2JzIHRoYXQgc2hvdWxkXG4gIGJlIHByb2Nlc3NlZCBub3cgdG8gXCJ3YWl0XCIuXG4gICAgIEV2ZW50czpcbiAgICAgICd3YWl0aW5nJ1xuXV1cbi0tIEluY2x1ZGVzXG4tLSBUcnkgdG8gZ2V0IGFzIG11Y2ggYXMgMTAwMCBqb2JzIGF0IG9uY2VcbmxvY2FsIGZ1bmN0aW9uIHByb21vdGVEZWxheWVkSm9icyhkZWxheWVkS2V5LCBtYXJrZXJLZXksIHRhcmdldEtleSwgcHJpb3JpdGl6ZWRLZXksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnRTdHJlYW1LZXksIHByZWZpeCwgdGltZXN0YW1wLCBwcmlvcml0eUNvdW50ZXJLZXksIGlzUGF1c2VkKVxuICAgIGxvY2FsIGpvYnMgPSByY2FsbChcIlpSQU5HRUJZU0NPUkVcIiwgZGVsYXllZEtleSwgMCwgKHRpbWVzdGFtcCArIDEpICogMHgxMDAwIC0gMSwgXCJMSU1JVFwiLCAwLCAxMDAwKVxuICAgIGlmICgjam9icyA+IDApIHRoZW5cbiAgICAgICAgcmNhbGwoXCJaUkVNXCIsIGRlbGF5ZWRLZXksIHVucGFjayhqb2JzKSlcbiAgICAgICAgZm9yIF8sIGpvYklkIGluIGlwYWlycyhqb2JzKSBkb1xuICAgICAgICAgICAgbG9jYWwgam9iS2V5ID0gcHJlZml4IC4uIGpvYklkXG4gICAgICAgICAgICBsb2NhbCBwcmlvcml0eSA9XG4gICAgICAgICAgICAgICAgdG9udW1iZXIocmNhbGwoXCJIR0VUXCIsIGpvYktleSwgXCJwcmlvcml0eVwiKSkgb3IgMFxuICAgICAgICAgICAgaWYgcHJpb3JpdHkgPT0gMCB0aGVuXG4gICAgICAgICAgICAgICAgLS0gTElGTyBvciBGSUZPXG4gICAgICAgICAgICAgICAgcmNhbGwoXCJMUFVTSFwiLCB0YXJnZXRLZXksIGpvYklkKVxuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIGxvY2FsIHNjb3JlID0gZ2V0UHJpb3JpdHlTY29yZShwcmlvcml0eSwgcHJpb3JpdHlDb3VudGVyS2V5KVxuICAgICAgICAgICAgICAgIHJjYWxsKFwiWkFERFwiLCBwcmlvcml0aXplZEtleSwgc2NvcmUsIGpvYklkKVxuICAgICAgICAgICAgZW5kXG4gICAgICAgICAgICAtLSBFbWl0IHdhaXRpbmcgZXZlbnRcbiAgICAgICAgICAgIHJjYWxsKFwiWEFERFwiLCBldmVudFN0cmVhbUtleSwgXCIqXCIsIFwiZXZlbnRcIiwgXCJ3YWl0aW5nXCIsIFwiam9iSWRcIixcbiAgICAgICAgICAgICAgICAgIGpvYklkLCBcInByZXZcIiwgXCJkZWxheWVkXCIpXG4gICAgICAgICAgICByY2FsbChcIkhTRVRcIiwgam9iS2V5LCBcImRlbGF5XCIsIDApXG4gICAgICAgIGVuZFxuICAgICAgICBhZGRCYXNlTWFya2VySWZOZWVkZWQobWFya2VyS2V5LCBpc1BhdXNlZClcbiAgICBlbmRcbmVuZFxubG9jYWwgZnVuY3Rpb24gcmVtb3ZlTG9jayhqb2JLZXksIHN0YWxsZWRLZXksIHRva2VuLCBqb2JJZClcbiAgaWYgdG9rZW4gfj0gXCIwXCIgdGhlblxuICAgIGxvY2FsIGxvY2tLZXkgPSBqb2JLZXkgLi4gJzpsb2NrJ1xuICAgIGxvY2FsIGxvY2tUb2tlbiA9IHJjYWxsKFwiR0VUXCIsIGxvY2tLZXkpXG4gICAgaWYgbG9ja1Rva2VuID09IHRva2VuIHRoZW5cbiAgICAgIHJjYWxsKFwiREVMXCIsIGxvY2tLZXkpXG4gICAgICByY2FsbChcIlNSRU1cIiwgc3RhbGxlZEtleSwgam9iSWQpXG4gICAgZWxzZVxuICAgICAgaWYgbG9ja1Rva2VuIHRoZW5cbiAgICAgICAgLS0gTG9jayBleGlzdHMgYnV0IHRva2VuIGRvZXMgbm90IG1hdGNoXG4gICAgICAgIHJldHVybiAtNlxuICAgICAgZWxzZVxuICAgICAgICAtLSBMb2NrIGlzIG1pc3NpbmcgY29tcGxldGVseVxuICAgICAgICByZXR1cm4gLTJcbiAgICAgIGVuZFxuICAgIGVuZFxuICBlbmRcbiAgcmV0dXJuIDBcbmVuZFxuLS1bW1xuICBGdW5jdGlvbiB0byB1cGRhdGUgYSBidW5jaCBvZiBmaWVsZHMgaW4gYSBqb2IuXG5dXVxubG9jYWwgZnVuY3Rpb24gdXBkYXRlSm9iRmllbGRzKGpvYktleSwgbXNncGFja2VkRmllbGRzKVxuICBpZiBtc2dwYWNrZWRGaWVsZHMgYW5kICNtc2dwYWNrZWRGaWVsZHMgPiAwIHRoZW5cbiAgICBsb2NhbCBmaWVsZHNUb1VwZGF0ZSA9IGNtc2dwYWNrLnVucGFjayhtc2dwYWNrZWRGaWVsZHMpXG4gICAgaWYgZmllbGRzVG9VcGRhdGUgdGhlblxuICAgICAgcmNhbGwoXCJITVNFVFwiLCBqb2JLZXksIHVucGFjayhmaWVsZHNUb1VwZGF0ZSkpXG4gICAgZW5kXG4gIGVuZFxuZW5kXG5sb2NhbCB0YXJnZXQsIGlzUGF1c2VkT3JNYXhlZCA9IGdldFRhcmdldFF1ZXVlTGlzdChLRVlTWzVdLCBLRVlTWzFdLCBLRVlTWzJdLCBLRVlTWzNdKVxubG9jYWwgbWFya2VyS2V5ID0gS0VZU1sxMF1cbi0tIENoZWNrIGlmIHRoZXJlIGFyZSBkZWxheWVkIGpvYnMgdGhhdCB3ZSBjYW4gbW92ZSB0byB3YWl0LlxuLS0gdGVzdCBleGFtcGxlOiB3aGVuIHRoZXJlIGFyZSBkZWxheWVkIGpvYnMgYmV0d2VlbiByZXRyaWVzXG5wcm9tb3RlRGVsYXllZEpvYnMoS0VZU1s3XSwgbWFya2VyS2V5LCB0YXJnZXQsIEtFWVNbOF0sIEtFWVNbNl0sIEFSR1ZbMV0sIEFSR1ZbMl0sIEtFWVNbOV0sIGlzUGF1c2VkT3JNYXhlZClcbmxvY2FsIGpvYktleSA9IEtFWVNbNF1cbmlmIHJjYWxsKFwiRVhJU1RTXCIsIGpvYktleSkgPT0gMSB0aGVuXG4gIGxvY2FsIGVycm9yQ29kZSA9IHJlbW92ZUxvY2soam9iS2V5LCBLRVlTWzExXSwgQVJHVls1XSwgQVJHVls0XSkgXG4gIGlmIGVycm9yQ29kZSA8IDAgdGhlblxuICAgIHJldHVybiBlcnJvckNvZGVcbiAgZW5kXG4gIHVwZGF0ZUpvYkZpZWxkcyhqb2JLZXksIEFSR1ZbNl0pXG4gIGxvY2FsIG51bVJlbW92ZWRFbGVtZW50cyA9IHJjYWxsKFwiTFJFTVwiLCBLRVlTWzFdLCAtMSwgQVJHVls0XSlcbiAgaWYgKG51bVJlbW92ZWRFbGVtZW50cyA8IDEpIHRoZW4gcmV0dXJuIC0zIGVuZFxuICBsb2NhbCBwcmlvcml0eSA9IHRvbnVtYmVyKHJjYWxsKFwiSEdFVFwiLCBqb2JLZXksIFwicHJpb3JpdHlcIikpIG9yIDBcbiAgLS1uZWVkIHRvIHJlLWV2YWx1YXRlIGFmdGVyIHJlbW92aW5nIGpvYiBmcm9tIGFjdGl2ZVxuICBpc1BhdXNlZE9yTWF4ZWQgPSBpc1F1ZXVlUGF1c2VkT3JNYXhlZChLRVlTWzVdLCBLRVlTWzFdKVxuICAtLSBTdGFuZGFyZCBvciBwcmlvcml0eSBhZGRcbiAgaWYgcHJpb3JpdHkgPT0gMCB0aGVuXG4gICAgYWRkSm9iSW5UYXJnZXRMaXN0KHRhcmdldCwgbWFya2VyS2V5LCBBUkdWWzNdLCBpc1BhdXNlZE9yTWF4ZWQsIEFSR1ZbNF0pXG4gIGVsc2VcbiAgICBhZGRKb2JXaXRoUHJpb3JpdHkobWFya2VyS2V5LCBLRVlTWzhdLCBwcmlvcml0eSwgQVJHVls0XSwgS0VZU1s5XSwgaXNQYXVzZWRPck1heGVkKVxuICBlbmRcbiAgcmNhbGwoXCJISU5DUkJZXCIsIGpvYktleSwgXCJhdG1cIiwgMSlcbiAgbG9jYWwgbWF4RXZlbnRzID0gZ2V0T3JTZXRNYXhFdmVudHMoS0VZU1s1XSlcbiAgLS0gRW1pdCB3YWl0aW5nIGV2ZW50XG4gIHJjYWxsKFwiWEFERFwiLCBLRVlTWzZdLCBcIk1BWExFTlwiLCBcIn5cIiwgbWF4RXZlbnRzLCBcIipcIiwgXCJldmVudFwiLCBcIndhaXRpbmdcIixcbiAgICBcImpvYklkXCIsIEFSR1ZbNF0sIFwicHJldlwiLCBcImFjdGl2ZVwiKVxuICByZXR1cm4gMFxuZWxzZVxuICByZXR1cm4gLTFcbmVuZFxuYDtcbmV4cG9ydHMucmV0cnlKb2IgPSB7XG4gICAgbmFtZTogJ3JldHJ5Sm9iJyxcbiAgICBjb250ZW50LFxuICAgIGtleXM6IDExLFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJldHJ5Sm9iLTExLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsInJldHJ5Sm9iIiwiY29udGVudCIsIm5hbWUiLCJrZXlzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/scripts/retryJob-11.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/scripts/saveStacktrace-1.js":
/*!******************************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/scripts/saveStacktrace-1.js ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.saveStacktrace = void 0;\nconst content = `--[[\n  Save stacktrace and failedReason.\n  Input:\n    KEYS[1] job key\n    ARGV[1]  stacktrace\n    ARGV[2]  failedReason\n  Output:\n     0 - OK\n    -1 - Missing key\n]]\nlocal rcall = redis.call\nif rcall(\"EXISTS\", KEYS[1]) == 1 then\n  rcall(\"HMSET\", KEYS[1], \"stacktrace\", ARGV[1], \"failedReason\", ARGV[2])\n  return 0\nelse\n  return -1\nend\n`;\nexports.saveStacktrace = {\n    name: \"saveStacktrace\",\n    content,\n    keys: 1\n}; //# sourceMappingURL=saveStacktrace-1.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL3NjcmlwdHMvc2F2ZVN0YWNrdHJhY2UtMS5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsc0JBQXNCLEdBQUcsS0FBSztBQUM5QixNQUFNRyxVQUFVLENBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBaUJqQixDQUFDO0FBQ0RILHNCQUFzQixHQUFHO0lBQ3JCSSxNQUFNO0lBQ05EO0lBQ0FFLE1BQU07QUFDVixHQUNBLDRDQUE0QyIsInNvdXJjZXMiOlsid2VicGFjazovL29ubHlmYW5zLXBsYXRmb3JtLy4vbm9kZV9tb2R1bGVzL2J1bGxtcS9kaXN0L2Nqcy9zY3JpcHRzL3NhdmVTdGFja3RyYWNlLTEuanM/OTFjNyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuc2F2ZVN0YWNrdHJhY2UgPSB2b2lkIDA7XG5jb25zdCBjb250ZW50ID0gYC0tW1tcbiAgU2F2ZSBzdGFja3RyYWNlIGFuZCBmYWlsZWRSZWFzb24uXG4gIElucHV0OlxuICAgIEtFWVNbMV0gam9iIGtleVxuICAgIEFSR1ZbMV0gIHN0YWNrdHJhY2VcbiAgICBBUkdWWzJdICBmYWlsZWRSZWFzb25cbiAgT3V0cHV0OlxuICAgICAwIC0gT0tcbiAgICAtMSAtIE1pc3Npbmcga2V5XG5dXVxubG9jYWwgcmNhbGwgPSByZWRpcy5jYWxsXG5pZiByY2FsbChcIkVYSVNUU1wiLCBLRVlTWzFdKSA9PSAxIHRoZW5cbiAgcmNhbGwoXCJITVNFVFwiLCBLRVlTWzFdLCBcInN0YWNrdHJhY2VcIiwgQVJHVlsxXSwgXCJmYWlsZWRSZWFzb25cIiwgQVJHVlsyXSlcbiAgcmV0dXJuIDBcbmVsc2VcbiAgcmV0dXJuIC0xXG5lbmRcbmA7XG5leHBvcnRzLnNhdmVTdGFja3RyYWNlID0ge1xuICAgIG5hbWU6ICdzYXZlU3RhY2t0cmFjZScsXG4gICAgY29udGVudCxcbiAgICBrZXlzOiAxLFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNhdmVTdGFja3RyYWNlLTEuanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwic2F2ZVN0YWNrdHJhY2UiLCJjb250ZW50IiwibmFtZSIsImtleXMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/scripts/saveStacktrace-1.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/scripts/updateData-1.js":
/*!**************************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/scripts/updateData-1.js ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.updateData = void 0;\nconst content = `--[[\n  Update job data\n  Input:\n    KEYS[1] Job id key\n    ARGV[1] data\n  Output:\n    0 - OK\n   -1 - Missing job.\n]]\nlocal rcall = redis.call\nif rcall(\"EXISTS\",KEYS[1]) == 1 then -- // Make sure job exists\n  rcall(\"HSET\", KEYS[1], \"data\", ARGV[1])\n  return 0\nelse\n  return -1\nend\n`;\nexports.updateData = {\n    name: \"updateData\",\n    content,\n    keys: 1\n}; //# sourceMappingURL=updateData-1.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL3NjcmlwdHMvdXBkYXRlRGF0YS0xLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCxrQkFBa0IsR0FBRyxLQUFLO0FBQzFCLE1BQU1HLFVBQVUsQ0FBQzs7Ozs7Ozs7Ozs7Ozs7OztBQWdCakIsQ0FBQztBQUNESCxrQkFBa0IsR0FBRztJQUNqQkksTUFBTTtJQUNORDtJQUNBRSxNQUFNO0FBQ1YsR0FDQSx3Q0FBd0MiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vbmx5ZmFucy1wbGF0Zm9ybS8uL25vZGVfbW9kdWxlcy9idWxsbXEvZGlzdC9janMvc2NyaXB0cy91cGRhdGVEYXRhLTEuanM/ZDhiZCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMudXBkYXRlRGF0YSA9IHZvaWQgMDtcbmNvbnN0IGNvbnRlbnQgPSBgLS1bW1xuICBVcGRhdGUgam9iIGRhdGFcbiAgSW5wdXQ6XG4gICAgS0VZU1sxXSBKb2IgaWQga2V5XG4gICAgQVJHVlsxXSBkYXRhXG4gIE91dHB1dDpcbiAgICAwIC0gT0tcbiAgIC0xIC0gTWlzc2luZyBqb2IuXG5dXVxubG9jYWwgcmNhbGwgPSByZWRpcy5jYWxsXG5pZiByY2FsbChcIkVYSVNUU1wiLEtFWVNbMV0pID09IDEgdGhlbiAtLSAvLyBNYWtlIHN1cmUgam9iIGV4aXN0c1xuICByY2FsbChcIkhTRVRcIiwgS0VZU1sxXSwgXCJkYXRhXCIsIEFSR1ZbMV0pXG4gIHJldHVybiAwXG5lbHNlXG4gIHJldHVybiAtMVxuZW5kXG5gO1xuZXhwb3J0cy51cGRhdGVEYXRhID0ge1xuICAgIG5hbWU6ICd1cGRhdGVEYXRhJyxcbiAgICBjb250ZW50LFxuICAgIGtleXM6IDEsXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dXBkYXRlRGF0YS0xLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsInVwZGF0ZURhdGEiLCJjb250ZW50IiwibmFtZSIsImtleXMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/scripts/updateData-1.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/scripts/updateJobScheduler-12.js":
/*!***********************************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/scripts/updateJobScheduler-12.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.updateJobScheduler = void 0;\nconst content = `--[[\n  Updates a job scheduler and adds next delayed job\n  Input:\n    KEYS[1]  'repeat' key\n    KEYS[2]  'delayed'\n    KEYS[3]  'wait' key\n    KEYS[4]  'paused' key\n    KEYS[5]  'meta'\n    KEYS[6]  'prioritized' key\n    KEYS[7]  'marker',\n    KEYS[8]  'id'\n    KEYS[9]  events stream key\n    KEYS[10] 'pc' priority counter\n    KEYS[11] producer key\n    KEYS[12] 'active' key\n    ARGV[1] next milliseconds\n    ARGV[2] jobs scheduler id\n    ARGV[3] Json stringified delayed data\n    ARGV[4] msgpacked delayed opts\n    ARGV[5] timestamp\n    ARGV[6] prefix key\n    ARGV[7] producer id\n    Output:\n      next delayed job id  - OK\n]] local rcall = redis.call\nlocal repeatKey = KEYS[1]\nlocal delayedKey = KEYS[2]\nlocal waitKey = KEYS[3]\nlocal pausedKey = KEYS[4]\nlocal metaKey = KEYS[5]\nlocal prioritizedKey = KEYS[6]\nlocal nextMillis = tonumber(ARGV[1])\nlocal jobSchedulerId = ARGV[2]\nlocal timestamp = tonumber(ARGV[5])\nlocal prefixKey = ARGV[6]\nlocal producerId = ARGV[7]\nlocal jobOpts = cmsgpack.unpack(ARGV[4])\n-- Includes\n--[[\n  Add delay marker if needed.\n]]\n-- Includes\n--[[\n  Adds a delayed job to the queue by doing the following:\n    - Creates a new job key with the job data.\n    - adds to delayed zset.\n    - Emits a global event 'delayed' if the job is delayed.\n]]\n-- Includes\n--[[\n  Add delay marker if needed.\n]]\n-- Includes\n--[[\n  Function to return the next delayed job timestamp.\n]]\nlocal function getNextDelayedTimestamp(delayedKey)\n  local result = rcall(\"ZRANGE\", delayedKey, 0, 0, \"WITHSCORES\")\n  if #result then\n    local nextTimestamp = tonumber(result[2])\n    if nextTimestamp ~= nil then\n      return nextTimestamp / 0x1000\n    end\n  end\nend\nlocal function addDelayMarkerIfNeeded(markerKey, delayedKey)\n  local nextTimestamp = getNextDelayedTimestamp(delayedKey)\n  if nextTimestamp ~= nil then\n    -- Replace the score of the marker with the newest known\n    -- next timestamp.\n    rcall(\"ZADD\", markerKey, nextTimestamp, \"1\")\n  end\nend\n--[[\n  Bake in the job id first 12 bits into the timestamp\n  to guarantee correct execution order of delayed jobs\n  (up to 4096 jobs per given timestamp or 4096 jobs apart per timestamp)\n  WARNING: Jobs that are so far apart that they wrap around will cause FIFO to fail\n]]\nlocal function getDelayedScore(delayedKey, timestamp, delay)\n  local delayedTimestamp = (delay > 0 and (tonumber(timestamp) + delay)) or tonumber(timestamp)\n  local minScore = delayedTimestamp * 0x1000\n  local maxScore = (delayedTimestamp + 1 ) * 0x1000 - 1\n  local result = rcall(\"ZREVRANGEBYSCORE\", delayedKey, maxScore,\n    minScore, \"WITHSCORES\",\"LIMIT\", 0, 1)\n  if #result then\n    local currentMaxScore = tonumber(result[2])\n    if currentMaxScore ~= nil then\n      if currentMaxScore >= maxScore then\n        return maxScore, delayedTimestamp\n      else\n        return currentMaxScore + 1, delayedTimestamp\n      end\n    end\n  end\n  return minScore, delayedTimestamp\nend\nlocal function addDelayedJob(jobId, delayedKey, eventsKey, timestamp,\n  maxEvents, markerKey, delay)\n  local score, delayedTimestamp = getDelayedScore(delayedKey, timestamp, tonumber(delay))\n  rcall(\"ZADD\", delayedKey, score, jobId)\n  rcall(\"XADD\", eventsKey, \"MAXLEN\", \"~\", maxEvents, \"*\", \"event\", \"delayed\",\n    \"jobId\", jobId, \"delay\", delayedTimestamp)\n  -- mark that a delayed job is available\n  addDelayMarkerIfNeeded(markerKey, delayedKey)\nend\n--[[\n  Function to add job considering priority.\n]]\n-- Includes\n--[[\n  Add marker if needed when a job is available.\n]]\nlocal function addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)\n  if not isPausedOrMaxed then\n    rcall(\"ZADD\", markerKey, 0, \"0\")\n  end  \nend\n--[[\n  Function to get priority score.\n]]\nlocal function getPriorityScore(priority, priorityCounterKey)\n  local prioCounter = rcall(\"INCR\", priorityCounterKey)\n  return priority * 0x100000000 + prioCounter % 0x100000000\nend\nlocal function addJobWithPriority(markerKey, prioritizedKey, priority, jobId, priorityCounterKey,\n  isPausedOrMaxed)\n  local score = getPriorityScore(priority, priorityCounterKey)\n  rcall(\"ZADD\", prioritizedKey, score, jobId)\n  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)\nend\n--[[\n  Function to check for the meta.paused key to decide if we are paused or not\n  (since an empty list and !EXISTS are not really the same).\n]]\nlocal function isQueuePaused(queueMetaKey)\n  return rcall(\"HEXISTS\", queueMetaKey, \"paused\") == 1\nend\n--[[\n  Function to store a job\n]]\nlocal function storeJob(eventsKey, jobIdKey, jobId, name, data, opts, timestamp,\n                        parentKey, parentData, repeatJobKey)\n    local jsonOpts = cjson.encode(opts)\n    local delay = opts['delay'] or 0\n    local priority = opts['priority'] or 0\n    local debounceId = opts['de'] and opts['de']['id']\n    local optionalValues = {}\n    if parentKey ~= nil then\n        table.insert(optionalValues, \"parentKey\")\n        table.insert(optionalValues, parentKey)\n        table.insert(optionalValues, \"parent\")\n        table.insert(optionalValues, parentData)\n    end\n    if repeatJobKey then\n        table.insert(optionalValues, \"rjk\")\n        table.insert(optionalValues, repeatJobKey)\n    end\n    if debounceId then\n        table.insert(optionalValues, \"deid\")\n        table.insert(optionalValues, debounceId)\n    end\n    rcall(\"HMSET\", jobIdKey, \"name\", name, \"data\", data, \"opts\", jsonOpts,\n          \"timestamp\", timestamp, \"delay\", delay, \"priority\", priority,\n          unpack(optionalValues))\n    rcall(\"XADD\", eventsKey, \"*\", \"event\", \"added\", \"jobId\", jobId, \"name\", name)\n    return delay, priority\nend\n--[[\n  Function to check for the meta.paused key to decide if we are paused or not\n  (since an empty list and !EXISTS are not really the same).\n]]\nlocal function getTargetQueueList(queueMetaKey, activeKey, waitKey, pausedKey)\n  local queueAttributes = rcall(\"HMGET\", queueMetaKey, \"paused\", \"concurrency\", \"max\", \"duration\")\n  if queueAttributes[1] then\n    return pausedKey, true, queueAttributes[3], queueAttributes[4]\n  else\n    if queueAttributes[2] then\n      local activeCount = rcall(\"LLEN\", activeKey)\n      if activeCount >= tonumber(queueAttributes[2]) then\n        return waitKey, true, queueAttributes[3], queueAttributes[4]\n      else\n        return waitKey, false, queueAttributes[3], queueAttributes[4]\n      end\n    end\n  end\n  return waitKey, false, queueAttributes[3], queueAttributes[4]\nend\n--[[\n  Function to add job in target list and add marker if needed.\n]]\n-- Includes\nlocal function addJobInTargetList(targetKey, markerKey, pushCmd, isPausedOrMaxed, jobId)\n  rcall(pushCmd, targetKey, jobId)\n  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)\nend\nlocal function addJobFromScheduler(jobKey, jobId, opts, waitKey, pausedKey, activeKey, metaKey, \n  prioritizedKey, priorityCounter, delayedKey, markerKey, eventsKey, name, maxEvents, timestamp,\n  data, jobSchedulerId, repeatDelay)\n  opts['delay'] = repeatDelay\n  opts['jobId'] = jobId\n  local delay, priority = storeJob(eventsKey, jobKey, jobId, name, data,\n    opts, timestamp, nil, nil, jobSchedulerId)\n  if delay ~= 0 then\n    addDelayedJob(jobId, delayedKey, eventsKey, timestamp, maxEvents, markerKey, delay)\n  else\n    local target, isPausedOrMaxed = getTargetQueueList(metaKey, activeKey, waitKey, pausedKey)\n    -- Standard or priority add\n    if priority == 0 then\n      local pushCmd = opts['lifo'] and 'RPUSH' or 'LPUSH'\n      addJobInTargetList(target, markerKey, pushCmd, isPausedOrMaxed, jobId)\n    else\n      -- Priority add\n      addJobWithPriority(markerKey, prioritizedKey, priority, jobId, priorityCounter, isPausedOrMaxed)\n    end\n    -- Emit waiting event\n    rcall(\"XADD\", eventsKey, \"MAXLEN\", \"~\", maxEvents,  \"*\", \"event\", \"waiting\", \"jobId\", jobId)\n  end\nend\n--[[\n  Function to get max events value or set by default 10000.\n]]\nlocal function getOrSetMaxEvents(metaKey)\n  local maxEvents = rcall(\"HGET\", metaKey, \"opts.maxLenEvents\")\n  if not maxEvents then\n    maxEvents = 10000\n    rcall(\"HSET\", metaKey, \"opts.maxLenEvents\", maxEvents)\n  end\n  return maxEvents\nend\nlocal function getJobSchedulerEveryNextMillis(prevMillis, every, now, offset, startDate)\n    local nextMillis\n    if not prevMillis then\n        if startDate then\n            -- Assuming startDate is passed as milliseconds from JavaScript\n            nextMillis = tonumber(startDate)\n            nextMillis = nextMillis > now and nextMillis or now\n        else\n            nextMillis = now\n        end\n    else\n        nextMillis = prevMillis + every\n        -- check if we may have missed some iterations\n        if nextMillis < now then\n            nextMillis = math.floor(now / every) * every + every + (offset or 0)\n        end\n    end\n    if not offset or offset == 0 then\n        local timeSlot = math.floor(nextMillis / every) * every;\n        offset = nextMillis - timeSlot;\n    end\n    -- Return a tuple nextMillis, offset\n    return math.floor(nextMillis), math.floor(offset)\nend\nlocal prevMillis = rcall(\"ZSCORE\", repeatKey, jobSchedulerId)\n-- Validate that scheduler exists.\n-- If it does not exist we should not iterate anymore.\nif prevMillis then\n    prevMillis = tonumber(prevMillis)\n    local schedulerKey = repeatKey .. \":\" .. jobSchedulerId\n    local schedulerAttributes = rcall(\"HMGET\", schedulerKey, \"name\", \"data\", \"every\", \"startDate\", \"offset\")\n    local every = tonumber(schedulerAttributes[3])\n    local now = tonumber(timestamp)\n    -- If every is not found in scheduler attributes, try to get it from job options\n    if not every and jobOpts['repeat'] and jobOpts['repeat']['every'] then\n        every = tonumber(jobOpts['repeat']['every'])\n    end\n    if every then\n        local startDate = schedulerAttributes[4]\n        local jobOptsOffset = jobOpts['repeat'] and jobOpts['repeat']['offset'] or 0\n        local offset = schedulerAttributes[5] or jobOptsOffset or 0\n        local newOffset\n        nextMillis, newOffset = getJobSchedulerEveryNextMillis(prevMillis, every, now, offset, startDate)\n        if not offset then\n            rcall(\"HSET\", schedulerKey, \"offset\", newOffset)\n            jobOpts['repeat']['offset'] = newOffset\n        end\n    end\n    local nextDelayedJobId = \"repeat:\" .. jobSchedulerId .. \":\" .. nextMillis\n    local nextDelayedJobKey = schedulerKey .. \":\" .. nextMillis\n    local currentDelayedJobId = \"repeat:\" .. jobSchedulerId .. \":\" .. prevMillis\n    if producerId == currentDelayedJobId then\n        local eventsKey = KEYS[9]\n        local maxEvents = getOrSetMaxEvents(metaKey)\n        if rcall(\"EXISTS\", nextDelayedJobKey) ~= 1 then\n            rcall(\"ZADD\", repeatKey, nextMillis, jobSchedulerId)\n            rcall(\"HINCRBY\", schedulerKey, \"ic\", 1)\n            rcall(\"INCR\", KEYS[8])\n            -- TODO: remove this workaround in next breaking change,\n            -- all job-schedulers must save job data\n            local templateData = schedulerAttributes[2] or ARGV[3]\n            if templateData and templateData ~= '{}' then\n                rcall(\"HSET\", schedulerKey, \"data\", templateData)\n            end\n            local delay = nextMillis - now\n            -- Fast Clamp delay to minimum of 0\n            if delay < 0 then\n                delay = 0\n            end\n            jobOpts[\"delay\"] = delay\n            addJobFromScheduler(nextDelayedJobKey, nextDelayedJobId, jobOpts, waitKey, pausedKey, KEYS[12], metaKey,\n                prioritizedKey, KEYS[10], delayedKey, KEYS[7], eventsKey, schedulerAttributes[1], maxEvents, ARGV[5],\n                templateData or '{}', jobSchedulerId, delay)\n            -- TODO: remove this workaround in next breaking change\n            if KEYS[11] ~= \"\" then\n                rcall(\"HSET\", KEYS[11], \"nrjid\", nextDelayedJobId)\n            end\n            return nextDelayedJobId .. \"\" -- convert to string\n        else\n            rcall(\"XADD\", eventsKey, \"MAXLEN\", \"~\", maxEvents, \"*\", \"event\", \"duplicated\", \"jobId\", nextDelayedJobId)\n        end\n    end\nend\n`;\nexports.updateJobScheduler = {\n    name: \"updateJobScheduler\",\n    content,\n    keys: 12\n}; //# sourceMappingURL=updateJobScheduler-12.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL3NjcmlwdHMvdXBkYXRlSm9iU2NoZWR1bGVyLTEyLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCwwQkFBMEIsR0FBRyxLQUFLO0FBQ2xDLE1BQU1HLFVBQVUsQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQXlUakIsQ0FBQztBQUNESCwwQkFBMEIsR0FBRztJQUN6QkksTUFBTTtJQUNORDtJQUNBRSxNQUFNO0FBQ1YsR0FDQSxpREFBaUQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vbmx5ZmFucy1wbGF0Zm9ybS8uL25vZGVfbW9kdWxlcy9idWxsbXEvZGlzdC9janMvc2NyaXB0cy91cGRhdGVKb2JTY2hlZHVsZXItMTIuanM/NGVhYyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMudXBkYXRlSm9iU2NoZWR1bGVyID0gdm9pZCAwO1xuY29uc3QgY29udGVudCA9IGAtLVtbXG4gIFVwZGF0ZXMgYSBqb2Igc2NoZWR1bGVyIGFuZCBhZGRzIG5leHQgZGVsYXllZCBqb2JcbiAgSW5wdXQ6XG4gICAgS0VZU1sxXSAgJ3JlcGVhdCcga2V5XG4gICAgS0VZU1syXSAgJ2RlbGF5ZWQnXG4gICAgS0VZU1szXSAgJ3dhaXQnIGtleVxuICAgIEtFWVNbNF0gICdwYXVzZWQnIGtleVxuICAgIEtFWVNbNV0gICdtZXRhJ1xuICAgIEtFWVNbNl0gICdwcmlvcml0aXplZCcga2V5XG4gICAgS0VZU1s3XSAgJ21hcmtlcicsXG4gICAgS0VZU1s4XSAgJ2lkJ1xuICAgIEtFWVNbOV0gIGV2ZW50cyBzdHJlYW0ga2V5XG4gICAgS0VZU1sxMF0gJ3BjJyBwcmlvcml0eSBjb3VudGVyXG4gICAgS0VZU1sxMV0gcHJvZHVjZXIga2V5XG4gICAgS0VZU1sxMl0gJ2FjdGl2ZScga2V5XG4gICAgQVJHVlsxXSBuZXh0IG1pbGxpc2Vjb25kc1xuICAgIEFSR1ZbMl0gam9icyBzY2hlZHVsZXIgaWRcbiAgICBBUkdWWzNdIEpzb24gc3RyaW5naWZpZWQgZGVsYXllZCBkYXRhXG4gICAgQVJHVls0XSBtc2dwYWNrZWQgZGVsYXllZCBvcHRzXG4gICAgQVJHVls1XSB0aW1lc3RhbXBcbiAgICBBUkdWWzZdIHByZWZpeCBrZXlcbiAgICBBUkdWWzddIHByb2R1Y2VyIGlkXG4gICAgT3V0cHV0OlxuICAgICAgbmV4dCBkZWxheWVkIGpvYiBpZCAgLSBPS1xuXV0gbG9jYWwgcmNhbGwgPSByZWRpcy5jYWxsXG5sb2NhbCByZXBlYXRLZXkgPSBLRVlTWzFdXG5sb2NhbCBkZWxheWVkS2V5ID0gS0VZU1syXVxubG9jYWwgd2FpdEtleSA9IEtFWVNbM11cbmxvY2FsIHBhdXNlZEtleSA9IEtFWVNbNF1cbmxvY2FsIG1ldGFLZXkgPSBLRVlTWzVdXG5sb2NhbCBwcmlvcml0aXplZEtleSA9IEtFWVNbNl1cbmxvY2FsIG5leHRNaWxsaXMgPSB0b251bWJlcihBUkdWWzFdKVxubG9jYWwgam9iU2NoZWR1bGVySWQgPSBBUkdWWzJdXG5sb2NhbCB0aW1lc3RhbXAgPSB0b251bWJlcihBUkdWWzVdKVxubG9jYWwgcHJlZml4S2V5ID0gQVJHVls2XVxubG9jYWwgcHJvZHVjZXJJZCA9IEFSR1ZbN11cbmxvY2FsIGpvYk9wdHMgPSBjbXNncGFjay51bnBhY2soQVJHVls0XSlcbi0tIEluY2x1ZGVzXG4tLVtbXG4gIEFkZCBkZWxheSBtYXJrZXIgaWYgbmVlZGVkLlxuXV1cbi0tIEluY2x1ZGVzXG4tLVtbXG4gIEFkZHMgYSBkZWxheWVkIGpvYiB0byB0aGUgcXVldWUgYnkgZG9pbmcgdGhlIGZvbGxvd2luZzpcbiAgICAtIENyZWF0ZXMgYSBuZXcgam9iIGtleSB3aXRoIHRoZSBqb2IgZGF0YS5cbiAgICAtIGFkZHMgdG8gZGVsYXllZCB6c2V0LlxuICAgIC0gRW1pdHMgYSBnbG9iYWwgZXZlbnQgJ2RlbGF5ZWQnIGlmIHRoZSBqb2IgaXMgZGVsYXllZC5cbl1dXG4tLSBJbmNsdWRlc1xuLS1bW1xuICBBZGQgZGVsYXkgbWFya2VyIGlmIG5lZWRlZC5cbl1dXG4tLSBJbmNsdWRlc1xuLS1bW1xuICBGdW5jdGlvbiB0byByZXR1cm4gdGhlIG5leHQgZGVsYXllZCBqb2IgdGltZXN0YW1wLlxuXV1cbmxvY2FsIGZ1bmN0aW9uIGdldE5leHREZWxheWVkVGltZXN0YW1wKGRlbGF5ZWRLZXkpXG4gIGxvY2FsIHJlc3VsdCA9IHJjYWxsKFwiWlJBTkdFXCIsIGRlbGF5ZWRLZXksIDAsIDAsIFwiV0lUSFNDT1JFU1wiKVxuICBpZiAjcmVzdWx0IHRoZW5cbiAgICBsb2NhbCBuZXh0VGltZXN0YW1wID0gdG9udW1iZXIocmVzdWx0WzJdKVxuICAgIGlmIG5leHRUaW1lc3RhbXAgfj0gbmlsIHRoZW5cbiAgICAgIHJldHVybiBuZXh0VGltZXN0YW1wIC8gMHgxMDAwXG4gICAgZW5kXG4gIGVuZFxuZW5kXG5sb2NhbCBmdW5jdGlvbiBhZGREZWxheU1hcmtlcklmTmVlZGVkKG1hcmtlcktleSwgZGVsYXllZEtleSlcbiAgbG9jYWwgbmV4dFRpbWVzdGFtcCA9IGdldE5leHREZWxheWVkVGltZXN0YW1wKGRlbGF5ZWRLZXkpXG4gIGlmIG5leHRUaW1lc3RhbXAgfj0gbmlsIHRoZW5cbiAgICAtLSBSZXBsYWNlIHRoZSBzY29yZSBvZiB0aGUgbWFya2VyIHdpdGggdGhlIG5ld2VzdCBrbm93blxuICAgIC0tIG5leHQgdGltZXN0YW1wLlxuICAgIHJjYWxsKFwiWkFERFwiLCBtYXJrZXJLZXksIG5leHRUaW1lc3RhbXAsIFwiMVwiKVxuICBlbmRcbmVuZFxuLS1bW1xuICBCYWtlIGluIHRoZSBqb2IgaWQgZmlyc3QgMTIgYml0cyBpbnRvIHRoZSB0aW1lc3RhbXBcbiAgdG8gZ3VhcmFudGVlIGNvcnJlY3QgZXhlY3V0aW9uIG9yZGVyIG9mIGRlbGF5ZWQgam9ic1xuICAodXAgdG8gNDA5NiBqb2JzIHBlciBnaXZlbiB0aW1lc3RhbXAgb3IgNDA5NiBqb2JzIGFwYXJ0IHBlciB0aW1lc3RhbXApXG4gIFdBUk5JTkc6IEpvYnMgdGhhdCBhcmUgc28gZmFyIGFwYXJ0IHRoYXQgdGhleSB3cmFwIGFyb3VuZCB3aWxsIGNhdXNlIEZJRk8gdG8gZmFpbFxuXV1cbmxvY2FsIGZ1bmN0aW9uIGdldERlbGF5ZWRTY29yZShkZWxheWVkS2V5LCB0aW1lc3RhbXAsIGRlbGF5KVxuICBsb2NhbCBkZWxheWVkVGltZXN0YW1wID0gKGRlbGF5ID4gMCBhbmQgKHRvbnVtYmVyKHRpbWVzdGFtcCkgKyBkZWxheSkpIG9yIHRvbnVtYmVyKHRpbWVzdGFtcClcbiAgbG9jYWwgbWluU2NvcmUgPSBkZWxheWVkVGltZXN0YW1wICogMHgxMDAwXG4gIGxvY2FsIG1heFNjb3JlID0gKGRlbGF5ZWRUaW1lc3RhbXAgKyAxICkgKiAweDEwMDAgLSAxXG4gIGxvY2FsIHJlc3VsdCA9IHJjYWxsKFwiWlJFVlJBTkdFQllTQ09SRVwiLCBkZWxheWVkS2V5LCBtYXhTY29yZSxcbiAgICBtaW5TY29yZSwgXCJXSVRIU0NPUkVTXCIsXCJMSU1JVFwiLCAwLCAxKVxuICBpZiAjcmVzdWx0IHRoZW5cbiAgICBsb2NhbCBjdXJyZW50TWF4U2NvcmUgPSB0b251bWJlcihyZXN1bHRbMl0pXG4gICAgaWYgY3VycmVudE1heFNjb3JlIH49IG5pbCB0aGVuXG4gICAgICBpZiBjdXJyZW50TWF4U2NvcmUgPj0gbWF4U2NvcmUgdGhlblxuICAgICAgICByZXR1cm4gbWF4U2NvcmUsIGRlbGF5ZWRUaW1lc3RhbXBcbiAgICAgIGVsc2VcbiAgICAgICAgcmV0dXJuIGN1cnJlbnRNYXhTY29yZSArIDEsIGRlbGF5ZWRUaW1lc3RhbXBcbiAgICAgIGVuZFxuICAgIGVuZFxuICBlbmRcbiAgcmV0dXJuIG1pblNjb3JlLCBkZWxheWVkVGltZXN0YW1wXG5lbmRcbmxvY2FsIGZ1bmN0aW9uIGFkZERlbGF5ZWRKb2Ioam9iSWQsIGRlbGF5ZWRLZXksIGV2ZW50c0tleSwgdGltZXN0YW1wLFxuICBtYXhFdmVudHMsIG1hcmtlcktleSwgZGVsYXkpXG4gIGxvY2FsIHNjb3JlLCBkZWxheWVkVGltZXN0YW1wID0gZ2V0RGVsYXllZFNjb3JlKGRlbGF5ZWRLZXksIHRpbWVzdGFtcCwgdG9udW1iZXIoZGVsYXkpKVxuICByY2FsbChcIlpBRERcIiwgZGVsYXllZEtleSwgc2NvcmUsIGpvYklkKVxuICByY2FsbChcIlhBRERcIiwgZXZlbnRzS2V5LCBcIk1BWExFTlwiLCBcIn5cIiwgbWF4RXZlbnRzLCBcIipcIiwgXCJldmVudFwiLCBcImRlbGF5ZWRcIixcbiAgICBcImpvYklkXCIsIGpvYklkLCBcImRlbGF5XCIsIGRlbGF5ZWRUaW1lc3RhbXApXG4gIC0tIG1hcmsgdGhhdCBhIGRlbGF5ZWQgam9iIGlzIGF2YWlsYWJsZVxuICBhZGREZWxheU1hcmtlcklmTmVlZGVkKG1hcmtlcktleSwgZGVsYXllZEtleSlcbmVuZFxuLS1bW1xuICBGdW5jdGlvbiB0byBhZGQgam9iIGNvbnNpZGVyaW5nIHByaW9yaXR5LlxuXV1cbi0tIEluY2x1ZGVzXG4tLVtbXG4gIEFkZCBtYXJrZXIgaWYgbmVlZGVkIHdoZW4gYSBqb2IgaXMgYXZhaWxhYmxlLlxuXV1cbmxvY2FsIGZ1bmN0aW9uIGFkZEJhc2VNYXJrZXJJZk5lZWRlZChtYXJrZXJLZXksIGlzUGF1c2VkT3JNYXhlZClcbiAgaWYgbm90IGlzUGF1c2VkT3JNYXhlZCB0aGVuXG4gICAgcmNhbGwoXCJaQUREXCIsIG1hcmtlcktleSwgMCwgXCIwXCIpXG4gIGVuZCAgXG5lbmRcbi0tW1tcbiAgRnVuY3Rpb24gdG8gZ2V0IHByaW9yaXR5IHNjb3JlLlxuXV1cbmxvY2FsIGZ1bmN0aW9uIGdldFByaW9yaXR5U2NvcmUocHJpb3JpdHksIHByaW9yaXR5Q291bnRlcktleSlcbiAgbG9jYWwgcHJpb0NvdW50ZXIgPSByY2FsbChcIklOQ1JcIiwgcHJpb3JpdHlDb3VudGVyS2V5KVxuICByZXR1cm4gcHJpb3JpdHkgKiAweDEwMDAwMDAwMCArIHByaW9Db3VudGVyICUgMHgxMDAwMDAwMDBcbmVuZFxubG9jYWwgZnVuY3Rpb24gYWRkSm9iV2l0aFByaW9yaXR5KG1hcmtlcktleSwgcHJpb3JpdGl6ZWRLZXksIHByaW9yaXR5LCBqb2JJZCwgcHJpb3JpdHlDb3VudGVyS2V5LFxuICBpc1BhdXNlZE9yTWF4ZWQpXG4gIGxvY2FsIHNjb3JlID0gZ2V0UHJpb3JpdHlTY29yZShwcmlvcml0eSwgcHJpb3JpdHlDb3VudGVyS2V5KVxuICByY2FsbChcIlpBRERcIiwgcHJpb3JpdGl6ZWRLZXksIHNjb3JlLCBqb2JJZClcbiAgYWRkQmFzZU1hcmtlcklmTmVlZGVkKG1hcmtlcktleSwgaXNQYXVzZWRPck1heGVkKVxuZW5kXG4tLVtbXG4gIEZ1bmN0aW9uIHRvIGNoZWNrIGZvciB0aGUgbWV0YS5wYXVzZWQga2V5IHRvIGRlY2lkZSBpZiB3ZSBhcmUgcGF1c2VkIG9yIG5vdFxuICAoc2luY2UgYW4gZW1wdHkgbGlzdCBhbmQgIUVYSVNUUyBhcmUgbm90IHJlYWxseSB0aGUgc2FtZSkuXG5dXVxubG9jYWwgZnVuY3Rpb24gaXNRdWV1ZVBhdXNlZChxdWV1ZU1ldGFLZXkpXG4gIHJldHVybiByY2FsbChcIkhFWElTVFNcIiwgcXVldWVNZXRhS2V5LCBcInBhdXNlZFwiKSA9PSAxXG5lbmRcbi0tW1tcbiAgRnVuY3Rpb24gdG8gc3RvcmUgYSBqb2Jcbl1dXG5sb2NhbCBmdW5jdGlvbiBzdG9yZUpvYihldmVudHNLZXksIGpvYklkS2V5LCBqb2JJZCwgbmFtZSwgZGF0YSwgb3B0cywgdGltZXN0YW1wLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50S2V5LCBwYXJlbnREYXRhLCByZXBlYXRKb2JLZXkpXG4gICAgbG9jYWwganNvbk9wdHMgPSBjanNvbi5lbmNvZGUob3B0cylcbiAgICBsb2NhbCBkZWxheSA9IG9wdHNbJ2RlbGF5J10gb3IgMFxuICAgIGxvY2FsIHByaW9yaXR5ID0gb3B0c1sncHJpb3JpdHknXSBvciAwXG4gICAgbG9jYWwgZGVib3VuY2VJZCA9IG9wdHNbJ2RlJ10gYW5kIG9wdHNbJ2RlJ11bJ2lkJ11cbiAgICBsb2NhbCBvcHRpb25hbFZhbHVlcyA9IHt9XG4gICAgaWYgcGFyZW50S2V5IH49IG5pbCB0aGVuXG4gICAgICAgIHRhYmxlLmluc2VydChvcHRpb25hbFZhbHVlcywgXCJwYXJlbnRLZXlcIilcbiAgICAgICAgdGFibGUuaW5zZXJ0KG9wdGlvbmFsVmFsdWVzLCBwYXJlbnRLZXkpXG4gICAgICAgIHRhYmxlLmluc2VydChvcHRpb25hbFZhbHVlcywgXCJwYXJlbnRcIilcbiAgICAgICAgdGFibGUuaW5zZXJ0KG9wdGlvbmFsVmFsdWVzLCBwYXJlbnREYXRhKVxuICAgIGVuZFxuICAgIGlmIHJlcGVhdEpvYktleSB0aGVuXG4gICAgICAgIHRhYmxlLmluc2VydChvcHRpb25hbFZhbHVlcywgXCJyamtcIilcbiAgICAgICAgdGFibGUuaW5zZXJ0KG9wdGlvbmFsVmFsdWVzLCByZXBlYXRKb2JLZXkpXG4gICAgZW5kXG4gICAgaWYgZGVib3VuY2VJZCB0aGVuXG4gICAgICAgIHRhYmxlLmluc2VydChvcHRpb25hbFZhbHVlcywgXCJkZWlkXCIpXG4gICAgICAgIHRhYmxlLmluc2VydChvcHRpb25hbFZhbHVlcywgZGVib3VuY2VJZClcbiAgICBlbmRcbiAgICByY2FsbChcIkhNU0VUXCIsIGpvYklkS2V5LCBcIm5hbWVcIiwgbmFtZSwgXCJkYXRhXCIsIGRhdGEsIFwib3B0c1wiLCBqc29uT3B0cyxcbiAgICAgICAgICBcInRpbWVzdGFtcFwiLCB0aW1lc3RhbXAsIFwiZGVsYXlcIiwgZGVsYXksIFwicHJpb3JpdHlcIiwgcHJpb3JpdHksXG4gICAgICAgICAgdW5wYWNrKG9wdGlvbmFsVmFsdWVzKSlcbiAgICByY2FsbChcIlhBRERcIiwgZXZlbnRzS2V5LCBcIipcIiwgXCJldmVudFwiLCBcImFkZGVkXCIsIFwiam9iSWRcIiwgam9iSWQsIFwibmFtZVwiLCBuYW1lKVxuICAgIHJldHVybiBkZWxheSwgcHJpb3JpdHlcbmVuZFxuLS1bW1xuICBGdW5jdGlvbiB0byBjaGVjayBmb3IgdGhlIG1ldGEucGF1c2VkIGtleSB0byBkZWNpZGUgaWYgd2UgYXJlIHBhdXNlZCBvciBub3RcbiAgKHNpbmNlIGFuIGVtcHR5IGxpc3QgYW5kICFFWElTVFMgYXJlIG5vdCByZWFsbHkgdGhlIHNhbWUpLlxuXV1cbmxvY2FsIGZ1bmN0aW9uIGdldFRhcmdldFF1ZXVlTGlzdChxdWV1ZU1ldGFLZXksIGFjdGl2ZUtleSwgd2FpdEtleSwgcGF1c2VkS2V5KVxuICBsb2NhbCBxdWV1ZUF0dHJpYnV0ZXMgPSByY2FsbChcIkhNR0VUXCIsIHF1ZXVlTWV0YUtleSwgXCJwYXVzZWRcIiwgXCJjb25jdXJyZW5jeVwiLCBcIm1heFwiLCBcImR1cmF0aW9uXCIpXG4gIGlmIHF1ZXVlQXR0cmlidXRlc1sxXSB0aGVuXG4gICAgcmV0dXJuIHBhdXNlZEtleSwgdHJ1ZSwgcXVldWVBdHRyaWJ1dGVzWzNdLCBxdWV1ZUF0dHJpYnV0ZXNbNF1cbiAgZWxzZVxuICAgIGlmIHF1ZXVlQXR0cmlidXRlc1syXSB0aGVuXG4gICAgICBsb2NhbCBhY3RpdmVDb3VudCA9IHJjYWxsKFwiTExFTlwiLCBhY3RpdmVLZXkpXG4gICAgICBpZiBhY3RpdmVDb3VudCA+PSB0b251bWJlcihxdWV1ZUF0dHJpYnV0ZXNbMl0pIHRoZW5cbiAgICAgICAgcmV0dXJuIHdhaXRLZXksIHRydWUsIHF1ZXVlQXR0cmlidXRlc1szXSwgcXVldWVBdHRyaWJ1dGVzWzRdXG4gICAgICBlbHNlXG4gICAgICAgIHJldHVybiB3YWl0S2V5LCBmYWxzZSwgcXVldWVBdHRyaWJ1dGVzWzNdLCBxdWV1ZUF0dHJpYnV0ZXNbNF1cbiAgICAgIGVuZFxuICAgIGVuZFxuICBlbmRcbiAgcmV0dXJuIHdhaXRLZXksIGZhbHNlLCBxdWV1ZUF0dHJpYnV0ZXNbM10sIHF1ZXVlQXR0cmlidXRlc1s0XVxuZW5kXG4tLVtbXG4gIEZ1bmN0aW9uIHRvIGFkZCBqb2IgaW4gdGFyZ2V0IGxpc3QgYW5kIGFkZCBtYXJrZXIgaWYgbmVlZGVkLlxuXV1cbi0tIEluY2x1ZGVzXG5sb2NhbCBmdW5jdGlvbiBhZGRKb2JJblRhcmdldExpc3QodGFyZ2V0S2V5LCBtYXJrZXJLZXksIHB1c2hDbWQsIGlzUGF1c2VkT3JNYXhlZCwgam9iSWQpXG4gIHJjYWxsKHB1c2hDbWQsIHRhcmdldEtleSwgam9iSWQpXG4gIGFkZEJhc2VNYXJrZXJJZk5lZWRlZChtYXJrZXJLZXksIGlzUGF1c2VkT3JNYXhlZClcbmVuZFxubG9jYWwgZnVuY3Rpb24gYWRkSm9iRnJvbVNjaGVkdWxlcihqb2JLZXksIGpvYklkLCBvcHRzLCB3YWl0S2V5LCBwYXVzZWRLZXksIGFjdGl2ZUtleSwgbWV0YUtleSwgXG4gIHByaW9yaXRpemVkS2V5LCBwcmlvcml0eUNvdW50ZXIsIGRlbGF5ZWRLZXksIG1hcmtlcktleSwgZXZlbnRzS2V5LCBuYW1lLCBtYXhFdmVudHMsIHRpbWVzdGFtcCxcbiAgZGF0YSwgam9iU2NoZWR1bGVySWQsIHJlcGVhdERlbGF5KVxuICBvcHRzWydkZWxheSddID0gcmVwZWF0RGVsYXlcbiAgb3B0c1snam9iSWQnXSA9IGpvYklkXG4gIGxvY2FsIGRlbGF5LCBwcmlvcml0eSA9IHN0b3JlSm9iKGV2ZW50c0tleSwgam9iS2V5LCBqb2JJZCwgbmFtZSwgZGF0YSxcbiAgICBvcHRzLCB0aW1lc3RhbXAsIG5pbCwgbmlsLCBqb2JTY2hlZHVsZXJJZClcbiAgaWYgZGVsYXkgfj0gMCB0aGVuXG4gICAgYWRkRGVsYXllZEpvYihqb2JJZCwgZGVsYXllZEtleSwgZXZlbnRzS2V5LCB0aW1lc3RhbXAsIG1heEV2ZW50cywgbWFya2VyS2V5LCBkZWxheSlcbiAgZWxzZVxuICAgIGxvY2FsIHRhcmdldCwgaXNQYXVzZWRPck1heGVkID0gZ2V0VGFyZ2V0UXVldWVMaXN0KG1ldGFLZXksIGFjdGl2ZUtleSwgd2FpdEtleSwgcGF1c2VkS2V5KVxuICAgIC0tIFN0YW5kYXJkIG9yIHByaW9yaXR5IGFkZFxuICAgIGlmIHByaW9yaXR5ID09IDAgdGhlblxuICAgICAgbG9jYWwgcHVzaENtZCA9IG9wdHNbJ2xpZm8nXSBhbmQgJ1JQVVNIJyBvciAnTFBVU0gnXG4gICAgICBhZGRKb2JJblRhcmdldExpc3QodGFyZ2V0LCBtYXJrZXJLZXksIHB1c2hDbWQsIGlzUGF1c2VkT3JNYXhlZCwgam9iSWQpXG4gICAgZWxzZVxuICAgICAgLS0gUHJpb3JpdHkgYWRkXG4gICAgICBhZGRKb2JXaXRoUHJpb3JpdHkobWFya2VyS2V5LCBwcmlvcml0aXplZEtleSwgcHJpb3JpdHksIGpvYklkLCBwcmlvcml0eUNvdW50ZXIsIGlzUGF1c2VkT3JNYXhlZClcbiAgICBlbmRcbiAgICAtLSBFbWl0IHdhaXRpbmcgZXZlbnRcbiAgICByY2FsbChcIlhBRERcIiwgZXZlbnRzS2V5LCBcIk1BWExFTlwiLCBcIn5cIiwgbWF4RXZlbnRzLCAgXCIqXCIsIFwiZXZlbnRcIiwgXCJ3YWl0aW5nXCIsIFwiam9iSWRcIiwgam9iSWQpXG4gIGVuZFxuZW5kXG4tLVtbXG4gIEZ1bmN0aW9uIHRvIGdldCBtYXggZXZlbnRzIHZhbHVlIG9yIHNldCBieSBkZWZhdWx0IDEwMDAwLlxuXV1cbmxvY2FsIGZ1bmN0aW9uIGdldE9yU2V0TWF4RXZlbnRzKG1ldGFLZXkpXG4gIGxvY2FsIG1heEV2ZW50cyA9IHJjYWxsKFwiSEdFVFwiLCBtZXRhS2V5LCBcIm9wdHMubWF4TGVuRXZlbnRzXCIpXG4gIGlmIG5vdCBtYXhFdmVudHMgdGhlblxuICAgIG1heEV2ZW50cyA9IDEwMDAwXG4gICAgcmNhbGwoXCJIU0VUXCIsIG1ldGFLZXksIFwib3B0cy5tYXhMZW5FdmVudHNcIiwgbWF4RXZlbnRzKVxuICBlbmRcbiAgcmV0dXJuIG1heEV2ZW50c1xuZW5kXG5sb2NhbCBmdW5jdGlvbiBnZXRKb2JTY2hlZHVsZXJFdmVyeU5leHRNaWxsaXMocHJldk1pbGxpcywgZXZlcnksIG5vdywgb2Zmc2V0LCBzdGFydERhdGUpXG4gICAgbG9jYWwgbmV4dE1pbGxpc1xuICAgIGlmIG5vdCBwcmV2TWlsbGlzIHRoZW5cbiAgICAgICAgaWYgc3RhcnREYXRlIHRoZW5cbiAgICAgICAgICAgIC0tIEFzc3VtaW5nIHN0YXJ0RGF0ZSBpcyBwYXNzZWQgYXMgbWlsbGlzZWNvbmRzIGZyb20gSmF2YVNjcmlwdFxuICAgICAgICAgICAgbmV4dE1pbGxpcyA9IHRvbnVtYmVyKHN0YXJ0RGF0ZSlcbiAgICAgICAgICAgIG5leHRNaWxsaXMgPSBuZXh0TWlsbGlzID4gbm93IGFuZCBuZXh0TWlsbGlzIG9yIG5vd1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICBuZXh0TWlsbGlzID0gbm93XG4gICAgICAgIGVuZFxuICAgIGVsc2VcbiAgICAgICAgbmV4dE1pbGxpcyA9IHByZXZNaWxsaXMgKyBldmVyeVxuICAgICAgICAtLSBjaGVjayBpZiB3ZSBtYXkgaGF2ZSBtaXNzZWQgc29tZSBpdGVyYXRpb25zXG4gICAgICAgIGlmIG5leHRNaWxsaXMgPCBub3cgdGhlblxuICAgICAgICAgICAgbmV4dE1pbGxpcyA9IG1hdGguZmxvb3Iobm93IC8gZXZlcnkpICogZXZlcnkgKyBldmVyeSArIChvZmZzZXQgb3IgMClcbiAgICAgICAgZW5kXG4gICAgZW5kXG4gICAgaWYgbm90IG9mZnNldCBvciBvZmZzZXQgPT0gMCB0aGVuXG4gICAgICAgIGxvY2FsIHRpbWVTbG90ID0gbWF0aC5mbG9vcihuZXh0TWlsbGlzIC8gZXZlcnkpICogZXZlcnk7XG4gICAgICAgIG9mZnNldCA9IG5leHRNaWxsaXMgLSB0aW1lU2xvdDtcbiAgICBlbmRcbiAgICAtLSBSZXR1cm4gYSB0dXBsZSBuZXh0TWlsbGlzLCBvZmZzZXRcbiAgICByZXR1cm4gbWF0aC5mbG9vcihuZXh0TWlsbGlzKSwgbWF0aC5mbG9vcihvZmZzZXQpXG5lbmRcbmxvY2FsIHByZXZNaWxsaXMgPSByY2FsbChcIlpTQ09SRVwiLCByZXBlYXRLZXksIGpvYlNjaGVkdWxlcklkKVxuLS0gVmFsaWRhdGUgdGhhdCBzY2hlZHVsZXIgZXhpc3RzLlxuLS0gSWYgaXQgZG9lcyBub3QgZXhpc3Qgd2Ugc2hvdWxkIG5vdCBpdGVyYXRlIGFueW1vcmUuXG5pZiBwcmV2TWlsbGlzIHRoZW5cbiAgICBwcmV2TWlsbGlzID0gdG9udW1iZXIocHJldk1pbGxpcylcbiAgICBsb2NhbCBzY2hlZHVsZXJLZXkgPSByZXBlYXRLZXkgLi4gXCI6XCIgLi4gam9iU2NoZWR1bGVySWRcbiAgICBsb2NhbCBzY2hlZHVsZXJBdHRyaWJ1dGVzID0gcmNhbGwoXCJITUdFVFwiLCBzY2hlZHVsZXJLZXksIFwibmFtZVwiLCBcImRhdGFcIiwgXCJldmVyeVwiLCBcInN0YXJ0RGF0ZVwiLCBcIm9mZnNldFwiKVxuICAgIGxvY2FsIGV2ZXJ5ID0gdG9udW1iZXIoc2NoZWR1bGVyQXR0cmlidXRlc1szXSlcbiAgICBsb2NhbCBub3cgPSB0b251bWJlcih0aW1lc3RhbXApXG4gICAgLS0gSWYgZXZlcnkgaXMgbm90IGZvdW5kIGluIHNjaGVkdWxlciBhdHRyaWJ1dGVzLCB0cnkgdG8gZ2V0IGl0IGZyb20gam9iIG9wdGlvbnNcbiAgICBpZiBub3QgZXZlcnkgYW5kIGpvYk9wdHNbJ3JlcGVhdCddIGFuZCBqb2JPcHRzWydyZXBlYXQnXVsnZXZlcnknXSB0aGVuXG4gICAgICAgIGV2ZXJ5ID0gdG9udW1iZXIoam9iT3B0c1sncmVwZWF0J11bJ2V2ZXJ5J10pXG4gICAgZW5kXG4gICAgaWYgZXZlcnkgdGhlblxuICAgICAgICBsb2NhbCBzdGFydERhdGUgPSBzY2hlZHVsZXJBdHRyaWJ1dGVzWzRdXG4gICAgICAgIGxvY2FsIGpvYk9wdHNPZmZzZXQgPSBqb2JPcHRzWydyZXBlYXQnXSBhbmQgam9iT3B0c1sncmVwZWF0J11bJ29mZnNldCddIG9yIDBcbiAgICAgICAgbG9jYWwgb2Zmc2V0ID0gc2NoZWR1bGVyQXR0cmlidXRlc1s1XSBvciBqb2JPcHRzT2Zmc2V0IG9yIDBcbiAgICAgICAgbG9jYWwgbmV3T2Zmc2V0XG4gICAgICAgIG5leHRNaWxsaXMsIG5ld09mZnNldCA9IGdldEpvYlNjaGVkdWxlckV2ZXJ5TmV4dE1pbGxpcyhwcmV2TWlsbGlzLCBldmVyeSwgbm93LCBvZmZzZXQsIHN0YXJ0RGF0ZSlcbiAgICAgICAgaWYgbm90IG9mZnNldCB0aGVuXG4gICAgICAgICAgICByY2FsbChcIkhTRVRcIiwgc2NoZWR1bGVyS2V5LCBcIm9mZnNldFwiLCBuZXdPZmZzZXQpXG4gICAgICAgICAgICBqb2JPcHRzWydyZXBlYXQnXVsnb2Zmc2V0J10gPSBuZXdPZmZzZXRcbiAgICAgICAgZW5kXG4gICAgZW5kXG4gICAgbG9jYWwgbmV4dERlbGF5ZWRKb2JJZCA9IFwicmVwZWF0OlwiIC4uIGpvYlNjaGVkdWxlcklkIC4uIFwiOlwiIC4uIG5leHRNaWxsaXNcbiAgICBsb2NhbCBuZXh0RGVsYXllZEpvYktleSA9IHNjaGVkdWxlcktleSAuLiBcIjpcIiAuLiBuZXh0TWlsbGlzXG4gICAgbG9jYWwgY3VycmVudERlbGF5ZWRKb2JJZCA9IFwicmVwZWF0OlwiIC4uIGpvYlNjaGVkdWxlcklkIC4uIFwiOlwiIC4uIHByZXZNaWxsaXNcbiAgICBpZiBwcm9kdWNlcklkID09IGN1cnJlbnREZWxheWVkSm9iSWQgdGhlblxuICAgICAgICBsb2NhbCBldmVudHNLZXkgPSBLRVlTWzldXG4gICAgICAgIGxvY2FsIG1heEV2ZW50cyA9IGdldE9yU2V0TWF4RXZlbnRzKG1ldGFLZXkpXG4gICAgICAgIGlmIHJjYWxsKFwiRVhJU1RTXCIsIG5leHREZWxheWVkSm9iS2V5KSB+PSAxIHRoZW5cbiAgICAgICAgICAgIHJjYWxsKFwiWkFERFwiLCByZXBlYXRLZXksIG5leHRNaWxsaXMsIGpvYlNjaGVkdWxlcklkKVxuICAgICAgICAgICAgcmNhbGwoXCJISU5DUkJZXCIsIHNjaGVkdWxlcktleSwgXCJpY1wiLCAxKVxuICAgICAgICAgICAgcmNhbGwoXCJJTkNSXCIsIEtFWVNbOF0pXG4gICAgICAgICAgICAtLSBUT0RPOiByZW1vdmUgdGhpcyB3b3JrYXJvdW5kIGluIG5leHQgYnJlYWtpbmcgY2hhbmdlLFxuICAgICAgICAgICAgLS0gYWxsIGpvYi1zY2hlZHVsZXJzIG11c3Qgc2F2ZSBqb2IgZGF0YVxuICAgICAgICAgICAgbG9jYWwgdGVtcGxhdGVEYXRhID0gc2NoZWR1bGVyQXR0cmlidXRlc1syXSBvciBBUkdWWzNdXG4gICAgICAgICAgICBpZiB0ZW1wbGF0ZURhdGEgYW5kIHRlbXBsYXRlRGF0YSB+PSAne30nIHRoZW5cbiAgICAgICAgICAgICAgICByY2FsbChcIkhTRVRcIiwgc2NoZWR1bGVyS2V5LCBcImRhdGFcIiwgdGVtcGxhdGVEYXRhKVxuICAgICAgICAgICAgZW5kXG4gICAgICAgICAgICBsb2NhbCBkZWxheSA9IG5leHRNaWxsaXMgLSBub3dcbiAgICAgICAgICAgIC0tIEZhc3QgQ2xhbXAgZGVsYXkgdG8gbWluaW11bSBvZiAwXG4gICAgICAgICAgICBpZiBkZWxheSA8IDAgdGhlblxuICAgICAgICAgICAgICAgIGRlbGF5ID0gMFxuICAgICAgICAgICAgZW5kXG4gICAgICAgICAgICBqb2JPcHRzW1wiZGVsYXlcIl0gPSBkZWxheVxuICAgICAgICAgICAgYWRkSm9iRnJvbVNjaGVkdWxlcihuZXh0RGVsYXllZEpvYktleSwgbmV4dERlbGF5ZWRKb2JJZCwgam9iT3B0cywgd2FpdEtleSwgcGF1c2VkS2V5LCBLRVlTWzEyXSwgbWV0YUtleSxcbiAgICAgICAgICAgICAgICBwcmlvcml0aXplZEtleSwgS0VZU1sxMF0sIGRlbGF5ZWRLZXksIEtFWVNbN10sIGV2ZW50c0tleSwgc2NoZWR1bGVyQXR0cmlidXRlc1sxXSwgbWF4RXZlbnRzLCBBUkdWWzVdLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlRGF0YSBvciAne30nLCBqb2JTY2hlZHVsZXJJZCwgZGVsYXkpXG4gICAgICAgICAgICAtLSBUT0RPOiByZW1vdmUgdGhpcyB3b3JrYXJvdW5kIGluIG5leHQgYnJlYWtpbmcgY2hhbmdlXG4gICAgICAgICAgICBpZiBLRVlTWzExXSB+PSBcIlwiIHRoZW5cbiAgICAgICAgICAgICAgICByY2FsbChcIkhTRVRcIiwgS0VZU1sxMV0sIFwibnJqaWRcIiwgbmV4dERlbGF5ZWRKb2JJZClcbiAgICAgICAgICAgIGVuZFxuICAgICAgICAgICAgcmV0dXJuIG5leHREZWxheWVkSm9iSWQgLi4gXCJcIiAtLSBjb252ZXJ0IHRvIHN0cmluZ1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICByY2FsbChcIlhBRERcIiwgZXZlbnRzS2V5LCBcIk1BWExFTlwiLCBcIn5cIiwgbWF4RXZlbnRzLCBcIipcIiwgXCJldmVudFwiLCBcImR1cGxpY2F0ZWRcIiwgXCJqb2JJZFwiLCBuZXh0RGVsYXllZEpvYklkKVxuICAgICAgICBlbmRcbiAgICBlbmRcbmVuZFxuYDtcbmV4cG9ydHMudXBkYXRlSm9iU2NoZWR1bGVyID0ge1xuICAgIG5hbWU6ICd1cGRhdGVKb2JTY2hlZHVsZXInLFxuICAgIGNvbnRlbnQsXG4gICAga2V5czogMTIsXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dXBkYXRlSm9iU2NoZWR1bGVyLTEyLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsInVwZGF0ZUpvYlNjaGVkdWxlciIsImNvbnRlbnQiLCJuYW1lIiwia2V5cyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/scripts/updateJobScheduler-12.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/scripts/updateProgress-3.js":
/*!******************************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/scripts/updateProgress-3.js ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.updateProgress = void 0;\nconst content = `--[[\n  Update job progress\n  Input:\n    KEYS[1] Job id key\n    KEYS[2] event stream key\n    KEYS[3] meta key\n    ARGV[1] id\n    ARGV[2] progress\n  Output:\n     0 - OK\n    -1 - Missing job.\n  Event:\n    progress(jobId, progress)\n]]\nlocal rcall = redis.call\n-- Includes\n--[[\n  Function to get max events value or set by default 10000.\n]]\nlocal function getOrSetMaxEvents(metaKey)\n  local maxEvents = rcall(\"HGET\", metaKey, \"opts.maxLenEvents\")\n  if not maxEvents then\n    maxEvents = 10000\n    rcall(\"HSET\", metaKey, \"opts.maxLenEvents\", maxEvents)\n  end\n  return maxEvents\nend\nif rcall(\"EXISTS\", KEYS[1]) == 1 then -- // Make sure job exists\n    local maxEvents = getOrSetMaxEvents(KEYS[3])\n    rcall(\"HSET\", KEYS[1], \"progress\", ARGV[2])\n    rcall(\"XADD\", KEYS[2], \"MAXLEN\", \"~\", maxEvents, \"*\", \"event\", \"progress\",\n          \"jobId\", ARGV[1], \"data\", ARGV[2]);\n    return 0\nelse\n    return -1\nend\n`;\nexports.updateProgress = {\n    name: \"updateProgress\",\n    content,\n    keys: 3\n}; //# sourceMappingURL=updateProgress-3.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL3NjcmlwdHMvdXBkYXRlUHJvZ3Jlc3MtMy5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsc0JBQXNCLEdBQUcsS0FBSztBQUM5QixNQUFNRyxVQUFVLENBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQW9DakIsQ0FBQztBQUNESCxzQkFBc0IsR0FBRztJQUNyQkksTUFBTTtJQUNORDtJQUNBRSxNQUFNO0FBQ1YsR0FDQSw0Q0FBNEMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vbmx5ZmFucy1wbGF0Zm9ybS8uL25vZGVfbW9kdWxlcy9idWxsbXEvZGlzdC9janMvc2NyaXB0cy91cGRhdGVQcm9ncmVzcy0zLmpzPzk5NjAiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLnVwZGF0ZVByb2dyZXNzID0gdm9pZCAwO1xuY29uc3QgY29udGVudCA9IGAtLVtbXG4gIFVwZGF0ZSBqb2IgcHJvZ3Jlc3NcbiAgSW5wdXQ6XG4gICAgS0VZU1sxXSBKb2IgaWQga2V5XG4gICAgS0VZU1syXSBldmVudCBzdHJlYW0ga2V5XG4gICAgS0VZU1szXSBtZXRhIGtleVxuICAgIEFSR1ZbMV0gaWRcbiAgICBBUkdWWzJdIHByb2dyZXNzXG4gIE91dHB1dDpcbiAgICAgMCAtIE9LXG4gICAgLTEgLSBNaXNzaW5nIGpvYi5cbiAgRXZlbnQ6XG4gICAgcHJvZ3Jlc3Moam9iSWQsIHByb2dyZXNzKVxuXV1cbmxvY2FsIHJjYWxsID0gcmVkaXMuY2FsbFxuLS0gSW5jbHVkZXNcbi0tW1tcbiAgRnVuY3Rpb24gdG8gZ2V0IG1heCBldmVudHMgdmFsdWUgb3Igc2V0IGJ5IGRlZmF1bHQgMTAwMDAuXG5dXVxubG9jYWwgZnVuY3Rpb24gZ2V0T3JTZXRNYXhFdmVudHMobWV0YUtleSlcbiAgbG9jYWwgbWF4RXZlbnRzID0gcmNhbGwoXCJIR0VUXCIsIG1ldGFLZXksIFwib3B0cy5tYXhMZW5FdmVudHNcIilcbiAgaWYgbm90IG1heEV2ZW50cyB0aGVuXG4gICAgbWF4RXZlbnRzID0gMTAwMDBcbiAgICByY2FsbChcIkhTRVRcIiwgbWV0YUtleSwgXCJvcHRzLm1heExlbkV2ZW50c1wiLCBtYXhFdmVudHMpXG4gIGVuZFxuICByZXR1cm4gbWF4RXZlbnRzXG5lbmRcbmlmIHJjYWxsKFwiRVhJU1RTXCIsIEtFWVNbMV0pID09IDEgdGhlbiAtLSAvLyBNYWtlIHN1cmUgam9iIGV4aXN0c1xuICAgIGxvY2FsIG1heEV2ZW50cyA9IGdldE9yU2V0TWF4RXZlbnRzKEtFWVNbM10pXG4gICAgcmNhbGwoXCJIU0VUXCIsIEtFWVNbMV0sIFwicHJvZ3Jlc3NcIiwgQVJHVlsyXSlcbiAgICByY2FsbChcIlhBRERcIiwgS0VZU1syXSwgXCJNQVhMRU5cIiwgXCJ+XCIsIG1heEV2ZW50cywgXCIqXCIsIFwiZXZlbnRcIiwgXCJwcm9ncmVzc1wiLFxuICAgICAgICAgIFwiam9iSWRcIiwgQVJHVlsxXSwgXCJkYXRhXCIsIEFSR1ZbMl0pO1xuICAgIHJldHVybiAwXG5lbHNlXG4gICAgcmV0dXJuIC0xXG5lbmRcbmA7XG5leHBvcnRzLnVwZGF0ZVByb2dyZXNzID0ge1xuICAgIG5hbWU6ICd1cGRhdGVQcm9ncmVzcycsXG4gICAgY29udGVudCxcbiAgICBrZXlzOiAzLFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXVwZGF0ZVByb2dyZXNzLTMuanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwidXBkYXRlUHJvZ3Jlc3MiLCJjb250ZW50IiwibmFtZSIsImtleXMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/scripts/updateProgress-3.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/scripts/updateRepeatableJobMillis-1.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/scripts/updateRepeatableJobMillis-1.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.updateRepeatableJobMillis = void 0;\nconst content = `--[[\n  Adds a repeatable job\n    Input:\n      KEYS[1] 'repeat' key\n      ARGV[1] next milliseconds\n      ARGV[2] custom key\n      ARGV[3] legacy custom key TODO: remove this logic in next breaking change\n      Output:\n        repeatableKey  - OK\n]]\nlocal rcall = redis.call\nlocal repeatKey = KEYS[1]\nlocal nextMillis = ARGV[1]\nlocal customKey = ARGV[2]\nlocal legacyCustomKey = ARGV[3]\nif rcall(\"ZSCORE\", repeatKey, customKey) then\n    rcall(\"ZADD\", repeatKey, nextMillis, customKey)\n    return customKey\nelseif rcall(\"ZSCORE\", repeatKey, legacyCustomKey) ~= false then\n    rcall(\"ZADD\", repeatKey, nextMillis, legacyCustomKey)\n    return legacyCustomKey\nend\nreturn ''\n`;\nexports.updateRepeatableJobMillis = {\n    name: \"updateRepeatableJobMillis\",\n    content,\n    keys: 1\n}; //# sourceMappingURL=updateRepeatableJobMillis-1.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL3NjcmlwdHMvdXBkYXRlUmVwZWF0YWJsZUpvYk1pbGxpcy0xLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCxpQ0FBaUMsR0FBRyxLQUFLO0FBQ3pDLE1BQU1HLFVBQVUsQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUF1QmpCLENBQUM7QUFDREgsaUNBQWlDLEdBQUc7SUFDaENJLE1BQU07SUFDTkQ7SUFDQUUsTUFBTTtBQUNWLEdBQ0EsdURBQXVEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb25seWZhbnMtcGxhdGZvcm0vLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL3NjcmlwdHMvdXBkYXRlUmVwZWF0YWJsZUpvYk1pbGxpcy0xLmpzPzVhMDgiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLnVwZGF0ZVJlcGVhdGFibGVKb2JNaWxsaXMgPSB2b2lkIDA7XG5jb25zdCBjb250ZW50ID0gYC0tW1tcbiAgQWRkcyBhIHJlcGVhdGFibGUgam9iXG4gICAgSW5wdXQ6XG4gICAgICBLRVlTWzFdICdyZXBlYXQnIGtleVxuICAgICAgQVJHVlsxXSBuZXh0IG1pbGxpc2Vjb25kc1xuICAgICAgQVJHVlsyXSBjdXN0b20ga2V5XG4gICAgICBBUkdWWzNdIGxlZ2FjeSBjdXN0b20ga2V5IFRPRE86IHJlbW92ZSB0aGlzIGxvZ2ljIGluIG5leHQgYnJlYWtpbmcgY2hhbmdlXG4gICAgICBPdXRwdXQ6XG4gICAgICAgIHJlcGVhdGFibGVLZXkgIC0gT0tcbl1dXG5sb2NhbCByY2FsbCA9IHJlZGlzLmNhbGxcbmxvY2FsIHJlcGVhdEtleSA9IEtFWVNbMV1cbmxvY2FsIG5leHRNaWxsaXMgPSBBUkdWWzFdXG5sb2NhbCBjdXN0b21LZXkgPSBBUkdWWzJdXG5sb2NhbCBsZWdhY3lDdXN0b21LZXkgPSBBUkdWWzNdXG5pZiByY2FsbChcIlpTQ09SRVwiLCByZXBlYXRLZXksIGN1c3RvbUtleSkgdGhlblxuICAgIHJjYWxsKFwiWkFERFwiLCByZXBlYXRLZXksIG5leHRNaWxsaXMsIGN1c3RvbUtleSlcbiAgICByZXR1cm4gY3VzdG9tS2V5XG5lbHNlaWYgcmNhbGwoXCJaU0NPUkVcIiwgcmVwZWF0S2V5LCBsZWdhY3lDdXN0b21LZXkpIH49IGZhbHNlIHRoZW5cbiAgICByY2FsbChcIlpBRERcIiwgcmVwZWF0S2V5LCBuZXh0TWlsbGlzLCBsZWdhY3lDdXN0b21LZXkpXG4gICAgcmV0dXJuIGxlZ2FjeUN1c3RvbUtleVxuZW5kXG5yZXR1cm4gJydcbmA7XG5leHBvcnRzLnVwZGF0ZVJlcGVhdGFibGVKb2JNaWxsaXMgPSB7XG4gICAgbmFtZTogJ3VwZGF0ZVJlcGVhdGFibGVKb2JNaWxsaXMnLFxuICAgIGNvbnRlbnQsXG4gICAga2V5czogMSxcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD11cGRhdGVSZXBlYXRhYmxlSm9iTWlsbGlzLTEuanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwidXBkYXRlUmVwZWF0YWJsZUpvYk1pbGxpcyIsImNvbnRlbnQiLCJuYW1lIiwia2V5cyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/scripts/updateRepeatableJobMillis-1.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/types/backoff-strategy.js":
/*!****************************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/types/backoff-strategy.js ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n})); //# sourceMappingURL=backoff-strategy.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL3R5cGVzL2JhY2tvZmYtc3RyYXRlZ3kuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUMsRUFDN0QsNENBQTRDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb25seWZhbnMtcGxhdGZvcm0vLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL3R5cGVzL2JhY2tvZmYtc3RyYXRlZ3kuanM/ZTgyNSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWJhY2tvZmYtc3RyYXRlZ3kuanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/types/backoff-strategy.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/types/deduplication-options.js":
/*!*********************************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/types/deduplication-options.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n})); //# sourceMappingURL=deduplication-options.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL3R5cGVzL2RlZHVwbGljYXRpb24tb3B0aW9ucy5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQyxFQUM3RCxpREFBaUQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vbmx5ZmFucy1wbGF0Zm9ybS8uL25vZGVfbW9kdWxlcy9idWxsbXEvZGlzdC9janMvdHlwZXMvZGVkdXBsaWNhdGlvbi1vcHRpb25zLmpzPzg3MzIiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1kZWR1cGxpY2F0aW9uLW9wdGlvbnMuanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/types/deduplication-options.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/types/finished-status.js":
/*!***************************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/types/finished-status.js ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n})); //# sourceMappingURL=finished-status.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL3R5cGVzL2ZpbmlzaGVkLXN0YXR1cy5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQyxFQUM3RCwyQ0FBMkMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vbmx5ZmFucy1wbGF0Zm9ybS8uL25vZGVfbW9kdWxlcy9idWxsbXEvZGlzdC9janMvdHlwZXMvZmluaXNoZWQtc3RhdHVzLmpzPzNjZDIiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1maW5pc2hlZC1zdGF0dXMuanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/types/finished-status.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/types/index.js":
/*!*****************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/types/index.js ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nconst tslib_1 = __webpack_require__(/*! tslib */ \"(rsc)/./node_modules/tslib/tslib.es6.mjs\");\ntslib_1.__exportStar(__webpack_require__(/*! ./backoff-strategy */ \"(rsc)/./node_modules/bullmq/dist/cjs/types/backoff-strategy.js\"), exports);\ntslib_1.__exportStar(__webpack_require__(/*! ./deduplication-options */ \"(rsc)/./node_modules/bullmq/dist/cjs/types/deduplication-options.js\"), exports);\ntslib_1.__exportStar(__webpack_require__(/*! ./finished-status */ \"(rsc)/./node_modules/bullmq/dist/cjs/types/finished-status.js\"), exports);\ntslib_1.__exportStar(__webpack_require__(/*! ./job-json-sandbox */ \"(rsc)/./node_modules/bullmq/dist/cjs/types/job-json-sandbox.js\"), exports);\ntslib_1.__exportStar(__webpack_require__(/*! ./job-options */ \"(rsc)/./node_modules/bullmq/dist/cjs/types/job-options.js\"), exports);\ntslib_1.__exportStar(__webpack_require__(/*! ./job-scheduler-template-options */ \"(rsc)/./node_modules/bullmq/dist/cjs/types/job-scheduler-template-options.js\"), exports);\ntslib_1.__exportStar(__webpack_require__(/*! ./job-type */ \"(rsc)/./node_modules/bullmq/dist/cjs/types/job-type.js\"), exports);\ntslib_1.__exportStar(__webpack_require__(/*! ./job-progress */ \"(rsc)/./node_modules/bullmq/dist/cjs/types/job-progress.js\"), exports);\ntslib_1.__exportStar(__webpack_require__(/*! ./repeat-strategy */ \"(rsc)/./node_modules/bullmq/dist/cjs/types/repeat-strategy.js\"), exports); //# sourceMappingURL=index.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL3R5cGVzL2luZGV4LmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdELE1BQU1DLFVBQVVDLG1CQUFPQSxDQUFDLHVEQUFPO0FBQy9CRCxRQUFRRSxZQUFZLENBQUNELG1CQUFPQSxDQUFDLDBGQUFvQixHQUFHSDtBQUNwREUsUUFBUUUsWUFBWSxDQUFDRCxtQkFBT0EsQ0FBQyxvR0FBeUIsR0FBR0g7QUFDekRFLFFBQVFFLFlBQVksQ0FBQ0QsbUJBQU9BLENBQUMsd0ZBQW1CLEdBQUdIO0FBQ25ERSxRQUFRRSxZQUFZLENBQUNELG1CQUFPQSxDQUFDLDBGQUFvQixHQUFHSDtBQUNwREUsUUFBUUUsWUFBWSxDQUFDRCxtQkFBT0EsQ0FBQyxnRkFBZSxHQUFHSDtBQUMvQ0UsUUFBUUUsWUFBWSxDQUFDRCxtQkFBT0EsQ0FBQyxzSEFBa0MsR0FBR0g7QUFDbEVFLFFBQVFFLFlBQVksQ0FBQ0QsbUJBQU9BLENBQUMsMEVBQVksR0FBR0g7QUFDNUNFLFFBQVFFLFlBQVksQ0FBQ0QsbUJBQU9BLENBQUMsa0ZBQWdCLEdBQUdIO0FBQ2hERSxRQUFRRSxZQUFZLENBQUNELG1CQUFPQSxDQUFDLHdGQUFtQixHQUFHSCxVQUNuRCxpQ0FBaUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vbmx5ZmFucy1wbGF0Zm9ybS8uL25vZGVfbW9kdWxlcy9idWxsbXEvZGlzdC9janMvdHlwZXMvaW5kZXguanM/MGMyMSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmNvbnN0IHRzbGliXzEgPSByZXF1aXJlKFwidHNsaWJcIik7XG50c2xpYl8xLl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi9iYWNrb2ZmLXN0cmF0ZWd5XCIpLCBleHBvcnRzKTtcbnRzbGliXzEuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL2RlZHVwbGljYXRpb24tb3B0aW9uc1wiKSwgZXhwb3J0cyk7XG50c2xpYl8xLl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi9maW5pc2hlZC1zdGF0dXNcIiksIGV4cG9ydHMpO1xudHNsaWJfMS5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vam9iLWpzb24tc2FuZGJveFwiKSwgZXhwb3J0cyk7XG50c2xpYl8xLl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi9qb2Itb3B0aW9uc1wiKSwgZXhwb3J0cyk7XG50c2xpYl8xLl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi9qb2Itc2NoZWR1bGVyLXRlbXBsYXRlLW9wdGlvbnNcIiksIGV4cG9ydHMpO1xudHNsaWJfMS5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vam9iLXR5cGVcIiksIGV4cG9ydHMpO1xudHNsaWJfMS5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vam9iLXByb2dyZXNzXCIpLCBleHBvcnRzKTtcbnRzbGliXzEuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL3JlcGVhdC1zdHJhdGVneVwiKSwgZXhwb3J0cyk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJ0c2xpYl8xIiwicmVxdWlyZSIsIl9fZXhwb3J0U3RhciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/types/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/types/job-json-sandbox.js":
/*!****************************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/types/job-json-sandbox.js ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n})); //# sourceMappingURL=job-json-sandbox.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL3R5cGVzL2pvYi1qc29uLXNhbmRib3guanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUMsRUFDN0QsNENBQTRDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb25seWZhbnMtcGxhdGZvcm0vLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL3R5cGVzL2pvYi1qc29uLXNhbmRib3guanM/Njg5NCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWpvYi1qc29uLXNhbmRib3guanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/types/job-json-sandbox.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/types/job-options.js":
/*!***********************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/types/job-options.js ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n})); //# sourceMappingURL=job-options.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL3R5cGVzL2pvYi1vcHRpb25zLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDLEVBQzdELHVDQUF1QyIsInNvdXJjZXMiOlsid2VicGFjazovL29ubHlmYW5zLXBsYXRmb3JtLy4vbm9kZV9tb2R1bGVzL2J1bGxtcS9kaXN0L2Nqcy90eXBlcy9qb2Itb3B0aW9ucy5qcz81ODJhIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9am9iLW9wdGlvbnMuanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/types/job-options.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/types/job-progress.js":
/*!************************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/types/job-progress.js ***!
  \************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n})); //# sourceMappingURL=job-progress.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL3R5cGVzL2pvYi1wcm9ncmVzcy5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQyxFQUM3RCx3Q0FBd0MiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vbmx5ZmFucy1wbGF0Zm9ybS8uL25vZGVfbW9kdWxlcy9idWxsbXEvZGlzdC9janMvdHlwZXMvam9iLXByb2dyZXNzLmpzP2VkZGIiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1qb2ItcHJvZ3Jlc3MuanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/types/job-progress.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/types/job-scheduler-template-options.js":
/*!******************************************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/types/job-scheduler-template-options.js ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n})); //# sourceMappingURL=job-scheduler-template-options.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL3R5cGVzL2pvYi1zY2hlZHVsZXItdGVtcGxhdGUtb3B0aW9ucy5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQyxFQUM3RCwwREFBMEQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vbmx5ZmFucy1wbGF0Zm9ybS8uL25vZGVfbW9kdWxlcy9idWxsbXEvZGlzdC9janMvdHlwZXMvam9iLXNjaGVkdWxlci10ZW1wbGF0ZS1vcHRpb25zLmpzPzVkM2QiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1qb2Itc2NoZWR1bGVyLXRlbXBsYXRlLW9wdGlvbnMuanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/types/job-scheduler-template-options.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/types/job-type.js":
/*!********************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/types/job-type.js ***!
  \********************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n})); //# sourceMappingURL=job-type.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL3R5cGVzL2pvYi10eXBlLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDLEVBQzdELG9DQUFvQyIsInNvdXJjZXMiOlsid2VicGFjazovL29ubHlmYW5zLXBsYXRmb3JtLy4vbm9kZV9tb2R1bGVzL2J1bGxtcS9kaXN0L2Nqcy90eXBlcy9qb2ItdHlwZS5qcz8xMDIxIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9am9iLXR5cGUuanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/types/job-type.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/types/processor.js":
/*!*********************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/types/processor.js ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n})); //# sourceMappingURL=processor.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL3R5cGVzL3Byb2Nlc3Nvci5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQyxFQUM3RCxxQ0FBcUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vbmx5ZmFucy1wbGF0Zm9ybS8uL25vZGVfbW9kdWxlcy9idWxsbXEvZGlzdC9janMvdHlwZXMvcHJvY2Vzc29yLmpzP2JmOWYiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wcm9jZXNzb3IuanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/types/processor.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/types/repeat-strategy.js":
/*!***************************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/types/repeat-strategy.js ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n})); //# sourceMappingURL=repeat-strategy.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL3R5cGVzL3JlcGVhdC1zdHJhdGVneS5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQyxFQUM3RCwyQ0FBMkMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vbmx5ZmFucy1wbGF0Zm9ybS8uL25vZGVfbW9kdWxlcy9idWxsbXEvZGlzdC9janMvdHlwZXMvcmVwZWF0LXN0cmF0ZWd5LmpzPzM1YjciXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1yZXBlYXQtc3RyYXRlZ3kuanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/types/repeat-strategy.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/utils/create-scripts.js":
/*!**************************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/utils/create-scripts.js ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.createScripts = void 0;\nconst scripts_1 = __webpack_require__(/*! ../classes/scripts */ \"(rsc)/./node_modules/bullmq/dist/cjs/classes/scripts.js\");\n/*\n * Factory method to create a Scripts object.\n */ const createScripts = (queue)=>{\n    return new scripts_1.Scripts({\n        keys: queue.keys,\n        client: queue.client,\n        get redisVersion () {\n            return queue.redisVersion;\n        },\n        toKey: queue.toKey,\n        opts: queue.opts,\n        closing: queue.closing\n    });\n};\nexports.createScripts = createScripts; //# sourceMappingURL=create-scripts.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL3V0aWxzL2NyZWF0ZS1zY3JpcHRzLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCxxQkFBcUIsR0FBRyxLQUFLO0FBQzdCLE1BQU1HLFlBQVlDLG1CQUFPQSxDQUFDLG1GQUFvQjtBQUM5Qzs7Q0FFQyxHQUNELE1BQU1GLGdCQUFnQixDQUFDRztJQUNuQixPQUFPLElBQUlGLFVBQVVHLE9BQU8sQ0FBQztRQUN6QkMsTUFBTUYsTUFBTUUsSUFBSTtRQUNoQkMsUUFBUUgsTUFBTUcsTUFBTTtRQUNwQixJQUFJQyxnQkFBZTtZQUNmLE9BQU9KLE1BQU1JLFlBQVk7UUFDN0I7UUFDQUMsT0FBT0wsTUFBTUssS0FBSztRQUNsQkMsTUFBTU4sTUFBTU0sSUFBSTtRQUNoQkMsU0FBU1AsTUFBTU8sT0FBTztJQUMxQjtBQUNKO0FBQ0FaLHFCQUFxQixHQUFHRSxlQUN4QiwwQ0FBMEMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vbmx5ZmFucy1wbGF0Zm9ybS8uL25vZGVfbW9kdWxlcy9idWxsbXEvZGlzdC9janMvdXRpbHMvY3JlYXRlLXNjcmlwdHMuanM/YmEyOSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuY3JlYXRlU2NyaXB0cyA9IHZvaWQgMDtcbmNvbnN0IHNjcmlwdHNfMSA9IHJlcXVpcmUoXCIuLi9jbGFzc2VzL3NjcmlwdHNcIik7XG4vKlxuICogRmFjdG9yeSBtZXRob2QgdG8gY3JlYXRlIGEgU2NyaXB0cyBvYmplY3QuXG4gKi9cbmNvbnN0IGNyZWF0ZVNjcmlwdHMgPSAocXVldWUpID0+IHtcbiAgICByZXR1cm4gbmV3IHNjcmlwdHNfMS5TY3JpcHRzKHtcbiAgICAgICAga2V5czogcXVldWUua2V5cyxcbiAgICAgICAgY2xpZW50OiBxdWV1ZS5jbGllbnQsXG4gICAgICAgIGdldCByZWRpc1ZlcnNpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gcXVldWUucmVkaXNWZXJzaW9uO1xuICAgICAgICB9LFxuICAgICAgICB0b0tleTogcXVldWUudG9LZXksXG4gICAgICAgIG9wdHM6IHF1ZXVlLm9wdHMsXG4gICAgICAgIGNsb3Npbmc6IHF1ZXVlLmNsb3NpbmcsXG4gICAgfSk7XG59O1xuZXhwb3J0cy5jcmVhdGVTY3JpcHRzID0gY3JlYXRlU2NyaXB0cztcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNyZWF0ZS1zY3JpcHRzLmpzLm1hcCJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsImNyZWF0ZVNjcmlwdHMiLCJzY3JpcHRzXzEiLCJyZXF1aXJlIiwicXVldWUiLCJTY3JpcHRzIiwia2V5cyIsImNsaWVudCIsInJlZGlzVmVyc2lvbiIsInRvS2V5Iiwib3B0cyIsImNsb3NpbmciXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/utils/create-scripts.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/utils/index.js":
/*!*****************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/utils/index.js ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.QUEUE_EVENT_SUFFIX = exports.toString = exports.errorToJSON = exports.parseObjectValues = exports.isRedisVersionLowerThan = exports.childSend = exports.asyncSend = exports.DELAY_TIME_1 = exports.DELAY_TIME_5 = exports.clientCommandMessageReg = exports.optsEncodeMap = exports.optsDecodeMap = exports.errorObject = void 0;\nexports.tryCatch = tryCatch;\nexports.lengthInUtf8Bytes = lengthInUtf8Bytes;\nexports.isEmpty = isEmpty;\nexports.array2obj = array2obj;\nexports.objectToFlatArray = objectToFlatArray;\nexports.delay = delay;\nexports.increaseMaxListeners = increaseMaxListeners;\nexports.invertObject = invertObject;\nexports.isRedisInstance = isRedisInstance;\nexports.isRedisCluster = isRedisCluster;\nexports.decreaseMaxListeners = decreaseMaxListeners;\nexports.removeAllQueueData = removeAllQueueData;\nexports.getParentKey = getParentKey;\nexports.isNotConnectionError = isNotConnectionError;\nexports.removeUndefinedFields = removeUndefinedFields;\nexports.trace = trace;\nconst ioredis_1 = __webpack_require__(/*! ioredis */ \"(rsc)/./node_modules/ioredis/built/index.js\");\n// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n// @ts-ignore\nconst utils_1 = __webpack_require__(/*! ioredis/built/utils */ \"(rsc)/./node_modules/ioredis/built/utils/index.js\");\nconst semver = __webpack_require__(/*! semver */ \"(rsc)/./node_modules/semver/index.js\");\nconst enums_1 = __webpack_require__(/*! ../enums */ \"(rsc)/./node_modules/bullmq/dist/cjs/enums/index.js\");\nexports.errorObject = {\n    value: null\n};\nfunction tryCatch(fn, ctx, args) {\n    try {\n        return fn.apply(ctx, args);\n    } catch (e) {\n        exports.errorObject.value = e;\n        return exports.errorObject;\n    }\n}\n/**\n * Checks the size of string for ascii/non-ascii characters\n * @see https://stackoverflow.com/a/23318053/1347170\n * @param str -\n */ function lengthInUtf8Bytes(str) {\n    return Buffer.byteLength(str, \"utf8\");\n}\nfunction isEmpty(obj) {\n    for(const key in obj){\n        if (Object.prototype.hasOwnProperty.call(obj, key)) {\n            return false;\n        }\n    }\n    return true;\n}\nfunction array2obj(arr) {\n    const obj = {};\n    for(let i = 0; i < arr.length; i += 2){\n        obj[arr[i]] = arr[i + 1];\n    }\n    return obj;\n}\nfunction objectToFlatArray(obj) {\n    const arr = [];\n    for(const key in obj){\n        if (Object.prototype.hasOwnProperty.call(obj, key) && obj[key] !== undefined) {\n            arr[arr.length] = key;\n            arr[arr.length] = obj[key];\n        }\n    }\n    return arr;\n}\nfunction delay(ms, abortController) {\n    return new Promise((resolve)=>{\n        // eslint-disable-next-line prefer-const\n        let timeout;\n        const callback = ()=>{\n            abortController === null || abortController === void 0 ? void 0 : abortController.signal.removeEventListener(\"abort\", callback);\n            clearTimeout(timeout);\n            resolve();\n        };\n        timeout = setTimeout(callback, ms);\n        abortController === null || abortController === void 0 ? void 0 : abortController.signal.addEventListener(\"abort\", callback);\n    });\n}\nfunction increaseMaxListeners(emitter, count) {\n    const maxListeners = emitter.getMaxListeners();\n    emitter.setMaxListeners(maxListeners + count);\n}\nfunction invertObject(obj) {\n    return Object.entries(obj).reduce((result, [key, value])=>{\n        result[value] = key;\n        return result;\n    }, {});\n}\nexports.optsDecodeMap = {\n    de: \"deduplication\",\n    fpof: \"failParentOnFailure\",\n    cpof: \"continueParentOnFailure\",\n    idof: \"ignoreDependencyOnFailure\",\n    kl: \"keepLogs\",\n    rdof: \"removeDependencyOnFailure\"\n};\nexports.optsEncodeMap = Object.assign(Object.assign({}, invertObject(exports.optsDecodeMap)), {\n    /*/ Legacy for backwards compatibility */ debounce: \"de\"\n});\nfunction isRedisInstance(obj) {\n    if (!obj) {\n        return false;\n    }\n    const redisApi = [\n        \"connect\",\n        \"disconnect\",\n        \"duplicate\"\n    ];\n    return redisApi.every((name)=>typeof obj[name] === \"function\");\n}\nfunction isRedisCluster(obj) {\n    return isRedisInstance(obj) && obj.isCluster;\n}\nfunction decreaseMaxListeners(emitter, count) {\n    increaseMaxListeners(emitter, -count);\n}\nasync function removeAllQueueData(client, queueName, prefix = process.env.BULLMQ_TEST_PREFIX || \"bull\") {\n    if (client instanceof ioredis_1.Cluster) {\n        // todo compat with cluster ?\n        // @see https://github.com/luin/ioredis/issues/175\n        return Promise.resolve(false);\n    }\n    const pattern = `${prefix}:${queueName}:*`;\n    const removing = await new Promise((resolve, reject)=>{\n        const stream = client.scanStream({\n            match: pattern\n        });\n        stream.on(\"data\", (keys)=>{\n            if (keys.length) {\n                const pipeline = client.pipeline();\n                keys.forEach((key)=>{\n                    pipeline.del(key);\n                });\n                pipeline.exec().catch((error)=>{\n                    reject(error);\n                });\n            }\n        });\n        stream.on(\"end\", ()=>resolve());\n        stream.on(\"error\", (error)=>reject(error));\n    });\n    await removing;\n    await client.quit();\n}\nfunction getParentKey(opts) {\n    if (opts) {\n        return `${opts.queue}:${opts.id}`;\n    }\n}\nexports.clientCommandMessageReg = /ERR unknown command ['`]\\s*client\\s*['`]/;\nexports.DELAY_TIME_5 = 5000;\nexports.DELAY_TIME_1 = 100;\nfunction isNotConnectionError(error) {\n    const { code, message: errorMessage } = error;\n    return errorMessage !== utils_1.CONNECTION_CLOSED_ERROR_MSG && !errorMessage.includes(\"ECONNREFUSED\") && code !== \"ECONNREFUSED\";\n}\nconst asyncSend = (proc, msg)=>{\n    return new Promise((resolve, reject)=>{\n        if (typeof proc.send === \"function\") {\n            proc.send(msg, (err)=>{\n                if (err) {\n                    reject(err);\n                } else {\n                    resolve();\n                }\n            });\n        } else if (typeof proc.postMessage === \"function\") {\n            resolve(proc.postMessage(msg));\n        } else {\n            resolve();\n        }\n    });\n};\nexports.asyncSend = asyncSend;\nconst childSend = (proc, msg)=>(0, exports.asyncSend)(proc, msg);\nexports.childSend = childSend;\nconst isRedisVersionLowerThan = (currentVersion, minimumVersion)=>{\n    const version = semver.valid(semver.coerce(currentVersion));\n    return semver.lt(version, minimumVersion);\n};\nexports.isRedisVersionLowerThan = isRedisVersionLowerThan;\nconst parseObjectValues = (obj)=>{\n    const accumulator = {};\n    for (const value of Object.entries(obj)){\n        accumulator[value[0]] = JSON.parse(value[1]);\n    }\n    return accumulator;\n};\nexports.parseObjectValues = parseObjectValues;\nconst getCircularReplacer = (rootReference)=>{\n    const references = new WeakSet();\n    references.add(rootReference);\n    return (_, value)=>{\n        if (typeof value === \"object\" && value !== null) {\n            if (references.has(value)) {\n                return \"[Circular]\";\n            }\n            references.add(value);\n        }\n        return value;\n    };\n};\nconst errorToJSON = (value)=>{\n    const error = {};\n    Object.getOwnPropertyNames(value).forEach(function(propName) {\n        error[propName] = value[propName];\n    });\n    return JSON.parse(JSON.stringify(error, getCircularReplacer(value)));\n};\nexports.errorToJSON = errorToJSON;\nconst INFINITY = 1 / 0;\nconst toString = (value)=>{\n    if (value == null) {\n        return \"\";\n    }\n    // Exit early for strings to avoid a performance hit in some environments.\n    if (typeof value === \"string\") {\n        return value;\n    }\n    if (Array.isArray(value)) {\n        // Recursively convert values (susceptible to call stack limits).\n        return `${value.map((other)=>other == null ? other : (0, exports.toString)(other))}`;\n    }\n    if (typeof value == \"symbol\" || Object.prototype.toString.call(value) == \"[object Symbol]\") {\n        return value.toString();\n    }\n    const result = `${value}`;\n    return result === \"0\" && 1 / value === -INFINITY ? \"-0\" : result;\n};\nexports.toString = toString;\nexports.QUEUE_EVENT_SUFFIX = \":qe\";\nfunction removeUndefinedFields(obj) {\n    const newObj = {};\n    for(const key in obj){\n        if (obj[key] !== undefined) {\n            newObj[key] = obj[key];\n        }\n    }\n    return newObj;\n}\n/**\n * Wraps the code with telemetry and provides a span for configuration.\n *\n * @param telemetry - telemetry configuration. If undefined, the callback will be executed without telemetry.\n * @param spanKind - kind of the span: Producer, Consumer, Internal\n * @param queueName - queue name\n * @param operation - operation name (such as add, process, etc)\n * @param destination - destination name (normally the queue name)\n * @param callback - code to wrap with telemetry\n * @param srcPropagationMedatada -\n * @returns\n */ async function trace(telemetry, spanKind, queueName, operation, destination, callback, srcPropagationMetadata) {\n    if (!telemetry) {\n        return callback();\n    } else {\n        const { tracer, contextManager } = telemetry;\n        const currentContext = contextManager.active();\n        let parentContext;\n        if (srcPropagationMetadata) {\n            parentContext = contextManager.fromMetadata(currentContext, srcPropagationMetadata);\n        }\n        const spanName = destination ? `${operation} ${destination}` : operation;\n        const span = tracer.startSpan(spanName, {\n            kind: spanKind\n        }, parentContext);\n        try {\n            span.setAttributes({\n                [enums_1.TelemetryAttributes.QueueName]: queueName,\n                [enums_1.TelemetryAttributes.QueueOperation]: operation\n            });\n            let messageContext;\n            let dstPropagationMetadata;\n            if (spanKind === enums_1.SpanKind.CONSUMER && parentContext) {\n                messageContext = span.setSpanOnContext(parentContext);\n            } else {\n                messageContext = span.setSpanOnContext(currentContext);\n            }\n            if (callback.length == 2) {\n                dstPropagationMetadata = contextManager.getMetadata(messageContext);\n            }\n            return await contextManager.with(messageContext, ()=>callback(span, dstPropagationMetadata));\n        } catch (err) {\n            span.recordException(err);\n            throw err;\n        } finally{\n            span.end();\n        }\n    }\n} //# sourceMappingURL=index.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL3V0aWxzL2luZGV4LmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCwwQkFBMEIsR0FBR0EsZ0JBQWdCLEdBQUdBLG1CQUFtQixHQUFHQSx5QkFBeUIsR0FBR0EsK0JBQStCLEdBQUdBLGlCQUFpQixHQUFHQSxpQkFBaUIsR0FBR0Esb0JBQW9CLEdBQUdBLG9CQUFvQixHQUFHQSwrQkFBK0IsR0FBR0EscUJBQXFCLEdBQUdBLHFCQUFxQixHQUFHQSxtQkFBbUIsR0FBRyxLQUFLO0FBQ3ZVQSxnQkFBZ0IsR0FBR2U7QUFDbkJmLHlCQUF5QixHQUFHZ0I7QUFDNUJoQixlQUFlLEdBQUdpQjtBQUNsQmpCLGlCQUFpQixHQUFHa0I7QUFDcEJsQix5QkFBeUIsR0FBR21CO0FBQzVCbkIsYUFBYSxHQUFHb0I7QUFDaEJwQiw0QkFBNEIsR0FBR3FCO0FBQy9CckIsb0JBQW9CLEdBQUdzQjtBQUN2QnRCLHVCQUF1QixHQUFHdUI7QUFDMUJ2QixzQkFBc0IsR0FBR3dCO0FBQ3pCeEIsNEJBQTRCLEdBQUd5QjtBQUMvQnpCLDBCQUEwQixHQUFHMEI7QUFDN0IxQixvQkFBb0IsR0FBRzJCO0FBQ3ZCM0IsNEJBQTRCLEdBQUc0QjtBQUMvQjVCLDZCQUE2QixHQUFHNkI7QUFDaEM3QixhQUFhLEdBQUc4QjtBQUNoQixNQUFNQyxZQUFZQyxtQkFBT0EsQ0FBQyw0REFBUztBQUNuQyw2REFBNkQ7QUFDN0QsYUFBYTtBQUNiLE1BQU1DLFVBQVVELG1CQUFPQSxDQUFDLDhFQUFxQjtBQUM3QyxNQUFNRSxTQUFTRixtQkFBT0EsQ0FBQyxvREFBUTtBQUMvQixNQUFNRyxVQUFVSCxtQkFBT0EsQ0FBQyxxRUFBVTtBQUNsQ2hDLG1CQUFtQixHQUFHO0lBQUVDLE9BQU87QUFBSztBQUNwQyxTQUFTYyxTQUFTcUIsRUFBRSxFQUFFQyxHQUFHLEVBQUVDLElB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R0Q7UUFDL0QsTUFBTVUsT0FBT1AsT0FBT1EsU0FBUyxDQUFDRixVQUFVO1lBQ3BDRyxNQUFNYjtRQUNWLEdBQUdRO1FBQ0gsSUFBSTtZQUNBRyxLQUFLRyxhQUFhLENBQUM7Z0JBQ2YsQ0FBQzVILFFBQVE2SCxtQkFBbUIsQ0FBQ0MsU0FBUyxDQUFDLEVBQUU1RTtnQkFDekMsQ0FBQ2xELFFBQVE2SCxtQkFBbUIsQ0FBQ0UsY0FBYyxDQUFDLEVBQUVoQjtZQUNsRDtZQUNBLElBQUlpQjtZQUNKLElBQUlDO1lBQ0osSUFBSW5CLGFBQWE5RyxRQUFRa0ksUUFBUSxDQUFDQyxRQUFRLElBQUliLGVBQWU7Z0JBQ3pEVSxpQkFBaUJQLEtBQUtXLGdCQUFnQixDQUFDZDtZQUMzQyxPQUNLO2dCQUNEVSxpQkFBaUJQLEtBQUtXLGdCQUFnQixDQUFDaEI7WUFDM0M7WUFDQSxJQUFJN0YsU0FBU1AsTUFBTSxJQUFJLEdBQUc7Z0JBQ3RCaUgseUJBQXlCZCxlQUFla0IsV0FBVyxDQUFDTDtZQUN4RDtZQUNBLE9BQU8sTUFBTWIsZUFBZW1CLElBQUksQ0FBQ04sZ0JBQWdCLElBQU16RyxTQUFTa0csTUFBTVE7UUFDMUUsRUFDQSxPQUFPL0MsS0FBSztZQUNSdUMsS0FBS2MsZUFBZSxDQUFDckQ7WUFDckIsTUFBTUE7UUFDVixTQUNRO1lBQ0p1QyxLQUFLZSxHQUFHO1FBQ1o7SUFDSjtBQUNKLEVBQ0EsaUNBQWlDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb25seWZhbnMtcGxhdGZvcm0vLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL3V0aWxzL2luZGV4LmpzPzM5OTYiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLlFVRVVFX0VWRU5UX1NVRkZJWCA9IGV4cG9ydHMudG9TdHJpbmcgPSBleHBvcnRzLmVycm9yVG9KU09OID0gZXhwb3J0cy5wYXJzZU9iamVjdFZhbHVlcyA9IGV4cG9ydHMuaXNSZWRpc1ZlcnNpb25Mb3dlclRoYW4gPSBleHBvcnRzLmNoaWxkU2VuZCA9IGV4cG9ydHMuYXN5bmNTZW5kID0gZXhwb3J0cy5ERUxBWV9USU1FXzEgPSBleHBvcnRzLkRFTEFZX1RJTUVfNSA9IGV4cG9ydHMuY2xpZW50Q29tbWFuZE1lc3NhZ2VSZWcgPSBleHBvcnRzLm9wdHNFbmNvZGVNYXAgPSBleHBvcnRzLm9wdHNEZWNvZGVNYXAgPSBleHBvcnRzLmVycm9yT2JqZWN0ID0gdm9pZCAwO1xuZXhwb3J0cy50cnlDYXRjaCA9IHRyeUNhdGNoO1xuZXhwb3J0cy5sZW5ndGhJblV0ZjhCeXRlcyA9IGxlbmd0aEluVXRmOEJ5dGVzO1xuZXhwb3J0cy5pc0VtcHR5ID0gaXNFbXB0eTtcbmV4cG9ydHMuYXJyYXkyb2JqID0gYXJyYXkyb2JqO1xuZXhwb3J0cy5vYmplY3RUb0ZsYXRBcnJheSA9IG9iamVjdFRvRmxhdEFycmF5O1xuZXhwb3J0cy5kZWxheSA9IGRlbGF5O1xuZXhwb3J0cy5pbmNyZWFzZU1heExpc3RlbmVycyA9IGluY3JlYXNlTWF4TGlzdGVuZXJzO1xuZXhwb3J0cy5pbnZlcnRPYmplY3QgPSBpbnZlcnRPYmplY3Q7XG5leHBvcnRzLmlzUmVkaXNJbnN0YW5jZSA9IGlzUmVkaXNJbnN0YW5jZTtcbmV4cG9ydHMuaXNSZWRpc0NsdXN0ZXIgPSBpc1JlZGlzQ2x1c3RlcjtcbmV4cG9ydHMuZGVjcmVhc2VNYXhMaXN0ZW5lcnMgPSBkZWNyZWFzZU1heExpc3RlbmVycztcbmV4cG9ydHMucmVtb3ZlQWxsUXVldWVEYXRhID0gcmVtb3ZlQWxsUXVldWVEYXRhO1xuZXhwb3J0cy5nZXRQYXJlbnRLZXkgPSBnZXRQYXJlbnRLZXk7XG5leHBvcnRzLmlzTm90Q29ubmVjdGlvbkVycm9yID0gaXNOb3RDb25uZWN0aW9uRXJyb3I7XG5leHBvcnRzLnJlbW92ZVVuZGVmaW5lZEZpZWxkcyA9IHJlbW92ZVVuZGVmaW5lZEZpZWxkcztcbmV4cG9ydHMudHJhY2UgPSB0cmFjZTtcbmNvbnN0IGlvcmVkaXNfMSA9IHJlcXVpcmUoXCJpb3JlZGlzXCIpO1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9iYW4tdHMtY29tbWVudFxuLy8gQHRzLWlnbm9yZVxuY29uc3QgdXRpbHNfMSA9IHJlcXVpcmUoXCJpb3JlZGlzL2J1aWx0L3V0aWxzXCIpO1xuY29uc3Qgc2VtdmVyID0gcmVxdWlyZShcInNlbXZlclwiKTtcbmNvbnN0IGVudW1zXzEgPSByZXF1aXJlKFwiLi4vZW51bXNcIik7XG5leHBvcnRzLmVycm9yT2JqZWN0ID0geyB2YWx1ZTogbnVsbCB9O1xuZnVuY3Rpb24gdHJ5Q2F0Y2goZm4sIGN0eCwgYXJncykge1xuICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBmbi5hcHBseShjdHgsIGFyZ3MpO1xuICAgIH1cbiAgICBjYXRjaCAoZSkge1xuICAgICAgICBleHBvcnRzLmVycm9yT2JqZWN0LnZhbHVlID0gZTtcbiAgICAgICAgcmV0dXJuIGV4cG9ydHMuZXJyb3JPYmplY3Q7XG4gICAgfVxufVxuLyoqXG4gKiBDaGVja3MgdGhlIHNpemUgb2Ygc3RyaW5nIGZvciBhc2NpaS9ub24tYXNjaWkgY2hhcmFjdGVyc1xuICogQHNlZSBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMjMzMTgwNTMvMTM0NzE3MFxuICogQHBhcmFtIHN0ciAtXG4gKi9cbmZ1bmN0aW9uIGxlbmd0aEluVXRmOEJ5dGVzKHN0cikge1xuICAgIHJldHVybiBCdWZmZXIuYnl0ZUxlbmd0aChzdHIsICd1dGY4Jyk7XG59XG5mdW5jdGlvbiBpc0VtcHR5KG9iaikge1xuICAgIGZvciAoY29uc3Qga2V5IGluIG9iaikge1xuICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xufVxuZnVuY3Rpb24gYXJyYXkyb2JqKGFycikge1xuICAgIGNvbnN0IG9iaiA9IHt9O1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgaSArPSAyKSB7XG4gICAgICAgIG9ialthcnJbaV1dID0gYXJyW2kgKyAxXTtcbiAgICB9XG4gICAgcmV0dXJuIG9iajtcbn1cbmZ1bmN0aW9uIG9iamVjdFRvRmxhdEFycmF5KG9iaikge1xuICAgIGNvbnN0IGFyciA9IFtdO1xuICAgIGZvciAoY29uc3Qga2V5IGluIG9iaikge1xuICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSAmJlxuICAgICAgICAgICAgb2JqW2tleV0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgYXJyW2Fyci5sZW5ndGhdID0ga2V5O1xuICAgICAgICAgICAgYXJyW2Fyci5sZW5ndGhdID0gb2JqW2tleV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGFycjtcbn1cbmZ1bmN0aW9uIGRlbGF5KG1zLCBhYm9ydENvbnRyb2xsZXIpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBwcmVmZXItY29uc3RcbiAgICAgICAgbGV0IHRpbWVvdXQ7XG4gICAgICAgIGNvbnN0IGNhbGxiYWNrID0gKCkgPT4ge1xuICAgICAgICAgICAgYWJvcnRDb250cm9sbGVyID09PSBudWxsIHx8IGFib3J0Q29udHJvbGxlciA9PT0gdm9pZCAwID8gdm9pZCAwIDogYWJvcnRDb250cm9sbGVyLnNpZ25hbC5yZW1vdmVFdmVudExpc3RlbmVyKCdhYm9ydCcsIGNhbGxiYWNrKTtcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcbiAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGltZW91dCA9IHNldFRpbWVvdXQoY2FsbGJhY2ssIG1zKTtcbiAgICAgICAgYWJvcnRDb250cm9sbGVyID09PSBudWxsIHx8IGFib3J0Q29udHJvbGxlciA9PT0gdm9pZCAwID8gdm9pZCAwIDogYWJvcnRDb250cm9sbGVyLnNpZ25hbC5hZGRFdmVudExpc3RlbmVyKCdhYm9ydCcsIGNhbGxiYWNrKTtcbiAgICB9KTtcbn1cbmZ1bmN0aW9uIGluY3JlYXNlTWF4TGlzdGVuZXJzKGVtaXR0ZXIsIGNvdW50KSB7XG4gICAgY29uc3QgbWF4TGlzdGVuZXJzID0gZW1pdHRlci5nZXRNYXhMaXN0ZW5lcnMoKTtcbiAgICBlbWl0dGVyLnNldE1heExpc3RlbmVycyhtYXhMaXN0ZW5lcnMgKyBjb3VudCk7XG59XG5mdW5jdGlvbiBpbnZlcnRPYmplY3Qob2JqKSB7XG4gICAgcmV0dXJuIE9iamVjdC5lbnRyaWVzKG9iaikucmVkdWNlKChyZXN1bHQsIFtrZXksIHZhbHVlXSkgPT4ge1xuICAgICAgICByZXN1bHRbdmFsdWVdID0ga2V5O1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0sIHt9KTtcbn1cbmV4cG9ydHMub3B0c0RlY29kZU1hcCA9IHtcbiAgICBkZTogJ2RlZHVwbGljYXRpb24nLFxuICAgIGZwb2Y6ICdmYWlsUGFyZW50T25GYWlsdXJlJyxcbiAgICBjcG9mOiAnY29udGludWVQYXJlbnRPbkZhaWx1cmUnLFxuICAgIGlkb2Y6ICdpZ25vcmVEZXBlbmRlbmN5T25GYWlsdXJlJyxcbiAgICBrbDogJ2tlZXBMb2dzJyxcbiAgICByZG9mOiAncmVtb3ZlRGVwZW5kZW5jeU9uRmFpbHVyZScsXG59O1xuZXhwb3J0cy5vcHRzRW5jb2RlTWFwID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBpbnZlcnRPYmplY3QoZXhwb3J0cy5vcHRzRGVjb2RlTWFwKSksIHsgXG4gICAgLyovIExlZ2FjeSBmb3IgYmFja3dhcmRzIGNvbXBhdGliaWxpdHkgKi8gZGVib3VuY2U6ICdkZScgfSk7XG5mdW5jdGlvbiBpc1JlZGlzSW5zdGFuY2Uob2JqKSB7XG4gICAgaWYgKCFvYmopIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBjb25zdCByZWRpc0FwaSA9IFsnY29ubmVjdCcsICdkaXNjb25uZWN0JywgJ2R1cGxpY2F0ZSddO1xuICAgIHJldHVybiByZWRpc0FwaS5ldmVyeShuYW1lID0+IHR5cGVvZiBvYmpbbmFtZV0gPT09ICdmdW5jdGlvbicpO1xufVxuZnVuY3Rpb24gaXNSZWRpc0NsdXN0ZXIob2JqKSB7XG4gICAgcmV0dXJuIGlzUmVkaXNJbnN0YW5jZShvYmopICYmIG9iai5pc0NsdXN0ZXI7XG59XG5mdW5jdGlvbiBkZWNyZWFzZU1heExpc3RlbmVycyhlbWl0dGVyLCBjb3VudCkge1xuICAgIGluY3JlYXNlTWF4TGlzdGVuZXJzKGVtaXR0ZXIsIC1jb3VudCk7XG59XG5hc3luYyBmdW5jdGlvbiByZW1vdmVBbGxRdWV1ZURhdGEoY2xpZW50LCBxdWV1ZU5hbWUsIHByZWZpeCA9IHByb2Nlc3MuZW52LkJVTExNUV9URVNUX1BSRUZJWCB8fCAnYnVsbCcpIHtcbiAgICBpZiAoY2xpZW50IGluc3RhbmNlb2YgaW9yZWRpc18xLkNsdXN0ZXIpIHtcbiAgICAgICAgLy8gdG9kbyBjb21wYXQgd2l0aCBjbHVzdGVyID9cbiAgICAgICAgLy8gQHNlZSBodHRwczovL2dpdGh1Yi5jb20vbHVpbi9pb3JlZGlzL2lzc3Vlcy8xNzVcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShmYWxzZSk7XG4gICAgfVxuICAgIGNvbnN0IHBhdHRlcm4gPSBgJHtwcmVmaXh9OiR7cXVldWVOYW1lfToqYDtcbiAgICBjb25zdCByZW1vdmluZyA9IGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgY29uc3Qgc3RyZWFtID0gY2xpZW50LnNjYW5TdHJlYW0oe1xuICAgICAgICAgICAgbWF0Y2g6IHBhdHRlcm4sXG4gICAgICAgIH0pO1xuICAgICAgICBzdHJlYW0ub24oJ2RhdGEnLCAoa2V5cykgPT4ge1xuICAgICAgICAgICAgaWYgKGtleXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcGlwZWxpbmUgPSBjbGllbnQucGlwZWxpbmUoKTtcbiAgICAgICAgICAgICAgICBrZXlzLmZvckVhY2goa2V5ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcGlwZWxpbmUuZGVsKGtleSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcGlwZWxpbmUuZXhlYygpLmNhdGNoKGVycm9yID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHN0cmVhbS5vbignZW5kJywgKCkgPT4gcmVzb2x2ZSgpKTtcbiAgICAgICAgc3RyZWFtLm9uKCdlcnJvcicsIGVycm9yID0+IHJlamVjdChlcnJvcikpO1xuICAgIH0pO1xuICAgIGF3YWl0IHJlbW92aW5nO1xuICAgIGF3YWl0IGNsaWVudC5xdWl0KCk7XG59XG5mdW5jdGlvbiBnZXRQYXJlbnRLZXkob3B0cykge1xuICAgIGlmIChvcHRzKSB7XG4gICAgICAgIHJldHVybiBgJHtvcHRzLnF1ZXVlfToke29wdHMuaWR9YDtcbiAgICB9XG59XG5leHBvcnRzLmNsaWVudENvbW1hbmRNZXNzYWdlUmVnID0gL0VSUiB1bmtub3duIGNvbW1hbmQgWydgXVxccypjbGllbnRcXHMqWydgXS87XG5leHBvcnRzLkRFTEFZX1RJTUVfNSA9IDUwMDA7XG5leHBvcnRzLkRFTEFZX1RJTUVfMSA9IDEwMDtcbmZ1bmN0aW9uIGlzTm90Q29ubmVjdGlvbkVycm9yKGVycm9yKSB7XG4gICAgY29uc3QgeyBjb2RlLCBtZXNzYWdlOiBlcnJvck1lc3NhZ2UgfSA9IGVycm9yO1xuICAgIHJldHVybiAoZXJyb3JNZXNzYWdlICE9PSB1dGlsc18xLkNPTk5FQ1RJT05fQ0xPU0VEX0VSUk9SX01TRyAmJlxuICAgICAgICAhZXJyb3JNZXNzYWdlLmluY2x1ZGVzKCdFQ09OTlJFRlVTRUQnKSAmJlxuICAgICAgICBjb2RlICE9PSAnRUNPTk5SRUZVU0VEJyk7XG59XG5jb25zdCBhc3luY1NlbmQgPSAocHJvYywgbXNnKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgaWYgKHR5cGVvZiBwcm9jLnNlbmQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHByb2Muc2VuZChtc2csIChlcnIpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChlcnIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHR5cGVvZiBwcm9jLnBvc3RNZXNzYWdlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICByZXNvbHZlKHByb2MucG9zdE1lc3NhZ2UobXNnKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgIH1cbiAgICB9KTtcbn07XG5leHBvcnRzLmFzeW5jU2VuZCA9IGFzeW5jU2VuZDtcbmNvbnN0IGNoaWxkU2VuZCA9IChwcm9jLCBtc2cpID0+ICgwLCBleHBvcnRzLmFzeW5jU2VuZCkocHJvYywgbXNnKTtcbmV4cG9ydHMuY2hpbGRTZW5kID0gY2hpbGRTZW5kO1xuY29uc3QgaXNSZWRpc1ZlcnNpb25Mb3dlclRoYW4gPSAoY3VycmVudFZlcnNpb24sIG1pbmltdW1WZXJzaW9uKSA9PiB7XG4gICAgY29uc3QgdmVyc2lvbiA9IHNlbXZlci52YWxpZChzZW12ZXIuY29lcmNlKGN1cnJlbnRWZXJzaW9uKSk7XG4gICAgcmV0dXJuIHNlbXZlci5sdCh2ZXJzaW9uLCBtaW5pbXVtVmVyc2lvbik7XG59O1xuZXhwb3J0cy5pc1JlZGlzVmVyc2lvbkxvd2VyVGhhbiA9IGlzUmVkaXNWZXJzaW9uTG93ZXJUaGFuO1xuY29uc3QgcGFyc2VPYmplY3RWYWx1ZXMgPSAob2JqKSA9PiB7XG4gICAgY29uc3QgYWNjdW11bGF0b3IgPSB7fTtcbiAgICBmb3IgKGNvbnN0IHZhbHVlIG9mIE9iamVjdC5lbnRyaWVzKG9iaikpIHtcbiAgICAgICAgYWNjdW11bGF0b3JbdmFsdWVbMF1dID0gSlNPTi5wYXJzZSh2YWx1ZVsxXSk7XG4gICAgfVxuICAgIHJldHVybiBhY2N1bXVsYXRvcjtcbn07XG5leHBvcnRzLnBhcnNlT2JqZWN0VmFsdWVzID0gcGFyc2VPYmplY3RWYWx1ZXM7XG5jb25zdCBnZXRDaXJjdWxhclJlcGxhY2VyID0gKHJvb3RSZWZlcmVuY2UpID0+IHtcbiAgICBjb25zdCByZWZlcmVuY2VzID0gbmV3IFdlYWtTZXQoKTtcbiAgICByZWZlcmVuY2VzLmFkZChyb290UmVmZXJlbmNlKTtcbiAgICByZXR1cm4gKF8sIHZhbHVlKSA9PiB7XG4gICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICE9PSBudWxsKSB7XG4gICAgICAgICAgICBpZiAocmVmZXJlbmNlcy5oYXModmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICdbQ2lyY3VsYXJdJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlZmVyZW5jZXMuYWRkKHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgfTtcbn07XG5jb25zdCBlcnJvclRvSlNPTiA9ICh2YWx1ZSkgPT4ge1xuICAgIGNvbnN0IGVycm9yID0ge307XG4gICAgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXModmFsdWUpLmZvckVhY2goZnVuY3Rpb24gKHByb3BOYW1lKSB7XG4gICAgICAgIGVycm9yW3Byb3BOYW1lXSA9IHZhbHVlW3Byb3BOYW1lXTtcbiAgICB9KTtcbiAgICByZXR1cm4gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShlcnJvciwgZ2V0Q2lyY3VsYXJSZXBsYWNlcih2YWx1ZSkpKTtcbn07XG5leHBvcnRzLmVycm9yVG9KU09OID0gZXJyb3JUb0pTT047XG5jb25zdCBJTkZJTklUWSA9IDEgLyAwO1xuY29uc3QgdG9TdHJpbmcgPSAodmFsdWUpID0+IHtcbiAgICBpZiAodmFsdWUgPT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gJyc7XG4gICAgfVxuICAgIC8vIEV4aXQgZWFybHkgZm9yIHN0cmluZ3MgdG8gYXZvaWQgYSBwZXJmb3JtYW5jZSBoaXQgaW4gc29tZSBlbnZpcm9ubWVudHMuXG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgLy8gUmVjdXJzaXZlbHkgY29udmVydCB2YWx1ZXMgKHN1c2NlcHRpYmxlIHRvIGNhbGwgc3RhY2sgbGltaXRzKS5cbiAgICAgICAgcmV0dXJuIGAke3ZhbHVlLm1hcChvdGhlciA9PiAob3RoZXIgPT0gbnVsbCA/IG90aGVyIDogKDAsIGV4cG9ydHMudG9TdHJpbmcpKG90aGVyKSkpfWA7XG4gICAgfVxuICAgIGlmICh0eXBlb2YgdmFsdWUgPT0gJ3N5bWJvbCcgfHxcbiAgICAgICAgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbHVlKSA9PSAnW29iamVjdCBTeW1ib2xdJykge1xuICAgICAgICByZXR1cm4gdmFsdWUudG9TdHJpbmcoKTtcbiAgICB9XG4gICAgY29uc3QgcmVzdWx0ID0gYCR7dmFsdWV9YDtcbiAgICByZXR1cm4gcmVzdWx0ID09PSAnMCcgJiYgMSAvIHZhbHVlID09PSAtSU5GSU5JVFkgPyAnLTAnIDogcmVzdWx0O1xufTtcbmV4cG9ydHMudG9TdHJpbmcgPSB0b1N0cmluZztcbmV4cG9ydHMuUVVFVUVfRVZFTlRfU1VGRklYID0gJzpxZSc7XG5mdW5jdGlvbiByZW1vdmVVbmRlZmluZWRGaWVsZHMob2JqKSB7XG4gICAgY29uc3QgbmV3T2JqID0ge307XG4gICAgZm9yIChjb25zdCBrZXkgaW4gb2JqKSB7XG4gICAgICAgIGlmIChvYmpba2V5XSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBuZXdPYmpba2V5XSA9IG9ialtrZXldO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBuZXdPYmo7XG59XG4vKipcbiAqIFdyYXBzIHRoZSBjb2RlIHdpdGggdGVsZW1ldHJ5IGFuZCBwcm92aWRlcyBhIHNwYW4gZm9yIGNvbmZpZ3VyYXRpb24uXG4gKlxuICogQHBhcmFtIHRlbGVtZXRyeSAtIHRlbGVtZXRyeSBjb25maWd1cmF0aW9uLiBJZiB1bmRlZmluZWQsIHRoZSBjYWxsYmFjayB3aWxsIGJlIGV4ZWN1dGVkIHdpdGhvdXQgdGVsZW1ldHJ5LlxuICogQHBhcmFtIHNwYW5LaW5kIC0ga2luZCBvZiB0aGUgc3BhbjogUHJvZHVjZXIsIENvbnN1bWVyLCBJbnRlcm5hbFxuICogQHBhcmFtIHF1ZXVlTmFtZSAtIHF1ZXVlIG5hbWVcbiAqIEBwYXJhbSBvcGVyYXRpb24gLSBvcGVyYXRpb24gbmFtZSAoc3VjaCBhcyBhZGQsIHByb2Nlc3MsIGV0YylcbiAqIEBwYXJhbSBkZXN0aW5hdGlvbiAtIGRlc3RpbmF0aW9uIG5hbWUgKG5vcm1hbGx5IHRoZSBxdWV1ZSBuYW1lKVxuICogQHBhcmFtIGNhbGxiYWNrIC0gY29kZSB0byB3cmFwIHdpdGggdGVsZW1ldHJ5XG4gKiBAcGFyYW0gc3JjUHJvcGFnYXRpb25NZWRhdGFkYSAtXG4gKiBAcmV0dXJuc1xuICovXG5hc3luYyBmdW5jdGlvbiB0cmFjZSh0ZWxlbWV0cnksIHNwYW5LaW5kLCBxdWV1ZU5hbWUsIG9wZXJhdGlvbiwgZGVzdGluYXRpb24sIGNhbGxiYWNrLCBzcmNQcm9wYWdhdGlvbk1ldGFkYXRhKSB7XG4gICAgaWYgKCF0ZWxlbWV0cnkpIHtcbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrKCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBjb25zdCB7IHRyYWNlciwgY29udGV4dE1hbmFnZXIgfSA9IHRlbGVtZXRyeTtcbiAgICAgICAgY29uc3QgY3VycmVudENvbnRleHQgPSBjb250ZXh0TWFuYWdlci5hY3RpdmUoKTtcbiAgICAgICAgbGV0IHBhcmVudENvbnRleHQ7XG4gICAgICAgIGlmIChzcmNQcm9wYWdhdGlvbk1ldGFkYXRhKSB7XG4gICAgICAgICAgICBwYXJlbnRDb250ZXh0ID0gY29udGV4dE1hbmFnZXIuZnJvbU1ldGFkYXRhKGN1cnJlbnRDb250ZXh0LCBzcmNQcm9wYWdhdGlvbk1ldGFkYXRhKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzcGFuTmFtZSA9IGRlc3RpbmF0aW9uID8gYCR7b3BlcmF0aW9ufSAke2Rlc3RpbmF0aW9ufWAgOiBvcGVyYXRpb247XG4gICAgICAgIGNvbnN0IHNwYW4gPSB0cmFjZXIuc3RhcnRTcGFuKHNwYW5OYW1lLCB7XG4gICAgICAgICAgICBraW5kOiBzcGFuS2luZCxcbiAgICAgICAgfSwgcGFyZW50Q29udGV4dCk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBzcGFuLnNldEF0dHJpYnV0ZXMoe1xuICAgICAgICAgICAgICAgIFtlbnVtc18xLlRlbGVtZXRyeUF0dHJpYnV0ZXMuUXVldWVOYW1lXTogcXVldWVOYW1lLFxuICAgICAgICAgICAgICAgIFtlbnVtc18xLlRlbGVtZXRyeUF0dHJpYnV0ZXMuUXVldWVPcGVyYXRpb25dOiBvcGVyYXRpb24sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGxldCBtZXNzYWdlQ29udGV4dDtcbiAgICAgICAgICAgIGxldCBkc3RQcm9wYWdhdGlvbk1ldGFkYXRhO1xuICAgICAgICAgICAgaWYgKHNwYW5LaW5kID09PSBlbnVtc18xLlNwYW5LaW5kLkNPTlNVTUVSICYmIHBhcmVudENvbnRleHQpIHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlQ29udGV4dCA9IHNwYW4uc2V0U3Bhbk9uQ29udGV4dChwYXJlbnRDb250ZXh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIG1lc3NhZ2VDb250ZXh0ID0gc3Bhbi5zZXRTcGFuT25Db250ZXh0KGN1cnJlbnRDb250ZXh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjYWxsYmFjay5sZW5ndGggPT0gMikge1xuICAgICAgICAgICAgICAgIGRzdFByb3BhZ2F0aW9uTWV0YWRhdGEgPSBjb250ZXh0TWFuYWdlci5nZXRNZXRhZGF0YShtZXNzYWdlQ29udGV4dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgY29udGV4dE1hbmFnZXIud2l0aChtZXNzYWdlQ29udGV4dCwgKCkgPT4gY2FsbGJhY2soc3BhbiwgZHN0UHJvcGFnYXRpb25NZXRhZGF0YSkpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIHNwYW4ucmVjb3JkRXhjZXB0aW9uKGVycik7XG4gICAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgIH1cbiAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICBzcGFuLmVuZCgpO1xuICAgICAgICB9XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiUVVFVUVfRVZFTlRfU1VGRklYIiwidG9TdHJpbmciLCJlcnJvclRvSlNPTiIsInBhcnNlT2JqZWN0VmFsdWVzIiwiaXNSZWRpc1ZlcnNpb25Mb3dlclRoYW4iLCJjaGlsZFNlbmQiLCJhc3luY1NlbmQiLCJERUxBWV9USU1FXzEiLCJERUxBWV9USU1FXzUiLCJjbGllbnRDb21tYW5kTWVzc2FnZVJlZyIsIm9wdHNFbmNvZGVNYXAiLCJvcHRzRGVjb2RlTWFwIiwiZXJyb3JPYmplY3QiLCJ0cnlDYXRjaCIsImxlbmd0aEluVXRmOEJ5dGVzIiwiaXNFbXB0eSIsImFycmF5Mm9iaiIsIm9iamVjdFRvRmxhdEFycmF5IiwiZGVsYXkiLCJpbmNyZWFzZU1heExpc3RlbmVycyIsImludmVydE9iamVjdCIsImlzUmVkaXNJbnN0YW5jZSIsImlzUmVkaXNDbHVzdGVyIiwiZGVjcmVhc2VNYXhMaXN0ZW5lcnMiLCJyZW1vdmVBbGxRdWV1ZURhdGEiLCJnZXRQYXJlbnRLZXkiLCJpc05vdENvbm5lY3Rpb25FcnJvciIsInJlbW92ZVVuZGVmaW5lZEZpZWxkcyIsInRyYWNlIiwiaW9yZWRpc18xIiwicmVxdWlyZSIsInV0aWxzXzEiLCJzZW12ZXIiLCJlbnVtc18xIiwiZm4iLCJjdHgiLCJhcmdzIiwiYXBwbHkiLCJlIiwic3RyIiwiQnVmZmVyIiwiYnl0ZUxlbmd0aCIsIm9iaiIsImtleSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsImFyciIsImkiLCJsZW5ndGgiLCJ1bmRlZmluZWQiLCJtcyIsImFib3J0Q29udHJvbGxlciIsIlByb21pc2UiLCJyZXNvbHZlIiwidGltZW91dCIsImNhbGxiYWNrIiwic2lnbmFsIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImNsZWFyVGltZW91dCIsInNldFRpbWVvdXQiLCJhZGRFdmVudExpc3RlbmVyIiwiZW1pdHRlciIsImNvdW50IiwibWF4TGlzdGVuZXJzIiwiZ2V0TWF4TGlzdGVuZXJzIiwic2V0TWF4TGlzdGVuZXJzIiwiZW50cmllcyIsInJlZHVjZSIsInJlc3VsdCIsImRlIiwiZnBvZiIsImNwb2YiLCJpZG9mIiwia2wiLCJyZG9mIiwiYXNzaWduIiwiZGVib3VuY2UiLCJyZWRpc0FwaSIsImV2ZXJ5IiwibmFtZSIsImlzQ2x1c3RlciIsImNsaWVudCIsInF1ZXVlTmFtZSIsInByZWZpeCIsInByb2Nlc3MiLCJlbnYiLCJCVUxMTVFfVEVTVF9QUkVGSVgiLCJDbHVzdGVyIiwicGF0dGVybiIsInJlbW92aW5nIiwicmVqZWN0Iiwic3RyZWFtIiwic2NhblN0cmVhbSIsIm1hdGNoIiwib24iLCJrZXlzIiwicGlwZWxpbmUiLCJmb3JFYWNoIiwiZGVsIiwiZXhlYyIsImNhdGNoIiwiZXJyb3IiLCJxdWl0Iiwib3B0cyIsInF1ZXVlIiwiaWQiLCJjb2RlIiwibWVzc2FnZSIsImVycm9yTWVzc2FnZSIsIkNPTk5FQ1RJT05fQ0xPU0VEX0VSUk9SX01TRyIsImluY2x1ZGVzIiwicHJvYyIsIm1zZyIsInNlbmQiLCJlcnIiLCJwb3N0TWVzc2FnZSIsImN1cnJlbnRWZXJzaW9uIiwibWluaW11bVZlcnNpb24iLCJ2ZXJzaW9uIiwidmFsaWQiLCJjb2VyY2UiLCJsdCIsImFjY3VtdWxhdG9yIiwiSlNPTiIsInBhcnNlIiwiZ2V0Q2lyY3VsYXJSZXBsYWNlciIsInJvb3RSZWZlcmVuY2UiLCJyZWZlcmVuY2VzIiwiV2Vha1NldCIsImFkZCIsIl8iLCJoYXMiLCJnZXRPd25Qcm9wZXJ0eU5hbWVzIiwicHJvcE5hbWUiLCJzdHJpbmdpZnkiLCJJTkZJTklUWSIsIkFycmF5IiwiaXNBcnJheSIsIm1hcCIsIm90aGVyIiwibmV3T2JqIiwidGVsZW1ldHJ5Iiwic3BhbktpbmQiLCJvcGVyYXRpb24iLCJkZXN0aW5hdGlvbiIsInNyY1Byb3BhZ2F0aW9uTWV0YWRhdGEiLCJ0cmFjZXIiLCJjb250ZXh0TWFuYWdlciIsImN1cnJlbnRDb250ZXh0IiwiYWN0aXZlIiwicGFyZW50Q29udGV4dCIsImZyb21NZXRhZGF0YSIsInNwYW5OYW1lIiwic3BhbiIsInN0YXJ0U3BhbiIsImtpbmQiLCJzZXRBdHRyaWJ1dGVzIiwiVGVsZW1ldHJ5QXR0cmlidXRlcyIsIlF1ZXVlTmFtZSIsIlF1ZXVlT3BlcmF0aW9uIiwibWVzc2FnZUNvbnRleHQiLCJkc3RQcm9wYWdhdGlvbk1ldGFkYXRhIiwiU3BhbktpbmQiLCJDT05TVU1FUiIsInNldFNwYW5PbkNvbnRleHQiLCJnZXRNZXRhZGF0YSIsIndpdGgiLCJyZWNvcmRFeGNlcHRpb24iLCJlbmQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/utils/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/bullmq/dist/cjs/version.js":
/*!*************************************************!*\
  !*** ./node_modules/bullmq/dist/cjs/version.js ***!
  \*************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.version = void 0;\nexports.version = \"5.63.2\"; //# sourceMappingURL=version.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL3ZlcnNpb24uanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELGVBQWUsR0FBRyxLQUFLO0FBQ3ZCQSxlQUFlLEdBQUcsVUFDbEIsbUNBQW1DIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb25seWZhbnMtcGxhdGZvcm0vLi9ub2RlX21vZHVsZXMvYnVsbG1xL2Rpc3QvY2pzL3ZlcnNpb24uanM/Y2NiZiJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMudmVyc2lvbiA9IHZvaWQgMDtcbmV4cG9ydHMudmVyc2lvbiA9ICc1LjYzLjInO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dmVyc2lvbi5qcy5tYXAiXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJ2ZXJzaW9uIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/bullmq/dist/cjs/version.js\n");

/***/ })

};
;