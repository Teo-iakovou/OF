(()=>{var e={};e.id=8366,e.ids=[8366],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},49631:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>u,originalPathname:()=>x,pages:()=>c,routeModule:()=>m,tree:()=>d});var a=s(67096),l=s(16132),r=s(37284),n=s.n(r),i=s(32564),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);s.d(t,o);let d=["",{children:["dashboard",{children:["upload",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,36280)),"/Users/theodorosiakovou/Projects/ai-platform/src/app/dashboard/upload/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,92551)),"/Users/theodorosiakovou/Projects/ai-platform/src/app/dashboard/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,79113)),"/Users/theodorosiakovou/Projects/ai-platform/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,9291,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/theodorosiakovou/Projects/ai-platform/src/app/dashboard/upload/page.tsx"],x="/dashboard/upload/page",u={require:s,loadChunk:()=>Promise.resolve()},m=new a.AppPageRouteModule({definition:{kind:l.x.APP_PAGE,page:"/dashboard/upload/page",pathname:"/dashboard/upload",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},46082:(e,t,s)=>{Promise.resolve().then(s.bind(s,38997))},12091:(e,t,s)=>{"use strict";s.d(t,{O:()=>Skeleton});var a=s(30784);function Skeleton({className:e=""}){return a.jsx("div",{className:["animate-pulse rounded-md bg-gray-200/20 dark:bg-gray-700/40",e].join(" "),"aria-hidden":!0})}s(9885)},38997:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>UploadPage});var a=s(30784),l=s(9885),r=s(57114),n=s(52451),i=s.n(n),o=s(24206),d=s(97151),c=s(17502),x=s(74070),u=s(80443),m=s(27157),h=s(5705),p=s(56206);let g=["image/png","image/jpeg","image/webp","image/avif"];function FileUpload({onUploadSuccess:e}){var t;let[s,r]=(0,l.useState)("idle"),[n,b]=(0,l.useState)(null),[f,j]=(0,l.useState)(null),[w,v]=(0,l.useState)(null),[N,y]=(0,l.useState)(!0),[k,P]=(0,l.useState)(!1),[U,S]=(0,l.useState)("EN"),[_,C]=(0,l.useState)(!1),[E,F]=(0,l.useState)(0),R=(0,l.useRef)(null),$=(0,l.useRef)(null);function handleFiles(e){let t=e?.[0]||null;if(!t)return;let s=g.includes(t.type)?t.size>26214400?"File is too large. Max 25 MB.":null:"Unsupported file type. Use PNG, JPG, WEBP, or AVIF.";if(s){v(s),r("error");return}v(null),b(t),r("ready"),j(e=>(e&&URL.revokeObjectURL(e),URL.createObjectURL(t)))}function onSelectClick(){R.current?.click()}async function onSubmit(){if(!n||"uploading"===s)return;r("uploading"),F(0),v(null);let t=new AbortController;$.current=t;try{let{insights:s,duplicate:a}=await (0,o.mF)({file:n,captions:N,signal:t.signal,onProgress:e=>F(e)});if(e(s,{duplicate:a}),k)try{let e=s?.promotion?.recommendedPlatforms?.[0],t=e?.caption||"";if(t.trim()){let e=await (0,o.TD)(`[${U}] ${t}`),s=new Audio(e);s.play().catch(()=>{})}}catch{}r("success")}catch(e){if(t.signal.aborted)v("Upload cancelled.");else{let t=e instanceof Error?e.message:"string"==typeof e?e:"Upload failed. Please try again.";v(t)}r("error")}finally{$.current=null}}return(0,l.useEffect)(()=>()=>{f&&URL.revokeObjectURL(f),$.current?.abort()},[f]),a.jsx("div",{className:"w-full",children:(0,a.jsxs)("div",{className:"rounded-2xl bg-[#0B1222]/80 ring-1 ring-white/10 shadow-xl p-4 sm:p-6 backdrop-blur",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 mb-4",children:[(0,a.jsxs)("div",{className:"min-w-0",children:[a.jsx("h3",{className:"text-lg sm:text-2xl font-bold tracking-tight text-white",children:"Upload an image"}),a.jsx("p",{className:"text-xs sm:text-sm text-gray-300/80 truncate",children:"We’ll analyze it and suggest captions, hashtags & best posting times."})]}),(0,a.jsxs)("div",{className:"flex items-center flex-wrap gap-2 sm:gap-4 w-full sm:w-auto",children:[a.jsx(Switch,{label:"Captions",checked:N,onChange:y}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(Switch,{label:"Auto-dub",checked:k,onChange:P,icon:a.jsx(d.Z,{className:"w-3.5 h-3.5"})}),(0,a.jsxs)("div",{className:"relative",children:[a.jsx("div",{className:"pointer-events-none absolute left-2 top-1/2 -translate-y-1/2 text-gray-400",children:a.jsx(c.Z,{className:"w-4 h-4"})}),(0,a.jsxs)("select",{value:U,onChange:e=>S(e.target.value),disabled:!k,className:"pl-8 pr-3 py-1.5 rounded-md bg-white/5 text-white border border-white/10 text-xs disabled:opacity-40 disabled:cursor-not-allowed",children:[a.jsx("option",{value:"EN",children:"EN"}),a.jsx("option",{value:"ES",children:"ES"}),a.jsx("option",{value:"FR",children:"FR"}),a.jsx("option",{value:"DE",children:"DE"})]})]})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:[(0,a.jsxs)("div",{onDragOver:e=>{e.preventDefault(),C(!0)},onDragLeave:()=>C(!1),onDrop:e=>{e.preventDefault(),C(!1),handleFiles(e.dataTransfer.files)},onClick:()=>onSelectClick(),role:"button",tabIndex:0,onKeyDown:e=>"Enter"===e.key?onSelectClick():null,className:`relative rounded-xl border-2 border-dashed p-4 sm:p-8 text-center cursor-pointer transition
              ${_?"border-indigo-400 bg-indigo-400/10":"border-white/15 bg-white/5 hover:border-white/25"}`,children:[a.jsx("input",{ref:R,type:"file",accept:g.join(","),hidden:!0,onChange:e=>handleFiles(e.target.files)}),(0,a.jsxs)("div",{className:"flex flex-col items-center gap-2 text-gray-200",children:[a.jsx("div",{className:`grid place-items-center rounded-full w-12 h-12
                ${_?"bg-indigo-500/20":"bg-white/5"}`,children:a.jsx(x.Z,{className:"w-6 h-6"})}),(0,a.jsxs)("div",{className:"text-sm sm:text-base",children:[a.jsx("span",{className:"font-semibold text-white",children:"Click to choose"})," ","or drag & drop your image"]}),(0,a.jsxs)("div",{className:"text-xs text-gray-400",children:["PNG, JPG, WEBP, AVIF — up to ",25,"MB"]})]}),_&&a.jsx("div",{className:"pointer-events-none absolute inset-0 rounded-xl ring-2 ring-indigo-400/60"})]}),a.jsx("div",{className:"rounded-xl bg-white/5 border border-white/10 p-4 sm:p-5",children:n?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[f?a.jsx(i(),{src:f,alt:"Preview",width:120,height:120,className:"w-28 h-28 rounded-lg object-cover border border-white/10 shadow"}):null,(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx("div",{className:"text-white text-sm font-semibold truncate",children:n.name}),(0,a.jsxs)("div",{className:"text-xs text-gray-400",children:[n.type||"image"," • ",(t=n.size)<1024?`${t} B`:t<1048576?`${(t/1024).toFixed(1)} KB`:`${(t/1048576).toFixed(1)} MB`]}),"uploading"===s&&a.jsx("div",{className:"mt-3",children:a.jsx(Progress,{pct:E})}),"success"===s&&(0,a.jsxs)("div",{className:"mt-3 inline-flex items-center gap-1 text-emerald-400 text-xs",children:[a.jsx(m.Z,{className:"w-4 h-4"})," Uploaded & analyzed"]})]})]}),w&&a.jsx("div",{className:"mt-3 text-xs text-rose-300 bg-rose-900/20 border border-rose-700/40 rounded-md px-3 py-2",children:w}),(0,a.jsxs)("div",{className:"mt-4 flex flex-wrap items-center gap-3",children:[a.jsx("button",{onClick:onSubmit,disabled:!n||"uploading"===s,className:`inline-flex items-center gap-2 rounded-lg px-4 py-2 text-sm font-semibold text-white transition
                      ${n&&"uploading"!==s?"bg-indigo-600 hover:bg-indigo-500 shadow":"bg-white/10 cursor-not-allowed"}`,children:"uploading"===s?(0,a.jsxs)(a.Fragment,{children:[a.jsx(h.Z,{className:"w-4 h-4 animate-spin"}),"Uploading…"]}):a.jsx(a.Fragment,{children:"Analyze with AI"})}),"uploading"===s?(0,a.jsxs)("button",{onClick:function(){$.current?.abort()},className:"inline-flex items-center gap-2 rounded-lg px-3 py-2 text-sm text-white/90 bg-white/10 hover:bg-white/15 border border-white/10",children:[a.jsx(p.Z,{className:"w-4 h-4"}),"Cancel"]}):(0,a.jsxs)("button",{onClick:function(){r("idle"),v(null),b(null),F(0),f&&URL.revokeObjectURL(f),j(null),R.current&&(R.current.value="")},className:"inline-flex items-center gap-2 rounded-lg px-3 py-2 text-sm text-white/90 bg-white/10 hover:bg-white/15 border border-white/10",children:[a.jsx(p.Z,{className:"w-4 h-4"}),"Reset"]})]})]}):a.jsx("div",{className:"h-full min-h-[200px] grid place-items-center text-gray-400",children:(0,a.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[a.jsx(u.Z,{className:"w-8 h-8 opacity-60"}),a.jsx("div",{className:"text-sm",children:"No file selected yet"})]})})})]})]})})}function Progress({pct:e}){let t=Math.max(0,Math.min(100,Math.round(e)));return(0,a.jsxs)("div",{className:"w-full",children:[a.jsx("div",{className:"h-2 rounded-full bg-white/10 overflow-hidden",children:a.jsx("div",{className:"h-full bg-gradient-to-r from-indigo-400 to-indigo-600",style:{width:`${t}%`}})}),(0,a.jsxs)("div",{className:"mt-1 text-[10px] text-gray-400",children:[t,"%"]})]})}function Switch({label:e,checked:t,onChange:s,icon:l}){return(0,a.jsxs)("button",{type:"button",role:"switch","aria-checked":t,onClick:()=>s(!t),className:`inline-flex items-center gap-2 text-xs font-medium rounded-full px-2 py-1
        border transition ${t?"bg-white/10 text-white border-white/20":"bg-transparent text-gray-300 border-white/10 hover:bg-white/5"}`,title:e,children:[a.jsx("span",{className:`inline-flex h-4 w-7 rounded-full p-0.5 transition
          ${t?"bg-indigo-600":"bg-white/15"}`,children:a.jsx("span",{className:`h-3 w-3 rounded-full bg-white transition-transform
          ${t?"translate-x-3":""}`})}),l,a.jsx("span",{children:e})]})}var b=s(40617),f=s(48287),j=s(11440),w=s.n(j),v=s(12091);function UploadPage(){let[e,t]=(0,l.useState)(null),[s,n]=(0,l.useState)(null),[i,d]=(0,l.useState)(null),[c,x]=(0,l.useState)(!0),u=(0,r.useSearchParams)(),m=(0,r.useRouter)();return(0,l.useEffect)(()=>{let fetchUserInfo=async()=>{try{x(!0);let e=await (0,o.Nn)();n(e?.package??null),d(e?.uploadsRemaining??null)}catch(e){console.error("Failed to fetch package info:",e)}finally{x(!1)}};fetchUserInfo()},[u,m]),(0,a.jsxs)("div",{className:"min-h-screen flex flex-col text-white",children:[a.jsx("header",{className:"shrink-0 pt-12 md:pt-20 px-6 md:px-12 lg:px-20 max-w-6xl mx-auto w-full",children:a.jsx("div",{className:"flex items-center justify-center md:justify-between",children:a.jsx("h1",{className:"text-3xl md:text-4xl font-semibold tracking-tight text-center md:text-left",children:"AI Content Analyzer"})})}),a.jsx("main",{children:(0,a.jsxs)("div",{className:"px-6 md:px-12 lg:px-20 max-w-6xl mx-auto pb-8",children:[c?(0,a.jsxs)(f.Z,{as:"section",className:"mt-8 mx-auto w-full max-w-3xl bg-gray-800 rounded-lg p-6 sm:p-8 shadow-lg",children:[a.jsx(v.O,{className:"h-7 w-64 mb-4 mx-auto"}),a.jsx(v.O,{className:"h-4 w-40 mb-6 mx-auto"}),(0,a.jsxs)("div",{className:"space-y-3",children:[a.jsx(v.O,{className:"h-10 w-full"}),a.jsx(v.O,{className:"h-40 w-full"}),a.jsx(v.O,{className:"h-10 w-32 mx-auto"})]})]}):s?(i??0)<=0?a.jsx("div",{className:"mt-10 text-center text-yellow-400 text-xl",children:"You've used all your uploads. Upgrade your plan to continue."}):(0,a.jsxs)(f.Z,{as:"section",className:"mt-8 mx-auto w-full max-w-3xl bg-gray-800 rounded-lg p-6 sm:p-8 shadow-lg",children:[a.jsx("h2",{className:"text-2xl md:text-3xl font-bold mb-4 text-center",children:"Upload Your Content"}),(0,a.jsxs)("p",{className:"text-center text-gray-400 mb-6",children:["Uploads remaining: ",a.jsx("span",{className:"text-pink-400",children:i})]}),a.jsx(FileUpload,{onUploadSuccess:(e,s)=>{t(e),d(e=>null===e?e:s?.duplicate?e:Math.max(e-1,0))}})]}):a.jsx("div",{className:"mt-10 text-center text-red-400 text-xl",children:"You don't have a package yet. Please purchase a plan to start uploading."}),e&&(0,a.jsxs)(f.Z,{as:"section",className:"mt-8 mx-auto w-full max-w-4xl bg-gray-800 rounded-lg p-6 sm:p-8 shadow-xl",children:[a.jsx(b.Z,{result:e}),a.jsx("div",{className:"text-center mt-4",children:a.jsx(w(),{href:"/dashboard/history",className:"inline-block text-sm text-blue-400 underline hover:text-blue-300",children:"View this in Upload History →"})})]})]})})]})}},36280:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>n,__esModule:()=>r,default:()=>o});var a=s(95153);let l=(0,a.createProxy)(String.raw`/Users/theodorosiakovou/Projects/ai-platform/src/app/dashboard/upload/page.tsx`),{__esModule:r,$$typeof:n}=l,i=l.default,o=i}};var t=require("../../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),s=t.X(0,[2006,580,2767,1217,5114,3945,5892,617],()=>__webpack_exec__(49631));module.exports=s})();