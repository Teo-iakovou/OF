"use strict";(()=>{var e={};e.id=4343,e.ids=[4343],e.modules={30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},39491:e=>{e.exports=require("assert")},14300:e=>{e.exports=require("buffer")},6113:e=>{e.exports=require("crypto")},9523:e=>{e.exports=require("dns")},82361:e=>{e.exports=require("events")},57147:e=>{e.exports=require("fs")},41808:e=>{e.exports=require("net")},22037:e=>{e.exports=require("os")},71017:e=>{e.exports=require("path")},12781:e=>{e.exports=require("stream")},71576:e=>{e.exports=require("string_decoder")},24404:e=>{e.exports=require("tls")},76224:e=>{e.exports=require("tty")},57310:e=>{e.exports=require("url")},73837:e=>{e.exports=require("util")},10382:(e,r,t)=>{t.r(r),t.d(r,{headerHooks:()=>q,originalPathname:()=>m,requestAsyncStorage:()=>c,routeModule:()=>l,serverHooks:()=>h,staticGenerationAsyncStorage:()=>x,staticGenerationBailout:()=>y});var s={};t.r(s),t.d(s,{GET:()=>GET,dynamic:()=>p,runtime:()=>n}),t(78976);var a=t(10884),o=t(16132),i=t(95798),u=t(41051);let n="nodejs",p="force-dynamic",d=Number(process.env.SADTALKER_HISTORY_LIMIT||50);async function GET(e){try{let r=e.nextUrl.searchParams,t=r.get("userId")||e.headers.get("x-sadtalker-user"),s=t?.trim();if(!s)return i.Z.json({error:"userId query parameter is required"},{status:400});let a=(0,u.getRedis)(),o=`sadtalker:history:${s}`,n=await a.lrange(o,0,d-1),p=n.map(e=>{try{return JSON.parse(e)}catch(e){return console.warn("[sadtalker:history] failed to parse row",e),null}}).filter(e=>!!e);return i.Z.json({items:p})}catch(e){return console.error("[sadtalker:history] error",e),i.Z.json({error:"Failed to load SadTalker history"},{status:500})}}let l=new a.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/sadtalker/history/route",pathname:"/api/sadtalker/history",filename:"route",bundlePath:"app/api/sadtalker/history/route"},resolvedPagePath:"/Users/theodorosiakovou/Projects/ai-platform/src/app/api/sadtalker/history/route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:c,staticGenerationAsyncStorage:x,serverHooks:h,headerHooks:q,staticGenerationBailout:y}=l,m="/api/sadtalker/history/route"}};var r=require("../../../../webpack-runtime.js");r.C(e);var __webpack_exec__=e=>r(r.s=e),t=r.X(0,[2006,550,6277,1051],()=>__webpack_exec__(10382));module.exports=t})();