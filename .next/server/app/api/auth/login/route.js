"use strict";(()=>{var e={};e.id=8873,e.ids=[8873],e.modules={30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},11632:(e,t,o)=>{o.r(t),o.d(t,{headerHooks:()=>y,originalPathname:()=>O,requestAsyncStorage:()=>d,routeModule:()=>h,serverHooks:()=>f,staticGenerationAsyncStorage:()=>g,staticGenerationBailout:()=>k});var a={};o.r(a),o.d(a,{GET:()=>GET,POST:()=>POST,dynamic:()=>u,revalidate:()=>c,runtime:()=>n}),o(78976);var r=o(10884),s=o(16132),i=o(95798);let n="nodejs",u="force-dynamic",c=0,l=process.env.API_URL||process.env.NEXT_PUBLIC_API_URL||"http://localhost:5001",p=process.env.SESSION_COOKIE_NAME||"ai_session";function cookieOptions(){return{httpOnly:!0,secure:!0,sameSite:"lax",path:"/"}}async function POST(e){let t;let o="true"===process.env.AUTH_DEBUG;try{o&&console.log("[auth-bff] POST /api/auth/login start",{ua:e.headers.get("user-agent")||void 0,origin:e.headers.get("origin")||void 0,referer:e.headers.get("referer")||void 0})}catch{}let a=await e.json().catch(()=>({})),r=await fetch(`${l}/api/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),s=await r.text();try{t=s?JSON.parse(s):null}catch{t=s}let n=i.Z.json(t,{status:r.status});r.ok&&t&&"object"==typeof t&&"string"==typeof t.token&&n.cookies.set(p,t.token,cookieOptions());try{o&&console.log("[auth-bff] POST /api/auth/login done",{status:r.status,setCookie:r.ok&&!!(t&&"object"==typeof t&&t.token)})}catch{}return n}async function GET(e){let t;let o="true"===process.env.AUTH_DEBUG,a=e.nextUrl.searchParams.get("email"),r=e.nextUrl.searchParams.get("redirect")||"/";if(!a)return i.Z.json({error:"email is required"},{status:400});try{o&&console.log("[auth-bff] GET /api/auth/login start",{email:a,redirect:r,ua:e.headers.get("user-agent")||void 0})}catch{}let s=await fetch(`${l}/api/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a})}),n=await s.text();try{t=n?JSON.parse(n):null}catch{t=n}if(!s.ok)return i.Z.json(t,{status:s.status});let u=r.startsWith("/")?r:"/",c=i.Z.redirect(new URL(u,e.url));t&&"object"==typeof t&&"string"==typeof t.token&&c.cookies.set(p,t.token,cookieOptions());try{o&&console.log("[auth-bff] GET /api/auth/login done",{status:s.status,to:u})}catch{}return c}let h=new r.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/auth/login/route",pathname:"/api/auth/login",filename:"route",bundlePath:"app/api/auth/login/route"},resolvedPagePath:"/Users/theodorosiakovou/Projects/ai-platform/src/app/api/auth/login/route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:d,staticGenerationAsyncStorage:g,serverHooks:f,headerHooks:y,staticGenerationBailout:k}=h,O="/api/auth/login/route"}};var t=require("../../../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),o=t.X(0,[2006,550],()=>__webpack_exec__(11632));module.exports=o})();