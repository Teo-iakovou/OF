(()=>{var e={};e.id=4665,e.ids=[4665],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},16826:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>s.a,__next_app__:()=>p,originalPathname:()=>d,pages:()=>u,routeModule:()=>g,tree:()=>c});var a=r(67096),o=r(16132),n=r(37284),s=r.n(n),i=r(32564),l={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);r.d(t,l);let c=["",{children:["(auth)",{children:["login",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,99179)),"/Users/theodorosiakovou/Projects/ai-platform/src/app/(auth)/login/page.tsx"]}]},{}]},{"not-found":[()=>Promise.resolve().then(r.t.bind(r,9291,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,79113)),"/Users/theodorosiakovou/Projects/ai-platform/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,9291,23)),"next/dist/client/components/not-found-error"]}],u=["/Users/theodorosiakovou/Projects/ai-platform/src/app/(auth)/login/page.tsx"],d="/(auth)/login/page",p={require:r,loadChunk:()=>Promise.resolve()},g=new a.AppPageRouteModule({definition:{kind:o.x.APP_PAGE,page:"/(auth)/login/page",pathname:"/login",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},67371:(e,t,r)=>{Promise.resolve().then(r.bind(r,74160))},74160:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>LoginPage});var a=r(30784),o=r(9885),n=r(978),s=r(57114),i=r(4790);function LoginPage(){let[e,t]=(0,o.useState)(""),[r,l]=(0,o.useState)(!1),[c,u]=(0,o.useState)(null),d=(0,s.useRouter)(),{user:p,loading:g}=(0,i.a)({required:!1}),[m,h]=(0,o.useState)(!1),x=(0,s.useSearchParams)(),f=x?.get("redirect")||"/dashboard";async function handleSubmit(t){t.preventDefault(),l(!0),u(null);try{let t="true"===process.env.NEXT_PUBLIC_HEADER_AUTH,r="true"===process.env.NEXT_PUBLIC_USE_BFF,a=r?"/api/auth/login":`${n._}/api/auth/login`,o=await fetch(a,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e})});if(!o.ok){let e=await o.text();throw Error(e||"Login failed")}try{let e=await o.clone().json();if(e?.token)try{localStorage.setItem("ai_token",e.token)}catch{}}catch{}try{let e=await (0,n.r)(`${r?"/api/auth/me":n._+"/api/auth/me"}`,{method:"GET",cache:"no-store"});if(e.ok){try{sessionStorage.setItem("justLoggedIn","1")}catch{}d.replace(f);return}}catch{}try{if(t&&localStorage.getItem("ai_token")){try{sessionStorage.setItem("justLoggedIn","1")}catch{}d.replace(f);return}}catch{}window.location.href=`${r?"":n._}/api/auth/login?email=${encodeURIComponent(e)}&redirect=${encodeURIComponent(f)}`}catch(e){u(e?.message||"Login failed")}finally{l(!1)}}return(0,o.useEffect)(()=>{if(!g&&p){h(!0);let e=setTimeout(()=>d.replace(f),1e3);return()=>clearTimeout(e)}},[p,g,d,f]),a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-900 text-white px-4",children:(0,a.jsxs)("form",{onSubmit:handleSubmit,className:"w-full max-w-sm bg-gray-800 border border-gray-700 rounded-2xl p-6 shadow",children:[a.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Sign in"}),m&&(0,a.jsxs)("div",{className:"mb-3 text-sm text-cyan-300 bg-cyan-900/30 border border-cyan-700 rounded p-2",children:["You are already signed in. Redirecting ","/"===f?"home":"to your dashboard","…"]}),a.jsx("label",{className:"block text-sm text-gray-300 mb-1",children:"Email"}),a.jsx("input",{type:"email",value:e,onChange:e=>t(e.target.value),className:"w-full px-3 py-2 rounded bg-gray-900 border border-gray-700 focus:outline-none focus:ring-2 focus:ring-cyan-600 mb-3",placeholder:"you@example.com",required:!0}),c&&a.jsx("div",{className:"text-red-400 text-sm mb-3",children:c}),a.jsx("button",{type:"submit",disabled:r||!e||m,className:"w-full py-2 rounded bg-cyan-600 hover:bg-cyan-700 disabled:opacity-60",children:r?"Signing in…":"Sign in"})]})})}},16132:(e,t)=>{"use strict";var r;Object.defineProperty(t,"x",{enumerable:!0,get:function(){return r}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(r||(r={}))},99179:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>s,__esModule:()=>n,default:()=>l});var a=r(95153);let o=(0,a.createProxy)(String.raw`/Users/theodorosiakovou/Projects/ai-platform/src/app/(auth)/login/page.tsx`),{__esModule:n,$$typeof:s}=o,i=o.default,l=i}};var t=require("../../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),r=t.X(0,[580,3945],()=>__webpack_exec__(16826));module.exports=r})();