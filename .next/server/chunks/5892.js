exports.id=5892,exports.ids=[5892],exports.modules={62009:(e,t,r)=>{Promise.resolve().then(r.bind(r,59480))},59480:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>LayoutClient});var a=r(30784),n=r(9885),s=r(57114),o=r(2955),i=r(11440),l=r.n(i),c=r(97849),d=r(6315),h=r(71600),u=r(50169),x=r(83104),m=r(93680),f=r(62395),p=r(52451),b=r.n(p);let g=[{href:"/dashboard",label:"Overview",icon:c.Z},{href:"/dashboard/upload",label:"Upload Content",icon:d.Z},{href:"/dashboard/history",label:"Upload History",icon:h.Z},{href:"/dashboard/ai-chat",label:"AI Chat",icon:u.Z},{href:"/dashboard/talking-head",label:"Talking Head",icon:x.Z},{href:"/dashboard/account",label:"Account & Billing",icon:m.Z}];function DashboardSidebar({expanded:e,setExpanded:t}){let r=(0,s.usePathname)(),isItemActive=e=>!!e&&("/dashboard"===e?r===e:r?.startsWith(e));return(0,a.jsxs)("nav",{className:`
        bg-[#171d29] rounded-2xl shadow-2xl flex flex-col justify-between items-center
        transition-all duration-200 fixed top-6 left-4
        ${e?"w-64":"w-16"}
        py-4 px-2 z-30
      `,style:{minWidth:e?256:64,maxWidth:e?256:64,height:"calc(100vh - 3rem)"},children:[(0,a.jsxs)("div",{className:"flex flex-col items-center gap-2 pt-2",children:[a.jsx("div",{role:"button",tabIndex:0,className:"flex items-center justify-center w-10 h-10 rounded-xl text-blue-300 hover:text-white transition cursor-pointer select-none",onClick:()=>t(!e),"aria-label":e?"Collapse sidebar":"Expand sidebar",title:e?"Collapse sidebar":"Expand sidebar",onKeyDown:r=>{("Enter"===r.key||" "===r.key)&&t(!e)},children:a.jsx(f.Z,{size:22,className:e?"":"rotate-180 transition-transform duration-300"})}),a.jsx("ul",{className:"flex flex-col items-center gap-2 mt-2",children:g.map(t=>{let r=t.icon,n=isItemActive(t.href),s="flex items-center gap-3 px-3 py-2 rounded-xl cursor-pointer font-medium text-base transition-colors duration-150 w-full",o="text-blue-300 hover:bg-[#232B36]";return(0,a.jsxs)("li",{className:"relative group",children:[t.href?a.jsx(l(),{href:t.href,children:(0,a.jsxs)("span",{className:`${s} ${n?"bg-blue-600 text-white":o}`,children:[a.jsx(r,{size:22}),e&&a.jsx("span",{className:"whitespace-nowrap",children:t.label})]})}):(0,a.jsxs)("span",{className:`${s} ${o}`,children:[a.jsx(r,{size:22}),e&&a.jsx("span",{className:"whitespace-nowrap",children:t.label})]}),!e&&a.jsx("div",{className:"absolute left-full top-1/2 -translate-y-1/2 ml-2 opacity-0 pointer-events-none group-hover:opacity-100 group-hover:pointer-events-auto bg-black text-white px-3 py-1 rounded shadow-lg text-xs font-semibold z-50 transition whitespace-nowrap",children:t.label})]},t.label)})})]}),a.jsx("div",{className:"flex flex-col items-center text-white",children:a.jsx(l(),{href:"/",className:"flex flex-col items-center group transition",children:a.jsx(b(),{src:"/echofy-removebg-preview.png",alt:"Platform Logo",width:56,height:56,className:"rounded-full object-cover border border-gray-700 group-hover:scale-105 transition"})})})]})}let v=(0,n.createContext)(null),y="floatingChat.pos",w="floatingChat.open";function FloatingChatProvider({children:e,email:t}){let[r,s]=(0,n.useState)(!1),[o,i]=(0,n.useState)({x:24,y:24}),[l,c]=(0,n.useState)(null);(0,n.useEffect)(()=>{try{let e=localStorage.getItem(y);if(e){let t=JSON.parse(e);"number"==typeof t?.x&&"number"==typeof t?.y&&i(t)}let t=localStorage.getItem(w);"1"===t&&s(!0)}catch{}},[]);let d=(0,n.useCallback)(e=>{i(e);try{localStorage.setItem(y,JSON.stringify(e))}catch{}},[]),h=(0,n.useCallback)(e=>{e&&c(e),s(!0);try{localStorage.setItem(w,"1")}catch{}},[]),u=(0,n.useCallback)(()=>{s(!1);try{localStorage.setItem(w,"0")}catch{}},[]),x=(0,n.useCallback)(()=>{s(e=>{let t=!e;try{localStorage.setItem(w,t?"1":"0")}catch{}return t})},[]),m=(0,n.useMemo)(()=>({isOpen:r,open:h,close:u,toggle:x,anchor:o,setAnchor:d,contextRef:l,setContextRef:c,email:t}),[r,h,u,x,o,d,l,t]);return a.jsx(v.Provider,{value:m,children:e})}var j=r(88908),C=r(65718),N=r(6200),k=r(56206),E=r(83642),I=r.n(E),S=r(24206);let A=I()(()=>Promise.all([r.e(8816),r.e(1822)]).then(r.bind(r,71822)),{loadableGenerated:{modules:["/Users/theodorosiakovou/Projects/ai-platform/src/app/components/AIchat/FloatingChatWidget.tsx -> @/app/components/AIchat/CoachChat"]},ssr:!1}),P=I()(()=>Promise.all([r.e(4619),r.e(1586)]).then(r.bind(r,94619)),{loadableGenerated:{modules:["/Users/theodorosiakovou/Projects/ai-platform/src/app/components/AIchat/FloatingChatWidget.tsx -> @/app/components/AIchat/AiChatHistorySidebar"]},ssr:!1});function FloatingChatWidget(){let e=function(){let[e,t]=(0,n.useState)(!1);return(0,n.useEffect)(()=>t(!0),[]),e}(),{isOpen:t,open:r,close:s,anchor:o,setAnchor:i}=function(){let e=(0,n.useContext)(v);if(!e)throw Error("useFloatingChat must be used within FloatingChatProvider");return e}(),[l,c]=(0,n.useState)(),[d,h]=(0,n.useState)(0),[x,m]=(0,n.useState)(!1),f=(0,n.useRef)(null),p=(0,n.useRef)(null),b=(0,n.useRef)(null),g=(0,n.useRef)(o);(0,n.useEffect)(()=>{g.current=o},[o]),(0,n.useEffect)(()=>{},[]);let y=(0,n.useCallback)((e,t,r,a)=>{let n=Math.max(12,window.innerWidth-r-12),s=Math.max(12,window.innerHeight-a-12);return{x:Math.min(Math.max(e,12),n),y:Math.min(Math.max(t,12),s)}},[]),w=(0,n.useRef)({dragging:!1,startX:0,startY:0,startAnchor:{x:0,y:0},raf:0,pending:{x:0,y:0}}),E=(0,n.useCallback)(e=>{let t=e.currentTarget;w.current.dragging=!0,w.current.startX=e.clientX,w.current.startY=e.clientY,w.current.startAnchor={...g.current},w.current.pending=g.current;try{t.setPointerCapture?.(e.pointerId)}catch{}e.preventDefault(),document.body.style.userSelect="none",t.style.touchAction="none";let onMove=e=>{if(!w.current.dragging)return;let t=e.clientX-w.current.startX,r=e.clientY-w.current.startY,a=y(w.current.startAnchor.x+t,w.current.startAnchor.y+r,48,48);w.current.pending=a,w.current.raf||(w.current.raf=requestAnimationFrame(()=>{w.current.raf=0;let e=w.current.pending;(e.x!==g.current.x||e.y!==g.current.y)&&i(e)}))},onUp=e=>{if(w.current.dragging){w.current.dragging=!1;try{t.releasePointerCapture?.(e.pointerId)}catch{}document.body.style.userSelect="",window.removeEventListener("pointermove",onMove),window.removeEventListener("pointerup",onUp),w.current.raf&&cancelAnimationFrame(w.current.raf),w.current.raf=0}};window.addEventListener("pointermove",onMove,{passive:!0}),window.addEventListener("pointerup",onUp,{passive:!0})},[y,i]);if((0,n.useEffect)(()=>{let onResize=()=>{let e=g.current,t=y(e.x,e.y,48,48);(t.x!==e.x||t.y!==e.y)&&i(t)};return window.addEventListener("resize",onResize),()=>window.removeEventListener("resize",onResize)},[y,i]),(0,n.useEffect)(()=>{if(!t)return;let onDocClick=e=>{if(!b.current||!p.current)return;let t=e.target;b.current.contains(t)||p.current.contains(t)||(s(),m(!1))},onEsc=e=>{"Escape"===e.key&&(s(),m(!1))};return document.addEventListener("mousedown",onDocClick),document.addEventListener("keydown",onEsc),()=>{document.removeEventListener("mousedown",onDocClick),document.removeEventListener("keydown",onEsc)}},[t,s]),(0,n.useEffect)(()=>{if(!x)return;let onDown=e=>{f.current&&(f.current.contains(e.target)||m(!1))};return document.addEventListener("mousedown",onDown),()=>document.removeEventListener("mousedown",onDown)},[x]),!e)return null;async function handleNewChat(){let e=await (0,S.BT)();e&&c(e),h(e=>e+1)}return(0,j.createPortal)((0,a.jsxs)(a.Fragment,{children:[a.jsx("button",{ref:p,"aria-label":"AI Coach",onPointerDown:E,onClick:()=>{w.current.dragging||(t?(s(),m(!1)):r())},style:{position:"fixed",left:0,top:0,transform:`translate3d(${o.x}px, ${o.y}px, 0)`,zIndex:2147483647,touchAction:"none",willChange:"transform"},className:"h-12 w-12 rounded-full shadow-lg border border-gray-700 bg-gray-900 text-white flex items-center justify-center cursor-grab active:cursor-grabbing active:scale-95",children:a.jsx(u.Z,{className:"h-6 w-6"})}),a.jsx(C.M,{children:t&&(0,a.jsxs)(a.Fragment,{children:[a.jsx(N.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15},onClick:()=>{s(),m(!1)},style:{position:"fixed",inset:0,zIndex:2147483645},className:"bg-black/30 backdrop-blur-sm"}),a.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4 md:p-6",style:{zIndex:2147483646,pointerEvents:"none"},children:(0,a.jsxs)(N.E.div,{ref:b,initial:{opacity:0,scale:.98},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.98},transition:{type:"spring",stiffness:260,damping:24},style:{width:420,maxWidth:"95vw",height:560,maxHeight:"80vh",willChange:"transform",pointerEvents:"auto"},className:"rounded-2xl shadow-2xl border border-[#232B36] bg-[#0f1520] overflow-hidden flex flex-col",children:[(0,a.jsxs)("div",{className:"relative px-4 py-2 border-b border-[#232B36] bg-[#121A24] text-gray-200 flex items-center justify-between",children:[a.jsx("span",{className:"text-sm font-medium",children:"AI Coach"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>m(e=>!e),className:"px-2 py-1 text-xs rounded text-white bg-gray-700 hover:bg-gray-600 transition",children:"History"}),a.jsx("button",{onClick:()=>{s(),m(!1)},className:"p-1 rounded-md hover:bg-[#1f2732]","aria-label":"Close",children:a.jsx(k.Z,{className:"h-4 w-4"})})]}),x&&a.jsx("div",{ref:f,className:"absolute right-2 top-full mt-2 z-[100] w-[320px]",children:a.jsx(P,{onSelect:e=>{c(e),m(!1)},selectedId:l,refreshKey:d,showHeader:!0,onNew:handleNewChat,maxHeight:420})})]}),a.jsx("div",{className:"flex-1 min-h-0",children:a.jsx(A,{initialConversationId:l,onNewConversation:e=>{c(e),h(e=>e+1)}})})]})})]})})]}),document.body)}let L=[{href:"/dashboard",label:"Overview"},{href:"/dashboard/upload",label:"Upload Content"},{href:"/dashboard/history",label:"Upload History"},{href:"/dashboard/talking-head",label:"Talking Heads"},{href:"/dashboard/ai-chat",label:"AI Chat"},{href:"/dashboard/account",label:"Account Info"}];function MobileProjectNavDrawer({open:e,onClose:t}){return e?(0,a.jsxs)("div",{className:"fixed inset-0 z-[2147483648]",children:[a.jsx("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm",onClick:t,"aria-hidden":!0}),(0,a.jsxs)("div",{className:"absolute left-0 top-0 h-full w-[84vw] max-w-[320px] bg-[#0f1520] border-r border-[#232B36] shadow-2xl flex flex-col",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 border-b border-[#232B36] text-gray-200",children:[a.jsx("span",{className:"font-medium",children:"Project Navigation"}),a.jsx("button",{"aria-label":"Close navigation",className:"p-1 rounded hover:bg-[#1f2732]",onClick:t,children:a.jsx(k.Z,{className:"h-5 w-5"})})]}),a.jsx("nav",{className:"flex-1 overflow-y-auto",children:(0,a.jsxs)("ul",{className:"py-2",children:[L.map(e=>a.jsx("li",{children:a.jsx(l(),{href:e.href,className:"block px-5 py-3 text-gray-100 hover:text-cyan-400 hover:bg-gray-800 transition",onClick:t,children:e.label})},e.href)),a.jsx("li",{className:"border-t border-gray-700 mt-2 pt-2",children:a.jsx(l(),{href:"/",className:"block px-5 py-3 text-red-400 hover:text-red-500 hover:bg-gray-800 transition font-semibold",onClick:t,children:"Exit Dashboard"})})]})})]})]}):null}var z=r(7382),D=r(37355),U=r(4790);function LayoutClient({children:e,initialUser:t}){let[r,i]=(0,n.useState)(!1),[l,c]=(0,n.useState)(!1),[d,h]=(0,n.useState)(!1),{open:u}=(0,D.C)(),{user:x,loading:m}=(0,U.a)({required:!0,initialUser:t}),f=(0,s.usePathname)();(0,n.useEffect)(()=>{c(!0)},[]);let p=!["/dashboard/ai-chat","/dashboard/ai-coach","/dashboard/coaching"].some(e=>f?.startsWith(e));return l&&!m&&x?a.jsx(a.Fragment,{children:a.jsx(FloatingChatProvider,{children:(0,a.jsxs)("div",{className:"min-h-screen overflow-x-hidden bg-gradient-to-br from-gray-900 via-gray-800 to-black flex",children:[a.jsx("div",{className:"hidden md:flex fixed top-6 left-6 z-30 transition-all duration-200",style:{width:r?256:64,height:"calc(100svh - 3rem)",padding:"0.5rem 0"},children:a.jsx(DashboardSidebar,{expanded:r,setExpanded:i})}),(0,a.jsxs)("div",{className:`flex-1 flex flex-col transition-all duration-200 ${r?"md:ml-64":"md:ml-16"}`,children:[a.jsx("main",{className:"px-6 pt-2",children:e}),p?a.jsx("div",{className:"h-4 shrink-0"}):null]}),!p&&a.jsx("div",{"aria-hidden":!0,className:"pointer-events-none fixed inset-x-0 bottom-0 z-[5] bg-gradient-to-br from-gray-900 via-gray-800 to-black",style:{height:"env(safe-area-inset-bottom, 0px)"}}),p&&a.jsx(FloatingChatWidget,{}),a.jsx("div",{className:"md:hidden fixed top-3 left-3 z-40",children:a.jsx("button",{"aria-label":"Open navigation",onClick:()=>h(!0),className:"p-2 rounded-xl bg-[#171d29] border border-[#232B36] text-white shadow",children:a.jsx(z.Z,{size:20})})}),a.jsx(MobileProjectNavDrawer,{open:d,onClose:()=>h(!1)}),a.jsx("button",{onClick:u,className:"fixed bottom-3 right-3 z-40 text-xs text-gray-300/80 hover:text-white underline underline-offset-2",children:"Cookie preferences"})]})})}):a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-900 text-white",children:a.jsx(o.default,{})})}},92551:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>DashboardLayout});var a=r(4656),n=r(95153);let s=(0,n.createProxy)(String.raw`/Users/theodorosiakovou/Projects/ai-platform/src/app/dashboard/LayoutClient.tsx`),{__esModule:o,$$typeof:i}=s,l=s.default;var c=r(24596);let d=process.env.API_URL||process.env.NEXT_PUBLIC_API_URL||"http://localhost:5001";async function serverFetchJson(e,t={}){let r;let a=e.startsWith("http://")||e.startsWith("https://")?e:`${d}${e.startsWith("/")?"":"/"}${e}`,n=(0,c.headers)(),s=new Headers(t.headers);s.has("Content-Type")||s.set("Content-Type","application/json");let o=n.get("cookie");o&&s.set("cookie",o);let i=await fetch(a,{...t,cache:t.cache??"no-store",headers:s}),l=await i.text();try{r=l?JSON.parse(l):null}catch{r=l}return{ok:i.ok,status:i.status,data:r}}async function serverGetUser(){let e=await serverFetchJson("/api/auth/me",{method:"GET"});return e.ok?e.data:null}async function DashboardLayout({children:e}){let t=await serverGetUser();return a.jsx(l,{initialUser:t,children:e})}}};