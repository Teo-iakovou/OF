exports.id=3945,exports.ids=[3945],exports.modules={98670:(e,t,a)=>{Promise.resolve().then(a.t.bind(a,13724,23)),Promise.resolve().then(a.t.bind(a,35365,23)),Promise.resolve().then(a.t.bind(a,44900,23)),Promise.resolve().then(a.t.bind(a,44714,23)),Promise.resolve().then(a.t.bind(a,45392,23)),Promise.resolve().then(a.t.bind(a,8898,23))},84336:(e,t,a)=>{Promise.resolve().then(a.bind(a,80105))},67997:(e,t,a)=>{"use strict";a.d(t,{Z:()=>CartProvider,j:()=>useCart});var r=a(30784),s=a(9885);let n=(0,s.createContext)(void 0);function CartProvider({children:e}){let[t,a]=(0,s.useState)(()=>[]);(0,s.useEffect)(()=>{},[t]);let i=t.reduce((e,t)=>e+t.quantity,0);return r.jsx(n.Provider,{value:{cartItems:t,setCartItems:a,addToCart:function(e){a(t=>{let a=t.find(t=>t.id===e);return a?t.map(t=>t.id===e?{...t,quantity:t.quantity+1}:t):[...t,{id:e,quantity:1}]})},removeFromCart:function(e){a(t=>t.filter(t=>t.id!==e))},changeQty:function(e,t){a(a=>a.map(a=>a.id===e?{...a,quantity:Math.max(1,t)}:a))},cartCount:i},children:e})}function useCart(){let e=(0,s.useContext)(n);if(!e)throw Error("useCart must be used within a CartProvider");return e}},83053:(e,t,a)=>{"use strict";a.d(t,{Z:()=>CartDrawer});var r=a(30784),s=a(33024),n=a(52451),i=a.n(n),o=a(9885),l=a(26303),c=a(67997),d=a(24206);function CartDrawer({isOpen:e,onClose:t}){let{cartItems:a,removeFromCart:n,changeQty:u}=(0,c.j)(),[h,f]=(0,o.useState)(!1);if((0,o.useEffect)(()=>{f(!0)},[]),(0,o.useEffect)(()=>(document.body.style.overflow=e?"hidden":"auto",()=>{document.body.style.overflow="auto"}),[e]),!h)return null;let x=a.reduce((e,t)=>e+t.quantity,0),m=a.reduce((e,t)=>{let a=s.B.find(e=>e.id===t.id);if(!a)return e;let r=Number(a.price.replace(/[^0-9.-]+/g,""));return e+r*t.quantity},0),handleStripePayment=async()=>{if(a.length)try{await (0,d.Vv)(a[0].id)}catch(e){console.error("Stripe checkout error:",e),alert("Please sign in before checkout.")}};return(0,r.jsxs)("div",{className:`fixed top-0 right-0 w-full sm:w-[400px] h-full bg-[#232B36] border-l border-[#2e3643] shadow-2xl transition-transform duration-300 z-50 flex flex-col ${e?"translate-x-0":"translate-x-full"}`,style:{maxWidth:420},children:[(0,r.jsxs)("div",{className:"flex justify-between items-center p-6 border-b border-[#2e3643] bg-[#1c2330]",children:[(0,r.jsxs)("h2",{className:"text-2xl font-bold text-white tracking-tight",children:["Cart ",r.jsx("span",{className:"font-light",children:"•"})," ",(0,r.jsxs)("span",{className:"text-cyan-400",children:[x," ",1===x?"item":"items"]})]}),r.jsx("button",{onClick:t,"aria-label":"Close cart",className:"flex items-center justify-center w-9 h-9 rounded-full bg-[#222735] text-white hover:text-cyan-400 hover:bg-[#232B36] transition border border-gray-700 shadow focus:outline-none focus:ring-2 focus:ring-cyan-500 text-2xl font-bold",children:"\xd7"})]}),r.jsx("div",{className:"flex-1 overflow-y-auto px-4 py-6 space-y-6",children:0===a.length?r.jsx("div",{className:"text-gray-400 py-24 text-center select-none opacity-75 text-base",children:"Cart is empty."}):a.map(e=>{let t=s.B.find(t=>t.id===e.id);return t?(0,r.jsxs)("div",{className:"flex items-center gap-4 bg-[#181F28] rounded-xl shadow border border-[#232B36] px-4 py-4 relative",children:[r.jsx("div",{className:"flex items-center justify-center w-16 h-16 bg-[#222735] rounded-xl overflow-hidden border border-[#2e3643]",children:r.jsx(i(),{src:"/echofy-removebg-preview.png",alt:t.title,width:320,height:320,className:"object-cover w-full h-full"})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0 relative",children:[r.jsx("button",{"aria-label":"Remove item",onClick:()=>n(e.id),className:"absolute top-2 right-2 p-1 rounded-full hover:text-red-500 text-gray-400 transition bg-transparent",children:r.jsx(l.Z,{size:18})}),(0,r.jsxs)("div",{className:"flex flex-col gap-1 mb-6",children:[r.jsx("div",{className:"font-bold text-lg",children:t.title}),r.jsx("div",{className:"text-cyan-400 font-semibold text-md",children:t.price})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3 mt-2",children:[r.jsx("button",{onClick:()=>u(e.id,Math.max(1,e.quantity-1)),disabled:1===e.quantity,className:"w-8 h-8 flex items-center justify-center rounded-full border border-gray-600 text-white text-xl bg-[#181F28] hover:bg-[#181F28] hover:text-cyan-400 transition disabled:opacity-60",children:"−"}),r.jsx("span",{className:"text-white font-semibold text-lg",children:e.quantity}),r.jsx("button",{onClick:()=>u(e.id,e.quantity+1),className:"w-8 h-8 flex items-center justify-center rounded-full border border-gray-600 text-white text-xl bg-[#181F28] hover:bg-[#181F28] hover:text-cyan-400 transition",children:"+"})]})]})]},e.id):null})}),(0,r.jsxs)("div",{className:"border-t border-[#2e3643] bg-[#232B36] px-6 pt-5 pb-8",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center text-lg font-bold text-white mb-3",children:[r.jsx("span",{children:"Subtotal"}),(0,r.jsxs)("span",{className:"text-cyan-400",children:["$",m]})]}),(0,r.jsxs)("button",{disabled:0===a.length,onClick:handleStripePayment,className:"w-full mt-2 bg-gradient-to-r from-cyan-600 to-indigo-600 hover:from-cyan-700 hover:to-indigo-700 transition text-lg font-semibold py-4 rounded-xl shadow-lg disabled:opacity-60",children:["Check out • $",m]})]})]})}},48287:(e,t,a)=>{"use strict";a.d(t,{Z:()=>Reveal});var r=a(30784),s=a(9885);function Reveal({as:e,children:t,className:a="",delay:n=0,once:i=!1,threshold:o=.15,...l}){let c=e||"div",d=(0,s.useRef)(null),[u,h]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{let e=d.current;if(!e)return;let t=new IntersectionObserver(([e])=>{e.isIntersecting?(h(!0),i&&t.disconnect()):i||h(!1)},{threshold:o});return t.observe(e),()=>t.disconnect()},[i,o]),r.jsx(c,{ref:d,className:`transition-all duration-1000 ease-out will-change-transform ${u?"opacity-100 translate-y-0":"opacity-0 translate-y-6"} ${a}`,style:{transitionDelay:`${n}ms`},...l,children:t})}},37355:(e,t,a)=>{"use strict";a.d(t,{C:()=>useConsent,x:()=>ConsentProvider});var r=a(30784),s=a(9885);let n="consent.v1",i=(0,s.createContext)(null);function ConsentProvider({children:e}){let[t,a]=(0,s.useState)(!1),[o,l]=(0,s.useState)(null);(0,s.useEffect)(()=>{try{let e=localStorage.getItem(n);if(e){let t=JSON.parse(e);l(t);return}}catch{}let e="undefined"!=typeof navigator&&!0===navigator.globalPrivacyControl,t={categories:{necessary:!0,analytics:!1,marketing:!1},timestamp:Date.now(),locale:"undefined"!=typeof navigator?navigator.language:void 0,version:"1.0",gpc:e};l(t),a(!0)},[]);let c=(0,s.useCallback)(()=>a(!0),[]),d=(0,s.useCallback)(()=>a(!1),[]),u=(0,s.useCallback)(async e=>{let t="undefined"!=typeof navigator&&!0===navigator.globalPrivacyControl,r={categories:{necessary:!0,...e},timestamp:Date.now(),locale:"undefined"!=typeof navigator?navigator.language:void 0,version:"1.0",gpc:t};l(r);try{localStorage.setItem(n,JSON.stringify(r))}catch{}try{fetch("/api/consent",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)})}catch{}a(!1)},[]),h=(0,s.useMemo)(()=>({consent:o,open:c,close:d,save:u,isOpen:t}),[o,c,d,u,t]);return r.jsx(i.Provider,{value:h,children:e})}function useConsent(){let e=(0,s.useContext)(i);if(!e)throw Error("useConsent must be used within ConsentProvider");return e}},2955:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var r=a(30784);a(9885);let __WEBPACK_DEFAULT_EXPORT__=()=>r.jsx("div",{className:"flex items-center justify-center w-full h-32",children:(0,r.jsxs)("div",{className:"relative",children:[r.jsx("div",{className:"absolute -inset-2 rounded-full bg-gradient-to-tr from-cyan-500/20 to-fuchsia-500/20 blur-md animate-pulse"}),r.jsx("div",{className:"w-8 h-8 rounded-full border-2 border-cyan-400/30 border-t-cyan-400 animate-spin"})]})})},33024:(e,t,a)=>{"use strict";a.d(t,{B:()=>o,Z:()=>Packages});var r=a(30784),s=a(11440),n=a.n(s),i=a(48287);let o=[{id:"lite",title:"Lite",price:"$49",features:["Basic Analytics","5 Uploads/Day","Email Support"],color:"from-blue-400 to-blue-600"},{id:"pro",title:"Pro",price:"$349",features:["Custom AI Insights","Unlimited Uploads","Dedicated 24/7 Support"],color:"from-pink-400 to-pink-600"},{id:"ultimate",title:"Ultimate",price:"$499",features:["Full AI Integration","Unlimited Uploads","Premium Support","Custom Reports"],color:"from-purple-400 to-purple-600"}];function Packages(){return(0,r.jsxs)("section",{id:"packages",className:"py-16 scroll-mt-32",children:[r.jsx("h2",{className:"text-4xl font-bold text-center mb-8",children:"Choose Your Plan"}),r.jsx("div",{className:"flex flex-wrap justify-center gap-8",children:o.map((e,t)=>(0,r.jsxs)(i.Z,{as:"div",delay:120*t,className:"relative bg-black bg-opacity-20 p-10 rounded-xl shadow-lg w-80 h-[28rem] transform transition-all",style:{transition:"box-shadow 0.4s ease-in-out, transform 0.4s ease-in-out",border:`4px solid ${"lite"===e.id?"rgba(59, 130, 246, 0.5)":"pro"===e.id?"rgba(236, 72, 153, 0.5)":"rgba(168, 85, 247, 0.5)"}`,cursor:"default"},onMouseEnter:t=>{let a=t.currentTarget;a.style.boxShadow="lite"===e.id?"0 0 20px rgba(59, 130, 246, 0.8)":"pro"===e.id?"0 0 20px rgba(236, 72, 153, 0.8)":"0 0 20px rgba(168, 85, 247, 0.8)",a.style.transform="scale(1.03)"},onMouseLeave:e=>{let t=e.currentTarget;t.style.boxShadow="none",t.style.transform="scale(1)"},children:["pro"===e.id&&r.jsx("div",{className:"absolute -top-4 left-1/2 transform -translate-x-1/2 bg-pink-700 text-white text-xs px-4 py-1 rounded-md uppercase font-bold shadow-md",children:"Most Popular"}),r.jsx("h3",{className:"text-3xl font-extrabold text-white text-center mb-4",children:e.title}),r.jsx("p",{className:"text-5xl font-bold text-white text-center mb-6",children:e.price}),r.jsx("ul",{className:"text-white text-left space-y-4 mb-8",children:e.features.map((t,a)=>(0,r.jsxs)("li",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"inline-block w-3 h-3 bg-white rounded-full"}),t]},`${e.id}-${a}`))}),r.jsx(n(),{href:`/${e.id}`,children:(0,r.jsxs)("button",{className:"block w-full py-3 rounded-lg font-semibold text-white  shadow-md",style:{background:"lite"===e.id?"linear-gradient(to right, #3b82f6, #2563eb)":"pro"===e.id?"linear-gradient(to right, #ec4899, #db2777)":"linear-gradient(to right, #a855f7, #9333ea)",cursor:"pointer"},onMouseEnter:t=>{t.currentTarget.style.background="lite"===e.id?"#1d4ed8":"pro"===e.id?"#be185d":"#7c3aed"},onMouseLeave:t=>{t.currentTarget.style.background="lite"===e.id?"linear-gradient(to right, #3b82f6, #2563eb)":"pro"===e.id?"linear-gradient(to right, #ec4899, #db2777)":"linear-gradient(to right, #a855f7, #9333ea)"},children:["Select ",e.title]})})]},e.id))})]})}},4790:(e,t,a)=>{"use strict";let r;a.d(t,{U:()=>clearUserCache,a:()=>useUser});var s=a(9885),n=a(978),i=a(57114);let o=null,l=0;async function fetchUserOnce(){return o||(o=(async()=>{try{let e=await (0,n.r)(`${n._}/api/auth/me`,{method:"GET",cache:"no-store"});r=e.ok?e.data:null}catch{r=null}finally{l=Date.now();let e=r??null;return o=null,e}})())}function useUser(e={}){let{redirectTo:t="/login",required:a=!0,initialUser:n}=e,[o,c]=(0,s.useState)(null),[d,u]=(0,s.useState)(!0),[h,f]=(0,s.useState)(null),x=(0,i.useRouter)();return(0,s.useEffect)(()=>{let e=!1;return(async()=>{try{if(void 0!==n){if(n){r=n,l=Date.now(),c(n),u(!1);return}if(!n&&a){x.replace(t),c(null),u(!1);return}}let s=Date.now(),i=void 0!==r&&s-l<5e3;if(i&&!a){c(r??null),u(!1);return}let o=await fetchUserOnce();if(e)return;c(o),!o&&a&&x.replace(t)}catch(r){if(e)return;f(r),c(null),a&&x.replace(t)}finally{e||u(!1)}})(),()=>{e=!0}},[t,a,x,n]),{user:o,loading:d,error:h,refresh:async()=>{u(!0);try{let e=await fetchUserOnce();c(e)}catch(e){c(null),f(e)}finally{u(!1)}}}}function clearUserCache(){r=void 0,o=null,l=0}},80105:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>RootLayout,viewport:()=>S});var r=a(30784);a(65554);var s=a(10345);let notifications_ToastNotification=()=>r.jsx(s.x7,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#1f2937",color:"#ffffff",borderRadius:"1rem",fontSize:"0.95rem",padding:"1rem 1.25rem",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.2)"},success:{iconTheme:{primary:"#f472b6",secondary:"#ffffff"}},error:{iconTheme:{primary:"#dc2626",secondary:"#ffffff"},style:{background:"#7f1d1d"}}}});var n=a(9885);function LoginToastTrigger(){return(0,n.useEffect)(()=>{try{let e=sessionStorage.getItem("justLoggedIn");"1"===e&&(sessionStorage.removeItem("justLoggedIn"),s.Am.success("You are signed in. Welcome back!",{duration:3e3}))}catch{}},[]),null}var i=a(57114),o=a(2955);function RouteTransitionOverlay(){let[e,t]=(0,n.useState)(!1),a=(0,i.usePathname)();return((0,n.useEffect)(()=>{let start=()=>t(!0);return window.addEventListener("route-transition-start",start),()=>window.removeEventListener("route-transition-start",start)},[]),(0,n.useEffect)(()=>{e&&t(!1)},[a]),e)?r.jsx("div",{className:"fixed inset-0 z-[1000] flex items-center justify-center bg-black/60 backdrop-blur-sm",children:r.jsx("div",{className:"scale-110",children:r.jsx(o.default,{})})}):null}var l=a(54478),c=a(37004),d=a(67932),u=a(50007),h=a(54206),f=a(91672),x=a(67862),m=a(59490),p=a(97849),b=a(10891),g=a(39563),y=a(11440),v=a.n(y),j=a(61783),w=a(52451),N=a.n(w),k=a(67997),C=a(4790);function Navbar({onCartClick:e}){let[t,a]=(0,n.useState)(!1),[s,o]=(0,n.useState)(!1),{cartCount:y}=(0,k.j)(),{user:w}=(0,C.a)({required:!1}),T=(0,i.useRouter)();return(0,n.useEffect)(()=>o(!0),[]),(0,n.useEffect)(()=>{if(w)try{"function"==typeof T?.prefetch&&T.prefetch("/dashboard")}catch{}},[w,T]),(0,r.jsxs)(r.Fragment,{children:[r.jsx("nav",{className:"bg-gray-900 text-white py-4 px-6 fixed top-0 left-0 w-full z-50 shadow-lg",children:(0,r.jsxs)("div",{className:"relative flex items-center justify-between md:justify-between w-full",children:[r.jsx(v(),{href:"/",className:"absolute left-1/2 transform -translate-x-1/2 md:static md:transform-none flex items-center space-x-2",children:r.jsx(N(),{src:"/echofy-removebg-preview.png",alt:"Logo",width:70,height:70,className:"rounded-full object-contain"})}),(0,r.jsxs)("div",{className:"flex items-center gap-4 ml-auto",children:[(0,r.jsxs)("button",{onClick:e,className:"relative p-1 hover:text-cyan-400 transition bg-transparent border-none shadow-none","aria-label":"View cart",style:{background:"transparent"},children:[r.jsx(l.Z,{size:28}),s&&y>0&&r.jsx("span",{className:"   absolute -top-2 -right-2 flex items-center justify-center   bg-gradient-to-tr from-cyan-400 to-blue-600 text-white text-xs   rounded-full w-5 h-5 font-bold shadow z-10   ",children:y||0})]}),r.jsx("button",{onClick:()=>a(!t),"aria-label":t?"Close menu":"Open menu",className:`p-2 rounded-md border border-gray-700 bg-[#1f2937] hover:bg-[#374151] text-white transition-all shadow-sm ${t?"z-10":"z-50"}`,children:t?r.jsx(b.q5L,{size:22}):r.jsx(b.cur,{size:22})})]})]})}),t&&r.jsx("div",{className:"fixed inset-0 bg-[#181F28] text-gray-200 z-[60] flex flex-col",children:(0,r.jsxs)("div",{className:"flex flex-col justify-between h-full p-6 overflow-y-auto",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[r.jsx("h1",{className:"text-2xl font-semibold tracking-wide",children:"Menu"}),r.jsx("button",{onClick:()=>a(!1),"aria-label":"Close menu",className:"   flex items-center justify-center   w-9 h-9   rounded-full   bg-[#222735]   text-white   hover:text-cyan-400   hover:bg-[#232B36]   transition   border border-gray-700   shadow   focus:outline-none   focus:ring-2 focus:ring-cyan-500   text-2xl   font-bold   ",children:"\xd7"})]}),(0,r.jsxs)(j.Z,{items:["packages","features","upgrade","faq","affiliates","help-center","contact"],currentClassName:"scrollspy-active",offset:-100,componentTag:"nav",className:"flex flex-col gap-5 text-lg font-medium",children:[[{id:"packages",label:"Products",icon:c.Z},{id:"features",label:"Features",icon:d.Z},{id:"upgrade",label:"Upgrade",icon:u.Z},{id:"faq",label:"FAQ",icon:h.Z},{id:"affiliates",label:"Affiliates",icon:f.Z},{id:"help-center",label:"Help Center",icon:x.Z},{id:"contact",label:"Contact Us",icon:m.Z}].map(({id:e,label:t,icon:s})=>(0,r.jsxs)("a",{href:`#${e}`,onClick:()=>a(!1),className:"hover:text-cyan-400 transition flex items-center gap-2",children:[r.jsx(s,{size:18}),t]},e)),(0,r.jsxs)(v(),{href:"/dashboard",prefetch:!0,onClick:()=>{a(!1);try{window.dispatchEvent(new Event("route-transition-start"))}catch{}},className:"hover:text-cyan-400 transition flex items-center gap-2",children:[r.jsx(p.Z,{size:18}),"Dashboard"]})]}),r.jsx("div",{className:"border-t border-gray-700 my-6"}),(0,r.jsxs)("button",{onClick:()=>{if(a(!1),w){try{sessionStorage.setItem("justLoggedIn","1")}catch{}T.replace("/")}else T.push("/login?redirect=/")},className:"flex items-center gap-2 text-gray-400 hover:text-white transition mb-4","aria-label":"Log in",children:[r.jsx(b.fzv,{size:20}),r.jsx("span",{children:"Log in"})]}),(0,r.jsxs)("div",{className:"flex gap-6 text-gray-400",children:[r.jsx("a",{href:"https://twitter.com",target:"_blank",className:"hover:text-white",children:r.jsx(g.fWC,{size:20})}),r.jsx("a",{href:"https://instagram.com",target:"_blank",className:"hover:text-white",children:r.jsx(g.Zf_,{size:20})}),r.jsx("a",{href:"https://tiktok.com",target:"_blank",className:"hover:text-white",children:r.jsx(g.nTm,{size:20})}),r.jsx("a",{href:"https://youtube.com",target:"_blank",className:"hover:text-white",children:r.jsx(g.V2E,{size:20})})]})]})})]})}var T=a(37355);let navigation_Footer=()=>r.jsx("footer",{className:"bg-gradient-to-r from-blue-900 to-blue-700 text-gray-300 py-6 text-center",children:(0,r.jsxs)("div",{className:"container mx-auto",children:[r.jsx("p",{children:"\xa9 2025 AI Content Helper. All rights reserved."}),r.jsx(FooterLinks,{}),(0,r.jsxs)("div",{className:"flex justify-center space-x-6 mt-6",children:[r.jsx("a",{href:"https://twitter.com",target:"_blank",className:"hover:text-blue-400 transition",children:r.jsx(g.fWC,{size:20})}),r.jsx("a",{href:"https://instagram.com",target:"_blank",className:"hover:text-pink-400 transition",children:r.jsx(g.Zf_,{size:20})}),r.jsx("a",{href:"https://tiktok.com",target:"_blank",className:"hover:text-gray-400 transition",children:r.jsx(g.nTm,{size:20})}),r.jsx("a",{href:"https://youtube.com",target:"_blank",className:"hover:text-red-400 transition",children:r.jsx(g.V2E,{size:20})})]})]})});function FooterLinks(){let{open:e}=(0,T.C)();return(0,r.jsxs)("div",{className:"flex justify-center flex-wrap gap-6 mt-4",children:[r.jsx(v(),{href:"/privacy",className:"hover:text-white transition",children:"Privacy Policy"}),r.jsx(v(),{href:"/terms",className:"hover:text-white transition",children:"Terms of Service"}),r.jsx(v(),{href:"/cookies",className:"hover:text-white transition",children:"Cookie Policy"}),r.jsx("button",{onClick:e,className:"hover:text-white transition underline underline-offset-2",children:"Cookie preferences"})]})}function ConsentBanner(){let{isOpen:e,save:t,open:a}=(0,T.C)();return e?r.jsx("div",{className:"fixed inset-x-0 bottom-0 z-[10000] px-4 pb-4",children:(0,r.jsxs)("div",{className:"max-w-4xl mx-auto rounded-2xl border border-[#232B36] bg-[#0f1520] p-4 text-gray-200 shadow-2xl",children:[r.jsx("div",{className:"text-sm",children:"We use cookies to provide essential site functionality and to improve your experience. You can accept all, reject non‑essential, or manage preferences."}),(0,r.jsxs)("div",{className:"mt-3 flex flex-wrap gap-2 justify-end",children:[r.jsx("button",{className:"px-3 py-1.5 rounded-lg border border-[#2a3443] bg-transparent hover:bg-[#141b26]",onClick:()=>t({analytics:!1,marketing:!1}),children:"Reject all"}),r.jsx("button",{className:"px-3 py-1.5 rounded-lg border border-[#2a3443] bg-[#141b26] hover:bg-[#182030]",onClick:()=>a(),children:"Manage"}),r.jsx("button",{className:"px-3 py-1.5 rounded-lg bg-gradient-to-b from-indigo-500 to-blue-600 text-white font-semibold shadow hover:brightness-110",onClick:()=>t({analytics:!0,marketing:!0}),children:"Accept all"})]})]})}):null}function ConsentModal(){let{isOpen:e,close:t,save:a}=(0,T.C)(),[s,i]=(0,n.useState)(!1),[o,l]=(0,n.useState)(!1);return((0,n.useEffect)(()=>{e&&(i(!1),l(!1))},[e]),e)?(0,r.jsxs)("div",{className:"fixed inset-0 z-[10001] flex items-center justify-center p-4",children:[r.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:t}),(0,r.jsxs)("div",{className:"relative w-full max-w-lg rounded-2xl border border-[#232B36] bg-[#0f1520] p-5 text-gray-100 shadow-2xl",children:[r.jsx("div",{className:"text-lg font-semibold",children:"Cookie Preferences"}),r.jsx("div",{className:"mt-1 text-sm text-gray-300",children:"Adjust what we can use. Necessary cookies are always on."}),(0,r.jsxs)("div",{className:"mt-4 space-y-3",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between border border-[#232B36] rounded-xl p-3 bg-[#121A24] opacity-70",children:[(0,r.jsxs)("div",{children:[r.jsx("div",{className:"font-medium",children:"Strictly necessary"}),r.jsx("div",{className:"text-xs text-gray-400",children:"Required for basic site functions."})]}),r.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full bg-[#1b2431] border border-[#2a3443]",children:"On"})]}),(0,r.jsxs)("label",{className:"flex items-center justify-between border border-[#232B36] rounded-xl p-3 bg-[#0f1623]",children:[(0,r.jsxs)("div",{children:[r.jsx("div",{className:"font-medium",children:"Analytics"}),r.jsx("div",{className:"text-xs text-gray-400",children:"Helps us understand usage."})]}),r.jsx("input",{type:"checkbox",className:"h-5 w-5",checked:s,onChange:e=>i(e.target.checked)})]}),(0,r.jsxs)("label",{className:"flex items-center justify-between border border-[#232B36] rounded-xl p-3 bg-[#0f1623]",children:[(0,r.jsxs)("div",{children:[r.jsx("div",{className:"font-medium",children:"Marketing"}),r.jsx("div",{className:"text-xs text-gray-400",children:"Personalized ads & pixels."})]}),r.jsx("input",{type:"checkbox",className:"h-5 w-5",checked:o,onChange:e=>l(e.target.checked)})]})]}),(0,r.jsxs)("div",{className:"mt-4 flex justify-end gap-2",children:[r.jsx("button",{className:"px-3 py-1.5 rounded-lg border border-[#2a3443] bg-transparent hover:bg-[#141b26]",onClick:t,children:"Cancel"}),r.jsx("button",{className:"px-3 py-1.5 rounded-lg bg-gradient-to-b from-indigo-500 to-blue-600 text-white font-semibold shadow hover:brightness-110",onClick:()=>a({analytics:s,marketing:o}),children:"Save preferences"})]})]})]}):null}var E=a(83053);let S={width:"device-width",initialScale:1,viewportFit:"cover"};function RootLayout({children:e}){let t=(0,i.usePathname)(),[a,s]=(0,n.useState)(!1);return r.jsx("html",{lang:"en",children:r.jsx("body",{className:"bg-of-background font-sans min-h-[100svh] flex flex-col",children:r.jsx(T.x,{children:(0,r.jsxs)(k.Z,{children:[!t.startsWith("/dashboard")&&r.jsx(Navbar,{onCartClick:()=>s(!0)}),r.jsx("main",{className:"flex-grow",children:e}),r.jsx(notifications_ToastNotification,{}),r.jsx(RouteTransitionOverlay,{}),r.jsx(LoginToastTrigger,{}),!t.startsWith("/dashboard/ai")&&r.jsx(navigation_Footer,{}),r.jsx(ConsentBanner,{}),r.jsx(ConsentModal,{}),r.jsx(E.Z,{isOpen:a,onClose:()=>s(!1),onCheckout:()=>{}})]})})})})}},24206:(e,t,a)=>{"use strict";a.d(t,{BT:()=>createEmptyConversation,Do:()=>purchasePackage,Ii:()=>deleteAnalysisResult,Kc:()=>coachChat,Nn:()=>checkUserPackage,TD:()=>ttsSynthesize,Um:()=>fetchConversation,Vv:()=>startCheckout,fA:()=>sendFeedback,ku:()=>fetchConversations,lG:()=>fetchCoachChatPrompts,mF:()=>analyzeImageMultipart,mI:()=>fetchAnalysisHistory,sm:()=>clearApiCaches,uh:()=>generateConversationTitle});var r=a(978);async function readJsonOrText(e){let t=await e.text();try{return{ok:e.ok,status:e.status,data:JSON.parse(t)}}catch{return{ok:e.ok,status:e.status,data:t}}}function ensureOk(e,t){if(!e.ok){let a="string"==typeof e.data?e.data:JSON.stringify(e.data,null,2);throw Error(`${t} failed (${e.status}) - ${a}`)}return e.data}async function fetchAnalysisHistory(e=1,t=10){let a=`${r._}/api/analyze?page=${e}&limit=${t}&ts=${Date.now()}`,s=await (0,r.r)(a,{method:"GET",cache:"no-store"});if(!s.ok)throw Error("Fetch analysis history failed");return s.data}async function deleteAnalysisResult(e){let t=await fetch(`${r._}/api/analyze/${e}`,{method:"DELETE",headers:{"Content-Type":"application/json"}}),a=await readJsonOrText(t);return ensureOk(a,"Delete analysis result")}async function startCheckout(e){let t="true"===process.env.NEXT_PUBLIC_USE_BFF,a=t?"/api/checkout/create-checkout-session":`${r._}/api/checkout/create-checkout-session`,s=await fetch(a,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({packageId:e})}),{ok:n,data:i}=await readJsonOrText(s);if(!n)throw Error("string"==typeof i?i:i?.error||"Failed to start checkout");if(!i?.url)throw Error("No checkout URL returned");window.location.href=i.url}async function purchasePackage(e){let t="true"===process.env.NEXT_PUBLIC_USE_BFF,a=t?"/api/user/purchase":`${r._}/api/user/purchase`,s=await fetch(a,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({packageId:e})}),n=await readJsonOrText(s);return ensureOk(n,"Purchase package")}async function checkUserPackage(){let e=Date.now();return void 0!==s.value&&e-s.ts<5e3?s.value:(s.inFlight||(s.inFlight=(async()=>{try{let e=await (0,r.r)(`${r._}/api/user/check-package`,{method:"GET",cache:"no-store"});if(!e.ok)throw Error("Check user package failed");let t=e.data;return s.value=t,s.ts=Date.now(),t}catch(e){if("object"==typeof e&&null!==e&&("number"==typeof e.status&&401===e.status||"string"==typeof e.message&&"Unauthorized"===e.message))return{hasAccess:!1};throw e}finally{s.inFlight=null}})()),s.inFlight)}let s={value:void 0,ts:0,inFlight:null};function clearApiCaches(){s.value=void 0,s.ts=0,s.inFlight=null}async function coachChat({question:e,latestContentInfo:t,conversationId:a,title:s}){try{let n=await fetch(`${r._}/api/coach-chat`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({question:e,latestContentInfo:t,conversationId:a,title:s})}),i=await readJsonOrText(n);if(200===n.status)return{status:200,data:i.data};if(402===n.status)return{status:402,data:i.data};if(429===n.status)return{status:429,data:i.data};return{status:n.status,data:i.data}}catch{return{status:0,data:{error:"Network error"}}}}async function fetchConversation(e){let t=await fetch(`${r._}/api/conversations/${e}`,{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include",cache:"no-store"}),a=await readJsonOrText(t);return ensureOk(a,"Fetch conversation")}async function createEmptyConversation(){try{let e=await fetch(`${r._}/api/conversations`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({})}),t=await readJsonOrText(e),a=ensureOk(t,"Create conversation");return a._id??a.id??null}catch(e){return console.error("Error creating new conversation:",e),null}}async function generateConversationTitle(e,t){let a=await fetch(`${r._}/api/conversations/${e}/generate-title`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({firstUserMessage:t}),cache:"no-store"}),s=await readJsonOrText(a),n=ensureOk(s,"Generate title");return n.title||null}async function fetchConversations(){let e=`${r._}/api/conversations?ts=${Date.now()}`,t=await (0,r.r)(e,{method:"GET",cache:"no-store"});if(!t.ok)throw Error("Fetch conversations failed");return t.data}async function sendFeedback(e){let t=await fetch(`${r._}/api/feedback`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:e})}),a=await readJsonOrText(t);if(!a.ok)throw Error("string"==typeof a.data?a.data:a.data?.error||`Failed to send feedback (${a.status})`);return a.data}function analyzeImageMultipart(e){let{file:t,goal:a,linkBase:s,onProgress:n,captions:i=!0,signal:o}=e,l=new FormData;l.append("image",t),a&&l.append("goal",a),s&&l.append("linkBase",s);try{let e=Intl.DateTimeFormat().resolvedOptions().timeZone;e&&l.append("timezone",e)}catch{}let c=`${r._}/api/analyze`+(!1===i?"?captions=false":"");return new Promise((e,t)=>{let a=new XMLHttpRequest;a.open("POST",c,!0),a.withCredentials=!0,a.onreadystatechange=()=>{if(4===a.readyState){if(a.status>=200&&a.status<300)try{let t=JSON.parse(a.responseText);e(t)}catch{t(Error("Invalid JSON from server."))}else try{let e=JSON.parse(a.responseText);t(Error(e?.error||`Upload failed (${a.status})`))}catch{t(Error(`Upload failed (${a.status})`))}}},a.upload&&"function"==typeof n&&(a.upload.onprogress=e=>{e.lengthComputable&&n(Math.round(e.loaded/e.total*100))}),a.onerror=()=>t(Error("Network error"));let r=!1,onAbort=()=>{r=!0;try{a.abort()}catch{}t(new DOMException("Aborted","AbortError"))};if(o){if(o.aborted)return onAbort();o.addEventListener("abort",onAbort,{once:!0})}a.send(l);let cleanup=()=>{o&&o.removeEventListener("abort",onAbort)};a.onloadend=()=>{r||cleanup()}})}async function fetchCoachChatPrompts(){let e=`${r._}/api/coach-chat/prompts?ts=${Date.now()}`,t=await (0,r.r)(e,{method:"GET",cache:"no-store"});if(!t.ok)throw Error("Fetch coach prompts failed");return t.data}async function ttsSynthesize(e,t={}){let a=new URLSearchParams({text:e});return t.voiceId&&a.set("voiceId",t.voiceId),t.format&&a.set("format",t.format),a.set("ts",String(Date.now())),`${r._}/api/tts?${a.toString()}`}},978:(e,t,a)=>{"use strict";a.d(t,{_:()=>r,r:()=>fetchJson});let r=process.env.NEXT_PUBLIC_API_URL||"http://localhost:5001";async function fetchJson(e,t={}){let a="true"===process.env.NEXT_PUBLIC_USE_BFF,s=e;try{if(a&&"string"==typeof e)for(let t of["/api/auth/","/api/checkout/","/api/user/"]){if(e.startsWith(r+t)){s=e.slice(r.length);break}let a=e.indexOf(t);if(e.startsWith("http")&&-1!==a){s=e.slice(a);break}}}catch{}process.env.NEXT_PUBLIC_HEADER_AUTH;let n=new Headers(t.headers);n.has("content-type")||n.set("Content-Type","application/json");let i=await fetch(s,{...t,credentials:"include",headers:n}),o=await i.text(),l=null;try{l=o?JSON.parse(o):null}catch{l=o}if(401===i.status){let e=Error("Unauthorized");throw e.status=401,e.data=l,e}return{ok:i.ok,status:i.status,data:l}}},79113:(e,t,a)=>{"use strict";a.r(t),a.d(t,{$$typeof:()=>i,__esModule:()=>n,default:()=>c,viewport:()=>l});var r=a(95153);let s=(0,r.createProxy)(String.raw`/Users/theodorosiakovou/Projects/ai-platform/src/app/layout.tsx`),{__esModule:n,$$typeof:i}=s,o=s.default,l=s.viewport,c=o},65554:()=>{}};